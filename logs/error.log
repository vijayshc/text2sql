2025-08-09 12:04:04,412 - ERROR - [vector_store_client.py:269] - Error searching similar vectors in collection query_embeddings: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /collections/query_embeddings/search (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7b0213c2c350>: Failed to establish a new connection: [Errno 111] Connection refused'))
Traceback (most recent call last):
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/connection.py", line 203, in _new_conn
    sock = connection.create_connection(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/connectionpool.py", line 791, in urlopen
    response = self._make_request(
               ^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/connectionpool.py", line 497, in _make_request
    conn.request(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/connection.py", line 395, in request
    self.endheaders()
  File "/home/vijay/anaconda3/lib/python3.11/http/client.py", line 1289, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/home/vijay/anaconda3/lib/python3.11/http/client.py", line 1048, in _send_output
    self.send(msg)
  File "/home/vijay/anaconda3/lib/python3.11/http/client.py", line 986, in send
    self.connect()
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/connection.py", line 243, in connect
    self.sock = self._new_conn()
                ^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/connection.py", line 218, in _new_conn
    raise NewConnectionError(
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7b0213c2c350>: Failed to establish a new connection: [Errno 111] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/requests/adapters.py", line 486, in send
    resp = conn.urlopen(
           ^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/connectionpool.py", line 845, in urlopen
    retries = retries.increment(
              ^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/util/retry.py", line 515, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /collections/query_embeddings/search (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7b0213c2c350>: Failed to establish a new connection: [Errno 111] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/vijay/gitrepo/text2sql/src/utils/vector_store_client.py", line 238, in search_similar
    response = self.session.post(
               ^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/requests/sessions.py", line 637, in post
    return self.request("POST", url, data=data, json=json, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/requests/adapters.py", line 519, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /collections/query_embeddings/search (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7b0213c2c350>: Failed to establish a new connection: [Errno 111] Connection refused'))
2025-08-09 12:04:04,417 - ERROR - [vector_store_client.py:50] - ChromaDB service connection error: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /health (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7b02138bd310>: Failed to establish a new connection: [Errno 111] Connection refused'))
Traceback (most recent call last):
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/connection.py", line 203, in _new_conn
    sock = connection.create_connection(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/connectionpool.py", line 791, in urlopen
    response = self._make_request(
               ^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/connectionpool.py", line 497, in _make_request
    conn.request(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/connection.py", line 395, in request
    self.endheaders()
  File "/home/vijay/anaconda3/lib/python3.11/http/client.py", line 1289, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/home/vijay/anaconda3/lib/python3.11/http/client.py", line 1048, in _send_output
    self.send(msg)
  File "/home/vijay/anaconda3/lib/python3.11/http/client.py", line 986, in send
    self.connect()
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/connection.py", line 243, in connect
    self.sock = self._new_conn()
                ^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/connection.py", line 218, in _new_conn
    raise NewConnectionError(
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7b02138bd310>: Failed to establish a new connection: [Errno 111] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/requests/adapters.py", line 486, in send
    resp = conn.urlopen(
           ^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/connectionpool.py", line 845, in urlopen
    retries = retries.increment(
              ^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/util/retry.py", line 515, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /health (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7b02138bd310>: Failed to establish a new connection: [Errno 111] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/vijay/gitrepo/text2sql/src/utils/vector_store_client.py", line 39, in connect
    response = self.session.get(f"{self.service_url}/health", timeout=10)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/requests/sessions.py", line 602, in get
    return self.request("GET", url, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/requests/adapters.py", line 519, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /health (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7b02138bd310>: Failed to establish a new connection: [Errno 111] Connection refused'))
2025-08-09 12:04:04,789 - ERROR - [llm_engine.py:263] - [SQL_GEN] Completion generation error after 0.37s: Error code: 400 - [{'error': {'code': 400, 'message': 'Developer instruction is not enabled for models/gemma-3-27b-it', 'status': 'INVALID_ARGUMENT'}}]
Traceback (most recent call last):
  File "/home/vijay/gitrepo/text2sql/src/utils/llm_engine.py", line 237, in generate_completion
    response = self.client.chat.completions.create(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/_utils/_utils.py", line 274, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/resources/chat/completions.py", line 668, in create
    return self._post(
           ^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/_base_client.py", line 1260, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/_base_client.py", line 937, in request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/_base_client.py", line 1041, in _request
    raise self._make_status_error_from_response(err.response) from None
openai.BadRequestError: Error code: 400 - [{'error': {'code': 400, 'message': 'Developer instruction is not enabled for models/gemma-3-27b-it', 'status': 'INVALID_ARGUMENT'}}]
2025-08-09 12:04:04,805 - ERROR - [azure_client.py:138] - SQL generation error after 0.39s: Error code: 400 - [{'error': {'code': 400, 'message': 'Developer instruction is not enabled for models/gemma-3-27b-it', 'status': 'INVALID_ARGUMENT'}}]
Traceback (most recent call last):
  File "/home/vijay/gitrepo/text2sql/src/utils/azure_client.py", line 117, in generate_sql
    raw_response = self.llm_engine.generate_completion(messages, log_prefix="SQL_GEN")
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/gitrepo/text2sql/src/utils/llm_engine.py", line 237, in generate_completion
    response = self.client.chat.completions.create(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/_utils/_utils.py", line 274, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/resources/chat/completions.py", line 668, in create
    return self._post(
           ^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/_base_client.py", line 1260, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/_base_client.py", line 937, in request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/_base_client.py", line 1041, in _request
    raise self._make_status_error_from_response(err.response) from None
openai.BadRequestError: Error code: 400 - [{'error': {'code': 400, 'message': 'Developer instruction is not enabled for models/gemma-3-27b-it', 'status': 'INVALID_ARGUMENT'}}]
2025-08-09 12:04:46,793 - ERROR - [llm_engine.py:263] - [SQL_GEN] Completion generation error after 0.37s: Error code: 400 - [{'error': {'code': 400, 'message': 'Developer instruction is not enabled for models/gemma-3-27b-it', 'status': 'INVALID_ARGUMENT'}}]
Traceback (most recent call last):
  File "/home/vijay/gitrepo/text2sql/src/utils/llm_engine.py", line 237, in generate_completion
    response = self.client.chat.completions.create(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/_utils/_utils.py", line 274, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/resources/chat/completions.py", line 668, in create
    return self._post(
           ^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/_base_client.py", line 1260, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/_base_client.py", line 937, in request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/_base_client.py", line 1041, in _request
    raise self._make_status_error_from_response(err.response) from None
openai.BadRequestError: Error code: 400 - [{'error': {'code': 400, 'message': 'Developer instruction is not enabled for models/gemma-3-27b-it', 'status': 'INVALID_ARGUMENT'}}]
2025-08-09 12:04:46,800 - ERROR - [azure_client.py:138] - SQL generation error after 0.38s: Error code: 400 - [{'error': {'code': 400, 'message': 'Developer instruction is not enabled for models/gemma-3-27b-it', 'status': 'INVALID_ARGUMENT'}}]
Traceback (most recent call last):
  File "/home/vijay/gitrepo/text2sql/src/utils/azure_client.py", line 117, in generate_sql
    raw_response = self.llm_engine.generate_completion(messages, log_prefix="SQL_GEN")
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/gitrepo/text2sql/src/utils/llm_engine.py", line 237, in generate_completion
    response = self.client.chat.completions.create(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/_utils/_utils.py", line 274, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/resources/chat/completions.py", line 668, in create
    return self._post(
           ^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/_base_client.py", line 1260, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/_base_client.py", line 937, in request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/_base_client.py", line 1041, in _request
    raise self._make_status_error_from_response(err.response) from None
openai.BadRequestError: Error code: 400 - [{'error': {'code': 400, 'message': 'Developer instruction is not enabled for models/gemma-3-27b-it', 'status': 'INVALID_ARGUMENT'}}]
2025-08-09 12:07:01,474 - ERROR - [llm_engine.py:263] - [Knowledge QA] Completion generation error after 0.33s: Error code: 400 - [{'error': {'code': 400, 'message': 'Developer instruction is not enabled for models/gemma-3-27b-it', 'status': 'INVALID_ARGUMENT'}}]
Traceback (most recent call last):
  File "/home/vijay/gitrepo/text2sql/src/utils/llm_engine.py", line 203, in generate_completion
    response = self.client.chat.completions.create(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/_utils/_utils.py", line 274, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/resources/chat/completions.py", line 668, in create
    return self._post(
           ^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/_base_client.py", line 1260, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/_base_client.py", line 937, in request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/_base_client.py", line 1041, in _request
    raise self._make_status_error_from_response(err.response) from None
openai.BadRequestError: Error code: 400 - [{'error': {'code': 400, 'message': 'Developer instruction is not enabled for models/gemma-3-27b-it', 'status': 'INVALID_ARGUMENT'}}]
2025-08-09 12:09:15,957 - ERROR - [llm_engine.py:263] - [MCP-ServerSelection] Completion generation error after 0.34s: Error code: 400 - [{'error': {'code': 400, 'message': 'Developer instruction is not enabled for models/gemma-3-27b-it', 'status': 'INVALID_ARGUMENT'}}]
Traceback (most recent call last):
  File "/home/vijay/gitrepo/text2sql/src/utils/llm_engine.py", line 237, in generate_completion
    response = self.client.chat.completions.create(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/_utils/_utils.py", line 274, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/resources/chat/completions.py", line 668, in create
    return self._post(
           ^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/_base_client.py", line 1260, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/_base_client.py", line 937, in request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/_base_client.py", line 1041, in _request
    raise self._make_status_error_from_response(err.response) from None
openai.BadRequestError: Error code: 400 - [{'error': {'code': 400, 'message': 'Developer instruction is not enabled for models/gemma-3-27b-it', 'status': 'INVALID_ARGUMENT'}}]
2025-08-09 12:09:15,958 - ERROR - [mcp_client_manager.py:1236] - Error selecting MCP server for query
Traceback (most recent call last):
  File "/home/vijay/gitrepo/text2sql/src/utils/mcp_client_manager.py", line 1208, in select_server_for_query
    response = llm_engine.generate_completion(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/gitrepo/text2sql/src/utils/llm_engine.py", line 237, in generate_completion
    response = self.client.chat.completions.create(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/_utils/_utils.py", line 274, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/resources/chat/completions.py", line 668, in create
    return self._post(
           ^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/_base_client.py", line 1260, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/_base_client.py", line 937, in request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/_base_client.py", line 1041, in _request
    raise self._make_status_error_from_response(err.response) from None
openai.BadRequestError: Error code: 400 - [{'error': {'code': 400, 'message': 'Developer instruction is not enabled for models/gemma-3-27b-it', 'status': 'INVALID_ARGUMENT'}}]
2025-08-09 12:09:16,204 - ERROR - [mcp_client_manager.py:275] - Error connecting to SSE endpoint: http://localhost:8003/sse - unhandled errors in a TaskGroup (1 sub-exception)
2025-08-09 12:14:41,482 - ERROR - [mcp_client_manager.py:275] - Error connecting to SSE endpoint: http://localhost:8003/sse - unhandled errors in a TaskGroup (1 sub-exception)
2025-08-11 10:17:18,723 - ERROR - [vector_store_client.py:50] - ChromaDB service connection error: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /health (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x79d511cc9450>: Failed to establish a new connection: [Errno 111] Connection refused'))
Traceback (most recent call last):
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/connection.py", line 203, in _new_conn
    sock = connection.create_connection(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/connectionpool.py", line 791, in urlopen
    response = self._make_request(
               ^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/connectionpool.py", line 497, in _make_request
    conn.request(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/connection.py", line 395, in request
    self.endheaders()
  File "/home/vijay/anaconda3/lib/python3.11/http/client.py", line 1289, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/home/vijay/anaconda3/lib/python3.11/http/client.py", line 1048, in _send_output
    self.send(msg)
  File "/home/vijay/anaconda3/lib/python3.11/http/client.py", line 986, in send
    self.connect()
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/connection.py", line 243, in connect
    self.sock = self._new_conn()
                ^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/connection.py", line 218, in _new_conn
    raise NewConnectionError(
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x79d511cc9450>: Failed to establish a new connection: [Errno 111] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/requests/adapters.py", line 486, in send
    resp = conn.urlopen(
           ^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/connectionpool.py", line 845, in urlopen
    retries = retries.increment(
              ^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/util/retry.py", line 515, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /health (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x79d511cc9450>: Failed to establish a new connection: [Errno 111] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/vijay/gitrepo/copilot/text2sql/src/utils/vector_store_client.py", line 39, in connect
    response = self.session.get(f"{self.service_url}/health", timeout=10)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/requests/sessions.py", line 602, in get
    return self.request("GET", url, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/requests/adapters.py", line 519, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /health (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x79d511cc9450>: Failed to establish a new connection: [Errno 111] Connection refused'))
2025-08-11 10:17:18,730 - ERROR - [vector_store_client.py:137] - Error initializing collection knowledge_chunks: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /collections/knowledge_chunks (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x79d511b5d490>: Failed to establish a new connection: [Errno 111] Connection refused'))
Traceback (most recent call last):
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/connection.py", line 203, in _new_conn
    sock = connection.create_connection(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/connectionpool.py", line 791, in urlopen
    response = self._make_request(
               ^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/connectionpool.py", line 497, in _make_request
    conn.request(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/connection.py", line 395, in request
    self.endheaders()
  File "/home/vijay/anaconda3/lib/python3.11/http/client.py", line 1289, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/home/vijay/anaconda3/lib/python3.11/http/client.py", line 1048, in _send_output
    self.send(msg)
  File "/home/vijay/anaconda3/lib/python3.11/http/client.py", line 986, in send
    self.connect()
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/connection.py", line 243, in connect
    self.sock = self._new_conn()
                ^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/connection.py", line 218, in _new_conn
    raise NewConnectionError(
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x79d511b5d490>: Failed to establish a new connection: [Errno 111] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/requests/adapters.py", line 486, in send
    resp = conn.urlopen(
           ^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/connectionpool.py", line 845, in urlopen
    retries = retries.increment(
              ^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/util/retry.py", line 515, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /collections/knowledge_chunks (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x79d511b5d490>: Failed to establish a new connection: [Errno 111] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/vijay/gitrepo/copilot/text2sql/src/utils/vector_store_client.py", line 119, in init_collection
    response = self.session.get(f"{self.service_url}/collections/{collection_name}")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/requests/sessions.py", line 602, in get
    return self.request("GET", url, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/requests/adapters.py", line 519, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /collections/knowledge_chunks (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x79d511b5d490>: Failed to establish a new connection: [Errno 111] Connection refused'))
2025-08-11 10:20:51,360 - ERROR - [vector_store_client.py:50] - ChromaDB service connection error: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /health (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7d25d4b61510>: Failed to establish a new connection: [Errno 111] Connection refused'))
Traceback (most recent call last):
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/connection.py", line 203, in _new_conn
    sock = connection.create_connection(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/connectionpool.py", line 791, in urlopen
    response = self._make_request(
               ^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/connectionpool.py", line 497, in _make_request
    conn.request(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/connection.py", line 395, in request
    self.endheaders()
  File "/home/vijay/anaconda3/lib/python3.11/http/client.py", line 1289, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/home/vijay/anaconda3/lib/python3.11/http/client.py", line 1048, in _send_output
    self.send(msg)
  File "/home/vijay/anaconda3/lib/python3.11/http/client.py", line 986, in send
    self.connect()
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/connection.py", line 243, in connect
    self.sock = self._new_conn()
                ^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/connection.py", line 218, in _new_conn
    raise NewConnectionError(
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7d25d4b61510>: Failed to establish a new connection: [Errno 111] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/requests/adapters.py", line 486, in send
    resp = conn.urlopen(
           ^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/connectionpool.py", line 845, in urlopen
    retries = retries.increment(
              ^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/util/retry.py", line 515, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /health (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7d25d4b61510>: Failed to establish a new connection: [Errno 111] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/vijay/gitrepo/copilot/text2sql/src/utils/vector_store_client.py", line 39, in connect
    response = self.session.get(f"{self.service_url}/health", timeout=10)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/requests/sessions.py", line 602, in get
    return self.request("GET", url, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/requests/adapters.py", line 519, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /health (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7d25d4b61510>: Failed to establish a new connection: [Errno 111] Connection refused'))
2025-08-11 10:20:51,368 - ERROR - [vector_store_client.py:137] - Error initializing collection knowledge_chunks: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /collections/knowledge_chunks (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7d25d4bf1410>: Failed to establish a new connection: [Errno 111] Connection refused'))
Traceback (most recent call last):
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/connection.py", line 203, in _new_conn
    sock = connection.create_connection(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/connectionpool.py", line 791, in urlopen
    response = self._make_request(
               ^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/connectionpool.py", line 497, in _make_request
    conn.request(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/connection.py", line 395, in request
    self.endheaders()
  File "/home/vijay/anaconda3/lib/python3.11/http/client.py", line 1289, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/home/vijay/anaconda3/lib/python3.11/http/client.py", line 1048, in _send_output
    self.send(msg)
  File "/home/vijay/anaconda3/lib/python3.11/http/client.py", line 986, in send
    self.connect()
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/connection.py", line 243, in connect
    self.sock = self._new_conn()
                ^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/connection.py", line 218, in _new_conn
    raise NewConnectionError(
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7d25d4bf1410>: Failed to establish a new connection: [Errno 111] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/requests/adapters.py", line 486, in send
    resp = conn.urlopen(
           ^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/connectionpool.py", line 845, in urlopen
    retries = retries.increment(
              ^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/util/retry.py", line 515, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /collections/knowledge_chunks (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7d25d4bf1410>: Failed to establish a new connection: [Errno 111] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/vijay/gitrepo/copilot/text2sql/src/utils/vector_store_client.py", line 119, in init_collection
    response = self.session.get(f"{self.service_url}/collections/{collection_name}")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/requests/sessions.py", line 602, in get
    return self.request("GET", url, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/requests/adapters.py", line 519, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /collections/knowledge_chunks (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7d25d4bf1410>: Failed to establish a new connection: [Errno 111] Connection refused'))
2025-08-11 10:21:37,021 - ERROR - [vector_store_client.py:50] - ChromaDB service connection error: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /health (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7d25d4235e90>: Failed to establish a new connection: [Errno 111] Connection refused'))
Traceback (most recent call last):
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/connection.py", line 203, in _new_conn
    sock = connection.create_connection(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/connectionpool.py", line 791, in urlopen
    response = self._make_request(
               ^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/connectionpool.py", line 497, in _make_request
    conn.request(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/connection.py", line 395, in request
    self.endheaders()
  File "/home/vijay/anaconda3/lib/python3.11/http/client.py", line 1289, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/home/vijay/anaconda3/lib/python3.11/http/client.py", line 1048, in _send_output
    self.send(msg)
  File "/home/vijay/anaconda3/lib/python3.11/http/client.py", line 986, in send
    self.connect()
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/connection.py", line 243, in connect
    self.sock = self._new_conn()
                ^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/connection.py", line 218, in _new_conn
    raise NewConnectionError(
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7d25d4235e90>: Failed to establish a new connection: [Errno 111] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/requests/adapters.py", line 486, in send
    resp = conn.urlopen(
           ^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/connectionpool.py", line 845, in urlopen
    retries = retries.increment(
              ^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/urllib3/util/retry.py", line 515, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /health (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7d25d4235e90>: Failed to establish a new connection: [Errno 111] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/vijay/gitrepo/copilot/text2sql/src/utils/vector_store_client.py", line 39, in connect
    response = self.session.get(f"{self.service_url}/health", timeout=10)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/requests/sessions.py", line 602, in get
    return self.request("GET", url, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/requests/adapters.py", line 519, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8001): Max retries exceeded with url: /health (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7d25d4235e90>: Failed to establish a new connection: [Errno 111] Connection refused'))
2025-08-11 14:03:05,055 - ERROR - [user_manager.py:558] - Error logging audit event: (sqlite3.OperationalError) database is locked
[SQL: INSERT INTO audit_logs (user_id, action, details, timestamp, ip_address, query_text, sql_query, response) VALUES (?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: (1, 'get_table_suggestions', 'Retrieved 5 table suggestions for workspace: ', '2025-08-11 06:02:45.005752', '127.0.0.1', None, None, None)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
2025-08-11 14:35:49,836 - ERROR - [autogen_orchestrator.py:219] - Team run failed: AutoGen AgentChat or model client missing
Traceback (most recent call last):
  File "/home/vijay/gitrepo/copilot/text2sql/src/services/autogen_orchestrator.py", line 199, in run_team
    agents_with_wb, team_obj = await self._build_agents_team(team)
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/gitrepo/copilot/text2sql/src/services/autogen_orchestrator.py", line 177, in _build_agents_team
    raise RuntimeError("AutoGen AgentChat or model client missing")
RuntimeError: AutoGen AgentChat or model client missing

2025-08-11 14:38:48,579 - ERROR - [autogen_orchestrator.py:152] - Failed to init OpenAIChatCompletionClient: model_info is required when model name is not a valid OpenAI model
Traceback (most recent call last):
  File "/home/vijay/gitrepo/copilot/text2sql/src/services/autogen_orchestrator.py", line 139, in _build_model_client
    client = OpenAIChatCompletionClient(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_openai_client.py", line 1474, in __init__
    super().__init__(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_openai_client.py", line 435, in __init__
    self._model_info = _model_info.get_info(create_args["model"])
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_model_info.py", line 491, in get_info
    raise ValueError("model_info is required when model name is not a valid OpenAI model")
ValueError: model_info is required when model name is not a valid OpenAI model

2025-08-11 14:38:48,672 - ERROR - [autogen_orchestrator.py:152] - Failed to init OpenAIChatCompletionClient: model_info is required when model name is not a valid OpenAI model
Traceback (most recent call last):
  File "/home/vijay/gitrepo/copilot/text2sql/src/services/autogen_orchestrator.py", line 139, in _build_model_client
    client = OpenAIChatCompletionClient(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_openai_client.py", line 1474, in __init__
    super().__init__(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_openai_client.py", line 435, in __init__
    self._model_info = _model_info.get_info(create_args["model"])
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_model_info.py", line 491, in get_info
    raise ValueError("model_info is required when model name is not a valid OpenAI model")
ValueError: model_info is required when model name is not a valid OpenAI model

2025-08-11 14:38:48,673 - ERROR - [autogen_orchestrator.py:255] - Team run failed: Model client init failed. Check OPENROUTER_MODEL, OPENROUTER_API_KEY, OPENROUTER_BASE_URL / OPENAI_* env.
Traceback (most recent call last):
  File "/home/vijay/gitrepo/copilot/text2sql/src/services/autogen_orchestrator.py", line 235, in run_team
    agents_with_wb, team_obj = await self._build_agents_team(team)
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/gitrepo/copilot/text2sql/src/services/autogen_orchestrator.py", line 213, in _build_agents_team
    raise RuntimeError("Model client init failed. Check OPENROUTER_MODEL, OPENROUTER_API_KEY, OPENROUTER_BASE_URL / OPENAI_* env.")
RuntimeError: Model client init failed. Check OPENROUTER_MODEL, OPENROUTER_API_KEY, OPENROUTER_BASE_URL / OPENAI_* env.

2025-08-11 14:56:00,298 - ERROR - [autogen_orchestrator.py:154] - Failed to init OpenAIChatCompletionClient: model_info is required when model name is not a valid OpenAI model
Traceback (most recent call last):
  File "/home/vijay/gitrepo/copilot/text2sql/src/services/autogen_orchestrator.py", line 140, in _build_model_client
    client = OpenAIChatCompletionClient(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_openai_client.py", line 1474, in __init__
    super().__init__(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_openai_client.py", line 435, in __init__
    self._model_info = _model_info.get_info(create_args["model"])
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_model_info.py", line 491, in get_info
    raise ValueError("model_info is required when model name is not a valid OpenAI model")
ValueError: model_info is required when model name is not a valid OpenAI model

2025-08-11 14:56:00,558 - ERROR - [autogen_orchestrator.py:154] - Failed to init OpenAIChatCompletionClient: model_info is required when model name is not a valid OpenAI model
Traceback (most recent call last):
  File "/home/vijay/gitrepo/copilot/text2sql/src/services/autogen_orchestrator.py", line 140, in _build_model_client
    client = OpenAIChatCompletionClient(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_openai_client.py", line 1474, in __init__
    super().__init__(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_openai_client.py", line 435, in __init__
    self._model_info = _model_info.get_info(create_args["model"])
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_model_info.py", line 491, in get_info
    raise ValueError("model_info is required when model name is not a valid OpenAI model")
ValueError: model_info is required when model name is not a valid OpenAI model

2025-08-11 14:56:03,013 - ERROR - [autogen_orchestrator.py:287] - Team run failed: ValueError: Invalid name: 1:get_mapping_details. Only letters, numbers, '_' and '-' are allowed.
Traceback:
Traceback (most recent call last):

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_agentchat/teams/_group_chat/_chat_agent_container.py", line 133, in handle_request
    async for msg in self._agent.on_messages_stream(self._message_buffer, ctx.cancellation_token):

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_agentchat/agents/_assistant_agent.py", line 953, in on_messages_stream
    async for inference_output in self._call_llm(

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_agentchat/agents/_assistant_agent.py", line 1107, in _call_llm
    model_result = await model_client.create(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_openai_client.py", line 660, in create
    create_params = self._process_create_args(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_openai_client.py", line 618, in _process_create_args
    converted_tools = convert_tools(tools)
                      ^^^^^^^^^^^^^^^^^^^^

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_openai_client.py", line 270, in convert_tools
    assert_valid_name(tool_param["function"]["name"])

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_utils.py", line 11, in assert_valid_name
    raise ValueError(f"Invalid name: {name}. Only letters, numbers, '_' and '-' are allowed.")

ValueError: Invalid name: 1:get_mapping_details. Only letters, numbers, '_' and '-' are allowed.

Traceback (most recent call last):
  File "/home/vijay/gitrepo/copilot/text2sql/src/services/autogen_orchestrator.py", line 283, in run_team
    result = await with_all_workbenches()
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/gitrepo/copilot/text2sql/src/services/autogen_orchestrator.py", line 274, in with_all_workbenches
    result = await team_obj.run(task=task)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_agentchat/teams/_group_chat/_base_group_chat.py", line 340, in run
    async for message in self.run_stream(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_agentchat/teams/_group_chat/_base_group_chat.py", line 554, in run_stream
    raise RuntimeError(str(message.error))
RuntimeError: ValueError: Invalid name: 1:get_mapping_details. Only letters, numbers, '_' and '-' are allowed.
Traceback:
Traceback (most recent call last):

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_agentchat/teams/_group_chat/_chat_agent_container.py", line 133, in handle_request
    async for msg in self._agent.on_messages_stream(self._message_buffer, ctx.cancellation_token):

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_agentchat/agents/_assistant_agent.py", line 953, in on_messages_stream
    async for inference_output in self._call_llm(

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_agentchat/agents/_assistant_agent.py", line 1107, in _call_llm
    model_result = await model_client.create(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_openai_client.py", line 660, in create
    create_params = self._process_create_args(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_openai_client.py", line 618, in _process_create_args
    converted_tools = convert_tools(tools)
                      ^^^^^^^^^^^^^^^^^^^^

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_openai_client.py", line 270, in convert_tools
    assert_valid_name(tool_param["function"]["name"])

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_utils.py", line 11, in assert_valid_name
    raise ValueError(f"Invalid name: {name}. Only letters, numbers, '_' and '-' are allowed.")

ValueError: Invalid name: 1:get_mapping_details. Only letters, numbers, '_' and '-' are allowed.


2025-08-11 15:01:01,956 - ERROR - [user_manager.py:558] - Error logging audit event: <built-in method commit of sqlite3.Connection object at 0x7fdf074c24d0> returned NULL without setting an exception
2025-08-11 15:01:20,307 - ERROR - [autogen_orchestrator.py:185] - Failed to init OpenAIChatCompletionClient: model_info is required when model name is not a valid OpenAI model
Traceback (most recent call last):
  File "/home/vijay/gitrepo/copilot/text2sql/src/services/autogen_orchestrator.py", line 171, in _build_model_client
    client = OpenAIChatCompletionClient(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_openai_client.py", line 1474, in __init__
    super().__init__(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_openai_client.py", line 435, in __init__
    self._model_info = _model_info.get_info(create_args["model"])
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_model_info.py", line 491, in get_info
    raise ValueError("model_info is required when model name is not a valid OpenAI model")
ValueError: model_info is required when model name is not a valid OpenAI model

2025-08-11 15:01:20,675 - ERROR - [autogen_orchestrator.py:185] - Failed to init OpenAIChatCompletionClient: model_info is required when model name is not a valid OpenAI model
Traceback (most recent call last):
  File "/home/vijay/gitrepo/copilot/text2sql/src/services/autogen_orchestrator.py", line 171, in _build_model_client
    client = OpenAIChatCompletionClient(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_openai_client.py", line 1474, in __init__
    super().__init__(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_openai_client.py", line 435, in __init__
    self._model_info = _model_info.get_info(create_args["model"])
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_model_info.py", line 491, in get_info
    raise ValueError("model_info is required when model name is not a valid OpenAI model")
ValueError: model_info is required when model name is not a valid OpenAI model

2025-08-11 15:01:27,616 - ERROR - [autogen_orchestrator.py:318] - Team run failed: TypeError: Cannot instantiate typing.Union
Traceback:
Traceback (most recent call last):

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_agentchat/teams/_group_chat/_chat_agent_container.py", line 133, in handle_request
    async for msg in self._agent.on_messages_stream(self._message_buffer, ctx.cancellation_token):

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_agentchat/agents/_assistant_agent.py", line 953, in on_messages_stream
    async for inference_output in self._call_llm(

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_agentchat/agents/_assistant_agent.py", line 1107, in _call_llm
    model_result = await model_client.create(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_openai_client.py", line 660, in create
    create_params = self._process_create_args(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_openai_client.py", line 602, in _process_create_args
    oai_messages_nested = [
                          ^

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_openai_client.py", line 603, in <listcomp>
    to_oai_type(

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_openai_client.py", line 184, in to_oai_type
    result = transformer(message, context)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_transformation/registry.py", line 64, in transformer
    kwargs.update(func(message, context))
                  ^^^^^^^^^^^^^^^^^^^^^^

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_message_transform.py", line 250, in _set_tool_calls
    "tool_calls": [func_call_to_oai(x) for x in message.content],
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_message_transform.py", line 250, in <listcomp>
    "tool_calls": [func_call_to_oai(x) for x in message.content],
                   ^^^^^^^^^^^^^^^^^^^

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_message_transform.py", line 176, in func_call_to_oai
    return ChatCompletionMessageToolCallParam(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/home/vijay/anaconda3/lib/python3.11/typing.py", line 1275, in __call__
    result = self.__origin__(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/home/vijay/anaconda3/lib/python3.11/typing.py", line 472, in __call__
    raise TypeError(f"Cannot instantiate {self!r}")

TypeError: Cannot instantiate typing.Union

Traceback (most recent call last):
  File "/home/vijay/gitrepo/copilot/text2sql/src/services/autogen_orchestrator.py", line 314, in run_team
    result = await with_all_workbenches()
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/gitrepo/copilot/text2sql/src/services/autogen_orchestrator.py", line 305, in with_all_workbenches
    result = await team_obj.run(task=task)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_agentchat/teams/_group_chat/_base_group_chat.py", line 340, in run
    async for message in self.run_stream(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_agentchat/teams/_group_chat/_base_group_chat.py", line 554, in run_stream
    raise RuntimeError(str(message.error))
RuntimeError: TypeError: Cannot instantiate typing.Union
Traceback:
Traceback (most recent call last):

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_agentchat/teams/_group_chat/_chat_agent_container.py", line 133, in handle_request
    async for msg in self._agent.on_messages_stream(self._message_buffer, ctx.cancellation_token):

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_agentchat/agents/_assistant_agent.py", line 953, in on_messages_stream
    async for inference_output in self._call_llm(

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_agentchat/agents/_assistant_agent.py", line 1107, in _call_llm
    model_result = await model_client.create(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_openai_client.py", line 660, in create
    create_params = self._process_create_args(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_openai_client.py", line 602, in _process_create_args
    oai_messages_nested = [
                          ^

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_openai_client.py", line 603, in <listcomp>
    to_oai_type(

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_openai_client.py", line 184, in to_oai_type
    result = transformer(message, context)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_transformation/registry.py", line 64, in transformer
    kwargs.update(func(message, context))
                  ^^^^^^^^^^^^^^^^^^^^^^

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_message_transform.py", line 250, in _set_tool_calls
    "tool_calls": [func_call_to_oai(x) for x in message.content],
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_message_transform.py", line 250, in <listcomp>
    "tool_calls": [func_call_to_oai(x) for x in message.content],
                   ^^^^^^^^^^^^^^^^^^^

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_message_transform.py", line 176, in func_call_to_oai
    return ChatCompletionMessageToolCallParam(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/home/vijay/anaconda3/lib/python3.11/typing.py", line 1275, in __call__
    result = self.__origin__(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/home/vijay/anaconda3/lib/python3.11/typing.py", line 472, in __call__
    raise TypeError(f"Cannot instantiate {self!r}")

TypeError: Cannot instantiate typing.Union


2025-08-11 15:05:28,216 - ERROR - [autogen_orchestrator.py:185] - Failed to init OpenAIChatCompletionClient: model_info is required when model name is not a valid OpenAI model
Traceback (most recent call last):
  File "/home/vijay/gitrepo/copilot/text2sql/src/services/autogen_orchestrator.py", line 171, in _build_model_client
    client = OpenAIChatCompletionClient(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_openai_client.py", line 1474, in __init__
    super().__init__(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_openai_client.py", line 435, in __init__
    self._model_info = _model_info.get_info(create_args["model"])
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_model_info.py", line 491, in get_info
    raise ValueError("model_info is required when model name is not a valid OpenAI model")
ValueError: model_info is required when model name is not a valid OpenAI model

2025-08-11 15:05:28,275 - ERROR - [autogen_orchestrator.py:185] - Failed to init OpenAIChatCompletionClient: model_info is required when model name is not a valid OpenAI model
Traceback (most recent call last):
  File "/home/vijay/gitrepo/copilot/text2sql/src/services/autogen_orchestrator.py", line 171, in _build_model_client
    client = OpenAIChatCompletionClient(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_openai_client.py", line 1474, in __init__
    super().__init__(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_openai_client.py", line 435, in __init__
    self._model_info = _model_info.get_info(create_args["model"])
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_model_info.py", line 491, in get_info
    raise ValueError("model_info is required when model name is not a valid OpenAI model")
ValueError: model_info is required when model name is not a valid OpenAI model

2025-08-11 15:06:22,690 - ERROR - [autogen_orchestrator.py:185] - Failed to init OpenAIChatCompletionClient: model_info is required when model name is not a valid OpenAI model
Traceback (most recent call last):
  File "/home/vijay/gitrepo/copilot/text2sql/src/services/autogen_orchestrator.py", line 171, in _build_model_client
    client = OpenAIChatCompletionClient(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_openai_client.py", line 1474, in __init__
    super().__init__(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_openai_client.py", line 435, in __init__
    self._model_info = _model_info.get_info(create_args["model"])
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_model_info.py", line 491, in get_info
    raise ValueError("model_info is required when model name is not a valid OpenAI model")
ValueError: model_info is required when model name is not a valid OpenAI model

2025-08-11 15:06:22,754 - ERROR - [autogen_orchestrator.py:185] - Failed to init OpenAIChatCompletionClient: model_info is required when model name is not a valid OpenAI model
Traceback (most recent call last):
  File "/home/vijay/gitrepo/copilot/text2sql/src/services/autogen_orchestrator.py", line 171, in _build_model_client
    client = OpenAIChatCompletionClient(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_openai_client.py", line 1474, in __init__
    super().__init__(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_openai_client.py", line 435, in __init__
    self._model_info = _model_info.get_info(create_args["model"])
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_model_info.py", line 491, in get_info
    raise ValueError("model_info is required when model name is not a valid OpenAI model")
ValueError: model_info is required when model name is not a valid OpenAI model

2025-08-11 15:07:18,898 - ERROR - [autogen_orchestrator.py:185] - Failed to init OpenAIChatCompletionClient: model_info is required when model name is not a valid OpenAI model
Traceback (most recent call last):
  File "/home/vijay/gitrepo/copilot/text2sql/src/services/autogen_orchestrator.py", line 171, in _build_model_client
    client = OpenAIChatCompletionClient(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_openai_client.py", line 1474, in __init__
    super().__init__(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_openai_client.py", line 435, in __init__
    self._model_info = _model_info.get_info(create_args["model"])
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_model_info.py", line 491, in get_info
    raise ValueError("model_info is required when model name is not a valid OpenAI model")
ValueError: model_info is required when model name is not a valid OpenAI model

2025-08-11 15:07:18,962 - ERROR - [autogen_orchestrator.py:185] - Failed to init OpenAIChatCompletionClient: model_info is required when model name is not a valid OpenAI model
Traceback (most recent call last):
  File "/home/vijay/gitrepo/copilot/text2sql/src/services/autogen_orchestrator.py", line 171, in _build_model_client
    client = OpenAIChatCompletionClient(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_openai_client.py", line 1474, in __init__
    super().__init__(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_openai_client.py", line 435, in __init__
    self._model_info = _model_info.get_info(create_args["model"])
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_model_info.py", line 491, in get_info
    raise ValueError("model_info is required when model name is not a valid OpenAI model")
ValueError: model_info is required when model name is not a valid OpenAI model

2025-08-11 15:08:10,251 - ERROR - [autogen_orchestrator.py:185] - Failed to init OpenAIChatCompletionClient: model_info is required when model name is not a valid OpenAI model
Traceback (most recent call last):
  File "/home/vijay/gitrepo/copilot/text2sql/src/services/autogen_orchestrator.py", line 171, in _build_model_client
    client = OpenAIChatCompletionClient(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_openai_client.py", line 1474, in __init__
    super().__init__(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_openai_client.py", line 435, in __init__
    self._model_info = _model_info.get_info(create_args["model"])
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_model_info.py", line 491, in get_info
    raise ValueError("model_info is required when model name is not a valid OpenAI model")
ValueError: model_info is required when model name is not a valid OpenAI model

2025-08-11 15:08:10,310 - ERROR - [autogen_orchestrator.py:185] - Failed to init OpenAIChatCompletionClient: model_info is required when model name is not a valid OpenAI model
Traceback (most recent call last):
  File "/home/vijay/gitrepo/copilot/text2sql/src/services/autogen_orchestrator.py", line 171, in _build_model_client
    client = OpenAIChatCompletionClient(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_openai_client.py", line 1474, in __init__
    super().__init__(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_openai_client.py", line 435, in __init__
    self._model_info = _model_info.get_info(create_args["model"])
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_model_info.py", line 491, in get_info
    raise ValueError("model_info is required when model name is not a valid OpenAI model")
ValueError: model_info is required when model name is not a valid OpenAI model

2025-08-11 17:03:19,131 - ERROR - [autogen_orchestrator.py:582] - Team run failed: 'list' object has no attribute 'terminated'
Traceback (most recent call last):
  File "/home/vijay/gitrepo/copilot/text2sql/src/services/autogen_orchestrator.py", line 576, in run_team
    result = await with_all_workbenches()
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/gitrepo/copilot/text2sql/src/services/autogen_orchestrator.py", line 503, in with_all_workbenches
    result = await team_obj.run(task=task)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_agentchat/teams/_group_chat/_base_group_chat.py", line 340, in run
    async for message in self.run_stream(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_agentchat/teams/_group_chat/_base_group_chat.py", line 534, in run_stream
    await self._runtime.send_message(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_core/_single_threaded_agent_runtime.py", line 385, in send_message
    return await future
           ^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_core/_single_threaded_agent_runtime.py", line 508, in _process_send
    response = await recipient_agent.on_message(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_core/_base_agent.py", line 119, in on_message
    return await self.on_message_impl(message, ctx)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_agentchat/teams/_group_chat/_sequential_routed_agent.py", line 67, in on_message_impl
    return await super().on_message_impl(message, ctx)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_core/_routed_agent.py", line 485, in on_message_impl
    return await h(self, message, ctx)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_core/_routed_agent.py", line 389, in wrapper
    return_value = await func(self, message, ctx)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_agentchat/teams/_group_chat/_base_group_chat_manager.py", line 91, in handle_start
    if self._termination_condition is not None and self._termination_condition.terminated:
                                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'list' object has no attribute 'terminated'

2025-08-11 17:51:20,637 - ERROR - [autogen_orchestrator.py:673] - Team run failed: TypeError: 'NoneType' object is not subscriptable
Traceback:
Traceback (most recent call last):

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_agentchat/teams/_group_chat/_chat_agent_container.py", line 133, in handle_request
    async for msg in self._agent.on_messages_stream(self._message_buffer, ctx.cancellation_token):

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_agentchat/agents/_assistant_agent.py", line 953, in on_messages_stream
    async for inference_output in self._call_llm(

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_agentchat/agents/_assistant_agent.py", line 1107, in _call_llm
    model_result = await model_client.create(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_openai_client.py", line 723, in create
    choice: Union[ParsedChoice[Any], ParsedChoice[BaseModel], Choice] = result.choices[0]
                                                                        ~~~~~~~~~~~~~~^^^

TypeError: 'NoneType' object is not subscriptable

Traceback (most recent call last):
  File "/home/vijay/gitrepo/copilot/text2sql/src/services/autogen_orchestrator.py", line 667, in run_team
    result = await with_all_workbenches()
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/gitrepo/copilot/text2sql/src/services/autogen_orchestrator.py", line 594, in with_all_workbenches
    result = await team_obj.run(task=task)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_agentchat/teams/_group_chat/_base_group_chat.py", line 340, in run
    async for message in self.run_stream(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_agentchat/teams/_group_chat/_base_group_chat.py", line 554, in run_stream
    raise RuntimeError(str(message.error))
RuntimeError: TypeError: 'NoneType' object is not subscriptable
Traceback:
Traceback (most recent call last):

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_agentchat/teams/_group_chat/_chat_agent_container.py", line 133, in handle_request
    async for msg in self._agent.on_messages_stream(self._message_buffer, ctx.cancellation_token):

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_agentchat/agents/_assistant_agent.py", line 953, in on_messages_stream
    async for inference_output in self._call_llm(

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_agentchat/agents/_assistant_agent.py", line 1107, in _call_llm
    model_result = await model_client.create(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_openai_client.py", line 723, in create
    choice: Union[ParsedChoice[Any], ParsedChoice[BaseModel], Choice] = result.choices[0]
                                                                        ~~~~~~~~~~~~~~^^^

TypeError: 'NoneType' object is not subscriptable


2025-08-13 00:55:56,127 - CRITICAL - [llm_engine.py:26] - OPENROUTER_API_KEY environment variable not set
2025-08-13 01:02:29,259 - CRITICAL - [llm_engine.py:26] - OPENROUTER_API_KEY environment variable not set
2025-08-14 00:23:05,014 - ERROR - [autogen_orchestrator.py:681] - Team run failed: RateLimitError: Error code: 429 - [{'error': {'code': 429, 'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits.', 'status': 'RESOURCE_EXHAUSTED', 'details': [{'@type': 'type.googleapis.com/google.rpc.QuotaFailure', 'violations': [{'quotaMetric': 'generativelanguage.googleapis.com/generate_content_free_tier_requests', 'quotaId': 'GenerateRequestsPerMinutePerProjectPerModel-FreeTier', 'quotaDimensions': {'location': 'global', 'model': 'gemini-2.5-flash'}, 'quotaValue': '10'}]}, {'@type': 'type.googleapis.com/google.rpc.Help', 'links': [{'description': 'Learn more about Gemini API quotas', 'url': 'https://ai.google.dev/gemini-api/docs/rate-limits'}]}, {'@type': 'type.googleapis.com/google.rpc.RetryInfo', 'retryDelay': '52s'}]}}]
Traceback:
Traceback (most recent call last):

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_agentchat/teams/_group_chat/_chat_agent_container.py", line 133, in handle_request
    async for msg in self._agent.on_messages_stream(self._message_buffer, ctx.cancellation_token):

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_agentchat/agents/_assistant_agent.py", line 989, in on_messages_stream
    async for output_event in self._process_model_result(

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_agentchat/agents/_assistant_agent.py", line 1299, in _process_model_result
    async for reflection_response in cls._reflect_on_tool_use_flow(

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_agentchat/agents/_assistant_agent.py", line 1446, in _reflect_on_tool_use_flow
    reflection_result = await model_client.create(
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_openai_client.py", line 691, in create
    result: Union[ParsedChatCompletion[BaseModel], ChatCompletion] = await future
                                                                     ^^^^^^^^^^^^

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/resources/chat/completions.py", line 1412, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/_base_client.py", line 1831, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/_base_client.py", line 1525, in request
    return await self._request(
           ^^^^^^^^^^^^^^^^^^^^

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/_base_client.py", line 1611, in _request
    return await self._retry_request(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/_base_client.py", line 1658, in _retry_request
    return await self._request(
           ^^^^^^^^^^^^^^^^^^^^

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/_base_client.py", line 1611, in _request
    return await self._retry_request(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/_base_client.py", line 1658, in _retry_request
    return await self._request(
           ^^^^^^^^^^^^^^^^^^^^

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/_base_client.py", line 1626, in _request
    raise self._make_status_error_from_response(err.response) from None

openai.RateLimitError: Error code: 429 - [{'error': {'code': 429, 'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits.', 'status': 'RESOURCE_EXHAUSTED', 'details': [{'@type': 'type.googleapis.com/google.rpc.QuotaFailure', 'violations': [{'quotaMetric': 'generativelanguage.googleapis.com/generate_content_free_tier_requests', 'quotaId': 'GenerateRequestsPerMinutePerProjectPerModel-FreeTier', 'quotaDimensions': {'location': 'global', 'model': 'gemini-2.5-flash'}, 'quotaValue': '10'}]}, {'@type': 'type.googleapis.com/google.rpc.Help', 'links': [{'description': 'Learn more about Gemini API quotas', 'url': 'https://ai.google.dev/gemini-api/docs/rate-limits'}]}, {'@type': 'type.googleapis.com/google.rpc.RetryInfo', 'retryDelay': '52s'}]}}]

Traceback (most recent call last):
  File "/home/vijay/gitrepo/copilot/text2sql/src/services/autogen_orchestrator.py", line 675, in run_team
    result = await with_all_workbenches()
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/gitrepo/copilot/text2sql/src/services/autogen_orchestrator.py", line 602, in with_all_workbenches
    result = await team_obj.run(task=task)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_agentchat/teams/_group_chat/_base_group_chat.py", line 340, in run
    async for message in self.run_stream(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_agentchat/teams/_group_chat/_base_group_chat.py", line 554, in run_stream
    raise RuntimeError(str(message.error))
RuntimeError: RateLimitError: Error code: 429 - [{'error': {'code': 429, 'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits.', 'status': 'RESOURCE_EXHAUSTED', 'details': [{'@type': 'type.googleapis.com/google.rpc.QuotaFailure', 'violations': [{'quotaMetric': 'generativelanguage.googleapis.com/generate_content_free_tier_requests', 'quotaId': 'GenerateRequestsPerMinutePerProjectPerModel-FreeTier', 'quotaDimensions': {'location': 'global', 'model': 'gemini-2.5-flash'}, 'quotaValue': '10'}]}, {'@type': 'type.googleapis.com/google.rpc.Help', 'links': [{'description': 'Learn more about Gemini API quotas', 'url': 'https://ai.google.dev/gemini-api/docs/rate-limits'}]}, {'@type': 'type.googleapis.com/google.rpc.RetryInfo', 'retryDelay': '52s'}]}}]
Traceback:
Traceback (most recent call last):

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_agentchat/teams/_group_chat/_chat_agent_container.py", line 133, in handle_request
    async for msg in self._agent.on_messages_stream(self._message_buffer, ctx.cancellation_token):

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_agentchat/agents/_assistant_agent.py", line 989, in on_messages_stream
    async for output_event in self._process_model_result(

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_agentchat/agents/_assistant_agent.py", line 1299, in _process_model_result
    async for reflection_response in cls._reflect_on_tool_use_flow(

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_agentchat/agents/_assistant_agent.py", line 1446, in _reflect_on_tool_use_flow
    reflection_result = await model_client.create(
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_openai_client.py", line 691, in create
    result: Union[ParsedChatCompletion[BaseModel], ChatCompletion] = await future
                                                                     ^^^^^^^^^^^^

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/resources/chat/completions.py", line 1412, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/_base_client.py", line 1831, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/_base_client.py", line 1525, in request
    return await self._request(
           ^^^^^^^^^^^^^^^^^^^^

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/_base_client.py", line 1611, in _request
    return await self._retry_request(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/_base_client.py", line 1658, in _retry_request
    return await self._request(
           ^^^^^^^^^^^^^^^^^^^^

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/_base_client.py", line 1611, in _request
    return await self._retry_request(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/_base_client.py", line 1658, in _retry_request
    return await self._request(
           ^^^^^^^^^^^^^^^^^^^^

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/_base_client.py", line 1626, in _request
    raise self._make_status_error_from_response(err.response) from None

openai.RateLimitError: Error code: 429 - [{'error': {'code': 429, 'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits.', 'status': 'RESOURCE_EXHAUSTED', 'details': [{'@type': 'type.googleapis.com/google.rpc.QuotaFailure', 'violations': [{'quotaMetric': 'generativelanguage.googleapis.com/generate_content_free_tier_requests', 'quotaId': 'GenerateRequestsPerMinutePerProjectPerModel-FreeTier', 'quotaDimensions': {'location': 'global', 'model': 'gemini-2.5-flash'}, 'quotaValue': '10'}]}, {'@type': 'type.googleapis.com/google.rpc.Help', 'links': [{'description': 'Learn more about Gemini API quotas', 'url': 'https://ai.google.dev/gemini-api/docs/rate-limits'}]}, {'@type': 'type.googleapis.com/google.rpc.RetryInfo', 'retryDelay': '52s'}]}}]


2025-08-14 00:23:05,017 - ERROR - [autogen_routes.py:199] - AutoGen chat failed: RateLimitError: Error code: 429 - [{'error': {'code': 429, 'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits.', 'status': 'RESOURCE_EXHAUSTED', 'details': [{'@type': 'type.googleapis.com/google.rpc.QuotaFailure', 'violations': [{'quotaMetric': 'generativelanguage.googleapis.com/generate_content_free_tier_requests', 'quotaId': 'GenerateRequestsPerMinutePerProjectPerModel-FreeTier', 'quotaDimensions': {'location': 'global', 'model': 'gemini-2.5-flash'}, 'quotaValue': '10'}]}, {'@type': 'type.googleapis.com/google.rpc.Help', 'links': [{'description': 'Learn more about Gemini API quotas', 'url': 'https://ai.google.dev/gemini-api/docs/rate-limits'}]}, {'@type': 'type.googleapis.com/google.rpc.RetryInfo', 'retryDelay': '52s'}]}}]
Traceback:
Traceback (most recent call last):

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_agentchat/teams/_group_chat/_chat_agent_container.py", line 133, in handle_request
    async for msg in self._agent.on_messages_stream(self._message_buffer, ctx.cancellation_token):

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_agentchat/agents/_assistant_agent.py", line 989, in on_messages_stream
    async for output_event in self._process_model_result(

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_agentchat/agents/_assistant_agent.py", line 1299, in _process_model_result
    async for reflection_response in cls._reflect_on_tool_use_flow(

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_agentchat/agents/_assistant_agent.py", line 1446, in _reflect_on_tool_use_flow
    reflection_result = await model_client.create(
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/autogen_ext/models/openai/_openai_client.py", line 691, in create
    result: Union[ParsedChatCompletion[BaseModel], ChatCompletion] = await future
                                                                     ^^^^^^^^^^^^

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/resources/chat/completions.py", line 1412, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/_base_client.py", line 1831, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/_base_client.py", line 1525, in request
    return await self._request(
           ^^^^^^^^^^^^^^^^^^^^

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/_base_client.py", line 1611, in _request
    return await self._retry_request(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/_base_client.py", line 1658, in _retry_request
    return await self._request(
           ^^^^^^^^^^^^^^^^^^^^

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/_base_client.py", line 1611, in _request
    return await self._retry_request(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/_base_client.py", line 1658, in _retry_request
    return await self._request(
           ^^^^^^^^^^^^^^^^^^^^

  File "/home/vijay/anaconda3/lib/python3.11/site-packages/openai/_base_client.py", line 1626, in _request
    raise self._make_status_error_from_response(err.response) from None

openai.RateLimitError: Error code: 429 - [{'error': {'code': 429, 'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits.', 'status': 'RESOURCE_EXHAUSTED', 'details': [{'@type': 'type.googleapis.com/google.rpc.QuotaFailure', 'violations': [{'quotaMetric': 'generativelanguage.googleapis.com/generate_content_free_tier_requests', 'quotaId': 'GenerateRequestsPerMinutePerProjectPerModel-FreeTier', 'quotaDimensions': {'location': 'global', 'model': 'gemini-2.5-flash'}, 'quotaValue': '10'}]}, {'@type': 'type.googleapis.com/google.rpc.Help', 'links': [{'description': 'Learn more about Gemini API quotas', 'url': 'https://ai.google.dev/gemini-api/docs/rate-limits'}]}, {'@type': 'type.googleapis.com/google.rpc.RetryInfo', 'retryDelay': '52s'}]}}]

2025-08-14 18:34:20,355 - ERROR - [design_patterns.py:543] - Error listing executions: type object 'PatternExecution' has no attribute 'get_by_user'
2025-08-14 18:34:20,378 - ERROR - [design_patterns.py:114] - Error listing patterns: type object 'PatternTemplates' has no attribute 'get_pattern_config'
2025-08-14 18:34:20,387 - ERROR - [design_patterns.py:114] - Error listing patterns: type object 'PatternTemplates' has no attribute 'get_pattern_config'
2025-08-15 01:22:52,979 - CRITICAL - [llm_engine.py:26] - OPENROUTER_API_KEY environment variable not set
2025-08-15 03:28:29,168 - ERROR - [setup_knowledge_permissions.py:85] - Error setting up knowledge permissions: (sqlite3.OperationalError) no such table: permissions
[SQL: SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?]
[parameters: ('view_knowledge', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1961, in _exec_single_context
    self.dialect.do_execute(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 944, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: permissions

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/vijay/gitrepo/copilot/text2sql/src/utils/setup_knowledge_permissions.py", line 41, in setup_knowledge_permissions
    existing = session.query(Permission).filter_by(name=perm_name).first()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
           ^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1635, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1840, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1980, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2349, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1961, in _exec_single_context
    self.dialect.do_execute(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 944, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: permissions
[SQL: SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?]
[parameters: ('view_knowledge', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-15 03:28:35,995 - ERROR - [user_manager.py:387] - Error checking role: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.reset_token AS users_reset_token, users.reset_token_expiry AS users_reset_token_expiry 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?]
[parameters: (1, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-15 03:28:36,251 - ERROR - [user_manager.py:593] - Error checking permission: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.reset_token AS users_reset_token, users.reset_token_expiry AS users_reset_token_expiry 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?]
[parameters: (1, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-15 03:28:36,335 - ERROR - [user_manager.py:593] - Error checking permission: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.reset_token AS users_reset_token, users.reset_token_expiry AS users_reset_token_expiry 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?]
[parameters: (1, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-15 03:28:36,640 - ERROR - [user_manager.py:593] - Error checking permission: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.reset_token AS users_reset_token, users.reset_token_expiry AS users_reset_token_expiry 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?]
[parameters: (1, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-15 03:28:36,669 - ERROR - [user_manager.py:593] - Error checking permission: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.reset_token AS users_reset_token, users.reset_token_expiry AS users_reset_token_expiry 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?]
[parameters: (1, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-15 03:28:37,017 - ERROR - [user_manager.py:593] - Error checking permission: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.reset_token AS users_reset_token, users.reset_token_expiry AS users_reset_token_expiry 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?]
[parameters: (1, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-15 03:28:37,264 - ERROR - [user_manager.py:593] - Error checking permission: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.reset_token AS users_reset_token, users.reset_token_expiry AS users_reset_token_expiry 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?]
[parameters: (1, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-15 03:28:37,352 - ERROR - [user_manager.py:593] - Error checking permission: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.reset_token AS users_reset_token, users.reset_token_expiry AS users_reset_token_expiry 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?]
[parameters: (1, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-15 03:28:37,602 - ERROR - [user_manager.py:593] - Error checking permission: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.reset_token AS users_reset_token, users.reset_token_expiry AS users_reset_token_expiry 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?]
[parameters: (1, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-15 03:28:37,689 - ERROR - [user_manager.py:593] - Error checking permission: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.reset_token AS users_reset_token, users.reset_token_expiry AS users_reset_token_expiry 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?]
[parameters: (1, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-15 03:28:37,942 - ERROR - [user_manager.py:593] - Error checking permission: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.reset_token AS users_reset_token, users.reset_token_expiry AS users_reset_token_expiry 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?]
[parameters: (1, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-15 03:28:38,012 - ERROR - [user_manager.py:593] - Error checking permission: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.reset_token AS users_reset_token, users.reset_token_expiry AS users_reset_token_expiry 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?]
[parameters: (1, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-15 03:28:38,284 - ERROR - [user_manager.py:593] - Error checking permission: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.reset_token AS users_reset_token, users.reset_token_expiry AS users_reset_token_expiry 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?]
[parameters: (1, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-15 03:28:38,354 - ERROR - [user_manager.py:593] - Error checking permission: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.reset_token AS users_reset_token, users.reset_token_expiry AS users_reset_token_expiry 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?]
[parameters: (1, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-15 03:28:38,655 - ERROR - [user_manager.py:593] - Error checking permission: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.reset_token AS users_reset_token, users.reset_token_expiry AS users_reset_token_expiry 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?]
[parameters: (1, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-15 03:28:38,718 - ERROR - [user_manager.py:593] - Error checking permission: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.reset_token AS users_reset_token, users.reset_token_expiry AS users_reset_token_expiry 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?]
[parameters: (1, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-15 03:28:39,066 - ERROR - [user_manager.py:593] - Error checking permission: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.reset_token AS users_reset_token, users.reset_token_expiry AS users_reset_token_expiry 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?]
[parameters: (1, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-15 03:28:39,334 - ERROR - [user_manager.py:593] - Error checking permission: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.reset_token AS users_reset_token, users.reset_token_expiry AS users_reset_token_expiry 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?]
[parameters: (1, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-15 03:28:39,395 - ERROR - [user_manager.py:593] - Error checking permission: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.reset_token AS users_reset_token, users.reset_token_expiry AS users_reset_token_expiry 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?]
[parameters: (1, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-15 03:28:39,702 - ERROR - [user_manager.py:593] - Error checking permission: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.reset_token AS users_reset_token, users.reset_token_expiry AS users_reset_token_expiry 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?]
[parameters: (1, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-15 03:28:40,817 - ERROR - [user_manager.py:593] - Error checking permission: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.reset_token AS users_reset_token, users.reset_token_expiry AS users_reset_token_expiry 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?]
[parameters: (1, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-15 03:28:41,140 - ERROR - [user_manager.py:593] - Error checking permission: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.reset_token AS users_reset_token, users.reset_token_expiry AS users_reset_token_expiry 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?]
[parameters: (1, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-15 03:28:41,411 - ERROR - [user_manager.py:593] - Error checking permission: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.reset_token AS users_reset_token, users.reset_token_expiry AS users_reset_token_expiry 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?]
[parameters: (1, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-15 03:28:41,468 - ERROR - [user_manager.py:593] - Error checking permission: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.reset_token AS users_reset_token, users.reset_token_expiry AS users_reset_token_expiry 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?]
[parameters: (1, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-15 03:28:41,743 - ERROR - [user_manager.py:593] - Error checking permission: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.reset_token AS users_reset_token, users.reset_token_expiry AS users_reset_token_expiry 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?]
[parameters: (1, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-15 03:28:41,804 - ERROR - [user_manager.py:593] - Error checking permission: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.reset_token AS users_reset_token, users.reset_token_expiry AS users_reset_token_expiry 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?]
[parameters: (1, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-15 03:28:42,095 - ERROR - [user_manager.py:593] - Error checking permission: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.reset_token AS users_reset_token, users.reset_token_expiry AS users_reset_token_expiry 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?]
[parameters: (1, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-15 03:28:42,142 - ERROR - [user_manager.py:593] - Error checking permission: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.reset_token AS users_reset_token, users.reset_token_expiry AS users_reset_token_expiry 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?]
[parameters: (1, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-15 03:28:42,443 - ERROR - [user_manager.py:593] - Error checking permission: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.reset_token AS users_reset_token, users.reset_token_expiry AS users_reset_token_expiry 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?]
[parameters: (1, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-15 03:28:42,504 - ERROR - [user_manager.py:593] - Error checking permission: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.reset_token AS users_reset_token, users.reset_token_expiry AS users_reset_token_expiry 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?]
[parameters: (1, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-15 03:28:42,856 - ERROR - [user_manager.py:593] - Error checking permission: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.reset_token AS users_reset_token, users.reset_token_expiry AS users_reset_token_expiry 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?]
[parameters: (1, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-15 03:28:43,095 - ERROR - [user_manager.py:593] - Error checking permission: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.reset_token AS users_reset_token, users.reset_token_expiry AS users_reset_token_expiry 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?]
[parameters: (1, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-15 03:28:43,214 - ERROR - [user_manager.py:593] - Error checking permission: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.reset_token AS users_reset_token, users.reset_token_expiry AS users_reset_token_expiry 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?]
[parameters: (1, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-15 03:28:43,424 - ERROR - [user_manager.py:593] - Error checking permission: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.reset_token AS users_reset_token, users.reset_token_expiry AS users_reset_token_expiry 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?]
[parameters: (1, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-15 03:28:43,557 - ERROR - [user_manager.py:593] - Error checking permission: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.reset_token AS users_reset_token, users.reset_token_expiry AS users_reset_token_expiry 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?]
[parameters: (1, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-15 03:28:43,758 - ERROR - [user_manager.py:593] - Error checking permission: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.reset_token AS users_reset_token, users.reset_token_expiry AS users_reset_token_expiry 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?]
[parameters: (1, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-15 03:28:43,883 - ERROR - [user_manager.py:593] - Error checking permission: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.reset_token AS users_reset_token, users.reset_token_expiry AS users_reset_token_expiry 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?]
[parameters: (1, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-15 03:28:44,093 - ERROR - [user_manager.py:593] - Error checking permission: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.reset_token AS users_reset_token, users.reset_token_expiry AS users_reset_token_expiry 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?]
[parameters: (1, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-15 03:28:44,214 - ERROR - [user_manager.py:593] - Error checking permission: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.reset_token AS users_reset_token, users.reset_token_expiry AS users_reset_token_expiry 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?]
[parameters: (1, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-15 03:28:44,426 - ERROR - [user_manager.py:593] - Error checking permission: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.reset_token AS users_reset_token, users.reset_token_expiry AS users_reset_token_expiry 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?]
[parameters: (1, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-15 03:29:27,650 - ERROR - [setup_knowledge_permissions.py:85] - Error setting up knowledge permissions: (sqlite3.OperationalError) no such table: permissions
[SQL: SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?]
[parameters: ('view_knowledge', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1961, in _exec_single_context
    self.dialect.do_execute(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 944, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: permissions

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/vijay/gitrepo/copilot/text2sql/src/utils/setup_knowledge_permissions.py", line 41, in setup_knowledge_permissions
    existing = session.query(Permission).filter_by(name=perm_name).first()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
           ^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1635, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1840, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1980, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2349, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1961, in _exec_single_context
    self.dialect.do_execute(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 944, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: permissions
[SQL: SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?]
[parameters: ('view_knowledge', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-15 03:29:32,379 - ERROR - [user_manager.py:593] - Error checking permission: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.reset_token AS users_reset_token, users.reset_token_expiry AS users_reset_token_expiry 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?]
[parameters: (1, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-15 03:29:32,604 - ERROR - [user_manager.py:593] - Error checking permission: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.reset_token AS users_reset_token, users.reset_token_expiry AS users_reset_token_expiry 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?]
[parameters: (1, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-15 03:29:32,758 - ERROR - [user_manager.py:593] - Error checking permission: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.reset_token AS users_reset_token, users.reset_token_expiry AS users_reset_token_expiry 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?]
[parameters: (1, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-15 03:29:32,935 - ERROR - [user_manager.py:593] - Error checking permission: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.reset_token AS users_reset_token, users.reset_token_expiry AS users_reset_token_expiry 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?]
[parameters: (1, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-15 03:29:33,111 - ERROR - [user_manager.py:593] - Error checking permission: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.reset_token AS users_reset_token, users.reset_token_expiry AS users_reset_token_expiry 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?]
[parameters: (1, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-15 03:29:33,269 - ERROR - [user_manager.py:593] - Error checking permission: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.reset_token AS users_reset_token, users.reset_token_expiry AS users_reset_token_expiry 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?]
[parameters: (1, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-15 03:29:33,446 - ERROR - [user_manager.py:593] - Error checking permission: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.reset_token AS users_reset_token, users.reset_token_expiry AS users_reset_token_expiry 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?]
[parameters: (1, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-15 03:29:33,597 - ERROR - [user_manager.py:593] - Error checking permission: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.reset_token AS users_reset_token, users.reset_token_expiry AS users_reset_token_expiry 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?]
[parameters: (1, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-15 03:29:33,826 - ERROR - [user_manager.py:593] - Error checking permission: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.reset_token AS users_reset_token, users.reset_token_expiry AS users_reset_token_expiry 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?]
[parameters: (1, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-15 03:29:33,923 - ERROR - [user_manager.py:593] - Error checking permission: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.reset_token AS users_reset_token, users.reset_token_expiry AS users_reset_token_expiry 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?]
[parameters: (1, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-15 03:29:34,163 - ERROR - [user_manager.py:593] - Error checking permission: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.reset_token AS users_reset_token, users.reset_token_expiry AS users_reset_token_expiry 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?]
[parameters: (1, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-15 03:29:34,258 - ERROR - [user_manager.py:593] - Error checking permission: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.reset_token AS users_reset_token, users.reset_token_expiry AS users_reset_token_expiry 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?]
[parameters: (1, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-15 03:29:34,527 - ERROR - [user_manager.py:593] - Error checking permission: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.reset_token AS users_reset_token, users.reset_token_expiry AS users_reset_token_expiry 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?]
[parameters: (1, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-15 03:29:34,593 - ERROR - [user_manager.py:593] - Error checking permission: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.reset_token AS users_reset_token, users.reset_token_expiry AS users_reset_token_expiry 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?]
[parameters: (1, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-15 03:29:34,872 - ERROR - [user_manager.py:593] - Error checking permission: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.reset_token AS users_reset_token, users.reset_token_expiry AS users_reset_token_expiry 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?]
[parameters: (1, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-15 03:29:34,935 - ERROR - [user_manager.py:593] - Error checking permission: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.reset_token AS users_reset_token, users.reset_token_expiry AS users_reset_token_expiry 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?]
[parameters: (1, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-15 03:30:56,710 - ERROR - [setup_knowledge_permissions.py:85] - Error setting up knowledge permissions: (sqlite3.OperationalError) no such table: permissions
[SQL: SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?]
[parameters: ('view_knowledge', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1961, in _exec_single_context
    self.dialect.do_execute(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 944, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: permissions

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/vijay/gitrepo/copilot/text2sql/src/utils/setup_knowledge_permissions.py", line 41, in setup_knowledge_permissions
    existing = session.query(Permission).filter_by(name=perm_name).first()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
           ^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1635, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1840, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1980, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2349, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1961, in _exec_single_context
    self.dialect.do_execute(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 944, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: permissions
[SQL: SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?]
[parameters: ('view_knowledge', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
