2025-04-05 11:58:15,173 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 11:58:18,133 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 11:58:18,134 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 11:58:18,134 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 11:58:18,134 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 11:58:18,145 [INFO] text2sql [app.py:61]: Debug logging enabled for SQL generator and agents
2025-04-05 11:58:18 - INFO - [app.py:61] - Debug logging enabled for SQL generator and agents
2025-04-05 11:58:18,146 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 11:58:18 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 11:58:18,147 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 11:58:18 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 11:58:18,149 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 11:58:18 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 11:58:18,149 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 11:58:18,149 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 11:58:18,149 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 11:58:18,149 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 11:58:18,149 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 11:58:18 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 11:58:18,150 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 11:58:18 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 11:58:18,150 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 11:58:18 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 11:58:18,150 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 11:58:18,150 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 11:58:18,151 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 11:58:18,151 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 11:58:18,151 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 11:58:18 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 11:58:18,151 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 11:58:18 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 11:58:18,151 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 11:58:18 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 11:58:18,152 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 11:58:18,152 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 11:58:18,152 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 11:58:18,152 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 11:58:18,152 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 11:58:18 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 11:58:18,152 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 11:58:18 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 11:58:18,153 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 11:58:18 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 11:58:18,153 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 11:58:18 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 11:58:18,153 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 11:58:18 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 11:58:18,153 [INFO] text2sql.database [database.py:18]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 11:58:18 - INFO - [database.py:18] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 11:58:18,154 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 11:58:18,154 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 11:58:18,154 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 11:58:18,154 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 11:58:18,154 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 11:58:18 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 11:58:18,172 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 11:58:18,172 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 11:59:32,861 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 11:59:32] "GET /samples HTTP/1.1" 200 -
2025-04-05 11:59:32,949 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 11:59:32] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 11:59:33,222 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 11:59:33] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 11:59:33,228 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 11:59:33] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 11:59:33,241 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 11:59:33] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 11:59:33,241 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 11:59:33] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 11:59:33,242 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 11:59:33] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 11:59:33,252 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 11:59:33] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 11:59:33,555 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 11:59:33] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 11:59:33,563 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 11:59:33] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 11:59:33,882 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 11:59:33] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 11:59:33,883 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 11:59:33] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 11:59:33,885 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 11:59:33] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 11:59:33,895 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 11:59:33 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 11:59:33,896 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 11:59:33 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 11:59:33,899 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 11:59:33 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 11:59:33,903 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 0 samples (page 1, limit 10)
2025-04-05 11:59:33 - INFO - [feedback_manager.py:531] - Retrieved 0 samples (page 1, limit 10)
2025-04-05 11:59:33,905 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 11:59:33] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 12:00:03,465 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:00:03] "[33mGET /users HTTP/1.1[0m" 404 -
2025-04-05 12:01:49,806 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:01:49] "[33mGET /users HTTP/1.1[0m" 404 -
2025-04-05 12:02:31,556 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:02:31] "[33mGET /users HTTP/1.1[0m" 404 -
2025-04-05 12:03:19,277 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:03:19] "[35m[1mGET /admin/users HTTP/1.1[0m" 500 -
2025-04-05 12:03:19,497 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:03:19] "GET /admin/users?__debugger__=yes&cmd=resource&f=style.css HTTP/1.1" 200 -
2025-04-05 12:03:19,608 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:03:19] "GET /admin/users?__debugger__=yes&cmd=resource&f=debugger.js HTTP/1.1" 200 -
2025-04-05 12:03:19,643 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:03:19] "GET /admin/users?__debugger__=yes&cmd=resource&f=console.png&s=eRI5mrCSMyog7Uq3Rwzs HTTP/1.1" 200 -
2025-04-05 12:03:19,971 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:03:19] "GET /admin/users?__debugger__=yes&cmd=resource&f=console.png HTTP/1.1" 200 -
2025-04-05 12:05:15,887 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:05:15] "[33mGET /admin/index HTTP/1.1[0m" 404 -
2025-04-05 12:05:18,706 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:05:18] "[32mGET /admin HTTP/1.1[0m" 308 -
2025-04-05 12:05:19,032 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:05:19] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 12:05:19,283 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:05:19] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 12:05:19,387 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:05:19] "GET /static/js/admin/dashboard.js HTTP/1.1" 200 -
2025-04-05 12:05:19,415 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:05:19] "[33mGET /api/admin/dashboard/stats HTTP/1.1[0m" 404 -
2025-04-05 12:05:19,720 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:05:19] "[33mGET /api/admin/audit-logs?limit=5 HTTP/1.1[0m" 404 -
2025-04-05 12:05:26,195 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:05:26] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 12:05:26,469 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:05:26] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 12:05:26,532 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:05:26] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 12:05:26,543 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:05:26] "[33mGET /api/admin/dashboard/stats HTTP/1.1[0m" 404 -
2025-04-05 12:05:26,868 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:05:26] "[33mGET /api/admin/audit-logs?limit=5 HTTP/1.1[0m" 404 -
2025-04-05 12:05:27,555 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:05:27] "[35m[1mGET /admin/users HTTP/1.1[0m" 500 -
2025-04-05 12:05:27,793 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:05:27] "[36mGET /admin/users?__debugger__=yes&cmd=resource&f=style.css HTTP/1.1[0m" 304 -
2025-04-05 12:05:27,904 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:05:27] "[36mGET /admin/users?__debugger__=yes&cmd=resource&f=debugger.js HTTP/1.1[0m" 304 -
2025-04-05 12:05:27,936 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:05:27] "[36mGET /admin/users?__debugger__=yes&cmd=resource&f=console.png&s=eRI5mrCSMyog7Uq3Rwzs HTTP/1.1[0m" 304 -
2025-04-05 12:05:30,522 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:05:30] "[35m[1mGET /admin/roles HTTP/1.1[0m" 500 -
2025-04-05 12:05:30,770 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:05:30] "GET /admin/roles?__debugger__=yes&cmd=resource&f=style.css HTTP/1.1" 200 -
2025-04-05 12:05:30,856 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:05:30] "GET /admin/roles?__debugger__=yes&cmd=resource&f=debugger.js HTTP/1.1" 200 -
2025-04-05 12:05:30,885 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:05:30] "GET /admin/roles?__debugger__=yes&cmd=resource&f=console.png&s=eRI5mrCSMyog7Uq3Rwzs HTTP/1.1" 200 -
2025-04-05 12:05:31,213 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:05:31] "GET /admin/roles?__debugger__=yes&cmd=resource&f=console.png HTTP/1.1" 200 -
2025-04-05 12:05:33,928 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:05:33] "[35m[1mGET /admin/audit-logs HTTP/1.1[0m" 500 -
2025-04-05 12:05:34,261 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:05:34] "GET /admin/audit-logs?__debugger__=yes&cmd=resource&f=style.css HTTP/1.1" 200 -
2025-04-05 12:05:34,262 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:05:34] "GET /admin/audit-logs?__debugger__=yes&cmd=resource&f=debugger.js HTTP/1.1" 200 -
2025-04-05 12:05:34,512 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:05:34] "GET /admin/audit-logs?__debugger__=yes&cmd=resource&f=console.png&s=eRI5mrCSMyog7Uq3Rwzs HTTP/1.1" 200 -
2025-04-05 12:05:34,578 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:05:34] "GET /admin/audit-logs?__debugger__=yes&cmd=resource&f=console.png HTTP/1.1" 200 -
2025-04-05 12:05:37,136 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:05:37] "GET / HTTP/1.1" 200 -
2025-04-05 12:05:37,493 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:05:37] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 12:05:37,497 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:05:37] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 12:05:37,512 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:05:37] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 12:05:37,513 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:05:37] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 12:05:37,516 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:05:37] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 12:05:37,517 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:05:37] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 12:05:37,816 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:05:37] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 12:05:37,824 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:05:37] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 12:05:38,160 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:05:38] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 12:07:33,653 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/auth_routes.py', reloading
2025-04-05 12:07:33,654 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/auth_routes.py', reloading
2025-04-05 12:07:33,654 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/auth_routes.py', reloading
2025-04-05 12:07:34,656 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 12:07:34,657 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 12:07:34,658 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 12:07:34,659 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 12:07:34,660 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 12:07:34 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 12:07:34,662 [INFO] text2sql.database [database.py:238]: Closing database connection
2025-04-05 12:07:34 - INFO - [database.py:238] - Closing database connection
2025-04-05 12:07:34,663 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 12:07:34 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 12:07:35,591 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 12:07:39,109 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:07:39,109 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:07:39,110 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:07:39,110 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:07:39,125 [INFO] text2sql [app.py:61]: Debug logging enabled for SQL generator and agents
2025-04-05 12:07:39 - INFO - [app.py:61] - Debug logging enabled for SQL generator and agents
2025-04-05 12:07:39,127 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:07:39 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:07:39,127 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:07:39 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:07:39,131 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:07:39 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:07:39,131 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:07:39,132 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:07:39,132 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:07:39,132 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:07:39,132 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:07:39 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:07:39,133 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:07:39 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:07:39,133 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:07:39 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:07:39,134 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:07:39,134 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:07:39,134 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:07:39,134 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:07:39,135 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:07:39 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:07:39,135 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:07:39 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:07:39,136 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:07:39 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:07:39,136 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:07:39,136 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:07:39,136 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:07:39,137 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:07:39,137 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 12:07:39 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 12:07:39,137 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:07:39 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:07:39,138 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:07:39 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:07:39,139 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:07:39 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:07:39,140 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 12:07:39 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 12:07:39,140 [INFO] text2sql.database [database.py:18]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:07:39 - INFO - [database.py:18] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:07:39,141 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:07:39,141 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:07:39,141 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:07:39,142 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:07:39,142 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:07:39 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:07:39,171 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 12:07:39,172 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 12:08:16,408 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:08:16] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 12:08:16,475 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:08:16] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 12:08:16,754 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:08:16] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 12:08:16,777 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:08:16] "[33mGET /api/admin/dashboard/stats HTTP/1.1[0m" 404 -
2025-04-05 12:08:17,072 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:08:17] "[33mGET /api/admin/audit-logs?limit=5 HTTP/1.1[0m" 404 -
2025-04-05 12:09:48,795 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:09:48] "[35m[1mGET /admin/roles HTTP/1.1[0m" 500 -
2025-04-05 12:09:48,939 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:09:48] "[36mGET /admin/roles?__debugger__=yes&cmd=resource&f=style.css HTTP/1.1[0m" 304 -
2025-04-05 12:09:49,309 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:09:49] "[36mGET /admin/roles?__debugger__=yes&cmd=resource&f=debugger.js HTTP/1.1[0m" 304 -
2025-04-05 12:09:49,576 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:09:49] "GET /admin/roles?__debugger__=yes&cmd=resource&f=console.png&s=76Me4xTpPjxFU7lvVDf6 HTTP/1.1" 200 -
2025-04-05 12:09:51,094 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_routes.py', reloading
2025-04-05 12:09:51,095 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_routes.py', reloading
2025-04-05 12:09:51,107 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_routes.py', reloading
2025-04-05 12:09:52,123 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 12:09:52,123 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 12:09:52,125 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 12:09:52,125 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 12:09:52,126 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 12:09:52 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 12:09:52,127 [INFO] text2sql.database [database.py:238]: Closing database connection
2025-04-05 12:09:52 - INFO - [database.py:238] - Closing database connection
2025-04-05 12:09:52,127 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 12:09:52 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 12:09:55,126 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 12:10:02,765 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:10:02,766 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:10:02,766 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:10:02,766 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:10:02,785 [INFO] text2sql [app.py:61]: Debug logging enabled for SQL generator and agents
2025-04-05 12:10:02 - INFO - [app.py:61] - Debug logging enabled for SQL generator and agents
2025-04-05 12:10:02,786 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:10:02 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:10:02,787 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:10:02 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:10:02,792 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:10:02 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:10:02,793 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:10:02,793 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:10:02,793 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:10:02,794 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:10:02,795 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:10:02 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:10:02,795 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:10:02 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:10:02,796 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:10:02 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:10:02,796 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:10:02,797 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:10:02,797 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:10:02,797 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:10:02,797 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:10:02 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:10:02,797 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:10:02 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:10:02,798 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:10:02 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:10:02,798 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:10:02,799 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:10:02,799 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:10:02,799 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:10:02,800 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 12:10:02 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 12:10:02,801 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:10:02 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:10:02,801 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:10:02 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:10:02,802 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:10:02 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:10:02,802 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 12:10:02 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 12:10:02,802 [INFO] text2sql.database [database.py:18]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:10:02 - INFO - [database.py:18] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:10:02,803 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:10:02,803 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:10:02,803 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:10:02,804 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:10:02,804 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:10:02 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:10:02,857 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 12:10:02,859 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 12:10:45,548 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:10:45] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 12:10:45,585 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:10:45] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 12:10:45,891 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:10:45] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 12:10:46,221 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:10:46] "[33mGET /api/admin/dashboard/stats HTTP/1.1[0m" 404 -
2025-04-05 12:10:46,224 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:10:46] "[33mGET /api/admin/audit-logs?limit=5 HTTP/1.1[0m" 404 -
2025-04-05 12:10:46,543 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:10:46] "[35m[1mGET /admin/users HTTP/1.1[0m" 500 -
2025-04-05 12:10:46,642 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:10:46] "[36mGET /admin/users?__debugger__=yes&cmd=resource&f=style.css HTTP/1.1[0m" 304 -
2025-04-05 12:10:46,899 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:10:46] "[36mGET /admin/users?__debugger__=yes&cmd=resource&f=debugger.js HTTP/1.1[0m" 304 -
2025-04-05 12:10:46,917 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:10:46] "GET /admin/users?__debugger__=yes&cmd=resource&f=console.png&s=Pcsa5gMTnutner2ScjiZ HTTP/1.1" 200 -
2025-04-05 12:10:51,309 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:10:51] "[35m[1mGET /admin/audit-logs HTTP/1.1[0m" 500 -
2025-04-05 12:10:51,527 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:10:51] "[36mGET /admin/audit-logs?__debugger__=yes&cmd=resource&f=style.css HTTP/1.1[0m" 304 -
2025-04-05 12:10:51,662 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:10:51] "[36mGET /admin/audit-logs?__debugger__=yes&cmd=resource&f=debugger.js HTTP/1.1[0m" 304 -
2025-04-05 12:10:51,705 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:10:51] "GET /admin/audit-logs?__debugger__=yes&cmd=resource&f=console.png&s=Pcsa5gMTnutner2ScjiZ HTTP/1.1" 200 -
2025-04-05 12:12:09,830 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/user_manager.py', reloading
2025-04-05 12:12:09,831 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/user_manager.py', reloading
2025-04-05 12:12:09,842 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/user_manager.py', reloading
2025-04-05 12:12:10,844 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 12:12:10,845 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 12:12:10,845 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 12:12:10,845 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 12:12:10,846 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 12:12:10 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 12:12:10,846 [INFO] text2sql.database [database.py:238]: Closing database connection
2025-04-05 12:12:10 - INFO - [database.py:238] - Closing database connection
2025-04-05 12:12:10,848 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 12:12:10 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 12:12:12,676 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 12:12:18,577 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 12:12:18,578 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 12:12:18,582 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 12:12:18,582 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 12:12:18,583 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 12:12:18,585 [INFO] text2sql.database [database.py:238]: Closing database connection
2025-04-05 12:12:18,586 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 12:21:02,577 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:21:02,577 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:21:02,578 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:21:02,578 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:21:02,581 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 12:21:02,594 [INFO] text2sql [app.py:61]: Debug logging enabled for SQL generator and agents
2025-04-05 12:21:02 - INFO - [app.py:61] - Debug logging enabled for SQL generator and agents
2025-04-05 12:21:02,596 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:21:02 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:21:02,596 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:21:02 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:21:02,600 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:21:02 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:21:02,600 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:21:02,601 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:21:02,601 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:21:02,602 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:21:02,602 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:21:02 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:21:02,603 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:21:02 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:21:02,604 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:21:02 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:21:02,604 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:21:02,605 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:21:02,605 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:21:02,605 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:21:02,605 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:21:02 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:21:02,606 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:21:02 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:21:02,607 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:21:02 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:21:02,608 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:21:02,608 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:21:02,608 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:21:02,608 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:21:02,609 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 12:21:02 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 12:21:02,609 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:21:02 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:21:02,609 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:21:02 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:21:02,610 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:21:02 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:21:02,611 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 12:21:02 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 12:21:02,611 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:21:02 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:21:02,612 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:21:02,612 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:21:02,612 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:21:02,613 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:21:02,613 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:21:02 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:21:02,763 [INFO] werkzeug [_internal.py:97]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.27.251.157:5000
2025-04-05 12:21:02,764 [INFO] werkzeug [_internal.py:97]: [33mPress CTRL+C to quit[0m
2025-04-05 12:21:02,769 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 12:21:08,340 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:21:08,341 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:21:08,341 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:21:08,341 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:21:08,342 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 12:21:08,350 [INFO] text2sql [app.py:61]: Debug logging enabled for SQL generator and agents
2025-04-05 12:21:08 - INFO - [app.py:61] - Debug logging enabled for SQL generator and agents
2025-04-05 12:21:08,351 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:21:08 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:21:08,352 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:21:08 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:21:08,356 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:21:08 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:21:08,356 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:21:08,357 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:21:08,357 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:21:08,357 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:21:08,357 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:21:08 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:21:08,358 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:21:08 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:21:08,358 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:21:08 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:21:08,358 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:21:08,359 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:21:08,359 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:21:08,359 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:21:08,359 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:21:08 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:21:08,359 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:21:08 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:21:08,360 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:21:08 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:21:08,361 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:21:08,361 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:21:08,361 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:21:08,362 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:21:08,362 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 12:21:08 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 12:21:08,362 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:21:08 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:21:08,362 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:21:08 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:21:08,363 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:21:08 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:21:08,363 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 12:21:08 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 12:21:08,363 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:21:08 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:21:08,364 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:21:08,364 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:21:08,364 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:21:08,364 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:21:08,365 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:21:08 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:21:08,498 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 12:21:08,499 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 12:21:09,126 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:21:09] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 12:21:09,177 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:21:09] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 12:21:09,501 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:21:09] "GET /static/js/admin/dashboard.js HTTP/1.1" 200 -
2025-04-05 12:21:09,750 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:21:09] "[33mGET /api/admin/dashboard/stats HTTP/1.1[0m" 404 -
2025-04-05 12:21:09,819 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:21:09] "[33mGET /api/admin/audit-logs?limit=5 HTTP/1.1[0m" 404 -
2025-04-05 12:21:10,767 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:21:10] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 12:21:11,121 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:21:11] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 12:21:11,126 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:21:11] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 12:21:11,379 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:21:11] "[33mGET /api/admin/dashboard/stats HTTP/1.1[0m" 404 -
2025-04-05 12:21:11,469 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:21:11] "[33mGET /api/admin/audit-logs?limit=5 HTTP/1.1[0m" 404 -
2025-04-05 12:21:12,516 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:21:12] "GET /admin/users HTTP/1.1" 200 -
2025-04-05 12:21:13,392 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:21:13] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 12:21:13,404 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:21:13] "GET /static/js/admin/users.js HTTP/1.1" 200 -
2025-04-05 12:21:14,988 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:21:14] "[35m[1mGET /admin/roles HTTP/1.1[0m" 500 -
2025-04-05 12:21:15,323 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:21:15] "[36mGET /admin/roles?__debugger__=yes&cmd=resource&f=style.css HTTP/1.1[0m" 304 -
2025-04-05 12:21:15,330 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:21:15] "[36mGET /admin/roles?__debugger__=yes&cmd=resource&f=debugger.js HTTP/1.1[0m" 304 -
2025-04-05 12:21:15,570 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:21:15] "GET /admin/roles?__debugger__=yes&cmd=resource&f=console.png&s=kYxFZbUTbFoJhknUjtBk HTTP/1.1" 200 -
2025-04-05 12:21:47,973 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:21:47] "GET / HTTP/1.1" 200 -
2025-04-05 12:21:48,309 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:21:48] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 12:21:48,330 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:21:48] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 12:21:48,336 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:21:48] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 12:21:48,337 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:21:48] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 12:21:48,340 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:21:48] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 12:21:48,343 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:21:48] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 12:21:48,620 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:21:48] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 12:21:48,648 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:21:48] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 12:21:48,797 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:21:48] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 12:22:22,536 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:22:22] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 12:22:22,883 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:22:22] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 12:22:22,887 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:22:22] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 12:22:23,145 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:22:23] "[33mGET /api/admin/dashboard/stats HTTP/1.1[0m" 404 -
2025-04-05 12:22:23,221 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:22:23] "[33mGET /api/admin/audit-logs?limit=5 HTTP/1.1[0m" 404 -
2025-04-05 12:23:34,455 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:23:34] "GET / HTTP/1.1" 200 -
2025-04-05 12:23:34,707 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:23:34] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 12:23:34,787 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:23:34] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 12:23:34,810 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:23:34] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 12:23:34,812 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:23:34] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 12:23:34,812 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:23:34] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 12:23:34,816 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:23:34] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 12:23:35,033 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:23:35] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 12:23:35,093 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:23:35] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 12:23:35,453 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:23:35] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 12:23:36,515 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:23:36] "GET / HTTP/1.1" 200 -
2025-04-05 12:23:36,859 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:23:36] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 12:23:36,860 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:23:36] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 12:23:36,862 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:23:36] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 12:23:36,868 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:23:36] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 12:23:36,871 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:23:36] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 12:23:36,872 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:23:36] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 12:23:37,172 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:23:37] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 12:23:37,173 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:23:37] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 12:23:37,502 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:23:37] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 12:23:39,260 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:23:39] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 12:23:39,596 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:23:39] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 12:23:39,604 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:23:39] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 12:23:39,868 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:23:39] "[33mGET /api/admin/dashboard/stats HTTP/1.1[0m" 404 -
2025-04-05 12:23:39,956 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:23:39] "[33mGET /api/admin/audit-logs?limit=5 HTTP/1.1[0m" 404 -
2025-04-05 12:25:03,082 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_api_routes.py', reloading
2025-04-05 12:25:03,084 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_api_routes.py', reloading
2025-04-05 12:25:03,212 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_api_routes.py', reloading
2025-04-05 12:25:03,214 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_api_routes.py', reloading
2025-04-05 12:25:03,216 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_api_routes.py', reloading
2025-04-05 12:25:04,217 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 12:25:04,217 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 12:25:04,217 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 12:25:04,217 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 12:25:04,217 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 12:25:04 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 12:25:04,218 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 12:25:04 - INFO - [database.py:258] - Closing database connection
2025-04-05 12:25:04,218 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 12:25:04 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 12:25:05,031 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 12:25:10,781 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:25:10,782 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:25:10,782 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:25:10,782 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:25:10,783 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 12:25:10,794 [INFO] text2sql [app.py:61]: Debug logging enabled for SQL generator and agents
2025-04-05 12:25:10 - INFO - [app.py:61] - Debug logging enabled for SQL generator and agents
2025-04-05 12:25:10,796 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:25:10 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:25:10,796 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:25:10 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:25:10,800 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:25:10 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:25:10,801 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:25:10,801 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:25:10,801 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:25:10,802 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:25:10,802 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:25:10 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:25:10,802 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:25:10 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:25:10,803 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:25:10 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:25:10,803 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:25:10,804 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:25:10,804 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:25:10,804 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:25:10,804 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:25:10 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:25:10,805 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:25:10 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:25:10,806 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:25:10 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:25:10,806 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:25:10,807 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:25:10,807 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:25:10,808 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:25:10,808 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 12:25:10 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 12:25:10,809 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:25:10 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:25:10,809 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:25:10 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:25:10,810 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:25:10 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:25:10,810 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 12:25:10 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 12:25:10,811 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:25:10 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:25:10,812 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:25:10,812 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:25:10,812 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:25:10,813 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:25:10,813 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:25:10 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:25:11,009 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 12:25:11,010 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 12:26:41,548 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_api_routes.py', reloading
2025-04-05 12:26:41,549 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_api_routes.py', reloading
2025-04-05 12:26:41,557 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_api_routes.py', reloading
2025-04-05 12:26:42,558 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 12:26:42,558 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 12:26:42,559 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 12:26:42,559 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 12:26:42,559 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 12:26:42 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 12:26:42,560 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 12:26:42 - INFO - [database.py:258] - Closing database connection
2025-04-05 12:26:42,560 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 12:26:42 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 12:26:43,690 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 12:26:49,375 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:26:49,376 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:26:49,376 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:26:49,376 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:26:49,377 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 12:26:49,384 [INFO] text2sql [app.py:61]: Debug logging enabled for SQL generator and agents
2025-04-05 12:26:49 - INFO - [app.py:61] - Debug logging enabled for SQL generator and agents
2025-04-05 12:26:49,385 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:26:49 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:26:49,386 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:26:49 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:26:49,389 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:26:49 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:26:49,390 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:26:49,390 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:26:49,390 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:26:49,391 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:26:49,391 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:26:49 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:26:49,391 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:26:49 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:26:49,392 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:26:49 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:26:49,392 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:26:49,393 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:26:49,393 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:26:49,393 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:26:49,393 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:26:49 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:26:49,393 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:26:49 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:26:49,394 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:26:49 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:26:49,394 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:26:49,394 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:26:49,395 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:26:49,395 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:26:49,395 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 12:26:49 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 12:26:49,395 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:26:49 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:26:49,395 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:26:49 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:26:49,396 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:26:49 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:26:49,396 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 12:26:49 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 12:26:49,397 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:26:49 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:26:49,397 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:26:49,397 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:26:49,397 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:26:49,398 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:26:49,398 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:26:49 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:26:49,535 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 12:26:49,536 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 12:27:33,638 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/app.py', reloading
2025-04-05 12:27:33,639 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/app.py', reloading
2025-04-05 12:27:33,651 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/app.py', reloading
2025-04-05 12:27:34,652 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 12:27:34,652 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 12:27:34,652 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 12:27:34,653 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 12:27:34,653 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 12:27:34 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 12:27:34,653 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 12:27:34 - INFO - [database.py:258] - Closing database connection
2025-04-05 12:27:34,653 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 12:27:34 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 12:27:35,526 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 12:27:39,965 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:27:39,966 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:27:39,966 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:27:39,966 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:27:39,967 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 12:27:39,978 [INFO] text2sql [app.py:62]: Debug logging enabled for SQL generator and agents
2025-04-05 12:27:39 - INFO - [app.py:62] - Debug logging enabled for SQL generator and agents
2025-04-05 12:27:39,980 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:27:39 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:27:39,980 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:27:39 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:27:39,984 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:27:39 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:27:39,985 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:27:39,985 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:27:39,986 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:27:39,986 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:27:39,986 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:27:39 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:27:39,987 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:27:39 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:27:39,987 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:27:39 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:27:39,988 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:27:39,988 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:27:39,988 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:27:39,989 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:27:39,989 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:27:39 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:27:39,989 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:27:39 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:27:39,990 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:27:39 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:27:39,990 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:27:39,991 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:27:39,991 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:27:39,991 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:27:39,991 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 12:27:39 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 12:27:39,992 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:27:39 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:27:39,992 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:27:39 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:27:39,993 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:27:39 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:27:39,993 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 12:27:39 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 12:27:39,993 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:27:39 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:27:39,994 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:27:39,994 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:27:39,994 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:27:39,995 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:27:39,995 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:27:39 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:27:40,146 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 12:27:40,147 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 12:30:36,633 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:30:36] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 12:30:36,867 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:30:36] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 12:30:36,979 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:30:36] "GET /static/js/admin/dashboard.js HTTP/1.1" 200 -
2025-04-05 12:30:37,003 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:30:37] "GET /admin/api/admin/dashboard/stats HTTP/1.1" 200 -
2025-04-05 12:30:37,309 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:30:37] "[33mGET /api/admin/audit-logs?limit=5 HTTP/1.1[0m" 404 -
2025-04-05 12:30:55,072 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:30:55] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 12:30:55,323 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:30:55] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 12:30:55,420 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:30:55] "GET /static/js/admin/dashboard.js HTTP/1.1" 200 -
2025-04-05 12:30:55,436 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:30:55] "GET /admin/api/admin/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 12:30:55,752 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:30:55] "GET /admin/api/admin/dashboard/stats HTTP/1.1" 200 -
2025-04-05 12:31:00,827 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:31:00] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 12:31:01,079 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:31:01] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 12:31:01,187 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:31:01] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 12:31:01,212 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:31:01] "GET /admin/api/admin/dashboard/stats HTTP/1.1" 200 -
2025-04-05 12:31:01,535 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:31:01] "GET /admin/api/admin/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 12:31:04,589 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:31:04] "GET /admin/users HTTP/1.1" 200 -
2025-04-05 12:31:04,826 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:31:04] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 12:31:04,932 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:31:04] "[36mGET /static/js/admin/users.js HTTP/1.1[0m" 304 -
2025-04-05 12:31:08,570 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:31:08] "[35m[1mGET /admin/roles HTTP/1.1[0m" 500 -
2025-04-05 12:31:08,910 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:31:08] "[36mGET /admin/roles?__debugger__=yes&cmd=resource&f=style.css HTTP/1.1[0m" 304 -
2025-04-05 12:31:08,922 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:31:08] "[36mGET /admin/roles?__debugger__=yes&cmd=resource&f=debugger.js HTTP/1.1[0m" 304 -
2025-04-05 12:31:09,172 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:31:09] "GET /admin/roles?__debugger__=yes&cmd=resource&f=console.png&s=sko0GiGYu7tEFPvVp3nn HTTP/1.1" 200 -
2025-04-05 12:31:11,715 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:31:11] "[35m[1mGET /admin/audit-logs HTTP/1.1[0m" 500 -
2025-04-05 12:31:12,061 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:31:12] "[36mGET /admin/audit-logs?__debugger__=yes&cmd=resource&f=style.css HTTP/1.1[0m" 304 -
2025-04-05 12:31:12,071 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:31:12] "[36mGET /admin/audit-logs?__debugger__=yes&cmd=resource&f=debugger.js HTTP/1.1[0m" 304 -
2025-04-05 12:31:12,311 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:31:12] "GET /admin/audit-logs?__debugger__=yes&cmd=resource&f=console.png&s=sko0GiGYu7tEFPvVp3nn HTTP/1.1" 200 -
2025-04-05 12:31:31,834 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:31:31] "[35m[1mGET /admin/audit-logs HTTP/1.1[0m" 500 -
2025-04-05 12:31:32,179 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:31:32] "[36mGET /admin/audit-logs?__debugger__=yes&cmd=resource&f=style.css HTTP/1.1[0m" 304 -
2025-04-05 12:31:32,195 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:31:32] "[36mGET /admin/audit-logs?__debugger__=yes&cmd=resource&f=debugger.js HTTP/1.1[0m" 304 -
2025-04-05 12:31:32,441 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:31:32] "[36mGET /admin/audit-logs?__debugger__=yes&cmd=resource&f=console.png&s=sko0GiGYu7tEFPvVp3nn HTTP/1.1[0m" 304 -
2025-04-05 12:31:38,477 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:31:38] "[35m[1mGET /admin/audit-logs HTTP/1.1[0m" 500 -
2025-04-05 12:31:38,816 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:31:38] "[36mGET /admin/audit-logs?__debugger__=yes&cmd=resource&f=style.css HTTP/1.1[0m" 304 -
2025-04-05 12:31:38,828 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:31:38] "[36mGET /admin/audit-logs?__debugger__=yes&cmd=resource&f=debugger.js HTTP/1.1[0m" 304 -
2025-04-05 12:31:39,074 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:31:39] "[36mGET /admin/audit-logs?__debugger__=yes&cmd=resource&f=console.png&s=sko0GiGYu7tEFPvVp3nn HTTP/1.1[0m" 304 -
2025-04-05 12:31:39,171 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:31:39] "[36mGET /admin/audit-logs?__debugger__=yes&cmd=resource&f=console.png HTTP/1.1[0m" 304 -
2025-04-05 12:31:49,902 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:31:49] "GET / HTTP/1.1" 200 -
2025-04-05 12:31:50,262 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:31:50] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 12:31:50,266 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:31:50] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 12:31:50,268 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:31:50] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 12:31:50,279 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:31:50] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 12:31:50,282 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:31:50] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 12:31:50,284 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:31:50] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 12:31:50,578 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:31:50] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 12:31:50,581 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:31:50] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 12:31:50,920 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:31:50] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 12:31:52,611 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:31:52] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 12:31:52,976 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:31:52] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 12:31:52,983 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:31:52] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 12:31:53,217 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:31:53] "GET /admin/api/admin/dashboard/stats HTTP/1.1" 200 -
2025-04-05 12:31:53,326 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:31:53] "GET /admin/api/admin/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 12:31:57,746 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:31:57] "GET /admin/users HTTP/1.1" 200 -
2025-04-05 12:31:58,102 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:31:58] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 12:31:58,109 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:31:58] "[36mGET /static/js/admin/users.js HTTP/1.1[0m" 304 -
2025-04-05 12:31:59,178 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:31:59] "[35m[1mGET /admin/roles HTTP/1.1[0m" 500 -
2025-04-05 12:31:59,507 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:31:59] "[36mGET /admin/roles?__debugger__=yes&cmd=resource&f=style.css HTTP/1.1[0m" 304 -
2025-04-05 12:31:59,521 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:31:59] "[36mGET /admin/roles?__debugger__=yes&cmd=resource&f=debugger.js HTTP/1.1[0m" 304 -
2025-04-05 12:31:59,765 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:31:59] "[36mGET /admin/roles?__debugger__=yes&cmd=resource&f=console.png&s=sko0GiGYu7tEFPvVp3nn HTTP/1.1[0m" 304 -
2025-04-05 12:32:33,068 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:32:33] "GET /admin/users HTTP/1.1" 200 -
2025-04-05 12:32:33,409 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:32:33] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 12:32:33,412 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:32:33] "[36mGET /static/js/admin/users.js HTTP/1.1[0m" 304 -
2025-04-05 12:32:34,576 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:32:34] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 12:32:34,922 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:32:34] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 12:32:34,945 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:32:34] "GET /static/js/admin/dashboard.js HTTP/1.1" 200 -
2025-04-05 12:32:35,184 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:32:35] "GET /admin/api/admin/dashboard/stats HTTP/1.1" 200 -
2025-04-05 12:32:35,281 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:32:35] "GET /admin/api/admin/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 12:34:06,519 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/app.py', reloading
2025-04-05 12:34:06,520 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/app.py', reloading
2025-04-05 12:34:06,523 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/app.py', reloading
2025-04-05 12:34:07,524 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 12:34:07,524 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 12:34:07,525 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 12:34:07,525 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 12:34:07,525 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 12:34:07 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 12:34:07,526 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 12:34:07 - INFO - [database.py:258] - Closing database connection
2025-04-05 12:34:07,526 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 12:34:07 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 12:34:08,558 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 12:34:13,919 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:34:13,920 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:34:13,920 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:34:13,920 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:34:13,921 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 12:34:13,932 [INFO] text2sql [app.py:61]: Debug logging enabled for SQL generator and agents
2025-04-05 12:34:13 - INFO - [app.py:61] - Debug logging enabled for SQL generator and agents
2025-04-05 12:34:13,934 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:34:13 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:34:13,934 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:34:13 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:34:13,939 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:34:13 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:34:13,940 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:34:13,940 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:34:13,940 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:34:13,941 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:34:13,941 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:34:13 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:34:13,941 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:34:13 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:34:13,942 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:34:13 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:34:13,943 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:34:13,943 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:34:13,943 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:34:13,944 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:34:13,944 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:34:13 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:34:13,944 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:34:13 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:34:13,945 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:34:13 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:34:13,945 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:34:13,946 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:34:13,946 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:34:13,946 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:34:13,947 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 12:34:13 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 12:34:13,947 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:34:13 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:34:13,947 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:34:13 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:34:13,948 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:34:13 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:34:13,949 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 12:34:13 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 12:34:13,950 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:34:13 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:34:13,951 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:34:13,952 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:34:13,952 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:34:13,953 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:34:13,953 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:34:13 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:34:14,110 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 12:34:14,110 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 12:34:18,258 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_api_routes.py', reloading
2025-04-05 12:34:19,259 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 12:34:19,260 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 12:34:19,260 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 12:34:19,260 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 12:34:19,261 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 12:34:19 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 12:34:19,261 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 12:34:19 - INFO - [database.py:258] - Closing database connection
2025-04-05 12:34:19,262 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 12:34:19 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 12:34:21,251 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 12:34:30,558 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:34:30,558 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:34:30,559 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:34:30,559 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:34:30,560 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 12:34:30,571 [INFO] text2sql [app.py:61]: Debug logging enabled for SQL generator and agents
2025-04-05 12:34:30 - INFO - [app.py:61] - Debug logging enabled for SQL generator and agents
2025-04-05 12:34:30,573 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:34:30 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:34:30,573 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:34:30 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:34:30,577 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:34:30 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:34:30,577 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:34:30,578 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:34:30,578 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:34:30,578 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:34:30,579 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:34:30 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:34:30,579 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:34:30 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:34:30,580 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:34:30 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:34:30,580 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:34:30,581 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:34:30,582 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:34:30,582 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:34:30,582 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:34:30 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:34:30,583 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:34:30 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:34:30,584 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:34:30 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:34:30,584 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:34:30,585 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:34:30,585 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:34:30,585 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:34:30,585 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 12:34:30 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 12:34:30,586 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:34:30 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:34:30,586 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:34:30 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:34:30,586 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:34:30 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:34:30,587 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 12:34:30 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 12:34:30,587 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:34:30 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:34:30,587 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:34:30,588 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:34:30,588 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:34:30,588 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:34:30,588 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:34:30 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:34:30,762 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 12:34:30,764 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 12:37:18,268 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_routes.py', reloading
2025-04-05 12:37:18,268 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_routes.py', reloading
2025-04-05 12:37:18,280 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_routes.py', reloading
2025-04-05 12:37:19,281 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 12:37:19,282 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 12:37:19,282 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 12:37:19,282 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 12:37:19,283 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 12:37:19 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 12:37:19,283 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 12:37:19 - INFO - [database.py:258] - Closing database connection
2025-04-05 12:37:19,284 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 12:37:19 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 12:37:20,712 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 12:37:26,399 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:37:26,400 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:37:26,400 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:37:26,400 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:37:26,402 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 12:37:26,419 [INFO] text2sql [app.py:61]: Debug logging enabled for SQL generator and agents
2025-04-05 12:37:26 - INFO - [app.py:61] - Debug logging enabled for SQL generator and agents
2025-04-05 12:37:26,422 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:37:26 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:37:26,422 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:37:26 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:37:26,426 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:37:26 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:37:26,427 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:37:26,428 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:37:26,428 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:37:26,429 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:37:26,429 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:37:26 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:37:26,430 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:37:26 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:37:26,431 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:37:26 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:37:26,432 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:37:26,432 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:37:26,432 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:37:26,433 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:37:26,433 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:37:26 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:37:26,433 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:37:26 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:37:26,434 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:37:26 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:37:26,435 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:37:26,435 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:37:26,436 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:37:26,436 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:37:26,436 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 12:37:26 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 12:37:26,437 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:37:26 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:37:26,437 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:37:26 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:37:26,438 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:37:26 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:37:26,439 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 12:37:26 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 12:37:26,439 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:37:26 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:37:26,440 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:37:26,440 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:37:26,440 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:37:26,441 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:37:26,441 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:37:26 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:37:26,649 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 12:37:26,650 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 12:38:33,910 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_routes.py', reloading
2025-04-05 12:38:33,911 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_routes.py', reloading
2025-04-05 12:38:33,923 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_routes.py', reloading
2025-04-05 12:38:34,924 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 12:38:34,924 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 12:38:34,925 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 12:38:34,925 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 12:38:34,925 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 12:38:34 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 12:38:34,925 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 12:38:34 - INFO - [database.py:258] - Closing database connection
2025-04-05 12:38:34,926 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 12:38:34 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 12:38:35,750 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 12:38:39,342 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:38:39,343 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:38:39,343 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:38:39,344 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:38:39,346 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 12:38:39,363 [INFO] text2sql [app.py:61]: Debug logging enabled for SQL generator and agents
2025-04-05 12:38:39 - INFO - [app.py:61] - Debug logging enabled for SQL generator and agents
2025-04-05 12:38:39,366 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:38:39 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:38:39,367 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:38:39 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:38:39,373 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:38:39 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:38:39,373 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:38:39,373 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:38:39,374 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:38:39,374 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:38:39,374 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:38:39 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:38:39,374 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:38:39 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:38:39,375 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:38:39 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:38:39,376 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:38:39,376 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:38:39,376 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:38:39,377 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:38:39,377 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:38:39 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:38:39,377 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:38:39 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:38:39,378 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:38:39 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:38:39,379 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:38:39,379 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:38:39,380 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:38:39,380 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:38:39,380 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 12:38:39 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 12:38:39,381 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:38:39 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:38:39,381 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:38:39 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:38:39,382 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:38:39 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:38:39,383 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 12:38:39 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 12:38:39,384 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:38:39 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:38:39,384 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:38:39,385 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:38:39,385 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:38:39,386 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:38:39,386 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:38:39 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:38:39,573 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 12:38:39,574 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 12:38:47,864 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_routes.py', reloading
2025-04-05 12:38:47,865 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/app.py', reloading
2025-04-05 12:38:47,865 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_routes.py', reloading
2025-04-05 12:38:47,866 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/app.py', reloading
2025-04-05 12:38:47,876 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/app.py', reloading
2025-04-05 12:38:47,876 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_routes.py', reloading
2025-04-05 12:38:48,877 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 12:38:48,878 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 12:38:48,878 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 12:38:48,878 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 12:38:48,878 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 12:38:48 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 12:38:48,878 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 12:38:48 - INFO - [database.py:258] - Closing database connection
2025-04-05 12:38:48,878 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 12:38:48 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 12:38:49,716 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 12:38:52,762 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:38:52,762 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:38:52,762 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:38:52,763 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:38:52,763 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 12:38:52,772 [INFO] text2sql [app.py:61]: Debug logging enabled for SQL generator and agents
2025-04-05 12:38:52 - INFO - [app.py:61] - Debug logging enabled for SQL generator and agents
2025-04-05 12:38:52,773 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:38:52 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:38:52,773 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:38:52 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:38:52,777 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:38:52 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:38:52,777 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:38:52,777 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:38:52,777 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:38:52,777 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:38:52,777 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:38:52 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:38:52,778 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:38:52 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:38:52,778 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:38:52 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:38:52,778 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:38:52,778 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:38:52,778 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:38:52,779 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:38:52,779 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:38:52 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:38:52,779 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:38:52 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:38:52,780 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:38:52 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:38:52,780 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:38:52,780 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:38:52,780 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:38:52,780 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:38:52,781 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 12:38:52 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 12:38:52,781 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:38:52 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:38:52,781 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:38:52 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:38:52,782 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:38:52 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:38:52,782 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 12:38:52 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 12:38:52,782 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:38:52 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:38:52,782 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:38:52,783 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:38:52,783 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:38:52,783 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:38:52,783 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:38:52 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:38:52,924 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 12:38:52,925 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 12:39:40,207 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:39:40] "[35m[1mGET /admin/ HTTP/1.1[0m" 500 -
2025-04-05 12:39:40,404 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:39:40] "GET /admin/?__debugger__=yes&cmd=resource&f=style.css HTTP/1.1" 200 -
2025-04-05 12:39:40,527 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:39:40] "GET /admin/?__debugger__=yes&cmd=resource&f=debugger.js HTTP/1.1" 200 -
2025-04-05 12:39:40,551 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:39:40] "GET /admin/?__debugger__=yes&cmd=resource&f=console.png&s=asi5EgKLATGHnYdJYj2K HTTP/1.1" 200 -
2025-04-05 12:39:40,860 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:39:40] "GET /admin/?__debugger__=yes&cmd=resource&f=console.png HTTP/1.1" 200 -
2025-04-05 12:39:45,537 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:39:45] "GET / HTTP/1.1" 200 -
2025-04-05 12:39:45,880 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:39:45] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 12:39:45,892 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:39:45] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 12:39:45,893 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:39:45] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 12:39:45,893 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:39:45] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 12:39:45,895 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:39:45] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 12:39:45,897 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:39:45] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 12:39:46,203 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:39:46] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 12:39:46,216 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:39:46] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 12:39:46,399 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:39:46] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 12:39:47,574 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:39:47] "[35m[1mGET /admin/ HTTP/1.1[0m" 500 -
2025-04-05 12:39:47,911 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:39:47] "[36mGET /admin/?__debugger__=yes&cmd=resource&f=style.css HTTP/1.1[0m" 304 -
2025-04-05 12:39:47,919 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:39:47] "[36mGET /admin/?__debugger__=yes&cmd=resource&f=debugger.js HTTP/1.1[0m" 304 -
2025-04-05 12:39:48,169 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:39:48] "[36mGET /admin/?__debugger__=yes&cmd=resource&f=console.png&s=asi5EgKLATGHnYdJYj2K HTTP/1.1[0m" 304 -
2025-04-05 12:41:00,978 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_routes.py', reloading
2025-04-05 12:41:00,979 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_routes.py', reloading
2025-04-05 12:41:00,982 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_routes.py', reloading
2025-04-05 12:41:01,984 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 12:41:01,984 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 12:41:01,989 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 12:41:01,989 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 12:41:01,990 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 12:41:01 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 12:41:01,990 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 12:41:01 - INFO - [database.py:258] - Closing database connection
2025-04-05 12:41:01,990 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 12:41:01 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 12:41:02,857 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 12:41:06,000 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:41:06,000 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:41:06,000 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:41:06,000 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:41:06,001 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 12:41:06,009 [INFO] text2sql [app.py:61]: Debug logging enabled for SQL generator and agents
2025-04-05 12:41:06 - INFO - [app.py:61] - Debug logging enabled for SQL generator and agents
2025-04-05 12:41:06,010 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:41:06 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:41:06,010 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:41:06 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:41:06,014 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:41:06 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:41:06,015 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:41:06,015 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:41:06,015 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:41:06,015 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:41:06,015 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:41:06 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:41:06,016 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:41:06 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:41:06,016 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:41:06 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:41:06,016 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:41:06,016 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:41:06,016 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:41:06,017 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:41:06,017 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:41:06 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:41:06,017 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:41:06 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:41:06,017 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:41:06 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:41:06,017 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:41:06,017 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:41:06,018 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:41:06,018 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:41:06,018 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 12:41:06 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 12:41:06,018 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:41:06 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:41:06,018 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:41:06 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:41:06,018 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:41:06 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:41:06,019 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 12:41:06 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 12:41:06,019 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:41:06 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:41:06,019 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:41:06,019 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:41:06,020 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:41:06,020 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:41:06,020 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:41:06 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:41:06,164 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 12:41:06,165 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 12:41:06,621 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:41:06] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 12:41:06,662 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:41:06] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 12:41:06,965 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:41:06] "GET /static/js/admin/dashboard.js HTTP/1.1" 200 -
2025-04-05 12:41:07,291 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:41:07] "[33mGET /admin/api/audit-logs?limit=5 HTTP/1.1[0m" 404 -
2025-04-05 12:41:07,300 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:41:07] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 12:41:09,054 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:41:09] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 12:41:09,421 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:41:09] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 12:41:09,429 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:41:09] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 12:41:09,678 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:41:09] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 12:41:09,797 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:41:09] "[33mGET /admin/api/audit-logs?limit=5 HTTP/1.1[0m" 404 -
2025-04-05 12:41:28,878 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_routes.py', reloading
2025-04-05 12:41:28,879 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_routes.py', reloading
2025-04-05 12:41:28,915 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_routes.py', reloading
2025-04-05 12:41:29,917 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 12:41:29,917 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 12:41:29,917 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 12:41:29,918 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 12:41:29,918 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 12:41:29 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 12:41:29,918 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 12:41:29 - INFO - [database.py:258] - Closing database connection
2025-04-05 12:41:29,918 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 12:41:29 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 12:41:30,906 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 12:41:34,719 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:41:34,720 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:41:34,720 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:41:34,720 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:41:34,721 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 12:41:34,735 [INFO] text2sql [app.py:61]: Debug logging enabled for SQL generator and agents
2025-04-05 12:41:34 - INFO - [app.py:61] - Debug logging enabled for SQL generator and agents
2025-04-05 12:41:34,737 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:41:34 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:41:34,738 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:41:34 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:41:34,742 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:41:34 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:41:34,743 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:41:34,743 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:41:34,744 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:41:34,744 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:41:34,744 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:41:34 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:41:34,744 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:41:34 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:41:34,745 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:41:34 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:41:34,745 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:41:34,746 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:41:34,746 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:41:34,746 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:41:34,746 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:41:34 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:41:34,747 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:41:34 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:41:34,747 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:41:34 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:41:34,747 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:41:34,748 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:41:34,748 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:41:34,748 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:41:34,748 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 12:41:34 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 12:41:34,749 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:41:34 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:41:34,749 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:41:34 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:41:34,750 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:41:34 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:41:34,750 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 12:41:34 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 12:41:34,751 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:41:34 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:41:34,751 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:41:34,751 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:41:34,752 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:41:34,752 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:41:34,752 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:41:34 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:41:34,929 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 12:41:34,930 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 12:41:35,725 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:41:35] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 12:41:35,767 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:41:35] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 12:41:36,082 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:41:36] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 12:41:36,443 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:41:36] "[33mGET /admin/api/audit-logs?limit=5 HTTP/1.1[0m" 404 -
2025-04-05 12:41:36,458 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:41:36] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 12:41:38,432 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:41:38] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 12:41:38,783 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:41:38] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 12:41:38,789 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:41:38] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 12:41:39,039 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:41:39] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 12:41:39,150 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:41:39] "[33mGET /admin/api/audit-logs?limit=5 HTTP/1.1[0m" 404 -
2025-04-05 12:42:04,392 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_routes.py', reloading
2025-04-05 12:42:04,392 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_routes.py', reloading
2025-04-05 12:42:04,393 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_routes.py', reloading
2025-04-05 12:42:05,394 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 12:42:05,394 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 12:42:05,394 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 12:42:05,395 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 12:42:05,395 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 12:42:05 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 12:42:05,395 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 12:42:05 - INFO - [database.py:258] - Closing database connection
2025-04-05 12:42:05,396 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 12:42:05 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 12:42:06,244 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 12:42:09,315 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:42:09,316 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:42:09,316 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:42:09,316 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:42:09,317 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 12:42:09,328 [INFO] text2sql [app.py:61]: Debug logging enabled for SQL generator and agents
2025-04-05 12:42:09 - INFO - [app.py:61] - Debug logging enabled for SQL generator and agents
2025-04-05 12:42:09,330 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:42:09 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:42:09,330 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:42:09 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:42:09,332 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:42:09 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:42:09,333 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:42:09,333 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:42:09,333 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:42:09,333 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:42:09,333 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:42:09 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:42:09,334 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:42:09 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:42:09,334 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:42:09 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:42:09,334 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:42:09,334 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:42:09,334 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:42:09,335 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:42:09,335 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:42:09 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:42:09,335 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:42:09 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:42:09,335 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:42:09 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:42:09,336 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:42:09,336 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:42:09,336 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:42:09,336 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:42:09,336 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 12:42:09 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 12:42:09,337 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:42:09 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:42:09,337 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:42:09 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:42:09,337 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:42:09 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:42:09,338 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 12:42:09 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 12:42:09,338 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:42:09 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:42:09,338 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:42:09,339 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:42:09,339 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:42:09,339 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:42:09,339 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:42:09 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:42:09,472 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 12:42:09,473 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 12:42:16,543 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:42:16] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 12:42:16,779 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:42:16] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 12:42:16,893 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:42:16] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 12:42:16,916 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:42:16] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 12:42:17,221 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:42:17] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 12:42:19,481 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:42:19] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 12:42:19,743 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:42:19] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 12:42:19,815 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:42:19] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 12:42:19,828 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:42:19] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 12:42:20,159 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:42:20] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 12:42:21,413 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:42:21] "GET /admin/users HTTP/1.1" 200 -
2025-04-05 12:42:21,635 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:42:21] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 12:42:21,742 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:42:21] "[36mGET /static/js/admin/users.js HTTP/1.1[0m" 304 -
2025-04-05 12:42:22,969 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:42:22] "[35m[1mGET /admin/roles HTTP/1.1[0m" 500 -
2025-04-05 12:42:23,305 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:42:23] "[36mGET /admin/roles?__debugger__=yes&cmd=resource&f=style.css HTTP/1.1[0m" 304 -
2025-04-05 12:42:23,311 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:42:23] "[36mGET /admin/roles?__debugger__=yes&cmd=resource&f=debugger.js HTTP/1.1[0m" 304 -
2025-04-05 12:42:23,566 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:42:23] "GET /admin/roles?__debugger__=yes&cmd=resource&f=console.png&s=J0byw0L5uFxmIzdeP3j2 HTTP/1.1" 200 -
2025-04-05 12:43:52,213 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:43:52] "GET /admin/users HTTP/1.1" 200 -
2025-04-05 12:43:52,457 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:43:52] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 12:43:52,563 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:43:52] "[36mGET /static/js/admin/users.js HTTP/1.1[0m" 304 -
2025-04-05 12:43:53,744 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:43:53] "GET /admin/users/1/edit HTTP/1.1" 200 -
2025-04-05 12:43:54,107 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:43:54] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 12:43:54,122 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:43:54] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 12:43:54,129 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:43:54] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 12:43:54,131 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:43:54] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 12:43:54,138 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:43:54] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 12:43:54,140 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:43:54] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 12:43:54,451 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:43:54] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 12:43:54,452 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:43:54] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 12:43:54,642 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:43:54] "GET /api/tables/suggestions?workspace= HTTP/1.1" 200 -
2025-04-05 12:44:02,185 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:44:02] "[35m[1mGET /admin/roles HTTP/1.1[0m" 500 -
2025-04-05 12:44:02,519 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:44:02] "[36mGET /admin/roles?__debugger__=yes&cmd=resource&f=style.css HTTP/1.1[0m" 304 -
2025-04-05 12:44:02,534 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:44:02] "[36mGET /admin/roles?__debugger__=yes&cmd=resource&f=debugger.js HTTP/1.1[0m" 304 -
2025-04-05 12:44:02,784 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:44:02] "[36mGET /admin/roles?__debugger__=yes&cmd=resource&f=console.png&s=J0byw0L5uFxmIzdeP3j2 HTTP/1.1[0m" 304 -
2025-04-05 12:44:05,156 [INFO] text2sql [app.py:260]: Schema requested for workspace: 
2025-04-05 12:44:05 - INFO - [app.py:260] - Schema requested for workspace: 
2025-04-05 12:44:05,158 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:44:05] "GET /api/schema?workspace= HTTP/1.1" 200 -
2025-04-05 12:44:20,434 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:44:20] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 12:44:34,740 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:44:34] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 12:44:35,084 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:44:35] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 12:44:35,095 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:44:35] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 12:44:35,348 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:44:35] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 12:44:35,441 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:44:35] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 12:44:35,987 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:44:35] "GET /admin/users HTTP/1.1" 200 -
2025-04-05 12:44:36,321 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:44:36] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 12:44:36,333 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:44:36] "[36mGET /static/js/admin/users.js HTTP/1.1[0m" 304 -
2025-04-05 12:44:36,970 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:44:36] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 12:44:37,304 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:44:37] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 12:44:37,313 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:44:37] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 12:44:37,584 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:44:37] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 12:44:37,682 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:44:37] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 12:45:49,792 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:45:49] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 12:45:50,031 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:45:50] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 12:45:50,140 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:45:50] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 12:45:50,167 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:45:50] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 12:45:50,460 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:45:50] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 12:45:52,084 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:45:52] "GET /admin/roles HTTP/1.1" 200 -
2025-04-05 12:45:52,311 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:45:52] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 12:45:52,418 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:45:52] "[33mGET /static/js/admin/roles.js HTTP/1.1[0m" 404 -
2025-04-05 12:46:26,679 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:46:26] "GET /admin/roles HTTP/1.1" 200 -
2025-04-05 12:46:27,031 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:46:27] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 12:46:27,040 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:46:27] "GET /static/js/admin/roles.js HTTP/1.1" 200 -
2025-04-05 12:46:34,062 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:46:34] "[33mGET /admin/api/roles/1/permissions HTTP/1.1[0m" 404 -
2025-04-05 12:46:36,693 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:46:36] "[33mGET /admin/api/roles/2/permissions HTTP/1.1[0m" 404 -
2025-04-05 12:46:37,967 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:46:37] "GET /admin/roles HTTP/1.1" 200 -
2025-04-05 12:46:38,315 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:46:38] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 12:46:38,319 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:46:38] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-05 12:46:51,357 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_api_routes.py', reloading
2025-04-05 12:46:51,359 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_api_routes.py', reloading
2025-04-05 12:46:52,360 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 12:46:52,360 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 12:46:52,360 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 12:46:52,360 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 12:46:52,360 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 12:46:52 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 12:46:52,361 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 12:46:52 - INFO - [database.py:258] - Closing database connection
2025-04-05 12:46:52,361 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 12:46:52 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 12:46:53,201 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 12:46:58,615 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:46:58,616 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:46:58,616 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:46:58,617 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:46:58,619 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 12:46:58,640 [INFO] text2sql [app.py:61]: Debug logging enabled for SQL generator and agents
2025-04-05 12:46:58 - INFO - [app.py:61] - Debug logging enabled for SQL generator and agents
2025-04-05 12:46:58,642 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:46:58 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:46:58,643 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:46:58 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:46:58,648 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:46:58 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:46:58,649 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:46:58,650 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:46:58,650 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:46:58,650 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:46:58,650 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:46:58 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:46:58,651 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:46:58 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:46:58,651 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:46:58 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:46:58,652 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:46:58,652 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:46:58,652 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:46:58,653 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:46:58,653 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:46:58 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:46:58,653 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:46:58 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:46:58,654 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:46:58 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:46:58,655 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:46:58,655 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:46:58,655 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:46:58,656 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:46:58,656 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 12:46:58 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 12:46:58,657 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:46:58 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:46:58,657 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:46:58 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:46:58,658 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:46:58 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:46:58,659 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 12:46:58 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 12:46:58,660 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:46:58 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:46:58,660 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:46:58,661 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:46:58,661 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:46:58,661 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:46:58,661 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:46:58 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:46:58,862 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 12:46:58,863 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 12:47:42,944 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/app.py', reloading
2025-04-05 12:47:42,962 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/app.py', reloading
2025-04-05 12:47:43,964 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 12:47:43,965 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 12:47:43,965 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 12:47:43,966 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 12:47:43,966 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 12:47:43 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 12:47:43,966 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 12:47:43 - INFO - [database.py:258] - Closing database connection
2025-04-05 12:47:43,967 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 12:47:43 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 12:47:45,319 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 12:47:52,277 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:47:52,277 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:47:52,278 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:47:52,279 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:47:52,280 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 12:47:52,301 [INFO] text2sql [app.py:62]: Debug logging enabled for SQL generator and agents
2025-04-05 12:47:52 - INFO - [app.py:62] - Debug logging enabled for SQL generator and agents
2025-04-05 12:47:52,303 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:47:52 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:47:52,303 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:47:52 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:47:52,308 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:47:52 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:47:52,309 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:47:52,309 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:47:52,309 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:47:52,310 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:47:52,310 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:47:52 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:47:52,310 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:47:52 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:47:52,311 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:47:52 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:47:52,312 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:47:52,312 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:47:52,312 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:47:52,313 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:47:52,313 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:47:52 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:47:52,313 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:47:52 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:47:52,314 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:47:52 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:47:52,315 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:47:52,315 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:47:52,315 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:47:52,316 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:47:52,317 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 12:47:52 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 12:47:52,318 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:47:52 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:47:52,319 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:47:52 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:47:52,323 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:47:52 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:47:52,323 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 12:47:52 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 12:47:52,324 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:47:52 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:47:52,324 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:47:52,325 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:47:52,325 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:47:52,325 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:47:52,326 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:47:52 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:47:52,507 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 12:47:52,508 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 12:47:53,489 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:47:53] "GET /admin/roles HTTP/1.1" 200 -
2025-04-05 12:47:54,073 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:47:54] "GET /admin/roles HTTP/1.1" 200 -
2025-04-05 12:47:54,507 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:47:54] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-05 12:47:54,511 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:47:54] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 12:47:56,051 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:47:56] "[35m[1mGET /admin/api/roles/1/permissions HTTP/1.1[0m" 500 -
2025-04-05 12:47:58,357 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:47:58] "[35m[1mGET /admin/api/roles/2/permissions HTTP/1.1[0m" 500 -
2025-04-05 12:48:10,773 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_api_routes.py', reloading
2025-04-05 12:48:10,773 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/app.py', reloading
2025-04-05 12:48:10,774 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_api_routes.py', reloading
2025-04-05 12:48:10,775 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/app.py', reloading
2025-04-05 12:48:10,788 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_api_routes.py', reloading
2025-04-05 12:48:10,788 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/app.py', reloading
2025-04-05 12:48:11,790 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 12:48:11,790 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 12:48:11,791 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 12:48:11,791 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 12:48:11,791 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 12:48:11 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 12:48:11,792 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 12:48:11 - INFO - [database.py:258] - Closing database connection
2025-04-05 12:48:11,792 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 12:48:11 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 12:48:12,716 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 12:48:16,551 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:48:16,551 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:48:16,552 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:48:16,552 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:48:16,552 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 12:48:16,563 [INFO] text2sql [app.py:62]: Debug logging enabled for SQL generator and agents
2025-04-05 12:48:16 - INFO - [app.py:62] - Debug logging enabled for SQL generator and agents
2025-04-05 12:48:16,565 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:48:16 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:48:16,565 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:48:16 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:48:16,569 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:48:16 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:48:16,569 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:48:16,569 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:48:16,569 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:48:16,570 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:48:16,570 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:48:16 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:48:16,570 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:48:16 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:48:16,570 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:48:16 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:48:16,571 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:48:16,571 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:48:16,571 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:48:16,571 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:48:16,571 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:48:16 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:48:16,571 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:48:16 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:48:16,572 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:48:16 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:48:16,572 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:48:16,573 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:48:16,573 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:48:16,573 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:48:16,573 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 12:48:16 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 12:48:16,573 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:48:16 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:48:16,573 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:48:16 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:48:16,575 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:48:16 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:48:16,575 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 12:48:16 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 12:48:16,576 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:48:16 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:48:16,576 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:48:16,576 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:48:16,576 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:48:16,576 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:48:16,577 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:48:16 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:48:16,714 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 12:48:16,714 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 12:48:17,411 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:48:17] "GET /admin/roles HTTP/1.1" 200 -
2025-04-05 12:48:17,458 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:48:17] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 12:48:17,771 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:48:17] "GET /static/js/admin/roles.js HTTP/1.1" 200 -
2025-04-05 12:48:30,396 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:48:30] "GET /admin/roles HTTP/1.1" 200 -
2025-04-05 12:48:30,629 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:48:30] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 12:48:30,743 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:48:30] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-05 12:48:32,611 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:48:32] "GET /admin/roles HTTP/1.1" 200 -
2025-04-05 12:48:32,956 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:48:32] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 12:48:32,959 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:48:32] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-05 12:48:35,058 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:48:35] "[35m[1mGET /admin/api/roles/1/permissions HTTP/1.1[0m" 500 -
2025-04-05 12:50:01,615 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/user_manager.py', reloading
2025-04-05 12:50:01,624 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/user_manager.py', reloading
2025-04-05 12:50:01,683 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/user_manager.py', reloading
2025-04-05 12:50:02,685 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 12:50:02,691 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 12:50:02,691 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 12:50:02,692 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 12:50:02,692 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 12:50:02 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 12:50:02,693 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 12:50:02 - INFO - [database.py:258] - Closing database connection
2025-04-05 12:50:02,693 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 12:50:02 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 12:50:04,463 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 12:50:11,307 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:50:11,307 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:50:11,308 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:50:11,308 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:50:11,309 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 12:50:11,318 [INFO] text2sql [app.py:62]: Debug logging enabled for SQL generator and agents
2025-04-05 12:50:11 - INFO - [app.py:62] - Debug logging enabled for SQL generator and agents
2025-04-05 12:50:11,320 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:50:11 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:50:11,320 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:50:11 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:50:11,323 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:50:11 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:50:11,324 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:50:11,325 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:50:11,325 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:50:11,325 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:50:11,326 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:50:11 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:50:11,326 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:50:11 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:50:11,327 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:50:11 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:50:11,327 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:50:11,327 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:50:11,328 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:50:11,328 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:50:11,328 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:50:11 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:50:11,328 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:50:11 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:50:11,329 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:50:11 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:50:11,329 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:50:11,329 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:50:11,330 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:50:11,330 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:50:11,330 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 12:50:11 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 12:50:11,330 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:50:11 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:50:11,331 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:50:11 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:50:11,331 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:50:11 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:50:11,332 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 12:50:11 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 12:50:11,332 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:50:11 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:50:11,332 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:50:11,335 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:50:11,336 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:50:11,336 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:50:11,336 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:50:11 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:50:11,496 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 12:50:11,496 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 12:50:15,701 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:50:15] "GET /admin/roles HTTP/1.1" 200 -
2025-04-05 12:50:15,869 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:50:15] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 12:50:16,047 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:50:16] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-05 12:50:17,569 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:50:17] "[35m[1mGET /admin/api/roles/1/permissions HTTP/1.1[0m" 500 -
2025-04-05 12:50:57,488 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/user_manager.py', reloading
2025-04-05 12:50:57,490 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/user_manager.py', reloading
2025-04-05 12:50:57,651 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 12:50:57,652 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 12:50:57,685 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 12:50:57,686 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 12:50:57,687 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 12:50:57 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 12:50:57,689 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 12:50:57 - INFO - [database.py:258] - Closing database connection
2025-04-05 12:50:57,691 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 12:50:57 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 12:50:59,331 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 12:51:06,746 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:51:06,746 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:51:06,747 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:51:06,747 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:51:06,748 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 12:51:06,757 [INFO] text2sql [app.py:62]: Debug logging enabled for SQL generator and agents
2025-04-05 12:51:06 - INFO - [app.py:62] - Debug logging enabled for SQL generator and agents
2025-04-05 12:51:06,759 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:51:06 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:51:06,760 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:51:06 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:51:06,763 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:51:06 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:51:06,763 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:51:06,764 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:51:06,764 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:51:06,764 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:51:06,764 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:51:06 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:51:06,764 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:51:06 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:51:06,765 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:51:06 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:51:06,765 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:51:06,765 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:51:06,766 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:51:06,766 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:51:06,766 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:51:06 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:51:06,766 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:51:06 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:51:06,767 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:51:06 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:51:06,768 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:51:06,768 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:51:06,769 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:51:06,769 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:51:06,770 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 12:51:06 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 12:51:06,771 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:51:06 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:51:06,771 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:51:06 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:51:06,772 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:51:06 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:51:06,772 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 12:51:06 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 12:51:06,773 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:51:06 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:51:06,773 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:51:06,776 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:51:06,776 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:51:06,777 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:51:06,777 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:51:06 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:51:06,937 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 12:51:06,938 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 12:51:29,526 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/user_manager.py', reloading
2025-04-05 12:51:29,526 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/user_manager.py', reloading
2025-04-05 12:51:29,538 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/user_manager.py', reloading
2025-04-05 12:51:30,539 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 12:51:30,539 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 12:51:30,539 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 12:51:30,540 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 12:51:30,540 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 12:51:30 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 12:51:30,540 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 12:51:30 - INFO - [database.py:258] - Closing database connection
2025-04-05 12:51:30,540 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 12:51:30 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 12:51:31,408 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 12:51:34,826 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:51:34,826 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:51:34,826 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:51:34,827 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:51:34,827 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 12:51:34,836 [INFO] text2sql [app.py:62]: Debug logging enabled for SQL generator and agents
2025-04-05 12:51:34 - INFO - [app.py:62] - Debug logging enabled for SQL generator and agents
2025-04-05 12:51:34,838 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:51:34 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:51:34,838 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:51:34 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:51:34,841 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:51:34 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:51:34,842 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:51:34,842 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:51:34,842 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:51:34,842 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:51:34,843 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:51:34 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:51:34,843 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:51:34 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:51:34,843 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:51:34 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:51:34,844 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:51:34,844 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:51:34,844 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:51:34,844 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:51:34,844 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:51:34 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:51:34,845 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:51:34 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:51:34,845 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:51:34 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:51:34,846 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:51:34,846 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:51:34,846 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:51:34,847 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:51:34,847 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 12:51:34 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 12:51:34,847 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:51:34 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:51:34,848 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:51:34 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:51:34,848 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:51:34 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:51:34,849 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 12:51:34 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 12:51:34,849 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:51:34 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:51:34,849 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:51:34,852 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:51:34,852 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:51:34,852 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:51:34,853 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:51:34 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:51:35,009 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 12:51:35,010 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 12:51:35,722 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:51:35] "GET /admin/roles HTTP/1.1" 200 -
2025-04-05 12:51:35,775 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:51:35] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 12:51:36,096 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:51:36] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-05 12:51:38,816 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:51:38] "GET /admin/roles HTTP/1.1" 200 -
2025-04-05 12:51:39,064 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:51:39] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 12:51:39,152 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:51:39] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-05 12:51:40,680 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:51:40] "[35m[1mGET /admin/api/roles/1/permissions HTTP/1.1[0m" 500 -
2025-04-05 12:52:44,402 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:52:44] "[35m[1mGET /admin/api/roles/1/permissions HTTP/1.1[0m" 500 -
2025-04-05 12:52:58,013 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_api_routes.py', reloading
2025-04-05 12:52:58,015 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_api_routes.py', reloading
2025-04-05 12:52:58,035 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_api_routes.py', reloading
2025-04-05 12:52:59,038 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 12:52:59,041 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 12:52:59,042 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 12:52:59,042 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 12:52:59,042 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 12:52:59 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 12:52:59,043 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 12:52:59 - INFO - [database.py:258] - Closing database connection
2025-04-05 12:52:59,043 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 12:52:59 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 12:53:00,202 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 12:53:05,904 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:53:05,904 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:53:05,904 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:53:05,905 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:53:05,906 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 12:53:05,918 [INFO] text2sql [app.py:62]: Debug logging enabled for SQL generator and agents
2025-04-05 12:53:05 - INFO - [app.py:62] - Debug logging enabled for SQL generator and agents
2025-04-05 12:53:05,920 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:53:05 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:53:05,920 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:53:05 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:53:05,924 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:53:05 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:53:05,924 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:53:05,925 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:53:05,925 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:53:05,925 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:53:05,925 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:53:05 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:53:05,925 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:53:05 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:53:05,926 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:53:05 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:53:05,926 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:53:05,927 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:53:05,927 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:53:05,927 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:53:05,928 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:53:05 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:53:05,928 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:53:05 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:53:05,929 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:53:05 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:53:05,929 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:53:05,930 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:53:05,930 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:53:05,930 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:53:05,931 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 12:53:05 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 12:53:05,931 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:53:05 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:53:05,931 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:53:05 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:53:05,934 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:53:05 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:53:05,935 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 12:53:05 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 12:53:05,935 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:53:05 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:53:05,935 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:53:05,936 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:53:05,936 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:53:05,936 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:53:05,936 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:53:05 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:53:06,118 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 12:53:06,119 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 12:53:08,411 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:53:08] "GET /admin/roles HTTP/1.1" 200 -
2025-04-05 12:53:08,620 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:53:08] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 12:53:08,767 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:53:08] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-05 12:53:10,270 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:53:10] "GET /admin/api/roles/1/permissions HTTP/1.1" 200 -
2025-04-05 12:53:16,092 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:53:16] "GET /admin/api/roles/2/permissions HTTP/1.1" 200 -
2025-04-05 12:53:38,116 [ERROR] text2sql [user_manager.py:389]: Error updating role permissions: int() argument must be a string, a bytes-like object or a real number, not 'NoneType'
2025-04-05 12:53:38 - ERROR - [user_manager.py:389] - Error updating role permissions: int() argument must be a string, a bytes-like object or a real number, not 'NoneType'
2025-04-05 12:53:38,121 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:53:38] "[35m[1mPUT /admin/api/roles/2/permissions HTTP/1.1[0m" 500 -
2025-04-05 12:54:26,303 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:54:26] "GET /admin/roles HTTP/1.1" 200 -
2025-04-05 12:54:26,544 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:54:26] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 12:54:26,663 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:54:26] "GET /static/js/admin/roles.js HTTP/1.1" 200 -
2025-04-05 12:54:28,335 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:54:28] "GET /admin/api/roles/2/permissions HTTP/1.1" 200 -
2025-04-05 12:54:32,683 [ERROR] text2sql [user_manager.py:389]: Error updating role permissions: int() argument must be a string, a bytes-like object or a real number, not 'NoneType'
2025-04-05 12:54:32 - ERROR - [user_manager.py:389] - Error updating role permissions: int() argument must be a string, a bytes-like object or a real number, not 'NoneType'
2025-04-05 12:54:32,684 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:54:32] "[35m[1mPUT /admin/api/roles/2/permissions HTTP/1.1[0m" 500 -
2025-04-05 12:56:00,536 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_api_routes.py', reloading
2025-04-05 12:56:00,537 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_api_routes.py', reloading
2025-04-05 12:56:00,539 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_api_routes.py', reloading
2025-04-05 12:56:01,540 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 12:56:01,540 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 12:56:01,541 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 12:56:01,541 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 12:56:01,541 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 12:56:01 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 12:56:01,541 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 12:56:01 - INFO - [database.py:258] - Closing database connection
2025-04-05 12:56:01,542 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 12:56:01 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 12:56:02,508 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 12:56:07,780 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:56:07,780 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:56:07,780 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:56:07,781 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:56:07,781 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 12:56:07,792 [INFO] text2sql [app.py:62]: Debug logging enabled for SQL generator and agents
2025-04-05 12:56:07 - INFO - [app.py:62] - Debug logging enabled for SQL generator and agents
2025-04-05 12:56:07,794 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:56:07 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:56:07,794 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:56:07 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:56:07,797 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:56:07 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:56:07,798 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:56:07,798 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:56:07,798 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:56:07,799 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:56:07,799 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:56:07 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:56:07,799 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:56:07 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:56:07,800 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:56:07 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:56:07,801 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:56:07,801 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:56:07,801 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:56:07,802 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:56:07,802 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:56:07 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:56:07,803 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:56:07 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:56:07,804 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:56:07 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:56:07,804 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:56:07,804 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:56:07,805 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:56:07,805 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:56:07,805 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 12:56:07 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 12:56:07,805 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:56:07 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:56:07,806 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:56:07 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:56:07,808 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:56:07 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:56:07,809 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 12:56:07 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 12:56:07,809 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:56:07 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:56:07,809 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:56:07,810 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:56:07,810 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:56:07,810 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:56:07,810 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:56:07 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:56:07,964 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 12:56:07,965 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 12:56:08,726 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:56:08] "GET /admin/roles HTTP/1.1" 200 -
2025-04-05 12:56:08,777 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:56:08] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 12:56:09,096 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:56:09] "GET /static/js/admin/roles.js HTTP/1.1" 200 -
2025-04-05 12:56:11,534 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:56:11] "GET /admin/api/roles/2/permissions HTTP/1.1" 200 -
2025-04-05 12:56:14,831 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:56:14] "PUT /admin/api/roles/2/permissions HTTP/1.1" 200 -
2025-04-05 12:56:16,622 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:56:16] "GET /admin/roles HTTP/1.1" 200 -
2025-04-05 12:56:16,873 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:56:16] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 12:56:16,956 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:56:16] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-05 12:56:18,277 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:56:18] "GET /admin/api/roles/2/permissions HTTP/1.1" 200 -
2025-04-05 12:56:21,696 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:56:21] "PUT /admin/api/roles/2/permissions HTTP/1.1" 200 -
2025-04-05 12:56:22,708 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:56:22] "GET /admin/roles HTTP/1.1" 200 -
2025-04-05 12:56:23,048 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:56:23] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 12:56:23,051 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:56:23] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-05 12:56:23,303 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:56:23] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 12:56:23,564 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:56:23] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 12:56:23,640 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:56:23] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 12:56:23,665 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:56:23] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 12:56:23,994 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:56:23] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 12:56:30,155 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:56:30] "GET /admin/users HTTP/1.1" 200 -
2025-04-05 12:56:30,394 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:56:30] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 12:56:30,496 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:56:30] "[36mGET /static/js/admin/users.js HTTP/1.1[0m" 304 -
2025-04-05 12:56:31,227 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:56:31] "GET /admin/roles HTTP/1.1" 200 -
2025-04-05 12:56:31,580 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:56:31] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 12:56:31,585 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:56:31] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-05 12:56:32,327 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:56:32] "[35m[1mGET /admin/audit-logs HTTP/1.1[0m" 500 -
2025-04-05 12:56:32,665 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:56:32] "[36mGET /admin/audit-logs?__debugger__=yes&cmd=resource&f=style.css HTTP/1.1[0m" 304 -
2025-04-05 12:56:32,670 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:56:32] "[36mGET /admin/audit-logs?__debugger__=yes&cmd=resource&f=debugger.js HTTP/1.1[0m" 304 -
2025-04-05 12:56:32,926 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:56:32] "GET /admin/audit-logs?__debugger__=yes&cmd=resource&f=console.png&s=swpSDj6Ks9yFR7ip333K HTTP/1.1" 200 -
2025-04-05 12:57:30,430 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/template_filters.py', reloading
2025-04-05 12:57:30,433 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/template_filters.py', reloading
2025-04-05 12:57:31,434 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 12:57:31,434 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 12:57:31,434 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 12:57:31,434 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 12:57:31,435 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 12:57:31 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 12:57:31,435 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 12:57:31 - INFO - [database.py:258] - Closing database connection
2025-04-05 12:57:31,435 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 12:57:31 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 12:57:32,415 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 12:57:37,515 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:57:37,515 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:57:37,515 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:57:37,516 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:57:37,516 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 12:57:37,527 [INFO] text2sql [app.py:62]: Debug logging enabled for SQL generator and agents
2025-04-05 12:57:37 - INFO - [app.py:62] - Debug logging enabled for SQL generator and agents
2025-04-05 12:57:37,528 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:57:37 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:57:37,529 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:57:37 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:57:37,532 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:57:37 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:57:37,532 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:57:37,533 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:57:37,533 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:57:37,533 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:57:37,533 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:57:37 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:57:37,534 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:57:37 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:57:37,534 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:57:37 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:57:37,535 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:57:37,535 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:57:37,535 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:57:37,536 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:57:37,536 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:57:37 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:57:37,536 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:57:37 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:57:37,537 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:57:37 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:57:37,537 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:57:37,538 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:57:37,538 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:57:37,539 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:57:37,539 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 12:57:37 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 12:57:37,539 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:57:37 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:57:37,540 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:57:37 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:57:37,540 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:57:37 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:57:37,541 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 12:57:37 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 12:57:37,541 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:57:37 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:57:37,542 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:57:37,544 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:57:37,544 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:57:37,544 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:57:37,544 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:57:37 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:57:37,698 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 12:57:37,698 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 12:58:24,392 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/app.py', reloading
2025-04-05 12:58:24,393 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/app.py', reloading
2025-04-05 12:58:24,403 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/app.py', reloading
2025-04-05 12:58:25,405 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 12:58:25,405 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 12:58:25,405 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 12:58:25,405 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 12:58:25,406 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 12:58:25 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 12:58:25,406 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 12:58:25 - INFO - [database.py:258] - Closing database connection
2025-04-05 12:58:25,406 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 12:58:25 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 12:58:28,072 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 12:58:34,862 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:58:34,863 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:58:34,863 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:58:34,863 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:58:34,865 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 12:58:34,874 [INFO] text2sql [app.py:63]: Debug logging enabled for SQL generator and agents
2025-04-05 12:58:34 - INFO - [app.py:63] - Debug logging enabled for SQL generator and agents
2025-04-05 12:58:34,876 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:58:34 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:58:34,876 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:58:34 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:58:34,880 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:58:34 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:58:34,881 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:58:34,881 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:58:34,881 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:58:34,881 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:58:34,882 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:58:34 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:58:34,882 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:58:34 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:58:34,883 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:58:34 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:58:34,883 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:58:34,883 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:58:34,883 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:58:34,884 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:58:34,884 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:58:34 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:58:34,884 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:58:34 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:58:34,885 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:58:34 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:58:34,885 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:58:34,885 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:58:34,885 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:58:34,886 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:58:34,886 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 12:58:34 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 12:58:34,886 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:58:34 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 12:58:34,886 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 12:58:34 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 12:58:34,887 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 12:58:34 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 12:58:34,887 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 12:58:34 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 12:58:34,888 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:58:34 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:58:34,888 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 12:58:34,891 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 12:58:34,892 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 12:58:34,892 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 12:58:34,892 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:58:34 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 12:58:35,078 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 12:58:35,079 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 12:58:41,070 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:58:41] "[35m[1mGET /admin/audit-logs HTTP/1.1[0m" 500 -
2025-04-05 12:58:41,280 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:58:41] "[36mGET /admin/audit-logs?__debugger__=yes&cmd=resource&f=style.css HTTP/1.1[0m" 304 -
2025-04-05 12:58:41,423 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:58:41] "[36mGET /admin/audit-logs?__debugger__=yes&cmd=resource&f=debugger.js HTTP/1.1[0m" 304 -
2025-04-05 12:58:41,444 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:58:41] "GET /admin/audit-logs?__debugger__=yes&cmd=resource&f=console.png&s=dwKHyLBupmNboEuldUPU HTTP/1.1" 200 -
2025-04-05 12:58:41,782 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:58:41] "[36mGET /admin/audit-logs?__debugger__=yes&cmd=resource&f=console.png HTTP/1.1[0m" 304 -
2025-04-05 12:59:28,305 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:59:28] "GET /admin/audit-logs HTTP/1.1" 200 -
2025-04-05 12:59:28,640 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:59:28] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 12:59:28,643 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:59:28] "GET /static/js/admin/audit-logs.js HTTP/1.1" 200 -
2025-04-05 12:59:37,038 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:59:37] "GET / HTTP/1.1" 200 -
2025-04-05 12:59:37,380 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:59:37] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 12:59:37,398 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:59:37] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 12:59:37,400 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:59:37] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 12:59:37,399 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:59:37] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 12:59:37,403 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:59:37] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 12:59:37,404 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:59:37] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 12:59:37,698 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:59:37] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 12:59:37,716 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:59:37] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 12:59:37,884 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:59:37] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 12:59:42,216 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'get me all customers'
2025-04-05 12:59:42,217 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:59:42] "POST /api/query HTTP/1.1" 200 -
2025-04-05 12:59:42,217 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'get me all customers'
2025-04-05 12:59:42,218 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-05 12:59:42,219 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.00s
2025-04-05 12:59:42,220 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-05 12:59:42,221 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-05 12:59:42,221 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-05 12:59:42 - INFO - [database.py:44] - Attempting database connection
2025-04-05 12:59:42,223 [INFO] text2sql.database [database.py:48]: Database connection established in 0.00s
2025-04-05 12:59:42 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-05 12:59:42,224 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'get me all customers'
2025-04-05 12:59:42,225 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-05 12:59:42,226 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-05 12:59:42,226 [INFO] text2sql.llm_engine [llm_engine.py:55]: [TABLE] Completion generation started
2025-04-05 12:59:42 - INFO - [llm_engine.py:55] - [TABLE] Completion generation started
2025-04-05 12:59:43,039 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:59:43] "GET /api/query/progress/d614fc19-c944-4b42-ae7c-52988afda868 HTTP/1.1" 200 -
2025-04-05 12:59:43,305 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:59:43] "GET /api/query/progress/d614fc19-c944-4b42-ae7c-52988afda868 HTTP/1.1" 200 -
2025-04-05 12:59:43,714 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:59:43] "GET /api/query/progress/d614fc19-c944-4b42-ae7c-52988afda868 HTTP/1.1" 200 -
2025-04-05 12:59:43,995 [INFO] text2sql.llm_engine [llm_engine.py:92]: [TABLE] Completion generation completed in 1.77s
2025-04-05 12:59:43 - INFO - [llm_engine.py:92] - [TABLE] Completion generation completed in 1.77s
2025-04-05 12:59:43,995 [INFO] text2sql.llm_engine [llm_engine.py:93]: **************************
2025-04-05 12:59:43 - INFO - [llm_engine.py:93] - **************************
2025-04-05 12:59:43,996 [INFO] text2sql.agents.table [table_agent.py:69]: Raw model response: 'customers'
2025-04-05 12:59:43,997 [INFO] text2sql.agents.table [table_agent.py:90]: Table selection completed in 1.77s. Selected: customers
2025-04-05 12:59:43,998 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'get me all customers'
2025-04-05 12:59:43,998 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: customers
2025-04-05 12:59:43,999 [INFO] text2sql.agents.column [column_agent.py:38]: Only one table involved (customers). Skipping LLM call and including all columns.
2025-04-05 12:59:43,999 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 12:59:43 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 12:59:44,001 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 12:59:44 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 12:59:44,001 [INFO] text2sql.feedback [feedback_manager.py:267]: Stage 1: Vector search for 'get me all customers...'
2025-04-05 12:59:44 - INFO - [feedback_manager.py:267] - Stage 1: Vector search for 'get me all customers...'
2025-04-05 12:59:44,003 [INFO] text2sql.feedback [feedback_manager.py:62]: Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-05 12:59:44 - INFO - [feedback_manager.py:62] - Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-05 12:59:44,516 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:59:44] "GET /api/query/progress/d614fc19-c944-4b42-ae7c-52988afda868 HTTP/1.1" 200 -
2025-04-05 12:59:44,775 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:59:44] "GET /api/query/progress/d614fc19-c944-4b42-ae7c-52988afda868 HTTP/1.1" 200 -
2025-04-05 12:59:45,184 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:59:45] "GET /api/query/progress/d614fc19-c944-4b42-ae7c-52988afda868 HTTP/1.1" 200 -
2025-04-05 12:59:45,977 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:59:45] "GET /api/query/progress/d614fc19-c944-4b42-ae7c-52988afda868 HTTP/1.1" 200 -
2025-04-05 12:59:46,229 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:59:46] "GET /api/query/progress/d614fc19-c944-4b42-ae7c-52988afda868 HTTP/1.1" 200 -
2025-04-05 12:59:46,667 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:59:46] "GET /api/query/progress/d614fc19-c944-4b42-ae7c-52988afda868 HTTP/1.1" 200 -
2025-04-05 12:59:47,197 [INFO] text2sql.feedback [feedback_manager.py:65]: Embedding model loaded in 3.19s
2025-04-05 12:59:47 - INFO - [feedback_manager.py:65] - Embedding model loaded in 3.19s
2025-04-05 12:59:47,368 [WARNING] text2sql.feedback [feedback_manager.py:324]: No candidates found from vector search
2025-04-05 12:59:47 - WARNING - [feedback_manager.py:324] - No candidates found from vector search
2025-04-05 12:59:47,368 [INFO] text2sql.azure [azure_client.py:35]: SQL generation started for query: 'get me all customers'
2025-04-05 12:59:47 - INFO - [azure_client.py:35] - SQL generation started for query: 'get me all customers'
2025-04-05 12:59:47,369 [INFO] text2sql.azure [azure_client.py:69]: Including schema information (587 chars)
2025-04-05 12:59:47 - INFO - [azure_client.py:69] - Including schema information (587 chars)
2025-04-05 12:59:47,370 [INFO] text2sql.azure [azure_client.py:104]: Including 3 SQL examples (no similarity examples found)
2025-04-05 12:59:47 - INFO - [azure_client.py:104] - Including 3 SQL examples (no similarity examples found)
2025-04-05 12:59:47,371 [INFO] text2sql.azure [azure_client.py:114]: PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some example queries and their SQL:\nQuestion: How many records are in the customers table?\nSQL: SELECT COUNT(*) AS record_count FROM customers\n\nQuestion: Get all columns from customers\nSQL: SELECT * FROM customers LIMIT 5\n\nQuestion: Get record from customers by customer_id\nSQL: SELECT * FROM customers WHERE customer_id = 1\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me all customers'}]
2025-04-05 12:59:47 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some example queries and their SQL:\nQuestion: How many records are in the customers table?\nSQL: SELECT COUNT(*) AS record_count FROM customers\n\nQuestion: Get all columns from customers\nSQL: SELECT * FROM customers LIMIT 5\n\nQuestion: Get record from customers by customer_id\nSQL: SELECT * FROM customers WHERE customer_id = 1\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me all customers'}]
2025-04-05 12:59:47,373 [INFO] text2sql.llm_engine [llm_engine.py:55]: [SQL_GEN] Completion generation started
2025-04-05 12:59:47 - INFO - [llm_engine.py:55] - [SQL_GEN] Completion generation started
2025-04-05 12:59:47,453 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:59:47] "GET /api/query/progress/d614fc19-c944-4b42-ae7c-52988afda868 HTTP/1.1" 200 -
2025-04-05 12:59:47,720 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:59:47] "GET /api/query/progress/d614fc19-c944-4b42-ae7c-52988afda868 HTTP/1.1" 200 -
2025-04-05 12:59:48,138 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:59:48] "GET /api/query/progress/d614fc19-c944-4b42-ae7c-52988afda868 HTTP/1.1" 200 -
2025-04-05 12:59:48,926 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:59:48] "GET /api/query/progress/d614fc19-c944-4b42-ae7c-52988afda868 HTTP/1.1" 200 -
2025-04-05 12:59:49,175 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:59:49] "GET /api/query/progress/d614fc19-c944-4b42-ae7c-52988afda868 HTTP/1.1" 200 -
2025-04-05 12:59:49,435 [INFO] text2sql.llm_engine [llm_engine.py:92]: [SQL_GEN] Completion generation completed in 2.06s
2025-04-05 12:59:49 - INFO - [llm_engine.py:92] - [SQL_GEN] Completion generation completed in 2.06s
2025-04-05 12:59:49,435 [INFO] text2sql.llm_engine [llm_engine.py:93]: **************************
2025-04-05 12:59:49 - INFO - [llm_engine.py:93] - **************************
2025-04-05 12:59:49,436 [INFO] text2sql.azure [azure_client.py:150]: Parsing SQL from model response
2025-04-05 12:59:49 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-05 12:59:49,438 [INFO] text2sql.azure [azure_client.py:157]: Found SQL code block in response
2025-04-05 12:59:49 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-05 12:59:49,439 [INFO] text2sql.azure [azure_client.py:171]: Extracted SQL query (24 chars) and explanation (212 chars)
2025-04-05 12:59:49 - INFO - [azure_client.py:171] - Extracted SQL query (24 chars) and explanation (212 chars)
2025-04-05 12:59:49,440 [INFO] text2sql.azure [azure_client.py:124]: Generated SQL: SELECT * FROM customers;
2025-04-05 12:59:49 - INFO - [azure_client.py:124] - Generated SQL: SELECT * FROM customers;
2025-04-05 12:59:49,442 [INFO] text2sql.azure [azure_client.py:132]: SQL generation completed in 2.07s
2025-04-05 12:59:49 - INFO - [azure_client.py:132] - SQL generation completed in 2.07s
2025-04-05 12:59:49,443 [INFO] text2sql.database [database.py:65]: Executing SQL query: SELECT * FROM customers;
2025-04-05 12:59:49 - INFO - [database.py:65] - Executing SQL query: SELECT * FROM customers;
2025-04-05 12:59:49,458 [INFO] text2sql.database [database.py:86]: Query returned 5 rows with 11 columns
2025-04-05 12:59:49 - INFO - [database.py:86] - Query returned 5 rows with 11 columns
2025-04-05 12:59:49,470 [INFO] text2sql.database [database.py:95]: Query processing completed in 0.03s
2025-04-05 12:59:49 - INFO - [database.py:95] - Query processing completed in 0.03s
2025-04-05 12:59:49,473 [INFO] text2sql.sql_generator [sql_generator.py:376]: SQL generation completed in 7.25s
2025-04-05 12:59:49,474 [INFO] text2sql.sql_generator [sql_generator.py:125]: Query processing completed in 7.26s
2025-04-05 12:59:49,474 [ERROR] text2sql [app.py:167]: Exception while processing query: Working outside of request context.

This typically means that you attempted to use functionality that needed
an active HTTP request. Consult the documentation on testing for
information about how to avoid this problem.
Traceback (most recent call last):
  File "/home/vijay/text2sql/app.py", line 156, in process_in_background
    if session.get('user_id'):
       ^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/werkzeug/local.py", line 318, in __get__
    obj = instance._get_current_object()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/werkzeug/local.py", line 519, in _get_current_object
    raise RuntimeError(unbound_message) from None
RuntimeError: Working outside of request context.

This typically means that you attempted to use functionality that needed
an active HTTP request. Consult the documentation on testing for
information about how to avoid this problem.
2025-04-05 12:59:49 - ERROR - [app.py:167] - Exception while processing query: Working outside of request context.

This typically means that you attempted to use functionality that needed
an active HTTP request. Consult the documentation on testing for
information about how to avoid this problem.
Traceback (most recent call last):
  File "/home/vijay/text2sql/app.py", line 156, in process_in_background
    if session.get('user_id'):
       ^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/werkzeug/local.py", line 318, in __get__
    obj = instance._get_current_object()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/werkzeug/local.py", line 519, in _get_current_object
    raise RuntimeError(unbound_message) from None
RuntimeError: Working outside of request context.

This typically means that you attempted to use functionality that needed
an active HTTP request. Consult the documentation on testing for
information about how to avoid this problem.
2025-04-05 12:59:49,586 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 12:59:49] "GET /api/query/progress/d614fc19-c944-4b42-ae7c-52988afda868 HTTP/1.1" 200 -
2025-04-05 13:00:19,186 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/app.py', reloading
2025-04-05 13:00:19,187 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/template_filters.py', reloading
2025-04-05 13:00:19,187 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/template_filters.py', reloading
2025-04-05 13:00:19,188 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/app.py', reloading
2025-04-05 13:00:19,198 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/template_filters.py', reloading
2025-04-05 13:00:19,198 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/app.py', reloading
2025-04-05 13:00:20,199 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 13:00:20,199 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 13:00:20,199 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 13:00:20,200 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 13:00:20,200 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 13:00:20 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 13:00:20,202 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 13:00:20 - INFO - [database.py:258] - Closing database connection
2025-04-05 13:00:20,203 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 13:00:20 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 13:00:21,133 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 13:00:25,660 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:00:25,660 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:00:25,660 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:00:25,661 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:00:25,662 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 13:00:25,672 [INFO] text2sql [app.py:63]: Debug logging enabled for SQL generator and agents
2025-04-05 13:00:25 - INFO - [app.py:63] - Debug logging enabled for SQL generator and agents
2025-04-05 13:00:25,674 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:00:25 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:00:25,674 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:00:25 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:00:25,678 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:00:25 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:00:25,680 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:00:25,681 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:00:25,681 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:00:25,682 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:00:25,682 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:00:25 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:00:25,682 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:00:25 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:00:25,683 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:00:25 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:00:25,683 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:00:25,683 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:00:25,683 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:00:25,684 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:00:25,684 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:00:25 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:00:25,684 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:00:25 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:00:25,685 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:00:25 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:00:25,685 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:00:25,685 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:00:25,685 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:00:25,686 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:00:25,686 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 13:00:25 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 13:00:25,686 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:00:25 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:00:25,687 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:00:25 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:00:25,687 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:00:25 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:00:25,688 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 13:00:25 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 13:00:25,688 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:00:25 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:00:25,688 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:00:25,693 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:00:25,693 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:00:25,693 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:00:25,694 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:00:25 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:00:25,863 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 13:00:25,863 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 13:00:36,272 [INFO] text2sql [app.py:266]: Schema requested for workspace: dfd
2025-04-05 13:00:36 - INFO - [app.py:266] - Schema requested for workspace: dfd
2025-04-05 13:00:36,274 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:36] "GET /api/schema?workspace=dfd HTTP/1.1" 200 -
2025-04-05 13:00:39,382 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:39] "GET /samples HTTP/1.1" 200 -
2025-04-05 13:00:39,746 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:39] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:00:39,750 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:39] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 13:00:39,751 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:39] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 13:00:39,753 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:39] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 13:00:39,759 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:39] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 13:00:39,761 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:39] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 13:00:40,069 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:40] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 13:00:40,078 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:40] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 13:00:40,084 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:40] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 13:00:40,417 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:40] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 13:00:40,419 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:40] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 13:00:40,421 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:40] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 13:00:40,428 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:00:40 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:00:40,430 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 13:00:40 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 13:00:40,432 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 13:00:40 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 13:00:40,435 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 0 samples (page 1, limit 10)
2025-04-05 13:00:40 - INFO - [feedback_manager.py:531] - Retrieved 0 samples (page 1, limit 10)
2025-04-05 13:00:40,437 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:40] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 13:00:43,954 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:43] "GET /api/tables?workspace=Customer HTTP/1.1" 200 -
2025-04-05 13:00:45,575 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:45] "GET /samples HTTP/1.1" 200 -
2025-04-05 13:00:45,822 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:45] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:00:45,938 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:45] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 13:00:45,944 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:45] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 13:00:45,949 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:45] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 13:00:45,955 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:45] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 13:00:45,958 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:45] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 13:00:46,128 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:46] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 13:00:46,259 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:46] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 13:00:46,266 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:46] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 13:00:46,602 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:46] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 13:00:46,605 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:46] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 13:00:46,609 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:46] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 13:00:46,624 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:00:46 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:00:46,626 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 13:00:46 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 13:00:46,629 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 13:00:46 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 13:00:46,633 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 0 samples (page 1, limit 10)
2025-04-05 13:00:46 - INFO - [feedback_manager.py:531] - Retrieved 0 samples (page 1, limit 10)
2025-04-05 13:00:46,635 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:46] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 13:00:46,872 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:46] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 13:00:47,005 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:47] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:00:47,223 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:47] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 13:00:47,279 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:47] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 13:00:47,603 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:47] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 13:00:49,046 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:49] "GET /admin/schema HTTP/1.1" 200 -
2025-04-05 13:00:49,300 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:49] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:00:49,388 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:49] "[36mGET /static/css/admin-schema.css HTTP/1.1[0m" 304 -
2025-04-05 13:00:49,404 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:49] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 13:00:49,408 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:49] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 13:00:49,412 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:49] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 13:00:49,417 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:49] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 13:00:49,618 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:49] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 13:00:49,707 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:49] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 13:00:49,720 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:49] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 13:00:49,726 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:49] "[36mGET /static/js/admin/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 13:00:50,045 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:50] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 13:00:50,048 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:50] "GET /admin/api/schema/workspaces HTTP/1.1" 200 -
2025-04-05 13:00:50,051 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:50] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-05 13:00:50,054 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:50] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-05 13:00:51,268 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:51] "GET /admin/api/schema/workspaces/dfd HTTP/1.1" 200 -
2025-04-05 13:00:56,048 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:56] "GET /samples HTTP/1.1" 200 -
2025-04-05 13:00:56,269 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:56] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:00:56,384 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:56] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 13:00:56,391 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:56] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 13:00:56,398 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:56] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 13:00:56,402 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:56] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 13:00:56,402 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:56] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 13:00:56,564 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:56] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 13:00:56,676 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:56] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 13:00:56,690 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:56] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 13:00:56,995 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:56] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 13:00:56,997 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:56] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 13:00:56,999 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:56] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 13:00:57,002 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:00:57 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:00:57,005 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 13:00:57 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 13:00:57,008 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 13:00:57 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 13:00:57,011 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 0 samples (page 1, limit 10)
2025-04-05 13:00:57 - INFO - [feedback_manager.py:531] - Retrieved 0 samples (page 1, limit 10)
2025-04-05 13:00:57,012 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:00:57] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 13:01:25,051 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/background_tasks.py', reloading
2025-04-05 13:01:25,052 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/background_tasks.py', reloading
2025-04-05 13:01:25,171 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/background_tasks.py', reloading
2025-04-05 13:01:25,172 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/background_tasks.py', reloading
2025-04-05 13:01:25,173 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/background_tasks.py', reloading
2025-04-05 13:01:26,175 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 13:01:26,175 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 13:01:26,175 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 13:01:26,176 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 13:01:26,176 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 13:01:26 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 13:01:26,176 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 13:01:26 - INFO - [database.py:258] - Closing database connection
2025-04-05 13:01:26,177 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 13:01:26 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 13:01:27,089 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 13:01:35,300 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:01:35,300 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:01:35,301 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:01:35,301 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:01:35,302 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 13:01:35,311 [INFO] text2sql [app.py:63]: Debug logging enabled for SQL generator and agents
2025-04-05 13:01:35 - INFO - [app.py:63] - Debug logging enabled for SQL generator and agents
2025-04-05 13:01:35,313 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:01:35 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:01:35,313 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:01:35 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:01:35,317 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:01:35 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:01:35,318 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:01:35,319 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:01:35,319 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:01:35,319 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:01:35,319 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:01:35 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:01:35,320 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:01:35 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:01:35,320 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:01:35 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:01:35,321 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:01:35,321 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:01:35,322 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:01:35,322 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:01:35,322 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:01:35 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:01:35,322 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:01:35 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:01:35,323 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:01:35 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:01:35,323 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:01:35,323 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:01:35,324 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:01:35,324 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:01:35,324 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 13:01:35 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 13:01:35,324 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:01:35 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:01:35,325 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:01:35 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:01:35,325 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:01:35 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:01:35,326 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 13:01:35 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 13:01:35,326 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:01:35 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:01:35,326 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:01:35,328 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:01:35,328 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:01:35,329 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:01:35,329 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:01:35 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:01:35,485 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 13:01:35,485 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 13:02:04,628 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/app.py', reloading
2025-04-05 13:02:04,630 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/app.py', reloading
2025-04-05 13:02:04,639 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/app.py', reloading
2025-04-05 13:02:05,642 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 13:02:05,642 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 13:02:05,643 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 13:02:05,643 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 13:02:05,644 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 13:02:05 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 13:02:05,645 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 13:02:05 - INFO - [database.py:258] - Closing database connection
2025-04-05 13:02:05,645 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 13:02:05 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 13:02:07,407 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 13:02:13,708 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:02:13,708 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:02:13,709 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:02:13,709 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:02:13,710 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 13:02:13,720 [INFO] text2sql [app.py:64]: Debug logging enabled for SQL generator and agents
2025-04-05 13:02:13 - INFO - [app.py:64] - Debug logging enabled for SQL generator and agents
2025-04-05 13:02:13,722 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:02:13 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:02:13,722 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:02:13 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:02:13,726 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:02:13 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:02:13,726 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:02:13,726 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:02:13,727 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:02:13,727 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:02:13,727 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:02:13 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:02:13,727 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:02:13 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:02:13,728 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:02:13 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:02:13,728 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:02:13,729 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:02:13,729 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:02:13,729 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:02:13,729 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:02:13 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:02:13,730 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:02:13 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:02:13,730 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:02:13 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:02:13,731 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:02:13,731 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:02:13,731 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:02:13,732 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:02:13,733 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 13:02:13 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 13:02:13,733 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:02:13 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:02:13,733 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:02:13 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:02:13,734 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:02:13 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:02:13,737 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 13:02:13 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 13:02:13,737 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:02:13 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:02:13,737 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:02:13,738 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:02:13,738 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:02:13,738 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:02:13,738 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:02:13 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:02:13,896 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 13:02:13,897 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 13:03:02,642 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/app.py', reloading
2025-04-05 13:03:02,643 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/app.py', reloading
2025-04-05 13:03:02,693 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/app.py', reloading
2025-04-05 13:03:03,696 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 13:03:03,696 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 13:03:03,697 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 13:03:03,697 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 13:03:03,697 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 13:03:03 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 13:03:03,697 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 13:03:03 - INFO - [database.py:258] - Closing database connection
2025-04-05 13:03:03,698 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 13:03:03 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 13:03:05,610 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 13:03:11,223 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:03:11,223 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:03:11,224 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:03:11,224 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:03:11,225 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 13:03:11,235 [INFO] text2sql [app.py:64]: Debug logging enabled for SQL generator and agents
2025-04-05 13:03:11 - INFO - [app.py:64] - Debug logging enabled for SQL generator and agents
2025-04-05 13:03:11,237 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:03:11 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:03:11,238 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:03:11 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:03:11,241 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:03:11 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:03:11,241 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:03:11,242 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:03:11,242 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:03:11,242 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:03:11,242 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:03:11 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:03:11,243 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:03:11 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:03:11,243 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:03:11 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:03:11,244 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:03:11,244 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:03:11,244 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:03:11,244 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:03:11,244 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:03:11 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:03:11,245 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:03:11 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:03:11,245 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:03:11 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:03:11,245 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:03:11,246 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:03:11,246 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:03:11,246 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:03:11,246 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 13:03:11 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 13:03:11,247 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:03:11 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:03:11,247 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:03:11 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:03:11,247 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:03:11 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:03:11,250 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 13:03:11 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 13:03:11,251 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:03:11 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:03:11,251 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:03:11,251 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:03:11,252 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:03:11,252 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:03:11,252 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:03:11 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:03:11,418 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 13:03:11,419 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 13:04:00,906 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/app.py', reloading
2025-04-05 13:04:00,907 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/background_tasks.py', reloading
2025-04-05 13:04:00,907 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/app.py', reloading
2025-04-05 13:04:00,907 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/background_tasks.py', reloading
2025-04-05 13:04:00,918 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/background_tasks.py', reloading
2025-04-05 13:04:00,919 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/app.py', reloading
2025-04-05 13:04:01,920 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 13:04:01,920 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 13:04:01,920 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 13:04:01,920 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 13:04:01,920 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 13:04:01 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 13:04:01,921 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 13:04:01 - INFO - [database.py:258] - Closing database connection
2025-04-05 13:04:01,921 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 13:04:01 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 13:04:02,775 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 13:04:05,936 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:04:05,936 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:04:05,936 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:04:05,936 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:04:05,937 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 13:04:05,944 [INFO] text2sql [app.py:64]: Debug logging enabled for SQL generator and agents
2025-04-05 13:04:05 - INFO - [app.py:64] - Debug logging enabled for SQL generator and agents
2025-04-05 13:04:05,945 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:04:05 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:04:05,945 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:04:05 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:04:05,948 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:04:05 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:04:05,948 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:04:05,948 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:04:05,948 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:04:05,949 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:04:05,949 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:04:05 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:04:05,949 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:04:05 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:04:05,949 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:04:05 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:04:05,949 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:04:05,950 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:04:05,950 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:04:05,950 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:04:05,950 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:04:05 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:04:05,950 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:04:05 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:04:05,951 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:04:05 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:04:05,951 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:04:05,951 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:04:05,951 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:04:05,952 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:04:05,952 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 13:04:05 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 13:04:05,952 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:04:05 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:04:05,952 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:04:05 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:04:05,952 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:04:05 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:04:05,954 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 13:04:05 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 13:04:05,954 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:04:05 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:04:05,954 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:04:05,954 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:04:05,954 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:04:05,954 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:04:05,955 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:04:05 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:04:06,097 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 13:04:06,097 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 13:04:06,536 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:06] "GET /samples HTTP/1.1" 200 -
2025-04-05 13:04:06,573 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:06] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:04:06,886 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:06] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 13:04:06,888 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:06] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 13:04:06,891 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:06] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 13:04:06,897 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:06] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 13:04:06,901 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:06] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 13:04:06,906 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:06] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 13:04:07,204 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:07] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 13:04:07,206 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:07] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 13:04:07,516 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:07] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 13:04:07,519 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:07] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 13:04:07,522 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:07] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 13:04:07,533 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:04:07 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:04:07,535 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 13:04:07 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 13:04:07,537 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 13:04:07 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 13:04:07,541 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 0 samples (page 1, limit 10)
2025-04-05 13:04:07 - INFO - [feedback_manager.py:531] - Retrieved 0 samples (page 1, limit 10)
2025-04-05 13:04:07,542 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:07] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 13:04:08,706 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:08] "GET / HTTP/1.1" 200 -
2025-04-05 13:04:09,050 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:09] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:04:09,059 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:09] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 13:04:09,063 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:09] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 13:04:09,071 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:09] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 13:04:09,076 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:09] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 13:04:09,078 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:09] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 13:04:09,358 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:09] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 13:04:09,378 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:09] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 13:04:09,696 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:09] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 13:04:15,606 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'Get me all the customers'
2025-04-05 13:04:15,606 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:15] "POST /api/query HTTP/1.1" 200 -
2025-04-05 13:04:15,607 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'Get me all the customers'
2025-04-05 13:04:15,609 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-05 13:04:15,610 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.00s
2025-04-05 13:04:15,611 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-05 13:04:15,611 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-05 13:04:15,612 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-05 13:04:15 - INFO - [database.py:44] - Attempting database connection
2025-04-05 13:04:15,614 [INFO] text2sql.database [database.py:48]: Database connection established in 0.00s
2025-04-05 13:04:15 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-05 13:04:15,616 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'Get me all the customers'
2025-04-05 13:04:15,616 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-05 13:04:15,618 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-05 13:04:15,619 [INFO] text2sql.llm_engine [llm_engine.py:55]: [TABLE] Completion generation started
2025-04-05 13:04:15 - INFO - [llm_engine.py:55] - [TABLE] Completion generation started
2025-04-05 13:04:16,418 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:16] "GET /api/query/progress/4e305fd9-eb62-40c5-ba70-c1d92970c85d HTTP/1.1" 200 -
2025-04-05 13:04:16,668 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:16] "GET /api/query/progress/4e305fd9-eb62-40c5-ba70-c1d92970c85d HTTP/1.1" 200 -
2025-04-05 13:04:17,095 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:17] "GET /api/query/progress/4e305fd9-eb62-40c5-ba70-c1d92970c85d HTTP/1.1" 200 -
2025-04-05 13:04:17,919 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:17] "GET /api/query/progress/4e305fd9-eb62-40c5-ba70-c1d92970c85d HTTP/1.1" 200 -
2025-04-05 13:04:18,161 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:18] "GET /api/query/progress/4e305fd9-eb62-40c5-ba70-c1d92970c85d HTTP/1.1" 200 -
2025-04-05 13:04:18,591 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:18] "GET /api/query/progress/4e305fd9-eb62-40c5-ba70-c1d92970c85d HTTP/1.1" 200 -
2025-04-05 13:04:19,372 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:19] "GET /api/query/progress/4e305fd9-eb62-40c5-ba70-c1d92970c85d HTTP/1.1" 200 -
2025-04-05 13:04:19,638 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:19] "GET /api/query/progress/4e305fd9-eb62-40c5-ba70-c1d92970c85d HTTP/1.1" 200 -
2025-04-05 13:04:20,063 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:20] "GET /api/query/progress/4e305fd9-eb62-40c5-ba70-c1d92970c85d HTTP/1.1" 200 -
2025-04-05 13:04:20,861 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:20] "GET /api/query/progress/4e305fd9-eb62-40c5-ba70-c1d92970c85d HTTP/1.1" 200 -
2025-04-05 13:04:21,108 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:21] "GET /api/query/progress/4e305fd9-eb62-40c5-ba70-c1d92970c85d HTTP/1.1" 200 -
2025-04-05 13:04:21,540 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:21] "GET /api/query/progress/4e305fd9-eb62-40c5-ba70-c1d92970c85d HTTP/1.1" 200 -
2025-04-05 13:04:22,333 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:22] "GET /api/query/progress/4e305fd9-eb62-40c5-ba70-c1d92970c85d HTTP/1.1" 200 -
2025-04-05 13:04:22,591 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:22] "GET /api/query/progress/4e305fd9-eb62-40c5-ba70-c1d92970c85d HTTP/1.1" 200 -
2025-04-05 13:04:23,017 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:23] "GET /api/query/progress/4e305fd9-eb62-40c5-ba70-c1d92970c85d HTTP/1.1" 200 -
2025-04-05 13:04:23,818 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:23] "GET /api/query/progress/4e305fd9-eb62-40c5-ba70-c1d92970c85d HTTP/1.1" 200 -
2025-04-05 13:04:24,069 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:24] "GET /api/query/progress/4e305fd9-eb62-40c5-ba70-c1d92970c85d HTTP/1.1" 200 -
2025-04-05 13:04:24,507 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:24] "GET /api/query/progress/4e305fd9-eb62-40c5-ba70-c1d92970c85d HTTP/1.1" 200 -
2025-04-05 13:04:25,366 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:25] "GET /api/query/progress/4e305fd9-eb62-40c5-ba70-c1d92970c85d HTTP/1.1" 200 -
2025-04-05 13:04:26,052 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:26] "GET /api/query/progress/4e305fd9-eb62-40c5-ba70-c1d92970c85d HTTP/1.1" 200 -
2025-04-05 13:04:27,871 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:27] "GET /api/query/progress/4e305fd9-eb62-40c5-ba70-c1d92970c85d HTTP/1.1" 200 -
2025-04-05 13:04:28,573 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:28] "GET /api/query/progress/4e305fd9-eb62-40c5-ba70-c1d92970c85d HTTP/1.1" 200 -
2025-04-05 13:04:29,871 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:29] "GET /api/query/progress/4e305fd9-eb62-40c5-ba70-c1d92970c85d HTTP/1.1" 200 -
2025-04-05 13:04:30,558 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:30] "GET /api/query/progress/4e305fd9-eb62-40c5-ba70-c1d92970c85d HTTP/1.1" 200 -
2025-04-05 13:04:31,689 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:31] "GET /api/query/progress/4e305fd9-eb62-40c5-ba70-c1d92970c85d HTTP/1.1" 200 -
2025-04-05 13:04:31,938 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:31] "GET /api/query/progress/4e305fd9-eb62-40c5-ba70-c1d92970c85d HTTP/1.1" 200 -
2025-04-05 13:04:32,001 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:32] "GET /api/query/progress/4e305fd9-eb62-40c5-ba70-c1d92970c85d HTTP/1.1" 200 -
2025-04-05 13:04:32,400 [INFO] text2sql.llm_engine [llm_engine.py:92]: [TABLE] Completion generation completed in 16.78s
2025-04-05 13:04:32 - INFO - [llm_engine.py:92] - [TABLE] Completion generation completed in 16.78s
2025-04-05 13:04:32,401 [INFO] text2sql.llm_engine [llm_engine.py:93]: **************************
2025-04-05 13:04:32 - INFO - [llm_engine.py:93] - **************************
2025-04-05 13:04:32,403 [INFO] text2sql.agents.table [table_agent.py:69]: Raw model response: 'customers'
2025-04-05 13:04:32,405 [INFO] text2sql.agents.table [table_agent.py:90]: Table selection completed in 16.79s. Selected: customers
2025-04-05 13:04:32,407 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'Get me all the customers'
2025-04-05 13:04:32,408 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: customers
2025-04-05 13:04:32,409 [INFO] text2sql.agents.column [column_agent.py:38]: Only one table involved (customers). Skipping LLM call and including all columns.
2025-04-05 13:04:32,409 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 13:04:32 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 13:04:32,410 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 13:04:32 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 13:04:32,411 [INFO] text2sql.feedback [feedback_manager.py:267]: Stage 1: Vector search for 'Get me all the customers...'
2025-04-05 13:04:32 - INFO - [feedback_manager.py:267] - Stage 1: Vector search for 'Get me all the customers...'
2025-04-05 13:04:32,413 [INFO] text2sql.feedback [feedback_manager.py:62]: Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-05 13:04:32 - INFO - [feedback_manager.py:62] - Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-05 13:04:32,483 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:32] "GET /api/query/progress/4e305fd9-eb62-40c5-ba70-c1d92970c85d HTTP/1.1" 200 -
2025-04-05 13:04:33,276 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:33] "GET /api/query/progress/4e305fd9-eb62-40c5-ba70-c1d92970c85d HTTP/1.1" 200 -
2025-04-05 13:04:33,530 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:33] "GET /api/query/progress/4e305fd9-eb62-40c5-ba70-c1d92970c85d HTTP/1.1" 200 -
2025-04-05 13:04:33,957 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:33] "GET /api/query/progress/4e305fd9-eb62-40c5-ba70-c1d92970c85d HTTP/1.1" 200 -
2025-04-05 13:04:34,773 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:34] "GET /api/query/progress/4e305fd9-eb62-40c5-ba70-c1d92970c85d HTTP/1.1" 200 -
2025-04-05 13:04:35,030 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:35] "GET /api/query/progress/4e305fd9-eb62-40c5-ba70-c1d92970c85d HTTP/1.1" 200 -
2025-04-05 13:04:35,054 [INFO] text2sql.feedback [feedback_manager.py:65]: Embedding model loaded in 2.64s
2025-04-05 13:04:35 - INFO - [feedback_manager.py:65] - Embedding model loaded in 2.64s
2025-04-05 13:04:35,139 [WARNING] text2sql.feedback [feedback_manager.py:324]: No candidates found from vector search
2025-04-05 13:04:35 - WARNING - [feedback_manager.py:324] - No candidates found from vector search
2025-04-05 13:04:35,140 [INFO] text2sql.azure [azure_client.py:35]: SQL generation started for query: 'Get me all the customers'
2025-04-05 13:04:35 - INFO - [azure_client.py:35] - SQL generation started for query: 'Get me all the customers'
2025-04-05 13:04:35,141 [INFO] text2sql.azure [azure_client.py:69]: Including schema information (587 chars)
2025-04-05 13:04:35 - INFO - [azure_client.py:69] - Including schema information (587 chars)
2025-04-05 13:04:35,142 [INFO] text2sql.azure [azure_client.py:104]: Including 3 SQL examples (no similarity examples found)
2025-04-05 13:04:35 - INFO - [azure_client.py:104] - Including 3 SQL examples (no similarity examples found)
2025-04-05 13:04:35,143 [INFO] text2sql.azure [azure_client.py:114]: PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some example queries and their SQL:\nQuestion: How many records are in the customers table?\nSQL: SELECT COUNT(*) AS record_count FROM customers\n\nQuestion: Get all columns from customers\nSQL: SELECT * FROM customers LIMIT 5\n\nQuestion: Get record from customers by customer_id\nSQL: SELECT * FROM customers WHERE customer_id = 1\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: Get me all the customers'}]
2025-04-05 13:04:35 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some example queries and their SQL:\nQuestion: How many records are in the customers table?\nSQL: SELECT COUNT(*) AS record_count FROM customers\n\nQuestion: Get all columns from customers\nSQL: SELECT * FROM customers LIMIT 5\n\nQuestion: Get record from customers by customer_id\nSQL: SELECT * FROM customers WHERE customer_id = 1\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: Get me all the customers'}]
2025-04-05 13:04:35,144 [INFO] text2sql.llm_engine [llm_engine.py:55]: [SQL_GEN] Completion generation started
2025-04-05 13:04:35 - INFO - [llm_engine.py:55] - [SQL_GEN] Completion generation started
2025-04-05 13:04:35,478 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:35] "GET /api/query/progress/4e305fd9-eb62-40c5-ba70-c1d92970c85d HTTP/1.1" 200 -
2025-04-05 13:04:36,762 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:36] "GET /api/query/progress/4e305fd9-eb62-40c5-ba70-c1d92970c85d HTTP/1.1" 200 -
2025-04-05 13:04:37,420 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:37] "GET /api/query/progress/4e305fd9-eb62-40c5-ba70-c1d92970c85d HTTP/1.1" 200 -
2025-04-05 13:04:37,524 [INFO] text2sql.llm_engine [llm_engine.py:92]: [SQL_GEN] Completion generation completed in 2.38s
2025-04-05 13:04:37 - INFO - [llm_engine.py:92] - [SQL_GEN] Completion generation completed in 2.38s
2025-04-05 13:04:37,526 [INFO] text2sql.llm_engine [llm_engine.py:93]: **************************
2025-04-05 13:04:37 - INFO - [llm_engine.py:93] - **************************
2025-04-05 13:04:37,528 [INFO] text2sql.azure [azure_client.py:150]: Parsing SQL from model response
2025-04-05 13:04:37 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-05 13:04:37,530 [INFO] text2sql.azure [azure_client.py:157]: Found SQL code block in response
2025-04-05 13:04:37 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-05 13:04:37,531 [INFO] text2sql.azure [azure_client.py:171]: Extracted SQL query (24 chars) and explanation (308 chars)
2025-04-05 13:04:37 - INFO - [azure_client.py:171] - Extracted SQL query (24 chars) and explanation (308 chars)
2025-04-05 13:04:37,532 [INFO] text2sql.azure [azure_client.py:124]: Generated SQL: SELECT * FROM customers;
2025-04-05 13:04:37 - INFO - [azure_client.py:124] - Generated SQL: SELECT * FROM customers;
2025-04-05 13:04:37,534 [INFO] text2sql.azure [azure_client.py:132]: SQL generation completed in 2.39s
2025-04-05 13:04:37 - INFO - [azure_client.py:132] - SQL generation completed in 2.39s
2025-04-05 13:04:37,536 [INFO] text2sql.database [database.py:65]: Executing SQL query: SELECT * FROM customers;
2025-04-05 13:04:37 - INFO - [database.py:65] - Executing SQL query: SELECT * FROM customers;
2025-04-05 13:04:37,542 [INFO] text2sql.database [database.py:86]: Query returned 5 rows with 11 columns
2025-04-05 13:04:37 - INFO - [database.py:86] - Query returned 5 rows with 11 columns
2025-04-05 13:04:37,550 [INFO] text2sql.database [database.py:95]: Query processing completed in 0.01s
2025-04-05 13:04:37 - INFO - [database.py:95] - Query processing completed in 0.01s
2025-04-05 13:04:37,553 [INFO] text2sql.sql_generator [sql_generator.py:376]: SQL generation completed in 21.94s
2025-04-05 13:04:37,555 [INFO] text2sql.sql_generator [sql_generator.py:125]: Query processing completed in 21.95s
2025-04-05 13:04:38,700 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:38] "GET /api/query/progress/4e305fd9-eb62-40c5-ba70-c1d92970c85d HTTP/1.1" 200 -
2025-04-05 13:04:49,593 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:49] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 13:04:49,956 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:49] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:04:49,957 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:49] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 13:04:50,214 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:50] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 13:04:50,297 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:50] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 13:04:53,832 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:53] "GET /admin/audit-logs HTTP/1.1" 200 -
2025-04-05 13:04:54,161 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:54] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:04:54,173 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:54] "[36mGET /static/js/admin/audit-logs.js HTTP/1.1[0m" 304 -
2025-04-05 13:04:55,819 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:04:55] "[33mGET /api/admin/audit-logs/4 HTTP/1.1[0m" 404 -
2025-04-05 13:05:59,092 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:05:59] "GET /samples HTTP/1.1" 200 -
2025-04-05 13:05:59,331 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:05:59] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:05:59,446 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:05:59] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 13:05:59,459 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:05:59] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 13:05:59,467 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:05:59] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 13:05:59,469 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:05:59] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 13:05:59,472 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:05:59] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 13:05:59,662 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:05:59] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 13:05:59,771 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:05:59] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 13:05:59,782 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:05:59] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 13:06:00,103 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:06:00] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 13:06:00,108 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:06:00] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 13:06:00,110 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:06:00] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 13:06:00,120 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:06:00 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:06:00,121 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 13:06:00 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 13:06:00,123 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 13:06:00 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 13:06:00,127 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 0 samples (page 1, limit 10)
2025-04-05 13:06:00 - INFO - [feedback_manager.py:531] - Retrieved 0 samples (page 1, limit 10)
2025-04-05 13:06:00,129 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:06:00] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 13:06:01,585 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:06:01] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 13:06:01,927 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:06:01] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:06:01,931 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:06:01] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 13:06:02,191 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:06:02] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 13:06:02,294 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:06:02] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 13:06:03,707 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:06:03] "GET /admin/schema HTTP/1.1" 200 -
2025-04-05 13:06:04,039 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:06:04] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:06:04,059 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:06:04] "[36mGET /static/css/admin-schema.css HTTP/1.1[0m" 304 -
2025-04-05 13:06:04,061 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:06:04] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 13:06:04,069 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:06:04] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 13:06:04,070 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:06:04] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 13:06:04,072 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:06:04] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 13:06:04,356 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:06:04] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 13:06:04,361 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:06:04] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 13:06:04,370 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:06:04] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 13:06:04,373 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:06:04] "[36mGET /static/js/admin/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 13:06:04,538 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:06:04] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 13:06:04,692 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:06:04] "GET /admin/api/schema/workspaces HTTP/1.1" 200 -
2025-04-05 13:06:05,187 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:06:05] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-05 13:06:05,191 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:06:05] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-05 13:06:05,310 [INFO] text2sql [app.py:248]: Schema requested for workspace: dfd
2025-04-05 13:06:05 - INFO - [app.py:248] - Schema requested for workspace: dfd
2025-04-05 13:06:05,311 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:06:05] "GET /api/schema?workspace=dfd HTTP/1.1" 200 -
2025-04-05 13:06:09,089 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:06:09] "GET / HTTP/1.1" 200 -
2025-04-05 13:06:09,339 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:06:09] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:06:09,431 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:06:09] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 13:06:09,446 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:06:09] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 13:06:09,447 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:06:09] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 13:06:09,451 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:06:09] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 13:06:09,453 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:06:09] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 13:06:09,646 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:06:09] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 13:06:09,735 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:06:09] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 13:06:10,061 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:06:10] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 13:07:12,407 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_api_routes.py', reloading
2025-04-05 13:07:12,408 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_api_routes.py', reloading
2025-04-05 13:07:12,420 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_api_routes.py', reloading
2025-04-05 13:07:13,421 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 13:07:13,421 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 13:07:13,421 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 13:07:13,423 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 13:07:13,423 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 13:07:13 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 13:07:13,426 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 13:07:13 - INFO - [database.py:258] - Closing database connection
2025-04-05 13:07:13,427 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 13:07:13 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 13:07:14,348 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 13:07:17,687 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:07:17,688 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:07:17,688 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:07:17,688 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:07:17,689 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 13:07:17,697 [INFO] text2sql [app.py:64]: Debug logging enabled for SQL generator and agents
2025-04-05 13:07:17 - INFO - [app.py:64] - Debug logging enabled for SQL generator and agents
2025-04-05 13:07:17,698 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:07:17 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:07:17,698 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:07:17 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:07:17,701 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:07:17 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:07:17,701 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:07:17,701 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:07:17,701 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:07:17,701 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:07:17,702 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:07:17 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:07:17,702 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:07:17 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:07:17,702 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:07:17 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:07:17,703 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:07:17,703 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:07:17,703 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:07:17,704 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:07:17,704 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:07:17 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:07:17,704 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:07:17 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:07:17,706 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:07:17 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:07:17,706 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:07:17,706 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:07:17,706 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:07:17,707 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:07:17,707 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 13:07:17 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 13:07:17,707 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:07:17 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:07:17,707 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:07:17 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:07:17,707 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:07:17 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:07:17,708 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 13:07:17 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 13:07:17,708 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:07:17 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:07:17,708 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:07:17,708 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:07:17,708 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:07:17,709 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:07:17,709 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:07:17 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:07:17,863 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 13:07:17,863 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 13:07:40,980 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_api_routes.py', reloading
2025-04-05 13:07:40,987 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_api_routes.py', reloading
2025-04-05 13:07:41,023 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_api_routes.py', reloading
2025-04-05 13:07:42,025 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 13:07:42,026 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 13:07:42,026 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 13:07:42,026 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 13:07:42,027 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 13:07:42 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 13:07:42,027 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 13:07:42 - INFO - [database.py:258] - Closing database connection
2025-04-05 13:07:42,028 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 13:07:42 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 13:07:44,146 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 13:07:49,547 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:07:49,548 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:07:49,548 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:07:49,548 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:07:49,550 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 13:07:49,562 [INFO] text2sql [app.py:64]: Debug logging enabled for SQL generator and agents
2025-04-05 13:07:49 - INFO - [app.py:64] - Debug logging enabled for SQL generator and agents
2025-04-05 13:07:49,563 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:07:49 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:07:49,564 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:07:49 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:07:49,567 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:07:49 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:07:49,567 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:07:49,568 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:07:49,568 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:07:49,568 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:07:49,568 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:07:49 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:07:49,569 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:07:49 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:07:49,569 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:07:49 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:07:49,569 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:07:49,570 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:07:49,570 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:07:49,570 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:07:49,570 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:07:49 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:07:49,571 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:07:49 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:07:49,573 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:07:49 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:07:49,573 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:07:49,573 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:07:49,573 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:07:49,574 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:07:49,574 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 13:07:49 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 13:07:49,575 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:07:49 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:07:49,575 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:07:49 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:07:49,576 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:07:49 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:07:49,577 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 13:07:49 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 13:07:49,577 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:07:49 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:07:49,577 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:07:49,578 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:07:49,578 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:07:49,579 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:07:49,579 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:07:49 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:07:49,753 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 13:07:49,754 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 13:09:46,427 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_api_routes.py', reloading
2025-04-05 13:09:46,428 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_api_routes.py', reloading
2025-04-05 13:09:46,438 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_api_routes.py', reloading
2025-04-05 13:09:47,439 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 13:09:47,440 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 13:09:47,440 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 13:09:47,440 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 13:09:47,441 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 13:09:47 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 13:09:47,441 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 13:09:47 - INFO - [database.py:258] - Closing database connection
2025-04-05 13:09:47,442 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 13:09:47 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 13:09:48,708 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 13:09:54,596 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:09:54,596 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:09:54,597 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:09:54,597 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:09:54,597 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 13:09:54,608 [INFO] text2sql [app.py:64]: Debug logging enabled for SQL generator and agents
2025-04-05 13:09:54 - INFO - [app.py:64] - Debug logging enabled for SQL generator and agents
2025-04-05 13:09:54,609 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:09:54 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:09:54,610 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:09:54 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:09:54,613 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:09:54 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:09:54,614 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:09:54,614 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:09:54,614 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:09:54,615 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:09:54,615 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:09:54 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:09:54,615 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:09:54 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:09:54,616 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:09:54 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:09:54,616 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:09:54,616 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:09:54,617 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:09:54,617 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:09:54,617 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:09:54 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:09:54,617 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:09:54 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:09:54,621 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:09:54 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:09:54,622 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:09:54,622 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:09:54,622 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:09:54,622 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:09:54,623 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 13:09:54 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 13:09:54,623 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:09:54 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:09:54,623 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:09:54 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:09:54,624 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:09:54 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:09:54,625 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 13:09:54 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 13:09:54,625 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:09:54 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:09:54,625 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:09:54,625 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:09:54,626 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:09:54,626 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:09:54,626 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:09:54 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:09:54,774 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 13:09:54,775 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 13:09:55,533 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:09:55] "GET / HTTP/1.1" 200 -
2025-04-05 13:09:55,596 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:09:55] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:09:55,890 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:09:55] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 13:09:55,908 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:09:55] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 13:09:55,911 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:09:55] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 13:09:55,914 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:09:55] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 13:09:55,917 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:09:55] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 13:09:55,918 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:09:55] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 13:09:56,201 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:09:56] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 13:09:56,569 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:09:56] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 13:09:59,199 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:09:59] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 13:09:59,538 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:09:59] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:09:59,549 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:09:59] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 13:09:59,812 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:09:59] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 13:09:59,921 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:09:59] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 13:10:01,570 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:10:01] "GET /admin/audit-logs HTTP/1.1" 200 -
2025-04-05 13:10:01,926 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:10:01] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:10:01,938 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:10:01] "GET /static/js/admin/audit-logs.js HTTP/1.1" 200 -
2025-04-05 13:10:03,454 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:10:03] "GET /admin/api/audit-logs/4 HTTP/1.1" 200 -
2025-04-05 13:11:24,872 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:11:24] "GET /admin/users HTTP/1.1" 200 -
2025-04-05 13:11:25,122 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:11:25] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:11:25,214 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:11:25] "[36mGET /static/js/admin/users.js HTTP/1.1[0m" 304 -
2025-04-05 13:11:26,895 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:11:26] "GET /admin/audit-logs HTTP/1.1" 200 -
2025-04-05 13:11:27,227 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:11:27] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:11:27,235 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:11:27] "[36mGET /static/js/admin/audit-logs.js HTTP/1.1[0m" 304 -
2025-04-05 13:12:04,849 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:12:04] "GET /admin/users HTTP/1.1" 200 -
2025-04-05 13:12:05,679 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:12:05] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:12:05,692 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:12:05] "[36mGET /static/js/admin/users.js HTTP/1.1[0m" 304 -
2025-04-05 13:13:58,882 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:13:58] "GET /admin/users HTTP/1.1" 200 -
2025-04-05 13:13:59,058 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:13:59] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:13:59,367 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:13:59] "[36mGET /static/js/admin/users.js HTTP/1.1[0m" 304 -
2025-04-05 13:14:00,977 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:14:00] "[35m[1mGET /admin/audit-logs HTTP/1.1[0m" 500 -
2025-04-05 13:14:01,332 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_routes.py', reloading
2025-04-05 13:14:01,334 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_routes.py', reloading
2025-04-05 13:14:01,346 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_routes.py', reloading
2025-04-05 13:14:01,381 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:14:01] "[36mGET /admin/audit-logs?__debugger__=yes&cmd=resource&f=style.css HTTP/1.1[0m" 304 -
2025-04-05 13:14:01,428 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:14:01] "[36mGET /admin/audit-logs?__debugger__=yes&cmd=resource&f=debugger.js HTTP/1.1[0m" 304 -
2025-04-05 13:14:01,628 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:14:01] "GET /admin/audit-logs?__debugger__=yes&cmd=resource&f=console.png&s=BcCqgxInZLqvNxeqZMby HTTP/1.1" 200 -
2025-04-05 13:14:01,796 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:14:01] "[36mGET /admin/audit-logs?__debugger__=yes&cmd=resource&f=console.png HTTP/1.1[0m" 304 -
2025-04-05 13:14:02,430 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 13:14:02,431 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 13:14:02,431 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 13:14:02,432 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 13:14:02,432 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 13:14:02 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 13:14:02,433 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 13:14:02 - INFO - [database.py:258] - Closing database connection
2025-04-05 13:14:02,434 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 13:14:02 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 13:14:04,272 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 13:14:09,940 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:14:09,941 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:14:09,941 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:14:09,942 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:14:09,942 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 13:14:09,954 [INFO] text2sql [app.py:64]: Debug logging enabled for SQL generator and agents
2025-04-05 13:14:09 - INFO - [app.py:64] - Debug logging enabled for SQL generator and agents
2025-04-05 13:14:09,956 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:14:09 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:14:09,956 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:14:09 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:14:09,960 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:14:09 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:14:09,960 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:14:09,961 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:14:09,961 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:14:09,961 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:14:09,961 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:14:09 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:14:09,962 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:14:09 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:14:09,962 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:14:09 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:14:09,962 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:14:09,963 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:14:09,963 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:14:09,963 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:14:09,963 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:14:09 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:14:09,964 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:14:09 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:14:09,966 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:14:09 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:14:09,967 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:14:09,967 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:14:09,967 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:14:09,968 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:14:09,968 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 13:14:09 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 13:14:09,968 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:14:09 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:14:09,968 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:14:09 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:14:09,969 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:14:09 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:14:09,969 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 13:14:09 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 13:14:09,969 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:14:09 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:14:09,970 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:14:09,970 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:14:09,970 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:14:09,970 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:14:09,971 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:14:09 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:14:10,124 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 13:14:10,125 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 13:14:21,929 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:14:21] "GET /admin/audit-logs HTTP/1.1" 200 -
2025-04-05 13:14:22,123 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:14:22] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:14:22,274 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:14:22] "[36mGET /static/js/admin/audit-logs.js HTTP/1.1[0m" 304 -
2025-04-05 13:14:28,902 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_routes.py', reloading
2025-04-05 13:14:28,903 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_routes.py', reloading
2025-04-05 13:14:28,914 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_routes.py', reloading
2025-04-05 13:14:29,916 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 13:14:29,916 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 13:14:29,916 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 13:14:29,917 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 13:14:29,917 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 13:14:29 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 13:14:29,917 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 13:14:29 - INFO - [database.py:258] - Closing database connection
2025-04-05 13:14:29,917 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 13:14:29 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 13:14:30,828 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 13:14:35,186 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:14:35,186 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:14:35,186 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:14:35,186 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:14:35,187 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 13:14:35,201 [INFO] text2sql [app.py:64]: Debug logging enabled for SQL generator and agents
2025-04-05 13:14:35 - INFO - [app.py:64] - Debug logging enabled for SQL generator and agents
2025-04-05 13:14:35,203 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:14:35 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:14:35,203 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:14:35 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:14:35,208 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:14:35 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:14:35,208 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:14:35,208 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:14:35,209 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:14:35,209 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:14:35,209 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:14:35 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:14:35,210 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:14:35 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:14:35,210 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:14:35 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:14:35,210 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:14:35,211 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:14:35,211 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:14:35,211 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:14:35,211 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:14:35 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:14:35,212 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:14:35 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:14:35,214 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:14:35 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:14:35,215 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:14:35,215 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:14:35,215 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:14:35,216 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:14:35,216 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 13:14:35 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 13:14:35,217 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:14:35 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:14:35,217 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:14:35 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:14:35,218 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:14:35 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:14:35,218 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 13:14:35 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 13:14:35,219 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:14:35 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:14:35,219 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:14:35,219 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:14:35,220 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:14:35,220 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:14:35,220 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:14:35 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:14:35,379 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 13:14:35,380 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 13:14:36,209 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:14:36] "GET /admin/audit-logs HTTP/1.1" 200 -
2025-04-05 13:14:36,260 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:14:36] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:14:36,571 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:14:36] "[36mGET /static/js/admin/audit-logs.js HTTP/1.1[0m" 304 -
2025-04-05 13:14:42,151 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:14:42] "GET /admin/api/audit-logs/4 HTTP/1.1" 200 -
2025-04-05 13:16:36,812 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:16:36] "GET /admin/users HTTP/1.1" 200 -
2025-04-05 13:16:37,053 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:16:37] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:16:37,142 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:16:37] "[36mGET /static/js/admin/users.js HTTP/1.1[0m" 304 -
2025-04-05 13:16:37,811 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:16:37] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 13:16:38,155 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:16:38] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:16:38,164 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:16:38] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 13:16:38,434 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:16:38] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 13:16:38,498 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:16:38] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 13:16:41,375 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:16:41] "GET /admin/roles HTTP/1.1" 200 -
2025-04-05 13:16:41,707 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:16:41] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:16:41,712 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:16:41] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-05 13:16:42,544 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:16:42] "GET /admin/audit-logs HTTP/1.1" 200 -
2025-04-05 13:16:42,882 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:16:42] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:16:42,884 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:16:42] "[36mGET /static/js/admin/audit-logs.js HTTP/1.1[0m" 304 -
2025-04-05 13:16:44,377 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:16:44] "GET /admin/roles HTTP/1.1" 200 -
2025-04-05 13:16:44,712 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:16:44] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:16:44,719 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:16:44] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-05 13:23:11,374 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:23:11] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:23:29,999 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:23:29] "GET /admin/audit-logs HTTP/1.1" 200 -
2025-04-05 13:23:30,331 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:23:30] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:23:30,336 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:23:30] "[36mGET /static/js/admin/audit-logs.js HTTP/1.1[0m" 304 -
2025-04-05 13:23:31,270 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:23:31] "GET /admin/roles HTTP/1.1" 200 -
2025-04-05 13:23:31,611 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:23:31] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:23:31,617 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:23:31] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-05 13:23:32,224 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:23:32] "GET /admin/users HTTP/1.1" 200 -
2025-04-05 13:23:32,547 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:23:32] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:23:32,559 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:23:32] "[36mGET /static/js/admin/users.js HTTP/1.1[0m" 304 -
2025-04-05 13:23:54,979 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:23:54] "GET / HTTP/1.1" 200 -
2025-04-05 13:23:55,317 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:23:55] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 13:23:55,319 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:23:55] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 13:23:55,320 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:23:55] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:23:55,322 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:23:55] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 13:23:55,324 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:23:55] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 13:23:55,329 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:23:55] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 13:23:55,626 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:23:55] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 13:23:55,632 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:23:55] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 13:23:55,953 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:23:55] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 13:23:56,466 [INFO] text2sql [app.py:248]: Schema requested for workspace: dfd
2025-04-05 13:23:56 - INFO - [app.py:248] - Schema requested for workspace: dfd
2025-04-05 13:23:56,467 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:23:56] "GET /api/schema?workspace=dfd HTTP/1.1" 200 -
2025-04-05 13:23:58,696 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:23:58] "GET /samples HTTP/1.1" 200 -
2025-04-05 13:23:58,935 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:23:58] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:23:59,042 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:23:59] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 13:23:59,046 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:23:59] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 13:23:59,061 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:23:59] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 13:23:59,063 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:23:59] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 13:23:59,065 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:23:59] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 13:23:59,248 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:23:59] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 13:23:59,359 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:23:59] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 13:23:59,365 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:23:59] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 13:23:59,699 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:23:59] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 13:23:59,702 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:23:59] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 13:23:59,707 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:23:59] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 13:23:59,723 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:23:59 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:23:59,724 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 13:23:59 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 13:23:59,728 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 13:23:59 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 13:23:59,735 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 0 samples (page 1, limit 10)
2025-04-05 13:23:59 - INFO - [feedback_manager.py:531] - Retrieved 0 samples (page 1, limit 10)
2025-04-05 13:23:59,737 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:23:59] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 13:24:01,484 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:24:01] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 13:24:01,833 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:24:01] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 13:24:01,835 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:24:01] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:24:02,087 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:24:02] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 13:24:02,191 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:24:02] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 13:24:04,144 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:24:04] "GET /admin/users HTTP/1.1" 200 -
2025-04-05 13:24:04,473 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:24:04] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:24:04,486 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:24:04] "[36mGET /static/js/admin/users.js HTTP/1.1[0m" 304 -
2025-04-05 13:24:05,470 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:24:05] "GET /admin/users/create HTTP/1.1" 200 -
2025-04-05 13:24:05,799 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:24:05] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:24:05,818 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:24:05] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 13:24:05,820 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:24:05] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 13:24:05,827 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:24:05] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 13:24:05,828 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:24:05] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 13:24:05,829 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:24:05] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 13:24:06,119 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:24:06] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 13:24:06,129 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:24:06] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 13:24:06,305 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:24:06] "GET /api/tables/suggestions?workspace= HTTP/1.1" 200 -
2025-04-05 13:24:25,176 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:24:25] "POST /admin/users/create HTTP/1.1" 200 -
2025-04-05 13:24:25,517 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:24:25] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:24:25,520 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:24:25] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 13:24:25,524 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:24:25] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 13:24:25,525 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:24:25] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 13:24:25,532 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:24:25] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 13:24:25,535 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:24:25] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 13:24:25,846 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:24:25] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 13:24:25,856 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:24:25] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 13:24:26,172 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:24:26] "GET /api/tables/suggestions?workspace= HTTP/1.1" 200 -
2025-04-05 13:24:40,780 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:24:40] "[32mPOST /admin/users/create HTTP/1.1[0m" 302 -
2025-04-05 13:24:41,104 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:24:41] "GET /admin/users HTTP/1.1" 200 -
2025-04-05 13:24:41,345 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:24:41] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:24:41,454 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:24:41] "[36mGET /static/js/admin/users.js HTTP/1.1[0m" 304 -
2025-04-05 13:24:47,870 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:24:47] "GET / HTTP/1.1" 200 -
2025-04-05 13:24:48,206 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:24:48] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 13:24:48,207 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:24:48] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:24:48,210 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:24:48] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 13:24:48,212 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:24:48] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 13:24:48,212 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:24:48] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 13:24:48,215 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:24:48] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 13:24:48,519 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:24:48] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 13:24:48,524 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:24:48] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 13:24:48,850 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:24:48] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 13:24:52,763 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:24:52] "[32mGET /logout HTTP/1.1[0m" 302 -
2025-04-05 13:24:53,078 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:24:53] "GET /login HTTP/1.1" 200 -
2025-04-05 13:24:53,330 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:24:53] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:25:00,257 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:00] "[32mPOST /login HTTP/1.1[0m" 302 -
2025-04-05 13:25:00,563 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:00] "GET / HTTP/1.1" 200 -
2025-04-05 13:25:00,819 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:00] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:25:00,890 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:00] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 13:25:00,903 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:00] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 13:25:00,906 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:00] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 13:25:00,909 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:00] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 13:25:00,910 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:00] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 13:25:01,117 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:01] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 13:25:01,195 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:01] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 13:25:01,507 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:01] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 13:25:02,914 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:02] "GET /samples HTTP/1.1" 200 -
2025-04-05 13:25:03,246 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:03] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:25:03,252 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:03] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 13:25:03,263 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:03] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 13:25:03,263 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:03] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 13:25:03,267 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:03] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 13:25:03,272 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:03] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 13:25:03,559 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:03] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 13:25:03,568 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:03] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 13:25:03,577 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:03] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 13:25:03,754 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:03] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 13:25:03,899 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:03] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 13:25:03,905 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:03] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 13:25:03,920 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:25:03 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:25:03,923 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 13:25:03 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 13:25:03,926 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 13:25:03 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 13:25:03,931 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 0 samples (page 1, limit 10)
2025-04-05 13:25:03 - INFO - [feedback_manager.py:531] - Retrieved 0 samples (page 1, limit 10)
2025-04-05 13:25:03,932 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:03] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 13:25:05,943 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:05] "[32mGET /admin/ HTTP/1.1[0m" 302 -
2025-04-05 13:25:06,253 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:06] "GET / HTTP/1.1" 200 -
2025-04-05 13:25:06,512 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:06] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:25:06,593 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:06] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 13:25:06,600 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:06] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 13:25:06,601 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:06] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 13:25:06,607 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:06] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 13:25:06,609 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:06] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 13:25:06,815 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:06] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 13:25:06,906 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:06] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 13:25:07,250 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:07] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 13:25:08,456 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:08] "GET /admin/schema HTTP/1.1" 200 -
2025-04-05 13:25:08,823 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:08] "[36mGET /static/css/admin-schema.css HTTP/1.1[0m" 304 -
2025-04-05 13:25:08,825 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:08] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 13:25:08,827 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:08] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:25:08,829 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:08] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 13:25:08,835 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:08] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 13:25:08,840 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:08] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 13:25:09,157 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:09] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 13:25:09,164 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:09] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 13:25:09,170 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:09] "[36mGET /static/js/admin/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 13:25:09,172 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:09] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 13:25:09,514 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:09] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 13:25:09,524 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:09] "GET /admin/api/schema/workspaces HTTP/1.1" 200 -
2025-04-05 13:25:09,533 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:09] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-05 13:25:09,537 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:09] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-05 13:25:12,692 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:12] "[32mGET /admin/ HTTP/1.1[0m" 302 -
2025-04-05 13:25:13,026 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:13] "GET / HTTP/1.1" 200 -
2025-04-05 13:25:13,266 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:13] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:25:13,394 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:13] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 13:25:13,399 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:13] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 13:25:13,401 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:13] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 13:25:13,402 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:13] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 13:25:13,412 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:13] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 13:25:13,573 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:13] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 13:25:13,711 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:13] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 13:25:14,025 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:14] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 13:25:14,316 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:14] "GET /samples HTTP/1.1" 200 -
2025-04-05 13:25:14,669 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:14] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 13:25:14,670 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:14] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:25:14,672 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:14] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 13:25:14,679 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:14] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 13:25:14,684 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:14] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 13:25:14,685 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:14] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 13:25:14,987 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:14] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 13:25:14,988 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:14] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 13:25:14,992 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:14] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 13:25:15,329 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:15] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 13:25:15,332 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:15] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 13:25:15,334 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:15] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 13:25:15,349 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:25:15 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:25:15,351 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 13:25:15 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 13:25:15,354 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 13:25:15 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 13:25:15,357 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 0 samples (page 1, limit 10)
2025-04-05 13:25:15 - INFO - [feedback_manager.py:531] - Retrieved 0 samples (page 1, limit 10)
2025-04-05 13:25:15,359 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:15] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 13:25:15,576 [INFO] text2sql [app.py:248]: Schema requested for workspace: dfd
2025-04-05 13:25:15 - INFO - [app.py:248] - Schema requested for workspace: dfd
2025-04-05 13:25:15,583 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:25:15] "GET /api/schema?workspace=dfd HTTP/1.1" 200 -
2025-04-05 13:33:09,832 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:33:09] "[32mGET /admin/ HTTP/1.1[0m" 302 -
2025-04-05 13:33:10,067 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:33:10] "GET / HTTP/1.1" 200 -
2025-04-05 13:33:10,147 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:33:10] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:33:10,413 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:33:10] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 13:33:10,443 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:33:10] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 13:33:10,450 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:33:10] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 13:33:10,453 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:33:10] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 13:33:10,459 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:33:10] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 13:33:10,462 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:33:10] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 13:33:10,751 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:33:10] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 13:33:11,100 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:33:11] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 13:33:12,372 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:33:12] "GET /admin/schema HTTP/1.1" 200 -
2025-04-05 13:33:12,728 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:33:12] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:33:12,751 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:33:12] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 13:33:12,759 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:33:12] "[36mGET /static/css/admin-schema.css HTTP/1.1[0m" 304 -
2025-04-05 13:33:12,760 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:33:12] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 13:33:12,762 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:33:12] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 13:33:12,764 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:33:12] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 13:33:13,049 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:33:13] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 13:33:13,075 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:33:13] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 13:33:13,076 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:33:13] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 13:33:13,078 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:33:13] "[36mGET /static/js/admin/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 13:33:13,395 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:33:13] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 13:33:13,397 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:33:13] "GET /admin/api/schema/workspaces HTTP/1.1" 200 -
2025-04-05 13:33:13,400 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:33:13] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-05 13:33:13,403 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:33:13] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-05 13:33:21,022 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:33:21] "[32mGET /logout HTTP/1.1[0m" 302 -
2025-04-05 13:33:21,331 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:33:21] "GET /login HTTP/1.1" 200 -
2025-04-05 13:33:21,593 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:33:21] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:39:00,721 [ERROR] text2sql [user_manager.py:41]: Password verification error: too many values to unpack (expected 2)
2025-04-05 13:39:00 - ERROR - [user_manager.py:41] - Password verification error: too many values to unpack (expected 2)
2025-04-05 13:39:00,733 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:39:00] "POST /login HTTP/1.1" 200 -
2025-04-05 13:39:00,954 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:39:00] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:39:04,057 [ERROR] text2sql [user_manager.py:41]: Password verification error: too many values to unpack (expected 2)
2025-04-05 13:39:04 - ERROR - [user_manager.py:41] - Password verification error: too many values to unpack (expected 2)
2025-04-05 13:39:04,066 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:39:04] "POST /login HTTP/1.1" 200 -
2025-04-05 13:39:04,404 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:39:04] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:39:11,640 [ERROR] text2sql [user_manager.py:41]: Password verification error: too many values to unpack (expected 2)
2025-04-05 13:39:11 - ERROR - [user_manager.py:41] - Password verification error: too many values to unpack (expected 2)
2025-04-05 13:39:11,648 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:39:11] "POST /login HTTP/1.1" 200 -
2025-04-05 13:39:11,993 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:39:11] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:39:23,961 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:39:23] "[32mGET / HTTP/1.1[0m" 302 -
2025-04-05 13:39:24,278 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:39:24] "GET /login?next=http://localhost:5000/ HTTP/1.1" 200 -
2025-04-05 13:39:24,527 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:39:24] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:39:30,045 [ERROR] text2sql [user_manager.py:41]: Password verification error: too many values to unpack (expected 2)
2025-04-05 13:39:30 - ERROR - [user_manager.py:41] - Password verification error: too many values to unpack (expected 2)
2025-04-05 13:39:30,053 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:39:30] "POST /login HTTP/1.1" 200 -
2025-04-05 13:39:30,384 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:39:30] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:39:40,451 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:39:40] "[32mPOST /login HTTP/1.1[0m" 302 -
2025-04-05 13:39:40,765 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:39:40] "GET / HTTP/1.1" 200 -
2025-04-05 13:39:41,020 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:39:41] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:39:41,105 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:39:41] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 13:39:41,106 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:39:41] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 13:39:41,108 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:39:41] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 13:39:41,109 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:39:41] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 13:39:41,110 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:39:41] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 13:39:41,344 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:39:41] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 13:39:41,422 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:39:41] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 13:39:41,776 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:39:41] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 13:40:00,803 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:40:00] "[32mGET /admin/ HTTP/1.1[0m" 302 -
2025-04-05 13:40:01,123 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:40:01] "GET / HTTP/1.1" 200 -
2025-04-05 13:40:01,367 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:40:01] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:40:01,468 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:40:01] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 13:40:01,469 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:40:01] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 13:40:01,470 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:40:01] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 13:40:01,471 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:40:01] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 13:40:01,472 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:40:01] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 13:40:01,678 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:40:01] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 13:40:01,777 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:40:01] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 13:40:02,091 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:40:02] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 13:40:02,587 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:40:02] "GET /admin/schema HTTP/1.1" 200 -
2025-04-05 13:40:02,927 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:40:02] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:40:02,931 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:40:02] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 13:40:02,935 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:40:02] "[36mGET /static/css/admin-schema.css HTTP/1.1[0m" 304 -
2025-04-05 13:40:02,938 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:40:02] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 13:40:02,939 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:40:02] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 13:40:02,948 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:40:02] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 13:40:03,239 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:40:03] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 13:40:03,247 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:40:03] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 13:40:03,258 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:40:03] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 13:40:03,260 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:40:03] "[36mGET /static/js/admin/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 13:40:03,590 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:40:03] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 13:40:03,597 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:40:03] "GET /admin/api/schema/workspaces HTTP/1.1" 200 -
2025-04-05 13:40:03,614 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:40:03] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-05 13:40:03,614 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:40:03] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-05 13:40:05,136 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:40:05] "[32mGET /admin/ HTTP/1.1[0m" 302 -
2025-04-05 13:40:05,468 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:40:05] "GET / HTTP/1.1" 200 -
2025-04-05 13:40:05,720 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:40:05] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:40:05,808 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:40:05] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 13:40:05,824 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:40:05] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 13:40:05,827 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:40:05] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 13:40:05,830 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:40:05] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 13:40:05,832 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:40:05] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 13:40:06,028 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:40:06] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 13:40:06,119 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:40:06] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 13:40:06,432 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:40:06] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 13:40:07,574 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:40:07] "GET / HTTP/1.1" 200 -
2025-04-05 13:40:07,922 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:40:07] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:40:07,926 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:40:07] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 13:40:07,926 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:40:07] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 13:40:07,927 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:40:07] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 13:40:07,930 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:40:07] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 13:40:07,933 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:40:07] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 13:40:08,243 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:40:08] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 13:40:08,247 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:40:08] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 13:40:08,587 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:40:08] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 13:40:44,936 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:40:44] "[32mGET /logout HTTP/1.1[0m" 302 -
2025-04-05 13:40:45,243 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:40:45] "GET /login HTTP/1.1" 200 -
2025-04-05 13:40:45,502 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:40:45] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:40:50,604 [ERROR] text2sql [user_manager.py:41]: Password verification error: too many values to unpack (expected 2)
2025-04-05 13:40:50 - ERROR - [user_manager.py:41] - Password verification error: too many values to unpack (expected 2)
2025-04-05 13:40:50,613 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:40:50] "POST /login HTTP/1.1" 200 -
2025-04-05 13:40:50,951 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:40:50] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:42:21,287 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/user_manager.py', reloading
2025-04-05 13:42:21,288 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/user_manager.py', reloading
2025-04-05 13:42:21,289 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/user_manager.py', reloading
2025-04-05 13:42:22,290 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 13:42:22,290 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 13:42:22,291 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 13:42:22,291 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 13:42:22,291 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 13:42:22 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 13:42:22,291 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 13:42:22 - INFO - [database.py:258] - Closing database connection
2025-04-05 13:42:22,292 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 13:42:22 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 13:42:23,394 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 13:42:31,002 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:42:31,004 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:42:31,004 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:42:31,005 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:42:31,006 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 13:42:31,023 [INFO] text2sql [app.py:64]: Debug logging enabled for SQL generator and agents
2025-04-05 13:42:31 - INFO - [app.py:64] - Debug logging enabled for SQL generator and agents
2025-04-05 13:42:31,024 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:42:31 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:42:31,024 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:42:31 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:42:31,030 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:42:31 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:42:31,031 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:42:31,031 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:42:31,031 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:42:31,031 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:42:31,032 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:42:31 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:42:31,032 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:42:31 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:42:31,032 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:42:31 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:42:31,033 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:42:31,033 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:42:31,033 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:42:31,033 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:42:31,033 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:42:31 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:42:31,034 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:42:31 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:42:31,034 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:42:31 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:42:31,034 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:42:31,036 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:42:31,036 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:42:31,036 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:42:31,037 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 13:42:31 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 13:42:31,037 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:42:31 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:42:31,037 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:42:31 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:42:31,038 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:42:31 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:42:31,038 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 13:42:31 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 13:42:31,038 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:42:31 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:42:31,039 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:42:31,040 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:42:31,040 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:42:31,040 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:42:31,041 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:42:31 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:42:31,203 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 13:42:31,204 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 13:42:38,211 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:42:38] "POST /login HTTP/1.1" 200 -
2025-04-05 13:42:38,262 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:42:38] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:42:46,979 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:42:46] "[32mGET / HTTP/1.1[0m" 302 -
2025-04-05 13:42:47,241 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:42:47] "GET /login?next=http://localhost:5000/ HTTP/1.1" 200 -
2025-04-05 13:42:47,292 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:42:47] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:42:52,219 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:42:52] "POST /login HTTP/1.1" 200 -
2025-04-05 13:42:52,555 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:42:52] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:43:28,448 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/user_manager.py', reloading
2025-04-05 13:43:28,460 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/user_manager.py', reloading
2025-04-05 13:43:29,461 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 13:43:29,462 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 13:43:29,462 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 13:43:29,462 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 13:43:29,463 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 13:43:29 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 13:43:29,463 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 13:43:29 - INFO - [database.py:258] - Closing database connection
2025-04-05 13:43:29,463 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 13:43:29 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 13:43:30,377 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 13:43:37,786 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:43:37,787 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:43:37,787 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:43:37,788 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:43:37,790 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 13:43:37,816 [INFO] text2sql [app.py:64]: Debug logging enabled for SQL generator and agents
2025-04-05 13:43:37 - INFO - [app.py:64] - Debug logging enabled for SQL generator and agents
2025-04-05 13:43:37,820 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:43:37 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:43:37,821 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:43:37 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:43:37,828 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:43:37 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:43:37,831 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:43:37,832 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:43:37,833 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:43:37,834 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:43:37,834 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:43:37 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:43:37,835 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:43:37 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:43:37,835 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:43:37 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:43:37,836 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:43:37,837 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:43:37,837 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:43:37,838 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:43:37,838 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:43:37 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:43:37,839 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:43:37 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:43:37,840 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:43:37 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:43:37,840 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:43:37,849 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:43:37,850 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:43:37,851 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:43:37,851 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 13:43:37 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 13:43:37,852 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:43:37 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:43:37,853 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:43:37 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:43:37,854 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:43:37 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:43:37,854 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 13:43:37 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 13:43:37,855 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:43:37 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:43:37,856 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:43:37,857 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:43:37,857 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:43:37,858 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:43:37,858 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:43:37 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:43:38,121 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 13:43:38,122 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 13:43:55,340 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/user_manager.py', reloading
2025-04-05 13:43:55,341 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/user_manager.py', reloading
2025-04-05 13:43:55,342 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/user_manager.py', reloading
2025-04-05 13:43:56,344 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 13:43:56,345 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 13:43:56,346 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 13:43:56,346 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 13:43:56,346 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 13:43:56 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 13:43:56,347 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 13:43:56 - INFO - [database.py:258] - Closing database connection
2025-04-05 13:43:56,348 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 13:43:56 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 13:43:57,277 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 13:44:01,605 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:44:01,605 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:44:01,606 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:44:01,606 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:44:01,607 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 13:44:01,619 [INFO] text2sql [app.py:64]: Debug logging enabled for SQL generator and agents
2025-04-05 13:44:01 - INFO - [app.py:64] - Debug logging enabled for SQL generator and agents
2025-04-05 13:44:01,622 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:44:01 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:44:01,623 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:44:01 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:44:01,626 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:44:01 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:44:01,627 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:44:01,627 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:44:01,628 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:44:01,628 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:44:01,628 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:44:01 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:44:01,629 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:44:01 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:44:01,629 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:44:01 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:44:01,630 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:44:01,630 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:44:01,630 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:44:01,631 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:44:01,631 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:44:01 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:44:01,632 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:44:01 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:44:01,633 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:44:01 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:44:01,633 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:44:01,636 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:44:01,637 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:44:01,637 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:44:01,637 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 13:44:01 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 13:44:01,638 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:44:01 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:44:01,638 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:44:01 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:44:01,639 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:44:01 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:44:01,639 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 13:44:01 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 13:44:01,640 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:44:01 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:44:01,640 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:44:01,641 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:44:01,641 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:44:01,641 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:44:01,641 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:44:01 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:44:01,805 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 13:44:01,806 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 13:44:02,540 [INFO] text2sql [user_manager.py:37]: Verifying password: scrypt:32768:8:1$tD822WzLE9zgba3J$0367eda8678343e94179763c32bb505cb89dd390ca88d9b1408cea6470a4e227bc74b9776c774338fad934864da8f3a23f91f80e2320393ebef92f8e5bdf7125
2025-04-05 13:44:02 - INFO - [user_manager.py:37] - Verifying password: scrypt:32768:8:1$tD822WzLE9zgba3J$0367eda8678343e94179763c32bb505cb89dd390ca88d9b1408cea6470a4e227bc74b9776c774338fad934864da8f3a23f91f80e2320393ebef92f8e5bdf7125
2025-04-05 13:44:02,577 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:44:02] "POST /login HTTP/1.1" 200 -
2025-04-05 13:44:02,641 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:44:02] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:44:42,171 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:44:42] "GET /reset-password-request HTTP/1.1" 200 -
2025-04-05 13:44:42,421 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:44:42] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:44:45,401 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:44:45] "[32mPOST /reset-password-request HTTP/1.1[0m" 302 -
2025-04-05 13:44:45,713 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:44:45] "GET /login HTTP/1.1" 200 -
2025-04-05 13:44:45,968 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:44:45] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:45:00,549 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:45:00] "GET /reset-password-request HTTP/1.1" 200 -
2025-04-05 13:45:00,884 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:45:00] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:45:06,993 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:45:06] "POST /reset-password-request HTTP/1.1" 200 -
2025-04-05 13:45:07,348 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:45:07] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:45:12,272 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:45:12] "[32mPOST /reset-password-request HTTP/1.1[0m" 302 -
2025-04-05 13:45:12,578 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:45:12] "GET /login HTTP/1.1" 200 -
2025-04-05 13:45:12,838 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:45:12] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:45:33,963 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:45:33] "[32mGET /reset-password/WVIMSsf9mOTPgN-DYuiCPS3dzFsBagFzMY11Xl5csH8 HTTP/1.1[0m" 302 -
2025-04-05 13:45:34,282 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:45:34] "GET /reset-password-request HTTP/1.1" 200 -
2025-04-05 13:45:34,527 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:45:34] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:45:43,708 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:45:43] "[32mGET /reset-password/WVIMSsf9mOTPgN-DYuiCPS3dzFsBagFzMY11Xl5csH8 HTTP/1.1[0m" 302 -
2025-04-05 13:45:44,024 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:45:44] "GET /reset-password-request HTTP/1.1" 200 -
2025-04-05 13:45:44,263 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:45:44] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:45:51,457 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:45:51] "[32mPOST /reset-password-request HTTP/1.1[0m" 302 -
2025-04-05 13:45:51,785 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:45:51] "GET /login HTTP/1.1" 200 -
2025-04-05 13:45:52,025 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:45:52] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:46:04,464 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:46:04] "GET /reset-password/-ttMXvIY5Luye_Ya4GVwtmfG4DcYcVIDm_FzKL2Pipk HTTP/1.1" 200 -
2025-04-05 13:46:04,812 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:46:04] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:46:13,031 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:46:13] "POST /reset-password/-ttMXvIY5Luye_Ya4GVwtmfG4DcYcVIDm_FzKL2Pipk HTTP/1.1" 200 -
2025-04-05 13:46:13,365 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:46:13] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:46:24,960 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:46:24] "POST /reset-password/-ttMXvIY5Luye_Ya4GVwtmfG4DcYcVIDm_FzKL2Pipk HTTP/1.1" 200 -
2025-04-05 13:46:25,308 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:46:25] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:46:39,711 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:46:39] "POST /reset-password/-ttMXvIY5Luye_Ya4GVwtmfG4DcYcVIDm_FzKL2Pipk HTTP/1.1" 200 -
2025-04-05 13:46:40,049 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:46:40] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:48:23,268 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/user_manager.py', reloading
2025-04-05 13:48:23,269 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/user_manager.py', reloading
2025-04-05 13:48:23,271 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/user_manager.py', reloading
2025-04-05 13:48:24,272 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 13:48:24,272 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 13:48:24,273 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 13:48:24,273 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 13:48:24,273 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 13:48:24 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 13:48:24,274 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 13:48:24 - INFO - [database.py:258] - Closing database connection
2025-04-05 13:48:24,274 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 13:48:24 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 13:48:25,205 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 13:48:28,405 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:48:28,406 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:48:28,406 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:48:28,406 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:48:28,407 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 13:48:28,413 [INFO] text2sql [app.py:64]: Debug logging enabled for SQL generator and agents
2025-04-05 13:48:28 - INFO - [app.py:64] - Debug logging enabled for SQL generator and agents
2025-04-05 13:48:28,415 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:48:28 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:48:28,415 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:48:28 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:48:28,418 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:48:28 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:48:28,419 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:48:28,419 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:48:28,419 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:48:28,419 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:48:28,420 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:48:28 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:48:28,420 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:48:28 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:48:28,420 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:48:28 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:48:28,421 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:48:28,421 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:48:28,421 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:48:28,421 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:48:28,422 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:48:28 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:48:28,422 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:48:28 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:48:28,422 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:48:28 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:48:28,422 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:48:28,424 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:48:28,424 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:48:28,424 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:48:28,424 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 13:48:28 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 13:48:28,425 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:48:28 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:48:28,425 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:48:28 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:48:28,425 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:48:28 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:48:28,425 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 13:48:28 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 13:48:28,425 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:48:28 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:48:28,425 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:48:28,426 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:48:28,426 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:48:28,426 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:48:28,426 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:48:28 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:48:28,564 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 13:48:28,564 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 13:48:29,883 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:48:29] "[32mGET / HTTP/1.1[0m" 302 -
2025-04-05 13:48:30,139 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:48:30] "GET /login?next=http://localhost:5000/ HTTP/1.1" 200 -
2025-04-05 13:48:30,195 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:48:30] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:48:36,395 [INFO] text2sql [user_manager.py:37]: Verifying password: scrypt:32768:8:1$tD822WzLE9zgba3J$0367eda8678343e94179763c32bb505cb89dd390ca88d9b1408cea6470a4e227bc74b9776c774338fad934864da8f3a23f91f80e2320393ebef92f8e5bdf7125
2025-04-05 13:48:36 - INFO - [user_manager.py:37] - Verifying password: scrypt:32768:8:1$tD822WzLE9zgba3J$0367eda8678343e94179763c32bb505cb89dd390ca88d9b1408cea6470a4e227bc74b9776c774338fad934864da8f3a23f91f80e2320393ebef92f8e5bdf7125
2025-04-05 13:48:36,396 [ERROR] text2sql [user_manager.py:43]: Password verification error: too many values to unpack (expected 2)
2025-04-05 13:48:36 - ERROR - [user_manager.py:43] - Password verification error: too many values to unpack (expected 2)
2025-04-05 13:48:36,406 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:48:36] "POST /login HTTP/1.1" 200 -
2025-04-05 13:48:36,738 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:48:36] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:50:45,981 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/user_manager.py', reloading
2025-04-05 13:50:45,982 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/user_manager.py', reloading
2025-04-05 13:50:45,993 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/user_manager.py', reloading
2025-04-05 13:50:46,994 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 13:50:46,995 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 13:50:46,995 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 13:50:46,995 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 13:50:46,995 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 13:50:46 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 13:50:46,996 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 13:50:46 - INFO - [database.py:258] - Closing database connection
2025-04-05 13:50:46,996 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 13:50:46 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 13:50:47,988 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 13:50:52,672 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:50:52,673 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:50:52,673 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:50:52,673 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:50:52,674 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 13:50:52,681 [INFO] text2sql [app.py:64]: Debug logging enabled for SQL generator and agents
2025-04-05 13:50:52 - INFO - [app.py:64] - Debug logging enabled for SQL generator and agents
2025-04-05 13:50:52,683 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:50:52 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:50:52,683 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:50:52 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:50:52,688 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:50:52 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:50:52,688 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:50:52,688 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:50:52,688 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:50:52,689 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:50:52,689 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:50:52 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:50:52,689 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:50:52 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:50:52,690 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:50:52 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:50:52,690 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:50:52,690 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:50:52,690 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:50:52,691 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:50:52,691 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:50:52 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:50:52,691 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:50:52 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:50:52,691 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:50:52 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:50:52,692 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:50:52,693 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:50:52,693 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:50:52,694 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:50:52,694 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 13:50:52 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 13:50:52,694 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:50:52 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:50:52,694 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:50:52 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:50:52,695 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:50:52 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:50:52,695 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 13:50:52 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 13:50:52,695 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:50:52 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:50:52,695 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:50:52,696 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:50:52,696 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:50:52,696 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:50:52,696 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:50:52 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:50:52,846 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 13:50:52,846 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 13:51:41,267 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/user_manager.py', reloading
2025-04-05 13:51:41,268 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/user_manager.py', reloading
2025-04-05 13:51:42,270 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 13:51:42,271 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 13:51:42,272 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 13:51:42,273 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 13:51:42,273 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 13:51:42 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 13:51:42,274 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 13:51:42 - INFO - [database.py:258] - Closing database connection
2025-04-05 13:51:42,275 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 13:51:42 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 13:51:43,149 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 13:51:46,795 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:51:46,795 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:51:46,796 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:51:46,796 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:51:46,797 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 13:51:46,807 [INFO] text2sql [app.py:64]: Debug logging enabled for SQL generator and agents
2025-04-05 13:51:46 - INFO - [app.py:64] - Debug logging enabled for SQL generator and agents
2025-04-05 13:51:46,809 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:51:46 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:51:46,809 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:51:46 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:51:46,813 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:51:46 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:51:46,814 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:51:46,814 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:51:46,814 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:51:46,815 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:51:46,815 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:51:46 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:51:46,816 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:51:46 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:51:46,817 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:51:46 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:51:46,817 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:51:46,818 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:51:46,818 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:51:46,818 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:51:46,818 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:51:46 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:51:46,819 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:51:46 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:51:46,819 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:51:46 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:51:46,819 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:51:46,822 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:51:46,822 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:51:46,823 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:51:46,823 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 13:51:46 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 13:51:46,823 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:51:46 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:51:46,824 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:51:46 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:51:46,824 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:51:46 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:51:46,825 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 13:51:46 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 13:51:46,825 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:51:46 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:51:46,825 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:51:46,826 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:51:46,826 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:51:46,826 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:51:46,827 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:51:46 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:51:46,981 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 13:51:46,982 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 13:52:07,101 [INFO] text2sql [user_manager.py:37]: Verifying password: scrypt:32768:8:1$tD822WzLE9zgba3J$0367eda8678343e94179763c32bb505cb89dd390ca88d9b1408cea6470a4e227bc74b9776c774338fad934864da8f3a23f91f80e2320393ebef92f8e5bdf7125
2025-04-05 13:52:07 - INFO - [user_manager.py:37] - Verifying password: scrypt:32768:8:1$tD822WzLE9zgba3J$0367eda8678343e94179763c32bb505cb89dd390ca88d9b1408cea6470a4e227bc74b9776c774338fad934864da8f3a23f91f80e2320393ebef92f8e5bdf7125
2025-04-05 13:52:07,102 [ERROR] text2sql [user_manager.py:43]: Password verification error: too many values to unpack (expected 2)
2025-04-05 13:52:07 - ERROR - [user_manager.py:43] - Password verification error: too many values to unpack (expected 2)
2025-04-05 13:52:07,127 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:52:07] "POST /login HTTP/1.1" 200 -
2025-04-05 13:52:07,345 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:52:07] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:52:38,118 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/user_manager.py', reloading
2025-04-05 13:52:38,128 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/user_manager.py', reloading
2025-04-05 13:52:38,132 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/user_manager.py', reloading
2025-04-05 13:52:39,134 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 13:52:39,135 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 13:52:39,136 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 13:52:39,136 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 13:52:39,137 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 13:52:39 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 13:52:39,138 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 13:52:39 - INFO - [database.py:258] - Closing database connection
2025-04-05 13:52:39,139 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 13:52:39 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 13:52:40,195 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 13:52:44,699 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:52:44,699 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:52:44,699 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:52:44,700 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:52:44,700 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 13:52:44,709 [INFO] text2sql [app.py:64]: Debug logging enabled for SQL generator and agents
2025-04-05 13:52:44 - INFO - [app.py:64] - Debug logging enabled for SQL generator and agents
2025-04-05 13:52:44,711 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:52:44 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:52:44,711 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:52:44 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:52:44,715 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:52:44 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:52:44,715 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:52:44,715 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:52:44,716 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:52:44,716 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:52:44,716 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:52:44 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:52:44,716 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:52:44 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:52:44,717 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:52:44 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:52:44,717 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:52:44,717 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:52:44,717 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:52:44,718 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:52:44,718 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:52:44 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:52:44,718 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:52:44 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:52:44,718 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:52:44 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:52:44,719 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:52:44,721 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:52:44,722 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:52:44,722 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:52:44,722 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 13:52:44 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 13:52:44,723 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:52:44 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:52:44,723 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:52:44 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:52:44,724 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:52:44 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:52:44,724 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 13:52:44 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 13:52:44,724 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:52:44 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:52:44,725 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:52:44,725 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:52:44,725 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:52:44,725 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:52:44,726 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:52:44 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:52:44,871 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 13:52:44,872 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 13:52:45,519 [INFO] text2sql [user_manager.py:38]: Verifying password: scrypt:32768:8:1$tD822WzLE9zgba3J$0367eda8678343e94179763c32bb505cb89dd390ca88d9b1408cea6470a4e227bc74b9776c774338fad934864da8f3a23f91f80e2320393ebef92f8e5bdf7125
2025-04-05 13:52:45 - INFO - [user_manager.py:38] - Verifying password: scrypt:32768:8:1$tD822WzLE9zgba3J$0367eda8678343e94179763c32bb505cb89dd390ca88d9b1408cea6470a4e227bc74b9776c774338fad934864da8f3a23f91f80e2320393ebef92f8e5bdf7125
2025-04-05 13:52:45,522 [ERROR] text2sql [user_manager.py:48]: Password verification error: too many values to unpack (expected 2)
Stack trace:
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/user_manager.py", line 39, in _verify_password
    salt, stored_hash = password_hash.split('$')
    ^^^^^^^^^^^^^^^^^
ValueError: too many values to unpack (expected 2)

2025-04-05 13:52:45 - ERROR - [user_manager.py:48] - Password verification error: too many values to unpack (expected 2)
Stack trace:
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/user_manager.py", line 39, in _verify_password
    salt, stored_hash = password_hash.split('$')
    ^^^^^^^^^^^^^^^^^
ValueError: too many values to unpack (expected 2)

2025-04-05 13:52:45,557 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:52:45] "POST /login HTTP/1.1" 200 -
2025-04-05 13:52:45,614 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:52:45] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:53:17,976 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/user_manager.py', reloading
2025-04-05 13:53:17,988 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/user_manager.py', reloading
2025-04-05 13:53:18,989 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 13:53:18,989 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 13:53:18,989 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 13:53:18,989 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 13:53:18,990 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 13:53:18 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 13:53:18,990 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 13:53:18 - INFO - [database.py:258] - Closing database connection
2025-04-05 13:53:18,991 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 13:53:18 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 13:53:19,918 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 13:53:24,711 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:53:24,712 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:53:24,712 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:53:24,712 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:53:24,713 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 13:53:24,723 [INFO] text2sql [app.py:64]: Debug logging enabled for SQL generator and agents
2025-04-05 13:53:24 - INFO - [app.py:64] - Debug logging enabled for SQL generator and agents
2025-04-05 13:53:24,725 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:53:24 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:53:24,725 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:53:24 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:53:24,728 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:53:24 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:53:24,729 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:53:24,729 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:53:24,729 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:53:24,730 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:53:24,730 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:53:24 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:53:24,730 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:53:24 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:53:24,731 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:53:24 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:53:24,733 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:53:24,733 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:53:24,733 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:53:24,733 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:53:24,734 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:53:24 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:53:24,734 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:53:24 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:53:24,734 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:53:24 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:53:24,734 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:53:24,736 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:53:24,737 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:53:24,737 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:53:24,737 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 13:53:24 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 13:53:24,738 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:53:24 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:53:24,738 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:53:24 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:53:24,739 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:53:24 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:53:24,739 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 13:53:24 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 13:53:24,739 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:53:24 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:53:24,740 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:53:24,740 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:53:24,740 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:53:24,741 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:53:24,741 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:53:24 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:53:24,893 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 13:53:24,894 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 13:53:26,242 [INFO] text2sql [user_manager.py:38]: Verifying password: scrypt:32768:8:1$tD822WzLE9zgba3J$0367eda8678343e94179763c32bb505cb89dd390ca88d9b1408cea6470a4e227bc74b9776c774338fad934864da8f3a23f91f80e2320393ebef92f8e5bdf7125
2025-04-05 13:53:26 - INFO - [user_manager.py:38] - Verifying password: scrypt:32768:8:1$tD822WzLE9zgba3J$0367eda8678343e94179763c32bb505cb89dd390ca88d9b1408cea6470a4e227bc74b9776c774338fad934864da8f3a23f91f80e2320393ebef92f8e5bdf7125
2025-04-05 13:53:26,245 [INFO] text2sql [user_manager.py:39]: split values ['scrypt:32768:8:1', 'tD822WzLE9zgba3J', '0367eda8678343e94179763c32bb505cb89dd390ca88d9b1408cea6470a4e227bc74b9776c774338fad934864da8f3a23f91f80e2320393ebef92f8e5bdf7125']
2025-04-05 13:53:26 - INFO - [user_manager.py:39] - split values ['scrypt:32768:8:1', 'tD822WzLE9zgba3J', '0367eda8678343e94179763c32bb505cb89dd390ca88d9b1408cea6470a4e227bc74b9776c774338fad934864da8f3a23f91f80e2320393ebef92f8e5bdf7125']
2025-04-05 13:53:26,247 [ERROR] text2sql [user_manager.py:49]: Password verification error: too many values to unpack (expected 2)
Stack trace:
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/user_manager.py", line 40, in _verify_password
    salt, stored_hash = password_hash.split('$')
    ^^^^^^^^^^^^^^^^^
ValueError: too many values to unpack (expected 2)

2025-04-05 13:53:26 - ERROR - [user_manager.py:49] - Password verification error: too many values to unpack (expected 2)
Stack trace:
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/user_manager.py", line 40, in _verify_password
    salt, stored_hash = password_hash.split('$')
    ^^^^^^^^^^^^^^^^^
ValueError: too many values to unpack (expected 2)

2025-04-05 13:53:26,285 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:53:26] "POST /login HTTP/1.1" 200 -
2025-04-05 13:53:26,348 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:53:26] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:53:53,786 [INFO] text2sql [user_manager.py:38]: Verifying password: 03383b3816fe60ec$c142c434d551197c27d50d772675af0677c0f166f2d79c70ae3f762f10084378
2025-04-05 13:53:53 - INFO - [user_manager.py:38] - Verifying password: 03383b3816fe60ec$c142c434d551197c27d50d772675af0677c0f166f2d79c70ae3f762f10084378
2025-04-05 13:53:53,787 [INFO] text2sql [user_manager.py:39]: split values ['03383b3816fe60ec', 'c142c434d551197c27d50d772675af0677c0f166f2d79c70ae3f762f10084378']
2025-04-05 13:53:53 - INFO - [user_manager.py:39] - split values ['03383b3816fe60ec', 'c142c434d551197c27d50d772675af0677c0f166f2d79c70ae3f762f10084378']
2025-04-05 13:53:53,807 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:53:53] "[32mPOST /login HTTP/1.1[0m" 302 -
2025-04-05 13:53:54,049 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:53:54] "GET / HTTP/1.1" 200 -
2025-04-05 13:53:54,123 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:53:54] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:53:54,390 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:53:54] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 13:53:54,393 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:53:54] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 13:53:54,395 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:53:54] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 13:53:54,397 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:53:54] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 13:53:54,399 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:53:54] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 13:53:54,426 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:53:54] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 13:53:54,701 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:53:54] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 13:53:55,037 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:53:55] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 13:56:00,064 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/user_manager.py', reloading
2025-04-05 13:56:00,068 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/user_manager.py', reloading
2025-04-05 13:56:01,069 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 13:56:01,069 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 13:56:01,070 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 13:56:01,070 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 13:56:01,070 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 13:56:01 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 13:56:01,070 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 13:56:01 - INFO - [database.py:258] - Closing database connection
2025-04-05 13:56:01,070 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 13:56:01 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 13:56:01,966 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 13:56:05,276 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:56:05,276 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:56:05,276 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:56:05,277 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:56:05,277 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 13:56:05,285 [INFO] text2sql [app.py:64]: Debug logging enabled for SQL generator and agents
2025-04-05 13:56:05 - INFO - [app.py:64] - Debug logging enabled for SQL generator and agents
2025-04-05 13:56:05,286 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:56:05 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:56:05,287 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:56:05 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:56:05,290 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:56:05 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:56:05,291 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:56:05,291 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:56:05,291 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:56:05,292 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:56:05,292 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:56:05 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:56:05,292 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:56:05 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:56:05,292 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:56:05 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:56:05,293 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:56:05,293 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:56:05,293 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:56:05,293 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:56:05,293 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:56:05 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:56:05,293 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:56:05 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:56:05,294 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:56:05 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:56:05,294 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:56:05,296 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:56:05,297 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:56:05,297 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:56:05,297 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 13:56:05 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 13:56:05,297 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:56:05 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:56:05,298 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:56:05 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:56:05,299 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:56:05 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:56:05,299 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 13:56:05 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 13:56:05,299 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:56:05 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:56:05,300 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:56:05,300 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:56:05,300 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:56:05,300 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:56:05,301 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:56:05 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:56:05,446 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 13:56:05,447 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 13:56:07,587 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:56:07] "[32mGET /logout HTTP/1.1[0m" 302 -
2025-04-05 13:56:07,828 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:56:07] "GET /login HTTP/1.1" 200 -
2025-04-05 13:56:07,911 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:56:07] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:56:11,727 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:56:11] "POST /login HTTP/1.1" 200 -
2025-04-05 13:56:12,093 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:56:12] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:56:23,104 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:56:23] "POST /login HTTP/1.1" 200 -
2025-04-05 13:56:23,454 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:56:23] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:56:29,358 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/user_manager.py', reloading
2025-04-05 13:56:29,369 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/user_manager.py', reloading
2025-04-05 13:56:30,370 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 13:56:30,370 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 13:56:30,370 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 13:56:30,370 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 13:56:30,370 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 13:56:30 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 13:56:30,371 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 13:56:30 - INFO - [database.py:258] - Closing database connection
2025-04-05 13:56:30,371 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 13:56:30 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 13:56:31,284 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 13:56:34,417 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:56:34,418 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:56:34,418 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:56:34,418 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:56:34,418 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 13:56:34,425 [INFO] text2sql [app.py:64]: Debug logging enabled for SQL generator and agents
2025-04-05 13:56:34 - INFO - [app.py:64] - Debug logging enabled for SQL generator and agents
2025-04-05 13:56:34,426 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:56:34 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:56:34,427 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:56:34 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:56:34,430 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:56:34 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:56:34,431 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:56:34,431 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:56:34,431 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:56:34,431 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:56:34,431 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:56:34 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:56:34,432 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:56:34 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:56:34,432 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:56:34 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:56:34,432 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:56:34,432 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:56:34,433 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:56:34,433 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:56:34,433 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:56:34 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:56:34,433 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:56:34 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:56:34,433 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:56:34 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:56:34,434 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:56:34,435 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:56:34,435 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:56:34,436 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:56:34,436 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 13:56:34 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 13:56:34,436 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:56:34 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 13:56:34,436 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 13:56:34 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 13:56:34,437 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 13:56:34 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 13:56:34,437 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 13:56:34 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 13:56:34,437 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:56:34 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:56:34,437 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 13:56:34,437 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 13:56:34,437 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 13:56:34,438 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 13:56:34,438 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:56:34 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 13:56:34,598 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 13:56:34,599 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 13:56:35,066 [INFO] text2sql [user_manager.py:38]: Verifying password: scrypt:32768:8:1$tD822WzLE9zgba3J$0367eda8678343e94179763c32bb505cb89dd390ca88d9b1408cea6470a4e227bc74b9776c774338fad934864da8f3a23f91f80e2320393ebef92f8e5bdf7125
2025-04-05 13:56:35 - INFO - [user_manager.py:38] - Verifying password: scrypt:32768:8:1$tD822WzLE9zgba3J$0367eda8678343e94179763c32bb505cb89dd390ca88d9b1408cea6470a4e227bc74b9776c774338fad934864da8f3a23f91f80e2320393ebef92f8e5bdf7125
2025-04-05 13:56:35,067 [INFO] text2sql [user_manager.py:39]: split values ['scrypt:32768:8:1', 'tD822WzLE9zgba3J', '0367eda8678343e94179763c32bb505cb89dd390ca88d9b1408cea6470a4e227bc74b9776c774338fad934864da8f3a23f91f80e2320393ebef92f8e5bdf7125']
2025-04-05 13:56:35 - INFO - [user_manager.py:39] - split values ['scrypt:32768:8:1', 'tD822WzLE9zgba3J', '0367eda8678343e94179763c32bb505cb89dd390ca88d9b1408cea6470a4e227bc74b9776c774338fad934864da8f3a23f91f80e2320393ebef92f8e5bdf7125']
2025-04-05 13:56:35,069 [ERROR] text2sql [user_manager.py:49]: Password verification error: too many values to unpack (expected 2)
Stack trace:
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/user_manager.py", line 40, in _verify_password
    salt, stored_hash = password_hash.split('$')
    ^^^^^^^^^^^^^^^^^
ValueError: too many values to unpack (expected 2)

2025-04-05 13:56:35 - ERROR - [user_manager.py:49] - Password verification error: too many values to unpack (expected 2)
Stack trace:
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/user_manager.py", line 40, in _verify_password
    salt, stored_hash = password_hash.split('$')
    ^^^^^^^^^^^^^^^^^
ValueError: too many values to unpack (expected 2)

2025-04-05 13:56:35,087 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:56:35] "POST /login HTTP/1.1" 200 -
2025-04-05 13:56:35,127 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 13:56:35] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 13:59:58,707 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/app.py', reloading
2025-04-05 13:59:58,708 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/app.py', reloading
2025-04-05 13:59:58,710 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/app.py', reloading
2025-04-05 13:59:59,711 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 13:59:59,711 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 13:59:59,712 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 13:59:59,712 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 13:59:59,712 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 13:59:59 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 13:59:59,713 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 13:59:59 - INFO - [database.py:258] - Closing database connection
2025-04-05 13:59:59,713 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 13:59:59 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 14:00:00,632 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 14:00:04,042 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:00:04,043 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:00:04,043 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:00:04,043 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:00:04,044 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 14:00:04,928 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 14:00:04,929 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 14:00:04,932 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 14:00:04,933 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 14:00:04,933 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 14:00:04 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 14:00:04,935 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 14:00:04 - INFO - [database.py:258] - Closing database connection
2025-04-05 14:00:04,935 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 14:00:04 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 14:00:44,791 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:00:44,792 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:00:44,792 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:00:44,792 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:00:44,792 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 14:00:44,799 [INFO] text2sql [app.py:66]: Debug logging enabled for SQL generator and agents
2025-04-05 14:00:44 - INFO - [app.py:66] - Debug logging enabled for SQL generator and agents
2025-04-05 14:00:44,800 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:00:44 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:00:44,801 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:00:44 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:00:44,803 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:00:44 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:00:44,804 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:00:44,804 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:00:44,804 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:00:44,804 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:00:44,804 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:00:44 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:00:44,804 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:00:44 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:00:44,805 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:00:44 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:00:44,805 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:00:44,805 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:00:44,805 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:00:44,805 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:00:44,806 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:00:44 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:00:44,806 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:00:44 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:00:44,806 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:00:44 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:00:44,807 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:00:44,807 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:00:44,807 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:00:44,807 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:00:44,808 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 14:00:44 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 14:00:44,808 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:00:44 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:00:44,808 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:00:44 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:00:44,811 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:00:44 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:00:44,812 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 14:00:44 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 14:00:44,812 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:00:44 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:00:44,812 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:00:44,813 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:00:44,813 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:00:44,813 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:00:44,813 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:00:44 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:00:44,995 [INFO] werkzeug [_internal.py:97]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.27.251.157:5000
2025-04-05 14:00:44,995 [INFO] werkzeug [_internal.py:97]: [33mPress CTRL+C to quit[0m
2025-04-05 14:00:44,999 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 14:00:48,450 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 14:00:48,450 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 14:00:48,450 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 14:00:48,450 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 14:00:48,451 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 14:00:48 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 14:00:48,451 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 14:00:48 - INFO - [database.py:258] - Closing database connection
2025-04-05 14:00:48,451 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 14:00:48 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 14:02:52,068 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 14:03:46,625 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 14:04:42,298 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 14:04:42,314 [ERROR] text2sql [user_manager.py:651]: Error initializing roles and permissions: (sqlite3.OperationalError) no such table: permissions
[SQL: SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.description AS permissions_description 
FROM permissions 
WHERE permissions.name = ?
 LIMIT ? OFFSET ?]
[parameters: ('view_index', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-04-05 14:06:50,091 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 14:06:50,123 [ERROR] text2sql [user_manager.py:96]: Error creating user: Username 'admin' already exists
2025-04-05 14:07:16,564 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:07:16,564 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:07:16,564 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:07:16,564 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:07:16,565 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 14:07:16,572 [INFO] text2sql [app.py:66]: Debug logging enabled for SQL generator and agents
2025-04-05 14:07:16 - INFO - [app.py:66] - Debug logging enabled for SQL generator and agents
2025-04-05 14:07:16,573 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:07:16 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:07:16,573 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:07:16 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:07:16,576 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:07:16 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:07:16,576 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:07:16,576 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:07:16,576 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:07:16,577 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:07:16,577 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:07:16 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:07:16,577 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:07:16 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:07:16,577 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:07:16 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:07:16,578 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:07:16,578 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:07:16,578 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:07:16,578 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:07:16,578 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:07:16 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:07:16,579 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:07:16 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:07:16,579 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:07:16 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:07:16,579 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:07:16,580 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:07:16,580 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:07:16,580 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:07:16,580 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 14:07:16 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 14:07:16,580 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:07:16 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:07:16,580 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:07:16 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:07:16,582 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:07:16 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:07:16,582 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 14:07:16 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 14:07:16,583 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:07:16 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:07:16,583 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:07:16,583 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:07:16,583 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:07:16,583 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:07:16,583 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:07:16 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:07:16,741 [INFO] werkzeug [_internal.py:97]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.27.251.157:5000
2025-04-05 14:07:16,741 [INFO] werkzeug [_internal.py:97]: [33mPress CTRL+C to quit[0m
2025-04-05 14:07:16,744 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 14:07:20,521 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:07:20,522 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:07:20,522 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:07:20,522 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:07:20,522 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 14:07:20,529 [INFO] text2sql [app.py:66]: Debug logging enabled for SQL generator and agents
2025-04-05 14:07:20 - INFO - [app.py:66] - Debug logging enabled for SQL generator and agents
2025-04-05 14:07:20,530 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:07:20 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:07:20,530 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:07:20 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:07:20,532 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:07:20 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:07:20,533 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:07:20,533 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:07:20,533 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:07:20,533 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:07:20,533 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:07:20 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:07:20,533 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:07:20 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:07:20,534 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:07:20 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:07:20,534 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:07:20,534 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:07:20,534 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:07:20,534 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:07:20,534 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:07:20 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:07:20,535 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:07:20 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:07:20,535 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:07:20 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:07:20,535 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:07:20,536 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:07:20,536 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:07:20,536 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:07:20,536 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 14:07:20 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 14:07:20,536 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:07:20 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:07:20,536 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:07:20 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:07:20,539 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:07:20 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:07:20,539 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 14:07:20 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 14:07:20,539 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:07:20 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:07:20,539 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:07:20,540 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:07:20,540 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:07:20,540 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:07:20,540 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:07:20 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:07:20,656 [ERROR] text2sql [user_manager.py:152]: Error deleting user: User not found
2025-04-05 14:07:20 - ERROR - [user_manager.py:152] - Error deleting user: User not found
2025-04-05 14:07:21,390 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 14:07:21,390 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 14:07:21,390 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 14:07:21,390 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 14:07:21,390 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 14:07:21 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 14:07:21,391 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 14:07:21 - INFO - [database.py:258] - Closing database connection
2025-04-05 14:07:21,391 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 14:07:21 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 14:07:38,862 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:07:38,862 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:07:38,862 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:07:38,862 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:07:38,863 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 14:07:38,872 [INFO] text2sql [app.py:66]: Debug logging enabled for SQL generator and agents
2025-04-05 14:07:38 - INFO - [app.py:66] - Debug logging enabled for SQL generator and agents
2025-04-05 14:07:38,873 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:07:38 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:07:38,873 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:07:38 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:07:38,877 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:07:38 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:07:38,877 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:07:38,878 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:07:38,878 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:07:38,878 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:07:38,878 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:07:38 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:07:38,878 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:07:38 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:07:38,879 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:07:38 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:07:38,879 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:07:38,880 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:07:38,880 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:07:38,880 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:07:38,881 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:07:38 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:07:38,881 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:07:38 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:07:38,882 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:07:38 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:07:38,882 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:07:38,883 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:07:38,883 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:07:38,883 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:07:38,883 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 14:07:38 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 14:07:38,884 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:07:38 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:07:38,885 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:07:38 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:07:38,888 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:07:38 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:07:38,889 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 14:07:38 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 14:07:38,889 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:07:38 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:07:38,889 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:07:38,890 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:07:38,890 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:07:38,890 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:07:38,890 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:07:38 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:07:39,032 [INFO] werkzeug [_internal.py:97]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.27.251.157:5000
2025-04-05 14:07:39,033 [INFO] werkzeug [_internal.py:97]: [33mPress CTRL+C to quit[0m
2025-04-05 14:07:39,037 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 14:07:43,533 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:07:43,533 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:07:43,533 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:07:43,534 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:07:43,534 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 14:07:43,544 [INFO] text2sql [app.py:66]: Debug logging enabled for SQL generator and agents
2025-04-05 14:07:43 - INFO - [app.py:66] - Debug logging enabled for SQL generator and agents
2025-04-05 14:07:43,545 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:07:43 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:07:43,545 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:07:43 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:07:43,549 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:07:43 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:07:43,549 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:07:43,549 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:07:43,550 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:07:43,550 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:07:43,550 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:07:43 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:07:43,550 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:07:43 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:07:43,551 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:07:43 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:07:43,551 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:07:43,552 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:07:43,552 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:07:43,552 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:07:43,552 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:07:43 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:07:43,553 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:07:43 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:07:43,553 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:07:43 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:07:43,554 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:07:43,554 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:07:43,554 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:07:43,554 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:07:43,555 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 14:07:43 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 14:07:43,555 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:07:43 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:07:43,555 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:07:43 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:07:43,558 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:07:43 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:07:43,559 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 14:07:43 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 14:07:43,559 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:07:43 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:07:43,560 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:07:43,560 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:07:43,560 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:07:43,561 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:07:43,561 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:07:43 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:07:43,697 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 14:07:43,698 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 14:07:44,419 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:07:44] "[32mGET / HTTP/1.1[0m" 302 -
2025-04-05 14:07:44,439 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:07:44] "GET /login?next=http://localhost:5000/ HTTP/1.1" 200 -
2025-04-05 14:07:44,801 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:07:44] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 14:07:51,999 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:07:51] "POST /login HTTP/1.1" 200 -
2025-04-05 14:07:52,334 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:07:52] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 14:09:32,062 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/user_manager.py', reloading
2025-04-05 14:09:32,063 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/user_manager.py', reloading
2025-04-05 14:09:32,075 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/user_manager.py', reloading
2025-04-05 14:09:33,077 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 14:09:33,078 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 14:09:33,078 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 14:09:33,078 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 14:09:33,078 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 14:09:33 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 14:09:33,079 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 14:09:33 - INFO - [database.py:258] - Closing database connection
2025-04-05 14:09:33,079 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 14:09:33 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 14:09:33,904 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 14:09:37,019 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:09:37,019 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:09:37,019 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:09:37,019 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:09:37,020 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 14:09:37,027 [INFO] text2sql [app.py:66]: Debug logging enabled for SQL generator and agents
2025-04-05 14:09:37 - INFO - [app.py:66] - Debug logging enabled for SQL generator and agents
2025-04-05 14:09:37,028 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:09:37 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:09:37,029 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:09:37 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:09:37,031 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:09:37 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:09:37,032 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:09:37,032 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:09:37,032 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:09:37,032 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:09:37,032 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:09:37 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:09:37,033 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:09:37 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:09:37,034 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:09:37 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:09:37,034 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:09:37,034 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:09:37,034 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:09:37,035 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:09:37,035 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:09:37 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:09:37,035 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:09:37 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:09:37,035 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:09:37 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:09:37,036 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:09:37,036 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:09:37,036 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:09:37,036 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:09:37,036 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 14:09:37 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 14:09:37,036 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:09:37 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:09:37,037 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:09:37 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:09:37,039 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:09:37 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:09:37,039 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 14:09:37 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 14:09:37,039 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:09:37 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:09:37,039 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:09:37,040 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:09:37,040 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:09:37,040 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:09:37,040 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:09:37 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:09:37,167 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 14:09:37,167 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 14:09:37,662 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:09:37] "POST /login HTTP/1.1" 200 -
2025-04-05 14:09:37,691 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:09:37] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 14:09:54,262 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/user_manager.py', reloading
2025-04-05 14:09:54,263 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/user_manager.py', reloading
2025-04-05 14:09:54,266 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/user_manager.py', reloading
2025-04-05 14:09:55,267 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 14:09:55,268 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 14:09:55,268 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 14:09:55,268 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 14:09:55,268 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 14:09:55 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 14:09:55,268 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 14:09:55 - INFO - [database.py:258] - Closing database connection
2025-04-05 14:09:55,269 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 14:09:55 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 14:09:56,094 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 14:10:01,179 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:10:01,180 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:10:01,180 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:10:01,181 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:10:01,182 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 14:10:01,200 [INFO] text2sql [app.py:66]: Debug logging enabled for SQL generator and agents
2025-04-05 14:10:01 - INFO - [app.py:66] - Debug logging enabled for SQL generator and agents
2025-04-05 14:10:01,204 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:10:01 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:10:01,204 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:10:01 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:10:01,213 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:10:01 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:10:01,214 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:10:01,215 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:10:01,215 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:10:01,216 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:10:01,216 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:10:01 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:10:01,217 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:10:01 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:10:01,218 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:10:01 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:10:01,219 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:10:01,219 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:10:01,220 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:10:01,220 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:10:01,221 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:10:01 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:10:01,221 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:10:01 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:10:01,223 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:10:01 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:10:01,225 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:10:01,226 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:10:01,228 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:10:01,229 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:10:01,229 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 14:10:01 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 14:10:01,230 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:10:01 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:10:01,231 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:10:01 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:10:01,237 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:10:01 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:10:01,238 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 14:10:01 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 14:10:01,238 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:10:01 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:10:01,239 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:10:01,240 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:10:01,242 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:10:01,243 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:10:01,243 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:10:01 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:10:01,543 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 14:10:01,545 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 14:10:03,250 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:10:03] "POST /login HTTP/1.1" 200 -
2025-04-05 14:10:03,305 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:10:03] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 14:10:13,397 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:10:13] "[32mGET / HTTP/1.1[0m" 302 -
2025-04-05 14:10:13,655 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:10:13] "GET /login?next=http://localhost:5000/ HTTP/1.1" 200 -
2025-04-05 14:10:13,708 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:10:13] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 14:10:17,767 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:10:17] "POST /login HTTP/1.1" 200 -
2025-04-05 14:10:17,985 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:10:17] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 14:11:38,500 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/auth_routes.py', reloading
2025-04-05 14:11:38,502 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/auth_routes.py', reloading
2025-04-05 14:11:38,504 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/auth_routes.py', reloading
2025-04-05 14:11:39,506 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 14:11:39,506 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 14:11:39,507 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 14:11:39,507 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 14:11:39,507 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 14:11:39 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 14:11:39,508 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 14:11:39 - INFO - [database.py:258] - Closing database connection
2025-04-05 14:11:39,508 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 14:11:39 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 14:11:40,362 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 14:11:45,936 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:11:45,937 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:11:45,937 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:11:45,937 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:11:45,942 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 14:11:45,958 [INFO] text2sql [app.py:66]: Debug logging enabled for SQL generator and agents
2025-04-05 14:11:45 - INFO - [app.py:66] - Debug logging enabled for SQL generator and agents
2025-04-05 14:11:45,960 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:11:45 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:11:45,960 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:11:45 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:11:45,965 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:11:45 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:11:45,965 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:11:45,967 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:11:45,967 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:11:45,967 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:11:45,968 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:11:45 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:11:45,968 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:11:45 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:11:45,969 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:11:45 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:11:45,970 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:11:45,970 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:11:45,970 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:11:45,971 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:11:45,971 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:11:45 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:11:45,972 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:11:45 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:11:45,972 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:11:45 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:11:45,973 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:11:45,973 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:11:45,973 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:11:45,974 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:11:45,974 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 14:11:45 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 14:11:45,974 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:11:45 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:11:45,975 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:11:45 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:11:45,978 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:11:45 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:11:45,978 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 14:11:45 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 14:11:45,979 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:11:45 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:11:45,979 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:11:45,980 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:11:45,980 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:11:45,980 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:11:45,981 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:11:45 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:11:46,150 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 14:11:46,151 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 14:11:47,155 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:11:47] "[32mGET / HTTP/1.1[0m" 302 -
2025-04-05 14:11:47,180 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:11:47] "GET /login?next=http://localhost:5000/ HTTP/1.1" 200 -
2025-04-05 14:11:47,560 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:11:47] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 14:11:51,680 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:11:51] "[35m[1mPOST /login HTTP/1.1[0m" 500 -
2025-04-05 14:11:52,019 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:11:52] "GET /login?__debugger__=yes&cmd=resource&f=style.css HTTP/1.1" 200 -
2025-04-05 14:11:52,024 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:11:52] "GET /login?__debugger__=yes&cmd=resource&f=debugger.js HTTP/1.1" 200 -
2025-04-05 14:11:52,275 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:11:52] "GET /login?__debugger__=yes&cmd=resource&f=console.png&s=83wy808Oxl461fHsgBz2 HTTP/1.1" 200 -
2025-04-05 14:11:52,363 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:11:52] "GET /login?__debugger__=yes&cmd=resource&f=console.png HTTP/1.1" 200 -
2025-04-05 14:12:07,424 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/auth_routes.py', reloading
2025-04-05 14:12:07,425 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/auth_routes.py', reloading
2025-04-05 14:12:07,436 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/auth_routes.py', reloading
2025-04-05 14:12:08,437 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 14:12:08,437 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 14:12:08,437 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 14:12:08,437 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 14:12:08,437 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 14:12:08 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 14:12:08,438 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 14:12:08 - INFO - [database.py:258] - Closing database connection
2025-04-05 14:12:08,438 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 14:12:08 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 14:12:09,275 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 14:12:12,917 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:12:12,918 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:12:12,927 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:12:12,928 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:12:12,932 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 14:12:12,944 [INFO] text2sql [app.py:66]: Debug logging enabled for SQL generator and agents
2025-04-05 14:12:12 - INFO - [app.py:66] - Debug logging enabled for SQL generator and agents
2025-04-05 14:12:12,945 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:12:12 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:12:12,946 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:12:12 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:12:12,949 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:12:12 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:12:12,949 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:12:12,950 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:12:12,950 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:12:12,950 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:12:12,951 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:12:12 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:12:12,951 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:12:12 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:12:12,952 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:12:12 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:12:12,952 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:12:12,953 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:12:12,953 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:12:12,953 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:12:12,954 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:12:12 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:12:12,954 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:12:12 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:12:12,955 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:12:12 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:12:12,955 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:12:12,955 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:12:12,956 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:12:12,956 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:12:12,956 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 14:12:12 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 14:12:12,956 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:12:12 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:12:12,956 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:12:12 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:12:12,959 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:12:12 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:12:12,960 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 14:12:12 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 14:12:12,960 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:12:12 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:12:12,960 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:12:12,961 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:12:12,961 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:12:12,962 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:12:12,963 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:12:12 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:12:13,121 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 14:12:13,121 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 14:12:14,533 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:12:14] "GET /login HTTP/1.1" 200 -
2025-04-05 14:12:14,589 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:12:14] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 14:12:19,978 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:12:19] "POST /login HTTP/1.1" 200 -
2025-04-05 14:12:20,204 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:12:20] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 14:12:31,594 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/routes/auth_routes.py', reloading
2025-04-05 14:12:32,595 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 14:12:32,595 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 14:12:32,595 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 14:12:32,596 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 14:12:32,596 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 14:12:32 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 14:12:32,596 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 14:12:32 - INFO - [database.py:258] - Closing database connection
2025-04-05 14:12:32,596 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 14:12:32 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 14:12:33,457 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 14:12:38,047 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:12:38,047 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:12:38,048 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:12:38,048 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:12:38,052 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 14:12:38,063 [INFO] text2sql [app.py:66]: Debug logging enabled for SQL generator and agents
2025-04-05 14:12:38 - INFO - [app.py:66] - Debug logging enabled for SQL generator and agents
2025-04-05 14:12:38,066 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:12:38 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:12:38,067 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:12:38 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:12:38,071 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:12:38 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:12:38,071 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:12:38,071 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:12:38,072 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:12:38,072 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:12:38,072 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:12:38 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:12:38,073 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:12:38 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:12:38,073 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:12:38 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:12:38,074 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:12:38,074 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:12:38,075 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:12:38,075 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:12:38,075 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:12:38 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:12:38,076 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:12:38 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:12:38,077 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:12:38 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:12:38,077 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:12:38,078 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:12:38,078 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:12:38,078 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:12:38,078 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 14:12:38 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 14:12:38,079 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:12:38 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:12:38,079 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:12:38 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:12:38,083 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:12:38 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:12:38,083 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 14:12:38 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 14:12:38,084 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:12:38 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:12:38,084 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:12:38,085 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:12:38,085 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:12:38,086 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:12:38,086 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:12:38 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:12:38,250 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 14:12:38,250 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 14:12:39,035 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:12:39] "POST /login HTTP/1.1" 200 -
2025-04-05 14:12:39,089 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:12:39] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 14:12:58,469 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/user_manager.py', reloading
2025-04-05 14:12:58,469 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/user_manager.py', reloading
2025-04-05 14:12:58,481 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/user_manager.py', reloading
2025-04-05 14:12:59,482 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 14:12:59,483 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 14:12:59,483 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 14:12:59,483 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 14:12:59,484 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 14:12:59 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 14:12:59,484 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 14:12:59 - INFO - [database.py:258] - Closing database connection
2025-04-05 14:12:59,485 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 14:12:59 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 14:13:00,267 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 14:13:05,511 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:13:05,511 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:13:05,511 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:13:05,511 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:13:05,512 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 14:13:05,521 [INFO] text2sql [app.py:66]: Debug logging enabled for SQL generator and agents
2025-04-05 14:13:05 - INFO - [app.py:66] - Debug logging enabled for SQL generator and agents
2025-04-05 14:13:05,523 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:13:05 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:13:05,524 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:13:05 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:13:05,527 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:13:05 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:13:05,528 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:13:05,528 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:13:05,528 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:13:05,529 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:13:05,529 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:13:05 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:13:05,529 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:13:05 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:13:05,530 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:13:05 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:13:05,530 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:13:05,530 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:13:05,531 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:13:05,531 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:13:05,531 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:13:05 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:13:05,531 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:13:05 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:13:05,532 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:13:05 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:13:05,532 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:13:05,532 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:13:05,533 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:13:05,533 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:13:05,533 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 14:13:05 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 14:13:05,533 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:13:05 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:13:05,534 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:13:05 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:13:05,538 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:13:05 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:13:05,538 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 14:13:05 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 14:13:05,539 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:13:05 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:13:05,539 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:13:05,540 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:13:05,540 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:13:05,540 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:13:05,540 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:13:05 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:13:05,753 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 14:13:05,754 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 14:13:08,068 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:13:08] "POST /login HTTP/1.1" 200 -
2025-04-05 14:13:08,296 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:13:08] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 14:13:22,658 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 14:13:22,694 [ERROR] text2sql [user_manager.py:89]: Error creating user: Username 'admin' already exists
2025-04-05 14:14:13,945 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/init_db.py', reloading
2025-04-05 14:14:13,946 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/init_db.py', reloading
2025-04-05 14:14:13,957 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/init_db.py', reloading
2025-04-05 14:14:14,958 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 14:14:14,959 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 14:14:14,959 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 14:14:14,959 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 14:14:14,960 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 14:14:14 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 14:14:14,960 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 14:14:14 - INFO - [database.py:258] - Closing database connection
2025-04-05 14:14:14,960 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 14:14:14 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 14:14:15,758 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 14:14:17,072 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 14:14:17,134 [ERROR] text2sql [user_manager.py:89]: Error creating user: Username 'admin' already exists
2025-04-05 14:14:20,288 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:14:20,288 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:14:20,289 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:14:20,289 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:14:20,290 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 14:14:20,298 [INFO] text2sql [app.py:66]: Debug logging enabled for SQL generator and agents
2025-04-05 14:14:20 - INFO - [app.py:66] - Debug logging enabled for SQL generator and agents
2025-04-05 14:14:20,299 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:14:20 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:14:20,299 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:14:20 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:14:20,302 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:14:20 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:14:20,302 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:14:20,303 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:14:20,303 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:14:20,303 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:14:20,303 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:14:20 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:14:20,303 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:14:20 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:14:20,304 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:14:20 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:14:20,304 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:14:20,304 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:14:20,304 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:14:20,305 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:14:20,305 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:14:20 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:14:20,305 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:14:20 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:14:20,305 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:14:20 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:14:20,306 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:14:20,306 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:14:20,306 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:14:20,307 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:14:20,307 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 14:14:20 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 14:14:20,307 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:14:20 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:14:20,307 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:14:20 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:14:20,309 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:14:20 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:14:20,309 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 14:14:20 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 14:14:20,310 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:14:20 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:14:20,310 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:14:20,310 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:14:20,310 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:14:20,311 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:14:20,311 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:14:20 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:14:20,447 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 14:14:20,448 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 14:15:43,339 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/init_db.py', reloading
2025-04-05 14:15:43,347 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/init_db.py', reloading
2025-04-05 14:15:43,352 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/init_db.py', reloading
2025-04-05 14:15:44,354 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 14:15:44,354 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 14:15:44,354 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 14:15:44,354 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 14:15:44,355 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 14:15:44 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 14:15:44,355 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 14:15:44 - INFO - [database.py:258] - Closing database connection
2025-04-05 14:15:44,355 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 14:15:44 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 14:15:45,198 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 14:15:46,854 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 14:15:46,925 [ERROR] text2sql [user_manager.py:89]: Error creating user: Username 'admin' already exists
2025-04-05 14:15:49,487 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:15:49,487 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:15:49,487 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:15:49,488 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:15:49,489 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 14:15:49,497 [INFO] text2sql [app.py:66]: Debug logging enabled for SQL generator and agents
2025-04-05 14:15:49 - INFO - [app.py:66] - Debug logging enabled for SQL generator and agents
2025-04-05 14:15:49,499 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:15:49 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:15:49,499 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:15:49 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:15:49,502 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:15:49 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:15:49,503 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:15:49,503 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:15:49,503 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:15:49,503 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:15:49,503 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:15:49 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:15:49,504 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:15:49 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:15:49,504 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:15:49 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:15:49,504 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:15:49,505 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:15:49,505 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:15:49,505 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:15:49,505 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:15:49 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:15:49,505 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:15:49 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:15:49,506 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:15:49 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:15:49,506 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:15:49,507 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:15:49,507 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:15:49,507 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:15:49,507 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 14:15:49 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 14:15:49,508 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:15:49 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:15:49,508 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:15:49 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:15:49,510 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:15:49 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:15:49,511 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 14:15:49 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 14:15:49,511 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:15:49 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:15:49,511 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:15:49,512 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:15:49,512 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:15:49,512 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:15:49,512 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:15:49 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:15:49,651 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 14:15:49,651 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 14:16:01,040 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/init_db.py', reloading
2025-04-05 14:16:01,041 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/init_db.py', reloading
2025-04-05 14:16:01,053 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/init_db.py', reloading
2025-04-05 14:16:02,055 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 14:16:02,055 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 14:16:02,056 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 14:16:02,056 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 14:16:02,056 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 14:16:02 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 14:16:02,057 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 14:16:02 - INFO - [database.py:258] - Closing database connection
2025-04-05 14:16:02,057 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 14:16:02 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 14:16:03,071 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 14:16:05,040 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 14:16:05,094 [ERROR] text2sql [user_manager.py:89]: Error creating user: Username 'admin' already exists
2025-04-05 14:16:08,528 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:16:08,528 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:16:08,528 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:16:08,529 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:16:08,529 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 14:16:08,537 [INFO] text2sql [app.py:66]: Debug logging enabled for SQL generator and agents
2025-04-05 14:16:08 - INFO - [app.py:66] - Debug logging enabled for SQL generator and agents
2025-04-05 14:16:08,539 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:16:08 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:16:08,539 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:16:08 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:16:08,542 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:16:08 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:16:08,542 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:16:08,542 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:16:08,543 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:16:08,543 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:16:08,543 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:16:08 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:16:08,543 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:16:08 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:16:08,543 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:16:08 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:16:08,544 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:16:08,544 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:16:08,544 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:16:08,545 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:16:08,545 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:16:08 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:16:08,545 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:16:08 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:16:08,545 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:16:08 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:16:08,546 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:16:08,546 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:16:08,546 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:16:08,547 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:16:08,547 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 14:16:08 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 14:16:08,547 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:16:08 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:16:08,547 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:16:08 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:16:08,550 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:16:08 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:16:08,550 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 14:16:08 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 14:16:08,551 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:16:08 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:16:08,551 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:16:08,551 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:16:08,552 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:16:08,552 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:16:08,552 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:16:08 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:16:08,699 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 14:16:08,699 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 14:16:09,620 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/init_db.py', reloading
2025-04-05 14:16:09,638 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 14:16:09,639 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 14:16:09,639 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 14:16:09,640 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 14:16:09,640 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 14:16:09 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 14:16:09,640 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 14:16:09 - INFO - [database.py:258] - Closing database connection
2025-04-05 14:16:09,641 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 14:16:09 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 14:16:10,627 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 14:16:14,916 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:16:14,916 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:16:14,926 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:16:14,927 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:16:14,928 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 14:16:14,938 [INFO] text2sql [app.py:66]: Debug logging enabled for SQL generator and agents
2025-04-05 14:16:14 - INFO - [app.py:66] - Debug logging enabled for SQL generator and agents
2025-04-05 14:16:14,940 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:16:14 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:16:14,940 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:16:14 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:16:14,944 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:16:14 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:16:14,944 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:16:14,945 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:16:14,945 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:16:14,945 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:16:14,945 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:16:14 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:16:14,946 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:16:14 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:16:14,947 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:16:14 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:16:14,947 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:16:14,947 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:16:14,948 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:16:14,948 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:16:14,948 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:16:14 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:16:14,948 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:16:14 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:16:14,949 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:16:14 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:16:14,949 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:16:14,950 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:16:14,950 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:16:14,950 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:16:14,950 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 14:16:14 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 14:16:14,951 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:16:14 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:16:14,951 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:16:14 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:16:14,954 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:16:14 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:16:14,954 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 14:16:14 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 14:16:14,955 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:16:14 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:16:14,955 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:16:14,955 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:16:14,955 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:16:14,956 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:16:14,956 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:16:14 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:16:15,107 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 14:16:15,107 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 14:17:41,627 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/user_manager.py', reloading
2025-04-05 14:17:41,638 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/user_manager.py', reloading
2025-04-05 14:17:43,224 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 14:17:43,225 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 14:17:43,225 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 14:17:43,225 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 14:17:43,226 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 14:17:43 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 14:17:43,226 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 14:17:43 - INFO - [database.py:258] - Closing database connection
2025-04-05 14:17:43,227 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 14:17:43 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 14:17:44,369 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 14:17:45,858 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 14:17:45,918 [ERROR] text2sql [user_manager.py:89]: Error creating user: Username 'admin' already exists
2025-04-05 14:17:49,393 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:17:49,393 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:17:49,394 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:17:49,394 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:17:49,395 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 14:17:49,404 [INFO] text2sql [app.py:66]: Debug logging enabled for SQL generator and agents
2025-04-05 14:17:49 - INFO - [app.py:66] - Debug logging enabled for SQL generator and agents
2025-04-05 14:17:49,405 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:17:49 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:17:49,406 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:17:49 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:17:49,408 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:17:49 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:17:49,409 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:17:49,409 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:17:49,409 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:17:49,409 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:17:49,410 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:17:49 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:17:49,410 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:17:49 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:17:49,411 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:17:49 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:17:49,411 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:17:49,411 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:17:49,412 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:17:49,412 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:17:49,412 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:17:49 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:17:49,413 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:17:49 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:17:49,414 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:17:49 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:17:49,414 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:17:49,415 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:17:49,415 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:17:49,415 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:17:49,415 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 14:17:49 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 14:17:49,415 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:17:49 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:17:49,416 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:17:49 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:17:49,418 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:17:49 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:17:49,418 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 14:17:49 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 14:17:49,418 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:17:49 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:17:49,419 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:17:49,419 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:17:49,419 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:17:49,419 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:17:49,420 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:17:49 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:17:49,565 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 14:17:49,565 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 14:18:10,215 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:10] "[32mGET / HTTP/1.1[0m" 302 -
2025-04-05 14:18:10,487 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:10] "GET /login?next=http://localhost:5000/ HTTP/1.1" 200 -
2025-04-05 14:18:10,527 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:10] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 14:18:18,297 [INFO] text2sql [user_manager.py:36]: Verifying password: f392c0d46a59a4b5$22370a5678a2b92974c90bce029d8ad1bcc138aaa92ce5f25ae846f78bf0271f
2025-04-05 14:18:18 - INFO - [user_manager.py:36] - Verifying password: f392c0d46a59a4b5$22370a5678a2b92974c90bce029d8ad1bcc138aaa92ce5f25ae846f78bf0271f
2025-04-05 14:18:18,309 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:18] "[32mPOST /login HTTP/1.1[0m" 302 -
2025-04-05 14:18:18,651 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:18] "GET / HTTP/1.1" 200 -
2025-04-05 14:18:18,871 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:18] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 14:18:18,990 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:18] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 14:18:19,000 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:18] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 14:18:19,002 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:19] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 14:18:19,003 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:19] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 14:18:19,004 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:19] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 14:18:19,179 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:19] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 14:18:19,295 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:19] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 14:18:19,631 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:19] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 14:18:22,635 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:22] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 14:18:22,973 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:22] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 14:18:22,991 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:22] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 14:18:23,254 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:23] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 14:18:23,338 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:23] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 14:18:26,086 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:26] "GET /admin/schema HTTP/1.1" 200 -
2025-04-05 14:18:26,420 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:26] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 14:18:26,441 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:26] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 14:18:26,442 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:26] "[36mGET /static/css/admin-schema.css HTTP/1.1[0m" 304 -
2025-04-05 14:18:26,443 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:26] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 14:18:26,447 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:26] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 14:18:26,448 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:26] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 14:18:26,745 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:26] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 14:18:26,767 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:26] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 14:18:26,772 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:26] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 14:18:26,774 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:26] "[36mGET /static/js/admin/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 14:18:26,929 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:26] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 14:18:27,112 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:27] "GET /admin/api/schema/workspaces HTTP/1.1" 200 -
2025-04-05 14:18:27,119 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:27] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-05 14:18:27,124 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:27] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-05 14:18:28,804 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:28] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 14:18:29,146 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:29] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 14:18:29,151 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:29] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 14:18:29,381 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:29] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 14:18:29,494 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:29] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 14:18:43,504 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:43] "GET /admin/users HTTP/1.1" 200 -
2025-04-05 14:18:43,843 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:43] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 14:18:43,850 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:43] "[36mGET /static/js/admin/users.js HTTP/1.1[0m" 304 -
2025-04-05 14:18:45,614 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:45] "GET /admin/users HTTP/1.1" 200 -
2025-04-05 14:18:45,960 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:45] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 14:18:45,963 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:45] "[36mGET /static/js/admin/users.js HTTP/1.1[0m" 304 -
2025-04-05 14:18:49,445 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:49] "GET /admin/users HTTP/1.1" 200 -
2025-04-05 14:18:49,781 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:49] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 14:18:49,784 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:49] "[36mGET /static/js/admin/users.js HTTP/1.1[0m" 304 -
2025-04-05 14:18:50,987 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:50] "GET /admin/roles HTTP/1.1" 200 -
2025-04-05 14:18:51,328 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:51] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 14:18:51,342 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:51] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-05 14:18:52,476 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:52] "GET /admin/users HTTP/1.1" 200 -
2025-04-05 14:18:52,806 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:52] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 14:18:52,820 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:52] "[36mGET /static/js/admin/users.js HTTP/1.1[0m" 304 -
2025-04-05 14:18:53,228 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:53] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 14:18:53,562 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:53] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 14:18:53,571 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:53] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 14:18:53,820 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:53] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 14:18:53,909 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:53] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 14:18:55,685 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:55] "GET /admin/audit-logs HTTP/1.1" 200 -
2025-04-05 14:18:56,013 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:56] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 14:18:56,024 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:18:56] "[36mGET /static/js/admin/audit-logs.js HTTP/1.1[0m" 304 -
2025-04-05 14:19:07,844 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:07] "GET / HTTP/1.1" 200 -
2025-04-05 14:19:08,203 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:08] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 14:19:08,210 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:08] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 14:19:08,211 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:08] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 14:19:08,219 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:08] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 14:19:08,222 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:08] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 14:19:08,226 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:08] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 14:19:08,519 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:08] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 14:19:08,538 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:08] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 14:19:08,876 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:08] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 14:19:10,544 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:10] "GET /api/tables/suggestions?workspace=Customer HTTP/1.1" 200 -
2025-04-05 14:19:12,235 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:12] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 14:19:12,814 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:12] "GET /samples HTTP/1.1" 200 -
2025-04-05 14:19:13,168 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:13] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 14:19:13,175 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:13] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 14:19:13,177 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:13] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 14:19:13,181 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:13] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 14:19:13,183 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:13] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 14:19:13,186 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:13] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 14:19:13,479 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:13] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 14:19:13,492 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:13] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 14:19:13,494 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:13] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 14:19:13,809 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:13] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 14:19:13,811 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:13] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 14:19:13,812 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:13] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 14:19:13,820 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:19:13 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:19:13,821 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 14:19:13 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 14:19:13,822 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 14:19:13 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 14:19:13,825 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 0 samples (page 1, limit 10)
2025-04-05 14:19:13 - INFO - [feedback_manager.py:531] - Retrieved 0 samples (page 1, limit 10)
2025-04-05 14:19:13,826 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:13] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 14:19:14,719 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:14] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 14:19:15,052 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:15] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 14:19:15,058 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:15] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 14:19:15,317 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:15] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 14:19:15,386 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:15] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 14:19:16,265 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:16] "GET /admin/schema HTTP/1.1" 200 -
2025-04-05 14:19:16,605 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:16] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 14:19:16,625 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:16] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 14:19:16,628 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:16] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 14:19:16,632 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:16] "[36mGET /static/css/admin-schema.css HTTP/1.1[0m" 304 -
2025-04-05 14:19:16,633 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:16] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 14:19:16,635 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:16] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 14:19:16,928 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:16] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 14:19:16,942 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:16] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 14:19:16,949 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:16] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 14:19:16,955 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:16] "[36mGET /static/js/admin/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 14:19:17,096 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:17] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 14:19:17,268 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:17] "GET /admin/api/schema/workspaces HTTP/1.1" 200 -
2025-04-05 14:19:17,271 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:17] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-05 14:19:17,271 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:17] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-05 14:19:18,734 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:18] "GET /admin/api/schema/workspaces/dfd HTTP/1.1" 200 -
2025-04-05 14:19:19,700 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:19] "GET /admin/api/schema/workspaces/Customer HTTP/1.1" 200 -
2025-04-05 14:19:22,013 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:22] "GET /samples HTTP/1.1" 200 -
2025-04-05 14:19:22,350 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:22] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 14:19:22,359 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:22] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 14:19:22,360 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:22] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 14:19:22,361 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:22] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 14:19:22,367 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:22] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 14:19:22,373 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:22] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 14:19:22,660 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:22] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 14:19:22,666 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:22] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 14:19:22,670 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:22] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 14:19:22,854 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:22] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 14:19:22,983 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:22] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 14:19:22,985 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:22] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 14:19:22,998 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:19:22 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:19:22,999 [INFO] text2sql [app.py:250]: Schema requested for workspace: dfd
2025-04-05 14:19:22 - INFO - [app.py:250] - Schema requested for workspace: dfd
2025-04-05 14:19:23,001 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 14:19:23 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 14:19:23,004 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:23] "GET /api/schema?workspace=dfd HTTP/1.1" 200 -
2025-04-05 14:19:23,006 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.01s
2025-04-05 14:19:23 - INFO - [feedback_manager.py:47] - Database connection established in 0.01s
2025-04-05 14:19:23,010 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 0 samples (page 1, limit 10)
2025-04-05 14:19:23 - INFO - [feedback_manager.py:531] - Retrieved 0 samples (page 1, limit 10)
2025-04-05 14:19:23,012 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:23] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 14:19:26,050 [INFO] text2sql [app.py:250]: Schema requested for workspace: dfd
2025-04-05 14:19:26 - INFO - [app.py:250] - Schema requested for workspace: dfd
2025-04-05 14:19:26,053 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:19:26] "GET /api/schema?workspace=dfd HTTP/1.1" 200 -
2025-04-05 14:44:44,140 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:44:44] "GET / HTTP/1.1" 200 -
2025-04-05 14:44:44,388 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:44:44] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 14:44:44,474 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:44:44] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 14:44:44,479 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:44:44] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 14:44:44,487 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:44:44] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 14:44:44,488 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:44:44] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 14:44:44,490 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:44:44] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 14:44:44,689 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:44:44] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 14:44:44,781 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:44:44] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 14:44:45,114 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:44:45] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 14:44:49,615 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'get me all customers'
2025-04-05 14:44:49,616 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:44:49] "POST /api/query HTTP/1.1" 200 -
2025-04-05 14:44:49,617 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'get me all customers'
2025-04-05 14:44:49,619 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-05 14:44:49,620 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.00s
2025-04-05 14:44:49,621 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-05 14:44:49,622 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-05 14:44:49,623 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-05 14:44:49 - INFO - [database.py:44] - Attempting database connection
2025-04-05 14:44:49,635 [INFO] text2sql.database [database.py:48]: Database connection established in 0.01s
2025-04-05 14:44:49 - INFO - [database.py:48] - Database connection established in 0.01s
2025-04-05 14:44:49,637 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'get me all customers'
2025-04-05 14:44:49,637 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-05 14:44:49,638 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-05 14:44:49,638 [INFO] text2sql.llm_engine [llm_engine.py:55]: [TABLE] Completion generation started
2025-04-05 14:44:49 - INFO - [llm_engine.py:55] - [TABLE] Completion generation started
2025-04-05 14:44:50,428 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:44:50] "GET /api/query/progress/5d21cf91-5367-4d4b-b264-253b47cb576b HTTP/1.1" 200 -
2025-04-05 14:44:50,679 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:44:50] "GET /api/query/progress/5d21cf91-5367-4d4b-b264-253b47cb576b HTTP/1.1" 200 -
2025-04-05 14:44:50,924 [INFO] text2sql.llm_engine [llm_engine.py:92]: [TABLE] Completion generation completed in 1.29s
2025-04-05 14:44:50 - INFO - [llm_engine.py:92] - [TABLE] Completion generation completed in 1.29s
2025-04-05 14:44:50,926 [INFO] text2sql.llm_engine [llm_engine.py:93]: **************************
2025-04-05 14:44:50 - INFO - [llm_engine.py:93] - **************************
2025-04-05 14:44:50,929 [INFO] text2sql.agents.table [table_agent.py:69]: Raw model response: 'customers'
2025-04-05 14:44:50,931 [INFO] text2sql.agents.table [table_agent.py:90]: Table selection completed in 1.29s. Selected: customers
2025-04-05 14:44:50,932 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'get me all customers'
2025-04-05 14:44:50,933 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: customers
2025-04-05 14:44:50,934 [INFO] text2sql.agents.column [column_agent.py:38]: Only one table involved (customers). Skipping LLM call and including all columns.
2025-04-05 14:44:50,936 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 14:44:50 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 14:44:50,938 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 14:44:50 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 14:44:50,941 [INFO] text2sql.feedback [feedback_manager.py:267]: Stage 1: Vector search for 'get me all customers...'
2025-04-05 14:44:50 - INFO - [feedback_manager.py:267] - Stage 1: Vector search for 'get me all customers...'
2025-04-05 14:44:50,944 [INFO] text2sql.feedback [feedback_manager.py:62]: Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-05 14:44:50 - INFO - [feedback_manager.py:62] - Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-05 14:44:51,102 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:44:51] "GET /api/query/progress/5d21cf91-5367-4d4b-b264-253b47cb576b HTTP/1.1" 200 -
2025-04-05 14:44:51,901 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:44:51] "GET /api/query/progress/5d21cf91-5367-4d4b-b264-253b47cb576b HTTP/1.1" 200 -
2025-04-05 14:44:52,153 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:44:52] "GET /api/query/progress/5d21cf91-5367-4d4b-b264-253b47cb576b HTTP/1.1" 200 -
2025-04-05 14:44:52,583 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:44:52] "GET /api/query/progress/5d21cf91-5367-4d4b-b264-253b47cb576b HTTP/1.1" 200 -
2025-04-05 14:44:53,375 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:44:53] "GET /api/query/progress/5d21cf91-5367-4d4b-b264-253b47cb576b HTTP/1.1" 200 -
2025-04-05 14:44:53,618 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:44:53] "GET /api/query/progress/5d21cf91-5367-4d4b-b264-253b47cb576b HTTP/1.1" 200 -
2025-04-05 14:44:54,048 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:44:54] "GET /api/query/progress/5d21cf91-5367-4d4b-b264-253b47cb576b HTTP/1.1" 200 -
2025-04-05 14:44:54,099 [INFO] text2sql.feedback [feedback_manager.py:65]: Embedding model loaded in 3.16s
2025-04-05 14:44:54 - INFO - [feedback_manager.py:65] - Embedding model loaded in 3.16s
2025-04-05 14:44:54,278 [WARNING] text2sql.feedback [feedback_manager.py:324]: No candidates found from vector search
2025-04-05 14:44:54 - WARNING - [feedback_manager.py:324] - No candidates found from vector search
2025-04-05 14:44:54,279 [INFO] text2sql.azure [azure_client.py:35]: SQL generation started for query: 'get me all customers'
2025-04-05 14:44:54 - INFO - [azure_client.py:35] - SQL generation started for query: 'get me all customers'
2025-04-05 14:44:54,280 [INFO] text2sql.azure [azure_client.py:69]: Including schema information (587 chars)
2025-04-05 14:44:54 - INFO - [azure_client.py:69] - Including schema information (587 chars)
2025-04-05 14:44:54,281 [INFO] text2sql.azure [azure_client.py:104]: Including 3 SQL examples (no similarity examples found)
2025-04-05 14:44:54 - INFO - [azure_client.py:104] - Including 3 SQL examples (no similarity examples found)
2025-04-05 14:44:54,282 [INFO] text2sql.azure [azure_client.py:114]: PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some example queries and their SQL:\nQuestion: How many records are in the customers table?\nSQL: SELECT COUNT(*) AS record_count FROM customers\n\nQuestion: Get all columns from customers\nSQL: SELECT * FROM customers LIMIT 5\n\nQuestion: Get record from customers by customer_id\nSQL: SELECT * FROM customers WHERE customer_id = 1\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me all customers'}]
2025-04-05 14:44:54 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some example queries and their SQL:\nQuestion: How many records are in the customers table?\nSQL: SELECT COUNT(*) AS record_count FROM customers\n\nQuestion: Get all columns from customers\nSQL: SELECT * FROM customers LIMIT 5\n\nQuestion: Get record from customers by customer_id\nSQL: SELECT * FROM customers WHERE customer_id = 1\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me all customers'}]
2025-04-05 14:44:54,283 [INFO] text2sql.llm_engine [llm_engine.py:55]: [SQL_GEN] Completion generation started
2025-04-05 14:44:54 - INFO - [llm_engine.py:55] - [SQL_GEN] Completion generation started
2025-04-05 14:44:54,850 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:44:54] "GET /api/query/progress/5d21cf91-5367-4d4b-b264-253b47cb576b HTTP/1.1" 200 -
2025-04-05 14:44:55,106 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:44:55] "GET /api/query/progress/5d21cf91-5367-4d4b-b264-253b47cb576b HTTP/1.1" 200 -
2025-04-05 14:44:55,521 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:44:55] "GET /api/query/progress/5d21cf91-5367-4d4b-b264-253b47cb576b HTTP/1.1" 200 -
2025-04-05 14:44:56,159 [INFO] text2sql.llm_engine [llm_engine.py:92]: [SQL_GEN] Completion generation completed in 1.88s
2025-04-05 14:44:56 - INFO - [llm_engine.py:92] - [SQL_GEN] Completion generation completed in 1.88s
2025-04-05 14:44:56,160 [INFO] text2sql.llm_engine [llm_engine.py:93]: **************************
2025-04-05 14:44:56 - INFO - [llm_engine.py:93] - **************************
2025-04-05 14:44:56,163 [INFO] text2sql.azure [azure_client.py:150]: Parsing SQL from model response
2025-04-05 14:44:56 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-05 14:44:56,166 [INFO] text2sql.azure [azure_client.py:157]: Found SQL code block in response
2025-04-05 14:44:56 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-05 14:44:56,169 [INFO] text2sql.azure [azure_client.py:171]: Extracted SQL query (24 chars) and explanation (140 chars)
2025-04-05 14:44:56 - INFO - [azure_client.py:171] - Extracted SQL query (24 chars) and explanation (140 chars)
2025-04-05 14:44:56,172 [INFO] text2sql.azure [azure_client.py:124]: Generated SQL: SELECT * FROM customers;
2025-04-05 14:44:56 - INFO - [azure_client.py:124] - Generated SQL: SELECT * FROM customers;
2025-04-05 14:44:56,176 [INFO] text2sql.azure [azure_client.py:132]: SQL generation completed in 1.90s
2025-04-05 14:44:56 - INFO - [azure_client.py:132] - SQL generation completed in 1.90s
2025-04-05 14:44:56,180 [INFO] text2sql.database [database.py:65]: Executing SQL query: SELECT * FROM customers;
2025-04-05 14:44:56 - INFO - [database.py:65] - Executing SQL query: SELECT * FROM customers;
2025-04-05 14:44:56,196 [INFO] text2sql.database [database.py:86]: Query returned 5 rows with 11 columns
2025-04-05 14:44:56 - INFO - [database.py:86] - Query returned 5 rows with 11 columns
2025-04-05 14:44:56,215 [INFO] text2sql.database [database.py:95]: Query processing completed in 0.04s
2025-04-05 14:44:56 - INFO - [database.py:95] - Query processing completed in 0.04s
2025-04-05 14:44:56,220 [INFO] text2sql.sql_generator [sql_generator.py:376]: SQL generation completed in 6.60s
2025-04-05 14:44:56,221 [INFO] text2sql.sql_generator [sql_generator.py:125]: Query processing completed in 6.61s
2025-04-05 14:44:56,329 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:44:56] "GET /api/query/progress/5d21cf91-5367-4d4b-b264-253b47cb576b HTTP/1.1" 200 -
2025-04-05 14:45:02,497 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:45:02] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 14:45:02,845 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:45:02] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 14:45:02,849 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:45:02] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 14:45:03,080 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:45:03] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 14:45:03,185 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:45:03] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 14:45:04,765 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:45:04] "GET /admin/audit-logs HTTP/1.1" 200 -
2025-04-05 14:45:05,103 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:45:05] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 14:45:05,108 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:45:05] "[36mGET /static/js/admin/audit-logs.js HTTP/1.1[0m" 304 -
2025-04-05 14:45:06,217 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:45:06] "GET /admin/api/audit-logs/2 HTTP/1.1" 200 -
2025-04-05 14:45:10,184 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:45:10] "GET /admin/roles HTTP/1.1" 200 -
2025-04-05 14:45:10,442 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:45:10] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 14:45:10,515 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:45:10] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-05 14:45:12,748 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:45:12] "GET /admin/users HTTP/1.1" 200 -
2025-04-05 14:45:13,089 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:45:13] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 14:45:13,094 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:45:13] "[36mGET /static/js/admin/users.js HTTP/1.1[0m" 304 -
2025-04-05 14:45:13,834 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:45:13] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 14:45:14,168 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:45:14] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 14:45:14,175 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:45:14] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 14:45:14,431 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:45:14] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 14:45:14,513 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:45:14] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 14:45:20,247 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:45:20] "GET /admin/audit-logs HTTP/1.1" 200 -
2025-04-05 14:45:20,592 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:45:20] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 14:45:20,595 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:45:20] "[36mGET /static/js/admin/audit-logs.js HTTP/1.1[0m" 304 -
2025-04-05 14:46:58,752 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:46:58] "GET / HTTP/1.1" 200 -
2025-04-05 14:46:58,996 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:46:58] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 14:46:59,087 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:46:59] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 14:46:59,097 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:46:59] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 14:46:59,098 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:46:59] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 14:46:59,100 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:46:59] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 14:46:59,100 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:46:59] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 14:46:59,314 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:46:59] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 14:46:59,396 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:46:59] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 14:46:59,713 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:46:59] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 14:54:06,509 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:54:06] "GET / HTTP/1.1" 200 -
2025-04-05 14:54:06,715 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:54:06] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-05 14:54:06,878 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:54:06] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 14:54:06,884 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:54:06] "GET /static/js/core.js HTTP/1.1" 200 -
2025-04-05 14:54:06,885 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:54:06] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 14:54:06,895 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:54:06] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 14:54:06,897 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:54:06] "GET /static/js/results-display.js HTTP/1.1" 200 -
2025-04-05 14:54:07,022 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:54:07] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 14:54:07,180 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:54:07] "GET /static/js/dashboard.js HTTP/1.1" 200 -
2025-04-05 14:54:07,191 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:54:07] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 14:54:07,536 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:54:07] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 14:54:28,976 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'get me all customer information'
2025-04-05 14:54:28,976 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:54:28] "POST /api/query HTTP/1.1" 200 -
2025-04-05 14:54:28,977 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'get me all customer information'
2025-04-05 14:54:28,979 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-05 14:54:28,979 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.00s
2025-04-05 14:54:28,980 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-05 14:54:28,981 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-05 14:54:28,982 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-05 14:54:28 - INFO - [database.py:44] - Attempting database connection
2025-04-05 14:54:28,993 [INFO] text2sql.database [database.py:48]: Database connection established in 0.01s
2025-04-05 14:54:28 - INFO - [database.py:48] - Database connection established in 0.01s
2025-04-05 14:54:28,994 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'get me all customer information'
2025-04-05 14:54:28,995 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-05 14:54:28,995 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-05 14:54:28,996 [INFO] text2sql.llm_engine [llm_engine.py:55]: [TABLE] Completion generation started
2025-04-05 14:54:28 - INFO - [llm_engine.py:55] - [TABLE] Completion generation started
2025-04-05 14:54:29,222 [ERROR] text2sql.llm_engine [llm_engine.py:98]: [TABLE] Completion generation error after 0.23s: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/llm_engine.py", line 72, in generate_completion
    response = self.client.complete(
               ^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/ai/inference/_patch.py", line 728, in complete
    pipeline_response: PipelineResponse = self._client._pipeline.run(  # pylint: disable=protected-access
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 240, in run
    return first_node.send(pipeline_request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  [Previous line repeated 2 more times]
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/policies/_redirect.py", line 204, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/policies/_retry.py", line 573, in send
    raise err
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/policies/_retry.py", line 551, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  [Previous line repeated 3 more times]
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 128, in send
    self._sender.send(request.http_request, **request.context.options),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/transport/_requests_basic.py", line 409, in send
    raise error
azure.core.exceptions.ServiceResponseError: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
2025-04-05 14:54:29 - ERROR - [llm_engine.py:98] - [TABLE] Completion generation error after 0.23s: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/llm_engine.py", line 72, in generate_completion
    response = self.client.complete(
               ^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/ai/inference/_patch.py", line 728, in complete
    pipeline_response: PipelineResponse = self._client._pipeline.run(  # pylint: disable=protected-access
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 240, in run
    return first_node.send(pipeline_request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  [Previous line repeated 2 more times]
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/policies/_redirect.py", line 204, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/policies/_retry.py", line 573, in send
    raise err
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/policies/_retry.py", line 551, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  [Previous line repeated 3 more times]
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 128, in send
    self._sender.send(request.http_request, **request.context.options),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/transport/_requests_basic.py", line 409, in send
    raise error
azure.core.exceptions.ServiceResponseError: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
2025-04-05 14:54:29,232 [ERROR] text2sql.agents.table [table_agent.py:95]: Table selection error after 0.24s: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/agents/table_agent.py", line 67, in get_relevant_tables
    raw_response = self.llm_engine.generate_completion(messages, log_prefix="TABLE")
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/text2sql/src/utils/llm_engine.py", line 72, in generate_completion
    response = self.client.complete(
               ^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/ai/inference/_patch.py", line 728, in complete
    pipeline_response: PipelineResponse = self._client._pipeline.run(  # pylint: disable=protected-access
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 240, in run
    return first_node.send(pipeline_request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  [Previous line repeated 2 more times]
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/policies/_redirect.py", line 204, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/policies/_retry.py", line 573, in send
    raise err
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/policies/_retry.py", line 551, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  [Previous line repeated 3 more times]
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 128, in send
    self._sender.send(request.http_request, **request.context.options),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/transport/_requests_basic.py", line 409, in send
    raise error
azure.core.exceptions.ServiceResponseError: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
2025-04-05 14:54:29,234 [WARNING] text2sql.agents.table [table_agent.py:98]: Defaulting to first 3 tables due to error: customers, products, orders
2025-04-05 14:54:29,235 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'get me all customer information'
2025-04-05 14:54:29,235 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: customers, products, orders
2025-04-05 14:54:29,236 [INFO] text2sql.agents.column [column_agent.py:94]: Sending request to AI model for column selection
2025-04-05 14:54:29,236 [INFO] text2sql.llm_engine [llm_engine.py:55]: [COLUMN] Completion generation started
2025-04-05 14:54:29 - INFO - [llm_engine.py:55] - [COLUMN] Completion generation started
2025-04-05 14:54:29,783 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:54:29] "GET /api/query/progress/a9d14273-edd8-4af9-b07a-62761de6507d HTTP/1.1" 200 -
2025-04-05 14:54:30,037 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:54:30] "GET /api/query/progress/a9d14273-edd8-4af9-b07a-62761de6507d HTTP/1.1" 200 -
2025-04-05 14:54:30,450 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:54:30] "GET /api/query/progress/a9d14273-edd8-4af9-b07a-62761de6507d HTTP/1.1" 200 -
2025-04-05 14:54:31,247 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:54:31] "GET /api/query/progress/a9d14273-edd8-4af9-b07a-62761de6507d HTTP/1.1" 200 -
2025-04-05 14:54:31,431 [INFO] text2sql.llm_engine [llm_engine.py:92]: [COLUMN] Completion generation completed in 2.20s
2025-04-05 14:54:31 - INFO - [llm_engine.py:92] - [COLUMN] Completion generation completed in 2.20s
2025-04-05 14:54:31,436 [INFO] text2sql.llm_engine [llm_engine.py:93]: **************************
2025-04-05 14:54:31 - INFO - [llm_engine.py:93] - **************************
2025-04-05 14:54:31,441 [INFO] text2sql.agents.column [column_agent.py:99]: Raw model response: '{
  "customers": [
    "customer_id",
    "first_name",
    "last_name",
    "email",
    "phone",
    "address",
    "city",
    "state",
    "country",
    "postal_code",
    "registration_date"
  ]
}'
2025-04-05 14:54:31,445 [INFO] text2sql.agents.column [column_agent.py:139]: Parsing column selection from model response
2025-04-05 14:54:31,447 [INFO] text2sql.agents.column [column_agent.py:149]: Parsed column selection JSON: {"customers": ["customer_id", "first_name", "last_name", "email", "phone", "address", "city", "state", "country", "postal_code", "registration_date"]}
2025-04-05 14:54:31,448 [INFO] text2sql.agents.column [column_agent.py:111]: Table 'customers': Pruned 0 columns, kept 11/11
2025-04-05 14:54:31,449 [INFO] text2sql.agents.column [column_agent.py:197]: Building pruned schema
2025-04-05 14:54:31,450 [INFO] text2sql.agents.column [column_agent.py:226]: Built pruned schema (576 chars)
2025-04-05 14:54:31,451 [INFO] text2sql.agents.column [column_agent.py:120]: Column pruning completed in 2.22s
2025-04-05 14:54:31,451 [ERROR] text2sql [background_tasks.py:60]: Exception while processing query: 'join_type'
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/background_tasks.py", line 38, in process_in_background
    result = self.sql_manager.process_query(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/text2sql/src/models/sql_generator.py", line 71, in process_query
    sql_result = self._generate_sql(query, workspaces, explicit_tables, progress_callback)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/text2sql/src/models/sql_generator.py", line 222, in _generate_sql
    join_info = "\n".join([
                          ^
  File "/home/vijay/text2sql/src/models/sql_generator.py", line 224, in <listcomp>
    f"{join['join_type']} JOIN on {join['condition']}"
       ~~~~^^^^^^^^^^^^^
KeyError: 'join_type'
2025-04-05 14:54:31 - ERROR - [background_tasks.py:60] - Exception while processing query: 'join_type'
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/background_tasks.py", line 38, in process_in_background
    result = self.sql_manager.process_query(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/text2sql/src/models/sql_generator.py", line 71, in process_query
    sql_result = self._generate_sql(query, workspaces, explicit_tables, progress_callback)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/text2sql/src/models/sql_generator.py", line 222, in _generate_sql
    join_info = "\n".join([
                          ^
  File "/home/vijay/text2sql/src/models/sql_generator.py", line 224, in <listcomp>
    f"{join['join_type']} JOIN on {join['condition']}"
       ~~~~^^^^^^^^^^^^^
KeyError: 'join_type'
2025-04-05 14:54:31,498 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:54:31] "GET /api/query/progress/a9d14273-edd8-4af9-b07a-62761de6507d HTTP/1.1" 200 -
2025-04-05 14:54:39,572 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:54:39] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 14:55:54,845 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:55:54] "GET / HTTP/1.1" 200 -
2025-04-05 14:55:55,090 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:55:55] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 14:55:55,210 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:55:55] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 14:55:55,215 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:55:55] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 14:55:55,221 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:55:55] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 14:55:55,227 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:55:55] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 14:55:55,230 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:55:55] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 14:55:55,406 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:55:55] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 14:55:55,524 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:55:55] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 14:55:55,524 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:55:55] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 14:55:55,856 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:55:55] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 14:56:01,400 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'get me all customers'
2025-04-05 14:56:01,402 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:56:01] "POST /api/query HTTP/1.1" 200 -
2025-04-05 14:56:01,402 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'get me all customers'
2025-04-05 14:56:01,403 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-05 14:56:01,404 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.00s
2025-04-05 14:56:01,406 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-05 14:56:01,406 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-05 14:56:01,407 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-05 14:56:01 - INFO - [database.py:44] - Attempting database connection
2025-04-05 14:56:01,409 [INFO] text2sql.database [database.py:48]: Database connection established in 0.00s
2025-04-05 14:56:01 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-05 14:56:01,410 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'get me all customers'
2025-04-05 14:56:01,411 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-05 14:56:01,412 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-05 14:56:01,413 [INFO] text2sql.llm_engine [llm_engine.py:55]: [TABLE] Completion generation started
2025-04-05 14:56:01 - INFO - [llm_engine.py:55] - [TABLE] Completion generation started
2025-04-05 14:56:02,214 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:56:02] "GET /api/query/progress/083cef7a-0b31-4e20-a8f2-974d8a8f9375 HTTP/1.1" 200 -
2025-04-05 14:56:02,469 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:56:02] "GET /api/query/progress/083cef7a-0b31-4e20-a8f2-974d8a8f9375 HTTP/1.1" 200 -
2025-04-05 14:56:02,618 [INFO] text2sql.llm_engine [llm_engine.py:92]: [TABLE] Completion generation completed in 1.21s
2025-04-05 14:56:02 - INFO - [llm_engine.py:92] - [TABLE] Completion generation completed in 1.21s
2025-04-05 14:56:02,619 [INFO] text2sql.llm_engine [llm_engine.py:93]: **************************
2025-04-05 14:56:02 - INFO - [llm_engine.py:93] - **************************
2025-04-05 14:56:02,621 [INFO] text2sql.agents.table [table_agent.py:69]: Raw model response: 'customers'
2025-04-05 14:56:02,622 [INFO] text2sql.agents.table [table_agent.py:90]: Table selection completed in 1.21s. Selected: customers
2025-04-05 14:56:02,623 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'get me all customers'
2025-04-05 14:56:02,623 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: customers
2025-04-05 14:56:02,624 [INFO] text2sql.agents.column [column_agent.py:38]: Only one table involved (customers). Skipping LLM call and including all columns.
2025-04-05 14:56:02,624 [INFO] text2sql.feedback [feedback_manager.py:267]: Stage 1: Vector search for 'get me all customers...'
2025-04-05 14:56:02 - INFO - [feedback_manager.py:267] - Stage 1: Vector search for 'get me all customers...'
2025-04-05 14:56:02,654 [WARNING] text2sql.feedback [feedback_manager.py:324]: No candidates found from vector search
2025-04-05 14:56:02 - WARNING - [feedback_manager.py:324] - No candidates found from vector search
2025-04-05 14:56:02,655 [INFO] text2sql.azure [azure_client.py:35]: SQL generation started for query: 'get me all customers'
2025-04-05 14:56:02 - INFO - [azure_client.py:35] - SQL generation started for query: 'get me all customers'
2025-04-05 14:56:02,656 [INFO] text2sql.azure [azure_client.py:69]: Including schema information (587 chars)
2025-04-05 14:56:02 - INFO - [azure_client.py:69] - Including schema information (587 chars)
2025-04-05 14:56:02,658 [INFO] text2sql.azure [azure_client.py:104]: Including 3 SQL examples (no similarity examples found)
2025-04-05 14:56:02 - INFO - [azure_client.py:104] - Including 3 SQL examples (no similarity examples found)
2025-04-05 14:56:02,659 [INFO] text2sql.azure [azure_client.py:114]: PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some example queries and their SQL:\nQuestion: How many records are in the customers table?\nSQL: SELECT COUNT(*) AS record_count FROM customers\n\nQuestion: Get all columns from customers\nSQL: SELECT * FROM customers LIMIT 5\n\nQuestion: Get record from customers by customer_id\nSQL: SELECT * FROM customers WHERE customer_id = 1\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me all customers'}]
2025-04-05 14:56:02 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some example queries and their SQL:\nQuestion: How many records are in the customers table?\nSQL: SELECT COUNT(*) AS record_count FROM customers\n\nQuestion: Get all columns from customers\nSQL: SELECT * FROM customers LIMIT 5\n\nQuestion: Get record from customers by customer_id\nSQL: SELECT * FROM customers WHERE customer_id = 1\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me all customers'}]
2025-04-05 14:56:02,660 [INFO] text2sql.llm_engine [llm_engine.py:55]: [SQL_GEN] Completion generation started
2025-04-05 14:56:02 - INFO - [llm_engine.py:55] - [SQL_GEN] Completion generation started
2025-04-05 14:56:02,691 [ERROR] text2sql.llm_engine [llm_engine.py:98]: [SQL_GEN] Completion generation error after 0.03s: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/llm_engine.py", line 72, in generate_completion
    response = self.client.complete(
               ^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/ai/inference/_patch.py", line 728, in complete
    pipeline_response: PipelineResponse = self._client._pipeline.run(  # pylint: disable=protected-access
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 240, in run
    return first_node.send(pipeline_request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  [Previous line repeated 2 more times]
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/policies/_redirect.py", line 204, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/policies/_retry.py", line 573, in send
    raise err
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/policies/_retry.py", line 551, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  [Previous line repeated 3 more times]
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 128, in send
    self._sender.send(request.http_request, **request.context.options),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/transport/_requests_basic.py", line 409, in send
    raise error
azure.core.exceptions.ServiceResponseError: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
2025-04-05 14:56:02 - ERROR - [llm_engine.py:98] - [SQL_GEN] Completion generation error after 0.03s: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/llm_engine.py", line 72, in generate_completion
    response = self.client.complete(
               ^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/ai/inference/_patch.py", line 728, in complete
    pipeline_response: PipelineResponse = self._client._pipeline.run(  # pylint: disable=protected-access
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 240, in run
    return first_node.send(pipeline_request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  [Previous line repeated 2 more times]
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/policies/_redirect.py", line 204, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/policies/_retry.py", line 573, in send
    raise err
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/policies/_retry.py", line 551, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  [Previous line repeated 3 more times]
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 128, in send
    self._sender.send(request.http_request, **request.context.options),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/transport/_requests_basic.py", line 409, in send
    raise error
azure.core.exceptions.ServiceResponseError: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
2025-04-05 14:56:02,693 [ERROR] text2sql.azure [azure_client.py:138]: SQL generation error after 0.04s: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/azure_client.py", line 117, in generate_sql
    raw_response = self.llm_engine.generate_completion(messages, log_prefix="SQL_GEN")
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/text2sql/src/utils/llm_engine.py", line 72, in generate_completion
    response = self.client.complete(
               ^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/ai/inference/_patch.py", line 728, in complete
    pipeline_response: PipelineResponse = self._client._pipeline.run(  # pylint: disable=protected-access
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 240, in run
    return first_node.send(pipeline_request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  [Previous line repeated 2 more times]
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/policies/_redirect.py", line 204, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/policies/_retry.py", line 573, in send
    raise err
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/policies/_retry.py", line 551, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  [Previous line repeated 3 more times]
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 128, in send
    self._sender.send(request.http_request, **request.context.options),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/transport/_requests_basic.py", line 409, in send
    raise error
azure.core.exceptions.ServiceResponseError: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
2025-04-05 14:56:02 - ERROR - [azure_client.py:138] - SQL generation error after 0.04s: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/azure_client.py", line 117, in generate_sql
    raw_response = self.llm_engine.generate_completion(messages, log_prefix="SQL_GEN")
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/text2sql/src/utils/llm_engine.py", line 72, in generate_completion
    response = self.client.complete(
               ^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/ai/inference/_patch.py", line 728, in complete
    pipeline_response: PipelineResponse = self._client._pipeline.run(  # pylint: disable=protected-access
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 240, in run
    return first_node.send(pipeline_request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  [Previous line repeated 2 more times]
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/policies/_redirect.py", line 204, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/policies/_retry.py", line 573, in send
    raise err
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/policies/_retry.py", line 551, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  [Previous line repeated 3 more times]
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 128, in send
    self._sender.send(request.http_request, **request.context.options),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/transport/_requests_basic.py", line 409, in send
    raise error
azure.core.exceptions.ServiceResponseError: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
2025-04-05 14:56:02,698 [INFO] text2sql.sql_generator [sql_generator.py:376]: SQL generation completed in 1.29s
2025-04-05 14:56:02,698 [INFO] text2sql.sql_generator [sql_generator.py:125]: Query processing completed in 1.30s
2025-04-05 14:56:02,897 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:56:02] "GET /api/query/progress/083cef7a-0b31-4e20-a8f2-974d8a8f9375 HTTP/1.1" 200 -
2025-04-05 14:56:14,657 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 14:56:14,658 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 14:56:14,659 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 14:56:14,660 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 14:56:14,660 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 14:56:14 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 14:56:14,661 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 14:56:14 - INFO - [database.py:258] - Closing database connection
2025-04-05 14:56:14,661 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 14:56:14 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 14:56:22,281 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:56:22,282 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:56:22,283 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:56:22,284 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:56:22,285 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 14:56:22,303 [INFO] text2sql [app.py:66]: Debug logging enabled for SQL generator and agents
2025-04-05 14:56:22 - INFO - [app.py:66] - Debug logging enabled for SQL generator and agents
2025-04-05 14:56:22,305 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:56:22 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:56:22,306 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:56:22 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:56:22,311 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:56:22 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:56:22,312 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:56:22,312 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:56:22,313 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:56:22,313 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:56:22,313 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:56:22 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:56:22,314 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:56:22 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:56:22,314 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:56:22 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:56:22,315 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:56:22,316 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:56:22,316 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:56:22,317 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:56:22,317 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:56:22 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:56:22,317 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:56:22 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:56:22,318 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:56:22 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:56:22,319 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:56:22,319 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:56:22,319 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:56:22,319 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:56:22,320 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 14:56:22 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 14:56:22,320 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:56:22 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:56:22,320 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:56:22 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:56:22,323 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:56:22 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:56:22,323 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 14:56:22 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 14:56:22,323 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:56:22 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:56:22,324 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:56:22,324 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:56:22,324 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:56:22,325 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:56:22,325 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:56:22 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:56:22,526 [INFO] werkzeug [_internal.py:97]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.27.251.157:5000
2025-04-05 14:56:22,526 [INFO] werkzeug [_internal.py:97]: [33mPress CTRL+C to quit[0m
2025-04-05 14:56:22,545 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 14:56:29,817 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:56:29,818 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:56:29,818 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:56:29,819 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:56:29,819 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 14:56:29,830 [INFO] text2sql [app.py:66]: Debug logging enabled for SQL generator and agents
2025-04-05 14:56:29 - INFO - [app.py:66] - Debug logging enabled for SQL generator and agents
2025-04-05 14:56:29,834 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:56:29 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:56:29,835 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:56:29 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:56:29,838 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:56:29 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:56:29,839 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:56:29,839 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:56:29,839 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:56:29,840 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:56:29,840 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:56:29 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:56:29,840 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:56:29 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:56:29,841 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:56:29 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:56:29,841 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:56:29,841 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:56:29,842 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:56:29,842 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:56:29,842 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:56:29 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:56:29,843 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:56:29 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:56:29,843 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:56:29 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:56:29,844 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:56:29,844 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:56:29,845 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:56:29,845 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:56:29,845 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 14:56:29 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 14:56:29,846 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:56:29 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 14:56:29,846 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 14:56:29 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 14:56:29,849 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 14:56:29 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 14:56:29,849 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 14:56:29 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 14:56:29,850 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:56:29 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:56:29,850 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 14:56:29,851 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 14:56:29,851 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 14:56:29,851 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 14:56:29,851 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:56:29 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 14:56:30,007 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 14:56:30,019 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 14:56:38,794 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'get me all customers'
2025-04-05 14:56:38,796 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:56:38] "POST /api/query HTTP/1.1" 200 -
2025-04-05 14:56:38,797 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'get me all customers'
2025-04-05 14:56:38,803 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-05 14:56:38,804 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.01s
2025-04-05 14:56:38,806 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-05 14:56:38,807 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-05 14:56:38,809 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-05 14:56:38 - INFO - [database.py:44] - Attempting database connection
2025-04-05 14:56:38,815 [INFO] text2sql.database [database.py:48]: Database connection established in 0.01s
2025-04-05 14:56:38 - INFO - [database.py:48] - Database connection established in 0.01s
2025-04-05 14:56:38,817 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'get me all customers'
2025-04-05 14:56:38,819 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-05 14:56:38,824 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-05 14:56:38,826 [INFO] text2sql.llm_engine [llm_engine.py:55]: [TABLE] Completion generation started
2025-04-05 14:56:38 - INFO - [llm_engine.py:55] - [TABLE] Completion generation started
2025-04-05 14:56:39,533 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:56:39] "GET /api/query/progress/8ec1dd3e-7495-445d-a1c9-b1e1d07215a7 HTTP/1.1" 200 -
2025-04-05 14:56:40,622 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:56:40] "GET /api/query/progress/8ec1dd3e-7495-445d-a1c9-b1e1d07215a7 HTTP/1.1" 200 -
2025-04-05 14:56:40,864 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:56:40] "GET /api/query/progress/8ec1dd3e-7495-445d-a1c9-b1e1d07215a7 HTTP/1.1" 200 -
2025-04-05 14:56:40,942 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:56:40] "GET /api/query/progress/8ec1dd3e-7495-445d-a1c9-b1e1d07215a7 HTTP/1.1" 200 -
2025-04-05 14:56:41,316 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:56:41] "GET /api/query/progress/8ec1dd3e-7495-445d-a1c9-b1e1d07215a7 HTTP/1.1" 200 -
2025-04-05 14:56:42,110 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:56:42] "GET /api/query/progress/8ec1dd3e-7495-445d-a1c9-b1e1d07215a7 HTTP/1.1" 200 -
2025-04-05 14:56:42,355 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:56:42] "GET /api/query/progress/8ec1dd3e-7495-445d-a1c9-b1e1d07215a7 HTTP/1.1" 200 -
2025-04-05 14:56:42,797 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:56:42] "GET /api/query/progress/8ec1dd3e-7495-445d-a1c9-b1e1d07215a7 HTTP/1.1" 200 -
2025-04-05 14:56:43,576 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:56:43] "GET /api/query/progress/8ec1dd3e-7495-445d-a1c9-b1e1d07215a7 HTTP/1.1" 200 -
2025-04-05 14:56:43,826 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:56:43] "GET /api/query/progress/8ec1dd3e-7495-445d-a1c9-b1e1d07215a7 HTTP/1.1" 200 -
2025-04-05 14:56:44,251 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:56:44] "GET /api/query/progress/8ec1dd3e-7495-445d-a1c9-b1e1d07215a7 HTTP/1.1" 200 -
2025-04-05 14:56:45,060 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:56:45] "GET /api/query/progress/8ec1dd3e-7495-445d-a1c9-b1e1d07215a7 HTTP/1.1" 200 -
2025-04-05 14:56:45,296 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:56:45] "GET /api/query/progress/8ec1dd3e-7495-445d-a1c9-b1e1d07215a7 HTTP/1.1" 200 -
2025-04-05 14:56:45,731 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:56:45] "GET /api/query/progress/8ec1dd3e-7495-445d-a1c9-b1e1d07215a7 HTTP/1.1" 200 -
2025-04-05 14:56:46,518 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:56:46] "GET /api/query/progress/8ec1dd3e-7495-445d-a1c9-b1e1d07215a7 HTTP/1.1" 200 -
2025-04-05 14:56:46,763 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:56:46] "GET /api/query/progress/8ec1dd3e-7495-445d-a1c9-b1e1d07215a7 HTTP/1.1" 200 -
2025-04-05 14:56:47,141 [INFO] text2sql.llm_engine [llm_engine.py:92]: [TABLE] Completion generation completed in 8.32s
2025-04-05 14:56:47 - INFO - [llm_engine.py:92] - [TABLE] Completion generation completed in 8.32s
2025-04-05 14:56:47,143 [INFO] text2sql.llm_engine [llm_engine.py:93]: **************************
2025-04-05 14:56:47 - INFO - [llm_engine.py:93] - **************************
2025-04-05 14:56:47,145 [INFO] text2sql.agents.table [table_agent.py:69]: Raw model response: 'customers'
2025-04-05 14:56:47,145 [INFO] text2sql.agents.table [table_agent.py:90]: Table selection completed in 8.33s. Selected: customers
2025-04-05 14:56:47,147 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'get me all customers'
2025-04-05 14:56:47,147 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: customers
2025-04-05 14:56:47,148 [INFO] text2sql.agents.column [column_agent.py:38]: Only one table involved (customers). Skipping LLM call and including all columns.
2025-04-05 14:56:47,148 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 14:56:47 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 14:56:47,150 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 14:56:47 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 14:56:47,151 [INFO] text2sql.feedback [feedback_manager.py:267]: Stage 1: Vector search for 'get me all customers...'
2025-04-05 14:56:47 - INFO - [feedback_manager.py:267] - Stage 1: Vector search for 'get me all customers...'
2025-04-05 14:56:47,153 [INFO] text2sql.feedback [feedback_manager.py:62]: Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-05 14:56:47 - INFO - [feedback_manager.py:62] - Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-05 14:56:47,194 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:56:47] "GET /api/query/progress/8ec1dd3e-7495-445d-a1c9-b1e1d07215a7 HTTP/1.1" 200 -
2025-04-05 14:56:47,993 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:56:47] "GET /api/query/progress/8ec1dd3e-7495-445d-a1c9-b1e1d07215a7 HTTP/1.1" 200 -
2025-04-05 14:56:48,239 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:56:48] "GET /api/query/progress/8ec1dd3e-7495-445d-a1c9-b1e1d07215a7 HTTP/1.1" 200 -
2025-04-05 14:56:48,663 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:56:48] "GET /api/query/progress/8ec1dd3e-7495-445d-a1c9-b1e1d07215a7 HTTP/1.1" 200 -
2025-04-05 14:56:49,443 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:56:49] "GET /api/query/progress/8ec1dd3e-7495-445d-a1c9-b1e1d07215a7 HTTP/1.1" 200 -
2025-04-05 14:56:50,045 [INFO] text2sql.feedback [feedback_manager.py:65]: Embedding model loaded in 2.89s
2025-04-05 14:56:50 - INFO - [feedback_manager.py:65] - Embedding model loaded in 2.89s
2025-04-05 14:56:50,078 [WARNING] text2sql.feedback [feedback_manager.py:324]: No candidates found from vector search
2025-04-05 14:56:50 - WARNING - [feedback_manager.py:324] - No candidates found from vector search
2025-04-05 14:56:50,079 [INFO] text2sql.azure [azure_client.py:35]: SQL generation started for query: 'get me all customers'
2025-04-05 14:56:50 - INFO - [azure_client.py:35] - SQL generation started for query: 'get me all customers'
2025-04-05 14:56:50,080 [INFO] text2sql.azure [azure_client.py:69]: Including schema information (587 chars)
2025-04-05 14:56:50 - INFO - [azure_client.py:69] - Including schema information (587 chars)
2025-04-05 14:56:50,081 [INFO] text2sql.azure [azure_client.py:104]: Including 3 SQL examples (no similarity examples found)
2025-04-05 14:56:50 - INFO - [azure_client.py:104] - Including 3 SQL examples (no similarity examples found)
2025-04-05 14:56:50,082 [INFO] text2sql.azure [azure_client.py:114]: PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some example queries and their SQL:\nQuestion: How many records are in the customers table?\nSQL: SELECT COUNT(*) AS record_count FROM customers\n\nQuestion: Get all columns from customers\nSQL: SELECT * FROM customers LIMIT 5\n\nQuestion: Get record from customers by customer_id\nSQL: SELECT * FROM customers WHERE customer_id = 1\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me all customers'}]
2025-04-05 14:56:50 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some example queries and their SQL:\nQuestion: How many records are in the customers table?\nSQL: SELECT COUNT(*) AS record_count FROM customers\n\nQuestion: Get all columns from customers\nSQL: SELECT * FROM customers LIMIT 5\n\nQuestion: Get record from customers by customer_id\nSQL: SELECT * FROM customers WHERE customer_id = 1\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me all customers'}]
2025-04-05 14:56:50,083 [INFO] text2sql.llm_engine [llm_engine.py:55]: [SQL_GEN] Completion generation started
2025-04-05 14:56:50 - INFO - [llm_engine.py:55] - [SQL_GEN] Completion generation started
2025-04-05 14:56:50,300 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:56:50] "GET /api/query/progress/8ec1dd3e-7495-445d-a1c9-b1e1d07215a7 HTTP/1.1" 200 -
2025-04-05 14:56:51,565 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:56:51] "GET /api/query/progress/8ec1dd3e-7495-445d-a1c9-b1e1d07215a7 HTTP/1.1" 200 -
2025-04-05 14:56:52,208 [INFO] text2sql.llm_engine [llm_engine.py:92]: [SQL_GEN] Completion generation completed in 2.12s
2025-04-05 14:56:52 - INFO - [llm_engine.py:92] - [SQL_GEN] Completion generation completed in 2.12s
2025-04-05 14:56:52,211 [INFO] text2sql.llm_engine [llm_engine.py:93]: **************************
2025-04-05 14:56:52 - INFO - [llm_engine.py:93] - **************************
2025-04-05 14:56:52,215 [INFO] text2sql.azure [azure_client.py:150]: Parsing SQL from model response
2025-04-05 14:56:52 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-05 14:56:52,217 [INFO] text2sql.azure [azure_client.py:157]: Found SQL code block in response
2025-04-05 14:56:52 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-05 14:56:52,220 [INFO] text2sql.azure [azure_client.py:171]: Extracted SQL query (24 chars) and explanation (241 chars)
2025-04-05 14:56:52 - INFO - [azure_client.py:171] - Extracted SQL query (24 chars) and explanation (241 chars)
2025-04-05 14:56:52,225 [INFO] text2sql.azure [azure_client.py:124]: Generated SQL: SELECT * FROM customers;
2025-04-05 14:56:52,227 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:56:52] "GET /api/query/progress/8ec1dd3e-7495-445d-a1c9-b1e1d07215a7 HTTP/1.1" 200 -
2025-04-05 14:56:52 - INFO - [azure_client.py:124] - Generated SQL: SELECT * FROM customers;
2025-04-05 14:56:52,233 [INFO] text2sql.azure [azure_client.py:132]: SQL generation completed in 2.15s
2025-04-05 14:56:52 - INFO - [azure_client.py:132] - SQL generation completed in 2.15s
2025-04-05 14:56:52,234 [INFO] text2sql.database [database.py:65]: Executing SQL query: SELECT * FROM customers;
2025-04-05 14:56:52 - INFO - [database.py:65] - Executing SQL query: SELECT * FROM customers;
2025-04-05 14:56:52,240 [INFO] text2sql.database [database.py:86]: Query returned 5 rows with 11 columns
2025-04-05 14:56:52 - INFO - [database.py:86] - Query returned 5 rows with 11 columns
2025-04-05 14:56:52,252 [INFO] text2sql.database [database.py:95]: Query processing completed in 0.02s
2025-04-05 14:56:52 - INFO - [database.py:95] - Query processing completed in 0.02s
2025-04-05 14:56:52,255 [INFO] text2sql.sql_generator [sql_generator.py:376]: SQL generation completed in 13.45s
2025-04-05 14:56:52,255 [INFO] text2sql.sql_generator [sql_generator.py:125]: Query processing completed in 13.46s
2025-04-05 14:56:53,510 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:56:53] "GET /api/query/progress/8ec1dd3e-7495-445d-a1c9-b1e1d07215a7 HTTP/1.1" 200 -
2025-04-05 14:57:41,865 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:57:41] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 14:58:49,162 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:58:49] "GET / HTTP/1.1" 200 -
2025-04-05 14:58:49,398 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:58:49] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 14:58:49,505 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:58:49] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 14:58:49,507 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:58:49] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 14:58:49,508 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:58:49] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 14:58:49,511 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:58:49] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 14:58:49,515 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:58:49] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 14:58:49,726 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:58:49] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 14:58:49,822 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:58:49] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 14:58:49,823 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:58:49] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 14:58:50,162 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:58:50] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 14:58:51,829 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'get me all customers'
2025-04-05 14:58:51,829 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:58:51] "POST /api/query HTTP/1.1" 200 -
2025-04-05 14:58:51,830 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'get me all customers'
2025-04-05 14:58:51,832 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-05 14:58:51,833 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.00s
2025-04-05 14:58:51,834 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-05 14:58:51,834 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-05 14:58:51,835 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-05 14:58:51 - INFO - [database.py:44] - Attempting database connection
2025-04-05 14:58:51,837 [INFO] text2sql.database [database.py:48]: Database connection established in 0.00s
2025-04-05 14:58:51 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-05 14:58:51,837 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'get me all customers'
2025-04-05 14:58:51,838 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-05 14:58:51,839 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-05 14:58:51,839 [INFO] text2sql.llm_engine [llm_engine.py:55]: [TABLE] Completion generation started
2025-04-05 14:58:51 - INFO - [llm_engine.py:55] - [TABLE] Completion generation started
2025-04-05 14:58:52,316 [INFO] text2sql.llm_engine [llm_engine.py:92]: [TABLE] Completion generation completed in 0.48s
2025-04-05 14:58:52 - INFO - [llm_engine.py:92] - [TABLE] Completion generation completed in 0.48s
2025-04-05 14:58:52,317 [INFO] text2sql.llm_engine [llm_engine.py:93]: **************************
2025-04-05 14:58:52 - INFO - [llm_engine.py:93] - **************************
2025-04-05 14:58:52,318 [INFO] text2sql.agents.table [table_agent.py:69]: Raw model response: 'customers'
2025-04-05 14:58:52,319 [INFO] text2sql.agents.table [table_agent.py:90]: Table selection completed in 0.48s. Selected: customers
2025-04-05 14:58:52,320 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'get me all customers'
2025-04-05 14:58:52,320 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: customers
2025-04-05 14:58:52,322 [INFO] text2sql.agents.column [column_agent.py:38]: Only one table involved (customers). Skipping LLM call and including all columns.
2025-04-05 14:58:52,322 [INFO] text2sql.feedback [feedback_manager.py:267]: Stage 1: Vector search for 'get me all customers...'
2025-04-05 14:58:52 - INFO - [feedback_manager.py:267] - Stage 1: Vector search for 'get me all customers...'
2025-04-05 14:58:52,352 [WARNING] text2sql.feedback [feedback_manager.py:324]: No candidates found from vector search
2025-04-05 14:58:52 - WARNING - [feedback_manager.py:324] - No candidates found from vector search
2025-04-05 14:58:52,353 [INFO] text2sql.azure [azure_client.py:35]: SQL generation started for query: 'get me all customers'
2025-04-05 14:58:52 - INFO - [azure_client.py:35] - SQL generation started for query: 'get me all customers'
2025-04-05 14:58:52,354 [INFO] text2sql.azure [azure_client.py:69]: Including schema information (587 chars)
2025-04-05 14:58:52 - INFO - [azure_client.py:69] - Including schema information (587 chars)
2025-04-05 14:58:52,356 [INFO] text2sql.azure [azure_client.py:104]: Including 3 SQL examples (no similarity examples found)
2025-04-05 14:58:52 - INFO - [azure_client.py:104] - Including 3 SQL examples (no similarity examples found)
2025-04-05 14:58:52,357 [INFO] text2sql.azure [azure_client.py:114]: PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some example queries and their SQL:\nQuestion: How many records are in the customers table?\nSQL: SELECT COUNT(*) AS record_count FROM customers\n\nQuestion: Get all columns from customers\nSQL: SELECT * FROM customers LIMIT 5\n\nQuestion: Get record from customers by customer_id\nSQL: SELECT * FROM customers WHERE customer_id = 1\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me all customers'}]
2025-04-05 14:58:52 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some example queries and their SQL:\nQuestion: How many records are in the customers table?\nSQL: SELECT COUNT(*) AS record_count FROM customers\n\nQuestion: Get all columns from customers\nSQL: SELECT * FROM customers LIMIT 5\n\nQuestion: Get record from customers by customer_id\nSQL: SELECT * FROM customers WHERE customer_id = 1\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me all customers'}]
2025-04-05 14:58:52,358 [INFO] text2sql.llm_engine [llm_engine.py:55]: [SQL_GEN] Completion generation started
2025-04-05 14:58:52 - INFO - [llm_engine.py:55] - [SQL_GEN] Completion generation started
2025-04-05 14:58:52,635 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:58:52] "GET /api/query/progress/30972830-5736-4a9c-a95d-a838b101a837 HTTP/1.1" 200 -
2025-04-05 14:58:52,883 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:58:52] "GET /api/query/progress/30972830-5736-4a9c-a95d-a838b101a837 HTTP/1.1" 200 -
2025-04-05 14:58:53,311 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:58:53] "GET /api/query/progress/30972830-5736-4a9c-a95d-a838b101a837 HTTP/1.1" 200 -
2025-04-05 14:58:53,607 [INFO] text2sql.llm_engine [llm_engine.py:92]: [SQL_GEN] Completion generation completed in 1.25s
2025-04-05 14:58:53 - INFO - [llm_engine.py:92] - [SQL_GEN] Completion generation completed in 1.25s
2025-04-05 14:58:53,608 [INFO] text2sql.llm_engine [llm_engine.py:93]: **************************
2025-04-05 14:58:53 - INFO - [llm_engine.py:93] - **************************
2025-04-05 14:58:53,610 [INFO] text2sql.azure [azure_client.py:150]: Parsing SQL from model response
2025-04-05 14:58:53 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-05 14:58:53,613 [INFO] text2sql.azure [azure_client.py:157]: Found SQL code block in response
2025-04-05 14:58:53 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-05 14:58:53,616 [INFO] text2sql.azure [azure_client.py:171]: Extracted SQL query (24 chars) and explanation (182 chars)
2025-04-05 14:58:53 - INFO - [azure_client.py:171] - Extracted SQL query (24 chars) and explanation (182 chars)
2025-04-05 14:58:53,618 [INFO] text2sql.azure [azure_client.py:124]: Generated SQL: SELECT * FROM customers;
2025-04-05 14:58:53 - INFO - [azure_client.py:124] - Generated SQL: SELECT * FROM customers;
2025-04-05 14:58:53,620 [INFO] text2sql.azure [azure_client.py:132]: SQL generation completed in 1.27s
2025-04-05 14:58:53 - INFO - [azure_client.py:132] - SQL generation completed in 1.27s
2025-04-05 14:58:53,622 [INFO] text2sql.database [database.py:65]: Executing SQL query: SELECT * FROM customers;
2025-04-05 14:58:53 - INFO - [database.py:65] - Executing SQL query: SELECT * FROM customers;
2025-04-05 14:58:53,629 [INFO] text2sql.database [database.py:86]: Query returned 5 rows with 11 columns
2025-04-05 14:58:53 - INFO - [database.py:86] - Query returned 5 rows with 11 columns
2025-04-05 14:58:53,634 [INFO] text2sql.database [database.py:95]: Query processing completed in 0.01s
2025-04-05 14:58:53 - INFO - [database.py:95] - Query processing completed in 0.01s
2025-04-05 14:58:53,640 [INFO] text2sql.sql_generator [sql_generator.py:376]: SQL generation completed in 1.81s
2025-04-05 14:58:53,641 [INFO] text2sql.sql_generator [sql_generator.py:125]: Query processing completed in 1.81s
2025-04-05 14:58:54,124 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:58:54] "GET /api/query/progress/30972830-5736-4a9c-a95d-a838b101a837 HTTP/1.1" 200 -
2025-04-05 14:59:06,098 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 14:59:06] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 19:40:41,015 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 19:40:41,015 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 19:40:41,016 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 19:40:41,016 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 19:40:41,018 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 19:40:41,059 [INFO] text2sql [app.py:66]: Debug logging enabled for SQL generator and agents
2025-04-05 19:40:41 - INFO - [app.py:66] - Debug logging enabled for SQL generator and agents
2025-04-05 19:40:41,064 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 19:40:41 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 19:40:41,065 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 19:40:41 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 19:40:41,076 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 19:40:41 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 19:40:41,078 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 19:40:41,079 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 19:40:41,079 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 19:40:41,080 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 19:40:41,080 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 19:40:41 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 19:40:41,081 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 19:40:41 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 19:40:41,083 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 19:40:41 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 19:40:41,085 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 19:40:41,086 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 19:40:41,088 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 19:40:41,089 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 19:40:41,089 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 19:40:41 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 19:40:41,091 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 19:40:41 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 19:40:41,092 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 19:40:41 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 19:40:41,094 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 19:40:41,094 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 19:40:41,095 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 19:40:41,095 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 19:40:41,096 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 19:40:41 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 19:40:41,097 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 19:40:41 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 19:40:41,098 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 19:40:41 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 19:40:41,105 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 19:40:41 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 19:40:41,106 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 19:40:41 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 19:40:41,107 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 19:40:41 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 19:40:41,108 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 19:40:41,109 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 19:40:41,109 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 19:40:41,110 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 19:40:41,110 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 19:40:41 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 19:40:41,421 [INFO] werkzeug [_internal.py:97]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.27.251.157:5000
2025-04-05 19:40:41,422 [INFO] werkzeug [_internal.py:97]: [33mPress CTRL+C to quit[0m
2025-04-05 19:40:41,441 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 19:40:48,597 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 19:40:48,598 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 19:40:48,598 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 19:40:48,599 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 19:40:48,600 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 19:40:48,612 [INFO] text2sql [app.py:66]: Debug logging enabled for SQL generator and agents
2025-04-05 19:40:48 - INFO - [app.py:66] - Debug logging enabled for SQL generator and agents
2025-04-05 19:40:48,615 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 19:40:48 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 19:40:48,616 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 19:40:48 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 19:40:48,620 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 19:40:48 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 19:40:48,620 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 19:40:48,621 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 19:40:48,621 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 19:40:48,622 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 19:40:48,622 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 19:40:48 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 19:40:48,622 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 19:40:48 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 19:40:48,623 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 19:40:48 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 19:40:48,624 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 19:40:48,624 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 19:40:48,625 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 19:40:48,625 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 19:40:48,625 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 19:40:48 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 19:40:48,626 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 19:40:48 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 19:40:48,627 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 19:40:48 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 19:40:48,627 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 19:40:48,628 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 19:40:48,628 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 19:40:48,628 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 19:40:48,629 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 19:40:48 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 19:40:48,629 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 19:40:48 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 19:40:48,629 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 19:40:48 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 19:40:48,633 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 19:40:48 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 19:40:48,634 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 19:40:48 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 19:40:48,634 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 19:40:48 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 19:40:48,634 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 19:40:48,635 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 19:40:48,635 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 19:40:48,638 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 19:40:48,639 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 19:40:48 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 19:40:48,890 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 19:40:48,900 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 19:40:56,686 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:40:56] "GET / HTTP/1.1" 200 -
2025-04-05 19:40:56,735 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:40:56] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 19:40:57,090 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:40:57] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 19:40:57,096 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:40:57] "GET /static/js/ui-utils.js HTTP/1.1" 200 -
2025-04-05 19:40:57,099 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:40:57] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 19:40:57,101 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:40:57] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 19:40:57,113 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:40:57] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 19:40:57,120 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:40:57] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 19:40:57,415 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:40:57] "GET /static/js/dashboard.js HTTP/1.1" 200 -
2025-04-05 19:40:57,429 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:40:57] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 19:40:57,816 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:40:57] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 19:41:03,174 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:41:03] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 19:41:44,386 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'get me all the customer'
2025-04-05 19:41:44,387 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:41:44] "POST /api/query HTTP/1.1" 200 -
2025-04-05 19:41:44,388 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'get me all the customer'
2025-04-05 19:41:44,389 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-05 19:41:44,391 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.00s
2025-04-05 19:41:44,392 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-05 19:41:44,392 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-05 19:41:44,393 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-05 19:41:44 - INFO - [database.py:44] - Attempting database connection
2025-04-05 19:41:44,395 [INFO] text2sql.database [database.py:48]: Database connection established in 0.00s
2025-04-05 19:41:44 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-05 19:41:44,396 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'get me all the customer'
2025-04-05 19:41:44,397 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-05 19:41:44,398 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-05 19:41:44,399 [INFO] text2sql.llm_engine [llm_engine.py:55]: [TABLE] Completion generation started
2025-04-05 19:41:44 - INFO - [llm_engine.py:55] - [TABLE] Completion generation started
2025-04-05 19:41:44,888 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:41:44] "GET /api/query/progress/d7d1a52a-c944-40fb-9777-e33c45e2baeb HTTP/1.1" 200 -
2025-04-05 19:41:45,634 [INFO] text2sql.llm_engine [llm_engine.py:92]: [TABLE] Completion generation completed in 1.23s
2025-04-05 19:41:45 - INFO - [llm_engine.py:92] - [TABLE] Completion generation completed in 1.23s
2025-04-05 19:41:45,635 [INFO] text2sql.llm_engine [llm_engine.py:93]: **************************
2025-04-05 19:41:45 - INFO - [llm_engine.py:93] - **************************
2025-04-05 19:41:45,636 [INFO] text2sql.agents.table [table_agent.py:69]: Raw model response: 'customers'
2025-04-05 19:41:45,636 [INFO] text2sql.agents.table [table_agent.py:90]: Table selection completed in 1.24s. Selected: customers
2025-04-05 19:41:45,637 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'get me all the customer'
2025-04-05 19:41:45,637 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: customers
2025-04-05 19:41:45,638 [INFO] text2sql.agents.column [column_agent.py:38]: Only one table involved (customers). Skipping LLM call and including all columns.
2025-04-05 19:41:45,638 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 19:41:45 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 19:41:45,639 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 19:41:45 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 19:41:45,640 [INFO] text2sql.feedback [feedback_manager.py:267]: Stage 1: Vector search for 'get me all the customer...'
2025-04-05 19:41:45 - INFO - [feedback_manager.py:267] - Stage 1: Vector search for 'get me all the customer...'
2025-04-05 19:41:45,641 [INFO] text2sql.feedback [feedback_manager.py:62]: Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-05 19:41:45 - INFO - [feedback_manager.py:62] - Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-05 19:41:45,674 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:41:45] "GET /api/query/progress/d7d1a52a-c944-40fb-9777-e33c45e2baeb HTTP/1.1" 200 -
2025-04-05 19:41:45,932 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:41:45] "GET /api/query/progress/d7d1a52a-c944-40fb-9777-e33c45e2baeb HTTP/1.1" 200 -
2025-04-05 19:41:46,348 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:41:46] "GET /api/query/progress/d7d1a52a-c944-40fb-9777-e33c45e2baeb HTTP/1.1" 200 -
2025-04-05 19:41:47,124 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:41:47] "GET /api/query/progress/d7d1a52a-c944-40fb-9777-e33c45e2baeb HTTP/1.1" 200 -
2025-04-05 19:41:47,375 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:41:47] "GET /api/query/progress/d7d1a52a-c944-40fb-9777-e33c45e2baeb HTTP/1.1" 200 -
2025-04-05 19:41:47,797 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:41:47] "GET /api/query/progress/d7d1a52a-c944-40fb-9777-e33c45e2baeb HTTP/1.1" 200 -
2025-04-05 19:41:48,462 [INFO] text2sql.feedback [feedback_manager.py:65]: Embedding model loaded in 2.82s
2025-04-05 19:41:48 - INFO - [feedback_manager.py:65] - Embedding model loaded in 2.82s
2025-04-05 19:41:48,589 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:41:48] "GET /api/query/progress/d7d1a52a-c944-40fb-9777-e33c45e2baeb HTTP/1.1" 200 -
2025-04-05 19:41:48,670 [WARNING] text2sql.feedback [feedback_manager.py:324]: No candidates found from vector search
2025-04-05 19:41:48 - WARNING - [feedback_manager.py:324] - No candidates found from vector search
2025-04-05 19:41:48,671 [INFO] text2sql.azure [azure_client.py:35]: SQL generation started for query: 'get me all the customer'
2025-04-05 19:41:48 - INFO - [azure_client.py:35] - SQL generation started for query: 'get me all the customer'
2025-04-05 19:41:48,672 [INFO] text2sql.azure [azure_client.py:69]: Including schema information (587 chars)
2025-04-05 19:41:48 - INFO - [azure_client.py:69] - Including schema information (587 chars)
2025-04-05 19:41:48,673 [INFO] text2sql.azure [azure_client.py:104]: Including 3 SQL examples (no similarity examples found)
2025-04-05 19:41:48 - INFO - [azure_client.py:104] - Including 3 SQL examples (no similarity examples found)
2025-04-05 19:41:48,674 [INFO] text2sql.azure [azure_client.py:114]: PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some example queries and their SQL:\nQuestion: How many records are in the customers table?\nSQL: SELECT COUNT(*) AS record_count FROM customers\n\nQuestion: Get all columns from customers\nSQL: SELECT * FROM customers LIMIT 5\n\nQuestion: Get record from customers by customer_id\nSQL: SELECT * FROM customers WHERE customer_id = 1\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me all the customer'}]
2025-04-05 19:41:48 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some example queries and their SQL:\nQuestion: How many records are in the customers table?\nSQL: SELECT COUNT(*) AS record_count FROM customers\n\nQuestion: Get all columns from customers\nSQL: SELECT * FROM customers LIMIT 5\n\nQuestion: Get record from customers by customer_id\nSQL: SELECT * FROM customers WHERE customer_id = 1\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me all the customer'}]
2025-04-05 19:41:48,675 [INFO] text2sql.llm_engine [llm_engine.py:55]: [SQL_GEN] Completion generation started
2025-04-05 19:41:48 - INFO - [llm_engine.py:55] - [SQL_GEN] Completion generation started
2025-04-05 19:41:48,852 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:41:48] "GET /api/query/progress/d7d1a52a-c944-40fb-9777-e33c45e2baeb HTTP/1.1" 200 -
2025-04-05 19:41:49,258 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:41:49] "GET /api/query/progress/d7d1a52a-c944-40fb-9777-e33c45e2baeb HTTP/1.1" 200 -
2025-04-05 19:41:50,054 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:41:50] "GET /api/query/progress/d7d1a52a-c944-40fb-9777-e33c45e2baeb HTTP/1.1" 200 -
2025-04-05 19:41:50,323 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:41:50] "GET /api/query/progress/d7d1a52a-c944-40fb-9777-e33c45e2baeb HTTP/1.1" 200 -
2025-04-05 19:41:50,557 [INFO] text2sql.llm_engine [llm_engine.py:92]: [SQL_GEN] Completion generation completed in 1.88s
2025-04-05 19:41:50 - INFO - [llm_engine.py:92] - [SQL_GEN] Completion generation completed in 1.88s
2025-04-05 19:41:50,558 [INFO] text2sql.llm_engine [llm_engine.py:93]: **************************
2025-04-05 19:41:50 - INFO - [llm_engine.py:93] - **************************
2025-04-05 19:41:50,559 [INFO] text2sql.azure [azure_client.py:150]: Parsing SQL from model response
2025-04-05 19:41:50 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-05 19:41:50,560 [INFO] text2sql.azure [azure_client.py:157]: Found SQL code block in response
2025-04-05 19:41:50 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-05 19:41:50,561 [INFO] text2sql.azure [azure_client.py:171]: Extracted SQL query (24 chars) and explanation (204 chars)
2025-04-05 19:41:50 - INFO - [azure_client.py:171] - Extracted SQL query (24 chars) and explanation (204 chars)
2025-04-05 19:41:50,562 [INFO] text2sql.azure [azure_client.py:124]: Generated SQL: SELECT *
FROM customers;
2025-04-05 19:41:50 - INFO - [azure_client.py:124] - Generated SQL: SELECT *
FROM customers;
2025-04-05 19:41:50,564 [INFO] text2sql.azure [azure_client.py:132]: SQL generation completed in 1.89s
2025-04-05 19:41:50 - INFO - [azure_client.py:132] - SQL generation completed in 1.89s
2025-04-05 19:41:50,566 [INFO] text2sql.database [database.py:65]: Executing SQL query: SELECT *
FROM customers;
2025-04-05 19:41:50 - INFO - [database.py:65] - Executing SQL query: SELECT *
FROM customers;
2025-04-05 19:41:50,581 [INFO] text2sql.database [database.py:86]: Query returned 5 rows with 11 columns
2025-04-05 19:41:50 - INFO - [database.py:86] - Query returned 5 rows with 11 columns
2025-04-05 19:41:50,590 [INFO] text2sql.database [database.py:95]: Query processing completed in 0.02s
2025-04-05 19:41:50 - INFO - [database.py:95] - Query processing completed in 0.02s
2025-04-05 19:41:50,592 [INFO] text2sql.sql_generator [sql_generator.py:376]: SQL generation completed in 6.20s
2025-04-05 19:41:50,593 [INFO] text2sql.sql_generator [sql_generator.py:125]: Query processing completed in 6.21s
2025-04-05 19:41:50,738 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:41:50] "GET /api/query/progress/d7d1a52a-c944-40fb-9777-e33c45e2baeb HTTP/1.1" 200 -
2025-04-05 19:41:59,697 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:41:59] "GET / HTTP/1.1" 200 -
2025-04-05 19:41:59,926 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:41:59] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 19:42:00,062 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:42:00] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 19:42:00,066 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:42:00] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 19:42:00,067 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:42:00] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 19:42:00,068 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:42:00] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 19:42:00,070 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:42:00] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 19:42:00,240 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:42:00] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 19:42:00,382 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:42:00] "GET /static/js/dashboard.js HTTP/1.1" 200 -
2025-04-05 19:42:00,387 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:42:00] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 19:42:00,745 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:42:00] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 19:42:04,981 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'get me all the customers'
2025-04-05 19:42:04,982 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:42:04] "POST /api/query HTTP/1.1" 200 -
2025-04-05 19:42:04,983 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'get me all the customers'
2025-04-05 19:42:04,985 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-05 19:42:04,986 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.00s
2025-04-05 19:42:04,987 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-05 19:42:04,988 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-05 19:42:04,988 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-05 19:42:04 - INFO - [database.py:44] - Attempting database connection
2025-04-05 19:42:04,990 [INFO] text2sql.database [database.py:48]: Database connection established in 0.00s
2025-04-05 19:42:04 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-05 19:42:04,992 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'get me all the customers'
2025-04-05 19:42:04,992 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-05 19:42:04,993 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-05 19:42:04,994 [INFO] text2sql.llm_engine [llm_engine.py:55]: [TABLE] Completion generation started
2025-04-05 19:42:04 - INFO - [llm_engine.py:55] - [TABLE] Completion generation started
2025-04-05 19:42:05,512 [INFO] text2sql.llm_engine [llm_engine.py:92]: [TABLE] Completion generation completed in 0.52s
2025-04-05 19:42:05 - INFO - [llm_engine.py:92] - [TABLE] Completion generation completed in 0.52s
2025-04-05 19:42:05,515 [INFO] text2sql.llm_engine [llm_engine.py:93]: **************************
2025-04-05 19:42:05 - INFO - [llm_engine.py:93] - **************************
2025-04-05 19:42:05,517 [INFO] text2sql.agents.table [table_agent.py:69]: Raw model response: 'customers'
2025-04-05 19:42:05,519 [INFO] text2sql.agents.table [table_agent.py:90]: Table selection completed in 0.53s. Selected: customers
2025-04-05 19:42:05,521 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'get me all the customers'
2025-04-05 19:42:05,522 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: customers
2025-04-05 19:42:05,524 [INFO] text2sql.agents.column [column_agent.py:38]: Only one table involved (customers). Skipping LLM call and including all columns.
2025-04-05 19:42:05,526 [INFO] text2sql.feedback [feedback_manager.py:267]: Stage 1: Vector search for 'get me all the customers...'
2025-04-05 19:42:05 - INFO - [feedback_manager.py:267] - Stage 1: Vector search for 'get me all the customers...'
2025-04-05 19:42:05,583 [WARNING] text2sql.feedback [feedback_manager.py:324]: No candidates found from vector search
2025-04-05 19:42:05 - WARNING - [feedback_manager.py:324] - No candidates found from vector search
2025-04-05 19:42:05,584 [INFO] text2sql.azure [azure_client.py:35]: SQL generation started for query: 'get me all the customers'
2025-04-05 19:42:05 - INFO - [azure_client.py:35] - SQL generation started for query: 'get me all the customers'
2025-04-05 19:42:05,586 [INFO] text2sql.azure [azure_client.py:69]: Including schema information (587 chars)
2025-04-05 19:42:05 - INFO - [azure_client.py:69] - Including schema information (587 chars)
2025-04-05 19:42:05,587 [INFO] text2sql.azure [azure_client.py:104]: Including 3 SQL examples (no similarity examples found)
2025-04-05 19:42:05 - INFO - [azure_client.py:104] - Including 3 SQL examples (no similarity examples found)
2025-04-05 19:42:05,589 [INFO] text2sql.azure [azure_client.py:114]: PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some example queries and their SQL:\nQuestion: How many records are in the customers table?\nSQL: SELECT COUNT(*) AS record_count FROM customers\n\nQuestion: Get all columns from customers\nSQL: SELECT * FROM customers LIMIT 5\n\nQuestion: Get record from customers by customer_id\nSQL: SELECT * FROM customers WHERE customer_id = 1\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me all the customers'}]
2025-04-05 19:42:05 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some example queries and their SQL:\nQuestion: How many records are in the customers table?\nSQL: SELECT COUNT(*) AS record_count FROM customers\n\nQuestion: Get all columns from customers\nSQL: SELECT * FROM customers LIMIT 5\n\nQuestion: Get record from customers by customer_id\nSQL: SELECT * FROM customers WHERE customer_id = 1\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me all the customers'}]
2025-04-05 19:42:05,591 [INFO] text2sql.llm_engine [llm_engine.py:55]: [SQL_GEN] Completion generation started
2025-04-05 19:42:05 - INFO - [llm_engine.py:55] - [SQL_GEN] Completion generation started
2025-04-05 19:42:05,789 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:42:05] "GET /api/query/progress/920de01f-85b0-43e1-a60d-0bfd09f27600 HTTP/1.1" 200 -
2025-04-05 19:42:06,057 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:42:06] "GET /api/query/progress/920de01f-85b0-43e1-a60d-0bfd09f27600 HTTP/1.1" 200 -
2025-04-05 19:42:06,463 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:42:06] "GET /api/query/progress/920de01f-85b0-43e1-a60d-0bfd09f27600 HTTP/1.1" 200 -
2025-04-05 19:42:07,018 [INFO] text2sql.llm_engine [llm_engine.py:92]: [SQL_GEN] Completion generation completed in 1.43s
2025-04-05 19:42:07 - INFO - [llm_engine.py:92] - [SQL_GEN] Completion generation completed in 1.43s
2025-04-05 19:42:07,021 [INFO] text2sql.llm_engine [llm_engine.py:93]: **************************
2025-04-05 19:42:07 - INFO - [llm_engine.py:93] - **************************
2025-04-05 19:42:07,027 [INFO] text2sql.azure [azure_client.py:150]: Parsing SQL from model response
2025-04-05 19:42:07 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-05 19:42:07,031 [INFO] text2sql.azure [azure_client.py:157]: Found SQL code block in response
2025-04-05 19:42:07 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-05 19:42:07,036 [INFO] text2sql.azure [azure_client.py:171]: Extracted SQL query (24 chars) and explanation (280 chars)
2025-04-05 19:42:07 - INFO - [azure_client.py:171] - Extracted SQL query (24 chars) and explanation (280 chars)
2025-04-05 19:42:07,040 [INFO] text2sql.azure [azure_client.py:124]: Generated SQL: SELECT *
FROM customers;
2025-04-05 19:42:07 - INFO - [azure_client.py:124] - Generated SQL: SELECT *
FROM customers;
2025-04-05 19:42:07,047 [INFO] text2sql.azure [azure_client.py:132]: SQL generation completed in 1.46s
2025-04-05 19:42:07 - INFO - [azure_client.py:132] - SQL generation completed in 1.46s
2025-04-05 19:42:07,050 [INFO] text2sql.database [database.py:65]: Executing SQL query: SELECT *
FROM customers;
2025-04-05 19:42:07 - INFO - [database.py:65] - Executing SQL query: SELECT *
FROM customers;
2025-04-05 19:42:07,055 [INFO] text2sql.database [database.py:86]: Query returned 5 rows with 11 columns
2025-04-05 19:42:07 - INFO - [database.py:86] - Query returned 5 rows with 11 columns
2025-04-05 19:42:07,063 [INFO] text2sql.database [database.py:95]: Query processing completed in 0.01s
2025-04-05 19:42:07 - INFO - [database.py:95] - Query processing completed in 0.01s
2025-04-05 19:42:07,066 [INFO] text2sql.sql_generator [sql_generator.py:376]: SQL generation completed in 2.08s
2025-04-05 19:42:07,067 [INFO] text2sql.sql_generator [sql_generator.py:125]: Query processing completed in 2.09s
2025-04-05 19:42:07,261 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:42:07] "GET /api/query/progress/920de01f-85b0-43e1-a60d-0bfd09f27600 HTTP/1.1" 200 -
2025-04-05 19:42:53,846 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:42:53] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 19:45:00,711 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:00] "GET / HTTP/1.1" 200 -
2025-04-05 19:45:00,955 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:00] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-05 19:45:01,058 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:01] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 19:45:01,064 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:01] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 19:45:01,074 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:01] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 19:45:01,076 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:01] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 19:45:01,080 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:01] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 19:45:12,523 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:12] "GET / HTTP/1.1" 200 -
2025-04-05 19:45:12,556 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:12] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 19:45:12,558 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:12] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 19:45:12,884 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:12] "GET /static/js/dashboard.js HTTP/1.1" 200 -
2025-04-05 19:45:12,885 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:12] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 19:45:12,885 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:12] "GET /static/js/feedback.js HTTP/1.1" 200 -
2025-04-05 19:45:12,890 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:12] "GET /static/js/query-handler.js HTTP/1.1" 200 -
2025-04-05 19:45:12,897 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:12] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 19:45:12,898 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:12] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 19:45:13,210 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:13] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 19:45:13,563 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:13] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 19:45:17,193 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'get me all the customers'
2025-04-05 19:45:17,193 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:17] "POST /api/query HTTP/1.1" 200 -
2025-04-05 19:45:17,194 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'get me all the customers'
2025-04-05 19:45:17,195 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-05 19:45:17,196 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.00s
2025-04-05 19:45:17,197 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-05 19:45:17,198 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-05 19:45:17,199 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-05 19:45:17 - INFO - [database.py:44] - Attempting database connection
2025-04-05 19:45:17,201 [INFO] text2sql.database [database.py:48]: Database connection established in 0.00s
2025-04-05 19:45:17 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-05 19:45:17,203 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'get me all the customers'
2025-04-05 19:45:17,203 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-05 19:45:17,204 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-05 19:45:17,205 [INFO] text2sql.llm_engine [llm_engine.py:55]: [TABLE] Completion generation started
2025-04-05 19:45:17 - INFO - [llm_engine.py:55] - [TABLE] Completion generation started
2025-04-05 19:45:17,669 [INFO] text2sql.llm_engine [llm_engine.py:92]: [TABLE] Completion generation completed in 0.46s
2025-04-05 19:45:17 - INFO - [llm_engine.py:92] - [TABLE] Completion generation completed in 0.46s
2025-04-05 19:45:17,670 [INFO] text2sql.llm_engine [llm_engine.py:93]: **************************
2025-04-05 19:45:17 - INFO - [llm_engine.py:93] - **************************
2025-04-05 19:45:17,671 [INFO] text2sql.agents.table [table_agent.py:69]: Raw model response: 'customers'
2025-04-05 19:45:17,672 [INFO] text2sql.agents.table [table_agent.py:90]: Table selection completed in 0.47s. Selected: customers
2025-04-05 19:45:17,673 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'get me all the customers'
2025-04-05 19:45:17,673 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: customers
2025-04-05 19:45:17,674 [INFO] text2sql.agents.column [column_agent.py:38]: Only one table involved (customers). Skipping LLM call and including all columns.
2025-04-05 19:45:17,675 [INFO] text2sql.feedback [feedback_manager.py:267]: Stage 1: Vector search for 'get me all the customers...'
2025-04-05 19:45:17 - INFO - [feedback_manager.py:267] - Stage 1: Vector search for 'get me all the customers...'
2025-04-05 19:45:17,699 [WARNING] text2sql.feedback [feedback_manager.py:324]: No candidates found from vector search
2025-04-05 19:45:17 - WARNING - [feedback_manager.py:324] - No candidates found from vector search
2025-04-05 19:45:17,700 [INFO] text2sql.azure [azure_client.py:35]: SQL generation started for query: 'get me all the customers'
2025-04-05 19:45:17 - INFO - [azure_client.py:35] - SQL generation started for query: 'get me all the customers'
2025-04-05 19:45:17,701 [INFO] text2sql.azure [azure_client.py:69]: Including schema information (587 chars)
2025-04-05 19:45:17 - INFO - [azure_client.py:69] - Including schema information (587 chars)
2025-04-05 19:45:17,702 [INFO] text2sql.azure [azure_client.py:104]: Including 3 SQL examples (no similarity examples found)
2025-04-05 19:45:17 - INFO - [azure_client.py:104] - Including 3 SQL examples (no similarity examples found)
2025-04-05 19:45:17,703 [INFO] text2sql.azure [azure_client.py:114]: PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some example queries and their SQL:\nQuestion: How many records are in the customers table?\nSQL: SELECT COUNT(*) AS record_count FROM customers\n\nQuestion: Get all columns from customers\nSQL: SELECT * FROM customers LIMIT 5\n\nQuestion: Get record from customers by customer_id\nSQL: SELECT * FROM customers WHERE customer_id = 1\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me all the customers'}]
2025-04-05 19:45:17 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some example queries and their SQL:\nQuestion: How many records are in the customers table?\nSQL: SELECT COUNT(*) AS record_count FROM customers\n\nQuestion: Get all columns from customers\nSQL: SELECT * FROM customers LIMIT 5\n\nQuestion: Get record from customers by customer_id\nSQL: SELECT * FROM customers WHERE customer_id = 1\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me all the customers'}]
2025-04-05 19:45:17,704 [INFO] text2sql.llm_engine [llm_engine.py:55]: [SQL_GEN] Completion generation started
2025-04-05 19:45:17 - INFO - [llm_engine.py:55] - [SQL_GEN] Completion generation started
2025-04-05 19:45:18,022 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:18] "GET /api/query/progress/576095fd-d40f-4edb-ba68-fbcf3c2cba69 HTTP/1.1" 200 -
2025-04-05 19:45:18,266 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:18] "GET /api/query/progress/576095fd-d40f-4edb-ba68-fbcf3c2cba69 HTTP/1.1" 200 -
2025-04-05 19:45:18,704 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:18] "GET /api/query/progress/576095fd-d40f-4edb-ba68-fbcf3c2cba69 HTTP/1.1" 200 -
2025-04-05 19:45:19,486 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:19] "GET /api/query/progress/576095fd-d40f-4edb-ba68-fbcf3c2cba69 HTTP/1.1" 200 -
2025-04-05 19:45:19,743 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:19] "GET /api/query/progress/576095fd-d40f-4edb-ba68-fbcf3c2cba69 HTTP/1.1" 200 -
2025-04-05 19:45:20,172 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:20] "GET /api/query/progress/576095fd-d40f-4edb-ba68-fbcf3c2cba69 HTTP/1.1" 200 -
2025-04-05 19:45:20,963 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:20] "GET /api/query/progress/576095fd-d40f-4edb-ba68-fbcf3c2cba69 HTTP/1.1" 200 -
2025-04-05 19:45:21,211 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:21] "GET /api/query/progress/576095fd-d40f-4edb-ba68-fbcf3c2cba69 HTTP/1.1" 200 -
2025-04-05 19:45:21,644 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:21] "GET /api/query/progress/576095fd-d40f-4edb-ba68-fbcf3c2cba69 HTTP/1.1" 200 -
2025-04-05 19:45:22,421 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:22] "GET /api/query/progress/576095fd-d40f-4edb-ba68-fbcf3c2cba69 HTTP/1.1" 200 -
2025-04-05 19:45:22,686 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:22] "GET /api/query/progress/576095fd-d40f-4edb-ba68-fbcf3c2cba69 HTTP/1.1" 200 -
2025-04-05 19:45:23,093 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:23] "GET /api/query/progress/576095fd-d40f-4edb-ba68-fbcf3c2cba69 HTTP/1.1" 200 -
2025-04-05 19:45:23,895 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:23] "GET /api/query/progress/576095fd-d40f-4edb-ba68-fbcf3c2cba69 HTTP/1.1" 200 -
2025-04-05 19:45:24,139 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:24] "GET /api/query/progress/576095fd-d40f-4edb-ba68-fbcf3c2cba69 HTTP/1.1" 200 -
2025-04-05 19:45:24,551 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:24] "GET /api/query/progress/576095fd-d40f-4edb-ba68-fbcf3c2cba69 HTTP/1.1" 200 -
2025-04-05 19:45:25,333 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:25] "GET /api/query/progress/576095fd-d40f-4edb-ba68-fbcf3c2cba69 HTTP/1.1" 200 -
2025-04-05 19:45:25,576 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:25] "GET /api/query/progress/576095fd-d40f-4edb-ba68-fbcf3c2cba69 HTTP/1.1" 200 -
2025-04-05 19:45:26,014 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:26] "GET /api/query/progress/576095fd-d40f-4edb-ba68-fbcf3c2cba69 HTTP/1.1" 200 -
2025-04-05 19:45:26,796 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:26] "GET /api/query/progress/576095fd-d40f-4edb-ba68-fbcf3c2cba69 HTTP/1.1" 200 -
2025-04-05 19:45:27,050 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:27] "GET /api/query/progress/576095fd-d40f-4edb-ba68-fbcf3c2cba69 HTTP/1.1" 200 -
2025-04-05 19:45:27,457 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:27] "GET /api/query/progress/576095fd-d40f-4edb-ba68-fbcf3c2cba69 HTTP/1.1" 200 -
2025-04-05 19:45:28,258 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:28] "GET /api/query/progress/576095fd-d40f-4edb-ba68-fbcf3c2cba69 HTTP/1.1" 200 -
2025-04-05 19:45:28,509 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:28] "GET /api/query/progress/576095fd-d40f-4edb-ba68-fbcf3c2cba69 HTTP/1.1" 200 -
2025-04-05 19:45:28,922 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:28] "GET /api/query/progress/576095fd-d40f-4edb-ba68-fbcf3c2cba69 HTTP/1.1" 200 -
2025-04-05 19:45:29,728 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:29] "GET /api/query/progress/576095fd-d40f-4edb-ba68-fbcf3c2cba69 HTTP/1.1" 200 -
2025-04-05 19:45:29,971 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:29] "GET /api/query/progress/576095fd-d40f-4edb-ba68-fbcf3c2cba69 HTTP/1.1" 200 -
2025-04-05 19:45:30,390 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:30] "GET /api/query/progress/576095fd-d40f-4edb-ba68-fbcf3c2cba69 HTTP/1.1" 200 -
2025-04-05 19:45:31,195 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:31] "GET /api/query/progress/576095fd-d40f-4edb-ba68-fbcf3c2cba69 HTTP/1.1" 200 -
2025-04-05 19:45:31,436 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:31] "GET /api/query/progress/576095fd-d40f-4edb-ba68-fbcf3c2cba69 HTTP/1.1" 200 -
2025-04-05 19:45:31,845 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:31] "GET /api/query/progress/576095fd-d40f-4edb-ba68-fbcf3c2cba69 HTTP/1.1" 200 -
2025-04-05 19:45:32,649 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:32] "GET /api/query/progress/576095fd-d40f-4edb-ba68-fbcf3c2cba69 HTTP/1.1" 200 -
2025-04-05 19:45:32,911 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:32] "GET /api/query/progress/576095fd-d40f-4edb-ba68-fbcf3c2cba69 HTTP/1.1" 200 -
2025-04-05 19:45:33,315 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:33] "GET /api/query/progress/576095fd-d40f-4edb-ba68-fbcf3c2cba69 HTTP/1.1" 200 -
2025-04-05 19:45:34,113 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:34] "GET /api/query/progress/576095fd-d40f-4edb-ba68-fbcf3c2cba69 HTTP/1.1" 200 -
2025-04-05 19:45:34,371 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:34] "GET /api/query/progress/576095fd-d40f-4edb-ba68-fbcf3c2cba69 HTTP/1.1" 200 -
2025-04-05 19:45:35,173 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:35] "GET /api/query/progress/576095fd-d40f-4edb-ba68-fbcf3c2cba69 HTTP/1.1" 200 -
2025-04-05 19:45:36,445 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:36] "GET /api/query/progress/576095fd-d40f-4edb-ba68-fbcf3c2cba69 HTTP/1.1" 200 -
2025-04-05 19:45:37,110 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:37] "GET /api/query/progress/576095fd-d40f-4edb-ba68-fbcf3c2cba69 HTTP/1.1" 200 -
2025-04-05 19:45:38,412 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:38] "GET /api/query/progress/576095fd-d40f-4edb-ba68-fbcf3c2cba69 HTTP/1.1" 200 -
2025-04-05 19:45:39,086 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:39] "GET /api/query/progress/576095fd-d40f-4edb-ba68-fbcf3c2cba69 HTTP/1.1" 200 -
2025-04-05 19:45:40,386 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:40] "GET /api/query/progress/576095fd-d40f-4edb-ba68-fbcf3c2cba69 HTTP/1.1" 200 -
2025-04-05 19:45:41,043 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:41] "GET /api/query/progress/576095fd-d40f-4edb-ba68-fbcf3c2cba69 HTTP/1.1" 200 -
2025-04-05 19:45:42,255 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:42] "GET /api/query/progress/576095fd-d40f-4edb-ba68-fbcf3c2cba69 HTTP/1.1" 200 -
2025-04-05 19:45:42,521 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:42] "GET /api/query/progress/576095fd-d40f-4edb-ba68-fbcf3c2cba69 HTTP/1.1" 200 -
2025-04-05 19:45:42,621 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:42] "GET /api/query/progress/576095fd-d40f-4edb-ba68-fbcf3c2cba69 HTTP/1.1" 200 -
2025-04-05 19:45:42,703 [INFO] text2sql.llm_engine [llm_engine.py:92]: [SQL_GEN] Completion generation completed in 25.00s
2025-04-05 19:45:42 - INFO - [llm_engine.py:92] - [SQL_GEN] Completion generation completed in 25.00s
2025-04-05 19:45:42,707 [INFO] text2sql.llm_engine [llm_engine.py:93]: **************************
2025-04-05 19:45:42 - INFO - [llm_engine.py:93] - **************************
2025-04-05 19:45:42,714 [INFO] text2sql.azure [azure_client.py:150]: Parsing SQL from model response
2025-04-05 19:45:42 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-05 19:45:42,722 [INFO] text2sql.azure [azure_client.py:157]: Found SQL code block in response
2025-04-05 19:45:42 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-05 19:45:42,729 [INFO] text2sql.azure [azure_client.py:171]: Extracted SQL query (24 chars) and explanation (257 chars)
2025-04-05 19:45:42 - INFO - [azure_client.py:171] - Extracted SQL query (24 chars) and explanation (257 chars)
2025-04-05 19:45:42,732 [INFO] text2sql.azure [azure_client.py:124]: Generated SQL: SELECT *
FROM customers;
2025-04-05 19:45:42 - INFO - [azure_client.py:124] - Generated SQL: SELECT *
FROM customers;
2025-04-05 19:45:42,737 [INFO] text2sql.azure [azure_client.py:132]: SQL generation completed in 25.04s
2025-04-05 19:45:42 - INFO - [azure_client.py:132] - SQL generation completed in 25.04s
2025-04-05 19:45:42,740 [INFO] text2sql.database [database.py:65]: Executing SQL query: SELECT *
FROM customers;
2025-04-05 19:45:42 - INFO - [database.py:65] - Executing SQL query: SELECT *
FROM customers;
2025-04-05 19:45:42,746 [INFO] text2sql.database [database.py:86]: Query returned 5 rows with 11 columns
2025-04-05 19:45:42 - INFO - [database.py:86] - Query returned 5 rows with 11 columns
2025-04-05 19:45:42,753 [INFO] text2sql.database [database.py:95]: Query processing completed in 0.01s
2025-04-05 19:45:42 - INFO - [database.py:95] - Query processing completed in 0.01s
2025-04-05 19:45:42,756 [INFO] text2sql.sql_generator [sql_generator.py:376]: SQL generation completed in 25.56s
2025-04-05 19:45:42,757 [INFO] text2sql.sql_generator [sql_generator.py:125]: Query processing completed in 25.56s
2025-04-05 19:45:43,445 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:45:43] "GET /api/query/progress/576095fd-d40f-4edb-ba68-fbcf3c2cba69 HTTP/1.1" 200 -
2025-04-05 19:48:43,005 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:48:43] "GET / HTTP/1.1" 200 -
2025-04-05 19:48:43,247 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:48:43] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-05 19:48:43,375 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:48:43] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 19:48:43,379 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:48:43] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 19:48:43,388 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:48:43] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 19:48:43,392 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:48:43] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 19:48:43,397 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:48:43] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 19:48:43,565 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:48:43] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 19:48:43,697 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:48:43] "GET /static/js/dashboard.js HTTP/1.1" 200 -
2025-04-05 19:48:43,703 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:48:43] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 19:48:44,059 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:48:44] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 19:48:50,873 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'get me all the customers'
2025-04-05 19:48:50,873 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:48:50] "POST /api/query HTTP/1.1" 200 -
2025-04-05 19:48:50,874 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'get me all the customers'
2025-04-05 19:48:50,875 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-05 19:48:50,876 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.00s
2025-04-05 19:48:50,878 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-05 19:48:50,879 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-05 19:48:50,879 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-05 19:48:50 - INFO - [database.py:44] - Attempting database connection
2025-04-05 19:48:50,881 [INFO] text2sql.database [database.py:48]: Database connection established in 0.00s
2025-04-05 19:48:50 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-05 19:48:50,883 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'get me all the customers'
2025-04-05 19:48:50,884 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-05 19:48:50,885 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-05 19:48:50,886 [INFO] text2sql.llm_engine [llm_engine.py:55]: [TABLE] Completion generation started
2025-04-05 19:48:50 - INFO - [llm_engine.py:55] - [TABLE] Completion generation started
2025-04-05 19:48:51,318 [INFO] text2sql.llm_engine [llm_engine.py:92]: [TABLE] Completion generation completed in 0.43s
2025-04-05 19:48:51 - INFO - [llm_engine.py:92] - [TABLE] Completion generation completed in 0.43s
2025-04-05 19:48:51,319 [INFO] text2sql.llm_engine [llm_engine.py:93]: **************************
2025-04-05 19:48:51 - INFO - [llm_engine.py:93] - **************************
2025-04-05 19:48:51,322 [INFO] text2sql.agents.table [table_agent.py:69]: Raw model response: 'customers'
2025-04-05 19:48:51,322 [INFO] text2sql.agents.table [table_agent.py:90]: Table selection completed in 0.44s. Selected: customers
2025-04-05 19:48:51,323 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'get me all the customers'
2025-04-05 19:48:51,324 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: customers
2025-04-05 19:48:51,325 [INFO] text2sql.agents.column [column_agent.py:38]: Only one table involved (customers). Skipping LLM call and including all columns.
2025-04-05 19:48:51,325 [INFO] text2sql.feedback [feedback_manager.py:267]: Stage 1: Vector search for 'get me all the customers...'
2025-04-05 19:48:51 - INFO - [feedback_manager.py:267] - Stage 1: Vector search for 'get me all the customers...'
2025-04-05 19:48:51,364 [WARNING] text2sql.feedback [feedback_manager.py:324]: No candidates found from vector search
2025-04-05 19:48:51 - WARNING - [feedback_manager.py:324] - No candidates found from vector search
2025-04-05 19:48:51,365 [INFO] text2sql.azure [azure_client.py:35]: SQL generation started for query: 'get me all the customers'
2025-04-05 19:48:51 - INFO - [azure_client.py:35] - SQL generation started for query: 'get me all the customers'
2025-04-05 19:48:51,366 [INFO] text2sql.azure [azure_client.py:69]: Including schema information (587 chars)
2025-04-05 19:48:51 - INFO - [azure_client.py:69] - Including schema information (587 chars)
2025-04-05 19:48:51,367 [INFO] text2sql.azure [azure_client.py:104]: Including 3 SQL examples (no similarity examples found)
2025-04-05 19:48:51 - INFO - [azure_client.py:104] - Including 3 SQL examples (no similarity examples found)
2025-04-05 19:48:51,369 [INFO] text2sql.azure [azure_client.py:114]: PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some example queries and their SQL:\nQuestion: How many records are in the customers table?\nSQL: SELECT COUNT(*) AS record_count FROM customers\n\nQuestion: Get all columns from customers\nSQL: SELECT * FROM customers LIMIT 5\n\nQuestion: Get record from customers by customer_id\nSQL: SELECT * FROM customers WHERE customer_id = 1\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me all the customers'}]
2025-04-05 19:48:51 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some example queries and their SQL:\nQuestion: How many records are in the customers table?\nSQL: SELECT COUNT(*) AS record_count FROM customers\n\nQuestion: Get all columns from customers\nSQL: SELECT * FROM customers LIMIT 5\n\nQuestion: Get record from customers by customer_id\nSQL: SELECT * FROM customers WHERE customer_id = 1\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me all the customers'}]
2025-04-05 19:48:51,371 [INFO] text2sql.llm_engine [llm_engine.py:55]: [SQL_GEN] Completion generation started
2025-04-05 19:48:51 - INFO - [llm_engine.py:55] - [SQL_GEN] Completion generation started
2025-04-05 19:48:51,699 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:48:51] "GET /api/query/progress/f0578671-4df8-4cd5-accf-98f4a755bc79 HTTP/1.1" 200 -
2025-04-05 19:48:51,951 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:48:51] "GET /api/query/progress/f0578671-4df8-4cd5-accf-98f4a755bc79 HTTP/1.1" 200 -
2025-04-05 19:48:52,364 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:48:52] "GET /api/query/progress/f0578671-4df8-4cd5-accf-98f4a755bc79 HTTP/1.1" 200 -
2025-04-05 19:48:52,511 [INFO] text2sql.llm_engine [llm_engine.py:92]: [SQL_GEN] Completion generation completed in 1.14s
2025-04-05 19:48:52 - INFO - [llm_engine.py:92] - [SQL_GEN] Completion generation completed in 1.14s
2025-04-05 19:48:52,517 [INFO] text2sql.llm_engine [llm_engine.py:93]: **************************
2025-04-05 19:48:52 - INFO - [llm_engine.py:93] - **************************
2025-04-05 19:48:52,522 [INFO] text2sql.azure [azure_client.py:150]: Parsing SQL from model response
2025-04-05 19:48:52 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-05 19:48:52,527 [INFO] text2sql.azure [azure_client.py:157]: Found SQL code block in response
2025-04-05 19:48:52 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-05 19:48:52,530 [INFO] text2sql.azure [azure_client.py:171]: Extracted SQL query (24 chars) and explanation (148 chars)
2025-04-05 19:48:52 - INFO - [azure_client.py:171] - Extracted SQL query (24 chars) and explanation (148 chars)
2025-04-05 19:48:52,532 [INFO] text2sql.azure [azure_client.py:124]: Generated SQL: SELECT * FROM customers;
2025-04-05 19:48:52 - INFO - [azure_client.py:124] - Generated SQL: SELECT * FROM customers;
2025-04-05 19:48:52,535 [INFO] text2sql.azure [azure_client.py:132]: SQL generation completed in 1.17s
2025-04-05 19:48:52 - INFO - [azure_client.py:132] - SQL generation completed in 1.17s
2025-04-05 19:48:52,538 [INFO] text2sql.database [database.py:65]: Executing SQL query: SELECT * FROM customers;
2025-04-05 19:48:52 - INFO - [database.py:65] - Executing SQL query: SELECT * FROM customers;
2025-04-05 19:48:52,543 [INFO] text2sql.database [database.py:86]: Query returned 5 rows with 11 columns
2025-04-05 19:48:52 - INFO - [database.py:86] - Query returned 5 rows with 11 columns
2025-04-05 19:48:52,549 [INFO] text2sql.database [database.py:95]: Query processing completed in 0.01s
2025-04-05 19:48:52 - INFO - [database.py:95] - Query processing completed in 0.01s
2025-04-05 19:48:52,553 [INFO] text2sql.sql_generator [sql_generator.py:376]: SQL generation completed in 1.67s
2025-04-05 19:48:52,554 [INFO] text2sql.sql_generator [sql_generator.py:125]: Query processing completed in 1.68s
2025-04-05 19:48:53,170 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:48:53] "GET /api/query/progress/f0578671-4df8-4cd5-accf-98f4a755bc79 HTTP/1.1" 200 -
2025-04-05 19:49:34,408 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:49:34] "GET / HTTP/1.1" 200 -
2025-04-05 19:49:34,760 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:49:34] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 19:49:34,760 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:49:34] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-05 19:49:34,761 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:49:34] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 19:49:34,766 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:49:34] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 19:49:34,768 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:49:34] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 19:49:34,775 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:49:34] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 19:49:35,070 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:49:35] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 19:49:35,077 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:49:35] "GET /static/js/dashboard.js HTTP/1.1" 200 -
2025-04-05 19:49:35,081 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:49:35] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 19:49:35,410 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:49:35] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 19:49:36,822 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'get me all the customers'
2025-04-05 19:49:36,823 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:49:36] "POST /api/query HTTP/1.1" 200 -
2025-04-05 19:49:36,824 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'get me all the customers'
2025-04-05 19:49:36,835 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-05 19:49:36,836 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.01s
2025-04-05 19:49:36,837 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-05 19:49:36,839 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-05 19:49:36,841 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-05 19:49:36 - INFO - [database.py:44] - Attempting database connection
2025-04-05 19:49:36,843 [INFO] text2sql.database [database.py:48]: Database connection established in 0.00s
2025-04-05 19:49:36 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-05 19:49:36,845 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'get me all the customers'
2025-04-05 19:49:36,845 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-05 19:49:36,846 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-05 19:49:36,846 [INFO] text2sql.llm_engine [llm_engine.py:55]: [TABLE] Completion generation started
2025-04-05 19:49:36 - INFO - [llm_engine.py:55] - [TABLE] Completion generation started
2025-04-05 19:49:38,198 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:49:38] "GET /api/query/progress/076d850c-1171-41c2-be35-765d49ef0ad4 HTTP/1.1" 200 -
2025-04-05 19:49:38,459 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:49:38] "GET /api/query/progress/076d850c-1171-41c2-be35-765d49ef0ad4 HTTP/1.1" 200 -
2025-04-05 19:49:38,884 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:49:38] "GET /api/query/progress/076d850c-1171-41c2-be35-765d49ef0ad4 HTTP/1.1" 200 -
2025-04-05 19:49:39,692 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:49:39] "GET /api/query/progress/076d850c-1171-41c2-be35-765d49ef0ad4 HTTP/1.1" 200 -
2025-04-05 19:49:39,928 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:49:39] "GET /api/query/progress/076d850c-1171-41c2-be35-765d49ef0ad4 HTTP/1.1" 200 -
2025-04-05 19:49:40,364 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:49:40] "GET /api/query/progress/076d850c-1171-41c2-be35-765d49ef0ad4 HTTP/1.1" 200 -
2025-04-05 19:49:41,164 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:49:41] "GET /api/query/progress/076d850c-1171-41c2-be35-765d49ef0ad4 HTTP/1.1" 200 -
2025-04-05 19:49:41,429 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:49:41] "GET /api/query/progress/076d850c-1171-41c2-be35-765d49ef0ad4 HTTP/1.1" 200 -
2025-04-05 19:49:41,835 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:49:41] "GET /api/query/progress/076d850c-1171-41c2-be35-765d49ef0ad4 HTTP/1.1" 200 -
2025-04-05 19:49:42,632 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:49:42] "GET /api/query/progress/076d850c-1171-41c2-be35-765d49ef0ad4 HTTP/1.1" 200 -
2025-04-05 19:49:42,876 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:49:42] "GET /api/query/progress/076d850c-1171-41c2-be35-765d49ef0ad4 HTTP/1.1" 200 -
2025-04-05 19:49:43,309 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:49:43] "GET /api/query/progress/076d850c-1171-41c2-be35-765d49ef0ad4 HTTP/1.1" 200 -
2025-04-05 19:49:44,109 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:49:44] "GET /api/query/progress/076d850c-1171-41c2-be35-765d49ef0ad4 HTTP/1.1" 200 -
2025-04-05 19:49:44,357 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:49:44] "GET /api/query/progress/076d850c-1171-41c2-be35-765d49ef0ad4 HTTP/1.1" 200 -
2025-04-05 19:49:44,730 [INFO] text2sql.llm_engine [llm_engine.py:92]: [TABLE] Completion generation completed in 7.88s
2025-04-05 19:49:44 - INFO - [llm_engine.py:92] - [TABLE] Completion generation completed in 7.88s
2025-04-05 19:49:44,734 [INFO] text2sql.llm_engine [llm_engine.py:93]: **************************
2025-04-05 19:49:44 - INFO - [llm_engine.py:93] - **************************
2025-04-05 19:49:44,741 [INFO] text2sql.agents.table [table_agent.py:69]: Raw model response: 'customers'
2025-04-05 19:49:44,744 [INFO] text2sql.agents.table [table_agent.py:90]: Table selection completed in 7.90s. Selected: customers
2025-04-05 19:49:44,748 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'get me all the customers'
2025-04-05 19:49:44,750 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: customers
2025-04-05 19:49:44,752 [INFO] text2sql.agents.column [column_agent.py:38]: Only one table involved (customers). Skipping LLM call and including all columns.
2025-04-05 19:49:44,753 [INFO] text2sql.feedback [feedback_manager.py:267]: Stage 1: Vector search for 'get me all the customers...'
2025-04-05 19:49:44 - INFO - [feedback_manager.py:267] - Stage 1: Vector search for 'get me all the customers...'
2025-04-05 19:49:44,778 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:49:44] "GET /api/query/progress/076d850c-1171-41c2-be35-765d49ef0ad4 HTTP/1.1" 200 -
2025-04-05 19:49:44,791 [WARNING] text2sql.feedback [feedback_manager.py:324]: No candidates found from vector search
2025-04-05 19:49:44 - WARNING - [feedback_manager.py:324] - No candidates found from vector search
2025-04-05 19:49:44,793 [INFO] text2sql.azure [azure_client.py:35]: SQL generation started for query: 'get me all the customers'
2025-04-05 19:49:44 - INFO - [azure_client.py:35] - SQL generation started for query: 'get me all the customers'
2025-04-05 19:49:44,794 [INFO] text2sql.azure [azure_client.py:69]: Including schema information (587 chars)
2025-04-05 19:49:44 - INFO - [azure_client.py:69] - Including schema information (587 chars)
2025-04-05 19:49:44,795 [INFO] text2sql.azure [azure_client.py:104]: Including 3 SQL examples (no similarity examples found)
2025-04-05 19:49:44 - INFO - [azure_client.py:104] - Including 3 SQL examples (no similarity examples found)
2025-04-05 19:49:44,796 [INFO] text2sql.azure [azure_client.py:114]: PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some example queries and their SQL:\nQuestion: How many records are in the customers table?\nSQL: SELECT COUNT(*) AS record_count FROM customers\n\nQuestion: Get all columns from customers\nSQL: SELECT * FROM customers LIMIT 5\n\nQuestion: Get record from customers by customer_id\nSQL: SELECT * FROM customers WHERE customer_id = 1\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me all the customers'}]
2025-04-05 19:49:44 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some example queries and their SQL:\nQuestion: How many records are in the customers table?\nSQL: SELECT COUNT(*) AS record_count FROM customers\n\nQuestion: Get all columns from customers\nSQL: SELECT * FROM customers LIMIT 5\n\nQuestion: Get record from customers by customer_id\nSQL: SELECT * FROM customers WHERE customer_id = 1\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me all the customers'}]
2025-04-05 19:49:44,797 [INFO] text2sql.llm_engine [llm_engine.py:55]: [SQL_GEN] Completion generation started
2025-04-05 19:49:44 - INFO - [llm_engine.py:55] - [SQL_GEN] Completion generation started
2025-04-05 19:49:45,580 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:49:45] "GET /api/query/progress/076d850c-1171-41c2-be35-765d49ef0ad4 HTTP/1.1" 200 -
2025-04-05 19:49:45,841 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:49:45] "GET /api/query/progress/076d850c-1171-41c2-be35-765d49ef0ad4 HTTP/1.1" 200 -
2025-04-05 19:49:46,267 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:49:46] "GET /api/query/progress/076d850c-1171-41c2-be35-765d49ef0ad4 HTTP/1.1" 200 -
2025-04-05 19:49:46,309 [INFO] text2sql.llm_engine [llm_engine.py:92]: [SQL_GEN] Completion generation completed in 1.51s
2025-04-05 19:49:46 - INFO - [llm_engine.py:92] - [SQL_GEN] Completion generation completed in 1.51s
2025-04-05 19:49:46,311 [INFO] text2sql.llm_engine [llm_engine.py:93]: **************************
2025-04-05 19:49:46 - INFO - [llm_engine.py:93] - **************************
2025-04-05 19:49:46,312 [INFO] text2sql.azure [azure_client.py:150]: Parsing SQL from model response
2025-04-05 19:49:46 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-05 19:49:46,313 [INFO] text2sql.azure [azure_client.py:157]: Found SQL code block in response
2025-04-05 19:49:46 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-05 19:49:46,314 [INFO] text2sql.azure [azure_client.py:171]: Extracted SQL query (23 chars) and explanation (297 chars)
2025-04-05 19:49:46 - INFO - [azure_client.py:171] - Extracted SQL query (23 chars) and explanation (297 chars)
2025-04-05 19:49:46,314 [INFO] text2sql.azure [azure_client.py:124]: Generated SQL: SELECT * FROM customers
2025-04-05 19:49:46 - INFO - [azure_client.py:124] - Generated SQL: SELECT * FROM customers
2025-04-05 19:49:46,316 [INFO] text2sql.azure [azure_client.py:132]: SQL generation completed in 1.52s
2025-04-05 19:49:46 - INFO - [azure_client.py:132] - SQL generation completed in 1.52s
2025-04-05 19:49:46,317 [INFO] text2sql.database [database.py:65]: Executing SQL query: SELECT * FROM customers
2025-04-05 19:49:46 - INFO - [database.py:65] - Executing SQL query: SELECT * FROM customers
2025-04-05 19:49:46,320 [INFO] text2sql.database [database.py:86]: Query returned 5 rows with 11 columns
2025-04-05 19:49:46 - INFO - [database.py:86] - Query returned 5 rows with 11 columns
2025-04-05 19:49:46,323 [INFO] text2sql.database [database.py:95]: Query processing completed in 0.01s
2025-04-05 19:49:46 - INFO - [database.py:95] - Query processing completed in 0.01s
2025-04-05 19:49:46,325 [INFO] text2sql.sql_generator [sql_generator.py:376]: SQL generation completed in 9.49s
2025-04-05 19:49:46,326 [INFO] text2sql.sql_generator [sql_generator.py:125]: Query processing completed in 9.50s
2025-04-05 19:49:47,061 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:49:47] "GET /api/query/progress/076d850c-1171-41c2-be35-765d49ef0ad4 HTTP/1.1" 200 -
2025-04-05 19:51:18,647 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:51:18] "GET / HTTP/1.1" 200 -
2025-04-05 19:51:18,908 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:51:18] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 19:51:19,003 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:51:19] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 19:51:19,006 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:51:19] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 19:51:19,007 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:51:19] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 19:51:19,011 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:51:19] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 19:51:19,012 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:51:19] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 19:51:19,215 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:51:19] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 19:51:19,311 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:51:19] "GET /static/js/dashboard.js HTTP/1.1" 200 -
2025-04-05 19:51:19,320 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:51:19] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 19:51:19,695 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:51:19] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 19:51:21,168 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'get me all the customers'
2025-04-05 19:51:21,169 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:51:21] "POST /api/query HTTP/1.1" 200 -
2025-04-05 19:51:21,169 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'get me all the customers'
2025-04-05 19:51:21,171 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-05 19:51:21,172 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.00s
2025-04-05 19:51:21,173 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-05 19:51:21,174 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-05 19:51:21,175 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-05 19:51:21 - INFO - [database.py:44] - Attempting database connection
2025-04-05 19:51:21,176 [INFO] text2sql.database [database.py:48]: Database connection established in 0.00s
2025-04-05 19:51:21 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-05 19:51:21,177 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'get me all the customers'
2025-04-05 19:51:21,178 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-05 19:51:21,178 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-05 19:51:21,178 [INFO] text2sql.llm_engine [llm_engine.py:55]: [TABLE] Completion generation started
2025-04-05 19:51:21 - INFO - [llm_engine.py:55] - [TABLE] Completion generation started
2025-04-05 19:51:21,619 [INFO] text2sql.llm_engine [llm_engine.py:92]: [TABLE] Completion generation completed in 0.44s
2025-04-05 19:51:21 - INFO - [llm_engine.py:92] - [TABLE] Completion generation completed in 0.44s
2025-04-05 19:51:21,619 [INFO] text2sql.llm_engine [llm_engine.py:93]: **************************
2025-04-05 19:51:21 - INFO - [llm_engine.py:93] - **************************
2025-04-05 19:51:21,620 [INFO] text2sql.agents.table [table_agent.py:69]: Raw model response: 'customers'
2025-04-05 19:51:21,621 [INFO] text2sql.agents.table [table_agent.py:90]: Table selection completed in 0.44s. Selected: customers
2025-04-05 19:51:21,621 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'get me all the customers'
2025-04-05 19:51:21,621 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: customers
2025-04-05 19:51:21,622 [INFO] text2sql.agents.column [column_agent.py:38]: Only one table involved (customers). Skipping LLM call and including all columns.
2025-04-05 19:51:21,622 [INFO] text2sql.feedback [feedback_manager.py:267]: Stage 1: Vector search for 'get me all the customers...'
2025-04-05 19:51:21 - INFO - [feedback_manager.py:267] - Stage 1: Vector search for 'get me all the customers...'
2025-04-05 19:51:21,644 [WARNING] text2sql.feedback [feedback_manager.py:324]: No candidates found from vector search
2025-04-05 19:51:21 - WARNING - [feedback_manager.py:324] - No candidates found from vector search
2025-04-05 19:51:21,645 [INFO] text2sql.azure [azure_client.py:35]: SQL generation started for query: 'get me all the customers'
2025-04-05 19:51:21 - INFO - [azure_client.py:35] - SQL generation started for query: 'get me all the customers'
2025-04-05 19:51:21,646 [INFO] text2sql.azure [azure_client.py:69]: Including schema information (587 chars)
2025-04-05 19:51:21 - INFO - [azure_client.py:69] - Including schema information (587 chars)
2025-04-05 19:51:21,647 [INFO] text2sql.azure [azure_client.py:104]: Including 3 SQL examples (no similarity examples found)
2025-04-05 19:51:21 - INFO - [azure_client.py:104] - Including 3 SQL examples (no similarity examples found)
2025-04-05 19:51:21,649 [INFO] text2sql.azure [azure_client.py:114]: PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some example queries and their SQL:\nQuestion: How many records are in the customers table?\nSQL: SELECT COUNT(*) AS record_count FROM customers\n\nQuestion: Get all columns from customers\nSQL: SELECT * FROM customers LIMIT 5\n\nQuestion: Get record from customers by customer_id\nSQL: SELECT * FROM customers WHERE customer_id = 1\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me all the customers'}]
2025-04-05 19:51:21 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some example queries and their SQL:\nQuestion: How many records are in the customers table?\nSQL: SELECT COUNT(*) AS record_count FROM customers\n\nQuestion: Get all columns from customers\nSQL: SELECT * FROM customers LIMIT 5\n\nQuestion: Get record from customers by customer_id\nSQL: SELECT * FROM customers WHERE customer_id = 1\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me all the customers'}]
2025-04-05 19:51:21,650 [INFO] text2sql.llm_engine [llm_engine.py:55]: [SQL_GEN] Completion generation started
2025-04-05 19:51:21 - INFO - [llm_engine.py:55] - [SQL_GEN] Completion generation started
2025-04-05 19:51:21,976 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:51:21] "GET /api/query/progress/d1b4fc68-a355-4f29-9612-73b903c5b507 HTTP/1.1" 200 -
2025-04-05 19:51:22,224 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:51:22] "GET /api/query/progress/d1b4fc68-a355-4f29-9612-73b903c5b507 HTTP/1.1" 200 -
2025-04-05 19:51:22,656 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:51:22] "GET /api/query/progress/d1b4fc68-a355-4f29-9612-73b903c5b507 HTTP/1.1" 200 -
2025-04-05 19:51:23,425 [INFO] text2sql.llm_engine [llm_engine.py:92]: [SQL_GEN] Completion generation completed in 1.78s
2025-04-05 19:51:23 - INFO - [llm_engine.py:92] - [SQL_GEN] Completion generation completed in 1.78s
2025-04-05 19:51:23,432 [INFO] text2sql.llm_engine [llm_engine.py:93]: **************************
2025-04-05 19:51:23 - INFO - [llm_engine.py:93] - **************************
2025-04-05 19:51:23,437 [INFO] text2sql.azure [azure_client.py:150]: Parsing SQL from model response
2025-04-05 19:51:23 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-05 19:51:23,440 [INFO] text2sql.azure [azure_client.py:157]: Found SQL code block in response
2025-04-05 19:51:23 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-05 19:51:23,445 [INFO] text2sql.azure [azure_client.py:171]: Extracted SQL query (24 chars) and explanation (381 chars)
2025-04-05 19:51:23 - INFO - [azure_client.py:171] - Extracted SQL query (24 chars) and explanation (381 chars)
2025-04-05 19:51:23,448 [INFO] text2sql.azure [azure_client.py:124]: Generated SQL: SELECT * FROM customers;
2025-04-05 19:51:23 - INFO - [azure_client.py:124] - Generated SQL: SELECT * FROM customers;
2025-04-05 19:51:23,451 [INFO] text2sql.azure [azure_client.py:132]: SQL generation completed in 1.81s
2025-04-05 19:51:23 - INFO - [azure_client.py:132] - SQL generation completed in 1.81s
2025-04-05 19:51:23,454 [INFO] text2sql.database [database.py:65]: Executing SQL query: SELECT * FROM customers;
2025-04-05 19:51:23 - INFO - [database.py:65] - Executing SQL query: SELECT * FROM customers;
2025-04-05 19:51:23,459 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:51:23] "GET /api/query/progress/d1b4fc68-a355-4f29-9612-73b903c5b507 HTTP/1.1" 200 -
2025-04-05 19:51:23,463 [INFO] text2sql.database [database.py:86]: Query returned 5 rows with 11 columns
2025-04-05 19:51:23 - INFO - [database.py:86] - Query returned 5 rows with 11 columns
2025-04-05 19:51:23,470 [INFO] text2sql.database [database.py:95]: Query processing completed in 0.02s
2025-04-05 19:51:23 - INFO - [database.py:95] - Query processing completed in 0.02s
2025-04-05 19:51:23,473 [INFO] text2sql.sql_generator [sql_generator.py:376]: SQL generation completed in 2.30s
2025-04-05 19:51:23,473 [INFO] text2sql.sql_generator [sql_generator.py:125]: Query processing completed in 2.31s
2025-04-05 19:51:23,715 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:51:23] "GET /api/query/progress/d1b4fc68-a355-4f29-9612-73b903c5b507 HTTP/1.1" 200 -
2025-04-05 19:54:07,144 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:54:07] "GET / HTTP/1.1" 200 -
2025-04-05 19:54:07,406 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:54:07] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 19:54:07,485 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:54:07] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 19:54:07,488 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:54:07] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 19:54:07,490 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:54:07] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 19:54:07,491 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:54:07] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 19:54:07,494 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:54:07] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 19:54:07,728 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:54:07] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 19:54:07,814 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:54:07] "GET /static/js/dashboard.js HTTP/1.1" 200 -
2025-04-05 19:54:07,820 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:54:07] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 19:54:08,164 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:54:08] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 19:54:09,748 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'get me all the customers'
2025-04-05 19:54:09,748 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'get me all the customers'
2025-04-05 19:54:09,749 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:54:09] "POST /api/query HTTP/1.1" 200 -
2025-04-05 19:54:09,750 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-05 19:54:09,751 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.00s
2025-04-05 19:54:09,751 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-05 19:54:09,752 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-05 19:54:09,753 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-05 19:54:09 - INFO - [database.py:44] - Attempting database connection
2025-04-05 19:54:09,754 [INFO] text2sql.database [database.py:48]: Database connection established in 0.00s
2025-04-05 19:54:09 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-05 19:54:09,755 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'get me all the customers'
2025-04-05 19:54:09,756 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-05 19:54:09,756 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-05 19:54:09,756 [INFO] text2sql.llm_engine [llm_engine.py:55]: [TABLE] Completion generation started
2025-04-05 19:54:09 - INFO - [llm_engine.py:55] - [TABLE] Completion generation started
2025-04-05 19:54:10,252 [INFO] text2sql.llm_engine [llm_engine.py:92]: [TABLE] Completion generation completed in 0.50s
2025-04-05 19:54:10 - INFO - [llm_engine.py:92] - [TABLE] Completion generation completed in 0.50s
2025-04-05 19:54:10,253 [INFO] text2sql.llm_engine [llm_engine.py:93]: **************************
2025-04-05 19:54:10 - INFO - [llm_engine.py:93] - **************************
2025-04-05 19:54:10,254 [INFO] text2sql.agents.table [table_agent.py:69]: Raw model response: 'customers'
2025-04-05 19:54:10,255 [INFO] text2sql.agents.table [table_agent.py:90]: Table selection completed in 0.50s. Selected: customers
2025-04-05 19:54:10,255 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'get me all the customers'
2025-04-05 19:54:10,256 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: customers
2025-04-05 19:54:10,256 [INFO] text2sql.agents.column [column_agent.py:38]: Only one table involved (customers). Skipping LLM call and including all columns.
2025-04-05 19:54:10,257 [INFO] text2sql.feedback [feedback_manager.py:267]: Stage 1: Vector search for 'get me all the customers...'
2025-04-05 19:54:10 - INFO - [feedback_manager.py:267] - Stage 1: Vector search for 'get me all the customers...'
2025-04-05 19:54:10,283 [WARNING] text2sql.feedback [feedback_manager.py:324]: No candidates found from vector search
2025-04-05 19:54:10 - WARNING - [feedback_manager.py:324] - No candidates found from vector search
2025-04-05 19:54:10,284 [INFO] text2sql.azure [azure_client.py:35]: SQL generation started for query: 'get me all the customers'
2025-04-05 19:54:10 - INFO - [azure_client.py:35] - SQL generation started for query: 'get me all the customers'
2025-04-05 19:54:10,286 [INFO] text2sql.azure [azure_client.py:69]: Including schema information (587 chars)
2025-04-05 19:54:10 - INFO - [azure_client.py:69] - Including schema information (587 chars)
2025-04-05 19:54:10,287 [INFO] text2sql.azure [azure_client.py:104]: Including 3 SQL examples (no similarity examples found)
2025-04-05 19:54:10 - INFO - [azure_client.py:104] - Including 3 SQL examples (no similarity examples found)
2025-04-05 19:54:10,289 [INFO] text2sql.azure [azure_client.py:114]: PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some example queries and their SQL:\nQuestion: How many records are in the customers table?\nSQL: SELECT COUNT(*) AS record_count FROM customers\n\nQuestion: Get all columns from customers\nSQL: SELECT * FROM customers LIMIT 5\n\nQuestion: Get record from customers by customer_id\nSQL: SELECT * FROM customers WHERE customer_id = 1\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me all the customers'}]
2025-04-05 19:54:10 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some example queries and their SQL:\nQuestion: How many records are in the customers table?\nSQL: SELECT COUNT(*) AS record_count FROM customers\n\nQuestion: Get all columns from customers\nSQL: SELECT * FROM customers LIMIT 5\n\nQuestion: Get record from customers by customer_id\nSQL: SELECT * FROM customers WHERE customer_id = 1\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me all the customers'}]
2025-04-05 19:54:10,291 [INFO] text2sql.llm_engine [llm_engine.py:55]: [SQL_GEN] Completion generation started
2025-04-05 19:54:10 - INFO - [llm_engine.py:55] - [SQL_GEN] Completion generation started
2025-04-05 19:54:10,549 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:54:10] "GET /api/query/progress/1f6ccf91-8314-4379-829d-4177bdc68658 HTTP/1.1" 200 -
2025-04-05 19:54:10,799 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:54:10] "GET /api/query/progress/1f6ccf91-8314-4379-829d-4177bdc68658 HTTP/1.1" 200 -
2025-04-05 19:54:11,243 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:54:11] "GET /api/query/progress/1f6ccf91-8314-4379-829d-4177bdc68658 HTTP/1.1" 200 -
2025-04-05 19:54:11,559 [INFO] text2sql.llm_engine [llm_engine.py:92]: [SQL_GEN] Completion generation completed in 1.27s
2025-04-05 19:54:11 - INFO - [llm_engine.py:92] - [SQL_GEN] Completion generation completed in 1.27s
2025-04-05 19:54:11,563 [INFO] text2sql.llm_engine [llm_engine.py:93]: **************************
2025-04-05 19:54:11 - INFO - [llm_engine.py:93] - **************************
2025-04-05 19:54:11,569 [INFO] text2sql.azure [azure_client.py:150]: Parsing SQL from model response
2025-04-05 19:54:11 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-05 19:54:11,575 [INFO] text2sql.azure [azure_client.py:157]: Found SQL code block in response
2025-04-05 19:54:11 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-05 19:54:11,578 [INFO] text2sql.azure [azure_client.py:171]: Extracted SQL query (24 chars) and explanation (162 chars)
2025-04-05 19:54:11 - INFO - [azure_client.py:171] - Extracted SQL query (24 chars) and explanation (162 chars)
2025-04-05 19:54:11,581 [INFO] text2sql.azure [azure_client.py:124]: Generated SQL: SELECT * FROM customers;
2025-04-05 19:54:11 - INFO - [azure_client.py:124] - Generated SQL: SELECT * FROM customers;
2025-04-05 19:54:11,586 [INFO] text2sql.azure [azure_client.py:132]: SQL generation completed in 1.30s
2025-04-05 19:54:11 - INFO - [azure_client.py:132] - SQL generation completed in 1.30s
2025-04-05 19:54:11,588 [INFO] text2sql.database [database.py:65]: Executing SQL query: SELECT * FROM customers;
2025-04-05 19:54:11 - INFO - [database.py:65] - Executing SQL query: SELECT * FROM customers;
2025-04-05 19:54:11,593 [INFO] text2sql.database [database.py:86]: Query returned 5 rows with 11 columns
2025-04-05 19:54:11 - INFO - [database.py:86] - Query returned 5 rows with 11 columns
2025-04-05 19:54:11,598 [INFO] text2sql.database [database.py:95]: Query processing completed in 0.01s
2025-04-05 19:54:11 - INFO - [database.py:95] - Query processing completed in 0.01s
2025-04-05 19:54:11,601 [INFO] text2sql.sql_generator [sql_generator.py:376]: SQL generation completed in 1.85s
2025-04-05 19:54:11,602 [INFO] text2sql.sql_generator [sql_generator.py:125]: Query processing completed in 1.85s
2025-04-05 19:54:12,047 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:54:12] "GET /api/query/progress/1f6ccf91-8314-4379-829d-4177bdc68658 HTTP/1.1" 200 -
2025-04-05 19:54:42,501 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:54:42] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 19:57:54,142 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'get me count of customers by state'
2025-04-05 19:57:54,142 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:57:54] "POST /api/query HTTP/1.1" 200 -
2025-04-05 19:57:54,143 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'get me count of customers by state'
2025-04-05 19:57:54,143 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-05 19:57:54,144 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.00s
2025-04-05 19:57:54,145 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-05 19:57:54,146 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-05 19:57:54,146 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-05 19:57:54 - INFO - [database.py:44] - Attempting database connection
2025-04-05 19:57:54,148 [INFO] text2sql.database [database.py:48]: Database connection established in 0.00s
2025-04-05 19:57:54 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-05 19:57:54,150 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'get me count of customers by state'
2025-04-05 19:57:54,150 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-05 19:57:54,151 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-05 19:57:54,152 [INFO] text2sql.llm_engine [llm_engine.py:55]: [TABLE] Completion generation started
2025-04-05 19:57:54 - INFO - [llm_engine.py:55] - [TABLE] Completion generation started
2025-04-05 19:57:54,601 [INFO] text2sql.llm_engine [llm_engine.py:92]: [TABLE] Completion generation completed in 0.45s
2025-04-05 19:57:54 - INFO - [llm_engine.py:92] - [TABLE] Completion generation completed in 0.45s
2025-04-05 19:57:54,603 [INFO] text2sql.llm_engine [llm_engine.py:93]: **************************
2025-04-05 19:57:54 - INFO - [llm_engine.py:93] - **************************
2025-04-05 19:57:54,604 [INFO] text2sql.agents.table [table_agent.py:69]: Raw model response: 'customers'
2025-04-05 19:57:54,604 [INFO] text2sql.agents.table [table_agent.py:90]: Table selection completed in 0.45s. Selected: customers
2025-04-05 19:57:54,605 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'get me count of customers by state'
2025-04-05 19:57:54,605 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: customers
2025-04-05 19:57:54,606 [INFO] text2sql.agents.column [column_agent.py:38]: Only one table involved (customers). Skipping LLM call and including all columns.
2025-04-05 19:57:54,607 [INFO] text2sql.feedback [feedback_manager.py:267]: Stage 1: Vector search for 'get me count of customers by state...'
2025-04-05 19:57:54 - INFO - [feedback_manager.py:267] - Stage 1: Vector search for 'get me count of customers by state...'
2025-04-05 19:57:54,641 [WARNING] text2sql.feedback [feedback_manager.py:324]: No candidates found from vector search
2025-04-05 19:57:54 - WARNING - [feedback_manager.py:324] - No candidates found from vector search
2025-04-05 19:57:54,641 [INFO] text2sql.azure [azure_client.py:35]: SQL generation started for query: 'get me count of customers by state'
2025-04-05 19:57:54 - INFO - [azure_client.py:35] - SQL generation started for query: 'get me count of customers by state'
2025-04-05 19:57:54,643 [INFO] text2sql.azure [azure_client.py:69]: Including schema information (587 chars)
2025-04-05 19:57:54 - INFO - [azure_client.py:69] - Including schema information (587 chars)
2025-04-05 19:57:54,644 [INFO] text2sql.azure [azure_client.py:104]: Including 3 SQL examples (no similarity examples found)
2025-04-05 19:57:54 - INFO - [azure_client.py:104] - Including 3 SQL examples (no similarity examples found)
2025-04-05 19:57:54,645 [INFO] text2sql.azure [azure_client.py:114]: PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some example queries and their SQL:\nQuestion: How many records are in the customers table?\nSQL: SELECT COUNT(*) AS record_count FROM customers\n\nQuestion: Get all columns from customers\nSQL: SELECT * FROM customers LIMIT 5\n\nQuestion: Get record from customers by customer_id\nSQL: SELECT * FROM customers WHERE customer_id = 1\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me count of customers by state'}]
2025-04-05 19:57:54 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some example queries and their SQL:\nQuestion: How many records are in the customers table?\nSQL: SELECT COUNT(*) AS record_count FROM customers\n\nQuestion: Get all columns from customers\nSQL: SELECT * FROM customers LIMIT 5\n\nQuestion: Get record from customers by customer_id\nSQL: SELECT * FROM customers WHERE customer_id = 1\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me count of customers by state'}]
2025-04-05 19:57:54,645 [INFO] text2sql.llm_engine [llm_engine.py:55]: [SQL_GEN] Completion generation started
2025-04-05 19:57:54 - INFO - [llm_engine.py:55] - [SQL_GEN] Completion generation started
2025-04-05 19:57:54,651 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:57:54] "GET /api/query/progress/0e48eaa4-8f53-4e95-96f5-dc6c5b5e06dd HTTP/1.1" 200 -
2025-04-05 19:57:55,442 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:57:55] "GET /api/query/progress/0e48eaa4-8f53-4e95-96f5-dc6c5b5e06dd HTTP/1.1" 200 -
2025-04-05 19:57:55,696 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:57:55] "GET /api/query/progress/0e48eaa4-8f53-4e95-96f5-dc6c5b5e06dd HTTP/1.1" 200 -
2025-04-05 19:57:56,119 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:57:56] "GET /api/query/progress/0e48eaa4-8f53-4e95-96f5-dc6c5b5e06dd HTTP/1.1" 200 -
2025-04-05 19:57:56,924 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:57:56] "GET /api/query/progress/0e48eaa4-8f53-4e95-96f5-dc6c5b5e06dd HTTP/1.1" 200 -
2025-04-05 19:57:57,170 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:57:57] "GET /api/query/progress/0e48eaa4-8f53-4e95-96f5-dc6c5b5e06dd HTTP/1.1" 200 -
2025-04-05 19:57:57,592 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:57:57] "GET /api/query/progress/0e48eaa4-8f53-4e95-96f5-dc6c5b5e06dd HTTP/1.1" 200 -
2025-04-05 19:57:58,112 [INFO] text2sql.llm_engine [llm_engine.py:92]: [SQL_GEN] Completion generation completed in 3.47s
2025-04-05 19:57:58 - INFO - [llm_engine.py:92] - [SQL_GEN] Completion generation completed in 3.47s
2025-04-05 19:57:58,113 [INFO] text2sql.llm_engine [llm_engine.py:93]: **************************
2025-04-05 19:57:58 - INFO - [llm_engine.py:93] - **************************
2025-04-05 19:57:58,114 [INFO] text2sql.azure [azure_client.py:150]: Parsing SQL from model response
2025-04-05 19:57:58 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-05 19:57:58,116 [INFO] text2sql.azure [azure_client.py:157]: Found SQL code block in response
2025-04-05 19:57:58 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-05 19:57:58,117 [INFO] text2sql.azure [azure_client.py:171]: Extracted SQL query (110 chars) and explanation (742 chars)
2025-04-05 19:57:58 - INFO - [azure_client.py:171] - Extracted SQL query (110 chars) and explanation (742 chars)
2025-04-05 19:57:58,118 [INFO] text2sql.azure [azure_client.py:124]: Generated SQL: SELECT state, COUNT(customer_id) AS customer_count
FROM customers
GROUP BY state
ORDER BY customer_count DESC;
2025-04-05 19:57:58 - INFO - [azure_client.py:124] - Generated SQL: SELECT state, COUNT(customer_id) AS customer_count
FROM customers
GROUP BY state
ORDER BY customer_count DESC;
2025-04-05 19:57:58,120 [INFO] text2sql.azure [azure_client.py:132]: SQL generation completed in 3.48s
2025-04-05 19:57:58 - INFO - [azure_client.py:132] - SQL generation completed in 3.48s
2025-04-05 19:57:58,122 [INFO] text2sql.database [database.py:65]: Executing SQL query: SELECT state, COUNT(customer_id) AS customer_count
FROM customers
GROUP BY state
ORDER BY customer_count DESC;
2025-04-05 19:57:58 - INFO - [database.py:65] - Executing SQL query: SELECT state, COUNT(customer_id) AS customer_count
FROM customers
GROUP BY state
ORDER BY customer_count DESC;
2025-04-05 19:57:58,126 [INFO] text2sql.database [database.py:86]: Query returned 5 rows with 2 columns
2025-04-05 19:57:58 - INFO - [database.py:86] - Query returned 5 rows with 2 columns
2025-04-05 19:57:58,128 [INFO] text2sql.database [database.py:95]: Query processing completed in 0.01s
2025-04-05 19:57:58 - INFO - [database.py:95] - Query processing completed in 0.01s
2025-04-05 19:57:58,129 [INFO] text2sql.sql_generator [sql_generator.py:376]: SQL generation completed in 3.98s
2025-04-05 19:57:58,130 [INFO] text2sql.sql_generator [sql_generator.py:125]: Query processing completed in 3.99s
2025-04-05 19:57:58,387 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:57:58] "GET /api/query/progress/0e48eaa4-8f53-4e95-96f5-dc6c5b5e06dd HTTP/1.1" 200 -
2025-04-05 19:58:17,517 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:58:17] "GET / HTTP/1.1" 200 -
2025-04-05 19:58:17,861 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:58:17] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-05 19:58:17,864 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:58:17] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 19:58:17,865 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:58:17] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 19:58:17,866 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:58:17] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 19:58:17,873 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:58:17] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 19:58:17,875 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:58:17] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 19:58:18,188 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:58:18] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 19:58:18,197 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:58:18] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 19:58:18,202 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:58:18] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 19:58:18,544 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:58:18] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 19:58:20,918 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'get me count of customers by state'
2025-04-05 19:58:20,919 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:58:20] "POST /api/query HTTP/1.1" 200 -
2025-04-05 19:58:20,920 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'get me count of customers by state'
2025-04-05 19:58:20,922 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-05 19:58:20,922 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.00s
2025-04-05 19:58:20,924 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-05 19:58:20,925 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-05 19:58:20,926 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-05 19:58:20 - INFO - [database.py:44] - Attempting database connection
2025-04-05 19:58:20,928 [INFO] text2sql.database [database.py:48]: Database connection established in 0.00s
2025-04-05 19:58:20 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-05 19:58:20,929 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'get me count of customers by state'
2025-04-05 19:58:20,930 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-05 19:58:20,931 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-05 19:58:20,932 [INFO] text2sql.llm_engine [llm_engine.py:55]: [TABLE] Completion generation started
2025-04-05 19:58:20 - INFO - [llm_engine.py:55] - [TABLE] Completion generation started
2025-04-05 19:58:21,296 [INFO] text2sql.llm_engine [llm_engine.py:92]: [TABLE] Completion generation completed in 0.36s
2025-04-05 19:58:21 - INFO - [llm_engine.py:92] - [TABLE] Completion generation completed in 0.36s
2025-04-05 19:58:21,296 [INFO] text2sql.llm_engine [llm_engine.py:93]: **************************
2025-04-05 19:58:21 - INFO - [llm_engine.py:93] - **************************
2025-04-05 19:58:21,297 [INFO] text2sql.agents.table [table_agent.py:69]: Raw model response: 'customers'
2025-04-05 19:58:21,298 [INFO] text2sql.agents.table [table_agent.py:90]: Table selection completed in 0.37s. Selected: customers
2025-04-05 19:58:21,298 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'get me count of customers by state'
2025-04-05 19:58:21,299 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: customers
2025-04-05 19:58:21,299 [INFO] text2sql.agents.column [column_agent.py:38]: Only one table involved (customers). Skipping LLM call and including all columns.
2025-04-05 19:58:21,300 [INFO] text2sql.feedback [feedback_manager.py:267]: Stage 1: Vector search for 'get me count of customers by state...'
2025-04-05 19:58:21 - INFO - [feedback_manager.py:267] - Stage 1: Vector search for 'get me count of customers by state...'
2025-04-05 19:58:21,318 [WARNING] text2sql.feedback [feedback_manager.py:324]: No candidates found from vector search
2025-04-05 19:58:21 - WARNING - [feedback_manager.py:324] - No candidates found from vector search
2025-04-05 19:58:21,319 [INFO] text2sql.azure [azure_client.py:35]: SQL generation started for query: 'get me count of customers by state'
2025-04-05 19:58:21 - INFO - [azure_client.py:35] - SQL generation started for query: 'get me count of customers by state'
2025-04-05 19:58:21,320 [INFO] text2sql.azure [azure_client.py:69]: Including schema information (587 chars)
2025-04-05 19:58:21 - INFO - [azure_client.py:69] - Including schema information (587 chars)
2025-04-05 19:58:21,322 [INFO] text2sql.azure [azure_client.py:104]: Including 3 SQL examples (no similarity examples found)
2025-04-05 19:58:21 - INFO - [azure_client.py:104] - Including 3 SQL examples (no similarity examples found)
2025-04-05 19:58:21,323 [INFO] text2sql.azure [azure_client.py:114]: PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some example queries and their SQL:\nQuestion: How many records are in the customers table?\nSQL: SELECT COUNT(*) AS record_count FROM customers\n\nQuestion: Get all columns from customers\nSQL: SELECT * FROM customers LIMIT 5\n\nQuestion: Get record from customers by customer_id\nSQL: SELECT * FROM customers WHERE customer_id = 1\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me count of customers by state'}]
2025-04-05 19:58:21 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some example queries and their SQL:\nQuestion: How many records are in the customers table?\nSQL: SELECT COUNT(*) AS record_count FROM customers\n\nQuestion: Get all columns from customers\nSQL: SELECT * FROM customers LIMIT 5\n\nQuestion: Get record from customers by customer_id\nSQL: SELECT * FROM customers WHERE customer_id = 1\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me count of customers by state'}]
2025-04-05 19:58:21,324 [INFO] text2sql.llm_engine [llm_engine.py:55]: [SQL_GEN] Completion generation started
2025-04-05 19:58:21 - INFO - [llm_engine.py:55] - [SQL_GEN] Completion generation started
2025-04-05 19:58:21,727 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:58:21] "GET /api/query/progress/7f649fe8-ed6d-4b17-ad92-15bb6e79820d HTTP/1.1" 200 -
2025-04-05 19:58:22,548 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:58:22] "GET /api/query/progress/7f649fe8-ed6d-4b17-ad92-15bb6e79820d HTTP/1.1" 200 -
2025-04-05 19:58:22,978 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:58:22] "GET /api/query/progress/7f649fe8-ed6d-4b17-ad92-15bb6e79820d HTTP/1.1" 200 -
2025-04-05 19:58:23,763 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:58:23] "GET /api/query/progress/7f649fe8-ed6d-4b17-ad92-15bb6e79820d HTTP/1.1" 200 -
2025-04-05 19:58:23,930 [INFO] text2sql.llm_engine [llm_engine.py:92]: [SQL_GEN] Completion generation completed in 2.61s
2025-04-05 19:58:23 - INFO - [llm_engine.py:92] - [SQL_GEN] Completion generation completed in 2.61s
2025-04-05 19:58:23,931 [INFO] text2sql.llm_engine [llm_engine.py:93]: **************************
2025-04-05 19:58:23 - INFO - [llm_engine.py:93] - **************************
2025-04-05 19:58:23,932 [INFO] text2sql.azure [azure_client.py:150]: Parsing SQL from model response
2025-04-05 19:58:23 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-05 19:58:23,934 [INFO] text2sql.azure [azure_client.py:157]: Found SQL code block in response
2025-04-05 19:58:23 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-05 19:58:23,935 [INFO] text2sql.azure [azure_client.py:171]: Extracted SQL query (100 chars) and explanation (365 chars)
2025-04-05 19:58:23 - INFO - [azure_client.py:171] - Extracted SQL query (100 chars) and explanation (365 chars)
2025-04-05 19:58:23,936 [INFO] text2sql.azure [azure_client.py:124]: Generated SQL: SELECT state, COUNT(*) AS customer_count
FROM customers
GROUP BY state
ORDER BY customer_count DESC;
2025-04-05 19:58:23 - INFO - [azure_client.py:124] - Generated SQL: SELECT state, COUNT(*) AS customer_count
FROM customers
GROUP BY state
ORDER BY customer_count DESC;
2025-04-05 19:58:23,938 [INFO] text2sql.azure [azure_client.py:132]: SQL generation completed in 2.62s
2025-04-05 19:58:23 - INFO - [azure_client.py:132] - SQL generation completed in 2.62s
2025-04-05 19:58:23,939 [INFO] text2sql.database [database.py:65]: Executing SQL query: SELECT state, COUNT(*) AS customer_count
FROM customers
GROUP BY state
ORDER BY customer_count DESC;
2025-04-05 19:58:23 - INFO - [database.py:65] - Executing SQL query: SELECT state, COUNT(*) AS customer_count
FROM customers
GROUP BY state
ORDER BY customer_count DESC;
2025-04-05 19:58:23,943 [INFO] text2sql.database [database.py:86]: Query returned 5 rows with 2 columns
2025-04-05 19:58:23 - INFO - [database.py:86] - Query returned 5 rows with 2 columns
2025-04-05 19:58:23,946 [INFO] text2sql.database [database.py:95]: Query processing completed in 0.01s
2025-04-05 19:58:23 - INFO - [database.py:95] - Query processing completed in 0.01s
2025-04-05 19:58:23,948 [INFO] text2sql.sql_generator [sql_generator.py:376]: SQL generation completed in 3.02s
2025-04-05 19:58:23,949 [INFO] text2sql.sql_generator [sql_generator.py:125]: Query processing completed in 3.03s
2025-04-05 19:58:24,025 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:58:24] "GET /api/query/progress/7f649fe8-ed6d-4b17-ad92-15bb6e79820d HTTP/1.1" 200 -
2025-04-05 19:58:41,179 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:58:41] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 19:59:15,744 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:59:15] "GET / HTTP/1.1" 200 -
2025-04-05 19:59:15,993 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:59:15] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-05 19:59:16,075 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:59:16] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 19:59:16,080 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:59:16] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 19:59:16,080 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:59:16] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 19:59:16,086 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:59:16] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 19:59:16,089 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:59:16] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 19:59:16,298 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:59:16] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 19:59:16,393 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:59:16] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 19:59:16,397 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:59:16] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 19:59:16,743 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:59:16] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 19:59:17,803 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'get me count of customers by state'
2025-04-05 19:59:17,804 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:59:17] "POST /api/query HTTP/1.1" 200 -
2025-04-05 19:59:17,804 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'get me count of customers by state'
2025-04-05 19:59:17,806 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-05 19:59:17,807 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.00s
2025-04-05 19:59:17,808 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-05 19:59:17,808 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-05 19:59:17,809 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-05 19:59:17 - INFO - [database.py:44] - Attempting database connection
2025-04-05 19:59:17,811 [INFO] text2sql.database [database.py:48]: Database connection established in 0.00s
2025-04-05 19:59:17 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-05 19:59:17,811 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'get me count of customers by state'
2025-04-05 19:59:17,812 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-05 19:59:17,813 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-05 19:59:17,813 [INFO] text2sql.llm_engine [llm_engine.py:55]: [TABLE] Completion generation started
2025-04-05 19:59:17 - INFO - [llm_engine.py:55] - [TABLE] Completion generation started
2025-04-05 19:59:18,173 [INFO] text2sql.llm_engine [llm_engine.py:92]: [TABLE] Completion generation completed in 0.36s
2025-04-05 19:59:18 - INFO - [llm_engine.py:92] - [TABLE] Completion generation completed in 0.36s
2025-04-05 19:59:18,178 [INFO] text2sql.llm_engine [llm_engine.py:93]: **************************
2025-04-05 19:59:18 - INFO - [llm_engine.py:93] - **************************
2025-04-05 19:59:18,182 [INFO] text2sql.agents.table [table_agent.py:69]: Raw model response: 'customers'
2025-04-05 19:59:18,184 [INFO] text2sql.agents.table [table_agent.py:90]: Table selection completed in 0.37s. Selected: customers
2025-04-05 19:59:18,185 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'get me count of customers by state'
2025-04-05 19:59:18,187 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: customers
2025-04-05 19:59:18,188 [INFO] text2sql.agents.column [column_agent.py:38]: Only one table involved (customers). Skipping LLM call and including all columns.
2025-04-05 19:59:18,189 [INFO] text2sql.feedback [feedback_manager.py:267]: Stage 1: Vector search for 'get me count of customers by state...'
2025-04-05 19:59:18 - INFO - [feedback_manager.py:267] - Stage 1: Vector search for 'get me count of customers by state...'
2025-04-05 19:59:18,253 [WARNING] text2sql.feedback [feedback_manager.py:324]: No candidates found from vector search
2025-04-05 19:59:18 - WARNING - [feedback_manager.py:324] - No candidates found from vector search
2025-04-05 19:59:18,254 [INFO] text2sql.azure [azure_client.py:35]: SQL generation started for query: 'get me count of customers by state'
2025-04-05 19:59:18 - INFO - [azure_client.py:35] - SQL generation started for query: 'get me count of customers by state'
2025-04-05 19:59:18,255 [INFO] text2sql.azure [azure_client.py:69]: Including schema information (587 chars)
2025-04-05 19:59:18 - INFO - [azure_client.py:69] - Including schema information (587 chars)
2025-04-05 19:59:18,256 [INFO] text2sql.azure [azure_client.py:104]: Including 3 SQL examples (no similarity examples found)
2025-04-05 19:59:18 - INFO - [azure_client.py:104] - Including 3 SQL examples (no similarity examples found)
2025-04-05 19:59:18,257 [INFO] text2sql.azure [azure_client.py:114]: PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some example queries and their SQL:\nQuestion: How many records are in the customers table?\nSQL: SELECT COUNT(*) AS record_count FROM customers\n\nQuestion: Get all columns from customers\nSQL: SELECT * FROM customers LIMIT 5\n\nQuestion: Get record from customers by customer_id\nSQL: SELECT * FROM customers WHERE customer_id = 1\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me count of customers by state'}]
2025-04-05 19:59:18 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some example queries and their SQL:\nQuestion: How many records are in the customers table?\nSQL: SELECT COUNT(*) AS record_count FROM customers\n\nQuestion: Get all columns from customers\nSQL: SELECT * FROM customers LIMIT 5\n\nQuestion: Get record from customers by customer_id\nSQL: SELECT * FROM customers WHERE customer_id = 1\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me count of customers by state'}]
2025-04-05 19:59:18,260 [INFO] text2sql.llm_engine [llm_engine.py:55]: [SQL_GEN] Completion generation started
2025-04-05 19:59:18 - INFO - [llm_engine.py:55] - [SQL_GEN] Completion generation started
2025-04-05 19:59:18,612 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:59:18] "GET /api/query/progress/5d20c26d-6089-4494-960f-f2c13589e5a1 HTTP/1.1" 200 -
2025-04-05 19:59:18,856 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:59:18] "GET /api/query/progress/5d20c26d-6089-4494-960f-f2c13589e5a1 HTTP/1.1" 200 -
2025-04-05 19:59:19,301 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:59:19] "GET /api/query/progress/5d20c26d-6089-4494-960f-f2c13589e5a1 HTTP/1.1" 200 -
2025-04-05 19:59:20,095 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:59:20] "GET /api/query/progress/5d20c26d-6089-4494-960f-f2c13589e5a1 HTTP/1.1" 200 -
2025-04-05 19:59:20,101 [INFO] text2sql.llm_engine [llm_engine.py:92]: [SQL_GEN] Completion generation completed in 1.84s
2025-04-05 19:59:20 - INFO - [llm_engine.py:92] - [SQL_GEN] Completion generation completed in 1.84s
2025-04-05 19:59:20,103 [INFO] text2sql.llm_engine [llm_engine.py:93]: **************************
2025-04-05 19:59:20 - INFO - [llm_engine.py:93] - **************************
2025-04-05 19:59:20,105 [INFO] text2sql.azure [azure_client.py:150]: Parsing SQL from model response
2025-04-05 19:59:20 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-05 19:59:20,108 [INFO] text2sql.azure [azure_client.py:157]: Found SQL code block in response
2025-04-05 19:59:20 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-05 19:59:20,110 [INFO] text2sql.azure [azure_client.py:171]: Extracted SQL query (110 chars) and explanation (287 chars)
2025-04-05 19:59:20 - INFO - [azure_client.py:171] - Extracted SQL query (110 chars) and explanation (287 chars)
2025-04-05 19:59:20,111 [INFO] text2sql.azure [azure_client.py:124]: Generated SQL: SELECT state, COUNT(customer_id) AS customer_count
FROM customers
GROUP BY state
ORDER BY customer_count DESC;
2025-04-05 19:59:20 - INFO - [azure_client.py:124] - Generated SQL: SELECT state, COUNT(customer_id) AS customer_count
FROM customers
GROUP BY state
ORDER BY customer_count DESC;
2025-04-05 19:59:20,114 [INFO] text2sql.azure [azure_client.py:132]: SQL generation completed in 1.86s
2025-04-05 19:59:20 - INFO - [azure_client.py:132] - SQL generation completed in 1.86s
2025-04-05 19:59:20,116 [INFO] text2sql.database [database.py:65]: Executing SQL query: SELECT state, COUNT(customer_id) AS customer_count
FROM customers
GROUP BY state
ORDER BY customer_count DESC;
2025-04-05 19:59:20 - INFO - [database.py:65] - Executing SQL query: SELECT state, COUNT(customer_id) AS customer_count
FROM customers
GROUP BY state
ORDER BY customer_count DESC;
2025-04-05 19:59:20,120 [INFO] text2sql.database [database.py:86]: Query returned 5 rows with 2 columns
2025-04-05 19:59:20 - INFO - [database.py:86] - Query returned 5 rows with 2 columns
2025-04-05 19:59:20,123 [INFO] text2sql.database [database.py:95]: Query processing completed in 0.01s
2025-04-05 19:59:20 - INFO - [database.py:95] - Query processing completed in 0.01s
2025-04-05 19:59:20,125 [INFO] text2sql.sql_generator [sql_generator.py:376]: SQL generation completed in 2.32s
2025-04-05 19:59:20,125 [INFO] text2sql.sql_generator [sql_generator.py:125]: Query processing completed in 2.32s
2025-04-05 19:59:20,363 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 19:59:20] "GET /api/query/progress/5d20c26d-6089-4494-960f-f2c13589e5a1 HTTP/1.1" 200 -
2025-04-05 20:32:15,948 [INFO] text2sql [app.py:250]: Schema requested for workspace: dfd
2025-04-05 20:32:15 - INFO - [app.py:250] - Schema requested for workspace: dfd
2025-04-05 20:32:15,955 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 20:32:15] "GET /api/schema?workspace=dfd HTTP/1.1" 200 -
2025-04-05 20:32:17,642 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 20:32:17] "GET /samples HTTP/1.1" 200 -
2025-04-05 20:32:17,998 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 20:32:17] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 20:32:18,022 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 20:32:18] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 20:32:18,032 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 20:32:18] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 20:32:18,042 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 20:32:18] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 20:32:18,044 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 20:32:18] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 20:32:18,045 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 20:32:18] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 20:32:18,327 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 20:32:18] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 20:32:18,341 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 20:32:18] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 20:32:18,353 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 20:32:18] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 20:32:18,366 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 20:32:18] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 20:32:18,712 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 20:32:18] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 20:32:18,718 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 20:32:18] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 20:32:18,723 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 20:32:18] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 20:32:18,741 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 20:32:18 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 20:32:18,743 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 20:32:18 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 20:32:18,746 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 20:32:18 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 20:32:18,754 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 0 samples (page 1, limit 10)
2025-04-05 20:32:18 - INFO - [feedback_manager.py:531] - Retrieved 0 samples (page 1, limit 10)
2025-04-05 20:32:18,756 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 20:32:18] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 20:32:20,359 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 20:32:20] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 20:32:20,703 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 20:32:20] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 20:32:20,713 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 20:32:20] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 20:32:20,995 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 20:32:20] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 20:32:21,083 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 20:32:21] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 20:32:23,961 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 20:32:23] "GET /admin/audit-logs HTTP/1.1" 200 -
2025-04-05 20:32:24,293 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 20:32:24] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 20:32:24,303 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 20:32:24] "[36mGET /static/js/admin/audit-logs.js HTTP/1.1[0m" 304 -
2025-04-05 20:32:31,984 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 20:32:31] "GET /admin/api/audit-logs/16 HTTP/1.1" 200 -
2025-04-05 20:32:39,082 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 20:32:39] "GET /admin/users HTTP/1.1" 200 -
2025-04-05 20:32:39,318 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 20:32:39] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 20:32:39,411 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 20:32:39] "[36mGET /static/js/admin/users.js HTTP/1.1[0m" 304 -
2025-04-05 20:32:39,894 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 20:32:39] "GET /admin/roles HTTP/1.1" 200 -
2025-04-05 20:32:40,234 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 20:32:40] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 20:32:40,236 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 20:32:40] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-05 20:32:41,596 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 20:32:41] "GET /admin/audit-logs HTTP/1.1" 200 -
2025-04-05 20:32:41,925 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 20:32:41] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 20:32:41,932 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 20:32:41] "[36mGET /static/js/admin/audit-logs.js HTTP/1.1[0m" 304 -
2025-04-05 20:32:42,560 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 20:32:42] "GET /admin/roles HTTP/1.1" 200 -
2025-04-05 20:32:42,908 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 20:32:42] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 20:32:42,917 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 20:32:42] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-05 20:32:49,534 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 20:32:49] "GET / HTTP/1.1" 200 -
2025-04-05 20:32:49,868 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 20:32:49] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 20:32:49,883 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 20:32:49] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 20:32:49,885 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 20:32:49] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 20:32:49,889 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 20:32:49] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 20:32:49,898 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 20:32:49] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 20:32:49,900 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 20:32:49] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 20:32:50,179 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 20:32:50] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 20:32:50,194 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 20:32:50] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 20:32:50,220 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 20:32:50] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 20:32:50,385 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 20:32:50] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 21:51:58,508 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 21:51:58] "GET / HTTP/1.1" 200 -
2025-04-05 21:51:58,615 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 21:51:58] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 21:51:58,944 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 21:51:58] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 21:51:58,961 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 21:51:58] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 21:51:58,975 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 21:51:58] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 21:51:58,977 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 21:51:58] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 21:51:58,989 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 21:51:58] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 21:51:58,998 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 21:51:58] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 21:51:59,261 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 21:51:59] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 21:51:59,279 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 21:51:59] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 21:51:59,637 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 21:51:59] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 21:51:59,678 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 21:51:59] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-04-05 22:26:23,026 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 22:26:23,028 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 22:26:23,028 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 22:26:23,029 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 22:26:23,030 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 22:26:23,039 [INFO] text2sql [app.py:66]: Debug logging enabled for SQL generator and agents
2025-04-05 22:26:23 - INFO - [app.py:66] - Debug logging enabled for SQL generator and agents
2025-04-05 22:26:23,041 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 22:26:23 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 22:26:23,041 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 22:26:23 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 22:26:23,046 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 22:26:23 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 22:26:23,046 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 22:26:23,046 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 22:26:23,047 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 22:26:23,047 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 22:26:23,047 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 22:26:23 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 22:26:23,047 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 22:26:23 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 22:26:23,048 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 22:26:23 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 22:26:23,048 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 22:26:23,048 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 22:26:23,048 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 22:26:23,048 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 22:26:23,048 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 22:26:23 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 22:26:23,049 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 22:26:23 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 22:26:23,049 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 22:26:23 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 22:26:23,049 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 22:26:23,049 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 22:26:23,049 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 22:26:23,050 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 22:26:23,050 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 22:26:23 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 22:26:23,050 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 22:26:23 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 22:26:23,050 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 22:26:23 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 22:26:23,052 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 22:26:23 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 22:26:23,052 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 22:26:23 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 22:26:23,052 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 22:26:23 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 22:26:23,052 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 22:26:23,052 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 22:26:23,053 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 22:26:23,053 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 22:26:23,053 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 22:26:23 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 22:26:23,176 [INFO] werkzeug [_internal.py:97]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.27.251.157:5000
2025-04-05 22:26:23,176 [INFO] werkzeug [_internal.py:97]: [33mPress CTRL+C to quit[0m
2025-04-05 22:26:23,186 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 22:26:27,092 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 22:26:27,093 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 22:26:27,093 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 22:26:27,093 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 22:26:27,093 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 22:26:27,099 [INFO] text2sql [app.py:66]: Debug logging enabled for SQL generator and agents
2025-04-05 22:26:27 - INFO - [app.py:66] - Debug logging enabled for SQL generator and agents
2025-04-05 22:26:27,100 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 22:26:27 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 22:26:27,100 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 22:26:27 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 22:26:27,102 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 22:26:27 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 22:26:27,103 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 22:26:27,103 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 22:26:27,103 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 22:26:27,103 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 22:26:27,103 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 22:26:27 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 22:26:27,104 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 22:26:27 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 22:26:27,104 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 22:26:27 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 22:26:27,104 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 22:26:27,104 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 22:26:27,104 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 22:26:27,104 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 22:26:27,104 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 22:26:27 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 22:26:27,105 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 22:26:27 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 22:26:27,105 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 22:26:27 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 22:26:27,105 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 22:26:27,105 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 22:26:27,106 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 22:26:27,106 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 22:26:27,106 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 22:26:27 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 22:26:27,106 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 22:26:27 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 22:26:27,106 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 22:26:27 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 22:26:27,109 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 22:26:27 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 22:26:27,110 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 22:26:27 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 22:26:27,110 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 22:26:27 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 22:26:27,111 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 22:26:27,111 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 22:26:27,111 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 22:26:27,111 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 22:26:27,111 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 22:26:27 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 22:26:27,240 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 22:26:27,251 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 22:26:46,974 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:26:46] "GET / HTTP/1.1" 200 -
2025-04-05 22:26:47,166 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:26:47] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-05 22:26:47,302 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:26:47] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:26:47,307 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:26:47] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:26:47,309 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:26:47] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:26:47,313 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:26:47] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:26:47,314 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:26:47] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:26:47,482 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:26:47] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:26:47,616 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:26:47] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:26:47,620 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:26:47] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:26:47,963 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:26:47] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:26:54,734 [INFO] text2sql [app.py:250]: Schema requested for workspace: dfd
2025-04-05 22:26:54 - INFO - [app.py:250] - Schema requested for workspace: dfd
2025-04-05 22:26:54,736 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:26:54] "GET /api/schema?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:26:56,981 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:26:56] "GET /samples HTTP/1.1" 200 -
2025-04-05 22:26:57,854 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:26:57] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:26:57,954 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:26:57] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:26:57,965 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:26:57] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:26:57,968 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:26:57] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:26:57,966 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:26:57] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:26:57,966 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:26:57] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:26:58,167 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:26:58] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:26:58,282 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:26:58] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:26:58,290 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:26:58] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:26:58,299 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:26:58] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 22:26:58,633 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:26:58] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:26:58,635 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:26:58] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 22:26:58,640 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:26:58] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 22:26:58,655 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 22:26:58 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 22:26:58,657 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 22:26:58 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 22:26:58,659 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 22:26:58 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 22:26:58,673 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 0 samples (page 1, limit 10)
2025-04-05 22:26:58 - INFO - [feedback_manager.py:531] - Retrieved 0 samples (page 1, limit 10)
2025-04-05 22:26:58,675 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:26:58] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 22:27:00,809 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:00] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 22:27:01,146 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:01] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:27:01,150 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:01] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:27:01,421 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:01] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 22:27:01,487 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:01] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 22:27:03,723 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:03] "GET / HTTP/1.1" 200 -
2025-04-05 22:27:04,060 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:04] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:27:04,073 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:04] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:27:04,078 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:04] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:27:04,080 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:04] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:27:04,084 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:04] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:27:04,084 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:04] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:27:04,377 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:04] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:27:04,395 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:04] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:27:04,400 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:04] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:27:04,737 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:04] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:27:05,520 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:05] "GET /admin/schema HTTP/1.1" 200 -
2025-04-05 22:27:05,886 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:05] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:27:05,891 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:05] "[36mGET /static/css/admin-schema.css HTTP/1.1[0m" 304 -
2025-04-05 22:27:05,896 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:05] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:27:05,902 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:05] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:27:05,908 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:05] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:27:05,908 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:05] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:27:06,216 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:06] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:27:06,219 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:06] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:27:06,224 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:06] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:27:06,233 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:06] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:27:06,235 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:06] "[36mGET /static/js/admin/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:27:06,567 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:06] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:27:06,580 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:06] "GET /admin/api/schema/workspaces HTTP/1.1" 200 -
2025-04-05 22:27:06,588 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:06] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-05 22:27:06,597 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:06] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-05 22:27:10,365 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:10] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 22:27:10,694 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:10] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:27:10,708 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:10] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:27:10,946 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:10] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 22:27:11,052 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:11] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 22:27:21,038 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:21] "GET / HTTP/1.1" 200 -
2025-04-05 22:27:21,367 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:21] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:27:21,387 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:21] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:27:21,388 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:21] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:27:21,390 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:21] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:27:21,391 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:21] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:27:21,392 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:21] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:27:21,692 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:21] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:27:21,709 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:21] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:27:21,712 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:21] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:27:21,876 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:21] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:27:28,434 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'get me all the customers'
2025-04-05 22:27:28,434 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:28] "POST /api/query HTTP/1.1" 200 -
2025-04-05 22:27:28,435 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'get me all the customers'
2025-04-05 22:27:28,437 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-05 22:27:28,438 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.00s
2025-04-05 22:27:28,440 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-05 22:27:28,440 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-05 22:27:28,441 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-05 22:27:28 - INFO - [database.py:44] - Attempting database connection
2025-04-05 22:27:28,443 [INFO] text2sql.database [database.py:48]: Database connection established in 0.00s
2025-04-05 22:27:28 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-05 22:27:28,444 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'get me all the customers'
2025-04-05 22:27:28,445 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-05 22:27:28,446 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-05 22:27:28,447 [INFO] text2sql.llm_engine [llm_engine.py:55]: [TABLE] Completion generation started
2025-04-05 22:27:28 - INFO - [llm_engine.py:55] - [TABLE] Completion generation started
2025-04-05 22:27:29,238 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:29] "GET /api/query/progress/b3656bfd-a407-4460-b627-ec5527f7e6bb HTTP/1.1" 200 -
2025-04-05 22:27:29,518 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:29] "GET /api/query/progress/b3656bfd-a407-4460-b627-ec5527f7e6bb HTTP/1.1" 200 -
2025-04-05 22:27:29,689 [INFO] text2sql.llm_engine [llm_engine.py:92]: [TABLE] Completion generation completed in 1.24s
2025-04-05 22:27:29 - INFO - [llm_engine.py:92] - [TABLE] Completion generation completed in 1.24s
2025-04-05 22:27:29,691 [INFO] text2sql.llm_engine [llm_engine.py:93]: **************************
2025-04-05 22:27:29 - INFO - [llm_engine.py:93] - **************************
2025-04-05 22:27:29,693 [INFO] text2sql.agents.table [table_agent.py:69]: Raw model response: 'customers'
2025-04-05 22:27:29,694 [INFO] text2sql.agents.table [table_agent.py:90]: Table selection completed in 1.25s. Selected: customers
2025-04-05 22:27:29,695 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'get me all the customers'
2025-04-05 22:27:29,696 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: customers
2025-04-05 22:27:29,697 [INFO] text2sql.agents.column [column_agent.py:38]: Only one table involved (customers). Skipping LLM call and including all columns.
2025-04-05 22:27:29,698 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 22:27:29 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 22:27:29,700 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 22:27:29 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 22:27:29,701 [INFO] text2sql.feedback [feedback_manager.py:267]: Stage 1: Vector search for 'get me all the customers...'
2025-04-05 22:27:29 - INFO - [feedback_manager.py:267] - Stage 1: Vector search for 'get me all the customers...'
2025-04-05 22:27:29,704 [INFO] text2sql.feedback [feedback_manager.py:62]: Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-05 22:27:29 - INFO - [feedback_manager.py:62] - Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-05 22:27:29,930 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:29] "GET /api/query/progress/b3656bfd-a407-4460-b627-ec5527f7e6bb HTTP/1.1" 200 -
2025-04-05 22:27:31,352 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:31] "GET /api/query/progress/b3656bfd-a407-4460-b627-ec5527f7e6bb HTTP/1.1" 200 -
2025-04-05 22:27:31,605 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:31] "GET /api/query/progress/b3656bfd-a407-4460-b627-ec5527f7e6bb HTTP/1.1" 200 -
2025-04-05 22:27:32,039 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:32] "GET /api/query/progress/b3656bfd-a407-4460-b627-ec5527f7e6bb HTTP/1.1" 200 -
2025-04-05 22:27:32,857 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:32] "GET /api/query/progress/b3656bfd-a407-4460-b627-ec5527f7e6bb HTTP/1.1" 200 -
2025-04-05 22:27:33,383 [INFO] text2sql.feedback [feedback_manager.py:65]: Embedding model loaded in 3.68s
2025-04-05 22:27:33 - INFO - [feedback_manager.py:65] - Embedding model loaded in 3.68s
2025-04-05 22:27:33,540 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:33] "GET /api/query/progress/b3656bfd-a407-4460-b627-ec5527f7e6bb HTTP/1.1" 200 -
2025-04-05 22:27:33,542 [WARNING] text2sql.feedback [feedback_manager.py:324]: No candidates found from vector search
2025-04-05 22:27:33 - WARNING - [feedback_manager.py:324] - No candidates found from vector search
2025-04-05 22:27:33,542 [INFO] text2sql.azure [azure_client.py:35]: SQL generation started for query: 'get me all the customers'
2025-04-05 22:27:33 - INFO - [azure_client.py:35] - SQL generation started for query: 'get me all the customers'
2025-04-05 22:27:33,543 [INFO] text2sql.azure [azure_client.py:69]: Including schema information (587 chars)
2025-04-05 22:27:33 - INFO - [azure_client.py:69] - Including schema information (587 chars)
2025-04-05 22:27:33,545 [INFO] text2sql.azure [azure_client.py:104]: Including 3 SQL examples (no similarity examples found)
2025-04-05 22:27:33 - INFO - [azure_client.py:104] - Including 3 SQL examples (no similarity examples found)
2025-04-05 22:27:33,546 [INFO] text2sql.azure [azure_client.py:114]: PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some example queries and their SQL:\nQuestion: How many records are in the customers table?\nSQL: SELECT COUNT(*) AS record_count FROM customers\n\nQuestion: Get all columns from customers\nSQL: SELECT * FROM customers LIMIT 5\n\nQuestion: Get record from customers by customer_id\nSQL: SELECT * FROM customers WHERE customer_id = 1\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me all the customers'}]
2025-04-05 22:27:33 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some example queries and their SQL:\nQuestion: How many records are in the customers table?\nSQL: SELECT COUNT(*) AS record_count FROM customers\n\nQuestion: Get all columns from customers\nSQL: SELECT * FROM customers LIMIT 5\n\nQuestion: Get record from customers by customer_id\nSQL: SELECT * FROM customers WHERE customer_id = 1\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me all the customers'}]
2025-04-05 22:27:33,547 [INFO] text2sql.llm_engine [llm_engine.py:55]: [SQL_GEN] Completion generation started
2025-04-05 22:27:33 - INFO - [llm_engine.py:55] - [SQL_GEN] Completion generation started
2025-04-05 22:27:34,826 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:34] "GET /api/query/progress/b3656bfd-a407-4460-b627-ec5527f7e6bb HTTP/1.1" 200 -
2025-04-05 22:27:35,503 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:35] "GET /api/query/progress/b3656bfd-a407-4460-b627-ec5527f7e6bb HTTP/1.1" 200 -
2025-04-05 22:27:35,701 [INFO] text2sql.llm_engine [llm_engine.py:92]: [SQL_GEN] Completion generation completed in 2.15s
2025-04-05 22:27:35 - INFO - [llm_engine.py:92] - [SQL_GEN] Completion generation completed in 2.15s
2025-04-05 22:27:35,703 [INFO] text2sql.llm_engine [llm_engine.py:93]: **************************
2025-04-05 22:27:35 - INFO - [llm_engine.py:93] - **************************
2025-04-05 22:27:35,706 [INFO] text2sql.azure [azure_client.py:150]: Parsing SQL from model response
2025-04-05 22:27:35 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-05 22:27:35,708 [INFO] text2sql.azure [azure_client.py:157]: Found SQL code block in response
2025-04-05 22:27:35 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-05 22:27:35,711 [INFO] text2sql.azure [azure_client.py:171]: Extracted SQL query (24 chars) and explanation (252 chars)
2025-04-05 22:27:35 - INFO - [azure_client.py:171] - Extracted SQL query (24 chars) and explanation (252 chars)
2025-04-05 22:27:35,713 [INFO] text2sql.azure [azure_client.py:124]: Generated SQL: SELECT * FROM customers;
2025-04-05 22:27:35 - INFO - [azure_client.py:124] - Generated SQL: SELECT * FROM customers;
2025-04-05 22:27:35,716 [INFO] text2sql.azure [azure_client.py:132]: SQL generation completed in 2.17s
2025-04-05 22:27:35 - INFO - [azure_client.py:132] - SQL generation completed in 2.17s
2025-04-05 22:27:35,717 [INFO] text2sql.database [database.py:65]: Executing SQL query: SELECT * FROM customers;
2025-04-05 22:27:35 - INFO - [database.py:65] - Executing SQL query: SELECT * FROM customers;
2025-04-05 22:27:35,733 [INFO] text2sql.database [database.py:86]: Query returned 5 rows with 11 columns
2025-04-05 22:27:35 - INFO - [database.py:86] - Query returned 5 rows with 11 columns
2025-04-05 22:27:35,742 [INFO] text2sql.database [database.py:95]: Query processing completed in 0.03s
2025-04-05 22:27:35 - INFO - [database.py:95] - Query processing completed in 0.03s
2025-04-05 22:27:35,745 [INFO] text2sql.sql_generator [sql_generator.py:376]: SQL generation completed in 7.30s
2025-04-05 22:27:35,746 [INFO] text2sql.sql_generator [sql_generator.py:125]: Query processing completed in 7.31s
2025-04-05 22:27:36,805 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:27:36] "GET /api/query/progress/b3656bfd-a407-4460-b627-ec5527f7e6bb HTTP/1.1" 200 -
2025-04-05 22:28:04,353 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:28:04] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:28:35,231 [INFO] text2sql [app.py:250]: Schema requested for workspace: dfd
2025-04-05 22:28:35 - INFO - [app.py:250] - Schema requested for workspace: dfd
2025-04-05 22:28:35,237 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:28:35] "GET /api/schema?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:28:38,974 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:28:38] "GET / HTTP/1.1" 200 -
2025-04-05 22:28:39,326 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:28:39] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:28:39,329 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:28:39] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:28:39,338 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:28:39] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:28:39,340 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:28:39] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:28:39,341 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:28:39] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:28:39,345 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:28:39] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:28:39,638 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:28:39] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:28:39,644 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:28:39] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:28:39,648 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:28:39] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:28:39,976 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:28:39] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:28:44,601 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:28:44] "GET /api/tables/suggestions?workspace=dfd&query= HTTP/1.1" 200 -
2025-04-05 22:28:47,202 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:28:47] "GET /api/tables/suggestions?workspace=dfd&query= HTTP/1.1" 200 -
2025-04-05 22:28:54,692 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:28:54] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 22:28:55,034 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:28:55] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:28:55,048 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:28:55] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:28:55,280 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:28:55] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 22:28:55,405 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:28:55] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 22:29:06,387 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:29:06] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 22:29:06,719 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:29:06] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:29:06,728 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:29:06] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:29:06,979 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:29:06] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 22:29:07,079 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:29:07] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 22:29:25,444 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:29:25] "GET / HTTP/1.1" 200 -
2025-04-05 22:29:25,798 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:29:25] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:29:25,801 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:29:25] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:29:25,810 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:29:25] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:29:25,814 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:29:25] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:29:25,816 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:29:25] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:29:25,822 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:29:25] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:29:26,130 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:29:26] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:29:26,134 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:29:26] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:29:26,137 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:29:26] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:29:26,463 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:29:26] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:29:28,812 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:29:28] "GET /admin/schema HTTP/1.1" 200 -
2025-04-05 22:29:29,155 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:29:29] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:29:29,158 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:29:29] "[36mGET /static/css/admin-schema.css HTTP/1.1[0m" 304 -
2025-04-05 22:29:29,162 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:29:29] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:29:29,169 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:29:29] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:29:29,174 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:29:29] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:29:29,178 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:29:29] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:29:29,471 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:29:29] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:29:29,480 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:29:29] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:29:29,488 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:29:29] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:29:29,494 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:29:29] "[36mGET /static/js/admin/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:29:29,495 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:29:29] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:29:29,828 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:29:29] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:29:29,836 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:29:29] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-05 22:29:29,844 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:29:29] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-05 22:29:29,849 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:29:29] "GET /admin/api/schema/workspaces HTTP/1.1" 200 -
2025-04-05 22:29:36,635 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:29:36] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:29:36,947 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:29:36] "[36mGET /static/css/admin-schema.css HTTP/1.1[0m" 304 -
2025-04-05 22:30:06,156 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:30:06] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 22:30:06,405 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:30:06] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:30:06,483 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:30:06] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:30:06,497 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:30:06] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 22:30:06,802 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:30:06] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 22:30:07,586 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:30:07] "GET / HTTP/1.1" 200 -
2025-04-05 22:30:07,922 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:30:07] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:30:07,932 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:30:07] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:30:07,933 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:30:07] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:30:07,934 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:30:07] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:30:07,937 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:30:07] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:30:07,938 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:30:07] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:30:08,239 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:30:08] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:30:08,245 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:30:08] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:30:08,247 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:30:08] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:30:08,434 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:30:08] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:30:37,991 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:30:37] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:31:29,985 [INFO] text2sql [app.py:250]: Schema requested for workspace: dfd
2025-04-05 22:31:29 - INFO - [app.py:250] - Schema requested for workspace: dfd
2025-04-05 22:31:29,990 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:31:29] "GET /api/schema?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:31:59,068 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:31:59] "GET / HTTP/1.1" 200 -
2025-04-05 22:31:59,428 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:31:59] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:31:59,434 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:31:59] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:31:59,440 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:31:59] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:31:59,443 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:31:59] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:31:59,445 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:31:59] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:31:59,450 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:31:59] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:31:59,733 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:31:59] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:31:59,756 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:31:59] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:31:59,759 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:31:59] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:32:00,085 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:32:00] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:32:01,277 [INFO] text2sql [app.py:250]: Schema requested for workspace: dfd
2025-04-05 22:32:01 - INFO - [app.py:250] - Schema requested for workspace: dfd
2025-04-05 22:32:01,280 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:32:01] "GET /api/schema?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:32:03,237 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:32:03] "GET /samples HTTP/1.1" 200 -
2025-04-05 22:32:03,484 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:32:03] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:32:03,587 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:32:03] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:32:03,589 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:32:03] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:32:03,592 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:32:03] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:32:03,593 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:32:03] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:32:03,596 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:32:03] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:32:03,806 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:32:03] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:32:03,914 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:32:03] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:32:03,927 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:32:03] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:32:03,932 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:32:03] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 22:32:04,277 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:32:04] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:32:04,282 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:32:04] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 22:32:04,283 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:32:04] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 22:32:04,300 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 22:32:04 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 22:32:04,303 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 22:32:04 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 22:32:04,307 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 22:32:04 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 22:32:04,321 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 0 samples (page 1, limit 10)
2025-04-05 22:32:04 - INFO - [feedback_manager.py:531] - Retrieved 0 samples (page 1, limit 10)
2025-04-05 22:32:04,322 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:32:04] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 22:32:05,894 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:32:05] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 22:32:06,249 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:32:06] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:32:06,258 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:32:06] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:32:06,511 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:32:06] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 22:32:06,633 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:32:06] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 22:32:11,418 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:32:11] "GET / HTTP/1.1" 200 -
2025-04-05 22:32:11,745 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:32:11] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:32:11,765 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:32:11] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:32:11,769 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:32:11] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:32:11,771 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:32:11] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:32:11,772 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:32:11] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:32:11,775 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:32:11] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:32:12,055 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:32:12] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:32:12,074 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:32:12] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:32:12,079 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:32:12] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:32:12,257 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:32:12] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:32:48,930 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:32:48] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 22:32:49,274 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:32:49] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:32:49,279 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:32:49] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:32:49,517 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:32:49] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 22:32:49,620 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:32:49] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 22:32:51,301 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:32:51] "GET / HTTP/1.1" 200 -
2025-04-05 22:32:51,642 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:32:51] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:32:51,643 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:32:51] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:32:51,647 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:32:51] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:32:51,651 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:32:51] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:32:51,652 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:32:51] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:32:51,657 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:32:51] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:32:51,954 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:32:51] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:32:51,958 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:32:51] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:32:51,963 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:32:51] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:32:52,293 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:32:52] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:32:52,865 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:32:52] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 22:32:53,202 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:32:53] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:32:53,211 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:32:53] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:32:53,452 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:32:53] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 22:32:53,563 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:32:53] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 22:33:26,761 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:33:26] "GET / HTTP/1.1" 200 -
2025-04-05 22:33:27,119 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:33:27] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:33:27,123 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:33:27] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:33:27,125 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:33:27] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:33:27,136 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:33:27] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:33:27,137 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:33:27] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:33:27,139 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:33:27] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:33:27,435 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:33:27] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:33:27,438 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:33:27] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:33:27,449 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:33:27] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:33:27,789 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:33:27] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:33:36,183 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:33:36] "GET / HTTP/1.1" 200 -
2025-04-05 22:33:36,525 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:33:36] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:33:36,525 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:33:36] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:33:36,526 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:33:36] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:33:36,528 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:33:36] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:33:36,531 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:33:36] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:33:36,534 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:33:36] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:33:36,830 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:33:36] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:33:36,832 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:33:36] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:33:36,836 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:33:36] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:33:37,156 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:33:37] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:33:41,049 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:33:41] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:34:09,762 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:34:09] "GET / HTTP/1.1" 200 -
2025-04-05 22:34:10,014 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:34:10] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:34:10,111 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:34:10] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:34:10,112 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:34:10] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:34:10,117 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:34:10] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:34:10,125 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:34:10] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:34:10,126 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:34:10] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:34:10,323 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:34:10] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:34:10,419 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:34:10] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:34:10,421 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:34:10] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:34:10,750 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:34:10] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:34:33,067 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:34:33] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:36:17,518 [INFO] text2sql [app.py:250]: Schema requested for workspace: dfd
2025-04-05 22:36:17 - INFO - [app.py:250] - Schema requested for workspace: dfd
2025-04-05 22:36:17,520 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:36:17] "GET /api/schema?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:36:30,857 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'get me all the customers'
2025-04-05 22:36:30,858 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:36:30] "POST /api/query HTTP/1.1" 200 -
2025-04-05 22:36:30,858 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'get me all the customers'
2025-04-05 22:36:30,860 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-05 22:36:30,861 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.00s
2025-04-05 22:36:30,862 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-05 22:36:30,862 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-05 22:36:30,863 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-05 22:36:30 - INFO - [database.py:44] - Attempting database connection
2025-04-05 22:36:30,865 [INFO] text2sql.database [database.py:48]: Database connection established in 0.00s
2025-04-05 22:36:30 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-05 22:36:30,866 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'get me all the customers'
2025-04-05 22:36:30,867 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-05 22:36:30,868 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-05 22:36:30,868 [INFO] text2sql.llm_engine [llm_engine.py:55]: [TABLE] Completion generation started
2025-04-05 22:36:30 - INFO - [llm_engine.py:55] - [TABLE] Completion generation started
2025-04-05 22:36:31,099 [ERROR] text2sql.llm_engine [llm_engine.py:98]: [TABLE] Completion generation error after 0.23s: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/llm_engine.py", line 72, in generate_completion
    response = self.client.complete(
               ^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/ai/inference/_patch.py", line 728, in complete
    pipeline_response: PipelineResponse = self._client._pipeline.run(  # pylint: disable=protected-access
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 240, in run
    return first_node.send(pipeline_request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  [Previous line repeated 2 more times]
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/policies/_redirect.py", line 204, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/policies/_retry.py", line 573, in send
    raise err
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/policies/_retry.py", line 551, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  [Previous line repeated 3 more times]
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 128, in send
    self._sender.send(request.http_request, **request.context.options),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/transport/_requests_basic.py", line 409, in send
    raise error
azure.core.exceptions.ServiceResponseError: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
2025-04-05 22:36:31 - ERROR - [llm_engine.py:98] - [TABLE] Completion generation error after 0.23s: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/llm_engine.py", line 72, in generate_completion
    response = self.client.complete(
               ^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/ai/inference/_patch.py", line 728, in complete
    pipeline_response: PipelineResponse = self._client._pipeline.run(  # pylint: disable=protected-access
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 240, in run
    return first_node.send(pipeline_request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  [Previous line repeated 2 more times]
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/policies/_redirect.py", line 204, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/policies/_retry.py", line 573, in send
    raise err
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/policies/_retry.py", line 551, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  [Previous line repeated 3 more times]
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 128, in send
    self._sender.send(request.http_request, **request.context.options),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/transport/_requests_basic.py", line 409, in send
    raise error
azure.core.exceptions.ServiceResponseError: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
2025-04-05 22:36:31,107 [ERROR] text2sql.agents.table [table_agent.py:95]: Table selection error after 0.24s: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/agents/table_agent.py", line 67, in get_relevant_tables
    raw_response = self.llm_engine.generate_completion(messages, log_prefix="TABLE")
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/text2sql/src/utils/llm_engine.py", line 72, in generate_completion
    response = self.client.complete(
               ^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/ai/inference/_patch.py", line 728, in complete
    pipeline_response: PipelineResponse = self._client._pipeline.run(  # pylint: disable=protected-access
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 240, in run
    return first_node.send(pipeline_request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  [Previous line repeated 2 more times]
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/policies/_redirect.py", line 204, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/policies/_retry.py", line 573, in send
    raise err
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/policies/_retry.py", line 551, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  [Previous line repeated 3 more times]
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 128, in send
    self._sender.send(request.http_request, **request.context.options),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/transport/_requests_basic.py", line 409, in send
    raise error
azure.core.exceptions.ServiceResponseError: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
2025-04-05 22:36:31,109 [WARNING] text2sql.agents.table [table_agent.py:98]: Defaulting to first 3 tables due to error: customers, products, orders
2025-04-05 22:36:31,109 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'get me all the customers'
2025-04-05 22:36:31,110 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: customers, products, orders
2025-04-05 22:36:31,110 [INFO] text2sql.agents.column [column_agent.py:94]: Sending request to AI model for column selection
2025-04-05 22:36:31,110 [INFO] text2sql.llm_engine [llm_engine.py:55]: [COLUMN] Completion generation started
2025-04-05 22:36:31 - INFO - [llm_engine.py:55] - [COLUMN] Completion generation started
2025-04-05 22:36:31,670 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:36:31] "GET /api/query/progress/60ae2e9c-4b74-4ff1-845f-c84916a5f08b HTTP/1.1" 200 -
2025-04-05 22:36:31,915 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:36:31] "GET /api/query/progress/60ae2e9c-4b74-4ff1-845f-c84916a5f08b HTTP/1.1" 200 -
2025-04-05 22:36:32,344 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:36:32] "GET /api/query/progress/60ae2e9c-4b74-4ff1-845f-c84916a5f08b HTTP/1.1" 200 -
2025-04-05 22:36:33,096 [INFO] text2sql.llm_engine [llm_engine.py:92]: [COLUMN] Completion generation completed in 1.99s
2025-04-05 22:36:33 - INFO - [llm_engine.py:92] - [COLUMN] Completion generation completed in 1.99s
2025-04-05 22:36:33,099 [INFO] text2sql.llm_engine [llm_engine.py:93]: **************************
2025-04-05 22:36:33 - INFO - [llm_engine.py:93] - **************************
2025-04-05 22:36:33,104 [INFO] text2sql.agents.column [column_agent.py:99]: Raw model response: '{
  "customers": ["customer_id", "first_name", "last_name", "email", "phone", "address", "city", "state", "country", "postal_code", "registration_date"]
}'
2025-04-05 22:36:33,106 [INFO] text2sql.agents.column [column_agent.py:139]: Parsing column selection from model response
2025-04-05 22:36:33,108 [INFO] text2sql.agents.column [column_agent.py:149]: Parsed column selection JSON: {"customers": ["customer_id", "first_name", "last_name", "email", "phone", "address", "city", "state", "country", "postal_code", "registration_date"]}
2025-04-05 22:36:33,109 [INFO] text2sql.agents.column [column_agent.py:111]: Table 'customers': Pruned 0 columns, kept 11/11
2025-04-05 22:36:33,111 [INFO] text2sql.agents.column [column_agent.py:197]: Building pruned schema
2025-04-05 22:36:33,113 [INFO] text2sql.agents.column [column_agent.py:226]: Built pruned schema (576 chars)
2025-04-05 22:36:33,115 [INFO] text2sql.agents.column [column_agent.py:120]: Column pruning completed in 2.01s
2025-04-05 22:36:33,117 [ERROR] text2sql [background_tasks.py:60]: Exception while processing query: 'join_type'
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/background_tasks.py", line 38, in process_in_background
    result = self.sql_manager.process_query(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/text2sql/src/models/sql_generator.py", line 71, in process_query
    sql_result = self._generate_sql(query, workspaces, explicit_tables, progress_callback)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/text2sql/src/models/sql_generator.py", line 222, in _generate_sql
    join_info = "\n".join([
                          ^
  File "/home/vijay/text2sql/src/models/sql_generator.py", line 224, in <listcomp>
    f"{join['join_type']} JOIN on {join['condition']}"
       ~~~~^^^^^^^^^^^^^
KeyError: 'join_type'
2025-04-05 22:36:33 - ERROR - [background_tasks.py:60] - Exception while processing query: 'join_type'
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/background_tasks.py", line 38, in process_in_background
    result = self.sql_manager.process_query(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/text2sql/src/models/sql_generator.py", line 71, in process_query
    sql_result = self._generate_sql(query, workspaces, explicit_tables, progress_callback)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/text2sql/src/models/sql_generator.py", line 222, in _generate_sql
    join_info = "\n".join([
                          ^
  File "/home/vijay/text2sql/src/models/sql_generator.py", line 224, in <listcomp>
    f"{join['join_type']} JOIN on {join['condition']}"
       ~~~~^^^^^^^^^^^^^
KeyError: 'join_type'
2025-04-05 22:36:33,133 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:36:33] "GET /api/query/progress/60ae2e9c-4b74-4ff1-845f-c84916a5f08b HTTP/1.1" 200 -
2025-04-05 22:36:56,713 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'get me all the customers'
2025-04-05 22:36:56,714 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:36:56] "POST /api/query HTTP/1.1" 200 -
2025-04-05 22:36:56,715 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'get me all the customers'
2025-04-05 22:36:56,716 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-05 22:36:56,717 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.00s
2025-04-05 22:36:56,717 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-05 22:36:56,718 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-05 22:36:56,718 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-05 22:36:56 - INFO - [database.py:44] - Attempting database connection
2025-04-05 22:36:56,721 [INFO] text2sql.database [database.py:48]: Database connection established in 0.00s
2025-04-05 22:36:56 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-05 22:36:56,723 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'get me all the customers'
2025-04-05 22:36:56,724 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-05 22:36:56,725 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-05 22:36:56,726 [INFO] text2sql.llm_engine [llm_engine.py:55]: [TABLE] Completion generation started
2025-04-05 22:36:56 - INFO - [llm_engine.py:55] - [TABLE] Completion generation started
2025-04-05 22:36:57,525 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:36:57] "GET /api/query/progress/64ef6963-87a5-4667-893b-6a2eee49e871 HTTP/1.1" 200 -
2025-04-05 22:36:57,788 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:36:57] "GET /api/query/progress/64ef6963-87a5-4667-893b-6a2eee49e871 HTTP/1.1" 200 -
2025-04-05 22:36:57,863 [INFO] text2sql.llm_engine [llm_engine.py:92]: [TABLE] Completion generation completed in 1.14s
2025-04-05 22:36:57 - INFO - [llm_engine.py:92] - [TABLE] Completion generation completed in 1.14s
2025-04-05 22:36:57,864 [INFO] text2sql.llm_engine [llm_engine.py:93]: **************************
2025-04-05 22:36:57 - INFO - [llm_engine.py:93] - **************************
2025-04-05 22:36:57,864 [INFO] text2sql.agents.table [table_agent.py:69]: Raw model response: 'customers'
2025-04-05 22:36:57,865 [INFO] text2sql.agents.table [table_agent.py:90]: Table selection completed in 1.14s. Selected: customers
2025-04-05 22:36:57,865 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'get me all the customers'
2025-04-05 22:36:57,866 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: customers
2025-04-05 22:36:57,866 [INFO] text2sql.agents.column [column_agent.py:38]: Only one table involved (customers). Skipping LLM call and including all columns.
2025-04-05 22:36:57,867 [INFO] text2sql.feedback [feedback_manager.py:267]: Stage 1: Vector search for 'get me all the customers...'
2025-04-05 22:36:57 - INFO - [feedback_manager.py:267] - Stage 1: Vector search for 'get me all the customers...'
2025-04-05 22:36:57,916 [WARNING] text2sql.feedback [feedback_manager.py:324]: No candidates found from vector search
2025-04-05 22:36:57 - WARNING - [feedback_manager.py:324] - No candidates found from vector search
2025-04-05 22:36:57,917 [INFO] text2sql.azure [azure_client.py:35]: SQL generation started for query: 'get me all the customers'
2025-04-05 22:36:57 - INFO - [azure_client.py:35] - SQL generation started for query: 'get me all the customers'
2025-04-05 22:36:57,920 [INFO] text2sql.azure [azure_client.py:69]: Including schema information (587 chars)
2025-04-05 22:36:57 - INFO - [azure_client.py:69] - Including schema information (587 chars)
2025-04-05 22:36:57,921 [INFO] text2sql.azure [azure_client.py:104]: Including 3 SQL examples (no similarity examples found)
2025-04-05 22:36:57 - INFO - [azure_client.py:104] - Including 3 SQL examples (no similarity examples found)
2025-04-05 22:36:57,922 [INFO] text2sql.azure [azure_client.py:114]: PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some example queries and their SQL:\nQuestion: How many records are in the customers table?\nSQL: SELECT COUNT(*) AS record_count FROM customers\n\nQuestion: Get all columns from customers\nSQL: SELECT * FROM customers LIMIT 5\n\nQuestion: Get record from customers by customer_id\nSQL: SELECT * FROM customers WHERE customer_id = 1\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me all the customers'}]
2025-04-05 22:36:57 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some example queries and their SQL:\nQuestion: How many records are in the customers table?\nSQL: SELECT COUNT(*) AS record_count FROM customers\n\nQuestion: Get all columns from customers\nSQL: SELECT * FROM customers LIMIT 5\n\nQuestion: Get record from customers by customer_id\nSQL: SELECT * FROM customers WHERE customer_id = 1\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me all the customers'}]
2025-04-05 22:36:57,923 [INFO] text2sql.llm_engine [llm_engine.py:55]: [SQL_GEN] Completion generation started
2025-04-05 22:36:57 - INFO - [llm_engine.py:55] - [SQL_GEN] Completion generation started
2025-04-05 22:36:58,204 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:36:58] "GET /api/query/progress/64ef6963-87a5-4667-893b-6a2eee49e871 HTTP/1.1" 200 -
2025-04-05 22:36:59,015 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:36:59] "GET /api/query/progress/64ef6963-87a5-4667-893b-6a2eee49e871 HTTP/1.1" 200 -
2025-04-05 22:36:59,251 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:36:59] "GET /api/query/progress/64ef6963-87a5-4667-893b-6a2eee49e871 HTTP/1.1" 200 -
2025-04-05 22:36:59,675 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:36:59] "GET /api/query/progress/64ef6963-87a5-4667-893b-6a2eee49e871 HTTP/1.1" 200 -
2025-04-05 22:36:59,867 [INFO] text2sql.llm_engine [llm_engine.py:92]: [SQL_GEN] Completion generation completed in 1.94s
2025-04-05 22:36:59 - INFO - [llm_engine.py:92] - [SQL_GEN] Completion generation completed in 1.94s
2025-04-05 22:36:59,868 [INFO] text2sql.llm_engine [llm_engine.py:93]: **************************
2025-04-05 22:36:59 - INFO - [llm_engine.py:93] - **************************
2025-04-05 22:36:59,870 [INFO] text2sql.azure [azure_client.py:150]: Parsing SQL from model response
2025-04-05 22:36:59 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-05 22:36:59,872 [INFO] text2sql.azure [azure_client.py:157]: Found SQL code block in response
2025-04-05 22:36:59 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-05 22:36:59,874 [INFO] text2sql.azure [azure_client.py:171]: Extracted SQL query (24 chars) and explanation (160 chars)
2025-04-05 22:36:59 - INFO - [azure_client.py:171] - Extracted SQL query (24 chars) and explanation (160 chars)
2025-04-05 22:36:59,876 [INFO] text2sql.azure [azure_client.py:124]: Generated SQL: SELECT * FROM customers;
2025-04-05 22:36:59 - INFO - [azure_client.py:124] - Generated SQL: SELECT * FROM customers;
2025-04-05 22:36:59,878 [INFO] text2sql.azure [azure_client.py:132]: SQL generation completed in 1.96s
2025-04-05 22:36:59 - INFO - [azure_client.py:132] - SQL generation completed in 1.96s
2025-04-05 22:36:59,879 [INFO] text2sql.database [database.py:65]: Executing SQL query: SELECT * FROM customers;
2025-04-05 22:36:59 - INFO - [database.py:65] - Executing SQL query: SELECT * FROM customers;
2025-04-05 22:36:59,886 [INFO] text2sql.database [database.py:86]: Query returned 5 rows with 11 columns
2025-04-05 22:36:59 - INFO - [database.py:86] - Query returned 5 rows with 11 columns
2025-04-05 22:36:59,891 [INFO] text2sql.database [database.py:95]: Query processing completed in 0.01s
2025-04-05 22:36:59 - INFO - [database.py:95] - Query processing completed in 0.01s
2025-04-05 22:36:59,894 [INFO] text2sql.sql_generator [sql_generator.py:376]: SQL generation completed in 3.18s
2025-04-05 22:36:59,895 [INFO] text2sql.sql_generator [sql_generator.py:125]: Query processing completed in 3.18s
2025-04-05 22:37:00,473 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:37:00] "GET /api/query/progress/64ef6963-87a5-4667-893b-6a2eee49e871 HTTP/1.1" 200 -
2025-04-05 22:37:36,649 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:37:36] "GET / HTTP/1.1" 200 -
2025-04-05 22:37:36,994 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:37:36] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:37:36,999 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:37:36] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:37:37,001 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:37:37] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:37:37,010 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:37:37] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:37:37,011 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:37:37] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:37:37,012 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:37:37] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:37:37,312 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:37:37] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:37:37,316 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:37:37] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:37:37,317 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:37:37] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:37:37,651 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:37:37] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:37:44,747 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:37:44] "GET /admin/users HTTP/1.1" 200 -
2025-04-05 22:37:45,095 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:37:45] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:37:45,101 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:37:45] "[36mGET /static/js/admin/users.js HTTP/1.1[0m" 304 -
2025-04-05 22:37:49,660 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:37:49] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:38:07,699 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:38:07] "GET / HTTP/1.1" 200 -
2025-04-05 22:38:07,935 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:38:07] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:38:08,040 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:38:08] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:38:08,046 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:38:08] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:38:08,050 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:38:08] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:38:08,052 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:38:08] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:38:08,063 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:38:08] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:38:08,237 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:38:08] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:38:08,352 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:38:08] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:38:08,353 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:38:08] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:38:08,676 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:38:08] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:38:11,586 [INFO] text2sql [app.py:250]: Schema requested for workspace: dfd
2025-04-05 22:38:11 - INFO - [app.py:250] - Schema requested for workspace: dfd
2025-04-05 22:38:11,591 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:38:11] "GET /api/schema?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:38:14,012 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:38:14] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 22:38:14,258 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:38:14] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:38:14,343 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:38:14] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:38:14,367 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:38:14] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 22:38:14,686 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:38:14] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 22:38:16,191 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:38:16] "GET / HTTP/1.1" 200 -
2025-04-05 22:38:16,436 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:38:16] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:38:16,523 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:38:16] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:38:16,528 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:38:16] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:38:16,534 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:38:16] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:38:16,535 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:38:16] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:38:16,536 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:38:16] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:38:16,739 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:38:16] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:38:16,834 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:38:16] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:38:16,836 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:38:16] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:38:17,149 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:38:17] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:38:17,413 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:38:17] "GET /admin/users HTTP/1.1" 200 -
2025-04-05 22:38:17,456 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:38:17] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:38:17,750 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:38:17] "[36mGET /static/js/admin/users.js HTTP/1.1[0m" 304 -
2025-04-05 22:38:18,939 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:38:18] "GET / HTTP/1.1" 200 -
2025-04-05 22:38:19,347 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:38:19] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:38:19,430 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:38:19] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:38:19,461 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:38:19] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:38:19,466 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:38:19] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:38:19,473 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:38:19] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:38:19,492 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:38:19] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:38:19,664 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:38:19] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:38:19,757 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:38:19] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:38:19,781 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:38:19] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:38:19,841 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:38:19] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:38:40,731 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:38:40] "GET /admin/roles HTTP/1.1" 200 -
2025-04-05 22:38:40,945 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:38:40] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:38:41,067 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:38:41] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-05 22:38:42,753 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:38:42] "GET / HTTP/1.1" 200 -
2025-04-05 22:38:43,082 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:38:43] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:38:43,094 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:38:43] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:38:43,095 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:38:43] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:38:43,096 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:38:43] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:38:43,102 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:38:43] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:38:43,105 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:38:43] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:38:43,379 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:38:43] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:38:43,410 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:38:43] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:38:43,410 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:38:43] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:38:43,586 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:38:43] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:39:10,703 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:39:10] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:39:34,652 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:39:34] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 22:39:34,917 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:39:34] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:39:35,012 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:39:35] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:39:35,039 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:39:35] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 22:39:35,373 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:39:35] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 22:39:37,808 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:39:37] "GET / HTTP/1.1" 200 -
2025-04-05 22:39:38,068 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:39:38] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:39:38,155 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:39:38] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:39:38,166 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:39:38] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:39:38,169 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:39:38] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:39:38,170 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:39:38] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:39:38,175 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:39:38] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:39:38,388 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:39:38] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:39:38,481 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:39:38] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:39:38,492 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:39:38] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:39:38,831 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:39:38] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:39:54,520 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:39:54] "GET / HTTP/1.1" 200 -
2025-04-05 22:39:54,862 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:39:54] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:39:54,863 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:39:54] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:39:54,865 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:39:54] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:39:54,869 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:39:54] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:39:54,872 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:39:54] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:39:54,873 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:39:54] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:39:55,168 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:39:55] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:39:55,170 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:39:55] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:39:55,174 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:39:55] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:39:55,508 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:39:55] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:39:56,673 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:39:56] "GET /admin/audit-logs HTTP/1.1" 200 -
2025-04-05 22:39:57,010 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:39:57] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:39:57,017 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:39:57] "[36mGET /static/js/admin/audit-logs.js HTTP/1.1[0m" 304 -
2025-04-05 22:40:04,710 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:40:04] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:41:14,470 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:41:14] "GET / HTTP/1.1" 200 -
2025-04-05 22:41:14,744 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:41:14] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:41:14,804 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:41:14] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:41:14,806 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:41:14] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:41:14,807 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:41:14] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:41:14,810 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:41:14] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:41:14,811 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:41:14] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:41:15,057 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:41:15] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:41:15,122 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:41:15] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:41:15,124 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:41:15] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:41:15,450 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:41:15] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:41:16,140 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:41:16] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 22:41:16,488 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:41:16] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:41:16,490 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:41:16] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:41:16,759 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:41:16] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 22:41:16,826 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:41:16] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 22:41:20,094 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:41:20] "GET /admin/users HTTP/1.1" 200 -
2025-04-05 22:41:20,439 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:41:20] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:41:20,456 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:41:20] "[36mGET /static/js/admin/users.js HTTP/1.1[0m" 304 -
2025-04-05 22:41:29,397 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:41:29] "GET /admin/roles HTTP/1.1" 200 -
2025-04-05 22:41:29,730 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:41:29] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:41:29,754 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:41:29] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-05 22:41:34,378 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:41:34] "GET / HTTP/1.1" 200 -
2025-04-05 22:41:34,710 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:41:34] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:41:34,720 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:41:34] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:41:34,720 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:41:34] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:41:34,721 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:41:34] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:41:34,722 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:41:34] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:41:34,723 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:41:34] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:41:35,019 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:41:35] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:41:35,047 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:41:35] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:41:35,057 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:41:35] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:41:35,207 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:41:35] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:41:43,402 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:41:43] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:42:07,725 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:42:07] "GET / HTTP/1.1" 200 -
2025-04-05 22:42:07,984 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:42:07] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:42:08,086 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:42:08] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:42:08,088 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:42:08] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:42:08,091 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:42:08] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:42:08,097 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:42:08] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:42:08,099 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:42:08] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:42:08,293 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:42:08] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:42:08,404 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:42:08] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:42:08,407 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:42:08] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:42:08,733 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:42:08] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:42:39,447 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:42:39] "GET / HTTP/1.1" 200 -
2025-04-05 22:42:39,793 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:42:39] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:42:39,796 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:42:39] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:42:39,797 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:42:39] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:42:39,803 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:42:39] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:42:39,806 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:42:39] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:42:39,808 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:42:39] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:42:40,096 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:42:40] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:42:40,100 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:42:40] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:42:40,105 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:42:40] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:42:40,423 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:42:40] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:42:50,049 [INFO] text2sql [app.py:250]: Schema requested for workspace: dfd
2025-04-05 22:42:50 - INFO - [app.py:250] - Schema requested for workspace: dfd
2025-04-05 22:42:50,052 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:42:50] "GET /api/schema?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:42:53,312 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:42:53] "GET /samples HTTP/1.1" 200 -
2025-04-05 22:42:53,562 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:42:53] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:42:53,684 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:42:53] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:42:53,702 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:42:53] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:42:53,706 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:42:53] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:42:53,709 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:42:53] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:42:53,712 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:42:53] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:42:53,879 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:42:53] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:42:54,012 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:42:54] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:42:54,034 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:42:54] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:42:54,036 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:42:54] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 22:42:54,367 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:42:54] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:42:54,370 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:42:54] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 22:42:54,380 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:42:54] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 22:42:54,388 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 22:42:54 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 22:42:54,390 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 22:42:54 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 22:42:54,394 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 22:42:54 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 22:42:54,397 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 0 samples (page 1, limit 10)
2025-04-05 22:42:54 - INFO - [feedback_manager.py:531] - Retrieved 0 samples (page 1, limit 10)
2025-04-05 22:42:54,399 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:42:54] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 22:42:56,331 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:42:56] "GET /samples HTTP/1.1" 200 -
2025-04-05 22:42:56,690 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:42:56] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:42:56,693 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:42:56] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:42:56,699 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:42:56] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:42:56,712 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:42:56] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:42:56,714 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:42:56] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:42:56,719 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:42:56] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:42:57,015 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:42:57] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:42:57,026 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:42:57] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:42:57,029 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:42:57] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:42:57,033 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:42:57] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 22:42:57,358 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:42:57] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:42:57,359 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:42:57] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 22:42:57,363 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:42:57] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 22:42:57,381 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 22:42:57 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 22:42:57,383 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 22:42:57 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 22:42:57,385 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 22:42:57 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 22:42:57,389 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 0 samples (page 1, limit 10)
2025-04-05 22:42:57 - INFO - [feedback_manager.py:531] - Retrieved 0 samples (page 1, limit 10)
2025-04-05 22:42:57,391 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:42:57] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 22:42:57,617 [INFO] text2sql [app.py:250]: Schema requested for workspace: dfd
2025-04-05 22:42:57 - INFO - [app.py:250] - Schema requested for workspace: dfd
2025-04-05 22:42:57,622 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:42:57] "GET /api/schema?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:43:02,571 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:43:02] "GET /admin/users HTTP/1.1" 200 -
2025-04-05 22:43:02,903 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:43:02] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:43:02,910 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:43:02] "[36mGET /static/js/admin/users.js HTTP/1.1[0m" 304 -
2025-04-05 22:43:04,134 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:43:04] "GET /admin/roles HTTP/1.1" 200 -
2025-04-05 22:43:04,469 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:43:04] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:43:04,477 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:43:04] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-05 22:43:06,191 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:43:06] "GET / HTTP/1.1" 200 -
2025-04-05 22:43:06,549 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:43:06] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:43:06,553 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:43:06] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:43:06,555 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:43:06] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:43:06,563 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:43:06] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:43:06,566 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:43:06] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:43:06,569 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:43:06] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:43:06,889 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:43:06] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:43:06,891 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:43:06] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:43:06,896 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:43:06] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:43:07,215 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:43:07] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:43:57,804 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:43:57] "GET / HTTP/1.1" 200 -
2025-04-05 22:43:58,163 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:43:58] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:43:58,168 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:43:58] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:43:58,171 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:43:58] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:43:58,174 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:43:58] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:43:58,180 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:43:58] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:43:58,183 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:43:58] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:43:58,495 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:43:58] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:43:58,500 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:43:58] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:43:58,507 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:43:58] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:43:58,843 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:43:58] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:44:00,153 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:44:00] "GET /admin/roles HTTP/1.1" 200 -
2025-04-05 22:44:00,492 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:44:00] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:44:00,495 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:44:00] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-05 22:44:05,067 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:44:05] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:45:21,378 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:21] "GET /admin/roles HTTP/1.1" 200 -
2025-04-05 22:45:21,615 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:21] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:45:21,711 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:21] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-05 22:45:29,718 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:29] "GET /samples HTTP/1.1" 200 -
2025-04-05 22:45:30,064 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:30] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:45:30,080 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:30] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:45:30,085 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:30] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:45:30,082 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:30] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:45:30,091 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:30] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:45:30,094 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:30] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:45:30,382 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:30] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:45:30,416 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:30] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:45:30,422 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:30] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:45:30,430 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:30] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 22:45:30,563 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:30] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:45:30,762 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:30] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 22:45:30,772 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:30] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 22:45:30,790 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 22:45:30 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 22:45:30,791 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 22:45:30 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 22:45:30,794 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 22:45:30 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 22:45:30,797 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 0 samples (page 1, limit 10)
2025-04-05 22:45:30 - INFO - [feedback_manager.py:531] - Retrieved 0 samples (page 1, limit 10)
2025-04-05 22:45:30,799 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:30] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 22:45:31,346 [INFO] text2sql [app.py:250]: Schema requested for workspace: dfd
2025-04-05 22:45:31 - INFO - [app.py:250] - Schema requested for workspace: dfd
2025-04-05 22:45:31,348 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:31] "GET /api/schema?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:45:34,286 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:34] "GET /admin/users HTTP/1.1" 200 -
2025-04-05 22:45:34,532 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:34] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:45:34,640 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:34] "[36mGET /static/js/admin/users.js HTTP/1.1[0m" 304 -
2025-04-05 22:45:37,361 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:37] "GET /admin/roles HTTP/1.1" 200 -
2025-04-05 22:45:37,702 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:37] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:45:37,709 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:37] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-05 22:45:39,260 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:39] "GET /admin/schema HTTP/1.1" 200 -
2025-04-05 22:45:39,612 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:39] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:45:39,617 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:39] "[36mGET /static/css/admin-schema.css HTTP/1.1[0m" 304 -
2025-04-05 22:45:39,620 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:39] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:45:39,622 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:39] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:45:39,638 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:39] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:45:39,634 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:39] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:45:39,943 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:39] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:45:39,946 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:39] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:45:39,955 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:39] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:45:39,961 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:39] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:45:39,968 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:39] "[36mGET /static/js/admin/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:45:40,302 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:40] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:45:40,311 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:40] "GET /admin/api/schema/workspaces HTTP/1.1" 200 -
2025-04-05 22:45:40,326 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:40] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-05 22:45:40,332 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:40] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-05 22:45:42,846 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:42] "GET /admin/roles HTTP/1.1" 200 -
2025-04-05 22:45:43,194 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:43] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:45:43,204 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:43] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-05 22:45:44,484 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:44] "GET /admin/schema HTTP/1.1" 200 -
2025-04-05 22:45:44,834 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:44] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:45:44,851 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:44] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:45:44,852 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:44] "[36mGET /static/css/admin-schema.css HTTP/1.1[0m" 304 -
2025-04-05 22:45:44,856 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:44] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:45:44,857 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:44] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:45:44,859 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:44] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:45:45,152 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:45] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:45:45,167 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:45] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:45:45,175 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:45] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:45:45,176 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:45] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:45:45,178 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:45] "[36mGET /static/js/admin/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:45:45,510 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:45] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:45:45,518 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:45] "GET /admin/api/schema/workspaces HTTP/1.1" 200 -
2025-04-05 22:45:45,526 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:45] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-05 22:45:45,533 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:45] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-05 22:45:47,526 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:45:47] "GET /admin/api/schema/workspaces/dfd HTTP/1.1" 200 -
2025-04-05 22:46:00,205 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:00] "GET /admin/schema HTTP/1.1" 200 -
2025-04-05 22:46:00,445 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:00] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:46:00,566 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:00] "[36mGET /static/css/admin-schema.css HTTP/1.1[0m" 304 -
2025-04-05 22:46:00,582 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:00] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:46:00,584 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:00] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:46:00,598 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:00] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:46:00,599 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:00] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:46:00,761 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:00] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:46:00,900 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:00] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:46:00,918 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:00] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:46:00,923 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:00] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:46:00,928 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:00] "[36mGET /static/js/admin/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:46:01,262 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:01] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:46:01,267 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:01] "GET /admin/api/schema/workspaces HTTP/1.1" 200 -
2025-04-05 22:46:01,273 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:01] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-05 22:46:01,277 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:01] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-05 22:46:02,575 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:02] "GET /admin/roles HTTP/1.1" 200 -
2025-04-05 22:46:02,905 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:02] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:46:02,911 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:02] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-05 22:46:05,503 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:05] "GET /admin/audit-logs HTTP/1.1" 200 -
2025-04-05 22:46:05,851 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:05] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:46:05,870 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:05] "[36mGET /static/js/admin/audit-logs.js HTTP/1.1[0m" 304 -
2025-04-05 22:46:12,461 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:12] "GET /admin/schema HTTP/1.1" 200 -
2025-04-05 22:46:12,793 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:12] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:46:12,813 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:12] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:46:12,816 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:12] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:46:12,817 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:12] "[36mGET /static/css/admin-schema.css HTTP/1.1[0m" 304 -
2025-04-05 22:46:12,822 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:12] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:46:12,823 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:12] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:46:13,115 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:13] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:46:13,129 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:13] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:46:13,133 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:13] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:46:13,136 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:13] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:46:13,140 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:13] "[36mGET /static/js/admin/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:46:13,297 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:13] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:46:13,464 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:13] "GET /admin/api/schema/workspaces HTTP/1.1" 200 -
2025-04-05 22:46:13,469 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:13] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-05 22:46:13,475 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:13] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-05 22:46:14,825 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:14] "GET /admin/roles HTTP/1.1" 200 -
2025-04-05 22:46:15,152 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:15] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:46:15,168 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:15] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-05 22:46:15,713 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:15] "GET /admin/users HTTP/1.1" 200 -
2025-04-05 22:46:16,036 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:16] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:46:16,045 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:16] "[36mGET /static/js/admin/users.js HTTP/1.1[0m" 304 -
2025-04-05 22:46:16,340 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:16] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 22:46:16,674 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:16] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:46:16,686 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:16] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:46:16,912 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:16] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 22:46:17,025 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:17] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 22:46:27,822 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:27] "GET /samples HTTP/1.1" 200 -
2025-04-05 22:46:28,171 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:28] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:46:28,178 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:28] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:46:28,179 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:28] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:46:28,182 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:28] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:46:28,182 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:28] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:46:28,184 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:28] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:46:28,504 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:28] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:46:28,507 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:28] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:46:28,511 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:28] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:46:28,515 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:28] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 22:46:28,844 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:28] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:46:28,846 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:28] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 22:46:28,848 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:28] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 22:46:28,854 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 22:46:28 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 22:46:28,859 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 22:46:28 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 22:46:28,863 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 22:46:28 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 22:46:28,866 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 0 samples (page 1, limit 10)
2025-04-05 22:46:28 - INFO - [feedback_manager.py:531] - Retrieved 0 samples (page 1, limit 10)
2025-04-05 22:46:28,869 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:28] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 22:46:32,500 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:32] "GET / HTTP/1.1" 200 -
2025-04-05 22:46:32,831 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:32] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:46:32,847 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:32] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:46:32,848 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:32] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:46:32,852 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:32] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:46:32,856 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:32] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:46:32,862 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:32] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:46:33,151 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:33] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:46:33,160 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:33] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:46:33,164 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:33] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:46:33,340 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:33] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:46:44,230 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:46:44] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:48:08,947 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:48:08] "GET / HTTP/1.1" 200 -
2025-04-05 22:48:09,195 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:48:09] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:48:09,275 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:48:09] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:48:09,279 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:48:09] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:48:09,279 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:48:09] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:48:09,281 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:48:09] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:48:09,285 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:48:09] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:48:09,510 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:48:09] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:48:09,591 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:48:09] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:48:09,593 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:48:09] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:48:09,916 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:48:09] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:48:16,425 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:48:16] "GET /admin/audit-logs HTTP/1.1" 200 -
2025-04-05 22:48:16,767 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:48:16] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:48:16,787 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:48:16] "[36mGET /static/js/admin/audit-logs.js HTTP/1.1[0m" 304 -
2025-04-05 22:48:28,024 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:48:28] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:49:02,241 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:49:02] "GET / HTTP/1.1" 200 -
2025-04-05 22:49:02,494 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:49:02] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:49:02,569 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:49:02] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:49:02,581 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:49:02] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:49:02,582 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:49:02] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:49:02,583 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:49:02] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:49:02,585 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:49:02] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:49:02,811 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:49:02] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:49:02,878 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:49:02] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:49:02,883 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:49:02] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:49:03,200 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:49:03] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:49:05,113 [INFO] text2sql [app.py:250]: Schema requested for workspace: dfd
2025-04-05 22:49:05 - INFO - [app.py:250] - Schema requested for workspace: dfd
2025-04-05 22:49:05,116 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:49:05] "GET /api/schema?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:49:07,008 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:49:07] "GET /samples HTTP/1.1" 200 -
2025-04-05 22:49:07,252 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:49:07] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:49:07,361 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:49:07] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:49:07,377 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:49:07] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:49:07,379 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:49:07] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:49:07,380 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:49:07] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:49:07,385 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:49:07] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:49:07,579 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:49:07] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:49:07,668 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:49:07] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:49:07,696 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:49:07] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:49:07,699 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:49:07] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 22:49:08,023 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:49:08] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:49:08,029 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:49:08] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 22:49:08,034 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:49:08] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 22:49:08,043 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 22:49:08 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 22:49:08,051 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 22:49:08 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 22:49:08,055 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 22:49:08 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 22:49:08,059 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 0 samples (page 1, limit 10)
2025-04-05 22:49:08 - INFO - [feedback_manager.py:531] - Retrieved 0 samples (page 1, limit 10)
2025-04-05 22:49:08,060 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:49:08] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 22:49:12,812 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:49:12] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:51:54,510 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:51:54] "GET /admin/schema HTTP/1.1" 200 -
2025-04-05 22:51:54,765 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:51:54] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:51:54,856 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:51:54] "[36mGET /static/css/admin-schema.css HTTP/1.1[0m" 304 -
2025-04-05 22:51:54,862 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:51:54] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:51:54,870 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:51:54] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:51:54,870 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:51:54] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:51:54,873 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:51:54] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:51:55,086 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:51:55] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:51:55,157 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:51:55] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:51:55,172 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:51:55] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:51:55,173 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:51:55] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:51:55,175 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:51:55] "[36mGET /static/js/admin/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:51:55,515 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:51:55] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:51:55,521 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:51:55] "GET /admin/api/schema/workspaces HTTP/1.1" 200 -
2025-04-05 22:51:55,526 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:51:55] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-05 22:51:55,529 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:51:55] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-05 22:51:56,825 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:51:56] "GET /admin/audit-logs HTTP/1.1" 200 -
2025-04-05 22:51:57,149 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:51:57] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:51:57,155 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:51:57] "[36mGET /static/js/admin/audit-logs.js HTTP/1.1[0m" 304 -
2025-04-05 22:52:00,012 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:00] "GET / HTTP/1.1" 200 -
2025-04-05 22:52:00,354 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:00] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:52:00,377 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:00] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:52:00,386 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:00] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:52:00,389 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:00] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:52:00,395 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:00] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:52:00,400 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:00] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:52:00,685 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:00] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:52:00,693 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:00] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:52:00,700 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:00] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:52:01,026 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:01] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:52:01,328 [INFO] text2sql [app.py:250]: Schema requested for workspace: dfd
2025-04-05 22:52:01 - INFO - [app.py:250] - Schema requested for workspace: dfd
2025-04-05 22:52:01,329 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:01] "GET /api/schema?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:52:03,504 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:03] "GET /samples HTTP/1.1" 200 -
2025-04-05 22:52:03,774 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:03] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:52:03,828 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:03] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:52:03,841 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:03] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:52:03,845 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:03] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:52:03,846 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:03] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:52:03,847 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:03] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:52:04,094 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:04] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:52:04,130 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:04] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:52:04,145 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:04] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:52:04,149 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:04] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 22:52:04,479 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:04] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:52:04,483 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:04] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 22:52:04,485 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:04] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 22:52:04,499 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 22:52:04 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 22:52:04,501 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 22:52:04 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 22:52:04,504 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 22:52:04 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 22:52:04,508 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 0 samples (page 1, limit 10)
2025-04-05 22:52:04 - INFO - [feedback_manager.py:531] - Retrieved 0 samples (page 1, limit 10)
2025-04-05 22:52:04,510 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:04] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 22:52:05,590 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:05] "GET / HTTP/1.1" 200 -
2025-04-05 22:52:05,962 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:05] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:52:05,965 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:05] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:52:05,970 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:05] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:52:05,974 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:05] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:52:05,976 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:05] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:52:05,980 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:05] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:52:06,278 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:06] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:52:06,287 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:06] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:52:06,291 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:06] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:52:06,605 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:06] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:52:11,986 [INFO] text2sql [app.py:250]: Schema requested for workspace: dfd
2025-04-05 22:52:11 - INFO - [app.py:250] - Schema requested for workspace: dfd
2025-04-05 22:52:11,991 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:11] "GET /api/schema?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:52:13,753 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:13] "GET /samples HTTP/1.1" 200 -
2025-04-05 22:52:13,985 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:13] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:52:14,110 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:14] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:52:14,129 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:14] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:52:14,134 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:14] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:52:14,138 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:14] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:52:14,143 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:14] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:52:14,313 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:14] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:52:14,432 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:14] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:52:14,454 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:14] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:52:14,458 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:14] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 22:52:14,792 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:14] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:52:14,800 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:14] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 22:52:14,805 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:14] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 22:52:14,824 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 22:52:14 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 22:52:14,827 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 22:52:14 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 22:52:14,830 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 22:52:14 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 22:52:14,834 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 0 samples (page 1, limit 10)
2025-04-05 22:52:14 - INFO - [feedback_manager.py:531] - Retrieved 0 samples (page 1, limit 10)
2025-04-05 22:52:14,837 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:14] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 22:52:18,056 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:18] "GET /admin/schema HTTP/1.1" 200 -
2025-04-05 22:52:18,394 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:18] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:52:18,426 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:18] "[36mGET /static/css/admin-schema.css HTTP/1.1[0m" 304 -
2025-04-05 22:52:18,434 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:18] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:52:18,437 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:18] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:52:18,442 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:18] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:52:18,445 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:18] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:52:18,723 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:18] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:52:18,745 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:18] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:52:18,749 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:18] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:52:18,752 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:18] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:52:18,759 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:18] "[36mGET /static/js/admin/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:52:18,894 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:18] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:52:19,082 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:19] "GET /admin/api/schema/workspaces HTTP/1.1" 200 -
2025-04-05 22:52:19,084 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:19] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-05 22:52:19,086 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:19] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-05 22:52:19,715 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:19] "GET /samples HTTP/1.1" 200 -
2025-04-05 22:52:20,077 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:20] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:52:20,080 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:20] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:52:20,081 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:20] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:52:20,083 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:20] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:52:20,090 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:20] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:52:20,091 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:20] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:52:20,397 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:20] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:52:20,398 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:20] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:52:20,400 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:20] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:52:20,405 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:20] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 22:52:20,720 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:20] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:52:20,721 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:20] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 22:52:20,722 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:20] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 22:52:20,730 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 22:52:20 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 22:52:20,731 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 22:52:20 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 22:52:20,732 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 22:52:20 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 22:52:20,734 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 0 samples (page 1, limit 10)
2025-04-05 22:52:20 - INFO - [feedback_manager.py:531] - Retrieved 0 samples (page 1, limit 10)
2025-04-05 22:52:20,736 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:52:20] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 22:53:05,650 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:53:05] "GET / HTTP/1.1" 200 -
2025-04-05 22:53:05,988 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:53:05] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:53:06,007 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:53:06] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:53:06,009 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:53:06] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:53:06,011 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:53:06] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:53:06,020 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:53:06] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:53:06,021 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:53:06] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:53:06,304 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:53:06] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:53:06,314 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:53:06] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:53:06,319 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:53:06] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:53:06,501 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:53:06] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:53:10,049 [INFO] text2sql [app.py:250]: Schema requested for workspace: dfd
2025-04-05 22:53:10 - INFO - [app.py:250] - Schema requested for workspace: dfd
2025-04-05 22:53:10,051 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:53:10] "GET /api/schema?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:53:11,911 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:53:11] "GET /samples HTTP/1.1" 200 -
2025-04-05 22:53:12,144 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:53:12] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:53:12,247 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:53:12] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:53:12,259 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:53:12] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:53:12,263 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:53:12] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:53:12,264 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:53:12] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:53:12,269 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:53:12] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:53:12,453 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:53:12] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:53:12,566 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:53:12] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:53:12,573 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:53:12] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:53:12,578 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:53:12] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 22:53:12,887 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:53:12] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:53:12,889 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:53:12] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 22:53:12,892 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:53:12] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 22:53:12,898 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 22:53:12 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 22:53:12,900 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 22:53:12 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 22:53:12,902 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 22:53:12 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 22:53:12,905 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 0 samples (page 1, limit 10)
2025-04-05 22:53:12 - INFO - [feedback_manager.py:531] - Retrieved 0 samples (page 1, limit 10)
2025-04-05 22:53:12,906 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:53:12] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 22:53:13,631 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:53:13] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 22:53:13,969 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:53:13] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:53:13,980 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:53:13] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:53:14,228 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:53:14] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 22:53:14,352 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:53:14] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 22:53:20,163 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:53:20] "GET / HTTP/1.1" 200 -
2025-04-05 22:53:20,503 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:53:20] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:53:20,522 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:53:20] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:53:20,529 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:53:20] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:53:20,530 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:53:20] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:53:20,534 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:53:20] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:53:20,538 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:53:20] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:53:20,808 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:53:20] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:53:20,831 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:53:20] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:53:20,835 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:53:20] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:53:21,012 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:53:21] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:53:38,282 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:53:38] "GET / HTTP/1.1" 200 -
2025-04-05 22:53:38,629 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:53:38] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-05 22:53:38,636 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:53:38] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:53:38,639 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:53:38] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:53:38,642 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:53:38] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:53:38,649 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:53:38] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:53:38,653 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:53:38] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:53:38,967 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:53:38] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:53:38,979 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:53:38] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:53:38,988 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:53:38] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:53:39,324 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:53:39] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:54:18,777 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:54:18] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 22:54:19,122 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:54:19] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:54:19,132 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:54:19] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:54:19,375 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:54:19] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 22:54:19,483 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:54:19] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 22:54:21,024 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:54:21] "GET /admin/users HTTP/1.1" 200 -
2025-04-05 22:54:21,965 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:54:21] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:54:21,966 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:54:21] "[36mGET /static/js/admin/users.js HTTP/1.1[0m" 304 -
2025-04-05 22:54:23,537 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:54:23] "GET /admin/roles HTTP/1.1" 200 -
2025-04-05 22:54:23,868 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:54:23] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:54:23,879 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:54:23] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-05 22:54:36,165 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:54:36] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:55:01,791 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:01] "GET /admin/roles HTTP/1.1" 200 -
2025-04-05 22:55:02,048 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:02] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:55:02,129 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:02] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-05 22:55:05,782 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:05] "GET /admin/roles HTTP/1.1" 200 -
2025-04-05 22:55:06,119 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:06] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:55:06,125 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:06] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-05 22:55:10,127 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:10] "GET / HTTP/1.1" 200 -
2025-04-05 22:55:10,479 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:10] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:55:10,510 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:10] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:55:10,517 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:10] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:55:10,518 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:10] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:55:10,520 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:10] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:55:10,528 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:10] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:55:10,800 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:10] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:55:10,823 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:10] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:55:10,827 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:10] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:55:10,978 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:10] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:55:33,013 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:33] "GET / HTTP/1.1" 200 -
2025-04-05 22:55:33,359 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:33] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:55:33,361 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:33] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:55:33,362 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:33] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:55:33,363 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:33] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-05 22:55:33,364 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:33] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:55:33,367 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:33] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:55:33,669 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:33] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:55:33,671 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:33] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:55:33,672 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:33] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:55:34,001 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:34] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:55:35,074 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:35] "GET / HTTP/1.1" 200 -
2025-04-05 22:55:35,412 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:35] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:55:35,417 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:35] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:55:35,425 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:35] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:55:35,431 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:35] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:55:35,432 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:35] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:55:35,436 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:35] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:55:35,745 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:35] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:55:35,752 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:35] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:55:35,756 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:35] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:55:36,079 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:36] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:55:37,290 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:37] "GET / HTTP/1.1" 200 -
2025-04-05 22:55:37,638 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:37] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:55:37,641 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:37] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:55:37,647 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:37] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:55:37,649 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:37] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:55:37,655 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:37] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:55:37,658 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:37] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:55:37,956 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:37] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:55:37,959 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:37] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:55:37,967 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:37] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:55:38,295 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:38] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:55:43,147 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:43] "GET / HTTP/1.1" 200 -
2025-04-05 22:55:43,496 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:43] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-05 22:55:43,500 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:43] "GET /static/js/results-display.js HTTP/1.1" 200 -
2025-04-05 22:55:43,506 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:43] "GET /static/js/core.js HTTP/1.1" 200 -
2025-04-05 22:55:43,506 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:43] "GET /static/js/ui-utils.js HTTP/1.1" 200 -
2025-04-05 22:55:43,506 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:43] "GET /static/js/table-mentions.js HTTP/1.1" 200 -
2025-04-05 22:55:43,506 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:43] "GET /static/js/schema-manager.js HTTP/1.1" 200 -
2025-04-05 22:55:43,817 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:43] "GET /static/js/dashboard.js HTTP/1.1" 200 -
2025-04-05 22:55:43,826 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:43] "GET /static/js/query-handler.js HTTP/1.1" 200 -
2025-04-05 22:55:43,827 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:43] "GET /static/js/feedback.js HTTP/1.1" 200 -
2025-04-05 22:55:44,168 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:44] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:55:44,188 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:55:44] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-04-05 22:56:10,358 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:56:10] "GET / HTTP/1.1" 200 -
2025-04-05 22:56:10,715 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:56:10] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:56:10,716 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:56:10] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:56:10,719 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:56:10] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:56:10,723 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:56:10] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:56:10,731 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:56:10] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:56:10,733 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:56:10] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:56:11,041 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:56:11] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:56:11,044 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:56:11] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:56:11,046 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:56:11] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:56:11,381 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:56:11] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:56:29,283 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:56:29] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 22:56:29,625 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:56:29] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:56:29,634 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:56:29] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:56:29,894 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:56:29] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 22:56:29,978 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:56:29] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 22:56:31,094 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:56:31] "GET /admin/users HTTP/1.1" 200 -
2025-04-05 22:56:31,433 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:56:31] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:56:31,447 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:56:31] "[36mGET /static/js/admin/users.js HTTP/1.1[0m" 304 -
2025-04-05 22:57:12,758 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:12] "GET /admin/users HTTP/1.1" 200 -
2025-04-05 22:57:13,109 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:13] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-05 22:57:13,114 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:13] "[36mGET /static/js/admin/users.js HTTP/1.1[0m" 304 -
2025-04-05 22:57:15,861 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:15] "GET / HTTP/1.1" 200 -
2025-04-05 22:57:16,207 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:16] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:57:16,215 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:16] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:57:16,224 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:16] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:57:16,235 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:16] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:57:16,237 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:16] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:57:16,240 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:16] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:57:16,529 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:16] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:57:16,552 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:16] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:57:16,554 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:16] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:57:16,883 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:16] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:57:19,725 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:19] "GET /samples HTTP/1.1" 200 -
2025-04-05 22:57:20,097 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:20] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:57:20,102 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:20] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:57:20,103 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:20] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:57:20,106 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:20] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:57:20,110 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:20] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:57:20,116 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:20] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:57:20,425 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:20] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:57:20,432 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:20] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:57:20,440 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:20] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 22:57:20,443 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:20] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:57:20,784 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:20] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:57:20,791 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:20] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 22:57:20,798 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:20] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 22:57:20,805 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 22:57:20 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 22:57:20,814 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 22:57:20 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 22:57:20,817 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 22:57:20 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 22:57:20,823 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 0 samples (page 1, limit 10)
2025-04-05 22:57:20 - INFO - [feedback_manager.py:531] - Retrieved 0 samples (page 1, limit 10)
2025-04-05 22:57:20,826 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:20] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 22:57:23,567 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:23] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 22:57:23,912 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:23] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:57:23,923 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:23] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:57:24,154 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:24] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 22:57:24,293 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:24] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 22:57:25,373 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:25] "GET /samples HTTP/1.1" 200 -
2025-04-05 22:57:25,730 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:25] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:57:25,738 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:25] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:57:25,749 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:25] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:57:25,760 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:25] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:57:25,763 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:25] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:57:25,766 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:25] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:57:26,060 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:26] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:57:26,070 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:26] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:57:26,078 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:26] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 22:57:26,080 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:26] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:57:26,423 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:26] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 22:57:26,425 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:26] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:57:26,431 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:26] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 22:57:26,449 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 22:57:26 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 22:57:26,453 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 22:57:26 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 22:57:26,457 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 22:57:26 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 22:57:26,460 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 0 samples (page 1, limit 10)
2025-04-05 22:57:26 - INFO - [feedback_manager.py:531] - Retrieved 0 samples (page 1, limit 10)
2025-04-05 22:57:26,462 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:26] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 22:57:29,670 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:29] "GET /admin/users HTTP/1.1" 200 -
2025-04-05 22:57:30,004 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:30] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:57:30,018 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:30] "[36mGET /static/js/admin/users.js HTTP/1.1[0m" 304 -
2025-04-05 22:57:31,053 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:31] "GET /admin/roles HTTP/1.1" 200 -
2025-04-05 22:57:31,398 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:31] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:57:31,407 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:31] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-05 22:57:33,548 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:33] "GET /samples HTTP/1.1" 200 -
2025-04-05 22:57:33,889 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:33] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:57:33,906 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:33] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:57:33,911 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:33] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:57:33,912 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:33] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:57:33,914 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:33] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:57:33,920 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:33] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:57:34,195 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:34] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:57:34,221 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:34] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:57:34,225 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:34] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:57:34,230 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:34] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 22:57:34,377 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:34] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:57:34,551 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:34] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 22:57:34,552 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:34] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 22:57:34,558 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 22:57:34 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 22:57:34,559 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 22:57:34 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 22:57:34,561 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 22:57:34 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 22:57:34,563 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 0 samples (page 1, limit 10)
2025-04-05 22:57:34 - INFO - [feedback_manager.py:531] - Retrieved 0 samples (page 1, limit 10)
2025-04-05 22:57:34,564 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:57:34] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 22:58:59,647 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:58:59] "GET /samples HTTP/1.1" 200 -
2025-04-05 22:58:59,906 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:58:59] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:58:59,990 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:58:59] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:58:59,992 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:58:59] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:58:59,995 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:58:59] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:59:00,006 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:59:00] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:59:00,009 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:59:00] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:59:00,222 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:59:00] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:59:00,308 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:59:00] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:59:00,317 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:59:00] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:59:00,319 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:59:00] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 22:59:00,653 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:59:00] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:59:00,659 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:59:00] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 22:59:00,663 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:59:00] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 22:59:00,671 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 22:59:00 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 22:59:00,672 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 22:59:00 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 22:59:00,674 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 22:59:00 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 22:59:00,677 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 0 samples (page 1, limit 10)
2025-04-05 22:59:00 - INFO - [feedback_manager.py:531] - Retrieved 0 samples (page 1, limit 10)
2025-04-05 22:59:00,679 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:59:00] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 22:59:05,057 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:59:05] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:59:47,636 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:59:47] "GET /samples HTTP/1.1" 200 -
2025-04-05 22:59:47,866 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:59:47] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-05 22:59:47,977 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:59:47] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:59:47,979 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:59:47] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:59:47,983 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:59:47] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:59:47,984 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:59:47] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:59:47,987 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:59:47] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:59:48,193 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:59:48] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:59:48,299 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:59:48] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:59:48,300 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:59:48] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:59:48,302 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:59:48] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 22:59:48,620 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:59:48] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:59:48,621 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:59:48] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 22:59:48,624 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:59:48] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 22:59:48,631 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 22:59:48 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 22:59:48,632 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 22:59:48 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 22:59:48,633 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 22:59:48 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 22:59:48,636 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 0 samples (page 1, limit 10)
2025-04-05 22:59:48 - INFO - [feedback_manager.py:531] - Retrieved 0 samples (page 1, limit 10)
2025-04-05 22:59:48,637 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:59:48] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 22:59:58,713 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:59:58] "GET /samples HTTP/1.1" 200 -
2025-04-05 22:59:59,059 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:59:59] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 22:59:59,063 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:59:59] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 22:59:59,065 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:59:59] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 22:59:59,069 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:59:59] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 22:59:59,072 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:59:59] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 22:59:59,076 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:59:59] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 22:59:59,378 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:59:59] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 22:59:59,380 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:59:59] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 22:59:59,387 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:59:59] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 22:59:59,387 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:59:59] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 22:59:59,697 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:59:59] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 22:59:59,698 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:59:59] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 22:59:59,700 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:59:59] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 22:59:59,706 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 22:59:59 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 22:59:59,708 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 22:59:59 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 22:59:59,709 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 22:59:59 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 22:59:59,711 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 0 samples (page 1, limit 10)
2025-04-05 22:59:59 - INFO - [feedback_manager.py:531] - Retrieved 0 samples (page 1, limit 10)
2025-04-05 22:59:59,713 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 22:59:59] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 23:00:04,347 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:00:04] "GET / HTTP/1.1" 200 -
2025-04-05 23:00:04,686 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:00:04] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:00:04,706 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:00:04] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:00:04,711 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:00:04] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:00:04,710 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:00:04] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:00:04,708 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:00:04] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:00:04,712 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:00:04] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:00:05,004 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:00:05] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:00:05,025 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:00:05] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:00:05,029 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:00:05] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:00:05,178 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:00:05] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:00:26,400 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:00:26] "GET / HTTP/1.1" 200 -
2025-04-05 23:00:26,751 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:00:26] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:00:26,753 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:00:26] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:00:26,759 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:00:26] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:00:26,760 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:00:26] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:00:26,765 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:00:26] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:00:26,766 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:00:26] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:00:27,076 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:00:27] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:00:27,094 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:00:27] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:00:27,100 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:00:27] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:00:27,426 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:00:27] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:00:37,944 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:00:37] "GET /samples HTTP/1.1" 200 -
2025-04-05 23:00:38,289 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:00:38] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:00:38,303 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:00:38] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:00:38,305 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:00:38] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:00:38,306 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:00:38] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:00:38,311 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:00:38] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:00:38,312 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:00:38] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:00:38,614 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:00:38] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:00:38,622 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:00:38] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:00:38,634 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:00:38] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 23:00:38,635 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:00:38] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:00:38,970 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:00:38] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:00:38,972 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:00:38] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 23:00:38,974 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:00:38] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 23:00:38,987 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:00:38 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:00:38,989 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 23:00:38 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 23:00:38,991 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 23:00:38 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 23:00:38,995 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 0 samples (page 1, limit 10)
2025-04-05 23:00:38 - INFO - [feedback_manager.py:531] - Retrieved 0 samples (page 1, limit 10)
2025-04-05 23:00:38,996 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:00:38] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 23:00:45,575 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:00:45] "GET /samples HTTP/1.1" 200 -
2025-04-05 23:00:45,912 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:00:45] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:00:45,913 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:00:45] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:00:45,920 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:00:45] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:00:45,924 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:00:45] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:00:45,925 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:00:45] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:00:45,927 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:00:45] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:00:46,232 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:00:46] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:00:46,234 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:00:46] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:00:46,243 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:00:46] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 23:00:46,244 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:00:46] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:00:46,555 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:00:46] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:00:46,556 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:00:46] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 23:00:46,560 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:00:46] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 23:00:46,565 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:00:46 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:00:46,566 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 23:00:46 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 23:00:46,568 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 23:00:46 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 23:00:46,570 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 0 samples (page 1, limit 10)
2025-04-05 23:00:46 - INFO - [feedback_manager.py:531] - Retrieved 0 samples (page 1, limit 10)
2025-04-05 23:00:46,571 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:00:46] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 23:00:59,335 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:00:59] "GET /admin/audit-logs HTTP/1.1" 200 -
2025-04-05 23:00:59,683 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:00:59] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:00:59,693 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:00:59] "[36mGET /static/js/admin/audit-logs.js HTTP/1.1[0m" 304 -
2025-04-05 23:01:03,041 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:01:03] "GET /admin/audit-logs HTTP/1.1" 200 -
2025-04-05 23:01:03,386 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:01:03] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:01:03,394 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:01:03] "[36mGET /static/js/admin/audit-logs.js HTTP/1.1[0m" 304 -
2025-04-05 23:01:04,790 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:01:04] "GET /admin/audit-logs HTTP/1.1" 200 -
2025-04-05 23:01:05,132 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:01:05] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:01:05,135 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:01:05] "[36mGET /static/js/admin/audit-logs.js HTTP/1.1[0m" 304 -
2025-04-05 23:01:06,125 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:01:06] "GET /admin/audit-logs HTTP/1.1" 200 -
2025-04-05 23:01:06,466 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:01:06] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:01:06,481 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:01:06] "[36mGET /static/js/admin/audit-logs.js HTTP/1.1[0m" 304 -
2025-04-05 23:01:06,846 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:01:06] "GET /admin/schema HTTP/1.1" 200 -
2025-04-05 23:01:07,177 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:01:07] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:01:07,196 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:01:07] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:01:07,197 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:01:07] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:01:07,198 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:01:07] "[36mGET /static/css/admin-schema.css HTTP/1.1[0m" 304 -
2025-04-05 23:01:07,198 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:01:07] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:01:07,202 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:01:07] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:01:07,502 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:01:07] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:01:07,510 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:01:07] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:01:07,527 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:01:07] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:01:07,530 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:01:07] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:01:07,539 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:01:07] "[36mGET /static/js/admin/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:01:07,673 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:01:07] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:01:07,860 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:01:07] "GET /admin/api/schema/workspaces HTTP/1.1" 200 -
2025-04-05 23:01:07,863 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:01:07] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-05 23:01:07,871 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:01:07] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-05 23:01:08,264 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:01:08] "GET /admin/roles HTTP/1.1" 200 -
2025-04-05 23:01:08,603 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:01:08] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:01:08,613 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:01:08] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-05 23:01:17,283 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:01:17] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:01:47,812 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:01:47] "GET /admin/users HTTP/1.1" 200 -
2025-04-05 23:01:48,046 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:01:48] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:01:48,148 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:01:48] "[36mGET /static/js/admin/users.js HTTP/1.1[0m" 304 -
2025-04-05 23:01:53,223 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:01:53] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:02:21,320 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:21] "GET /admin/users HTTP/1.1" 200 -
2025-04-05 23:02:21,548 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:21] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:02:21,652 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:21] "[36mGET /static/js/admin/users.js HTTP/1.1[0m" 304 -
2025-04-05 23:02:23,677 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:23] "GET /samples HTTP/1.1" 200 -
2025-04-05 23:02:24,042 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:24] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:02:24,055 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:24] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:02:24,059 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:24] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:02:24,064 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:24] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:02:24,068 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:24] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:02:24,069 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:24] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:02:24,355 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:24] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:02:24,362 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:24] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:02:24,372 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:24] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:02:24,373 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:24] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 23:02:24,547 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:24] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:02:24,690 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:24] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 23:02:24,692 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:24] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 23:02:24,699 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:02:24 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:02:24,700 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 23:02:24 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 23:02:24,702 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 23:02:24 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 23:02:24,705 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 0 samples (page 1, limit 10)
2025-04-05 23:02:24 - INFO - [feedback_manager.py:531] - Retrieved 0 samples (page 1, limit 10)
2025-04-05 23:02:24,707 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:24] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 23:02:31,511 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:31] "GET /admin/users HTTP/1.1" 200 -
2025-04-05 23:02:31,853 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:31] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:02:31,861 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:31] "[36mGET /static/js/admin/users.js HTTP/1.1[0m" 304 -
2025-04-05 23:02:32,658 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:32] "GET /samples HTTP/1.1" 200 -
2025-04-05 23:02:33,005 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:33] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:02:33,020 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:33] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:02:33,024 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:33] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:02:33,026 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:33] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:02:33,033 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:33] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:02:33,035 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:33] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:02:33,331 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:33] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:02:33,341 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:33] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:02:33,351 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:33] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:02:33,356 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:33] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 23:02:33,679 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:33] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 23:02:33,680 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:33] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:02:33,683 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:33] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 23:02:33,691 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:02:33 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:02:33,692 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 23:02:33 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 23:02:33,693 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 23:02:33 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 23:02:33,695 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 0 samples (page 1, limit 10)
2025-04-05 23:02:33 - INFO - [feedback_manager.py:531] - Retrieved 0 samples (page 1, limit 10)
2025-04-05 23:02:33,696 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:33] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 23:02:36,599 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:36] "GET /samples HTTP/1.1" 200 -
2025-04-05 23:02:36,954 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:36] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:02:36,957 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:36] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:02:36,959 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:36] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:02:36,966 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:36] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:02:36,970 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:36] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:02:36,972 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:36] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:02:37,299 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:37] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:02:37,301 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:37] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:02:37,308 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:37] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:02:37,314 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:37] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 23:02:37,648 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:37] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:02:37,663 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:37] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 23:02:37,665 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:37] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 23:02:37,671 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:02:37 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:02:37,675 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 23:02:37 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 23:02:37,679 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 23:02:37 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 23:02:37,683 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 0 samples (page 1, limit 10)
2025-04-05 23:02:37 - INFO - [feedback_manager.py:531] - Retrieved 0 samples (page 1, limit 10)
2025-04-05 23:02:37,685 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:37] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 23:02:50,122 [INFO] text2sql [app.py:250]: Schema requested for workspace: dfd
2025-04-05 23:02:50 - INFO - [app.py:250] - Schema requested for workspace: dfd
2025-04-05 23:02:50,125 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:50] "GET /api/schema?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:02:52,652 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:52] "GET /samples HTTP/1.1" 200 -
2025-04-05 23:02:52,905 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:52] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:02:52,984 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:52] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:02:52,985 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:52] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:02:52,988 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:52] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:02:52,991 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:52] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:02:52,994 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:52] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:02:53,199 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:53] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:02:53,299 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:53] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:02:53,308 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:53] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:02:53,315 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:53] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 23:02:53,519 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:53] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:02:53,649 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:53] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:02:53,686 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:53] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 23:02:53,994 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:53] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 23:02:55,896 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:55] "GET /samples HTTP/1.1" 200 -
2025-04-05 23:02:56,127 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:56] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:02:56,248 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:56] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:02:56,250 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:56] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:02:56,253 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:56] "GET /static/js/samples.js HTTP/1.1" 200 -
2025-04-05 23:02:56,258 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:56] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:02:56,262 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:56] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:02:56,442 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:56] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:02:56,562 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:56] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:02:56,573 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:56] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:02:56,589 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:56] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:02:56,932 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:56] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:02:56,936 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:56] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 23:02:56,940 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:56] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 23:02:56,972 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:02:56 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:02:56,975 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 23:02:56 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 23:02:56,979 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 23:02:56 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 23:02:56,983 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 0 samples (page 1, limit 10)
2025-04-05 23:02:56 - INFO - [feedback_manager.py:531] - Retrieved 0 samples (page 1, limit 10)
2025-04-05 23:02:56,986 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:02:56] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 23:03:00,451 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:00] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:03:03,450 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:03] "GET /samples HTTP/1.1" 200 -
2025-04-05 23:03:03,700 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:03] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:03:03,786 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:03] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:03,796 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:03] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:03,799 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:03] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:03,803 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:03] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:03,808 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:03] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:04,015 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:04] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:04,090 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:04] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:04,105 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:04] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:04,117 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:04] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:04,437 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:04] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 23:03:04,438 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:04] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 23:03:04,439 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:04] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:03:04,450 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:03:04 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:03:04,451 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 23:03:04 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 23:03:04,454 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 23:03:04 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 23:03:04,456 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 0 samples (page 1, limit 10)
2025-04-05 23:03:04 - INFO - [feedback_manager.py:531] - Retrieved 0 samples (page 1, limit 10)
2025-04-05 23:03:04,457 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:04] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 23:03:16,928 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:16] "GET /samples HTTP/1.1" 200 -
2025-04-05 23:03:17,275 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:17] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:03:17,277 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:17] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:17,278 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:17] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:17,278 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:17] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:17,284 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:17] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:17,287 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:17] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:17,576 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:17] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:17,581 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:17] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:17,582 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:17] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:17,588 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:17] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:17,904 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:17] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:03:17,908 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:17] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 23:03:17,910 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:17] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 23:03:17,921 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:03:17 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:03:17,922 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 23:03:17 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 23:03:17,922 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 23:03:17 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 23:03:17,926 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 0 samples (page 1, limit 10)
2025-04-05 23:03:17 - INFO - [feedback_manager.py:531] - Retrieved 0 samples (page 1, limit 10)
2025-04-05 23:03:17,927 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:17] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 23:03:18,309 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:18] "GET /samples HTTP/1.1" 200 -
2025-04-05 23:03:18,648 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:18] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:03:18,649 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:18] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:18,651 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:18] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:18,651 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:18] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:18,654 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:18] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:18,660 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:18] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:18,959 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:18] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:18,973 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:18] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:18,974 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:18] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:18,976 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:18] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:19,311 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:19] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:03:19,316 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:19] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 23:03:19,323 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:19] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 23:03:19,332 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:03:19 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:03:19,333 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 23:03:19 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 23:03:19,336 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 23:03:19 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 23:03:19,338 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 0 samples (page 1, limit 10)
2025-04-05 23:03:19 - INFO - [feedback_manager.py:531] - Retrieved 0 samples (page 1, limit 10)
2025-04-05 23:03:19,340 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:19] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 23:03:25,373 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:25] "GET /samples HTTP/1.1" 200 -
2025-04-05 23:03:25,737 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:25] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:25,740 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:25] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:25,743 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:25] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:03:25,747 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:25] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:25,752 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:25] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:25,755 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:25] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:26,056 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:26] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:26,063 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:26] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:26,067 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:26] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:26,068 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:26] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:26,378 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:26] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:03:26,380 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:26] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 23:03:26,382 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:26] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 23:03:26,388 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:03:26 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:03:26,389 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 23:03:26 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 23:03:26,390 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 23:03:26 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 23:03:26,392 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 0 samples (page 1, limit 10)
2025-04-05 23:03:26 - INFO - [feedback_manager.py:531] - Retrieved 0 samples (page 1, limit 10)
2025-04-05 23:03:26,393 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:26] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 23:03:27,888 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:27] "GET /samples HTTP/1.1" 200 -
2025-04-05 23:03:28,228 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:28] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:03:28,231 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:28] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:28,237 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:28] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:28,239 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:28] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:28,244 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:28] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:28,248 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:28] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:28,542 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:28] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:28,555 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:28] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:28,558 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:28] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:28,563 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:28] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:28,887 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:28] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:03:28,889 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:28] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 23:03:28,890 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:28] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 23:03:28,895 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:03:28 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:03:28,897 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 23:03:28 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 23:03:28,898 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 23:03:28 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 23:03:28,902 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 0 samples (page 1, limit 10)
2025-04-05 23:03:28 - INFO - [feedback_manager.py:531] - Retrieved 0 samples (page 1, limit 10)
2025-04-05 23:03:28,904 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:28] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 23:03:30,595 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:30] "GET /samples HTTP/1.1" 200 -
2025-04-05 23:03:30,944 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:30] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:30,946 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:30] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:30,946 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:30] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:03:30,951 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:30] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:30,952 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:30] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:30,953 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:30] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:31,271 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:31] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:31,282 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:31] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:31,284 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:31] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:31,286 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:31] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:31,622 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:31] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:03:31,627 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:31] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 23:03:31,630 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:31] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 23:03:31,640 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:03:31 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:03:31,642 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 23:03:31 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 23:03:31,645 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 23:03:31 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 23:03:31,647 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 0 samples (page 1, limit 10)
2025-04-05 23:03:31 - INFO - [feedback_manager.py:531] - Retrieved 0 samples (page 1, limit 10)
2025-04-05 23:03:31,649 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:31] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 23:03:31,865 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:31] "GET /samples HTTP/1.1" 200 -
2025-04-05 23:03:32,137 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:32] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:03:32,211 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:32] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:32,215 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:32] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:32,223 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:32] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:32,224 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:32] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:32,226 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:32] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:32,454 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:32] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:32,520 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:32] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:32,527 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:32] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:32,528 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:32] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:32,841 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:32] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:03:32,844 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:32] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 23:03:32,847 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:32] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 23:03:32,864 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:03:32 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:03:32,867 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 23:03:32 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 23:03:32,870 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 23:03:32 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 23:03:32,874 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 0 samples (page 1, limit 10)
2025-04-05 23:03:32 - INFO - [feedback_manager.py:531] - Retrieved 0 samples (page 1, limit 10)
2025-04-05 23:03:32,876 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:32] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 23:03:33,095 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:33] "GET /samples HTTP/1.1" 200 -
2025-04-05 23:03:33,147 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:33] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:03:33,455 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:33] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:33,462 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:33] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:33,463 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:33] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:33,465 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:33] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:33,466 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:33] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:33,469 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:33] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:33,804 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:33] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:33,811 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:33] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:33,835 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:33] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 23:03:33,874 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:33] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:03:34,187 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:34] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:34,435 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:34] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 23:03:34,526 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:34] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 23:03:35,615 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:35] "GET /admin/users HTTP/1.1" 200 -
2025-04-05 23:03:35,942 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:35] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:03:35,965 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:35] "[36mGET /static/js/admin/users.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:38,050 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:38] "GET /admin/roles HTTP/1.1" 200 -
2025-04-05 23:03:38,399 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:38] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:03:38,404 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:38] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:40,347 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:40] "GET /admin/schema HTTP/1.1" 200 -
2025-04-05 23:03:40,685 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:40] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:03:40,697 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:40] "[36mGET /static/css/admin-schema.css HTTP/1.1[0m" 304 -
2025-04-05 23:03:40,699 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:40] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:40,700 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:40] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:40,705 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:40] "GET /static/js/dashboard.js HTTP/1.1" 200 -
2025-04-05 23:03:40,707 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:40] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:41,010 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:41] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:41,015 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:41] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:41,023 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:41] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:41,027 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:41] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:41,030 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:41] "[36mGET /static/js/admin/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:41,210 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:41] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:03:41,381 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:41] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-05 23:03:41,388 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:41] "GET /admin/api/schema/workspaces HTTP/1.1" 200 -
2025-04-05 23:03:41,391 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:41] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-05 23:03:42,829 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:42] "GET /admin/audit-logs HTTP/1.1" 200 -
2025-04-05 23:03:43,167 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:43] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:03:43,175 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:43] "[36mGET /static/js/admin/audit-logs.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:45,414 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:45] "GET /samples HTTP/1.1" 200 -
2025-04-05 23:03:45,758 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:45] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:03:45,775 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:45] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:45,776 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:45] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:45,779 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:45] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:45,784 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:45] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:45,788 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:45] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:46,087 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:46] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:46,096 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:46] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:46,105 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:46] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:46,114 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:46] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 23:03:46,267 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:46] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:03:46,453 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:46] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 23:03:46,459 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:46] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 23:03:46,467 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:03:46 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:03:46,469 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 23:03:46 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 23:03:46,471 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 23:03:46 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 23:03:46,475 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 0 samples (page 1, limit 10)
2025-04-05 23:03:46 - INFO - [feedback_manager.py:531] - Retrieved 0 samples (page 1, limit 10)
2025-04-05 23:03:46,477 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:03:46] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 23:04:30,713 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:04:30] "GET /samples HTTP/1.1" 200 -
2025-04-05 23:04:31,055 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:04:31] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:04:31,056 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:04:31] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:04:31,059 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:04:31] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:04:31,060 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:04:31] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:04:31,066 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:04:31] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:04:31,068 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:04:31] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:04:31,373 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:04:31] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:04:31,375 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:04:31] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:04:31,380 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:04:31] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:04:31,386 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:04:31] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 23:04:31,693 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:04:31] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:04:31,695 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:04:31] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 23:04:31,696 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:04:31] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 23:04:31,701 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:04:31 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:04:31,702 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 23:04:31 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 23:04:31,704 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 23:04:31 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 23:04:31,706 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 0 samples (page 1, limit 10)
2025-04-05 23:04:31 - INFO - [feedback_manager.py:531] - Retrieved 0 samples (page 1, limit 10)
2025-04-05 23:04:31,707 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:04:31] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 23:04:55,537 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:04:55] "GET /samples HTTP/1.1" 200 -
2025-04-05 23:04:55,858 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:04:55] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:04:55,868 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:04:55] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:04:55,868 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:04:55] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:04:55,870 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:04:55] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:04:55,871 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:04:55] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:04:55,873 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:04:55] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:04:56,166 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:04:56] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:04:56,178 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:04:56] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:04:56,180 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:04:56] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:04:56,184 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:04:56] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 23:04:56,360 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:04:56] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:04:56,490 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:04:56] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 23:04:56,494 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:04:56 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:04:56,491 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:04:56] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 23:04:56,499 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 23:04:56 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 23:04:56,504 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 23:04:56 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 23:04:56,507 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 0 samples (page 1, limit 10)
2025-04-05 23:04:56 - INFO - [feedback_manager.py:531] - Retrieved 0 samples (page 1, limit 10)
2025-04-05 23:04:56,509 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:04:56] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 23:04:57,940 [INFO] text2sql [app.py:250]: Schema requested for workspace: dfd
2025-04-05 23:04:57 - INFO - [app.py:250] - Schema requested for workspace: dfd
2025-04-05 23:04:57,942 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:04:57] "GET /api/schema?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:05:00,417 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:05:00] "GET /samples HTTP/1.1" 200 -
2025-04-05 23:05:00,672 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:05:00] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:05:00,753 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:05:00] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:05:00,756 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:05:00] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:05:00,761 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:05:00] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:05:00,770 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:05:00] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:05:00,772 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:05:00] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:05:00,974 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:05:00] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:05:01,068 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:05:01] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:05:01,074 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:05:01] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:05:01,081 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:05:01] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 23:05:01,414 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:05:01] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:05:01,420 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:05:01] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 23:05:01,426 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:05:01] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 23:05:01,430 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:05:01 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:05:01,434 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 23:05:01 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 23:05:01,435 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 23:05:01 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 23:05:01,438 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 0 samples (page 1, limit 10)
2025-04-05 23:05:01 - INFO - [feedback_manager.py:531] - Retrieved 0 samples (page 1, limit 10)
2025-04-05 23:05:01,439 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:05:01] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 23:05:02,243 [INFO] text2sql [app.py:250]: Schema requested for workspace: dfd
2025-04-05 23:05:02 - INFO - [app.py:250] - Schema requested for workspace: dfd
2025-04-05 23:05:02,246 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:05:02] "GET /api/schema?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:05:05,880 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:05:05] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:06:14,043 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:06:14] "GET /samples HTTP/1.1" 200 -
2025-04-05 23:06:14,271 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:06:14] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:06:14,388 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:06:14] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:06:14,397 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:06:14] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:06:14,399 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:06:14] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:06:14,404 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:06:14] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:06:14,407 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:06:14] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:06:14,575 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:06:14] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:06:14,706 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:06:14] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:06:14,723 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:06:14] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:06:14,732 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:06:14] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 23:06:15,073 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:06:15] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:06:15,075 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:06:15] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 23:06:15,077 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:06:15] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 23:06:15,081 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:06:15 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:06:15,083 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 23:06:15 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 23:06:15,085 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 23:06:15 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 23:06:15,087 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 0 samples (page 1, limit 10)
2025-04-05 23:06:15 - INFO - [feedback_manager.py:531] - Retrieved 0 samples (page 1, limit 10)
2025-04-05 23:06:15,088 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:06:15] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 23:06:16,631 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:06:16] "GET /samples HTTP/1.1" 200 -
2025-04-05 23:06:16,979 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:06:16] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:06:16,980 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:06:16] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:06:16,982 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:06:16] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:06:16,983 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:06:16] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:06:16,988 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:06:16] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:06:16,993 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:06:16] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:06:17,305 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:06:17] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:06:17,307 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:06:17] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:06:17,313 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:06:17] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:06:17,319 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:06:17] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 23:06:17,636 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:06:17] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:06:17,638 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:06:17] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 23:06:17,642 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:06:17] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 23:06:17,649 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:06:17 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:06:17,651 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 23:06:17 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 23:06:17,653 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 23:06:17 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 23:06:17,657 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 0 samples (page 1, limit 10)
2025-04-05 23:06:17 - INFO - [feedback_manager.py:531] - Retrieved 0 samples (page 1, limit 10)
2025-04-05 23:06:17,658 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:06:17] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 23:06:21,263 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:06:21] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:07:02,347 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:02] "GET /samples HTTP/1.1" 200 -
2025-04-05 23:07:02,573 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:02] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:07:02,682 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:02] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:07:02,695 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:02] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:07:02,696 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:02] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:07:02,702 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:02] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:07:02,705 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:02] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:07:02,889 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:02] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:07:02,984 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:02] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:07:03,006 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:03] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:07:03,007 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:03] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 23:07:03,331 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:03] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:07:03,333 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:03] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 23:07:03,334 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:03] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 23:07:03,341 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:07:03 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:07:03,343 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 23:07:03 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 23:07:03,345 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 23:07:03 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 23:07:03,349 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 0 samples (page 1, limit 10)
2025-04-05 23:07:03 - INFO - [feedback_manager.py:531] - Retrieved 0 samples (page 1, limit 10)
2025-04-05 23:07:03,351 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:03] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 23:07:35,802 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:35] "GET /samples HTTP/1.1" 200 -
2025-04-05 23:07:36,160 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:36] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-05 23:07:36,163 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:36] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:07:36,164 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:36] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:07:36,169 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:36] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:07:36,180 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:36] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:07:36,185 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:36] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:07:36,490 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:36] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:07:36,502 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:36] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:07:36,513 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:36] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:07:36,515 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:36] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 23:07:36,843 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:36] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 23:07:36,844 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:36] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 23:07:36,844 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:36] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:07:36,850 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:07:36 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:07:36,852 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 23:07:36 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 23:07:36,854 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 23:07:36 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 23:07:36,857 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 0 samples (page 1, limit 10)
2025-04-05 23:07:36 - INFO - [feedback_manager.py:531] - Retrieved 0 samples (page 1, limit 10)
2025-04-05 23:07:36,858 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:36] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 23:07:43,095 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:43] "GET / HTTP/1.1" 200 -
2025-04-05 23:07:43,446 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:43] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:07:43,449 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:43] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:07:43,453 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:43] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:07:43,457 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:43] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:07:43,460 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:43] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:07:43,462 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:43] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:07:43,773 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:43] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:07:43,787 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:43] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:07:43,789 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:43] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:07:44,137 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:44] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:07:51,105 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:51] "GET / HTTP/1.1" 200 -
2025-04-05 23:07:51,453 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:51] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:07:51,454 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:51] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:07:51,455 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:51] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-05 23:07:51,461 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:51] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:07:51,464 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:51] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:07:51,464 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:51] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:07:51,773 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:51] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:07:51,777 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:51] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:07:51,784 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:51] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:07:52,114 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:52] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:07:53,814 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:53] "GET / HTTP/1.1" 200 -
2025-04-05 23:07:54,169 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:54] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:07:54,171 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:54] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:07:54,179 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:54] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:07:54,181 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:54] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:07:54,183 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:54] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:07:54,186 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:54] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:07:54,481 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:54] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:07:54,489 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:54] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:07:54,491 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:54] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:07:54,803 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:07:54] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:08:04,050 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:04] "GET / HTTP/1.1" 200 -
2025-04-05 23:08:04,417 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:04] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:08:04,417 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:04] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:08:04,421 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:04] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:08:04,427 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:04] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:08:04,432 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:04] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:08:04,435 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:04] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:08:04,756 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:04] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:08:04,762 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:04] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:08:04,766 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:04] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:08:05,085 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:05] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:08:20,257 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:20] "GET / HTTP/1.1" 200 -
2025-04-05 23:08:20,604 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:20] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:08:20,605 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:20] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:08:20,606 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:20] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:08:20,612 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:20] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:08:20,615 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:20] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:08:20,620 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:20] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:08:20,928 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:20] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:08:20,933 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:20] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:08:20,937 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:20] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:08:21,262 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:21] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:08:26,761 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:26] "GET / HTTP/1.1" 200 -
2025-04-05 23:08:27,131 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:27] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:08:27,133 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:27] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:08:27,136 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:27] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:08:27,140 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:27] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:08:27,145 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:27] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:08:27,147 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:27] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:08:27,439 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:27] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:08:27,445 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:27] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:08:27,449 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:27] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:08:27,764 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:27] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:08:29,452 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:29] "GET / HTTP/1.1" 200 -
2025-04-05 23:08:29,809 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:29] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:08:29,813 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:29] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:08:29,818 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:29] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:08:29,821 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:29] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:08:29,826 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:29] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:08:29,828 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:29] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:08:30,127 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:30] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:08:30,139 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:30] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:08:30,142 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:30] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:08:30,468 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:30] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:08:39,569 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:39] "GET / HTTP/1.1" 200 -
2025-04-05 23:08:39,923 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:39] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:08:39,925 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:39] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:08:39,928 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:39] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:08:39,932 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:39] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:08:39,933 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:39] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:08:39,935 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:39] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:08:40,250 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:40] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:08:40,256 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:40] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:08:40,257 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:40] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:08:40,581 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:40] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:08:46,177 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:46] "GET / HTTP/1.1" 200 -
2025-04-05 23:08:46,530 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:46] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:08:46,535 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:46] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:08:46,540 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:46] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:08:46,543 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:46] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:08:46,547 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:46] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:08:46,548 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:46] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:08:46,843 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:46] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:08:46,860 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:46] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:08:46,867 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:46] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:08:47,192 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:47] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:08:58,380 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:58] "GET / HTTP/1.1" 200 -
2025-04-05 23:08:58,737 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:58] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:08:58,738 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:58] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:08:58,739 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:58] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:08:58,740 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:58] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:08:58,745 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:58] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:08:58,751 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:58] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:08:59,060 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:59] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:08:59,061 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:59] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:08:59,066 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:59] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:08:59,388 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:08:59] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:09:01,596 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:09:01] "GET / HTTP/1.1" 200 -
2025-04-05 23:09:01,943 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:09:01] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:09:01,945 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:09:01] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:09:01,948 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:09:01] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:09:01,949 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:09:01] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:09:01,954 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:09:01] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:09:01,955 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:09:01] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:09:02,265 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:09:02] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:09:02,270 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:09:02] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:09:02,274 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:09:02] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:09:02,604 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:09:02] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:09:09,504 [INFO] text2sql [app.py:250]: Schema requested for workspace: dfd
2025-04-05 23:09:09 - INFO - [app.py:250] - Schema requested for workspace: dfd
2025-04-05 23:09:09,506 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:09:09] "GET /api/schema?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:09:13,057 [INFO] text2sql [app.py:250]: Schema requested for workspace: dfd
2025-04-05 23:09:13 - INFO - [app.py:250] - Schema requested for workspace: dfd
2025-04-05 23:09:13,061 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:09:13] "GET /api/schema?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:09:15,602 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:09:15] "GET /samples HTTP/1.1" 200 -
2025-04-05 23:09:15,934 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:09:15] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:09:15,952 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:09:15] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:09:15,953 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:09:15] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:09:15,954 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:09:15] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:09:15,957 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:09:15] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:09:15,960 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:09:15] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:09:16,258 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:09:16] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:09:16,281 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:09:16] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:09:16,285 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:09:16] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:09:16,287 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:09:16] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 23:09:16,412 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:09:16] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:09:16,614 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:09:16] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 23:09:16,619 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:09:16] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 23:09:16,638 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:09:16 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:09:16,639 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 23:09:16 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 23:09:16,641 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 23:09:16 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 23:09:16,647 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 0 samples (page 1, limit 10)
2025-04-05 23:09:16 - INFO - [feedback_manager.py:531] - Retrieved 0 samples (page 1, limit 10)
2025-04-05 23:09:16,650 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:09:16] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 23:09:18,375 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:09:18] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 23:09:18,710 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:09:18] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:09:18,717 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:09:18] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:09:18,968 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:09:18] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 23:09:19,058 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:09:19] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 23:09:22,284 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:09:22] "GET /admin/users HTTP/1.1" 200 -
2025-04-05 23:09:22,613 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:09:22] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:09:22,631 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:09:22] "[36mGET /static/js/admin/users.js HTTP/1.1[0m" 304 -
2025-04-05 23:09:26,126 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:09:26] "GET /admin/roles HTTP/1.1" 200 -
2025-04-05 23:09:26,462 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:09:26] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:09:26,472 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:09:26] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-05 23:11:59,484 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 23:11:59,485 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 23:11:59,485 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 23:11:59,485 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 23:11:59,486 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 23:11:59,499 [INFO] text2sql [app.py:66]: Debug logging enabled for SQL generator and agents
2025-04-05 23:11:59 - INFO - [app.py:66] - Debug logging enabled for SQL generator and agents
2025-04-05 23:11:59,500 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 23:11:59 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 23:11:59,501 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 23:11:59 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 23:11:59,504 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 23:11:59 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 23:11:59,504 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 23:11:59,505 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 23:11:59,505 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 23:11:59,505 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 23:11:59,505 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 23:11:59 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 23:11:59,506 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 23:11:59 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 23:11:59,506 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 23:11:59 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 23:11:59,506 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 23:11:59,507 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 23:11:59,507 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 23:11:59,507 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 23:11:59,507 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 23:11:59 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 23:11:59,507 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 23:11:59 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 23:11:59,508 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 23:11:59 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 23:11:59,508 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 23:11:59,508 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 23:11:59,508 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 23:11:59,508 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 23:11:59,508 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 23:11:59 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 23:11:59,509 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 23:11:59 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 23:11:59,509 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 23:11:59 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 23:11:59,511 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 23:11:59 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 23:11:59,512 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 23:11:59 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 23:11:59,512 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:11:59 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:11:59,512 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 23:11:59,512 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 23:11:59,512 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 23:11:59,513 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 23:11:59,513 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:11:59 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:11:59,635 [INFO] werkzeug [_internal.py:97]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.27.251.157:5000
2025-04-05 23:11:59,635 [INFO] werkzeug [_internal.py:97]: [33mPress CTRL+C to quit[0m
2025-04-05 23:11:59,645 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 23:12:03,511 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 23:12:03,512 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 23:12:03,512 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 23:12:03,512 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 23:12:03,513 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 23:12:03,527 [INFO] text2sql [app.py:66]: Debug logging enabled for SQL generator and agents
2025-04-05 23:12:03 - INFO - [app.py:66] - Debug logging enabled for SQL generator and agents
2025-04-05 23:12:03,531 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 23:12:03 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 23:12:03,531 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 23:12:03 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 23:12:03,536 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 23:12:03 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 23:12:03,536 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 23:12:03,537 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 23:12:03,537 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 23:12:03,537 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 23:12:03,537 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 23:12:03 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 23:12:03,538 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 23:12:03 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 23:12:03,539 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 23:12:03 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 23:12:03,539 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 23:12:03,540 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 23:12:03,540 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 23:12:03,540 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 23:12:03,541 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 23:12:03 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 23:12:03,543 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 23:12:03 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 23:12:03,544 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 23:12:03 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 23:12:03,545 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 23:12:03,546 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 23:12:03,546 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 23:12:03,546 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 23:12:03,547 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 23:12:03 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 23:12:03,547 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 23:12:03 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 23:12:03,548 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 23:12:03 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 23:12:03,550 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 23:12:03 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 23:12:03,551 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 23:12:03 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 23:12:03,551 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:12:03 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:12:03,552 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 23:12:03,552 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 23:12:03,552 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 23:12:03,553 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 23:12:03,553 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:12:03 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:12:03,772 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 23:12:03,775 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 23:13:49,961 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:13:49] "GET /admin/audit-logs HTTP/1.1" 200 -
2025-04-05 23:13:50,168 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:13:50] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:13:50,304 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:13:50] "[36mGET /static/js/admin/audit-logs.js HTTP/1.1[0m" 304 -
2025-04-05 23:13:51,932 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:13:51] "GET /admin/audit-logs HTTP/1.1" 200 -
2025-04-05 23:13:52,282 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:13:52] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:13:52,289 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:13:52] "[36mGET /static/js/admin/audit-logs.js HTTP/1.1[0m" 304 -
2025-04-05 23:13:54,447 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:13:54] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:13:58,030 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:13:58] "GET /admin/audit-logs HTTP/1.1" 200 -
2025-04-05 23:13:58,233 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:13:58] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:13:58,453 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:13:58] "[36mGET /static/js/admin/audit-logs.js HTTP/1.1[0m" 304 -
2025-04-05 23:15:08,827 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:15:08] "GET /admin/audit-logs HTTP/1.1" 200 -
2025-04-05 23:15:09,063 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:15:09] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:15:09,176 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:15:09] "[36mGET /static/js/admin/audit-logs.js HTTP/1.1[0m" 304 -
2025-04-05 23:15:12,581 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:15:12] "GET /samples HTTP/1.1" 200 -
2025-04-05 23:15:12,929 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:15:12] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:15:12,945 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:15:12] "GET /static/js/ui-utils.js HTTP/1.1" 200 -
2025-04-05 23:15:12,955 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:15:12] "GET /static/js/core.js HTTP/1.1" 200 -
2025-04-05 23:15:12,965 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:15:12] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:15:12,968 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:15:12] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:15:12,970 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:15:12] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:15:13,263 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:15:13] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:15:13,280 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:15:13] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:15:13,292 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:15:13] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 23:15:13,293 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:15:13] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:15:13,609 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:15:13] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:15:13,611 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:15:13] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 23:15:13,613 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:15:13] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 23:15:13,628 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:15:13 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:15:13,630 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 23:15:13 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 23:15:13,634 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 23:15:13 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 23:15:13,641 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 0 samples (page 1, limit 10)
2025-04-05 23:15:13 - INFO - [feedback_manager.py:531] - Retrieved 0 samples (page 1, limit 10)
2025-04-05 23:15:13,644 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:15:13] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 23:15:15,084 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:15:15] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 23:15:15,417 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:15:15] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:15:15,427 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:15:15] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:15:15,704 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:15:15] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 23:15:15,770 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:15:15] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 23:15:17,004 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:15:17] "GET /admin/users HTTP/1.1" 200 -
2025-04-05 23:15:17,353 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:15:17] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:15:17,372 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:15:17] "[36mGET /static/js/admin/users.js HTTP/1.1[0m" 304 -
2025-04-05 23:15:18,959 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:15:18] "GET /admin/roles HTTP/1.1" 200 -
2025-04-05 23:15:19,306 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:15:19] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:15:19,314 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:15:19] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-05 23:15:20,744 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:15:20] "GET /admin/schema HTTP/1.1" 200 -
2025-04-05 23:15:21,088 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:15:21] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:15:21,105 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:15:21] "[36mGET /static/css/admin-schema.css HTTP/1.1[0m" 304 -
2025-04-05 23:15:21,110 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:15:21] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:15:21,111 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:15:21] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:15:21,114 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:15:21] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:15:21,118 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:15:21] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:15:21,408 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:15:21] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:15:21,429 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:15:21] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:15:21,435 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:15:21] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:15:21,441 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:15:21] "[36mGET /static/js/admin/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:15:21,448 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:15:21] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:15:21,587 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:15:21] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:15:21,774 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:15:21] "GET /admin/api/schema/workspaces HTTP/1.1" 200 -
2025-04-05 23:15:21,784 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:15:21] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-05 23:15:21,787 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:15:21] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-05 23:15:23,797 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:15:23] "GET /admin/audit-logs HTTP/1.1" 200 -
2025-04-05 23:15:24,123 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:15:24] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:15:24,133 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:15:24] "[36mGET /static/js/admin/audit-logs.js HTTP/1.1[0m" 304 -
2025-04-05 23:15:34,519 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:15:34] "GET /admin/audit-logs HTTP/1.1" 200 -
2025-04-05 23:15:34,879 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:15:34] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:15:34,884 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:15:34] "[36mGET /static/js/admin/audit-logs.js HTTP/1.1[0m" 304 -
2025-04-05 23:15:37,331 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:15:37] "GET /admin/audit-logs HTTP/1.1" 200 -
2025-04-05 23:15:37,673 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:15:37] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:15:37,678 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:15:37] "[36mGET /static/js/admin/audit-logs.js HTTP/1.1[0m" 304 -
2025-04-05 23:15:41,938 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:15:41] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:16:41,470 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:16:41] "GET / HTTP/1.1" 200 -
2025-04-05 23:16:41,716 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:16:41] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:16:41,811 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:16:41] "GET /static/js/ui-utils.js HTTP/1.1" 200 -
2025-04-05 23:16:41,826 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:16:41] "GET /static/js/core.js HTTP/1.1" 200 -
2025-04-05 23:16:41,858 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:16:41] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:16:41,859 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:16:41] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:16:41,861 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:16:41] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:16:42,024 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:16:42] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:16:42,117 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:16:42] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:16:42,148 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:16:42] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:16:42,477 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:16:42] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:16:51,371 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'get me all the customers'
2025-04-05 23:16:51,372 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:16:51] "POST /api/query HTTP/1.1" 200 -
2025-04-05 23:16:51,372 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'get me all the customers'
2025-04-05 23:16:51,374 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-05 23:16:51,375 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.00s
2025-04-05 23:16:51,375 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-05 23:16:51,376 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-05 23:16:51,376 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-05 23:16:51 - INFO - [database.py:44] - Attempting database connection
2025-04-05 23:16:51,378 [INFO] text2sql.database [database.py:48]: Database connection established in 0.00s
2025-04-05 23:16:51 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-05 23:16:51,380 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'get me all the customers'
2025-04-05 23:16:51,380 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-05 23:16:51,381 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-05 23:16:51,382 [INFO] text2sql.llm_engine [llm_engine.py:55]: [TABLE] Completion generation started
2025-04-05 23:16:51 - INFO - [llm_engine.py:55] - [TABLE] Completion generation started
2025-04-05 23:16:52,190 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:16:52] "GET /api/query/progress/1e0aa4b2-8082-4ead-b360-0e7c5c5f035b HTTP/1.1" 200 -
2025-04-05 23:16:52,456 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:16:52] "GET /api/query/progress/1e0aa4b2-8082-4ead-b360-0e7c5c5f035b HTTP/1.1" 200 -
2025-04-05 23:16:52,617 [INFO] text2sql.llm_engine [llm_engine.py:92]: [TABLE] Completion generation completed in 1.23s
2025-04-05 23:16:52 - INFO - [llm_engine.py:92] - [TABLE] Completion generation completed in 1.23s
2025-04-05 23:16:52,620 [INFO] text2sql.llm_engine [llm_engine.py:93]: **************************
2025-04-05 23:16:52 - INFO - [llm_engine.py:93] - **************************
2025-04-05 23:16:52,621 [INFO] text2sql.agents.table [table_agent.py:69]: Raw model response: 'customers'
2025-04-05 23:16:52,623 [INFO] text2sql.agents.table [table_agent.py:90]: Table selection completed in 1.24s. Selected: customers
2025-04-05 23:16:52,624 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'get me all the customers'
2025-04-05 23:16:52,627 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: customers
2025-04-05 23:16:52,627 [INFO] text2sql.agents.column [column_agent.py:38]: Only one table involved (customers). Skipping LLM call and including all columns.
2025-04-05 23:16:52,628 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 23:16:52 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 23:16:52,630 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 23:16:52 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 23:16:52,634 [INFO] text2sql.feedback [feedback_manager.py:267]: Stage 1: Vector search for 'get me all the customers...'
2025-04-05 23:16:52 - INFO - [feedback_manager.py:267] - Stage 1: Vector search for 'get me all the customers...'
2025-04-05 23:16:52,638 [INFO] text2sql.feedback [feedback_manager.py:62]: Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-05 23:16:52 - INFO - [feedback_manager.py:62] - Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-05 23:16:52,871 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:16:52] "GET /api/query/progress/1e0aa4b2-8082-4ead-b360-0e7c5c5f035b HTTP/1.1" 200 -
2025-04-05 23:16:53,674 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:16:53] "GET /api/query/progress/1e0aa4b2-8082-4ead-b360-0e7c5c5f035b HTTP/1.1" 200 -
2025-04-05 23:16:53,935 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:16:53] "GET /api/query/progress/1e0aa4b2-8082-4ead-b360-0e7c5c5f035b HTTP/1.1" 200 -
2025-04-05 23:16:54,357 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:16:54] "GET /api/query/progress/1e0aa4b2-8082-4ead-b360-0e7c5c5f035b HTTP/1.1" 200 -
2025-04-05 23:16:55,163 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:16:55] "GET /api/query/progress/1e0aa4b2-8082-4ead-b360-0e7c5c5f035b HTTP/1.1" 200 -
2025-04-05 23:16:55,421 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:16:55] "GET /api/query/progress/1e0aa4b2-8082-4ead-b360-0e7c5c5f035b HTTP/1.1" 200 -
2025-04-05 23:16:55,488 [INFO] text2sql.feedback [feedback_manager.py:65]: Embedding model loaded in 2.85s
2025-04-05 23:16:55 - INFO - [feedback_manager.py:65] - Embedding model loaded in 2.85s
2025-04-05 23:16:55,667 [WARNING] text2sql.feedback [feedback_manager.py:324]: No candidates found from vector search
2025-04-05 23:16:55 - WARNING - [feedback_manager.py:324] - No candidates found from vector search
2025-04-05 23:16:55,668 [INFO] text2sql.azure [azure_client.py:35]: SQL generation started for query: 'get me all the customers'
2025-04-05 23:16:55 - INFO - [azure_client.py:35] - SQL generation started for query: 'get me all the customers'
2025-04-05 23:16:55,669 [INFO] text2sql.azure [azure_client.py:69]: Including schema information (587 chars)
2025-04-05 23:16:55 - INFO - [azure_client.py:69] - Including schema information (587 chars)
2025-04-05 23:16:55,670 [INFO] text2sql.azure [azure_client.py:104]: Including 3 SQL examples (no similarity examples found)
2025-04-05 23:16:55 - INFO - [azure_client.py:104] - Including 3 SQL examples (no similarity examples found)
2025-04-05 23:16:55,671 [INFO] text2sql.azure [azure_client.py:114]: PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some example queries and their SQL:\nQuestion: How many records are in the customers table?\nSQL: SELECT COUNT(*) AS record_count FROM customers\n\nQuestion: Get all columns from customers\nSQL: SELECT * FROM customers LIMIT 5\n\nQuestion: Get record from customers by customer_id\nSQL: SELECT * FROM customers WHERE customer_id = 1\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me all the customers'}]
2025-04-05 23:16:55 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some example queries and their SQL:\nQuestion: How many records are in the customers table?\nSQL: SELECT COUNT(*) AS record_count FROM customers\n\nQuestion: Get all columns from customers\nSQL: SELECT * FROM customers LIMIT 5\n\nQuestion: Get record from customers by customer_id\nSQL: SELECT * FROM customers WHERE customer_id = 1\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me all the customers'}]
2025-04-05 23:16:55,672 [INFO] text2sql.llm_engine [llm_engine.py:55]: [SQL_GEN] Completion generation started
2025-04-05 23:16:55 - INFO - [llm_engine.py:55] - [SQL_GEN] Completion generation started
2025-04-05 23:16:55,836 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:16:55] "GET /api/query/progress/1e0aa4b2-8082-4ead-b360-0e7c5c5f035b HTTP/1.1" 200 -
2025-04-05 23:16:56,646 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:16:56] "GET /api/query/progress/1e0aa4b2-8082-4ead-b360-0e7c5c5f035b HTTP/1.1" 200 -
2025-04-05 23:16:56,909 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:16:56] "GET /api/query/progress/1e0aa4b2-8082-4ead-b360-0e7c5c5f035b HTTP/1.1" 200 -
2025-04-05 23:16:57,335 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:16:57] "GET /api/query/progress/1e0aa4b2-8082-4ead-b360-0e7c5c5f035b HTTP/1.1" 200 -
2025-04-05 23:16:58,124 [INFO] text2sql.llm_engine [llm_engine.py:92]: [SQL_GEN] Completion generation completed in 2.45s
2025-04-05 23:16:58 - INFO - [llm_engine.py:92] - [SQL_GEN] Completion generation completed in 2.45s
2025-04-05 23:16:58,129 [INFO] text2sql.llm_engine [llm_engine.py:93]: **************************
2025-04-05 23:16:58 - INFO - [llm_engine.py:93] - **************************
2025-04-05 23:16:58,132 [INFO] text2sql.azure [azure_client.py:150]: Parsing SQL from model response
2025-04-05 23:16:58 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-05 23:16:58,141 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:16:58] "GET /api/query/progress/1e0aa4b2-8082-4ead-b360-0e7c5c5f035b HTTP/1.1" 200 -
2025-04-05 23:16:58,142 [INFO] text2sql.azure [azure_client.py:157]: Found SQL code block in response
2025-04-05 23:16:58 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-05 23:16:58,149 [INFO] text2sql.azure [azure_client.py:171]: Extracted SQL query (24 chars) and explanation (300 chars)
2025-04-05 23:16:58 - INFO - [azure_client.py:171] - Extracted SQL query (24 chars) and explanation (300 chars)
2025-04-05 23:16:58,152 [INFO] text2sql.azure [azure_client.py:124]: Generated SQL: SELECT * FROM customers;
2025-04-05 23:16:58 - INFO - [azure_client.py:124] - Generated SQL: SELECT * FROM customers;
2025-04-05 23:16:58,154 [INFO] text2sql.azure [azure_client.py:132]: SQL generation completed in 2.49s
2025-04-05 23:16:58 - INFO - [azure_client.py:132] - SQL generation completed in 2.49s
2025-04-05 23:16:58,156 [INFO] text2sql.database [database.py:65]: Executing SQL query: SELECT * FROM customers;
2025-04-05 23:16:58 - INFO - [database.py:65] - Executing SQL query: SELECT * FROM customers;
2025-04-05 23:16:58,164 [INFO] text2sql.database [database.py:86]: Query returned 5 rows with 11 columns
2025-04-05 23:16:58 - INFO - [database.py:86] - Query returned 5 rows with 11 columns
2025-04-05 23:16:58,181 [INFO] text2sql.database [database.py:95]: Query processing completed in 0.02s
2025-04-05 23:16:58 - INFO - [database.py:95] - Query processing completed in 0.02s
2025-04-05 23:16:58,183 [INFO] text2sql.sql_generator [sql_generator.py:376]: SQL generation completed in 6.81s
2025-04-05 23:16:58,183 [INFO] text2sql.sql_generator [sql_generator.py:125]: Query processing completed in 6.81s
2025-04-05 23:16:58,404 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:16:58] "GET /api/query/progress/1e0aa4b2-8082-4ead-b360-0e7c5c5f035b HTTP/1.1" 200 -
2025-04-05 23:17:07,828 [INFO] text2sql [app.py:308]: Feedback received for query: 'get me all the customers...' - Rating: 1
2025-04-05 23:17:07 - INFO - [app.py:308] - Feedback received for query: 'get me all the customers...' - Rating: 1
2025-04-05 23:17:07,830 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:17:07 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:17:07,833 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 23:17:07 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 23:17:07,836 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 23:17:07 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 23:17:07,839 [INFO] text2sql.feedback [feedback_manager.py:62]: Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-05 23:17:07 - INFO - [feedback_manager.py:62] - Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-05 23:17:10,979 [INFO] text2sql.feedback [feedback_manager.py:65]: Embedding model loaded in 3.14s
2025-04-05 23:17:10 - INFO - [feedback_manager.py:65] - Embedding model loaded in 3.14s
2025-04-05 23:17:11,030 [INFO] text2sql.feedback [feedback_manager.py:170]: Saved feedback for query: 'get me all the customers...' with rating 1
2025-04-05 23:17:11 - INFO - [feedback_manager.py:170] - Saved feedback for query: 'get me all the customers...' with rating 1
2025-04-05 23:17:11,036 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:17:11] "POST /api/feedback HTTP/1.1" 200 -
2025-04-05 23:17:11,679 [INFO] text2sql [app.py:250]: Schema requested for workspace: dfd
2025-04-05 23:17:11 - INFO - [app.py:250] - Schema requested for workspace: dfd
2025-04-05 23:17:11,684 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:17:11] "GET /api/schema?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:17:14,583 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:17:14] "GET /samples HTTP/1.1" 200 -
2025-04-05 23:17:14,921 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:17:14] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:17:14,943 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:17:14] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:17:14,950 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:17:14] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:17:14,949 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:17:14] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:17:14,955 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:17:14] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:17:14,956 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:17:14] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:17:15,235 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:17:15] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:17:15,294 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:17:15] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:17:15,297 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:17:15] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:17:15,301 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:17:15] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 23:17:15,414 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:17:15] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:17:15,628 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:17:15] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 23:17:15,632 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:17:15] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 23:17:15,649 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:17:15 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:17:15,653 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 23:17:15 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 23:17:15,660 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.01s
2025-04-05 23:17:15 - INFO - [feedback_manager.py:47] - Database connection established in 0.01s
2025-04-05 23:17:15,665 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 1 samples (page 1, limit 10)
2025-04-05 23:17:15 - INFO - [feedback_manager.py:531] - Retrieved 1 samples (page 1, limit 10)
2025-04-05 23:17:15,667 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:17:15] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 23:17:18,164 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:17:18] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 23:17:18,492 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:17:18] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:17:18,514 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:17:18] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:17:18,748 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:17:18] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 23:17:18,844 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:17:18] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 23:17:42,881 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:17:42] "GET /admin/audit-logs HTTP/1.1" 200 -
2025-04-05 23:17:43,221 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:17:43] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:17:43,236 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:17:43] "[36mGET /static/js/admin/audit-logs.js HTTP/1.1[0m" 304 -
2025-04-05 23:17:53,289 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:17:53] "GET /admin/api/audit-logs/export?filter=all HTTP/1.1" 200 -
2025-04-05 23:18:26,408 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:18:26] "GET /admin/audit-logs HTTP/1.1" 200 -
2025-04-05 23:18:26,632 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:18:26] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:18:26,741 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:18:26] "[36mGET /static/js/admin/audit-logs.js HTTP/1.1[0m" 304 -
2025-04-05 23:18:29,244 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:18:29] "GET /samples HTTP/1.1" 200 -
2025-04-05 23:18:29,603 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:18:29] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:18:29,616 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:18:29] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:18:29,624 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:18:29] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:18:29,622 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:18:29] "GET /static/js/core.js HTTP/1.1" 200 -
2025-04-05 23:18:29,626 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:18:29] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:18:29,630 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:18:29] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:18:29,927 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:18:29] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:18:29,946 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:18:29] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:18:29,951 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:18:29] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 23:18:29,952 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:18:29] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:18:30,292 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:18:30] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:18:30,301 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:18:30] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 23:18:30,305 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:18:30] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 23:18:30,317 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:18:30 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:18:30,319 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 23:18:30 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 23:18:30,323 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 23:18:30 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 23:18:30,326 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 1 samples (page 1, limit 10)
2025-04-05 23:18:30 - INFO - [feedback_manager.py:531] - Retrieved 1 samples (page 1, limit 10)
2025-04-05 23:18:30,329 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:18:30] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 23:18:31,783 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:18:31] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 23:18:32,132 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:18:32] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:18:32,144 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:18:32] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:18:32,378 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:18:32] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 23:18:32,503 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:18:32] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 23:18:34,397 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:18:34] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 23:18:34,766 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:18:34] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:18:34,777 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:18:34] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:18:35,002 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:18:35] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 23:18:35,169 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:18:35] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 23:18:35,619 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:18:35] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 23:18:35,972 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:18:35] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:18:35,983 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:18:35] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:18:36,220 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:18:36] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 23:18:36,347 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:18:36] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 23:19:36,334 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:19:36] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 23:19:36,688 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:19:36] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:19:36,698 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:19:36] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:19:36,953 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:19:36] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 23:19:37,072 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:19:37] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 23:19:37,681 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:19:37] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 23:19:38,030 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:19:38] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:19:38,030 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:19:38] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:19:38,262 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:19:38] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 23:19:38,372 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:19:38] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 23:19:40,171 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:19:40] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 23:19:40,504 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:19:40] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:19:40,511 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:19:40] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:19:40,762 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:19:40] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 23:19:40,879 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:19:40] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 23:19:43,092 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:19:43] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 23:19:43,435 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:19:43] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:19:43,443 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:19:43] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:19:43,692 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:19:43] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 23:19:43,818 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:19:43] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 23:19:46,354 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:19:46] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:19:48,513 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:19:48] "GET /admin/users HTTP/1.1" 200 -
2025-04-05 23:19:48,746 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:19:48] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:19:48,881 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:19:48] "[36mGET /static/js/admin/users.js HTTP/1.1[0m" 304 -
2025-04-05 23:19:52,466 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:19:52] "GET /admin/schema HTTP/1.1" 200 -
2025-04-05 23:19:52,841 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:19:52] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:19:52,861 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:19:52] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:19:52,862 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:19:52] "[36mGET /static/css/admin-schema.css HTTP/1.1[0m" 304 -
2025-04-05 23:19:52,866 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:19:52] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:19:52,870 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:19:52] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:19:52,876 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:19:52] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:19:53,165 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:19:53] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:19:53,171 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:19:53] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:19:53,181 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:19:53] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:19:53,188 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:19:53] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:19:53,190 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:19:53] "[36mGET /static/js/admin/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:19:53,347 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:19:53] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:19:53,518 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:19:53] "GET /admin/api/schema/workspaces HTTP/1.1" 200 -
2025-04-05 23:19:53,521 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:19:53] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-05 23:19:53,526 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:19:53] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-05 23:19:57,749 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:19:57] "GET /admin/roles HTTP/1.1" 200 -
2025-04-05 23:19:58,197 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:19:58] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:19:58,229 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:19:58] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-05 23:20:09,870 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:20:09] "GET /admin/roles HTTP/1.1" 200 -
2025-04-05 23:20:10,217 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:20:10] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:20:10,219 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:20:10] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-05 23:20:11,923 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:20:11] "GET /admin/schema HTTP/1.1" 200 -
2025-04-05 23:20:12,273 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:20:12] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:20:12,303 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:20:12] "GET /static/js/navigation-handler.js HTTP/1.1" 200 -
2025-04-05 23:20:12,311 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:20:12] "[36mGET /static/css/admin-schema.css HTTP/1.1[0m" 304 -
2025-04-05 23:20:12,314 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:20:12] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:20:12,316 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:20:12] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:20:12,324 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:20:12] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:20:12,608 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:20:12] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:20:12,618 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:20:12] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:20:12,630 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:20:12] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:20:12,631 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:20:12] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:20:12,635 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:20:12] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:20:12,638 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:20:12] "[36mGET /static/js/admin/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:20:12,971 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:20:12] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:20:12,980 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:20:12] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-05 23:20:12,984 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:20:12] "GET /admin/api/schema/workspaces HTTP/1.1" 200 -
2025-04-05 23:20:12,993 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:20:12] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-05 23:20:57,704 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:20:57] "GET /admin/schema HTTP/1.1" 200 -
2025-04-05 23:20:58,060 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:20:58] "[36mGET /static/css/admin-schema.css HTTP/1.1[0m" 304 -
2025-04-05 23:20:58,064 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:20:58] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:20:58,068 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:20:58] "GET /static/js/core.js HTTP/1.1" 200 -
2025-04-05 23:20:58,075 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:20:58] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:20:58,077 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:20:58] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:20:58,082 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:20:58] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:20:58,391 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:20:58] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:20:58,396 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:20:58] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:20:58,403 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:20:58] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:20:58,408 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:20:58] "[36mGET /static/js/admin/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:20:58,409 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:20:58] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:20:58,729 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:20:58] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:20:58,730 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:20:58] "GET /admin/api/schema/workspaces HTTP/1.1" 200 -
2025-04-05 23:20:58,733 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:20:58] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-05 23:20:58,735 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:20:58] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-05 23:21:00,988 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:00] "GET / HTTP/1.1" 200 -
2025-04-05 23:21:01,344 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:01] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:21:01,346 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:01] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:21:01,352 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:01] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:21:01,353 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:01] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:21:01,357 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:01] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:21:01,361 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:01] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:21:01,677 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:01] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:21:01,687 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:01] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:21:01,696 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:01] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:21:02,023 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:02] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:21:03,549 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:03] "GET /admin/roles HTTP/1.1" 200 -
2025-04-05 23:21:03,878 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:03] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:21:03,887 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:03] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-05 23:21:05,038 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:05] "GET /admin/schema HTTP/1.1" 200 -
2025-04-05 23:21:05,391 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:05] "[36mGET /static/css/admin-schema.css HTTP/1.1[0m" 304 -
2025-04-05 23:21:05,393 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:05] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:21:05,395 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:05] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:21:05,398 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:05] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:21:05,400 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:05] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:21:05,406 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:05] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:21:05,739 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:05] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:21:05,743 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:05] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:21:05,745 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:05] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:21:05,748 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:05] "[36mGET /static/js/admin/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:21:05,749 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:05] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:21:06,085 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:06] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:21:06,088 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:06] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-05 23:21:06,090 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:06] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-05 23:21:06,092 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:06] "GET /admin/api/schema/workspaces HTTP/1.1" 200 -
2025-04-05 23:21:34,709 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:34] "GET /admin/schema HTTP/1.1" 200 -
2025-04-05 23:21:35,071 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:35] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:21:35,075 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:35] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:21:35,077 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:35] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:21:35,078 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:35] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:21:35,082 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:35] "[36mGET /static/css/admin-schema.css HTTP/1.1[0m" 304 -
2025-04-05 23:21:35,087 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:35] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:21:35,386 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:35] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:21:35,393 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:35] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:21:35,408 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:35] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:21:35,409 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:35] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:21:35,410 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:35] "[36mGET /static/js/admin/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:21:35,728 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:35] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:21:35,730 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:35] "GET /admin/api/schema/workspaces HTTP/1.1" 200 -
2025-04-05 23:21:35,732 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:35] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-05 23:21:35,735 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:35] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-05 23:21:41,654 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:41] "GET /admin/schema HTTP/1.1" 200 -
2025-04-05 23:21:41,985 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:41] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:21:41,989 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:41] "[36mGET /static/css/admin-schema.css HTTP/1.1[0m" 304 -
2025-04-05 23:21:41,992 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:41] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:21:41,996 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:41] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:21:41,999 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:41] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:21:42,000 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:42] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:21:42,299 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:42] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:21:42,304 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:42] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:21:42,305 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:42] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:21:42,305 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:42] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:21:42,307 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:42] "[36mGET /static/js/admin/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:21:42,645 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:42] "GET /admin/api/schema/workspaces HTTP/1.1" 200 -
2025-04-05 23:21:42,652 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:42] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:21:42,654 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:42] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-05 23:21:42,660 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:42] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-05 23:21:44,307 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:44] "GET /admin/roles HTTP/1.1" 200 -
2025-04-05 23:21:45,240 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:45] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:21:45,246 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:45] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-05 23:21:46,360 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:46] "GET /admin/users HTTP/1.1" 200 -
2025-04-05 23:21:46,695 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:46] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:21:46,705 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:46] "[36mGET /static/js/admin/users.js HTTP/1.1[0m" 304 -
2025-04-05 23:21:47,732 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:47] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 23:21:48,068 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:48] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:21:48,081 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:48] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:21:48,335 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:48] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 23:21:48,441 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:48] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 23:21:50,322 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:50] "GET /admin/schema HTTP/1.1" 200 -
2025-04-05 23:21:50,675 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:50] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:21:50,678 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:50] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:21:50,681 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:50] "[36mGET /static/css/admin-schema.css HTTP/1.1[0m" 304 -
2025-04-05 23:21:50,682 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:50] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:21:50,683 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:50] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:21:50,687 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:50] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:21:50,990 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:50] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:21:51,003 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:51] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:21:51,004 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:51] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:21:51,006 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:51] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:21:51,011 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:51] "[36mGET /static/js/admin/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:21:51,333 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:51] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:21:51,335 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:51] "GET /admin/api/schema/workspaces HTTP/1.1" 200 -
2025-04-05 23:21:51,338 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:51] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-05 23:21:51,342 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:21:51] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-05 23:22:05,030 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:22:05] "GET /admin/audit-logs HTTP/1.1" 200 -
2025-04-05 23:22:05,374 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:22:05] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:22:05,381 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:22:05] "[36mGET /static/js/admin/audit-logs.js HTTP/1.1[0m" 304 -
2025-04-05 23:22:07,376 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:22:07] "GET /admin/schema HTTP/1.1" 200 -
2025-04-05 23:22:07,707 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:22:07] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:22:07,722 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:22:07] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:22:07,724 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:22:07] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:22:07,725 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:22:07] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:22:07,728 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:22:07] "[36mGET /static/css/admin-schema.css HTTP/1.1[0m" 304 -
2025-04-05 23:22:07,731 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:22:07] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:22:08,012 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:22:08] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:22:08,025 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:22:08] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:22:08,032 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:22:08] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:22:08,036 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:22:08] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:22:08,040 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:22:08] "[36mGET /static/js/admin/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:22:08,209 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:22:08] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:22:08,364 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:22:08] "GET /admin/api/schema/workspaces HTTP/1.1" 200 -
2025-04-05 23:22:08,369 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:22:08] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-05 23:22:08,376 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:22:08] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-05 23:22:09,569 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:22:09] "GET /samples HTTP/1.1" 200 -
2025-04-05 23:22:09,921 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:22:09] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:22:09,927 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:22:09] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:22:09,929 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:22:09] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:22:09,932 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:22:09] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:22:09,937 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:22:09] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:22:09,939 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:22:09] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:22:10,234 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:22:10] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:22:10,249 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:22:10] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:22:10,252 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:22:10] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:22:10,260 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:22:10] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 23:22:10,585 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:22:10] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:22:10,586 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:22:10] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 23:22:10,588 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:22:10] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 23:22:10,592 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:22:10 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:22:10,594 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 23:22:10 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 23:22:10,597 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 23:22:10 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 23:22:10,599 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 1 samples (page 1, limit 10)
2025-04-05 23:22:10 - INFO - [feedback_manager.py:531] - Retrieved 1 samples (page 1, limit 10)
2025-04-05 23:22:10,600 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:22:10] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 23:22:12,926 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:22:12] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 23:22:13,256 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:22:13] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:22:13,265 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:22:13] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:22:13,517 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:22:13] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 23:22:13,592 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:22:13] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 23:22:15,100 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:22:15] "GET /admin/users HTTP/1.1" 200 -
2025-04-05 23:22:15,432 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:22:15] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:22:15,441 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:22:15] "[36mGET /static/js/admin/users.js HTTP/1.1[0m" 304 -
2025-04-05 23:22:53,958 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:22:53] "GET /admin/users HTTP/1.1" 200 -
2025-04-05 23:22:54,290 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:22:54] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:22:54,294 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:22:54] "[36mGET /static/js/admin/users.js HTTP/1.1[0m" 304 -
2025-04-05 23:23:11,738 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:23:11] "GET / HTTP/1.1" 200 -
2025-04-05 23:23:12,064 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:23:12] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:23:12,080 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:23:12] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:23:12,081 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:23:12] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:23:12,084 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:23:12] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:23:12,089 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:23:12] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:23:12,092 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:23:12] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:23:12,375 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:23:12] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:23:12,385 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:23:12] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:23:12,386 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:23:12] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:23:12,583 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:23:12] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:23:13,184 [INFO] text2sql [app.py:250]: Schema requested for workspace: dfd
2025-04-05 23:23:13 - INFO - [app.py:250] - Schema requested for workspace: dfd
2025-04-05 23:23:13,186 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:23:13] "GET /api/schema?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:23:15,228 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:23:15] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 23:23:15,461 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:23:15] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:23:15,568 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:23:15] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:23:15,584 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:23:15] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 23:23:15,904 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:23:15] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 23:23:17,255 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:23:17] "GET /samples HTTP/1.1" 200 -
2025-04-05 23:23:17,498 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:23:17] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:23:17,599 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:23:17] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:23:17,600 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:23:17] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:23:17,601 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:23:17] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:23:17,602 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:23:17] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:23:17,607 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:23:17] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:23:17,811 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:23:17] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:23:17,915 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:23:17] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:23:17,925 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:23:17] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:23:17,936 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:23:17] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 23:23:18,267 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:23:18] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:23:18,273 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:23:18] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 23:23:18,295 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:23:18] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 23:23:18,296 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:23:18 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:23:18,300 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 23:23:18 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 23:23:18,304 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 23:23:18 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 23:23:18,308 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 1 samples (page 1, limit 10)
2025-04-05 23:23:18 - INFO - [feedback_manager.py:531] - Retrieved 1 samples (page 1, limit 10)
2025-04-05 23:23:18,310 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:23:18] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 23:23:20,302 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:23:20] "GET /admin/users HTTP/1.1" 200 -
2025-04-05 23:23:20,644 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:23:20] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:23:20,647 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:23:20] "[36mGET /static/js/admin/users.js HTTP/1.1[0m" 304 -
2025-04-05 23:23:22,446 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:23:22] "GET /admin/roles HTTP/1.1" 200 -
2025-04-05 23:23:22,775 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:23:22] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:23:22,780 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:23:22] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-05 23:23:26,854 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:23:26] "GET /admin/schema HTTP/1.1" 200 -
2025-04-05 23:23:27,215 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:23:27] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:23:27,223 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:23:27] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:23:27,228 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:23:27] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:23:27,228 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:23:27] "[36mGET /static/css/admin-schema.css HTTP/1.1[0m" 304 -
2025-04-05 23:23:27,236 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:23:27] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:23:27,239 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:23:27] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:23:27,541 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:23:27] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:23:27,546 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:23:27] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:23:27,556 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:23:27] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:23:27,560 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:23:27] "[36mGET /static/js/admin/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:23:27,562 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:23:27] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:23:27,909 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:23:27] "GET /admin/api/schema/workspaces HTTP/1.1" 200 -
2025-04-05 23:23:27,911 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:23:27] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:23:27,918 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:23:27] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-05 23:23:27,932 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:23:27] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-05 23:24:04,831 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:24:04] "GET /samples HTTP/1.1" 200 -
2025-04-05 23:24:05,162 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:24:05] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:24:05,181 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:24:05] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:24:05,183 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:24:05] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:24:05,186 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:24:05] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:24:05,189 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:24:05] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:24:05,191 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:24:05] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:24:05,479 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:24:05] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:24:05,486 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:24:05] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:24:05,494 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:24:05] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 23:24:05,496 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:24:05] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:24:05,814 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:24:05] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:24:05,816 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:24:05] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 23:24:05,824 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:24:05] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 23:24:05,831 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:24:05 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:24:05,832 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 23:24:05 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 23:24:05,834 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 23:24:05 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 23:24:05,838 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 1 samples (page 1, limit 10)
2025-04-05 23:24:05 - INFO - [feedback_manager.py:531] - Retrieved 1 samples (page 1, limit 10)
2025-04-05 23:24:05,841 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:24:05] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 23:24:30,410 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:24:30] "GET /admin/users HTTP/1.1" 200 -
2025-04-05 23:24:30,753 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:24:30] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:24:30,766 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:24:30] "[36mGET /static/js/admin/users.js HTTP/1.1[0m" 304 -
2025-04-05 23:28:55,866 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:28:55] "GET /admin/users HTTP/1.1" 200 -
2025-04-05 23:28:56,096 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:28:56] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:28:56,215 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:28:56] "[36mGET /static/js/admin/users.js HTTP/1.1[0m" 304 -
2025-04-05 23:28:58,173 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:28:58] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 23:28:58,514 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:28:58] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:28:58,518 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:28:58] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:28:58,763 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:28:58] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 23:28:58,871 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:28:58] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 23:28:59,918 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:28:59] "GET /samples HTTP/1.1" 200 -
2025-04-05 23:29:00,253 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:00] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:29:00,267 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:00] "GET /static/js/ui-utils.js HTTP/1.1" 200 -
2025-04-05 23:29:00,272 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:00] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:29:00,279 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:00] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:29:00,282 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:00] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:29:00,288 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:00] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:29:00,574 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:00] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:29:00,578 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:00] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:29:00,581 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:00] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:29:00,584 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:00] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 23:29:00,895 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:00] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:29:00,896 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:00] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 23:29:00,904 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:00] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 23:29:00,911 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:29:00 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:29:00,912 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 23:29:00 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 23:29:00,914 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 23:29:00 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 23:29:00,917 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 1 samples (page 1, limit 10)
2025-04-05 23:29:00 - INFO - [feedback_manager.py:531] - Retrieved 1 samples (page 1, limit 10)
2025-04-05 23:29:00,918 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:00] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 23:29:01,924 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:01] "GET /admin/users HTTP/1.1" 200 -
2025-04-05 23:29:02,255 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:02] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:29:02,258 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:02] "[36mGET /static/js/admin/users.js HTTP/1.1[0m" 304 -
2025-04-05 23:29:04,139 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:04] "GET /admin/users HTTP/1.1" 200 -
2025-04-05 23:29:04,468 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:04] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:29:04,472 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:04] "[36mGET /static/js/admin/users.js HTTP/1.1[0m" 304 -
2025-04-05 23:29:08,091 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:08] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:29:15,322 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:15] "GET /admin/users HTTP/1.1" 200 -
2025-04-05 23:29:15,573 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:15] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:29:15,659 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:15] "[36mGET /static/js/admin/users.js HTTP/1.1[0m" 304 -
2025-04-05 23:29:19,147 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:19] "GET / HTTP/1.1" 200 -
2025-04-05 23:29:19,519 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:19] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:29:19,541 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:19] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:29:19,550 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:19] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:29:19,554 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:19] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:29:19,563 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:19] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:29:19,563 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:19] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:29:19,834 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:19] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:29:19,871 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:19] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:29:19,872 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:19] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:29:20,018 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:20] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:29:22,287 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:22] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 23:29:22,670 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:22] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:29:22,678 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:22] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:29:22,914 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:22] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 23:29:23,058 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:23] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 23:29:25,731 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:25] "GET /samples HTTP/1.1" 200 -
2025-04-05 23:29:26,119 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:26] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:29:26,136 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:26] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:29:26,140 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:26] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:29:26,142 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:26] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:29:26,152 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:26] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:29:26,154 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:26] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:29:26,432 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:26] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:29:26,455 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:26] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:29:26,456 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:26] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:29:26,463 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:26] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 23:29:26,638 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:26] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:29:26,791 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:26] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 23:29:26,792 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:26] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 23:29:26,795 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:29:26 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:29:26,798 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 23:29:26 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 23:29:26,800 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 23:29:26 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 23:29:26,804 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 1 samples (page 1, limit 10)
2025-04-05 23:29:26 - INFO - [feedback_manager.py:531] - Retrieved 1 samples (page 1, limit 10)
2025-04-05 23:29:26,806 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:26] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 23:29:28,896 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:28] "GET /admin/users HTTP/1.1" 200 -
2025-04-05 23:29:29,271 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:29] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:29:29,283 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:29] "[36mGET /static/js/admin/users.js HTTP/1.1[0m" 304 -
2025-04-05 23:29:32,513 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:32] "GET /admin/roles HTTP/1.1" 200 -
2025-04-05 23:29:32,909 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:32] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:29:32,922 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:32] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-05 23:29:36,575 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:36] "GET /admin/schema HTTP/1.1" 200 -
2025-04-05 23:29:36,926 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:36] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:29:36,965 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:36] "[36mGET /static/css/admin-schema.css HTTP/1.1[0m" 304 -
2025-04-05 23:29:36,970 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:36] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:29:36,976 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:36] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:29:36,982 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:36] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:29:36,986 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:36] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:29:37,231 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:37] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:29:37,268 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:37] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:29:37,275 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:37] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:29:37,280 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:37] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:29:37,288 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:37] "[36mGET /static/js/admin/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:29:37,410 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:37] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:29:37,636 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:37] "GET /admin/api/schema/workspaces HTTP/1.1" 200 -
2025-04-05 23:29:37,640 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:37] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-05 23:29:37,656 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:37] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-05 23:29:39,651 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:39] "GET /admin/audit-logs HTTP/1.1" 200 -
2025-04-05 23:29:40,111 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:40] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:29:40,140 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:29:40] "[36mGET /static/js/admin/audit-logs.js HTTP/1.1[0m" 304 -
2025-04-05 23:30:24,427 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:30:24] "GET /admin/users HTTP/1.1" 200 -
2025-04-05 23:30:24,780 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:30:24] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:30:24,794 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:30:24] "[36mGET /static/js/admin/users.js HTTP/1.1[0m" 304 -
2025-04-05 23:30:28,212 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:30:28] "GET /admin/users HTTP/1.1" 200 -
2025-04-05 23:30:28,571 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:30:28] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:30:28,577 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:30:28] "[36mGET /static/js/admin/users.js HTTP/1.1[0m" 304 -
2025-04-05 23:30:30,070 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:30:30] "GET /admin/roles HTTP/1.1" 200 -
2025-04-05 23:30:31,075 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:30:31] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:30:31,085 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:30:31] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-05 23:30:32,502 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:30:32] "GET /admin/schema HTTP/1.1" 200 -
2025-04-05 23:30:32,833 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:30:32] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:30:32,854 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:30:32] "[36mGET /static/css/admin-schema.css HTTP/1.1[0m" 304 -
2025-04-05 23:30:32,857 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:30:32] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:30:32,861 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:30:32] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:30:32,862 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:30:32] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:30:32,864 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:30:32] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:30:33,160 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:30:33] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:30:33,183 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:30:33] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:30:33,187 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:30:33] "[36mGET /static/js/admin/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:30:33,188 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:30:33] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:30:33,189 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:30:33] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:30:33,347 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:30:33] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:30:33,522 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:30:33] "GET /admin/api/schema/workspaces HTTP/1.1" 200 -
2025-04-05 23:30:33,531 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:30:33] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-05 23:30:33,545 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:30:33] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-05 23:33:41,144 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:33:41] "GET /admin/schema HTTP/1.1" 200 -
2025-04-05 23:33:41,400 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:33:41] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:33:41,501 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:33:41] "[36mGET /static/css/admin-schema.css HTTP/1.1[0m" 304 -
2025-04-05 23:33:41,508 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:33:41] "GET /static/js/ui-utils.js HTTP/1.1" 200 -
2025-04-05 23:33:41,511 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:33:41] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:33:41,518 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:33:41] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:33:41,522 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:33:41] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:33:41,727 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:33:41] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:33:41,821 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:33:41] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:33:41,837 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:33:41] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:33:41,838 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:33:41] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:33:41,841 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:33:41] "[36mGET /static/js/admin/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:33:42,173 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:33:42] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:33:42,179 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:33:42] "GET /admin/api/schema/workspaces HTTP/1.1" 200 -
2025-04-05 23:33:42,180 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:33:42] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-05 23:33:42,182 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:33:42] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-05 23:33:43,171 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:33:43] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 23:33:43,505 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:33:43] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:33:43,512 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:33:43] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:33:43,764 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:33:43] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 23:33:43,873 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:33:43] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 23:33:44,988 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:33:44] "GET /samples HTTP/1.1" 200 -
2025-04-05 23:33:45,336 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:33:45] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:33:45,357 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:33:45] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:33:45,362 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:33:45] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:33:45,364 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:33:45] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:33:45,369 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:33:45] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:33:45,374 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:33:45] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:33:45,666 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:33:45] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:33:45,685 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:33:45] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:33:45,692 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:33:45] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:33:45,697 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:33:45] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 23:33:46,024 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:33:46] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:33:46,027 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:33:46] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 23:33:46,029 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:33:46] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 23:33:46,043 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:33:46 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:33:46,045 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 23:33:46 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 23:33:46,048 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 23:33:46 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 23:33:46,051 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 1 samples (page 1, limit 10)
2025-04-05 23:33:46 - INFO - [feedback_manager.py:531] - Retrieved 1 samples (page 1, limit 10)
2025-04-05 23:33:46,052 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:33:46] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 23:33:47,350 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:33:47] "GET /admin/users HTTP/1.1" 200 -
2025-04-05 23:33:48,313 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:33:48] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:33:48,319 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:33:48] "[36mGET /static/js/admin/users.js HTTP/1.1[0m" 304 -
2025-04-05 23:33:49,245 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:33:49] "GET /admin/roles HTTP/1.1" 200 -
2025-04-05 23:33:49,587 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:33:49] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:33:49,596 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:33:49] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-05 23:33:50,686 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:33:50] "GET /admin/schema HTTP/1.1" 200 -
2025-04-05 23:33:51,014 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:33:51] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:33:51,031 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:33:51] "[36mGET /static/css/admin-schema.css HTTP/1.1[0m" 304 -
2025-04-05 23:33:51,035 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:33:51] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:33:51,040 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:33:51] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:33:51,042 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:33:51] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:33:51,046 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:33:51] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:33:51,317 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:33:51] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:33:51,351 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:33:51] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:33:51,355 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:33:51] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:33:51,356 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:33:51] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:33:51,357 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:33:51] "[36mGET /static/js/admin/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:33:51,516 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:33:51] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:33:51,683 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:33:51] "GET /admin/api/schema/workspaces HTTP/1.1" 200 -
2025-04-05 23:33:51,684 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:33:51] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-05 23:33:51,688 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:33:51] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-05 23:34:08,033 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:08] "GET /admin/schema HTTP/1.1" 200 -
2025-04-05 23:34:08,382 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:08] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:34:08,390 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:08] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:34:08,391 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:08] "[36mGET /static/css/admin-schema.css HTTP/1.1[0m" 304 -
2025-04-05 23:34:08,399 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:08] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:34:08,402 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:08] "GET /static/js/core.js HTTP/1.1" 200 -
2025-04-05 23:34:08,406 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:08] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:34:08,721 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:08] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:34:08,734 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:08] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:34:08,743 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:08] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:34:08,747 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:08] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:34:08,751 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:08] "[36mGET /static/js/admin/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:34:09,065 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:09] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:34:09,066 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:09] "GET /admin/api/schema/workspaces HTTP/1.1" 200 -
2025-04-05 23:34:09,070 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:09] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-05 23:34:09,071 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:09] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-05 23:34:10,062 [INFO] text2sql [app.py:250]: Schema requested for workspace: dfd
2025-04-05 23:34:10 - INFO - [app.py:250] - Schema requested for workspace: dfd
2025-04-05 23:34:10,066 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:10] "GET /api/schema?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:34:12,285 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:12] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 23:34:12,542 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:12] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:34:12,621 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:12] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:34:12,639 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:12] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 23:34:12,976 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:12] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 23:34:14,307 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:14] "GET /samples HTTP/1.1" 200 -
2025-04-05 23:34:14,549 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:14] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:34:14,660 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:14] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:34:14,680 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:14] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:34:14,686 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:14] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:34:14,696 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:14] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:34:14,689 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:14] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:34:14,870 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:14] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:34:14,973 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:14] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:34:14,990 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:14] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:34:14,999 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:14] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 23:34:15,315 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:15] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 23:34:15,317 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:15] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:34:15,318 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:15] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 23:34:15,328 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:34:15 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:34:15,329 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 23:34:15 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 23:34:15,333 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 23:34:15 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 23:34:15,343 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 1 samples (page 1, limit 10)
2025-04-05 23:34:15 - INFO - [feedback_manager.py:531] - Retrieved 1 samples (page 1, limit 10)
2025-04-05 23:34:15,344 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:15] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 23:34:16,552 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:16] "GET /admin/users HTTP/1.1" 200 -
2025-04-05 23:34:16,903 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:16] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:34:16,917 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:16] "[36mGET /static/js/admin/users.js HTTP/1.1[0m" 304 -
2025-04-05 23:34:18,160 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:18] "GET /admin/roles HTTP/1.1" 200 -
2025-04-05 23:34:18,498 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:18] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:34:18,518 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:18] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-05 23:34:19,673 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:19] "GET /admin/schema HTTP/1.1" 200 -
2025-04-05 23:34:20,026 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:20] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:34:20,055 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:20] "[36mGET /static/css/admin-schema.css HTTP/1.1[0m" 304 -
2025-04-05 23:34:20,058 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:20] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:34:20,067 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:20] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:34:20,071 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:20] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:34:20,072 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:20] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:34:20,971 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:20] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:34:20,988 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:20] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:34:20,998 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:20] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:34:21,002 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:21] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:34:21,006 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:21] "[36mGET /static/js/admin/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:34:21,148 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:21] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:34:21,326 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:21] "GET /admin/api/schema/workspaces HTTP/1.1" 200 -
2025-04-05 23:34:21,329 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:21] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-05 23:34:21,333 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:21] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-05 23:34:22,607 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:22] "GET /admin/audit-logs HTTP/1.1" 200 -
2025-04-05 23:34:22,951 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:22] "[36mGET /static/js/admin/audit-logs.js HTTP/1.1[0m" 304 -
2025-04-05 23:34:22,952 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:22] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:34:24,738 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:24] "GET /admin/schema HTTP/1.1" 200 -
2025-04-05 23:34:25,105 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:25] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:34:25,106 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:25] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:34:25,115 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:25] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:34:25,115 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:25] "[36mGET /static/css/admin-schema.css HTTP/1.1[0m" 304 -
2025-04-05 23:34:25,120 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:25] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:34:25,121 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:25] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:34:25,445 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:25] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:34:25,448 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:25] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:34:25,459 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:25] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:34:25,465 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:25] "[36mGET /static/js/admin/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:34:25,466 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:25] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:34:25,796 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:25] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:34:25,802 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:25] "GET /admin/api/schema/workspaces HTTP/1.1" 200 -
2025-04-05 23:34:25,814 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:25] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-05 23:34:25,818 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:34:25] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-05 23:35:40,096 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:35:40] "GET /admin/schema HTTP/1.1" 200 -
2025-04-05 23:35:40,331 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:35:40] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:35:40,449 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:35:40] "[36mGET /static/css/admin-schema.css HTTP/1.1[0m" 304 -
2025-04-05 23:35:40,454 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:35:40] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:35:40,457 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:35:40] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:35:40,460 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:35:40] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:35:40,465 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:35:40] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:35:40,643 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:35:40] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:35:40,767 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:35:40] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:35:40,772 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:35:40] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:35:40,776 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:35:40] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:35:40,780 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:35:40] "[36mGET /static/js/admin/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:35:41,100 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:35:41] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:35:41,102 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:35:41] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-05 23:35:41,103 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:35:41] "GET /admin/api/schema/workspaces HTTP/1.1" 200 -
2025-04-05 23:35:41,104 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:35:41] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-05 23:35:43,353 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:35:43] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:35:43,656 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:35:43] "[36mGET /static/css/admin-schema.css HTTP/1.1[0m" 304 -
2025-04-05 23:35:45,211 [INFO] text2sql [app.py:250]: Schema requested for workspace: dfd
2025-04-05 23:35:45 - INFO - [app.py:250] - Schema requested for workspace: dfd
2025-04-05 23:35:45,214 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:35:45] "GET /api/schema?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:35:48,440 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:35:48] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 23:35:48,793 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:35:48] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:35:48,806 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:35:48] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:35:49,046 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:35:49] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 23:35:49,181 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:35:49] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 23:35:50,845 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:35:50] "GET /samples HTTP/1.1" 200 -
2025-04-05 23:35:51,221 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:35:51] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:35:51,256 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:35:51] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:35:51,259 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:35:51] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:35:51,262 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:35:51] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:35:51,264 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:35:51] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:35:51,269 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:35:51] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:35:51,546 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:35:51] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:35:51,600 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:35:51] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:35:51,602 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:35:51] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:35:51,610 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:35:51] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 23:35:51,710 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:35:51] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:35:51,931 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:35:51] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 23:35:51,932 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:35:51] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 23:35:51,940 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:35:51 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:35:51,945 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 23:35:51 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 23:35:51,947 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 23:35:51 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 23:35:51,950 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 1 samples (page 1, limit 10)
2025-04-05 23:35:51 - INFO - [feedback_manager.py:531] - Retrieved 1 samples (page 1, limit 10)
2025-04-05 23:35:51,952 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:35:51] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 23:35:53,777 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:35:53] "GET /samples HTTP/1.1" 200 -
2025-04-05 23:35:54,178 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:35:54] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:35:54,180 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:35:54] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:35:54,185 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:35:54] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:35:54,187 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:35:54] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:35:54,192 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:35:54] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:35:54,198 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:35:54] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:35:54,501 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:35:54] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:35:54,509 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:35:54] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:35:54,514 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:35:54] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:35:54,522 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:35:54] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 23:35:54,847 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:35:54] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:35:54,849 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:35:54] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 23:35:54,853 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:35:54] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 23:35:54,865 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:35:54 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:35:54,867 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 23:35:54 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 23:35:54,871 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 23:35:54 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 23:35:54,875 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 1 samples (page 1, limit 10)
2025-04-05 23:35:54 - INFO - [feedback_manager.py:531] - Retrieved 1 samples (page 1, limit 10)
2025-04-05 23:35:54,878 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:35:54] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 23:36:37,196 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:37] "GET /samples HTTP/1.1" 200 -
2025-04-05 23:36:37,544 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:37] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:36:37,547 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:37] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:36:37,554 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:37] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:36:37,555 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:37] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:36:37,562 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:37] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:36:37,565 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:37] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:36:37,871 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:37] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:36:37,886 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:37] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:36:37,889 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:37] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:36:37,891 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:37] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 23:36:38,212 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:38] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:36:38,214 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:38] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 23:36:38,216 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:38] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 23:36:38,225 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:36:38 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:36:38,227 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 23:36:38 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 23:36:38,229 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 23:36:38 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 23:36:38,232 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 1 samples (page 1, limit 10)
2025-04-05 23:36:38 - INFO - [feedback_manager.py:531] - Retrieved 1 samples (page 1, limit 10)
2025-04-05 23:36:38,233 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:38] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 23:36:40,259 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:40] "GET / HTTP/1.1" 200 -
2025-04-05 23:36:40,600 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:40] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:36:40,637 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:40] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:36:40,639 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:40] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:36:40,640 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:40] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:36:40,641 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:40] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:36:40,647 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:40] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:36:40,938 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:40] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:36:40,958 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:40] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:36:40,963 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:40] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:36:41,103 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:41] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:36:41,836 [INFO] text2sql [app.py:250]: Schema requested for workspace: dfd
2025-04-05 23:36:41 - INFO - [app.py:250] - Schema requested for workspace: dfd
2025-04-05 23:36:41,837 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:41] "GET /api/schema?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:36:43,703 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:43] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 23:36:43,943 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:43] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:36:44,034 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:44] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:36:44,046 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:44] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 23:36:44,345 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:44] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 23:36:45,128 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:45] "GET /samples HTTP/1.1" 200 -
2025-04-05 23:36:45,365 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:45] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:36:45,456 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:45] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:36:45,462 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:45] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:36:45,467 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:45] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:36:45,469 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:45] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:36:45,470 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:45] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:36:45,672 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:45] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:36:45,790 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:45] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:36:45,795 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:45] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:36:45,802 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:45] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 23:36:46,130 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:46] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:36:46,133 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:46] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 23:36:46,137 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:46] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 23:36:46,150 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:36:46 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:36:46,152 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 23:36:46 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 23:36:46,154 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 23:36:46 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 23:36:46,157 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 1 samples (page 1, limit 10)
2025-04-05 23:36:46 - INFO - [feedback_manager.py:531] - Retrieved 1 samples (page 1, limit 10)
2025-04-05 23:36:46,158 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:46] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 23:36:46,488 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:46] "GET /admin/users HTTP/1.1" 200 -
2025-04-05 23:36:46,833 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:46] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:36:46,840 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:46] "[36mGET /static/js/admin/users.js HTTP/1.1[0m" 304 -
2025-04-05 23:36:48,475 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:48] "GET /admin/roles HTTP/1.1" 200 -
2025-04-05 23:36:48,816 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:48] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:36:48,819 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:48] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-05 23:36:50,424 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:50] "GET /admin/schema HTTP/1.1" 200 -
2025-04-05 23:36:50,763 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:50] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:36:50,781 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:50] "[36mGET /static/css/admin-schema.css HTTP/1.1[0m" 304 -
2025-04-05 23:36:50,781 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:50] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:36:50,784 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:50] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:36:50,785 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:50] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:36:50,786 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:50] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:36:51,083 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:51] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:36:51,106 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:51] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:36:51,110 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:51] "[36mGET /static/js/admin/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:36:51,112 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:51] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:36:51,114 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:51] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:36:51,258 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:51] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:36:51,445 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:51] "GET /admin/api/schema/workspaces HTTP/1.1" 200 -
2025-04-05 23:36:51,451 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:51] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-05 23:36:51,454 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:51] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-05 23:36:52,313 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:52] "GET /admin/audit-logs HTTP/1.1" 200 -
2025-04-05 23:36:52,647 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:52] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:36:52,656 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:52] "[36mGET /static/js/admin/audit-logs.js HTTP/1.1[0m" 304 -
2025-04-05 23:36:54,619 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:54] "GET / HTTP/1.1" 200 -
2025-04-05 23:36:54,961 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:54] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:36:54,976 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:54] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:36:54,981 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:54] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:36:54,986 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:54] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:36:54,987 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:54] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:36:54,988 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:54] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:36:55,287 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:55] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:36:55,298 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:55] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:36:55,301 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:55] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:36:55,641 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:36:55] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:38:09,338 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:38:09] "GET / HTTP/1.1" 200 -
2025-04-05 23:38:09,579 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:38:09] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:38:09,691 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:38:09] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:38:09,693 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:38:09] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:38:09,696 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:38:09] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:38:09,697 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:38:09] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:38:09,703 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:38:09] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:38:09,903 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:38:09] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:38:10,014 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:38:10] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:38:10,023 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:38:10] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:38:10,360 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:38:10] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:38:25,340 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:38:25] "GET / HTTP/1.1" 200 -
2025-04-05 23:38:25,687 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:38:25] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:38:25,688 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:38:25] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:38:25,690 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:38:25] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:38:25,692 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:38:25] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:38:25,693 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:38:25] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:38:25,696 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:38:25] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:38:25,996 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:38:25] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:38:25,998 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:38:25] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:38:26,003 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:38:26] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:38:26,322 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:38:26] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:38:57,267 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:38:57] "GET / HTTP/1.1" 200 -
2025-04-05 23:38:57,632 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:38:57] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:38:57,642 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:38:57] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:38:57,644 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:38:57] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:38:57,652 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:38:57] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:38:57,654 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:38:57] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:38:57,665 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:38:57] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:38:57,985 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:38:57] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:38:57,986 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:38:57] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:38:57,991 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:38:57] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:38:58,324 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:38:58] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:39:06,396 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:39:06] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 23:39:06,741 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:39:06] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:39:06,747 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:39:06] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:39:06,986 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:39:06] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 23:39:07,080 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:39:07] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 23:39:09,522 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:39:09] "GET /samples HTTP/1.1" 200 -
2025-04-05 23:39:09,852 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:39:09] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:39:09,869 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:39:09] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:39:09,872 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:39:09] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:39:09,873 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:39:09] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:39:09,874 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:39:09] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:39:09,878 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:39:09] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:39:10,166 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:39:10] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:39:10,182 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:39:10] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:39:10,186 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:39:10] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:39:10,189 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:39:10] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 23:39:10,376 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:39:10] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:39:10,523 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:39:10] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 23:39:10,525 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:39:10] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 23:39:10,537 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:39:10 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:39:10,539 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 23:39:10 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 23:39:10,541 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 23:39:10 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 23:39:10,544 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 1 samples (page 1, limit 10)
2025-04-05 23:39:10 - INFO - [feedback_manager.py:531] - Retrieved 1 samples (page 1, limit 10)
2025-04-05 23:39:10,547 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:39:10] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 23:39:13,144 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:39:13] "GET /admin/roles HTTP/1.1" 200 -
2025-04-05 23:39:13,485 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:39:13] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:39:13,500 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:39:13] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-05 23:41:41,611 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:41:41] "[35m[1mGET /admin/roles HTTP/1.1[0m" 500 -
2025-04-05 23:41:41,834 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:41:41] "[36mGET /admin/roles?__debugger__=yes&cmd=resource&f=style.css HTTP/1.1[0m" 304 -
2025-04-05 23:41:41,943 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:41:41] "[36mGET /admin/roles?__debugger__=yes&cmd=resource&f=debugger.js HTTP/1.1[0m" 304 -
2025-04-05 23:41:42,008 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:41:42] "GET /admin/roles?__debugger__=yes&cmd=resource&f=console.png&s=PIy7gkrxlvwDYgHp3STl HTTP/1.1" 200 -
2025-04-05 23:41:42,331 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:41:42] "GET /admin/roles?__debugger__=yes&cmd=resource&f=console.png HTTP/1.1" 200 -
2025-04-05 23:42:15,351 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:42:15] "[35m[1mGET / HTTP/1.1[0m" 500 -
2025-04-05 23:42:15,680 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:42:15] "GET /?__debugger__=yes&cmd=resource&f=style.css HTTP/1.1" 200 -
2025-04-05 23:42:15,692 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:42:15] "GET /?__debugger__=yes&cmd=resource&f=debugger.js HTTP/1.1" 200 -
2025-04-05 23:42:15,944 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:42:15] "GET /?__debugger__=yes&cmd=resource&f=console.png&s=PIy7gkrxlvwDYgHp3STl HTTP/1.1" 200 -
2025-04-05 23:42:16,012 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:42:16] "GET /?__debugger__=yes&cmd=resource&f=console.png HTTP/1.1" 200 -
2025-04-05 23:44:19,541 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:44:19] "[35m[1mGET / HTTP/1.1[0m" 500 -
2025-04-05 23:44:19,770 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:44:19] "[36mGET /?__debugger__=yes&cmd=resource&f=style.css HTTP/1.1[0m" 304 -
2025-04-05 23:44:19,878 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:44:19] "[36mGET /?__debugger__=yes&cmd=resource&f=debugger.js HTTP/1.1[0m" 304 -
2025-04-05 23:44:19,894 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:44:19] "[36mGET /?__debugger__=yes&cmd=resource&f=console.png&s=PIy7gkrxlvwDYgHp3STl HTTP/1.1[0m" 304 -
2025-04-05 23:44:20,218 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:44:20] "[36mGET /?__debugger__=yes&cmd=resource&f=console.png HTTP/1.1[0m" 304 -
2025-04-05 23:45:31,456 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/app.py', reloading
2025-04-05 23:45:31,457 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/app.py', reloading
2025-04-05 23:45:31,460 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/app.py', reloading
2025-04-05 23:45:32,461 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 23:45:32,462 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 23:45:32,463 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 23:45:32,467 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 23:45:32,468 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 23:45:32 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 23:45:32,476 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 23:45:32 - INFO - [database.py:258] - Closing database connection
2025-04-05 23:45:32,479 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 23:45:32 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 23:45:33,708 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 23:45:37,857 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 23:45:37,857 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 23:45:37,857 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 23:45:37,858 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 23:45:37,858 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 23:45:37,867 [INFO] text2sql [app.py:66]: Debug logging enabled for SQL generator and agents
2025-04-05 23:45:37 - INFO - [app.py:66] - Debug logging enabled for SQL generator and agents
2025-04-05 23:45:37,869 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 23:45:37 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 23:45:37,869 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 23:45:37 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 23:45:37,872 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 23:45:37 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 23:45:37,873 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 23:45:37,873 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 23:45:37,873 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 23:45:37,873 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 23:45:37,874 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 23:45:37 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 23:45:37,874 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 23:45:37 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 23:45:37,875 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 23:45:37 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 23:45:37,875 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 23:45:37,875 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 23:45:37,876 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 23:45:37,876 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 23:45:37,876 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 23:45:37 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 23:45:37,876 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 23:45:37 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 23:45:37,877 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 23:45:37 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 23:45:37,877 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 23:45:37,878 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 23:45:37,878 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 23:45:37,878 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 23:45:37,878 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 23:45:37 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 23:45:37,879 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 23:45:37 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 23:45:37,879 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 23:45:37 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 23:45:37,881 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 23:45:37 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 23:45:37,882 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 23:45:37 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 23:45:37,882 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:45:37 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:45:37,882 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 23:45:37,882 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 23:45:37,883 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 23:45:37,883 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 23:45:37,883 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:45:37 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:45:38,019 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 23:45:38,020 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 23:45:46,785 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:45:46] "GET / HTTP/1.1" 200 -
2025-04-05 23:45:47,010 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:45:47] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-05 23:45:47,127 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:45:47] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:45:47,129 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:45:47] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:45:47,132 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:45:47] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:45:47,136 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:45:47] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:45:47,138 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:45:47] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:45:47,341 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:45:47] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:45:47,446 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:45:47] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:45:47,448 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:45:47] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:45:47,771 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:45:47] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:45:53,012 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:45:53] "[32mGET /logout HTTP/1.1[0m" 302 -
2025-04-05 23:45:53,351 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:45:53] "GET /login HTTP/1.1" 200 -
2025-04-05 23:45:53,581 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:45:53] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:46:00,016 [INFO] text2sql [user_manager.py:36]: Verifying password: f392c0d46a59a4b5$22370a5678a2b92974c90bce029d8ad1bcc138aaa92ce5f25ae846f78bf0271f
2025-04-05 23:46:00 - INFO - [user_manager.py:36] - Verifying password: f392c0d46a59a4b5$22370a5678a2b92974c90bce029d8ad1bcc138aaa92ce5f25ae846f78bf0271f
2025-04-05 23:46:00,025 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:46:00] "[32mPOST /login HTTP/1.1[0m" 302 -
2025-04-05 23:46:00,336 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:46:00] "GET / HTTP/1.1" 200 -
2025-04-05 23:46:00,583 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:46:00] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:46:00,684 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:46:00] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:46:00,685 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:46:00] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:46:00,688 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:46:00] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:46:00,689 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:46:00] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:46:00,693 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:46:00] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:46:00,904 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:46:00] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:46:01,010 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:46:01] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:46:01,014 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:46:01] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:46:01,357 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:46:01] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:46:03,644 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:46:03] "GET / HTTP/1.1" 200 -
2025-04-05 23:46:03,998 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:46:03] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:46:03,998 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:46:03] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:46:04,000 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:46:04] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:46:04,004 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:46:04] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:46:04,009 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:46:04] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:46:04,012 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:46:04] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:46:04,308 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:46:04] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:46:04,311 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:46:04] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:46:04,314 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:46:04] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:46:04,627 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:46:04] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:46:14,620 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'get me all the customer'
2025-04-05 23:46:14,621 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:46:14] "POST /api/query HTTP/1.1" 200 -
2025-04-05 23:46:14,621 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'get me all the customer'
2025-04-05 23:46:14,623 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-05 23:46:14,625 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.00s
2025-04-05 23:46:14,625 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-05 23:46:14,626 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-05 23:46:14,627 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-05 23:46:14 - INFO - [database.py:44] - Attempting database connection
2025-04-05 23:46:14,629 [INFO] text2sql.database [database.py:48]: Database connection established in 0.00s
2025-04-05 23:46:14 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-05 23:46:14,631 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'get me all the customer'
2025-04-05 23:46:14,632 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-05 23:46:14,633 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-05 23:46:14,633 [INFO] text2sql.llm_engine [llm_engine.py:55]: [TABLE] Completion generation started
2025-04-05 23:46:14 - INFO - [llm_engine.py:55] - [TABLE] Completion generation started
2025-04-05 23:46:15,435 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:46:15] "GET /api/query/progress/4c667cc8-3ec0-4da1-a9ca-68e651c9dbbd HTTP/1.1" 200 -
2025-04-05 23:46:15,694 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:46:15] "GET /api/query/progress/4c667cc8-3ec0-4da1-a9ca-68e651c9dbbd HTTP/1.1" 200 -
2025-04-05 23:46:15,858 [INFO] text2sql.llm_engine [llm_engine.py:92]: [TABLE] Completion generation completed in 1.23s
2025-04-05 23:46:15 - INFO - [llm_engine.py:92] - [TABLE] Completion generation completed in 1.23s
2025-04-05 23:46:15,862 [INFO] text2sql.llm_engine [llm_engine.py:93]: **************************
2025-04-05 23:46:15 - INFO - [llm_engine.py:93] - **************************
2025-04-05 23:46:15,864 [INFO] text2sql.agents.table [table_agent.py:69]: Raw model response: 'customers'
2025-04-05 23:46:15,866 [INFO] text2sql.agents.table [table_agent.py:90]: Table selection completed in 1.24s. Selected: customers
2025-04-05 23:46:15,867 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'get me all the customer'
2025-04-05 23:46:15,868 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: customers
2025-04-05 23:46:15,870 [INFO] text2sql.agents.column [column_agent.py:38]: Only one table involved (customers). Skipping LLM call and including all columns.
2025-04-05 23:46:15,870 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 23:46:15 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 23:46:15,874 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 23:46:15 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 23:46:15,877 [INFO] text2sql.feedback [feedback_manager.py:267]: Stage 1: Vector search for 'get me all the customer...'
2025-04-05 23:46:15 - INFO - [feedback_manager.py:267] - Stage 1: Vector search for 'get me all the customer...'
2025-04-05 23:46:15,878 [INFO] text2sql.feedback [feedback_manager.py:62]: Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-05 23:46:15 - INFO - [feedback_manager.py:62] - Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-05 23:46:16,103 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:46:16] "GET /api/query/progress/4c667cc8-3ec0-4da1-a9ca-68e651c9dbbd HTTP/1.1" 200 -
2025-04-05 23:46:16,901 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:46:16] "GET /api/query/progress/4c667cc8-3ec0-4da1-a9ca-68e651c9dbbd HTTP/1.1" 200 -
2025-04-05 23:46:17,149 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:46:17] "GET /api/query/progress/4c667cc8-3ec0-4da1-a9ca-68e651c9dbbd HTTP/1.1" 200 -
2025-04-05 23:46:17,579 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:46:17] "GET /api/query/progress/4c667cc8-3ec0-4da1-a9ca-68e651c9dbbd HTTP/1.1" 200 -
2025-04-05 23:46:18,381 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:46:18] "GET /api/query/progress/4c667cc8-3ec0-4da1-a9ca-68e651c9dbbd HTTP/1.1" 200 -
2025-04-05 23:46:18,521 [INFO] text2sql.feedback [feedback_manager.py:65]: Embedding model loaded in 2.64s
2025-04-05 23:46:18 - INFO - [feedback_manager.py:65] - Embedding model loaded in 2.64s
2025-04-05 23:46:18,607 [INFO] text2sql.feedback [feedback_manager.py:322]: Found 1 initial candidates from vector search
2025-04-05 23:46:18 - INFO - [feedback_manager.py:322] - Found 1 initial candidates from vector search
2025-04-05 23:46:18,607 [INFO] text2sql.feedback [feedback_manager.py:367]: Less than 3 candidates, skipping reranking
2025-04-05 23:46:18 - INFO - [feedback_manager.py:367] - Less than 3 candidates, skipping reranking
2025-04-05 23:46:18,608 [INFO] text2sql.sql_generator [sql_generator.py:280]: Found 1 similar queries with reranking
2025-04-05 23:46:18,609 [INFO] text2sql.sql_generator [sql_generator.py:302]: Added similar query #1 from feedback (score: 0.9599): get me all the customers...
2025-04-05 23:46:18,609 [INFO] text2sql.azure [azure_client.py:35]: SQL generation started for query: 'get me all the customer'
2025-04-05 23:46:18 - INFO - [azure_client.py:35] - SQL generation started for query: 'get me all the customer'
2025-04-05 23:46:18,610 [INFO] text2sql.azure [azure_client.py:69]: Including schema information (587 chars)
2025-04-05 23:46:18 - INFO - [azure_client.py:69] - Including schema information (587 chars)
2025-04-05 23:46:18,611 [INFO] text2sql.azure [azure_client.py:97]: Including 1 SQL examples from feedback similarity search
2025-04-05 23:46:18 - INFO - [azure_client.py:97] - Including 1 SQL examples from feedback similarity search
2025-04-05 23:46:18,612 [INFO] text2sql.azure [azure_client.py:114]: PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some similar queries that were previously successful:\nQuestion: get me all the customers\nSQL: SELECT * FROM customers;\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me all the customer'}]
2025-04-05 23:46:18 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some similar queries that were previously successful:\nQuestion: get me all the customers\nSQL: SELECT * FROM customers;\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me all the customer'}]
2025-04-05 23:46:18,613 [INFO] text2sql.llm_engine [llm_engine.py:55]: [SQL_GEN] Completion generation started
2025-04-05 23:46:18 - INFO - [llm_engine.py:55] - [SQL_GEN] Completion generation started
2025-04-05 23:46:18,639 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:46:18] "GET /api/query/progress/4c667cc8-3ec0-4da1-a9ca-68e651c9dbbd HTTP/1.1" 200 -
2025-04-05 23:46:19,052 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:46:19] "GET /api/query/progress/4c667cc8-3ec0-4da1-a9ca-68e651c9dbbd HTTP/1.1" 200 -
2025-04-05 23:46:19,868 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:46:19] "GET /api/query/progress/4c667cc8-3ec0-4da1-a9ca-68e651c9dbbd HTTP/1.1" 200 -
2025-04-05 23:46:20,109 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:46:20] "GET /api/query/progress/4c667cc8-3ec0-4da1-a9ca-68e651c9dbbd HTTP/1.1" 200 -
2025-04-05 23:46:20,535 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:46:20] "GET /api/query/progress/4c667cc8-3ec0-4da1-a9ca-68e651c9dbbd HTTP/1.1" 200 -
2025-04-05 23:46:20,749 [INFO] text2sql.llm_engine [llm_engine.py:92]: [SQL_GEN] Completion generation completed in 2.14s
2025-04-05 23:46:20 - INFO - [llm_engine.py:92] - [SQL_GEN] Completion generation completed in 2.14s
2025-04-05 23:46:20,750 [INFO] text2sql.llm_engine [llm_engine.py:93]: **************************
2025-04-05 23:46:20 - INFO - [llm_engine.py:93] - **************************
2025-04-05 23:46:20,751 [INFO] text2sql.azure [azure_client.py:150]: Parsing SQL from model response
2025-04-05 23:46:20 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-05 23:46:20,752 [INFO] text2sql.azure [azure_client.py:157]: Found SQL code block in response
2025-04-05 23:46:20 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-05 23:46:20,753 [INFO] text2sql.azure [azure_client.py:171]: Extracted SQL query (24 chars) and explanation (220 chars)
2025-04-05 23:46:20 - INFO - [azure_client.py:171] - Extracted SQL query (24 chars) and explanation (220 chars)
2025-04-05 23:46:20,754 [INFO] text2sql.azure [azure_client.py:124]: Generated SQL: SELECT *
FROM customers;
2025-04-05 23:46:20 - INFO - [azure_client.py:124] - Generated SQL: SELECT *
FROM customers;
2025-04-05 23:46:20,756 [INFO] text2sql.azure [azure_client.py:132]: SQL generation completed in 2.15s
2025-04-05 23:46:20 - INFO - [azure_client.py:132] - SQL generation completed in 2.15s
2025-04-05 23:46:20,757 [INFO] text2sql.database [database.py:65]: Executing SQL query: SELECT *
FROM customers;
2025-04-05 23:46:20 - INFO - [database.py:65] - Executing SQL query: SELECT *
FROM customers;
2025-04-05 23:46:20,761 [INFO] text2sql.database [database.py:86]: Query returned 5 rows with 11 columns
2025-04-05 23:46:20 - INFO - [database.py:86] - Query returned 5 rows with 11 columns
2025-04-05 23:46:20,766 [INFO] text2sql.database [database.py:95]: Query processing completed in 0.01s
2025-04-05 23:46:20 - INFO - [database.py:95] - Query processing completed in 0.01s
2025-04-05 23:46:20,768 [INFO] text2sql.sql_generator [sql_generator.py:376]: SQL generation completed in 6.14s
2025-04-05 23:46:20,768 [INFO] text2sql.sql_generator [sql_generator.py:125]: Query processing completed in 6.15s
2025-04-05 23:46:21,327 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:46:21] "GET /api/query/progress/4c667cc8-3ec0-4da1-a9ca-68e651c9dbbd HTTP/1.1" 200 -
2025-04-05 23:46:42,772 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:46:42] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:47:17,781 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:47:17] "GET / HTTP/1.1" 200 -
2025-04-05 23:47:18,008 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:47:18] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:47:18,117 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:47:18] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:47:18,120 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:47:18] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:47:18,127 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:47:18] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:47:18,130 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:47:18] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:47:18,132 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:47:18] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:47:18,326 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:47:18] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:47:18,435 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:47:18] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:47:18,438 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:47:18] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:47:18,776 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:47:18] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:47:25,981 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:47:25] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:47:45,759 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:47:45] "GET / HTTP/1.1" 200 -
2025-04-05 23:47:45,986 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:47:45] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:47:46,100 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:47:46] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:47:46,104 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:47:46] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:47:46,124 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:47:46] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:47:46,129 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:47:46] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:47:46,132 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:47:46] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:47:46,300 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:47:46] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:47:46,405 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:47:46] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:47:46,414 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:47:46] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:47:46,750 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:47:46] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:48:21,599 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:48:21] "GET / HTTP/1.1" 200 -
2025-04-05 23:48:21,985 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:48:21] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:48:21,991 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:48:21] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:48:21,994 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:48:21] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:48:22,003 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:48:22] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:48:22,005 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:48:22] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:48:22,008 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:48:22] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:48:22,320 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:48:22] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:48:22,336 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:48:22] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:48:22,341 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:48:22] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:48:22,700 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:48:22] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:48:25,086 [INFO] text2sql [app.py:250]: Schema requested for workspace: dfd
2025-04-05 23:48:25 - INFO - [app.py:250] - Schema requested for workspace: dfd
2025-04-05 23:48:25,089 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:48:25] "GET /api/schema?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:48:34,721 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:48:34] "GET /api/tables/suggestions?workspace=dfd&query= HTTP/1.1" 200 -
2025-04-05 23:48:37,422 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:48:37] "GET /api/tables/suggestions?workspace=dfd&query= HTTP/1.1" 200 -
2025-04-05 23:48:44,169 [INFO] text2sql [app.py:250]: Schema requested for workspace: dfd
2025-04-05 23:48:44 - INFO - [app.py:250] - Schema requested for workspace: dfd
2025-04-05 23:48:44,171 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:48:44] "GET /api/schema?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:48:49,011 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:48:49] "GET / HTTP/1.1" 200 -
2025-04-05 23:48:49,368 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:48:49] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:48:49,369 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:48:49] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:48:49,371 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:48:49] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:48:49,372 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:48:49] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:48:49,375 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:48:49] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:48:49,378 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:48:49] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:48:49,697 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:48:49] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:48:49,700 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:48:49] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:48:49,703 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:48:49] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:48:50,048 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:48:50] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:48:54,108 [INFO] text2sql [app.py:250]: Schema requested for workspace: dfd
2025-04-05 23:48:54 - INFO - [app.py:250] - Schema requested for workspace: dfd
2025-04-05 23:48:54,110 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:48:54] "GET /api/schema?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:49:01,329 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:49:01] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:49:49,107 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:49:49] "GET / HTTP/1.1" 200 -
2025-04-05 23:49:49,467 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:49:49] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-05 23:49:49,470 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:49:49] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:49:49,473 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:49:49] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:49:49,477 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:49:49] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:49:49,485 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:49:49] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:49:49,486 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:49:49] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:49:49,802 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:49:49] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:49:49,810 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:49:49] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:49:49,811 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:49:49] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:49:50,157 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:49:50] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:50:06,214 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:50:06] "GET / HTTP/1.1" 200 -
2025-04-05 23:50:06,557 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:50:06] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:50:06,559 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:50:06] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:50:06,559 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:50:06] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-05 23:50:06,562 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:50:06] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:50:06,570 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:50:06] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:50:06,573 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:50:06] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:50:06,873 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:50:06] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:50:06,874 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:50:06] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:50:06,875 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:50:06] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:50:07,196 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:50:07] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:50:19,637 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:50:19] "GET / HTTP/1.1" 200 -
2025-04-05 23:50:19,993 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:50:19] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-05 23:50:19,997 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:50:19] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:50:19,998 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:50:19] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:50:20,005 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:50:20] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:50:20,009 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:50:20] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:50:20,013 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:50:20] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:50:20,323 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:50:20] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:50:20,325 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:50:20] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:50:20,332 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:50:20] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:50:20,652 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:50:20] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:50:27,328 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:50:27] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 23:50:27,663 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:50:27] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:50:27,671 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:50:27] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:50:28,385 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:50:28] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 23:50:28,444 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:50:28] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 23:50:36,999 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:50:36] "GET /admin/audit-logs HTTP/1.1" 200 -
2025-04-05 23:50:37,310 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:50:37] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:50:37,324 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:50:37] "[36mGET /static/js/admin/audit-logs.js HTTP/1.1[0m" 304 -
2025-04-05 23:50:39,744 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:50:39] "GET /admin/api/audit-logs/24 HTTP/1.1" 200 -
2025-04-05 23:51:26,404 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:51:26] "GET / HTTP/1.1" 200 -
2025-04-05 23:51:26,647 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:51:26] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:51:26,777 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:51:26] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:51:26,789 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:51:26] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:51:26,800 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:51:26] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:51:26,803 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:51:26] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:51:26,805 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:51:26] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:51:26,973 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:51:26] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:51:27,110 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:51:27] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:51:27,127 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:51:27] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:51:27,460 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:51:27] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:52:08,399 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:52:08] "GET / HTTP/1.1" 200 -
2025-04-05 23:52:08,802 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:52:08] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:52:08,808 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:52:08] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:52:08,833 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:52:08] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:52:08,842 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:52:08] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:52:08,844 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:52:08] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:52:08,847 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:52:08] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:52:09,116 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:52:09] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:52:09,128 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:52:09] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:52:09,158 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:52:09] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:52:09,294 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:52:09] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:52:24,317 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'Get me count of customers by their city'
2025-04-05 23:52:24,317 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:52:24] "POST /api/query HTTP/1.1" 200 -
2025-04-05 23:52:24,318 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'Get me count of customers by their city'
2025-04-05 23:52:24,320 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-05 23:52:24,321 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.00s
2025-04-05 23:52:24,322 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-05 23:52:24,323 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-05 23:52:24,323 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-05 23:52:24 - INFO - [database.py:44] - Attempting database connection
2025-04-05 23:52:24,326 [INFO] text2sql.database [database.py:48]: Database connection established in 0.00s
2025-04-05 23:52:24 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-05 23:52:24,328 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'Get me count of customers by their city'
2025-04-05 23:52:24,329 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-05 23:52:24,330 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-05 23:52:24,331 [INFO] text2sql.llm_engine [llm_engine.py:55]: [TABLE] Completion generation started
2025-04-05 23:52:24 - INFO - [llm_engine.py:55] - [TABLE] Completion generation started
2025-04-05 23:52:24,367 [ERROR] text2sql.llm_engine [llm_engine.py:98]: [TABLE] Completion generation error after 0.04s: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/llm_engine.py", line 72, in generate_completion
    response = self.client.complete(
               ^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/ai/inference/_patch.py", line 728, in complete
    pipeline_response: PipelineResponse = self._client._pipeline.run(  # pylint: disable=protected-access
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 240, in run
    return first_node.send(pipeline_request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  [Previous line repeated 2 more times]
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/policies/_redirect.py", line 204, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/policies/_retry.py", line 573, in send
    raise err
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/policies/_retry.py", line 551, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  [Previous line repeated 3 more times]
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 128, in send
    self._sender.send(request.http_request, **request.context.options),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/transport/_requests_basic.py", line 409, in send
    raise error
azure.core.exceptions.ServiceResponseError: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
2025-04-05 23:52:24 - ERROR - [llm_engine.py:98] - [TABLE] Completion generation error after 0.04s: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/llm_engine.py", line 72, in generate_completion
    response = self.client.complete(
               ^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/ai/inference/_patch.py", line 728, in complete
    pipeline_response: PipelineResponse = self._client._pipeline.run(  # pylint: disable=protected-access
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 240, in run
    return first_node.send(pipeline_request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  [Previous line repeated 2 more times]
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/policies/_redirect.py", line 204, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/policies/_retry.py", line 573, in send
    raise err
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/policies/_retry.py", line 551, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  [Previous line repeated 3 more times]
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 128, in send
    self._sender.send(request.http_request, **request.context.options),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/transport/_requests_basic.py", line 409, in send
    raise error
azure.core.exceptions.ServiceResponseError: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
2025-04-05 23:52:24,375 [ERROR] text2sql.agents.table [table_agent.py:95]: Table selection error after 0.05s: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/agents/table_agent.py", line 67, in get_relevant_tables
    raw_response = self.llm_engine.generate_completion(messages, log_prefix="TABLE")
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/text2sql/src/utils/llm_engine.py", line 72, in generate_completion
    response = self.client.complete(
               ^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/ai/inference/_patch.py", line 728, in complete
    pipeline_response: PipelineResponse = self._client._pipeline.run(  # pylint: disable=protected-access
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 240, in run
    return first_node.send(pipeline_request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  [Previous line repeated 2 more times]
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/policies/_redirect.py", line 204, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/policies/_retry.py", line 573, in send
    raise err
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/policies/_retry.py", line 551, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  [Previous line repeated 3 more times]
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 128, in send
    self._sender.send(request.http_request, **request.context.options),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/transport/_requests_basic.py", line 409, in send
    raise error
azure.core.exceptions.ServiceResponseError: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
2025-04-05 23:52:24,378 [WARNING] text2sql.agents.table [table_agent.py:98]: Defaulting to first 3 tables due to error: customers, products, orders
2025-04-05 23:52:24,379 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'Get me count of customers by their city'
2025-04-05 23:52:24,380 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: customers, products, orders
2025-04-05 23:52:24,381 [INFO] text2sql.agents.column [column_agent.py:94]: Sending request to AI model for column selection
2025-04-05 23:52:24,382 [INFO] text2sql.llm_engine [llm_engine.py:55]: [COLUMN] Completion generation started
2025-04-05 23:52:24 - INFO - [llm_engine.py:55] - [COLUMN] Completion generation started
2025-04-05 23:52:25,135 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:52:25] "GET /api/query/progress/75e72edf-45de-4c8e-9de2-65a7cb0045f8 HTTP/1.1" 200 -
2025-04-05 23:52:25,368 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:52:25] "GET /api/query/progress/75e72edf-45de-4c8e-9de2-65a7cb0045f8 HTTP/1.1" 200 -
2025-04-05 23:52:25,809 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:52:25] "GET /api/query/progress/75e72edf-45de-4c8e-9de2-65a7cb0045f8 HTTP/1.1" 200 -
2025-04-05 23:52:26,042 [INFO] text2sql.llm_engine [llm_engine.py:92]: [COLUMN] Completion generation completed in 1.66s
2025-04-05 23:52:26 - INFO - [llm_engine.py:92] - [COLUMN] Completion generation completed in 1.66s
2025-04-05 23:52:26,049 [INFO] text2sql.llm_engine [llm_engine.py:93]: **************************
2025-04-05 23:52:26 - INFO - [llm_engine.py:93] - **************************
2025-04-05 23:52:26,053 [INFO] text2sql.agents.column [column_agent.py:99]: Raw model response: '{
  "customers": ["city"],
  "orders": ["customer_id", "city"]
}'
2025-04-05 23:52:26,054 [INFO] text2sql.agents.column [column_agent.py:139]: Parsing column selection from model response
2025-04-05 23:52:26,057 [INFO] text2sql.agents.column [column_agent.py:149]: Parsed column selection JSON: {"customers": ["city"], "orders": ["customer_id", "city"]}
2025-04-05 23:52:26,058 [WARNING] text2sql.agents.column [column_agent.py:174]: Filtered out invalid columns for table 'orders': city
2025-04-05 23:52:26,060 [INFO] text2sql.agents.column [column_agent.py:111]: Table 'customers': Pruned 9 columns, kept 2/11
2025-04-05 23:52:26,061 [INFO] text2sql.agents.column [column_agent.py:111]: Table 'orders': Pruned 3 columns, kept 2/5
2025-04-05 23:52:26,062 [INFO] text2sql.agents.column [column_agent.py:197]: Building pruned schema
2025-04-05 23:52:26,063 [INFO] text2sql.agents.column [column_agent.py:226]: Built pruned schema (387 chars)
2025-04-05 23:52:26,064 [INFO] text2sql.agents.column [column_agent.py:120]: Column pruning completed in 1.68s
2025-04-05 23:52:26,065 [ERROR] text2sql [background_tasks.py:60]: Exception while processing query: 'join_type'
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/background_tasks.py", line 38, in process_in_background
    result = self.sql_manager.process_query(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/text2sql/src/models/sql_generator.py", line 71, in process_query
    sql_result = self._generate_sql(query, workspaces, explicit_tables, progress_callback)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/text2sql/src/models/sql_generator.py", line 222, in _generate_sql
    join_info = "\n".join([
                          ^
  File "/home/vijay/text2sql/src/models/sql_generator.py", line 224, in <listcomp>
    f"{join['join_type']} JOIN on {join['condition']}"
       ~~~~^^^^^^^^^^^^^
KeyError: 'join_type'
2025-04-05 23:52:26 - ERROR - [background_tasks.py:60] - Exception while processing query: 'join_type'
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/background_tasks.py", line 38, in process_in_background
    result = self.sql_manager.process_query(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/text2sql/src/models/sql_generator.py", line 71, in process_query
    sql_result = self._generate_sql(query, workspaces, explicit_tables, progress_callback)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/text2sql/src/models/sql_generator.py", line 222, in _generate_sql
    join_info = "\n".join([
                          ^
  File "/home/vijay/text2sql/src/models/sql_generator.py", line 224, in <listcomp>
    f"{join['join_type']} JOIN on {join['condition']}"
       ~~~~^^^^^^^^^^^^^
KeyError: 'join_type'
2025-04-05 23:52:26,609 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:52:26] "GET /api/query/progress/75e72edf-45de-4c8e-9de2-65a7cb0045f8 HTTP/1.1" 200 -
2025-04-05 23:52:32,344 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'Get me count of customers by their city'
2025-04-05 23:52:32,345 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:52:32] "POST /api/query HTTP/1.1" 200 -
2025-04-05 23:52:32,346 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'Get me count of customers by their city'
2025-04-05 23:52:32,348 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-05 23:52:32,349 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.00s
2025-04-05 23:52:32,350 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-05 23:52:32,351 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-05 23:52:32,352 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-05 23:52:32 - INFO - [database.py:44] - Attempting database connection
2025-04-05 23:52:32,354 [INFO] text2sql.database [database.py:48]: Database connection established in 0.00s
2025-04-05 23:52:32 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-05 23:52:32,356 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'Get me count of customers by their city'
2025-04-05 23:52:32,357 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-05 23:52:32,358 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-05 23:52:32,359 [INFO] text2sql.llm_engine [llm_engine.py:55]: [TABLE] Completion generation started
2025-04-05 23:52:32 - INFO - [llm_engine.py:55] - [TABLE] Completion generation started
2025-04-05 23:52:33,180 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:52:33] "GET /api/query/progress/8f3a5f20-9945-4d06-9f05-2630413007c9 HTTP/1.1" 200 -
2025-04-05 23:52:33,432 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:52:33] "GET /api/query/progress/8f3a5f20-9945-4d06-9f05-2630413007c9 HTTP/1.1" 200 -
2025-04-05 23:52:33,446 [INFO] text2sql.llm_engine [llm_engine.py:92]: [TABLE] Completion generation completed in 1.09s
2025-04-05 23:52:33 - INFO - [llm_engine.py:92] - [TABLE] Completion generation completed in 1.09s
2025-04-05 23:52:33,447 [INFO] text2sql.llm_engine [llm_engine.py:93]: **************************
2025-04-05 23:52:33 - INFO - [llm_engine.py:93] - **************************
2025-04-05 23:52:33,449 [INFO] text2sql.agents.table [table_agent.py:69]: Raw model response: 'customers'
2025-04-05 23:52:33,450 [INFO] text2sql.agents.table [table_agent.py:90]: Table selection completed in 1.09s. Selected: customers
2025-04-05 23:52:33,450 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'Get me count of customers by their city'
2025-04-05 23:52:33,451 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: customers
2025-04-05 23:52:33,452 [INFO] text2sql.agents.column [column_agent.py:38]: Only one table involved (customers). Skipping LLM call and including all columns.
2025-04-05 23:52:33,456 [INFO] text2sql.feedback [feedback_manager.py:267]: Stage 1: Vector search for 'Get me count of customers by their city...'
2025-04-05 23:52:33 - INFO - [feedback_manager.py:267] - Stage 1: Vector search for 'Get me count of customers by their city...'
2025-04-05 23:52:33,519 [INFO] text2sql.feedback [feedback_manager.py:322]: Found 1 initial candidates from vector search
2025-04-05 23:52:33 - INFO - [feedback_manager.py:322] - Found 1 initial candidates from vector search
2025-04-05 23:52:33,520 [INFO] text2sql.feedback [feedback_manager.py:367]: Less than 3 candidates, skipping reranking
2025-04-05 23:52:33 - INFO - [feedback_manager.py:367] - Less than 3 candidates, skipping reranking
2025-04-05 23:52:33,521 [INFO] text2sql.sql_generator [sql_generator.py:280]: Found 1 similar queries with reranking
2025-04-05 23:52:33,522 [INFO] text2sql.sql_generator [sql_generator.py:302]: Added similar query #1 from feedback (score: 0.5880): get me all the customers...
2025-04-05 23:52:33,522 [INFO] text2sql.azure [azure_client.py:35]: SQL generation started for query: 'Get me count of customers by their city'
2025-04-05 23:52:33 - INFO - [azure_client.py:35] - SQL generation started for query: 'Get me count of customers by their city'
2025-04-05 23:52:33,523 [INFO] text2sql.azure [azure_client.py:69]: Including schema information (587 chars)
2025-04-05 23:52:33 - INFO - [azure_client.py:69] - Including schema information (587 chars)
2025-04-05 23:52:33,524 [INFO] text2sql.azure [azure_client.py:97]: Including 1 SQL examples from feedback similarity search
2025-04-05 23:52:33 - INFO - [azure_client.py:97] - Including 1 SQL examples from feedback similarity search
2025-04-05 23:52:33,525 [INFO] text2sql.azure [azure_client.py:114]: PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some similar queries that were previously successful:\nQuestion: get me all the customers\nSQL: SELECT * FROM customers;\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: Get me count of customers by their city'}]
2025-04-05 23:52:33 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some similar queries that were previously successful:\nQuestion: get me all the customers\nSQL: SELECT * FROM customers;\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: Get me count of customers by their city'}]
2025-04-05 23:52:33,526 [INFO] text2sql.llm_engine [llm_engine.py:55]: [SQL_GEN] Completion generation started
2025-04-05 23:52:33 - INFO - [llm_engine.py:55] - [SQL_GEN] Completion generation started
2025-04-05 23:52:33,766 [ERROR] text2sql.llm_engine [llm_engine.py:98]: [SQL_GEN] Completion generation error after 0.24s: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/llm_engine.py", line 72, in generate_completion
    response = self.client.complete(
               ^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/ai/inference/_patch.py", line 728, in complete
    pipeline_response: PipelineResponse = self._client._pipeline.run(  # pylint: disable=protected-access
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 240, in run
    return first_node.send(pipeline_request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  [Previous line repeated 2 more times]
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/policies/_redirect.py", line 204, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/policies/_retry.py", line 573, in send
    raise err
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/policies/_retry.py", line 551, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  [Previous line repeated 3 more times]
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 128, in send
    self._sender.send(request.http_request, **request.context.options),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/transport/_requests_basic.py", line 409, in send
    raise error
azure.core.exceptions.ServiceResponseError: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
2025-04-05 23:52:33 - ERROR - [llm_engine.py:98] - [SQL_GEN] Completion generation error after 0.24s: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/llm_engine.py", line 72, in generate_completion
    response = self.client.complete(
               ^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/ai/inference/_patch.py", line 728, in complete
    pipeline_response: PipelineResponse = self._client._pipeline.run(  # pylint: disable=protected-access
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 240, in run
    return first_node.send(pipeline_request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  [Previous line repeated 2 more times]
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/policies/_redirect.py", line 204, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/policies/_retry.py", line 573, in send
    raise err
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/policies/_retry.py", line 551, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  [Previous line repeated 3 more times]
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 128, in send
    self._sender.send(request.http_request, **request.context.options),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/transport/_requests_basic.py", line 409, in send
    raise error
azure.core.exceptions.ServiceResponseError: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
2025-04-05 23:52:33,779 [ERROR] text2sql.azure [azure_client.py:138]: SQL generation error after 0.26s: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/azure_client.py", line 117, in generate_sql
    raw_response = self.llm_engine.generate_completion(messages, log_prefix="SQL_GEN")
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/text2sql/src/utils/llm_engine.py", line 72, in generate_completion
    response = self.client.complete(
               ^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/ai/inference/_patch.py", line 728, in complete
    pipeline_response: PipelineResponse = self._client._pipeline.run(  # pylint: disable=protected-access
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 240, in run
    return first_node.send(pipeline_request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  [Previous line repeated 2 more times]
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/policies/_redirect.py", line 204, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/policies/_retry.py", line 573, in send
    raise err
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/policies/_retry.py", line 551, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  [Previous line repeated 3 more times]
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 128, in send
    self._sender.send(request.http_request, **request.context.options),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/transport/_requests_basic.py", line 409, in send
    raise error
azure.core.exceptions.ServiceResponseError: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
2025-04-05 23:52:33 - ERROR - [azure_client.py:138] - SQL generation error after 0.26s: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/azure_client.py", line 117, in generate_sql
    raw_response = self.llm_engine.generate_completion(messages, log_prefix="SQL_GEN")
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/text2sql/src/utils/llm_engine.py", line 72, in generate_completion
    response = self.client.complete(
               ^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/ai/inference/_patch.py", line 728, in complete
    pipeline_response: PipelineResponse = self._client._pipeline.run(  # pylint: disable=protected-access
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 240, in run
    return first_node.send(pipeline_request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  [Previous line repeated 2 more times]
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/policies/_redirect.py", line 204, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/policies/_retry.py", line 573, in send
    raise err
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/policies/_retry.py", line 551, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 96, in send
    response = self.next.send(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  [Previous line repeated 3 more times]
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/_base.py", line 128, in send
    self._sender.send(request.http_request, **request.context.options),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/azure/core/pipeline/transport/_requests_basic.py", line 409, in send
    raise error
azure.core.exceptions.ServiceResponseError: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
2025-04-05 23:52:33,787 [INFO] text2sql.sql_generator [sql_generator.py:376]: SQL generation completed in 1.44s
2025-04-05 23:52:33,788 [INFO] text2sql.sql_generator [sql_generator.py:125]: Query processing completed in 1.44s
2025-04-05 23:52:33,857 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:52:33] "GET /api/query/progress/8f3a5f20-9945-4d06-9f05-2630413007c9 HTTP/1.1" 200 -
2025-04-05 23:52:43,988 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'Get me count of customers by their city'
2025-04-05 23:52:43,990 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:52:43] "POST /api/query HTTP/1.1" 200 -
2025-04-05 23:52:43,991 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'Get me count of customers by their city'
2025-04-05 23:52:43,994 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-05 23:52:43,997 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.01s
2025-04-05 23:52:43,999 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-05 23:52:43,999 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-05 23:52:43,999 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-05 23:52:43 - INFO - [database.py:44] - Attempting database connection
2025-04-05 23:52:44,004 [INFO] text2sql.database [database.py:48]: Database connection established in 0.00s
2025-04-05 23:52:44 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-05 23:52:44,007 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'Get me count of customers by their city'
2025-04-05 23:52:44,009 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-05 23:52:44,010 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-05 23:52:44,011 [INFO] text2sql.llm_engine [llm_engine.py:55]: [TABLE] Completion generation started
2025-04-05 23:52:44 - INFO - [llm_engine.py:55] - [TABLE] Completion generation started
2025-04-05 23:52:44,494 [INFO] text2sql.llm_engine [llm_engine.py:92]: [TABLE] Completion generation completed in 0.48s
2025-04-05 23:52:44 - INFO - [llm_engine.py:92] - [TABLE] Completion generation completed in 0.48s
2025-04-05 23:52:44,496 [INFO] text2sql.llm_engine [llm_engine.py:93]: **************************
2025-04-05 23:52:44 - INFO - [llm_engine.py:93] - **************************
2025-04-05 23:52:44,501 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:52:44] "GET /api/query/progress/121425a5-44fa-4335-8301-7614c8f29c7f HTTP/1.1" 200 -
2025-04-05 23:52:44,501 [INFO] text2sql.agents.table [table_agent.py:69]: Raw model response: 'customers'
2025-04-05 23:52:44,513 [INFO] text2sql.agents.table [table_agent.py:90]: Table selection completed in 0.51s. Selected: customers
2025-04-05 23:52:44,514 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'Get me count of customers by their city'
2025-04-05 23:52:44,515 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: customers
2025-04-05 23:52:44,516 [INFO] text2sql.agents.column [column_agent.py:38]: Only one table involved (customers). Skipping LLM call and including all columns.
2025-04-05 23:52:44,517 [INFO] text2sql.feedback [feedback_manager.py:267]: Stage 1: Vector search for 'Get me count of customers by their city...'
2025-04-05 23:52:44 - INFO - [feedback_manager.py:267] - Stage 1: Vector search for 'Get me count of customers by their city...'
2025-04-05 23:52:44,635 [INFO] text2sql.feedback [feedback_manager.py:322]: Found 1 initial candidates from vector search
2025-04-05 23:52:44 - INFO - [feedback_manager.py:322] - Found 1 initial candidates from vector search
2025-04-05 23:52:44,637 [INFO] text2sql.feedback [feedback_manager.py:367]: Less than 3 candidates, skipping reranking
2025-04-05 23:52:44 - INFO - [feedback_manager.py:367] - Less than 3 candidates, skipping reranking
2025-04-05 23:52:44,643 [INFO] text2sql.sql_generator [sql_generator.py:280]: Found 1 similar queries with reranking
2025-04-05 23:52:44,644 [INFO] text2sql.sql_generator [sql_generator.py:302]: Added similar query #1 from feedback (score: 0.5880): get me all the customers...
2025-04-05 23:52:44,645 [INFO] text2sql.azure [azure_client.py:35]: SQL generation started for query: 'Get me count of customers by their city'
2025-04-05 23:52:44 - INFO - [azure_client.py:35] - SQL generation started for query: 'Get me count of customers by their city'
2025-04-05 23:52:44,647 [INFO] text2sql.azure [azure_client.py:69]: Including schema information (587 chars)
2025-04-05 23:52:44 - INFO - [azure_client.py:69] - Including schema information (587 chars)
2025-04-05 23:52:44,648 [INFO] text2sql.azure [azure_client.py:97]: Including 1 SQL examples from feedback similarity search
2025-04-05 23:52:44 - INFO - [azure_client.py:97] - Including 1 SQL examples from feedback similarity search
2025-04-05 23:52:44,653 [INFO] text2sql.azure [azure_client.py:114]: PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some similar queries that were previously successful:\nQuestion: get me all the customers\nSQL: SELECT * FROM customers;\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: Get me count of customers by their city'}]
2025-04-05 23:52:44 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some similar queries that were previously successful:\nQuestion: get me all the customers\nSQL: SELECT * FROM customers;\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: Get me count of customers by their city'}]
2025-04-05 23:52:44,660 [INFO] text2sql.llm_engine [llm_engine.py:55]: [SQL_GEN] Completion generation started
2025-04-05 23:52:44 - INFO - [llm_engine.py:55] - [SQL_GEN] Completion generation started
2025-04-05 23:52:45,309 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:52:45] "GET /api/query/progress/121425a5-44fa-4335-8301-7614c8f29c7f HTTP/1.1" 200 -
2025-04-05 23:52:45,567 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:52:45] "GET /api/query/progress/121425a5-44fa-4335-8301-7614c8f29c7f HTTP/1.1" 200 -
2025-04-05 23:52:45,986 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:52:45] "GET /api/query/progress/121425a5-44fa-4335-8301-7614c8f29c7f HTTP/1.1" 200 -
2025-04-05 23:52:46,778 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:52:46] "GET /api/query/progress/121425a5-44fa-4335-8301-7614c8f29c7f HTTP/1.1" 200 -
2025-04-05 23:52:47,034 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:52:47] "GET /api/query/progress/121425a5-44fa-4335-8301-7614c8f29c7f HTTP/1.1" 200 -
2025-04-05 23:52:47,270 [INFO] text2sql.llm_engine [llm_engine.py:92]: [SQL_GEN] Completion generation completed in 2.61s
2025-04-05 23:52:47 - INFO - [llm_engine.py:92] - [SQL_GEN] Completion generation completed in 2.61s
2025-04-05 23:52:47,272 [INFO] text2sql.llm_engine [llm_engine.py:93]: **************************
2025-04-05 23:52:47 - INFO - [llm_engine.py:93] - **************************
2025-04-05 23:52:47,279 [INFO] text2sql.azure [azure_client.py:150]: Parsing SQL from model response
2025-04-05 23:52:47 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-05 23:52:47,281 [INFO] text2sql.azure [azure_client.py:157]: Found SQL code block in response
2025-04-05 23:52:47 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-05 23:52:47,284 [INFO] text2sql.azure [azure_client.py:171]: Extracted SQL query (108 chars) and explanation (290 chars)
2025-04-05 23:52:47 - INFO - [azure_client.py:171] - Extracted SQL query (108 chars) and explanation (290 chars)
2025-04-05 23:52:47,285 [INFO] text2sql.azure [azure_client.py:124]: Generated SQL: SELECT city, COUNT(customer_id) AS customer_count
FROM customers
GROUP BY city
ORDER BY customer_count DESC;
2025-04-05 23:52:47 - INFO - [azure_client.py:124] - Generated SQL: SELECT city, COUNT(customer_id) AS customer_count
FROM customers
GROUP BY city
ORDER BY customer_count DESC;
2025-04-05 23:52:47,289 [INFO] text2sql.azure [azure_client.py:132]: SQL generation completed in 2.64s
2025-04-05 23:52:47 - INFO - [azure_client.py:132] - SQL generation completed in 2.64s
2025-04-05 23:52:47,291 [INFO] text2sql.database [database.py:65]: Executing SQL query: SELECT city, COUNT(customer_id) AS customer_count
FROM customers
GROUP BY city
ORDER BY customer_count DESC;
2025-04-05 23:52:47 - INFO - [database.py:65] - Executing SQL query: SELECT city, COUNT(customer_id) AS customer_count
FROM customers
GROUP BY city
ORDER BY customer_count DESC;
2025-04-05 23:52:47,300 [INFO] text2sql.database [database.py:86]: Query returned 5 rows with 2 columns
2025-04-05 23:52:47 - INFO - [database.py:86] - Query returned 5 rows with 2 columns
2025-04-05 23:52:47,306 [INFO] text2sql.database [database.py:95]: Query processing completed in 0.01s
2025-04-05 23:52:47 - INFO - [database.py:95] - Query processing completed in 0.01s
2025-04-05 23:52:47,309 [INFO] text2sql.sql_generator [sql_generator.py:376]: SQL generation completed in 3.31s
2025-04-05 23:52:47,310 [INFO] text2sql.sql_generator [sql_generator.py:125]: Query processing completed in 3.32s
2025-04-05 23:52:47,451 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:52:47] "GET /api/query/progress/121425a5-44fa-4335-8301-7614c8f29c7f HTTP/1.1" 200 -
2025-04-05 23:53:15,967 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/app.py', reloading
2025-04-05 23:53:15,968 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/app.py', reloading
2025-04-05 23:53:15,977 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/app.py', reloading
2025-04-05 23:53:16,979 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 23:53:16,979 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 23:53:16,979 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 23:53:16,980 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 23:53:16,986 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 23:53:16 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 23:53:16,990 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 23:53:16 - INFO - [database.py:258] - Closing database connection
2025-04-05 23:53:16,995 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 23:53:16 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 23:53:18,699 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 23:53:24,228 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 23:53:24,228 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 23:53:24,229 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 23:53:24,229 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 23:53:24,230 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 23:53:24,240 [INFO] text2sql [app.py:66]: Debug logging enabled for SQL generator and agents
2025-04-05 23:53:24 - INFO - [app.py:66] - Debug logging enabled for SQL generator and agents
2025-04-05 23:53:24,241 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 23:53:24 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 23:53:24,241 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 23:53:24 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 23:53:24,246 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 23:53:24 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 23:53:24,246 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 23:53:24,247 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 23:53:24,247 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 23:53:24,247 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 23:53:24,247 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 23:53:24 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 23:53:24,248 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 23:53:24 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 23:53:24,248 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 23:53:24 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 23:53:24,249 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 23:53:24,249 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 23:53:24,249 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 23:53:24,250 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 23:53:24,250 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 23:53:24 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 23:53:24,250 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 23:53:24 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 23:53:24,251 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 23:53:24 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 23:53:24,251 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 23:53:24,251 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 23:53:24,251 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 23:53:24,252 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 23:53:24,252 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 23:53:24 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 23:53:24,252 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 23:53:24 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 23:53:24,252 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 23:53:24 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 23:53:24,255 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 23:53:24 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 23:53:24,256 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 23:53:24 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 23:53:24,256 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:53:24 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:53:24,256 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 23:53:24,257 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 23:53:24,257 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 23:53:24,257 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 23:53:24,257 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:53:24 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:53:24,399 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 23:53:24,400 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 23:54:05,200 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/background_tasks.py', reloading
2025-04-05 23:54:05,200 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/background_tasks.py', reloading
2025-04-05 23:54:05,202 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/background_tasks.py', reloading
2025-04-05 23:54:06,203 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 23:54:06,204 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 23:54:06,204 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 23:54:06,204 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 23:54:06,204 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 23:54:06 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 23:54:06,205 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 23:54:06 - INFO - [database.py:258] - Closing database connection
2025-04-05 23:54:06,205 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 23:54:06 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 23:54:07,030 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 23:54:10,198 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 23:54:10,199 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 23:54:10,199 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 23:54:10,199 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 23:54:10,200 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 23:54:10,208 [INFO] text2sql [app.py:66]: Debug logging enabled for SQL generator and agents
2025-04-05 23:54:10 - INFO - [app.py:66] - Debug logging enabled for SQL generator and agents
2025-04-05 23:54:10,209 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 23:54:10 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 23:54:10,210 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 23:54:10 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 23:54:10,212 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 23:54:10 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 23:54:10,213 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 23:54:10,213 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 23:54:10,213 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 23:54:10,213 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 23:54:10,213 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 23:54:10 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 23:54:10,214 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 23:54:10 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 23:54:10,214 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 23:54:10 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 23:54:10,214 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 23:54:10,214 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 23:54:10,215 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 23:54:10,215 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 23:54:10,215 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 23:54:10 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 23:54:10,215 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 23:54:10 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 23:54:10,216 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 23:54:10 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 23:54:10,217 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 23:54:10,217 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 23:54:10,217 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 23:54:10,218 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 23:54:10,218 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 23:54:10 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 23:54:10,218 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 23:54:10 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 23:54:10,219 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 23:54:10 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 23:54:10,221 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 23:54:10 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 23:54:10,222 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 23:54:10 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 23:54:10,222 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:54:10 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:54:10,222 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 23:54:10,223 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 23:54:10,223 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 23:54:10,223 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 23:54:10,223 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:54:10 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:54:10,372 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 23:54:10,372 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 23:55:09,327 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/app.py', reloading
2025-04-05 23:55:09,328 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/background_tasks.py', reloading
2025-04-05 23:55:09,328 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/app.py', reloading
2025-04-05 23:55:09,328 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/background_tasks.py', reloading
2025-04-05 23:55:09,339 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/background_tasks.py', reloading
2025-04-05 23:55:09,339 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/app.py', reloading
2025-04-05 23:55:10,340 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-05 23:55:10,341 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-05 23:55:10,341 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-05 23:55:10,342 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-05 23:55:10,342 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-05 23:55:10 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-05 23:55:10,343 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-05 23:55:10 - INFO - [database.py:258] - Closing database connection
2025-04-05 23:55:10,344 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-05 23:55:10 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-05 23:55:11,216 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-05 23:55:14,230 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 23:55:14,230 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 23:55:14,230 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 23:55:14,231 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 23:55:14,231 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-05 23:55:14,237 [INFO] text2sql [app.py:66]: Debug logging enabled for SQL generator and agents
2025-04-05 23:55:14 - INFO - [app.py:66] - Debug logging enabled for SQL generator and agents
2025-04-05 23:55:14,239 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 23:55:14 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 23:55:14,239 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 23:55:14 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 23:55:14,242 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 23:55:14 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 23:55:14,242 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 23:55:14,243 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 23:55:14,243 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 23:55:14,243 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 23:55:14,243 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 23:55:14 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 23:55:14,243 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 23:55:14 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 23:55:14,244 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 23:55:14 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 23:55:14,244 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 23:55:14,244 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 23:55:14,244 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 23:55:14,244 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 23:55:14,245 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 23:55:14 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 23:55:14,245 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 23:55:14 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 23:55:14,245 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 23:55:14 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 23:55:14,245 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 23:55:14,245 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 23:55:14,246 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 23:55:14,246 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 23:55:14,246 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-05 23:55:14 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-05 23:55:14,246 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 23:55:14 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-05 23:55:14,246 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-05 23:55:14 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-05 23:55:14,250 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-05 23:55:14 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-05 23:55:14,251 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-05 23:55:14 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-05 23:55:14,251 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:55:14 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:55:14,252 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-05 23:55:14,252 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-05 23:55:14,252 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-05 23:55:14,252 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-05 23:55:14,252 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:55:14 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:55:14,388 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-05 23:55:14,389 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-05 23:55:18,330 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:55:18] "GET / HTTP/1.1" 200 -
2025-04-05 23:55:18,567 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:55:18] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:55:18,684 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:55:18] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:55:18,687 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:55:18] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:55:18,690 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:55:18] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:55:18,694 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:55:18] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:55:18,700 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:55:18] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:55:18,880 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:55:18] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:55:19,004 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:55:19] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:55:19,007 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:55:19] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:55:19,329 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:55:19] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:55:27,963 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'Get me all the customers'
2025-04-05 23:55:27,964 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:55:27] "POST /api/query HTTP/1.1" 200 -
2025-04-05 23:55:27,964 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'Get me all the customers'
2025-04-05 23:55:27,965 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-05 23:55:27,966 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.00s
2025-04-05 23:55:27,967 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-05 23:55:27,968 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-05 23:55:27,969 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-05 23:55:27 - INFO - [database.py:44] - Attempting database connection
2025-04-05 23:55:27,971 [INFO] text2sql.database [database.py:48]: Database connection established in 0.00s
2025-04-05 23:55:27 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-05 23:55:27,972 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'Get me all the customers'
2025-04-05 23:55:27,973 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-05 23:55:27,974 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-05 23:55:27,975 [INFO] text2sql.llm_engine [llm_engine.py:55]: [TABLE] Completion generation started
2025-04-05 23:55:27 - INFO - [llm_engine.py:55] - [TABLE] Completion generation started
2025-04-05 23:55:28,782 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:55:28] "GET /api/query/progress/78db345c-06ca-468b-909e-5fcacb5a3f21 HTTP/1.1" 200 -
2025-04-05 23:55:29,038 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:55:29] "GET /api/query/progress/78db345c-06ca-468b-909e-5fcacb5a3f21 HTTP/1.1" 200 -
2025-04-05 23:55:29,172 [INFO] text2sql.llm_engine [llm_engine.py:92]: [TABLE] Completion generation completed in 1.20s
2025-04-05 23:55:29 - INFO - [llm_engine.py:92] - [TABLE] Completion generation completed in 1.20s
2025-04-05 23:55:29,174 [INFO] text2sql.llm_engine [llm_engine.py:93]: **************************
2025-04-05 23:55:29 - INFO - [llm_engine.py:93] - **************************
2025-04-05 23:55:29,177 [INFO] text2sql.agents.table [table_agent.py:69]: Raw model response: 'customers'
2025-04-05 23:55:29,179 [INFO] text2sql.agents.table [table_agent.py:90]: Table selection completed in 1.21s. Selected: customers
2025-04-05 23:55:29,180 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'Get me all the customers'
2025-04-05 23:55:29,181 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: customers
2025-04-05 23:55:29,182 [INFO] text2sql.agents.column [column_agent.py:38]: Only one table involved (customers). Skipping LLM call and including all columns.
2025-04-05 23:55:29,183 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 23:55:29 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 23:55:29,185 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 23:55:29 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 23:55:29,187 [INFO] text2sql.feedback [feedback_manager.py:267]: Stage 1: Vector search for 'Get me all the customers...'
2025-04-05 23:55:29 - INFO - [feedback_manager.py:267] - Stage 1: Vector search for 'Get me all the customers...'
2025-04-05 23:55:29,190 [INFO] text2sql.feedback [feedback_manager.py:62]: Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-05 23:55:29 - INFO - [feedback_manager.py:62] - Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-05 23:55:29,476 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:55:29] "GET /api/query/progress/78db345c-06ca-468b-909e-5fcacb5a3f21 HTTP/1.1" 200 -
2025-04-05 23:55:30,264 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:55:30] "GET /api/query/progress/78db345c-06ca-468b-909e-5fcacb5a3f21 HTTP/1.1" 200 -
2025-04-05 23:55:30,509 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:55:30] "GET /api/query/progress/78db345c-06ca-468b-909e-5fcacb5a3f21 HTTP/1.1" 200 -
2025-04-05 23:55:30,952 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:55:30] "GET /api/query/progress/78db345c-06ca-468b-909e-5fcacb5a3f21 HTTP/1.1" 200 -
2025-04-05 23:55:31,756 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:55:31] "GET /api/query/progress/78db345c-06ca-468b-909e-5fcacb5a3f21 HTTP/1.1" 200 -
2025-04-05 23:55:31,941 [INFO] text2sql.feedback [feedback_manager.py:65]: Embedding model loaded in 2.75s
2025-04-05 23:55:31 - INFO - [feedback_manager.py:65] - Embedding model loaded in 2.75s
2025-04-05 23:55:31,988 [INFO] text2sql.feedback [feedback_manager.py:322]: Found 1 initial candidates from vector search
2025-04-05 23:55:31 - INFO - [feedback_manager.py:322] - Found 1 initial candidates from vector search
2025-04-05 23:55:31,989 [INFO] text2sql.feedback [feedback_manager.py:367]: Less than 3 candidates, skipping reranking
2025-04-05 23:55:31 - INFO - [feedback_manager.py:367] - Less than 3 candidates, skipping reranking
2025-04-05 23:55:31,992 [INFO] text2sql.sql_generator [sql_generator.py:280]: Found 1 similar queries with reranking
2025-04-05 23:55:31,993 [INFO] text2sql.sql_generator [sql_generator.py:302]: Added similar query #1 from feedback (score: 1.0000): get me all the customers...
2025-04-05 23:55:31,994 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:55:31] "GET /api/query/progress/78db345c-06ca-468b-909e-5fcacb5a3f21 HTTP/1.1" 200 -
2025-04-05 23:55:31,995 [INFO] text2sql.azure [azure_client.py:35]: SQL generation started for query: 'Get me all the customers'
2025-04-05 23:55:31 - INFO - [azure_client.py:35] - SQL generation started for query: 'Get me all the customers'
2025-04-05 23:55:31,997 [INFO] text2sql.azure [azure_client.py:69]: Including schema information (587 chars)
2025-04-05 23:55:31 - INFO - [azure_client.py:69] - Including schema information (587 chars)
2025-04-05 23:55:31,999 [INFO] text2sql.azure [azure_client.py:97]: Including 1 SQL examples from feedback similarity search
2025-04-05 23:55:31 - INFO - [azure_client.py:97] - Including 1 SQL examples from feedback similarity search
2025-04-05 23:55:32,000 [INFO] text2sql.azure [azure_client.py:114]: PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some similar queries that were previously successful:\nQuestion: get me all the customers\nSQL: SELECT * FROM customers;\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: Get me all the customers'}]
2025-04-05 23:55:32 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some similar queries that were previously successful:\nQuestion: get me all the customers\nSQL: SELECT * FROM customers;\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: Get me all the customers'}]
2025-04-05 23:55:32,001 [INFO] text2sql.llm_engine [llm_engine.py:55]: [SQL_GEN] Completion generation started
2025-04-05 23:55:32 - INFO - [llm_engine.py:55] - [SQL_GEN] Completion generation started
2025-04-05 23:55:32,438 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:55:32] "GET /api/query/progress/78db345c-06ca-468b-909e-5fcacb5a3f21 HTTP/1.1" 200 -
2025-04-05 23:55:33,229 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:55:33] "GET /api/query/progress/78db345c-06ca-468b-909e-5fcacb5a3f21 HTTP/1.1" 200 -
2025-04-05 23:55:33,492 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:55:33] "GET /api/query/progress/78db345c-06ca-468b-909e-5fcacb5a3f21 HTTP/1.1" 200 -
2025-04-05 23:55:33,911 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:55:33] "GET /api/query/progress/78db345c-06ca-468b-909e-5fcacb5a3f21 HTTP/1.1" 200 -
2025-04-05 23:55:34,201 [INFO] text2sql.llm_engine [llm_engine.py:92]: [SQL_GEN] Completion generation completed in 2.20s
2025-04-05 23:55:34 - INFO - [llm_engine.py:92] - [SQL_GEN] Completion generation completed in 2.20s
2025-04-05 23:55:34,206 [INFO] text2sql.llm_engine [llm_engine.py:93]: **************************
2025-04-05 23:55:34 - INFO - [llm_engine.py:93] - **************************
2025-04-05 23:55:34,212 [INFO] text2sql.azure [azure_client.py:150]: Parsing SQL from model response
2025-04-05 23:55:34 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-05 23:55:34,219 [INFO] text2sql.azure [azure_client.py:157]: Found SQL code block in response
2025-04-05 23:55:34 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-05 23:55:34,227 [INFO] text2sql.azure [azure_client.py:171]: Extracted SQL query (24 chars) and explanation (263 chars)
2025-04-05 23:55:34 - INFO - [azure_client.py:171] - Extracted SQL query (24 chars) and explanation (263 chars)
2025-04-05 23:55:34,232 [INFO] text2sql.azure [azure_client.py:124]: Generated SQL: SELECT * FROM customers;
2025-04-05 23:55:34 - INFO - [azure_client.py:124] - Generated SQL: SELECT * FROM customers;
2025-04-05 23:55:34,239 [INFO] text2sql.azure [azure_client.py:132]: SQL generation completed in 2.24s
2025-04-05 23:55:34 - INFO - [azure_client.py:132] - SQL generation completed in 2.24s
2025-04-05 23:55:34,242 [INFO] text2sql.database [database.py:65]: Executing SQL query: SELECT * FROM customers;
2025-04-05 23:55:34 - INFO - [database.py:65] - Executing SQL query: SELECT * FROM customers;
2025-04-05 23:55:34,250 [INFO] text2sql.database [database.py:86]: Query returned 5 rows with 11 columns
2025-04-05 23:55:34 - INFO - [database.py:86] - Query returned 5 rows with 11 columns
2025-04-05 23:55:34,259 [INFO] text2sql.database [database.py:95]: Query processing completed in 0.02s
2025-04-05 23:55:34 - INFO - [database.py:95] - Query processing completed in 0.02s
2025-04-05 23:55:34,262 [INFO] text2sql.sql_generator [sql_generator.py:376]: SQL generation completed in 6.29s
2025-04-05 23:55:34,263 [INFO] text2sql.sql_generator [sql_generator.py:125]: Query processing completed in 6.30s
2025-04-05 23:55:34,721 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:55:34] "GET /api/query/progress/78db345c-06ca-468b-909e-5fcacb5a3f21 HTTP/1.1" 200 -
2025-04-05 23:55:41,077 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:55:41] "GET /admin/audit-logs HTTP/1.1" 200 -
2025-04-05 23:55:41,417 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:55:41] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:55:41,421 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:55:41] "[36mGET /static/js/admin/audit-logs.js HTTP/1.1[0m" 304 -
2025-04-05 23:55:44,269 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:55:44] "GET /admin/api/audit-logs/28 HTTP/1.1" 200 -
2025-04-05 23:55:49,289 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:55:49] "GET / HTTP/1.1" 200 -
2025-04-05 23:55:49,528 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:55:49] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:55:49,625 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:55:49] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:55:49,635 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:55:49] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:55:49,637 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:55:49] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:55:49,639 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:55:49] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:55:49,644 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:55:49] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:55:49,837 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:55:49] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:55:49,932 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:55:49] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:55:49,937 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:55:49] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:55:50,255 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:55:50] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:55:58,884 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:55:58] "[35m[1mGET /change-password HTTP/1.1[0m" 500 -
2025-04-05 23:55:59,228 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:55:59] "GET /change-password?__debugger__=yes&cmd=resource&f=style.css HTTP/1.1" 200 -
2025-04-05 23:55:59,228 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:55:59] "GET /change-password?__debugger__=yes&cmd=resource&f=debugger.js HTTP/1.1" 200 -
2025-04-05 23:55:59,476 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:55:59] "GET /change-password?__debugger__=yes&cmd=resource&f=console.png&s=eCmOpPWwA6qyCxRgLDzy HTTP/1.1" 200 -
2025-04-05 23:55:59,558 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:55:59] "GET /change-password?__debugger__=yes&cmd=resource&f=console.png HTTP/1.1" 200 -
2025-04-05 23:56:18,650 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:56:18] "GET / HTTP/1.1" 200 -
2025-04-05 23:56:19,012 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:56:19] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:56:19,015 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:56:19] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:56:19,019 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:56:19] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:56:19,024 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:56:19] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:56:19,025 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:56:19] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:56:19,030 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:56:19] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:56:19,325 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:56:19] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:56:19,336 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:56:19] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:56:19,339 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:56:19] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:56:19,663 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:56:19] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:56:53,071 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:56:53] "GET / HTTP/1.1" 200 -
2025-04-05 23:56:53,420 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:56:53] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:56:53,424 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:56:53] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:56:53,427 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:56:53] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:56:53,430 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:56:53] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:56:53,435 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:56:53] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:56:53,439 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:56:53] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:56:53,748 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:56:53] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:56:53,760 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:56:53] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:56:53,763 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:56:53] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:56:54,093 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:56:54] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:57:01,865 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:57:01] "GET / HTTP/1.1" 200 -
2025-04-05 23:57:02,199 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:57:02] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:57:02,206 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:57:02] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:57:02,208 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:57:02] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:57:02,209 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:57:02] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:57:02,211 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:57:02] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:57:02,215 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:57:02] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:57:02,517 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:57:02] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:57:02,524 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:57:02] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:57:02,528 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:57:02] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:57:02,854 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:57:02] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:57:18,452 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:57:18] "GET / HTTP/1.1" 200 -
2025-04-05 23:57:18,800 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:57:18] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:57:18,801 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:57:18] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:57:18,806 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:57:18] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:57:18,816 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:57:18] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:57:18,817 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:57:18] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:57:18,818 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:57:18] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:57:19,121 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:57:19] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:57:19,122 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:57:19] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:57:19,126 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:57:19] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:57:19,452 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:57:19] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:57:22,216 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:57:22] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:57:53,782 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:57:53] "GET / HTTP/1.1" 200 -
2025-04-05 23:57:54,018 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:57:54] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-05 23:57:54,134 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:57:54] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:57:54,152 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:57:54] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:57:54,162 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:57:54] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:57:54,170 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:57:54] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:57:54,172 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:57:54] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:57:54,347 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:57:54] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:57:54,475 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:57:54] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:57:54,483 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:57:54] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:57:54,818 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:57:54] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:58:05,953 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:58:05] "GET / HTTP/1.1" 200 -
2025-04-05 23:58:06,325 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:58:06] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:58:06,327 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:58:06] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-05 23:58:06,329 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:58:06] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:58:06,338 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:58:06] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:58:06,340 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:58:06] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:58:06,341 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:58:06] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:58:07,135 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:58:07] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:58:07,146 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:58:07] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:58:07,147 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:58:07] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:58:07,481 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:58:07] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:58:19,568 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:58:19] "GET / HTTP/1.1" 200 -
2025-04-05 23:58:19,936 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:58:19] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-05 23:58:19,938 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:58:19] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:58:19,941 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:58:19] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:58:19,947 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:58:19] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:58:19,952 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:58:19] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:58:19,956 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:58:19] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:58:20,253 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:58:20] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:58:20,257 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:58:20] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:58:20,263 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:58:20] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:58:20,587 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:58:20] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:58:30,927 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:58:30] "GET / HTTP/1.1" 200 -
2025-04-05 23:58:31,274 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:58:31] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:58:31,277 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:58:31] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:58:31,278 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:58:31] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:58:31,281 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:58:31] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:58:31,282 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:58:31] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:58:31,284 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:58:31] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:58:31,607 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:58:31] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:58:31,613 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:58:31] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:58:31,616 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:58:31] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:58:31,948 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:58:31] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:58:32,270 [INFO] text2sql [app.py:254]: Schema requested for workspace: dfd
2025-04-05 23:58:32 - INFO - [app.py:254] - Schema requested for workspace: dfd
2025-04-05 23:58:32,272 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:58:32] "GET /api/schema?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:59:19,266 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:59:19] "GET /admin/ HTTP/1.1" 200 -
2025-04-05 23:59:19,494 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:59:19] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:59:19,612 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:59:19] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:59:19,660 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:59:19] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-05 23:59:19,978 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:59:19] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-05 23:59:23,111 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:59:23] "GET /samples HTTP/1.1" 200 -
2025-04-05 23:59:23,342 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:59:23] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:59:23,478 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:59:23] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:59:23,479 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:59:23] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:59:23,482 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:59:23] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:59:23,491 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:59:23] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:59:23,497 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:59:23] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:59:23,667 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:59:23] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:59:23,814 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:59:23] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:59:23,840 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:59:23] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:59:23,842 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:59:23] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-05 23:59:24,178 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:59:24] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:59:24,185 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:59:24] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-05 23:59:24,196 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:59:24] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-05 23:59:24,226 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:59:24 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-05 23:59:24,228 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-05 23:59:24 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-05 23:59:24,233 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-05 23:59:24 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-05 23:59:24,237 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 1 samples (page 1, limit 10)
2025-04-05 23:59:24 - INFO - [feedback_manager.py:531] - Retrieved 1 samples (page 1, limit 10)
2025-04-05 23:59:24,239 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:59:24] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-05 23:59:30,360 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:59:30] "GET /admin/roles HTTP/1.1" 200 -
2025-04-05 23:59:30,695 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:59:30] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:59:30,704 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:59:30] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-05 23:59:38,848 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:59:38] "GET /admin/schema HTTP/1.1" 200 -
2025-04-05 23:59:39,196 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:59:39] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-05 23:59:39,202 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:59:39] "[36mGET /static/css/admin-schema.css HTTP/1.1[0m" 304 -
2025-04-05 23:59:39,208 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:59:39] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-05 23:59:39,215 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:59:39] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-05 23:59:39,217 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:59:39] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-05 23:59:39,220 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:59:39] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:59:39,535 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:59:39] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-05 23:59:39,540 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:59:39] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-05 23:59:39,548 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:59:39] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-05 23:59:39,557 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:59:39] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-05 23:59:39,558 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:59:39] "[36mGET /static/js/admin/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-05 23:59:39,885 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:59:39] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-05 23:59:39,886 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:59:39] "GET /admin/api/schema/workspaces HTTP/1.1" 200 -
2025-04-05 23:59:39,891 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:59:39] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-05 23:59:39,893 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:59:39] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-05 23:59:43,022 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:59:43] "GET /admin/api/schema/workspaces/Customer HTTP/1.1" 200 -
2025-04-05 23:59:45,525 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:59:45] "GET /admin/api/schema/workspaces/dfd HTTP/1.1" 200 -
2025-04-05 23:59:58,505 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [05/Apr/2025 23:59:58] "GET /admin/api/schema/workspaces/dfd HTTP/1.1" 200 -
2025-04-06 00:00:00,672 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:00:00] "GET / HTTP/1.1" 200 -
2025-04-06 00:00:00,917 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:00:00] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 00:00:01,008 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:00:01] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-06 00:00:01,015 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:00:01] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-06 00:00:01,017 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:00:01] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-06 00:00:01,018 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:00:01] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-06 00:00:01,019 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:00:01] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-06 00:00:01,232 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:00:01] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-06 00:00:01,311 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:00:01] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-06 00:00:01,333 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:00:01] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-06 00:00:01,657 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:00:01] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-06 00:00:56,481 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:00:56] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 00:01:16,141 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:01:16] "GET / HTTP/1.1" 200 -
2025-04-06 00:01:16,387 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:01:16] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 00:01:16,489 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:01:16] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-06 00:01:16,494 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:01:16] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-06 00:01:16,497 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:01:16] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-06 00:01:16,499 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:01:16] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-06 00:01:16,499 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:01:16] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-06 00:01:16,698 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:01:16] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-06 00:01:16,795 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:01:16] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-06 00:01:16,799 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:01:16] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-06 00:01:17,124 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:01:17] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-06 00:01:32,063 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:01:32] "GET / HTTP/1.1" 200 -
2025-04-06 00:01:32,406 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:01:32] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-06 00:01:32,408 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:01:32] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 00:01:32,410 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:01:32] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-06 00:01:32,416 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:01:32] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-06 00:01:32,420 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:01:32] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-06 00:01:32,425 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:01:32] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-06 00:01:32,741 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:01:32] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-06 00:01:32,744 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:01:32] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-06 00:01:32,748 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:01:32] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-06 00:01:33,088 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:01:33] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-06 00:01:33,349 [INFO] text2sql [app.py:254]: Schema requested for workspace: dfd
2025-04-06 00:01:33 - INFO - [app.py:254] - Schema requested for workspace: dfd
2025-04-06 00:01:33,356 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:01:33] "GET /api/schema?workspace=dfd HTTP/1.1" 200 -
2025-04-06 00:01:40,168 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:01:40] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 00:02:31,736 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:02:31] "GET / HTTP/1.1" 200 -
2025-04-06 00:02:31,995 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:02:31] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-06 00:02:32,080 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:02:32] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-06 00:02:32,081 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:02:32] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-06 00:02:32,082 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:02:32] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-06 00:02:32,088 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:02:32] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-06 00:02:32,089 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:02:32] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-06 00:02:32,304 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:02:32] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-06 00:02:32,393 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:02:32] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-06 00:02:32,395 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:02:32] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-06 00:02:32,734 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:02:32] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-06 00:02:33,283 [INFO] text2sql [app.py:254]: Schema requested for workspace: dfd
2025-04-06 00:02:33 - INFO - [app.py:254] - Schema requested for workspace: dfd
2025-04-06 00:02:33,285 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:02:33] "GET /api/schema?workspace=dfd HTTP/1.1" 200 -
2025-04-06 00:02:47,351 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:02:47] "GET /admin/ HTTP/1.1" 200 -
2025-04-06 00:02:47,594 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:02:47] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 00:02:47,703 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:02:47] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-06 00:02:47,720 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:02:47] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-06 00:02:48,060 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:02:48] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-06 00:02:51,819 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:02:51] "GET /samples HTTP/1.1" 200 -
2025-04-06 00:02:52,061 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:02:52] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 00:02:52,158 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:02:52] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-06 00:02:52,174 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:02:52] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-06 00:02:52,175 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:02:52] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-06 00:02:52,177 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:02:52] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-06 00:02:52,180 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:02:52] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-06 00:02:52,379 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:02:52] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-06 00:02:52,482 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:02:52] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-06 00:02:52,496 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:02:52] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-06 00:02:52,502 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:02:52] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-06 00:02:52,825 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:02:52] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-06 00:02:52,826 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:02:52] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-06 00:02:52,829 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:02:52] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-06 00:02:52,832 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-06 00:02:52 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-06 00:02:52,834 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-06 00:02:52 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-06 00:02:52,836 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-06 00:02:52 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-06 00:02:52,840 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 1 samples (page 1, limit 10)
2025-04-06 00:02:52 - INFO - [feedback_manager.py:531] - Retrieved 1 samples (page 1, limit 10)
2025-04-06 00:02:52,842 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:02:52] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-06 00:02:55,159 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:02:55] "GET /admin/users HTTP/1.1" 200 -
2025-04-06 00:02:55,492 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:02:55] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 00:02:55,501 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:02:55] "[36mGET /static/js/admin/users.js HTTP/1.1[0m" 304 -
2025-04-06 00:02:58,612 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:02:58] "GET /admin/roles HTTP/1.1" 200 -
2025-04-06 00:02:58,934 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:02:58] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 00:02:58,947 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:02:58] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-06 00:03:03,288 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:03:03] "GET /admin/schema HTTP/1.1" 200 -
2025-04-06 00:03:03,634 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:03:03] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 00:03:03,640 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:03:03] "[36mGET /static/css/admin-schema.css HTTP/1.1[0m" 304 -
2025-04-06 00:03:03,648 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:03:03] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-06 00:03:03,650 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:03:03] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-06 00:03:03,653 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:03:03] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-06 00:03:03,658 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:03:03] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-06 00:03:03,945 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:03:03] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-06 00:03:03,950 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:03:03] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-06 00:03:03,963 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:03:03] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-06 00:03:03,964 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:03:03] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-06 00:03:03,967 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:03:03] "[36mGET /static/js/admin/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-06 00:03:04,279 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:03:04] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-06 00:03:04,281 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:03:04] "GET /admin/api/schema/workspaces HTTP/1.1" 200 -
2025-04-06 00:03:04,283 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:03:04] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-06 00:03:04,285 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:03:04] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-06 00:03:06,585 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:03:06] "GET /admin/schema HTTP/1.1" 200 -
2025-04-06 00:03:06,931 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:03:06] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 00:03:06,935 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:03:06] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-06 00:03:06,938 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:03:06] "[36mGET /static/css/admin-schema.css HTTP/1.1[0m" 304 -
2025-04-06 00:03:06,940 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:03:06] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-06 00:03:06,941 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:03:06] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-06 00:03:06,942 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:03:06] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-06 00:03:07,245 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:03:07] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-06 00:03:07,256 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:03:07] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-06 00:03:07,258 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:03:07] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-06 00:03:07,259 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:03:07] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-06 00:03:07,261 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:03:07] "[36mGET /static/js/admin/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-06 00:03:07,579 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:03:07] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-06 00:03:07,581 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:03:07] "GET /admin/api/schema/workspaces HTTP/1.1" 200 -
2025-04-06 00:03:07,585 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:03:07] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-06 00:03:07,589 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:03:07] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-06 00:03:10,434 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:03:10] "GET /admin/roles HTTP/1.1" 200 -
2025-04-06 00:03:10,778 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:03:10] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 00:03:10,782 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:03:10] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-06 00:05:08,697 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:08] "GET /admin/roles HTTP/1.1" 200 -
2025-04-06 00:05:08,904 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:08] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 00:05:09,049 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:09] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-06 00:05:13,049 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:13] "GET / HTTP/1.1" 200 -
2025-04-06 00:05:13,395 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:13] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 00:05:13,399 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:13] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-06 00:05:13,404 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:13] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-06 00:05:13,407 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:13] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-06 00:05:13,408 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:13] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-06 00:05:13,410 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:13] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-06 00:05:13,720 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:13] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-06 00:05:13,728 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:13] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-06 00:05:13,734 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:13] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-06 00:05:14,070 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:14] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-06 00:05:34,947 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:34] "GET / HTTP/1.1" 200 -
2025-04-06 00:05:35,290 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:35] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-06 00:05:35,291 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:35] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 00:05:35,295 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:35] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-06 00:05:35,297 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:35] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-06 00:05:35,302 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:35] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-06 00:05:35,305 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:35] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-06 00:05:35,613 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:35] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-06 00:05:35,617 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:35] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-06 00:05:35,618 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:35] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-06 00:05:35,961 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:35] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-06 00:05:38,772 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:38] "GET /admin/ HTTP/1.1" 200 -
2025-04-06 00:05:39,109 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:39] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 00:05:39,119 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:39] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-06 00:05:39,364 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:39] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-06 00:05:39,479 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:39] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-06 00:05:40,881 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:40] "GET /samples HTTP/1.1" 200 -
2025-04-06 00:05:41,210 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:41] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 00:05:41,234 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:41] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-06 00:05:41,237 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:41] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-06 00:05:41,239 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:41] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-06 00:05:41,241 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:41] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-06 00:05:41,242 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:41] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-06 00:05:41,532 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:41] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-06 00:05:41,546 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:41] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-06 00:05:41,551 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:41] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-06 00:05:41,557 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:41] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-06 00:05:41,734 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:41] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-06 00:05:41,870 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:41] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-06 00:05:41,876 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:41] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-06 00:05:41,882 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-06 00:05:41 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-06 00:05:41,887 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-06 00:05:41 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-06 00:05:41,892 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.01s
2025-04-06 00:05:41 - INFO - [feedback_manager.py:47] - Database connection established in 0.01s
2025-04-06 00:05:41,897 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 1 samples (page 1, limit 10)
2025-04-06 00:05:41 - INFO - [feedback_manager.py:531] - Retrieved 1 samples (page 1, limit 10)
2025-04-06 00:05:41,900 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:41] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-06 00:05:43,429 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:43] "GET /admin/roles HTTP/1.1" 200 -
2025-04-06 00:05:43,770 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:43] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 00:05:43,781 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:43] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-06 00:05:46,747 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:46] "GET /admin/schema HTTP/1.1" 200 -
2025-04-06 00:05:47,094 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:47] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 00:05:47,106 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:47] "[36mGET /static/css/admin-schema.css HTTP/1.1[0m" 304 -
2025-04-06 00:05:47,110 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:47] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-06 00:05:47,117 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:47] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-06 00:05:47,119 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:47] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-06 00:05:47,124 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:47] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-06 00:05:47,416 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:47] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-06 00:05:47,420 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:47] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-06 00:05:47,428 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:47] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-06 00:05:47,429 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:47] "[36mGET /static/js/admin/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-06 00:05:47,431 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:47] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-06 00:05:47,752 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:47] "GET /admin/api/schema/workspaces HTTP/1.1" 200 -
2025-04-06 00:05:47,755 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:47] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-06 00:05:47,757 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:47] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-06 00:05:47,758 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:47] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-06 00:05:49,743 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:49] "GET /admin/audit-logs HTTP/1.1" 200 -
2025-04-06 00:05:50,089 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:50] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 00:05:50,097 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:50] "[36mGET /static/js/admin/audit-logs.js HTTP/1.1[0m" 304 -
2025-04-06 00:05:53,485 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:53] "GET /admin/schema HTTP/1.1" 200 -
2025-04-06 00:05:53,848 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:53] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 00:05:53,850 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:53] "[36mGET /static/css/admin-schema.css HTTP/1.1[0m" 304 -
2025-04-06 00:05:53,854 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:53] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-06 00:05:53,864 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:53] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-06 00:05:53,871 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:53] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-06 00:05:53,873 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:53] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-06 00:05:54,168 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:54] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-06 00:05:54,196 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:54] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-06 00:05:54,202 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:54] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-06 00:05:54,207 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:54] "[36mGET /static/js/admin/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-06 00:05:54,209 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:54] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-06 00:05:54,540 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:54] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-06 00:05:54,545 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:54] "GET /admin/api/schema/workspaces HTTP/1.1" 200 -
2025-04-06 00:05:54,554 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:54] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-06 00:05:54,560 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:54] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-06 00:05:56,924 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:05:56] "GET /admin/api/schema/workspaces/dfd HTTP/1.1" 200 -
2025-04-06 00:06:06,313 [INFO] text2sql.schema_manager [schema_manager.py:256]: Saving schema to /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:06:06,317 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:06:06,317 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:06:06,319 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:06:06] "POST /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-06 00:06:06,569 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:06:06] "GET /admin/api/schema/workspaces/dfd HTTP/1.1" 200 -
2025-04-06 00:06:06,635 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:06:06] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-06 00:06:06,637 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:06:06] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-06 00:06:06,641 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:06:06] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-06 00:06:10,187 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:06:10] "GET /admin/api/schema/workspaces/Customer HTTP/1.1" 200 -
2025-04-06 00:06:10,708 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:06:10] "GET /admin/api/schema/workspaces/dfd HTTP/1.1" 200 -
2025-04-06 00:06:36,981 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:06:36] "GET / HTTP/1.1" 200 -
2025-04-06 00:06:37,219 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:06:37] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 00:06:37,320 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:06:37] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-06 00:06:37,333 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:06:37] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-06 00:06:37,334 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:06:37] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-06 00:06:37,335 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:06:37] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-06 00:06:37,337 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:06:37] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-06 00:06:37,530 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:06:37] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-06 00:06:37,636 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:06:37] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-06 00:06:37,639 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:06:37] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-06 00:06:37,970 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:06:37] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-06 00:06:46,822 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:06:46] "GET /api/tables/suggestions?workspace=dfd&query= HTTP/1.1" 200 -
2025-04-06 00:06:48,126 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:06:48] "GET /api/tables/suggestions?workspace=dfd&query=o HTTP/1.1" 200 -
2025-04-06 00:06:48,219 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:06:48] "GET /api/tables/suggestions?workspace=dfd&query=or HTTP/1.1" 200 -
2025-04-06 00:06:48,384 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:06:48] "GET /api/tables/suggestions?workspace=dfd&query=ord HTTP/1.1" 200 -
2025-04-06 00:06:48,436 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:06:48] "GET /api/tables/suggestions?workspace=dfd&query=orde HTTP/1.1" 200 -
2025-04-06 00:06:48,627 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:06:48] "GET /api/tables/suggestions?workspace=dfd&query=order HTTP/1.1" 200 -
2025-04-06 00:06:54,579 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:06:54] "GET /api/tables/suggestions?workspace=dfd&query= HTTP/1.1" 200 -
2025-04-06 00:06:55,790 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:06:55] "GET /api/tables/suggestions?workspace=dfd&query= HTTP/1.1" 200 -
2025-04-06 00:06:59,834 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:06:59] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 00:07:07,843 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:07:07] "GET /api/tables/suggestions?workspace=dfd&query= HTTP/1.1" 200 -
2025-04-06 00:07:08,110 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:07:08] "GET /api/tables/suggestions?workspace=dfd&query=o HTTP/1.1" 200 -
2025-04-06 00:07:08,583 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:07:08] "GET /api/tables/suggestions?workspace=dfd&query=or HTTP/1.1" 200 -
2025-04-06 00:07:08,834 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:07:08] "GET /api/tables/suggestions?workspace=dfd&query=ord HTTP/1.1" 200 -
2025-04-06 00:08:48,269 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:08:48] "GET / HTTP/1.1" 200 -
2025-04-06 00:08:48,499 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:08:48] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 00:08:48,636 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:08:48] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-06 00:08:48,654 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:08:48] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-06 00:08:48,659 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:08:48] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-06 00:08:48,668 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:08:48] "GET /static/js/table-mentions.js HTTP/1.1" 200 -
2025-04-06 00:08:48,674 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:08:48] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-06 00:08:48,810 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:08:48] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-06 00:08:48,968 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:08:48] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-06 00:08:48,969 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:08:48] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-06 00:08:49,292 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:08:49] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-06 00:08:50,149 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:08:50] "GET /api/tables/suggestions?workspace=dfd&query= HTTP/1.1" 200 -
2025-04-06 00:09:20,428 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:09:20] "GET / HTTP/1.1" 200 -
2025-04-06 00:09:20,672 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:09:20] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 00:09:20,784 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:09:20] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-06 00:09:20,795 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:09:20] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-06 00:09:20,797 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:09:20] "GET /static/js/table-mentions.js HTTP/1.1" 200 -
2025-04-06 00:09:20,800 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:09:20] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-06 00:09:20,804 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:09:20] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-06 00:09:20,983 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:09:20] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-06 00:09:21,105 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:09:21] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-06 00:09:21,109 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:09:21] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-06 00:09:21,445 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:09:21] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-06 00:09:22,245 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:09:22] "GET /api/tables/suggestions?workspace=dfd&query= HTTP/1.1" 200 -
2025-04-06 00:09:42,833 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:09:42] "GET /api/tables/suggestions?workspace=dfd&query= HTTP/1.1" 200 -
2025-04-06 00:09:45,528 [INFO] text2sql [app.py:254]: Schema requested for workspace: dfd
2025-04-06 00:09:45 - INFO - [app.py:254] - Schema requested for workspace: dfd
2025-04-06 00:09:45,529 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:09:45] "GET /api/schema?workspace=dfd HTTP/1.1" 200 -
2025-04-06 00:09:51,667 [INFO] text2sql [app.py:138]: User explicitly specified tables: order_items
2025-04-06 00:09:51 - INFO - [app.py:138] - User explicitly specified tables: order_items
2025-04-06 00:09:51,669 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'get all'
2025-04-06 00:09:51,671 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:09:51] "POST /api/query HTTP/1.1" 200 -
2025-04-06 00:09:51,672 [INFO] text2sql.sql_generator [sql_generator.py:40]: User explicitly selected tables: order_items
2025-04-06 00:09:51,675 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'get all'
2025-04-06 00:09:51,677 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-06 00:09:51,678 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.00s
2025-04-06 00:09:51,679 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-06 00:09:51,680 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-06 00:09:51,680 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-06 00:09:51 - INFO - [database.py:44] - Attempting database connection
2025-04-06 00:09:51,684 [INFO] text2sql.database [database.py:48]: Database connection established in 0.00s
2025-04-06 00:09:51 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-06 00:09:51,686 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'get all'
2025-04-06 00:09:51,688 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: order_items
2025-04-06 00:09:51,688 [INFO] text2sql.agents.column [column_agent.py:38]: Only one table involved (order_items). Skipping LLM call and including all columns.
2025-04-06 00:09:51,689 [INFO] text2sql.feedback [feedback_manager.py:267]: Stage 1: Vector search for 'get all...'
2025-04-06 00:09:51 - INFO - [feedback_manager.py:267] - Stage 1: Vector search for 'get all...'
2025-04-06 00:09:51,730 [INFO] text2sql.feedback [feedback_manager.py:322]: Found 1 initial candidates from vector search
2025-04-06 00:09:51 - INFO - [feedback_manager.py:322] - Found 1 initial candidates from vector search
2025-04-06 00:09:51,731 [INFO] text2sql.feedback [feedback_manager.py:367]: Less than 3 candidates, skipping reranking
2025-04-06 00:09:51 - INFO - [feedback_manager.py:367] - Less than 3 candidates, skipping reranking
2025-04-06 00:09:51,732 [INFO] text2sql.sql_generator [sql_generator.py:280]: Found 1 similar queries with reranking
2025-04-06 00:09:51,732 [INFO] text2sql.sql_generator [sql_generator.py:302]: Added similar query #1 from feedback (score: 0.5272): get me all the customers...
2025-04-06 00:09:51,733 [INFO] text2sql.azure [azure_client.py:35]: SQL generation started for query: 'get all'
2025-04-06 00:09:51 - INFO - [azure_client.py:35] - SQL generation started for query: 'get all'
2025-04-06 00:09:51,734 [INFO] text2sql.azure [azure_client.py:69]: Including schema information (353 chars)
2025-04-06 00:09:51 - INFO - [azure_client.py:69] - Including schema information (353 chars)
2025-04-06 00:09:51,736 [INFO] text2sql.azure [azure_client.py:97]: Including 1 SQL examples from feedback similarity search
2025-04-06 00:09:51 - INFO - [azure_client.py:97] - Including 1 SQL examples from feedback similarity search
2025-04-06 00:09:51,737 [INFO] text2sql.azure [azure_client.py:114]: PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: order_items\nDescription: Individual items within each order\nColumns: item_id (INTEGER) - Unique order item identifier, order_id (INTEGER) - Reference to parent order, product_id (INTEGER) - Reference to purchased product, quantity (INTEGER) - Quantity of product ordered, price (REAL) - Price per unit at time of purchase\nPrimary Key(s): item_id\n"}, {'role': 'user', 'content': 'Here are some similar queries that were previously successful:\nQuestion: get me all the customers\nSQL: SELECT * FROM customers;\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get all'}]
2025-04-06 00:09:51 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: order_items\nDescription: Individual items within each order\nColumns: item_id (INTEGER) - Unique order item identifier, order_id (INTEGER) - Reference to parent order, product_id (INTEGER) - Reference to purchased product, quantity (INTEGER) - Quantity of product ordered, price (REAL) - Price per unit at time of purchase\nPrimary Key(s): item_id\n"}, {'role': 'user', 'content': 'Here are some similar queries that were previously successful:\nQuestion: get me all the customers\nSQL: SELECT * FROM customers;\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get all'}]
2025-04-06 00:09:51,738 [INFO] text2sql.llm_engine [llm_engine.py:55]: [SQL_GEN] Completion generation started
2025-04-06 00:09:51 - INFO - [llm_engine.py:55] - [SQL_GEN] Completion generation started
2025-04-06 00:09:52,191 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:09:52] "GET /api/query/progress/afc37053-9c98-4d35-a387-ecd1c79599ae HTTP/1.1" 200 -
2025-04-06 00:09:52,971 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:09:52] "GET /api/query/progress/afc37053-9c98-4d35-a387-ecd1c79599ae HTTP/1.1" 200 -
2025-04-06 00:09:53,230 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:09:53] "GET /api/query/progress/afc37053-9c98-4d35-a387-ecd1c79599ae HTTP/1.1" 200 -
2025-04-06 00:09:53,639 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:09:53] "GET /api/query/progress/afc37053-9c98-4d35-a387-ecd1c79599ae HTTP/1.1" 200 -
2025-04-06 00:09:54,414 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:09:54] "GET /api/query/progress/afc37053-9c98-4d35-a387-ecd1c79599ae HTTP/1.1" 200 -
2025-04-06 00:09:54,677 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:09:54] "GET /api/query/progress/afc37053-9c98-4d35-a387-ecd1c79599ae HTTP/1.1" 200 -
2025-04-06 00:09:54,701 [INFO] text2sql.llm_engine [llm_engine.py:92]: [SQL_GEN] Completion generation completed in 2.96s
2025-04-06 00:09:54 - INFO - [llm_engine.py:92] - [SQL_GEN] Completion generation completed in 2.96s
2025-04-06 00:09:54,702 [INFO] text2sql.llm_engine [llm_engine.py:93]: **************************
2025-04-06 00:09:54 - INFO - [llm_engine.py:93] - **************************
2025-04-06 00:09:54,703 [INFO] text2sql.azure [azure_client.py:150]: Parsing SQL from model response
2025-04-06 00:09:54 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-06 00:09:54,704 [INFO] text2sql.azure [azure_client.py:157]: Found SQL code block in response
2025-04-06 00:09:54 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-06 00:09:54,706 [INFO] text2sql.azure [azure_client.py:171]: Extracted SQL query (134 chars) and explanation (330 chars)
2025-04-06 00:09:54 - INFO - [azure_client.py:171] - Extracted SQL query (134 chars) and explanation (330 chars)
2025-04-06 00:09:54,707 [INFO] text2sql.azure [azure_client.py:124]: Generated SQL: SELECT p.product_id, p.product_name
FROM products p
LEFT JOIN order_items oi ON p.product_id = oi.product_id
WHERE oi.item_id IS NULL;
2025-04-06 00:09:54 - INFO - [azure_client.py:124] - Generated SQL: SELECT p.product_id, p.product_name
FROM products p
LEFT JOIN order_items oi ON p.product_id = oi.product_id
WHERE oi.item_id IS NULL;
2025-04-06 00:09:54,709 [INFO] text2sql.azure [azure_client.py:132]: SQL generation completed in 2.98s
2025-04-06 00:09:54 - INFO - [azure_client.py:132] - SQL generation completed in 2.98s
2025-04-06 00:09:54,710 [INFO] text2sql.database [database.py:65]: Executing SQL query: SELECT p.product_id, p.product_name
FROM products p
LEFT JOIN order_items oi ON p.product_id = oi.product_id
WHERE oi.item_id IS NULL;
2025-04-06 00:09:54 - INFO - [database.py:65] - Executing SQL query: SELECT p.product_id, p.product_name
FROM products p
LEFT JOIN order_items oi ON p.product_id = oi.product_id
WHERE oi.item_id IS NULL;
2025-04-06 00:09:54,711 [ERROR] text2sql.database [database.py:122]: SQL error after 0.00s: (sqlite3.OperationalError) no such column: p.product_name
[SQL: SELECT p.product_id, p.product_name
FROM products p
LEFT JOIN order_items oi ON p.product_id = oi.product_id
WHERE oi.item_id IS NULL;]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: p.product_name

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/database.py", line 78, in execute_query
    result = conn.execute(text(sql_query))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1414, in execute
    return meth(
           ^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: p.product_name
[SQL: SELECT p.product_id, p.product_name
FROM products p
LEFT JOIN order_items oi ON p.product_id = oi.product_id
WHERE oi.item_id IS NULL;]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-04-06 00:09:54 - ERROR - [database.py:122] - SQL error after 0.00s: (sqlite3.OperationalError) no such column: p.product_name
[SQL: SELECT p.product_id, p.product_name
FROM products p
LEFT JOIN order_items oi ON p.product_id = oi.product_id
WHERE oi.item_id IS NULL;]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: p.product_name

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/database.py", line 78, in execute_query
    result = conn.execute(text(sql_query))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1414, in execute
    return meth(
           ^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: p.product_name
[SQL: SELECT p.product_id, p.product_name
FROM products p
LEFT JOIN order_items oi ON p.product_id = oi.product_id
WHERE oi.item_id IS NULL;]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-04-06 00:09:54,716 [INFO] text2sql.sql_generator [sql_generator.py:376]: SQL generation completed in 3.04s
2025-04-06 00:09:54,717 [INFO] text2sql.sql_generator [sql_generator.py:125]: Query processing completed in 3.05s
2025-04-06 00:09:55,098 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:09:55] "GET /api/query/progress/afc37053-9c98-4d35-a387-ecd1c79599ae HTTP/1.1" 200 -
2025-04-06 00:10:19,785 [INFO] text2sql [app.py:138]: User explicitly specified tables: order_items
2025-04-06 00:10:19 - INFO - [app.py:138] - User explicitly specified tables: order_items
2025-04-06 00:10:19,786 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'get all order items'
2025-04-06 00:10:19,787 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:19] "POST /api/query HTTP/1.1" 200 -
2025-04-06 00:10:19,787 [INFO] text2sql.sql_generator [sql_generator.py:40]: User explicitly selected tables: order_items
2025-04-06 00:10:19,788 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'get all order items'
2025-04-06 00:10:19,789 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-06 00:10:19,790 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.00s
2025-04-06 00:10:19,790 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-06 00:10:19,791 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-06 00:10:19,791 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-06 00:10:19 - INFO - [database.py:44] - Attempting database connection
2025-04-06 00:10:19,793 [INFO] text2sql.database [database.py:48]: Database connection established in 0.00s
2025-04-06 00:10:19 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-06 00:10:19,794 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'get all order items'
2025-04-06 00:10:19,794 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: order_items
2025-04-06 00:10:19,795 [INFO] text2sql.agents.column [column_agent.py:38]: Only one table involved (order_items). Skipping LLM call and including all columns.
2025-04-06 00:10:19,795 [INFO] text2sql.feedback [feedback_manager.py:267]: Stage 1: Vector search for 'get all order items...'
2025-04-06 00:10:19 - INFO - [feedback_manager.py:267] - Stage 1: Vector search for 'get all order items...'
2025-04-06 00:10:19,825 [INFO] text2sql.feedback [feedback_manager.py:322]: Found 1 initial candidates from vector search
2025-04-06 00:10:19 - INFO - [feedback_manager.py:322] - Found 1 initial candidates from vector search
2025-04-06 00:10:19,826 [INFO] text2sql.feedback [feedback_manager.py:367]: Less than 3 candidates, skipping reranking
2025-04-06 00:10:19 - INFO - [feedback_manager.py:367] - Less than 3 candidates, skipping reranking
2025-04-06 00:10:19,827 [INFO] text2sql.sql_generator [sql_generator.py:280]: Found 1 similar queries with reranking
2025-04-06 00:10:19,827 [INFO] text2sql.sql_generator [sql_generator.py:302]: Added similar query #1 from feedback (score: 0.4191): get me all the customers...
2025-04-06 00:10:19,828 [INFO] text2sql.azure [azure_client.py:35]: SQL generation started for query: 'get all order items'
2025-04-06 00:10:19 - INFO - [azure_client.py:35] - SQL generation started for query: 'get all order items'
2025-04-06 00:10:19,828 [INFO] text2sql.azure [azure_client.py:69]: Including schema information (353 chars)
2025-04-06 00:10:19 - INFO - [azure_client.py:69] - Including schema information (353 chars)
2025-04-06 00:10:19,830 [INFO] text2sql.azure [azure_client.py:97]: Including 1 SQL examples from feedback similarity search
2025-04-06 00:10:19 - INFO - [azure_client.py:97] - Including 1 SQL examples from feedback similarity search
2025-04-06 00:10:19,831 [INFO] text2sql.azure [azure_client.py:114]: PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: order_items\nDescription: Individual items within each order\nColumns: item_id (INTEGER) - Unique order item identifier, order_id (INTEGER) - Reference to parent order, product_id (INTEGER) - Reference to purchased product, quantity (INTEGER) - Quantity of product ordered, price (REAL) - Price per unit at time of purchase\nPrimary Key(s): item_id\n"}, {'role': 'user', 'content': 'Here are some similar queries that were previously successful:\nQuestion: get me all the customers\nSQL: SELECT * FROM customers;\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get all order items'}]
2025-04-06 00:10:19 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: order_items\nDescription: Individual items within each order\nColumns: item_id (INTEGER) - Unique order item identifier, order_id (INTEGER) - Reference to parent order, product_id (INTEGER) - Reference to purchased product, quantity (INTEGER) - Quantity of product ordered, price (REAL) - Price per unit at time of purchase\nPrimary Key(s): item_id\n"}, {'role': 'user', 'content': 'Here are some similar queries that were previously successful:\nQuestion: get me all the customers\nSQL: SELECT * FROM customers;\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get all order items'}]
2025-04-06 00:10:19,832 [INFO] text2sql.llm_engine [llm_engine.py:55]: [SQL_GEN] Completion generation started
2025-04-06 00:10:19 - INFO - [llm_engine.py:55] - [SQL_GEN] Completion generation started
2025-04-06 00:10:20,300 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:20] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:21,072 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:21] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:21,319 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:21] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:21,757 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:21] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:22,550 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:22] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:22,808 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:22] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:23,224 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:23] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:24,019 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:24] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:24,260 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:24] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:24,679 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:24] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:25,475 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:25] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:25,723 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:25] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:26,144 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:26] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:26,924 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:26] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:27,182 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:27] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:27,597 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:27] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:28,376 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:28] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:28,620 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:28] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:29,043 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:29] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:29,834 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:29] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:30,068 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:30] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:30,495 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:30] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:31,291 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:31] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:31,545 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:31] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:31,949 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:31] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:32,746 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:32] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:33,005 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:33] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:33,432 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:33] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:34,231 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:34] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:34,476 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:34] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:34,897 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:34] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:35,702 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:35] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:36,093 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:36] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:37,378 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:37] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:38,047 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:38] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:38,654 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:38] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:38,902 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:38] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:39,329 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:39] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:40,133 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:40] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:40,381 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:40] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:41,390 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:41] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:42,211 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:42] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:42,468 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:42] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:42,897 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:42] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:43,689 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:43] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:43,942 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:43] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:44,579 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:44] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:45,903 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:45] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:46,576 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:46] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:47,896 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:47] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:48,573 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:48] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:49,888 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:49] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:50,563 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:50] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:51,833 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:51] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:52,508 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:52] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:53,769 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:53] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:54,462 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:54] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:55,745 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:55] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:56,417 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:56] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:57,695 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:57] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:58,377 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:58] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:10:59,608 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:10:59] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:11:00,288 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:11:00] "GET /api/query/progress/f6296d5d-86e9-4583-9014-62010d4f6493 HTTP/1.1" 200 -
2025-04-06 00:11:01,079 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-06 00:11:01,081 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-06 00:11:01,085 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-06 00:11:01,085 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-06 00:11:01,086 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-06 00:11:01 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-06 00:11:01,087 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-06 00:11:01 - INFO - [database.py:258] - Closing database connection
2025-04-06 00:11:01,088 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-06 00:11:01 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-06 00:34:32,843 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:34:32,845 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:34:32,845 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:34:32,846 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:34:32,847 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-06 00:34:32,857 [INFO] text2sql [app.py:66]: Debug logging enabled for SQL generator and agents
2025-04-06 00:34:32 - INFO - [app.py:66] - Debug logging enabled for SQL generator and agents
2025-04-06 00:34:32,859 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-06 00:34:32 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-06 00:34:32,859 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-06 00:34:32 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-06 00:34:32,863 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-06 00:34:32 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-06 00:34:32,863 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:34:32,864 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:34:32,864 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:34:32,864 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:34:32,864 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-06 00:34:32 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-06 00:34:32,864 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-06 00:34:32 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-06 00:34:32,864 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-06 00:34:32 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-06 00:34:32,865 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:34:32,865 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:34:32,865 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:34:32,865 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:34:32,865 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-06 00:34:32 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-06 00:34:32,865 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-06 00:34:32 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-06 00:34:32,866 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-06 00:34:32 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-06 00:34:32,866 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:34:32,866 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:34:32,866 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:34:32,866 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:34:32,867 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-06 00:34:32 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-06 00:34:32,867 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-06 00:34:32 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-06 00:34:32,867 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-06 00:34:32 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-06 00:34:32,869 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-06 00:34:32 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-06 00:34:32,869 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-06 00:34:32 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-06 00:34:32,869 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-06 00:34:32 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-06 00:34:32,869 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:34:32,869 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:34:32,869 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:34:32,870 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:34:32,870 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-06 00:34:32 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-06 00:34:33,004 [INFO] werkzeug [_internal.py:97]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.27.251.157:5000
2025-04-06 00:34:33,004 [INFO] werkzeug [_internal.py:97]: [33mPress CTRL+C to quit[0m
2025-04-06 00:34:33,016 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-06 00:34:36,229 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:34:36,229 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:34:36,229 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:34:36,230 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:34:36,230 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-06 00:34:36,241 [INFO] text2sql [app.py:66]: Debug logging enabled for SQL generator and agents
2025-04-06 00:34:36 - INFO - [app.py:66] - Debug logging enabled for SQL generator and agents
2025-04-06 00:34:36,242 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-06 00:34:36 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-06 00:34:36,242 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-06 00:34:36 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-06 00:34:36,245 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-06 00:34:36 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-06 00:34:36,245 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:34:36,245 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:34:36,245 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:34:36,245 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:34:36,245 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-06 00:34:36 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-06 00:34:36,246 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-06 00:34:36 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-06 00:34:36,246 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-06 00:34:36 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-06 00:34:36,246 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:34:36,246 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:34:36,247 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:34:36,247 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:34:36,247 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-06 00:34:36 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-06 00:34:36,247 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-06 00:34:36 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-06 00:34:36,248 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-06 00:34:36 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-06 00:34:36,248 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:34:36,248 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:34:36,248 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:34:36,248 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:34:36,248 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-06 00:34:36 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-06 00:34:36,249 [INFO] text2sql.llm_engine [llm_engine.py:27]: Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-06 00:34:36 - INFO - [llm_engine.py:27] - Initializing LLM Engine with endpoint: https://models.inference.ai.azure.com
2025-04-06 00:34:36,249 [INFO] text2sql.llm_engine [llm_engine.py:28]: Using model: Phi-3-small-8k-instruct
2025-04-06 00:34:36 - INFO - [llm_engine.py:28] - Using model: Phi-3-small-8k-instruct
2025-04-06 00:34:36,251 [INFO] text2sql.llm_engine [llm_engine.py:36]: LLM Engine initialized successfully
2025-04-06 00:34:36 - INFO - [llm_engine.py:36] - LLM Engine initialized successfully
2025-04-06 00:34:36,251 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-06 00:34:36 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-06 00:34:36,251 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-06 00:34:36 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-06 00:34:36,251 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:34:36,252 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:34:36,252 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:34:36,252 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:34:36,252 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-06 00:34:36 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-06 00:34:36,378 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-06 00:34:36,389 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-06 00:34:40,872 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:34:40] "GET / HTTP/1.1" 200 -
2025-04-06 00:34:40,900 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:34:40] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 00:34:41,219 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:34:41] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-06 00:34:41,221 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:34:41] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-06 00:34:41,226 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:34:41] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-06 00:34:41,231 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:34:41] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-06 00:34:41,233 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:34:41] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-06 00:34:41,235 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:34:41] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-06 00:34:41,535 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:34:41] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-06 00:34:41,542 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:34:41] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-06 00:34:42,012 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:34:42] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-06 00:34:42,025 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:34:42] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-04-06 00:34:45,880 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/llm_engine.py', reloading
2025-04-06 00:34:45,881 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/llm_engine.py', reloading
2025-04-06 00:34:45,882 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/llm_engine.py', reloading
2025-04-06 00:34:47,536 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-06 00:34:47,536 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-06 00:34:47,537 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-06 00:34:47,537 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-06 00:34:47,538 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-06 00:34:47 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-06 00:34:47,538 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-06 00:34:47 - INFO - [database.py:258] - Closing database connection
2025-04-06 00:34:47,539 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-06 00:34:47 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-06 00:34:48,511 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-06 00:34:52,562 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:34:52,562 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:34:52,563 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:34:52,563 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:34:52,563 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-06 00:34:52,570 [INFO] text2sql [app.py:66]: Debug logging enabled for SQL generator and agents
2025-04-06 00:34:52 - INFO - [app.py:66] - Debug logging enabled for SQL generator and agents
2025-04-06 00:34:52,572 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:34:52 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:34:52,572 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: google/gemini-2.5-pro-exp-03-25:free
2025-04-06 00:34:52 - INFO - [llm_engine.py:29] - Using model: google/gemini-2.5-pro-exp-03-25:free
2025-04-06 00:34:52,609 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-06 00:34:52 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-06 00:34:52,610 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:34:52,610 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:34:52,610 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:34:52,610 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:34:52,610 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:34:52 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:34:52,610 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: google/gemini-2.5-pro-exp-03-25:free
2025-04-06 00:34:52 - INFO - [llm_engine.py:29] - Using model: google/gemini-2.5-pro-exp-03-25:free
2025-04-06 00:34:52,639 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-06 00:34:52 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-06 00:34:52,639 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:34:52,639 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:34:52,640 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:34:52,640 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:34:52,640 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:34:52 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:34:52,640 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: google/gemini-2.5-pro-exp-03-25:free
2025-04-06 00:34:52 - INFO - [llm_engine.py:29] - Using model: google/gemini-2.5-pro-exp-03-25:free
2025-04-06 00:34:52,671 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-06 00:34:52 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-06 00:34:52,672 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:34:52,672 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:34:52,672 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:34:52,673 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:34:52,673 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-06 00:34:52 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-06 00:34:52,673 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:34:52 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:34:52,673 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: google/gemini-2.5-pro-exp-03-25:free
2025-04-06 00:34:52 - INFO - [llm_engine.py:29] - Using model: google/gemini-2.5-pro-exp-03-25:free
2025-04-06 00:34:52,702 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-06 00:34:52 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-06 00:34:52,702 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-06 00:34:52 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-06 00:34:52,702 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-06 00:34:52 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-06 00:34:52,703 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:34:52,703 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:34:52,703 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:34:52,703 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:34:52,703 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-06 00:34:52 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-06 00:34:52,723 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-06 00:34:52,724 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-06 00:35:29,762 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/config/config.py', reloading
2025-04-06 00:35:29,763 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/llm_engine.py', reloading
2025-04-06 00:35:29,764 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/config/config.py', reloading
2025-04-06 00:35:29,764 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/llm_engine.py', reloading
2025-04-06 00:35:29,765 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/config/config.py', reloading
2025-04-06 00:35:29,766 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/llm_engine.py', reloading
2025-04-06 00:35:30,767 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-06 00:35:30,767 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-06 00:35:30,768 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-06 00:35:30,768 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-06 00:35:30,769 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-06 00:35:30 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-06 00:35:30,770 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-06 00:35:30 - INFO - [database.py:258] - Closing database connection
2025-04-06 00:35:30,771 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-06 00:35:30 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-06 00:35:31,596 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-06 00:35:34,791 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:35:34,791 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:35:34,802 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:35:34,802 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:35:34,803 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-06 00:35:34,809 [INFO] text2sql [app.py:66]: Debug logging enabled for SQL generator and agents
2025-04-06 00:35:34 - INFO - [app.py:66] - Debug logging enabled for SQL generator and agents
2025-04-06 00:35:34,810 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:35:34 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:35:34,811 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: google/gemini-2.5-pro-exp-03-25:free
2025-04-06 00:35:34 - INFO - [llm_engine.py:29] - Using model: google/gemini-2.5-pro-exp-03-25:free
2025-04-06 00:35:34,841 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-06 00:35:34 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-06 00:35:34,841 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:35:34,841 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:35:34,841 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:35:34,841 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:35:34,842 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:35:34 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:35:34,842 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: google/gemini-2.5-pro-exp-03-25:free
2025-04-06 00:35:34 - INFO - [llm_engine.py:29] - Using model: google/gemini-2.5-pro-exp-03-25:free
2025-04-06 00:35:34,869 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-06 00:35:34 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-06 00:35:34,869 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:35:34,869 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:35:34,870 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:35:34,870 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:35:34,870 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:35:34 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:35:34,870 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: google/gemini-2.5-pro-exp-03-25:free
2025-04-06 00:35:34 - INFO - [llm_engine.py:29] - Using model: google/gemini-2.5-pro-exp-03-25:free
2025-04-06 00:35:34,898 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-06 00:35:34 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-06 00:35:34,898 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:35:34,899 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:35:34,899 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:35:34,899 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:35:34,899 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-06 00:35:34 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-06 00:35:34,899 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:35:34 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:35:34,899 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: google/gemini-2.5-pro-exp-03-25:free
2025-04-06 00:35:34 - INFO - [llm_engine.py:29] - Using model: google/gemini-2.5-pro-exp-03-25:free
2025-04-06 00:35:34,928 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-06 00:35:34 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-06 00:35:34,929 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-06 00:35:34 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-06 00:35:34,929 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-06 00:35:34 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-06 00:35:34,929 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:35:34,930 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:35:34,930 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:35:34,930 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:35:34,930 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-06 00:35:34 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-06 00:35:34,950 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-06 00:35:34,950 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-06 00:35:41,614 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-06 00:35:41,615 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-06 00:35:41,615 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-06 00:35:41,616 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-06 00:35:41,617 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-06 00:35:41 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-06 00:35:41,618 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-06 00:35:41 - INFO - [database.py:258] - Closing database connection
2025-04-06 00:35:41,618 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-06 00:35:41 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-06 00:35:51,324 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:35:51,324 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:35:51,325 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:35:51,325 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:35:51,325 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-06 00:35:51,331 [INFO] text2sql [app.py:66]: Debug logging enabled for SQL generator and agents
2025-04-06 00:35:51 - INFO - [app.py:66] - Debug logging enabled for SQL generator and agents
2025-04-06 00:35:51,331 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:35:51 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:35:51,332 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: google/gemini-2.5-pro-exp-03-25:free
2025-04-06 00:35:51 - INFO - [llm_engine.py:29] - Using model: google/gemini-2.5-pro-exp-03-25:free
2025-04-06 00:35:51,364 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-06 00:35:51 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-06 00:35:51,364 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:35:51,364 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:35:51,364 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:35:51,364 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:35:51,364 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:35:51 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:35:51,365 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: google/gemini-2.5-pro-exp-03-25:free
2025-04-06 00:35:51 - INFO - [llm_engine.py:29] - Using model: google/gemini-2.5-pro-exp-03-25:free
2025-04-06 00:35:51,393 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-06 00:35:51 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-06 00:35:51,393 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:35:51,393 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:35:51,393 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:35:51,394 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:35:51,394 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:35:51 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:35:51,394 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: google/gemini-2.5-pro-exp-03-25:free
2025-04-06 00:35:51 - INFO - [llm_engine.py:29] - Using model: google/gemini-2.5-pro-exp-03-25:free
2025-04-06 00:35:51,422 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-06 00:35:51 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-06 00:35:51,422 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:35:51,423 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:35:51,423 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:35:51,423 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:35:51,423 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-06 00:35:51 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-06 00:35:51,423 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:35:51 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:35:51,423 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: google/gemini-2.5-pro-exp-03-25:free
2025-04-06 00:35:51 - INFO - [llm_engine.py:29] - Using model: google/gemini-2.5-pro-exp-03-25:free
2025-04-06 00:35:51,451 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-06 00:35:51 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-06 00:35:51,452 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-06 00:35:51 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-06 00:35:51,452 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-06 00:35:51 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-06 00:35:51,452 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:35:51,452 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:35:51,452 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:35:51,452 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:35:51,453 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-06 00:35:51 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-06 00:35:51,472 [INFO] werkzeug [_internal.py:97]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.27.251.157:5000
2025-04-06 00:35:51,472 [INFO] werkzeug [_internal.py:97]: [33mPress CTRL+C to quit[0m
2025-04-06 00:35:51,474 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-06 00:35:55,572 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:35:55,573 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:35:55,573 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:35:55,573 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:35:55,574 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-06 00:35:55,581 [INFO] text2sql [app.py:66]: Debug logging enabled for SQL generator and agents
2025-04-06 00:35:55 - INFO - [app.py:66] - Debug logging enabled for SQL generator and agents
2025-04-06 00:35:55,582 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:35:55 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:35:55,582 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: google/gemini-2.5-pro-exp-03-25:free
2025-04-06 00:35:55 - INFO - [llm_engine.py:29] - Using model: google/gemini-2.5-pro-exp-03-25:free
2025-04-06 00:35:55,615 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-06 00:35:55 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-06 00:35:55,615 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:35:55,616 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:35:55,616 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:35:55,616 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:35:55,616 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:35:55 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:35:55,617 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: google/gemini-2.5-pro-exp-03-25:free
2025-04-06 00:35:55 - INFO - [llm_engine.py:29] - Using model: google/gemini-2.5-pro-exp-03-25:free
2025-04-06 00:35:55,660 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-06 00:35:55 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-06 00:35:55,661 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:35:55,661 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:35:55,661 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:35:55,661 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:35:55,661 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:35:55 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:35:55,661 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: google/gemini-2.5-pro-exp-03-25:free
2025-04-06 00:35:55 - INFO - [llm_engine.py:29] - Using model: google/gemini-2.5-pro-exp-03-25:free
2025-04-06 00:35:55,691 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-06 00:35:55 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-06 00:35:55,691 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:35:55,692 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:35:55,692 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:35:55,692 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:35:55,692 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-06 00:35:55 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-06 00:35:55,692 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:35:55 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:35:55,692 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: google/gemini-2.5-pro-exp-03-25:free
2025-04-06 00:35:55 - INFO - [llm_engine.py:29] - Using model: google/gemini-2.5-pro-exp-03-25:free
2025-04-06 00:35:55,723 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-06 00:35:55 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-06 00:35:55,723 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-06 00:35:55 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-06 00:35:55,724 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-06 00:35:55 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-06 00:35:55,724 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:35:55,724 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:35:55,725 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:35:55,725 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:35:55,725 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-06 00:35:55 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-06 00:35:55,746 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-06 00:35:55,746 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-06 00:36:03,114 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'get me all the customers'
2025-04-06 00:36:03,114 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:36:03] "POST /api/query HTTP/1.1" 200 -
2025-04-06 00:36:03,115 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'get me all the customers'
2025-04-06 00:36:03,117 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-06 00:36:03,118 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.00s
2025-04-06 00:36:03,118 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-06 00:36:03,119 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-06 00:36:03,119 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-06 00:36:03 - INFO - [database.py:44] - Attempting database connection
2025-04-06 00:36:03,121 [INFO] text2sql.database [database.py:48]: Database connection established in 0.00s
2025-04-06 00:36:03 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-06 00:36:03,122 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'get me all the customers'
2025-04-06 00:36:03,123 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (6): customers, products, orders, order_items, sales_metrics, db1.customers
2025-04-06 00:36:03,124 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-06 00:36:03,124 [INFO] text2sql.llm_engine [llm_engine.py:56]: [TABLE] Completion generation started
2025-04-06 00:36:03 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-06 00:36:03,635 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:36:03] "GET /api/query/progress/b6e203d4-c8c6-409c-91da-183b073f88e7 HTTP/1.1" 200 -
2025-04-06 00:36:04,762 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:36:04] "GET /api/query/progress/b6e203d4-c8c6-409c-91da-183b073f88e7 HTTP/1.1" 200 -
2025-04-06 00:36:05,438 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:36:05] "GET /api/query/progress/b6e203d4-c8c6-409c-91da-183b073f88e7 HTTP/1.1" 200 -
2025-04-06 00:36:06,725 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:36:06] "GET /api/query/progress/b6e203d4-c8c6-409c-91da-183b073f88e7 HTTP/1.1" 200 -
2025-04-06 00:36:07,373 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:36:07] "GET /api/query/progress/b6e203d4-c8c6-409c-91da-183b073f88e7 HTTP/1.1" 200 -
2025-04-06 00:36:08,487 [INFO] text2sql.llm_engine [llm_engine.py:119]: [TABLE] Completion generation completed in 5.36s
2025-04-06 00:36:08 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 5.36s
2025-04-06 00:36:08,489 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-06 00:36:08 - INFO - [llm_engine.py:120] - **************************
2025-04-06 00:36:08,493 [INFO] text2sql.agents.table [table_agent.py:69]: Raw model response: 'customers, db1.customers'
2025-04-06 00:36:08,494 [INFO] text2sql.agents.table [table_agent.py:90]: Table selection completed in 5.37s. Selected: customers, db1.customers
2025-04-06 00:36:08,495 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'get me all the customers'
2025-04-06 00:36:08,498 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: customers, db1.customers
2025-04-06 00:36:08,499 [INFO] text2sql.agents.column [column_agent.py:94]: Sending request to AI model for column selection
2025-04-06 00:36:08,500 [INFO] text2sql.llm_engine [llm_engine.py:56]: [COLUMN] Completion generation started
2025-04-06 00:36:08 - INFO - [llm_engine.py:56] - [COLUMN] Completion generation started
2025-04-06 00:36:08,681 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:36:08] "GET /api/query/progress/b6e203d4-c8c6-409c-91da-183b073f88e7 HTTP/1.1" 200 -
2025-04-06 00:36:09,332 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:36:09] "GET /api/query/progress/b6e203d4-c8c6-409c-91da-183b073f88e7 HTTP/1.1" 200 -
2025-04-06 00:36:10,607 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:36:10] "GET /api/query/progress/b6e203d4-c8c6-409c-91da-183b073f88e7 HTTP/1.1" 200 -
2025-04-06 00:36:11,258 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:36:11] "GET /api/query/progress/b6e203d4-c8c6-409c-91da-183b073f88e7 HTTP/1.1" 200 -
2025-04-06 00:36:12,542 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:36:12] "GET /api/query/progress/b6e203d4-c8c6-409c-91da-183b073f88e7 HTTP/1.1" 200 -
2025-04-06 00:36:13,208 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:36:13] "GET /api/query/progress/b6e203d4-c8c6-409c-91da-183b073f88e7 HTTP/1.1" 200 -
2025-04-06 00:36:14,478 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:36:14] "GET /api/query/progress/b6e203d4-c8c6-409c-91da-183b073f88e7 HTTP/1.1" 200 -
2025-04-06 00:36:15,126 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:36:15] "GET /api/query/progress/b6e203d4-c8c6-409c-91da-183b073f88e7 HTTP/1.1" 200 -
2025-04-06 00:36:16,424 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:36:16] "GET /api/query/progress/b6e203d4-c8c6-409c-91da-183b073f88e7 HTTP/1.1" 200 -
2025-04-06 00:36:17,077 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:36:17] "GET /api/query/progress/b6e203d4-c8c6-409c-91da-183b073f88e7 HTTP/1.1" 200 -
2025-04-06 00:36:18,265 [INFO] text2sql.llm_engine [llm_engine.py:119]: [COLUMN] Completion generation completed in 9.77s
2025-04-06 00:36:18 - INFO - [llm_engine.py:119] - [COLUMN] Completion generation completed in 9.77s
2025-04-06 00:36:18,266 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-06 00:36:18 - INFO - [llm_engine.py:120] - **************************
2025-04-06 00:36:18,269 [INFO] text2sql.agents.column [column_agent.py:99]: Raw model response: '```json
{
  "customers": [
    "customer_id",
    "first_name",
    "last_name",
    "email",
    "phone",
    "address",
    "city",
    "state",
    "country",
    "postal_code",
    "registration_date"
  ]
}
```'
2025-04-06 00:36:18,271 [INFO] text2sql.agents.column [column_agent.py:139]: Parsing column selection from model response
2025-04-06 00:36:18,272 [INFO] text2sql.agents.column [column_agent.py:149]: Parsed column selection JSON: {"customers": ["customer_id", "first_name", "last_name", "email", "phone", "address", "city", "state", "country", "postal_code", "registration_date"]}
2025-04-06 00:36:18,273 [INFO] text2sql.agents.column [column_agent.py:111]: Table 'customers': Pruned 0 columns, kept 11/11
2025-04-06 00:36:18,274 [INFO] text2sql.agents.column [column_agent.py:197]: Building pruned schema
2025-04-06 00:36:18,275 [INFO] text2sql.agents.column [column_agent.py:226]: Built pruned schema (576 chars)
2025-04-06 00:36:18,276 [INFO] text2sql.agents.column [column_agent.py:120]: Column pruning completed in 9.78s
2025-04-06 00:36:18,278 [INFO] text2sql.sql_generator [sql_generator.py:237]: Found 1 join conditions for the relevant tables
2025-04-06 00:36:18,279 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-06 00:36:18 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-06 00:36:18,282 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-06 00:36:18 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-06 00:36:18,286 [INFO] text2sql.feedback [feedback_manager.py:267]: Stage 1: Vector search for 'get me all the customers...'
2025-04-06 00:36:18 - INFO - [feedback_manager.py:267] - Stage 1: Vector search for 'get me all the customers...'
2025-04-06 00:36:18,288 [INFO] text2sql.feedback [feedback_manager.py:62]: Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-06 00:36:18 - INFO - [feedback_manager.py:62] - Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-06 00:36:18,368 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:36:18] "GET /api/query/progress/b6e203d4-c8c6-409c-91da-183b073f88e7 HTTP/1.1" 200 -
2025-04-06 00:36:19,052 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:36:19] "GET /api/query/progress/b6e203d4-c8c6-409c-91da-183b073f88e7 HTTP/1.1" 200 -
2025-04-06 00:36:20,335 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:36:20] "GET /api/query/progress/b6e203d4-c8c6-409c-91da-183b073f88e7 HTTP/1.1" 200 -
2025-04-06 00:36:21,025 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:36:21] "GET /api/query/progress/b6e203d4-c8c6-409c-91da-183b073f88e7 HTTP/1.1" 200 -
2025-04-06 00:36:21,193 [INFO] text2sql.feedback [feedback_manager.py:65]: Embedding model loaded in 2.90s
2025-04-06 00:36:21 - INFO - [feedback_manager.py:65] - Embedding model loaded in 2.90s
2025-04-06 00:36:21,388 [INFO] text2sql.feedback [feedback_manager.py:322]: Found 1 initial candidates from vector search
2025-04-06 00:36:21 - INFO - [feedback_manager.py:322] - Found 1 initial candidates from vector search
2025-04-06 00:36:21,388 [INFO] text2sql.feedback [feedback_manager.py:367]: Less than 3 candidates, skipping reranking
2025-04-06 00:36:21 - INFO - [feedback_manager.py:367] - Less than 3 candidates, skipping reranking
2025-04-06 00:36:21,390 [INFO] text2sql.sql_generator [sql_generator.py:280]: Found 1 similar queries with reranking
2025-04-06 00:36:21,390 [INFO] text2sql.sql_generator [sql_generator.py:302]: Added similar query #1 from feedback (score: 1.0000): get me all the customers...
2025-04-06 00:36:21,390 [INFO] text2sql.azure [azure_client.py:35]: SQL generation started for query: 'get me all the customers'
2025-04-06 00:36:21 - INFO - [azure_client.py:35] - SQL generation started for query: 'get me all the customers'
2025-04-06 00:36:21,391 [INFO] text2sql.azure [azure_client.py:69]: Including schema information (576 chars)
2025-04-06 00:36:21 - INFO - [azure_client.py:69] - Including schema information (576 chars)
2025-04-06 00:36:21,392 [INFO] text2sql.azure [azure_client.py:76]: Including 1 join conditions
2025-04-06 00:36:21 - INFO - [azure_client.py:76] - Including 1 join conditions
2025-04-06 00:36:21,393 [INFO] text2sql.azure [azure_client.py:97]: Including 1 SQL examples from feedback similarity search
2025-04-06 00:36:21 - INFO - [azure_client.py:97] - Including 1 SQL examples from feedback similarity search
2025-04-06 00:36:21,394 [INFO] text2sql.azure [azure_client.py:114]: PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER): Unique customer identifier, first_name (TEXT): Customer's first name, last_name (TEXT): Customer's last name, email (TEXT): Customer's email address (unique), phone (TEXT): Customer's phone number, address (TEXT): Customer's street address, city (TEXT): Customer's city, state (TEXT): Customer's state/province, country (TEXT): Customer's country, postal_code (TEXT): Customer's postal/zip code, registration_date (TEXT): Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Use the following pre-defined join conditions when joining these tables:\n- When joining customers with customers, use: LEFT JOIN customers ON a=a\n'}, {'role': 'user', 'content': 'Here are some similar queries that were previously successful:\nQuestion: get me all the customers\nSQL: SELECT * FROM customers;\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me all the customers'}]
2025-04-06 00:36:21 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER): Unique customer identifier, first_name (TEXT): Customer's first name, last_name (TEXT): Customer's last name, email (TEXT): Customer's email address (unique), phone (TEXT): Customer's phone number, address (TEXT): Customer's street address, city (TEXT): Customer's city, state (TEXT): Customer's state/province, country (TEXT): Customer's country, postal_code (TEXT): Customer's postal/zip code, registration_date (TEXT): Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Use the following pre-defined join conditions when joining these tables:\n- When joining customers with customers, use: LEFT JOIN customers ON a=a\n'}, {'role': 'user', 'content': 'Here are some similar queries that were previously successful:\nQuestion: get me all the customers\nSQL: SELECT * FROM customers;\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me all the customers'}]
2025-04-06 00:36:21,395 [INFO] text2sql.llm_engine [llm_engine.py:56]: [SQL_GEN] Completion generation started
2025-04-06 00:36:21 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-06 00:36:22,321 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:36:22] "GET /api/query/progress/b6e203d4-c8c6-409c-91da-183b073f88e7 HTTP/1.1" 200 -
2025-04-06 00:36:22,981 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:36:22] "GET /api/query/progress/b6e203d4-c8c6-409c-91da-183b073f88e7 HTTP/1.1" 200 -
2025-04-06 00:36:24,284 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:36:24] "GET /api/query/progress/b6e203d4-c8c6-409c-91da-183b073f88e7 HTTP/1.1" 200 -
2025-04-06 00:36:24,960 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:36:24] "GET /api/query/progress/b6e203d4-c8c6-409c-91da-183b073f88e7 HTTP/1.1" 200 -
2025-04-06 00:36:26,834 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:36:26] "GET /api/query/progress/b6e203d4-c8c6-409c-91da-183b073f88e7 HTTP/1.1" 200 -
2025-04-06 00:36:27,098 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:36:27] "GET /api/query/progress/b6e203d4-c8c6-409c-91da-183b073f88e7 HTTP/1.1" 200 -
2025-04-06 00:36:27,261 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:36:27] "GET /api/query/progress/b6e203d4-c8c6-409c-91da-183b073f88e7 HTTP/1.1" 200 -
2025-04-06 00:36:28,078 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:36:28] "GET /api/query/progress/b6e203d4-c8c6-409c-91da-183b073f88e7 HTTP/1.1" 200 -
2025-04-06 00:36:28,344 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:36:28] "GET /api/query/progress/b6e203d4-c8c6-409c-91da-183b073f88e7 HTTP/1.1" 200 -
2025-04-06 00:36:28,523 [INFO] text2sql.llm_engine [llm_engine.py:119]: [SQL_GEN] Completion generation completed in 7.13s
2025-04-06 00:36:28 - INFO - [llm_engine.py:119] - [SQL_GEN] Completion generation completed in 7.13s
2025-04-06 00:36:28,526 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-06 00:36:28 - INFO - [llm_engine.py:120] - **************************
2025-04-06 00:36:28,532 [INFO] text2sql.azure [azure_client.py:150]: Parsing SQL from model response
2025-04-06 00:36:28 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-06 00:36:28,535 [INFO] text2sql.azure [azure_client.py:157]: Found SQL code block in response
2025-04-06 00:36:28 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-06 00:36:28,538 [INFO] text2sql.azure [azure_client.py:171]: Extracted SQL query (24 chars) and explanation (88 chars)
2025-04-06 00:36:28 - INFO - [azure_client.py:171] - Extracted SQL query (24 chars) and explanation (88 chars)
2025-04-06 00:36:28,541 [INFO] text2sql.azure [azure_client.py:124]: Generated SQL: SELECT * FROM customers;
2025-04-06 00:36:28 - INFO - [azure_client.py:124] - Generated SQL: SELECT * FROM customers;
2025-04-06 00:36:28,544 [INFO] text2sql.azure [azure_client.py:132]: SQL generation completed in 7.15s
2025-04-06 00:36:28 - INFO - [azure_client.py:132] - SQL generation completed in 7.15s
2025-04-06 00:36:28,548 [INFO] text2sql.database [database.py:65]: Executing SQL query: SELECT * FROM customers;
2025-04-06 00:36:28 - INFO - [database.py:65] - Executing SQL query: SELECT * FROM customers;
2025-04-06 00:36:28,563 [INFO] text2sql.database [database.py:86]: Query returned 5 rows with 11 columns
2025-04-06 00:36:28 - INFO - [database.py:86] - Query returned 5 rows with 11 columns
2025-04-06 00:36:28,572 [INFO] text2sql.database [database.py:95]: Query processing completed in 0.02s
2025-04-06 00:36:28 - INFO - [database.py:95] - Query processing completed in 0.02s
2025-04-06 00:36:28,575 [INFO] text2sql.sql_generator [sql_generator.py:376]: SQL generation completed in 25.46s
2025-04-06 00:36:28,575 [INFO] text2sql.sql_generator [sql_generator.py:125]: Query processing completed in 25.46s
2025-04-06 00:36:28,774 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:36:28] "GET /api/query/progress/b6e203d4-c8c6-409c-91da-183b073f88e7 HTTP/1.1" 200 -
2025-04-06 00:37:06,649 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:37:06] "GET /admin/schema HTTP/1.1" 200 -
2025-04-06 00:37:06,875 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:37:06] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 00:37:06,982 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:37:06] "[36mGET /static/css/admin-schema.css HTTP/1.1[0m" 304 -
2025-04-06 00:37:06,989 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:37:06] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-06 00:37:06,991 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:37:06] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-06 00:37:06,992 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:37:06] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-06 00:37:06,993 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:37:06] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-06 00:37:07,175 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:37:07] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-06 00:37:07,295 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:37:07] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-06 00:37:07,297 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:37:07] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-06 00:37:07,300 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:37:07] "[36mGET /static/js/admin/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-06 00:37:07,301 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:37:07] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-06 00:37:07,622 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:37:07] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-06 00:37:07,624 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:37:07] "GET /admin/api/schema/workspaces HTTP/1.1" 200 -
2025-04-06 00:37:07,627 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:37:07] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-06 00:37:07,632 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:37:07] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-06 00:37:08,635 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:37:08] "GET /admin/api/schema/workspaces/dfd HTTP/1.1" 200 -
2025-04-06 00:37:13,502 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:37:13] "[31m[1mPOST /admin/api/schema/tables HTTP/1.1[0m" 409 -
2025-04-06 00:37:18,752 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:37:18] "[31m[1mPOST /admin/api/schema/tables HTTP/1.1[0m" 409 -
2025-04-06 00:38:21,731 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/config/config.py', reloading
2025-04-06 00:38:21,732 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/config/config.py', reloading
2025-04-06 00:38:21,734 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/config/config.py', reloading
2025-04-06 00:38:22,344 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/config/config.py', reloading
2025-04-06 00:38:22,344 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/config/config.py', reloading
2025-04-06 00:38:22,357 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/config/config.py', reloading
2025-04-06 00:38:23,358 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-06 00:38:23,359 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-06 00:38:23,359 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-06 00:38:23,360 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-06 00:38:23,360 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-06 00:38:23 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-06 00:38:23,361 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-06 00:38:23 - INFO - [database.py:258] - Closing database connection
2025-04-06 00:38:23,362 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-06 00:38:23 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-06 00:38:24,260 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-06 00:38:24,810 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-06 00:38:24,810 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-06 00:38:24,810 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-06 00:38:24,811 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-06 00:38:24,811 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-06 00:38:24 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-06 00:38:24,811 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-06 00:38:24 - INFO - [database.py:258] - Closing database connection
2025-04-06 00:38:24,812 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-06 00:38:24 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-06 00:38:30,060 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:38:30,060 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:38:30,060 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:38:30,060 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:38:30,061 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-06 00:38:30,067 [INFO] text2sql [app.py:66]: Debug logging enabled for SQL generator and agents
2025-04-06 00:38:30 - INFO - [app.py:66] - Debug logging enabled for SQL generator and agents
2025-04-06 00:38:30,068 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:38:30 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:38:30,068 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-06 00:38:30 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-06 00:38:30,098 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-06 00:38:30 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-06 00:38:30,099 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:38:30,099 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:38:30,099 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:38:30,099 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:38:30,099 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:38:30 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:38:30,100 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-06 00:38:30 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-06 00:38:30,127 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-06 00:38:30 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-06 00:38:30,127 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:38:30,128 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:38:30,128 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:38:30,128 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:38:30,128 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:38:30 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:38:30,128 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-06 00:38:30 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-06 00:38:30,157 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-06 00:38:30 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-06 00:38:30,157 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:38:30,157 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:38:30,157 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:38:30,157 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:38:30,158 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-06 00:38:30 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-06 00:38:30,158 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:38:30 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:38:30,158 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-06 00:38:30 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-06 00:38:30,185 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-06 00:38:30 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-06 00:38:30,185 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-06 00:38:30 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-06 00:38:30,185 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-06 00:38:30 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-06 00:38:30,185 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:38:30,186 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:38:30,186 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:38:30,186 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:38:30,186 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-06 00:38:30 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-06 00:38:30,205 [INFO] werkzeug [_internal.py:97]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.27.251.157:5000
2025-04-06 00:38:30,205 [INFO] werkzeug [_internal.py:97]: [33mPress CTRL+C to quit[0m
2025-04-06 00:38:30,208 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-06 00:38:33,570 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:38:33,570 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:38:33,570 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:38:33,570 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:38:33,571 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-06 00:38:33,576 [INFO] text2sql [app.py:66]: Debug logging enabled for SQL generator and agents
2025-04-06 00:38:33 - INFO - [app.py:66] - Debug logging enabled for SQL generator and agents
2025-04-06 00:38:33,577 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:38:33 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:38:33,577 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-06 00:38:33 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-06 00:38:33,606 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-06 00:38:33 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-06 00:38:33,606 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:38:33,607 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:38:33,607 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:38:33,607 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:38:33,607 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:38:33 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:38:33,607 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-06 00:38:33 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-06 00:38:33,635 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-06 00:38:33 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-06 00:38:33,635 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:38:33,635 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:38:33,635 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:38:33,635 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:38:33,635 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:38:33 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:38:33,636 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-06 00:38:33 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-06 00:38:33,663 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-06 00:38:33 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-06 00:38:33,663 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:38:33,664 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:38:33,664 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:38:33,664 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:38:33,664 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-06 00:38:33 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-06 00:38:33,664 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:38:33 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:38:33,664 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-06 00:38:33 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-06 00:38:33,692 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-06 00:38:33 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-06 00:38:33,692 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-06 00:38:33 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-06 00:38:33,692 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-06 00:38:33 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-06 00:38:33,693 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:38:33,693 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:38:33,693 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:38:33,693 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:38:33,693 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-06 00:38:33 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-06 00:38:33,712 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-06 00:38:33,712 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-06 00:38:41,344 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:38:41] "GET / HTTP/1.1" 200 -
2025-04-06 00:38:41,562 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:38:41] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 00:38:41,682 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:38:41] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-06 00:38:41,709 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:38:41] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-06 00:38:41,710 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:38:41] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-06 00:38:41,711 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:38:41] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-06 00:38:41,712 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:38:41] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-06 00:38:41,873 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:38:41] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-06 00:38:41,990 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:38:41] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-06 00:38:42,015 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:38:42] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-06 00:38:42,334 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:38:42] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-06 00:38:46,765 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'get me all the customers'
2025-04-06 00:38:46,766 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:38:46] "POST /api/query HTTP/1.1" 200 -
2025-04-06 00:38:46,766 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'get me all the customers'
2025-04-06 00:38:46,769 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-06 00:38:46,770 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.00s
2025-04-06 00:38:46,771 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-06 00:38:46,772 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-06 00:38:46,773 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-06 00:38:46 - INFO - [database.py:44] - Attempting database connection
2025-04-06 00:38:46,775 [INFO] text2sql.database [database.py:48]: Database connection established in 0.00s
2025-04-06 00:38:46 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-06 00:38:46,777 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'get me all the customers'
2025-04-06 00:38:46,778 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (6): customers, products, orders, order_items, sales_metrics, db1.customers
2025-04-06 00:38:46,779 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-06 00:38:46,779 [INFO] text2sql.llm_engine [llm_engine.py:56]: [TABLE] Completion generation started
2025-04-06 00:38:46 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-06 00:38:47,583 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:38:47] "GET /api/query/progress/00f0b612-fa2b-402e-bf88-610f9a6aa5ae HTTP/1.1" 200 -
2025-04-06 00:38:47,834 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:38:47] "GET /api/query/progress/00f0b612-fa2b-402e-bf88-610f9a6aa5ae HTTP/1.1" 200 -
2025-04-06 00:38:48,252 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:38:48] "GET /api/query/progress/00f0b612-fa2b-402e-bf88-610f9a6aa5ae HTTP/1.1" 200 -
2025-04-06 00:38:48,376 [INFO] text2sql.llm_engine [llm_engine.py:119]: [TABLE] Completion generation completed in 1.60s
2025-04-06 00:38:48 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 1.60s
2025-04-06 00:38:48,377 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-06 00:38:48 - INFO - [llm_engine.py:120] - **************************
2025-04-06 00:38:48,378 [INFO] text2sql.agents.table [table_agent.py:69]: Raw model response: 'customers'
2025-04-06 00:38:48,379 [INFO] text2sql.agents.table [table_agent.py:90]: Table selection completed in 1.60s. Selected: customers
2025-04-06 00:38:48,379 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'get me all the customers'
2025-04-06 00:38:48,379 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: customers
2025-04-06 00:38:48,380 [INFO] text2sql.agents.column [column_agent.py:38]: Only one table involved (customers). Skipping LLM call and including all columns.
2025-04-06 00:38:48,380 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-06 00:38:48 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-06 00:38:48,381 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-06 00:38:48 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-06 00:38:48,383 [INFO] text2sql.feedback [feedback_manager.py:267]: Stage 1: Vector search for 'get me all the customers...'
2025-04-06 00:38:48 - INFO - [feedback_manager.py:267] - Stage 1: Vector search for 'get me all the customers...'
2025-04-06 00:38:48,384 [INFO] text2sql.feedback [feedback_manager.py:62]: Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-06 00:38:48 - INFO - [feedback_manager.py:62] - Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-06 00:38:49,030 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:38:49] "GET /api/query/progress/00f0b612-fa2b-402e-bf88-610f9a6aa5ae HTTP/1.1" 200 -
2025-04-06 00:38:49,287 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:38:49] "GET /api/query/progress/00f0b612-fa2b-402e-bf88-610f9a6aa5ae HTTP/1.1" 200 -
2025-04-06 00:38:49,711 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:38:49] "GET /api/query/progress/00f0b612-fa2b-402e-bf88-610f9a6aa5ae HTTP/1.1" 200 -
2025-04-06 00:38:50,499 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:38:50] "GET /api/query/progress/00f0b612-fa2b-402e-bf88-610f9a6aa5ae HTTP/1.1" 200 -
2025-04-06 00:38:50,746 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:38:50] "GET /api/query/progress/00f0b612-fa2b-402e-bf88-610f9a6aa5ae HTTP/1.1" 200 -
2025-04-06 00:38:51,180 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:38:51] "GET /api/query/progress/00f0b612-fa2b-402e-bf88-610f9a6aa5ae HTTP/1.1" 200 -
2025-04-06 00:38:51,341 [INFO] text2sql.feedback [feedback_manager.py:65]: Embedding model loaded in 2.96s
2025-04-06 00:38:51 - INFO - [feedback_manager.py:65] - Embedding model loaded in 2.96s
2025-04-06 00:38:51,408 [INFO] text2sql.feedback [feedback_manager.py:322]: Found 1 initial candidates from vector search
2025-04-06 00:38:51 - INFO - [feedback_manager.py:322] - Found 1 initial candidates from vector search
2025-04-06 00:38:51,408 [INFO] text2sql.feedback [feedback_manager.py:367]: Less than 3 candidates, skipping reranking
2025-04-06 00:38:51 - INFO - [feedback_manager.py:367] - Less than 3 candidates, skipping reranking
2025-04-06 00:38:51,409 [INFO] text2sql.sql_generator [sql_generator.py:280]: Found 1 similar queries with reranking
2025-04-06 00:38:51,410 [INFO] text2sql.sql_generator [sql_generator.py:302]: Added similar query #1 from feedback (score: 1.0000): get me all the customers...
2025-04-06 00:38:51,411 [INFO] text2sql.azure [azure_client.py:35]: SQL generation started for query: 'get me all the customers'
2025-04-06 00:38:51 - INFO - [azure_client.py:35] - SQL generation started for query: 'get me all the customers'
2025-04-06 00:38:51,411 [INFO] text2sql.azure [azure_client.py:69]: Including schema information (587 chars)
2025-04-06 00:38:51 - INFO - [azure_client.py:69] - Including schema information (587 chars)
2025-04-06 00:38:51,413 [INFO] text2sql.azure [azure_client.py:97]: Including 1 SQL examples from feedback similarity search
2025-04-06 00:38:51 - INFO - [azure_client.py:97] - Including 1 SQL examples from feedback similarity search
2025-04-06 00:38:51,414 [INFO] text2sql.azure [azure_client.py:114]: PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some similar queries that were previously successful:\nQuestion: get me all the customers\nSQL: SELECT * FROM customers;\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me all the customers'}]
2025-04-06 00:38:51 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some similar queries that were previously successful:\nQuestion: get me all the customers\nSQL: SELECT * FROM customers;\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me all the customers'}]
2025-04-06 00:38:51,415 [INFO] text2sql.llm_engine [llm_engine.py:56]: [SQL_GEN] Completion generation started
2025-04-06 00:38:51 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-06 00:38:51,964 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:38:51] "GET /api/query/progress/00f0b612-fa2b-402e-bf88-610f9a6aa5ae HTTP/1.1" 200 -
2025-04-06 00:38:52,216 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:38:52] "GET /api/query/progress/00f0b612-fa2b-402e-bf88-610f9a6aa5ae HTTP/1.1" 200 -
2025-04-06 00:38:52,628 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:38:52] "GET /api/query/progress/00f0b612-fa2b-402e-bf88-610f9a6aa5ae HTTP/1.1" 200 -
2025-04-06 00:38:53,429 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:38:53] "GET /api/query/progress/00f0b612-fa2b-402e-bf88-610f9a6aa5ae HTTP/1.1" 200 -
2025-04-06 00:38:53,586 [INFO] text2sql.llm_engine [llm_engine.py:119]: [SQL_GEN] Completion generation completed in 2.17s
2025-04-06 00:38:53 - INFO - [llm_engine.py:119] - [SQL_GEN] Completion generation completed in 2.17s
2025-04-06 00:38:53,589 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-06 00:38:53 - INFO - [llm_engine.py:120] - **************************
2025-04-06 00:38:53,597 [INFO] text2sql.azure [azure_client.py:150]: Parsing SQL from model response
2025-04-06 00:38:53 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-06 00:38:53,604 [INFO] text2sql.azure [azure_client.py:157]: Found SQL code block in response
2025-04-06 00:38:53 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-06 00:38:53,611 [INFO] text2sql.azure [azure_client.py:171]: Extracted SQL query (24 chars) and explanation (102 chars)
2025-04-06 00:38:53 - INFO - [azure_client.py:171] - Extracted SQL query (24 chars) and explanation (102 chars)
2025-04-06 00:38:53,613 [INFO] text2sql.azure [azure_client.py:124]: Generated SQL: SELECT *
FROM customers;
2025-04-06 00:38:53 - INFO - [azure_client.py:124] - Generated SQL: SELECT *
FROM customers;
2025-04-06 00:38:53,621 [INFO] text2sql.azure [azure_client.py:132]: SQL generation completed in 2.21s
2025-04-06 00:38:53 - INFO - [azure_client.py:132] - SQL generation completed in 2.21s
2025-04-06 00:38:53,625 [INFO] text2sql.database [database.py:65]: Executing SQL query: SELECT *
FROM customers;
2025-04-06 00:38:53 - INFO - [database.py:65] - Executing SQL query: SELECT *
FROM customers;
2025-04-06 00:38:53,633 [INFO] text2sql.database [database.py:86]: Query returned 5 rows with 11 columns
2025-04-06 00:38:53 - INFO - [database.py:86] - Query returned 5 rows with 11 columns
2025-04-06 00:38:53,640 [INFO] text2sql.database [database.py:95]: Query processing completed in 0.01s
2025-04-06 00:38:53 - INFO - [database.py:95] - Query processing completed in 0.01s
2025-04-06 00:38:53,644 [INFO] text2sql.sql_generator [sql_generator.py:376]: SQL generation completed in 6.87s
2025-04-06 00:38:53,645 [INFO] text2sql.sql_generator [sql_generator.py:125]: Query processing completed in 6.88s
2025-04-06 00:38:53,660 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:38:53] "GET /api/query/progress/00f0b612-fa2b-402e-bf88-610f9a6aa5ae HTTP/1.1" 200 -
2025-04-06 00:41:28,736 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/config/config.py', reloading
2025-04-06 00:41:28,738 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/config/config.py', reloading
2025-04-06 00:41:28,739 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/config/config.py', reloading
2025-04-06 00:41:29,065 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/config/config.py', reloading
2025-04-06 00:41:29,068 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/config/config.py', reloading
2025-04-06 00:41:29,075 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/config/config.py', reloading
2025-04-06 00:41:30,078 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-06 00:41:30,079 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-06 00:41:30,080 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-06 00:41:30,081 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-06 00:41:30,081 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-06 00:41:30 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-06 00:41:30,082 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-06 00:41:30 - INFO - [database.py:258] - Closing database connection
2025-04-06 00:41:30,085 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-06 00:41:30 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-06 00:41:31,006 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-06 00:41:34,435 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:41:34,435 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:41:34,436 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:41:34,436 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:41:34,436 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-06 00:41:34,443 [INFO] text2sql [app.py:66]: Debug logging enabled for SQL generator and agents
2025-04-06 00:41:34 - INFO - [app.py:66] - Debug logging enabled for SQL generator and agents
2025-04-06 00:41:34,444 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:41:34 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:41:34,444 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: google/gemini-2.0-flash-exp:free
2025-04-06 00:41:34 - INFO - [llm_engine.py:29] - Using model: google/gemini-2.0-flash-exp:free
2025-04-06 00:41:34,474 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-06 00:41:34 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-06 00:41:34,474 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:41:34,475 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:41:34,475 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:41:34,475 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:41:34,475 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:41:34 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:41:34,475 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: google/gemini-2.0-flash-exp:free
2025-04-06 00:41:34 - INFO - [llm_engine.py:29] - Using model: google/gemini-2.0-flash-exp:free
2025-04-06 00:41:34,504 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-06 00:41:34 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-06 00:41:34,504 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:41:34,504 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:41:34,505 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:41:34,505 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:41:34,505 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:41:34 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:41:34,505 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: google/gemini-2.0-flash-exp:free
2025-04-06 00:41:34 - INFO - [llm_engine.py:29] - Using model: google/gemini-2.0-flash-exp:free
2025-04-06 00:41:34,534 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-06 00:41:34 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-06 00:41:34,535 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:41:34,535 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:41:34,535 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:41:34,535 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:41:34,535 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-06 00:41:34 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-06 00:41:34,536 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:41:34 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:41:34,536 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: google/gemini-2.0-flash-exp:free
2025-04-06 00:41:34 - INFO - [llm_engine.py:29] - Using model: google/gemini-2.0-flash-exp:free
2025-04-06 00:41:34,566 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-06 00:41:34 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-06 00:41:34,566 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-06 00:41:34 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-06 00:41:34,566 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-06 00:41:34 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-06 00:41:34,566 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:41:34,567 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:41:34,567 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:41:34,567 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:41:34,567 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-06 00:41:34 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-06 00:41:34,588 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-06 00:41:34,589 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-06 00:41:49,955 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'get me all the customers'
2025-04-06 00:41:49,956 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:41:49] "POST /api/query HTTP/1.1" 200 -
2025-04-06 00:41:49,956 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'get me all the customers'
2025-04-06 00:41:49,958 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-06 00:41:49,958 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.00s
2025-04-06 00:41:49,959 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-06 00:41:49,959 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-06 00:41:49,960 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-06 00:41:49 - INFO - [database.py:44] - Attempting database connection
2025-04-06 00:41:49,961 [INFO] text2sql.database [database.py:48]: Database connection established in 0.00s
2025-04-06 00:41:49 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-06 00:41:49,962 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'get me all the customers'
2025-04-06 00:41:49,963 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (6): customers, products, orders, order_items, sales_metrics, db1.customers
2025-04-06 00:41:49,963 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-06 00:41:49,964 [INFO] text2sql.llm_engine [llm_engine.py:56]: [TABLE] Completion generation started
2025-04-06 00:41:49 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-06 00:41:50,458 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:41:50] "GET /api/query/progress/d04dd283-8a65-4f62-bb9d-d65059b994b5 HTTP/1.1" 200 -
2025-04-06 00:41:51,249 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:41:51] "GET /api/query/progress/d04dd283-8a65-4f62-bb9d-d65059b994b5 HTTP/1.1" 200 -
2025-04-06 00:41:51,498 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:41:51] "GET /api/query/progress/d04dd283-8a65-4f62-bb9d-d65059b994b5 HTTP/1.1" 200 -
2025-04-06 00:41:51,930 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:41:51] "GET /api/query/progress/d04dd283-8a65-4f62-bb9d-d65059b994b5 HTTP/1.1" 200 -
2025-04-06 00:41:52,733 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:41:52] "GET /api/query/progress/d04dd283-8a65-4f62-bb9d-d65059b994b5 HTTP/1.1" 200 -
2025-04-06 00:41:52,978 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:41:52] "GET /api/query/progress/d04dd283-8a65-4f62-bb9d-d65059b994b5 HTTP/1.1" 200 -
2025-04-06 00:41:53,966 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:41:53] "GET /api/query/progress/d04dd283-8a65-4f62-bb9d-d65059b994b5 HTTP/1.1" 200 -
2025-04-06 00:41:55,898 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:41:55] "GET /api/query/progress/d04dd283-8a65-4f62-bb9d-d65059b994b5 HTTP/1.1" 200 -
2025-04-06 00:41:55,986 [INFO] text2sql.llm_engine [llm_engine.py:119]: [TABLE] Completion generation completed in 6.02s
2025-04-06 00:41:55 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 6.02s
2025-04-06 00:41:55,987 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-06 00:41:55 - INFO - [llm_engine.py:120] - **************************
2025-04-06 00:41:55,987 [INFO] text2sql.agents.table [table_agent.py:69]: Raw model response: 'customers, db1.customers'
2025-04-06 00:41:55,988 [INFO] text2sql.agents.table [table_agent.py:90]: Table selection completed in 6.03s. Selected: customers, db1.customers
2025-04-06 00:41:55,989 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'get me all the customers'
2025-04-06 00:41:55,989 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: customers, db1.customers
2025-04-06 00:41:55,989 [INFO] text2sql.agents.column [column_agent.py:94]: Sending request to AI model for column selection
2025-04-06 00:41:55,990 [INFO] text2sql.llm_engine [llm_engine.py:56]: [COLUMN] Completion generation started
2025-04-06 00:41:55 - INFO - [llm_engine.py:56] - [COLUMN] Completion generation started
2025-04-06 00:41:56,566 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:41:56] "GET /api/query/progress/d04dd283-8a65-4f62-bb9d-d65059b994b5 HTTP/1.1" 200 -
2025-04-06 00:41:57,856 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:41:57] "GET /api/query/progress/d04dd283-8a65-4f62-bb9d-d65059b994b5 HTTP/1.1" 200 -
2025-04-06 00:41:58,526 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:41:58] "GET /api/query/progress/d04dd283-8a65-4f62-bb9d-d65059b994b5 HTTP/1.1" 200 -
2025-04-06 00:41:59,823 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:41:59] "GET /api/query/progress/d04dd283-8a65-4f62-bb9d-d65059b994b5 HTTP/1.1" 200 -
2025-04-06 00:42:00,502 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:42:00] "GET /api/query/progress/d04dd283-8a65-4f62-bb9d-d65059b994b5 HTTP/1.1" 200 -
2025-04-06 00:42:01,804 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:42:01] "GET /api/query/progress/d04dd283-8a65-4f62-bb9d-d65059b994b5 HTTP/1.1" 200 -
2025-04-06 00:42:02,447 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:42:02] "GET /api/query/progress/d04dd283-8a65-4f62-bb9d-d65059b994b5 HTTP/1.1" 200 -
2025-04-06 00:42:03,739 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:42:03] "GET /api/query/progress/d04dd283-8a65-4f62-bb9d-d65059b994b5 HTTP/1.1" 200 -
2025-04-06 00:42:04,425 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:42:04] "GET /api/query/progress/d04dd283-8a65-4f62-bb9d-d65059b994b5 HTTP/1.1" 200 -
2025-04-06 00:42:05,711 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:42:05] "GET /api/query/progress/d04dd283-8a65-4f62-bb9d-d65059b994b5 HTTP/1.1" 200 -
2025-04-06 00:42:06,376 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:42:06] "GET /api/query/progress/d04dd283-8a65-4f62-bb9d-d65059b994b5 HTTP/1.1" 200 -
2025-04-06 00:42:07,665 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:42:07] "GET /api/query/progress/d04dd283-8a65-4f62-bb9d-d65059b994b5 HTTP/1.1" 200 -
2025-04-06 00:42:08,342 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:42:08] "GET /api/query/progress/d04dd283-8a65-4f62-bb9d-d65059b994b5 HTTP/1.1" 200 -
2025-04-06 00:42:09,638 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:42:09] "GET /api/query/progress/d04dd283-8a65-4f62-bb9d-d65059b994b5 HTTP/1.1" 200 -
2025-04-06 00:42:10,306 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:42:10] "GET /api/query/progress/d04dd283-8a65-4f62-bb9d-d65059b994b5 HTTP/1.1" 200 -
2025-04-06 00:42:10,757 [INFO] text2sql.llm_engine [llm_engine.py:119]: [COLUMN] Completion generation completed in 14.77s
2025-04-06 00:42:10 - INFO - [llm_engine.py:119] - [COLUMN] Completion generation completed in 14.77s
2025-04-06 00:42:10,758 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-06 00:42:10 - INFO - [llm_engine.py:120] - **************************
2025-04-06 00:42:10,760 [INFO] text2sql.agents.column [column_agent.py:99]: Raw model response: '```json
{
    "customers": [
        "customer_id",
        "first_name",
        "last_name",
        "email",
        "phone",
        "address",
        "city",
        "state",
        "country",
        "postal_code",
        "registration_date"
    ]
}
```'
2025-04-06 00:42:10,760 [INFO] text2sql.agents.column [column_agent.py:139]: Parsing column selection from model response
2025-04-06 00:42:10,761 [INFO] text2sql.agents.column [column_agent.py:149]: Parsed column selection JSON: {"customers": ["customer_id", "first_name", "last_name", "email", "phone", "address", "city", "state", "country", "postal_code", "registration_date"]}
2025-04-06 00:42:10,761 [INFO] text2sql.agents.column [column_agent.py:111]: Table 'customers': Pruned 0 columns, kept 11/11
2025-04-06 00:42:10,762 [INFO] text2sql.agents.column [column_agent.py:197]: Building pruned schema
2025-04-06 00:42:10,763 [INFO] text2sql.agents.column [column_agent.py:226]: Built pruned schema (576 chars)
2025-04-06 00:42:10,764 [INFO] text2sql.agents.column [column_agent.py:120]: Column pruning completed in 14.78s
2025-04-06 00:42:10,764 [INFO] text2sql.sql_generator [sql_generator.py:237]: Found 1 join conditions for the relevant tables
2025-04-06 00:42:10,765 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-06 00:42:10 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-06 00:42:10,766 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-06 00:42:10 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-06 00:42:10,768 [INFO] text2sql.feedback [feedback_manager.py:267]: Stage 1: Vector search for 'get me all the customers...'
2025-04-06 00:42:10 - INFO - [feedback_manager.py:267] - Stage 1: Vector search for 'get me all the customers...'
2025-04-06 00:42:10,769 [INFO] text2sql.feedback [feedback_manager.py:62]: Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-06 00:42:10 - INFO - [feedback_manager.py:62] - Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-06 00:42:11,595 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:42:11] "GET /api/query/progress/d04dd283-8a65-4f62-bb9d-d65059b994b5 HTTP/1.1" 200 -
2025-04-06 00:42:11,848 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:42:11] "GET /api/query/progress/d04dd283-8a65-4f62-bb9d-d65059b994b5 HTTP/1.1" 200 -
2025-04-06 00:42:12,192 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:42:12] "GET /api/query/progress/d04dd283-8a65-4f62-bb9d-d65059b994b5 HTTP/1.1" 200 -
2025-04-06 00:42:13,558 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:42:13] "GET /api/query/progress/d04dd283-8a65-4f62-bb9d-d65059b994b5 HTTP/1.1" 200 -
2025-04-06 00:42:13,808 [INFO] text2sql.feedback [feedback_manager.py:65]: Embedding model loaded in 3.04s
2025-04-06 00:42:13 - INFO - [feedback_manager.py:65] - Embedding model loaded in 3.04s
2025-04-06 00:42:13,860 [INFO] text2sql.feedback [feedback_manager.py:322]: Found 1 initial candidates from vector search
2025-04-06 00:42:13 - INFO - [feedback_manager.py:322] - Found 1 initial candidates from vector search
2025-04-06 00:42:13,861 [INFO] text2sql.feedback [feedback_manager.py:367]: Less than 3 candidates, skipping reranking
2025-04-06 00:42:13 - INFO - [feedback_manager.py:367] - Less than 3 candidates, skipping reranking
2025-04-06 00:42:13,861 [INFO] text2sql.sql_generator [sql_generator.py:280]: Found 1 similar queries with reranking
2025-04-06 00:42:13,862 [INFO] text2sql.sql_generator [sql_generator.py:302]: Added similar query #1 from feedback (score: 1.0000): get me all the customers...
2025-04-06 00:42:13,862 [INFO] text2sql.azure [azure_client.py:35]: SQL generation started for query: 'get me all the customers'
2025-04-06 00:42:13 - INFO - [azure_client.py:35] - SQL generation started for query: 'get me all the customers'
2025-04-06 00:42:13,863 [INFO] text2sql.azure [azure_client.py:69]: Including schema information (576 chars)
2025-04-06 00:42:13 - INFO - [azure_client.py:69] - Including schema information (576 chars)
2025-04-06 00:42:13,864 [INFO] text2sql.azure [azure_client.py:76]: Including 1 join conditions
2025-04-06 00:42:13 - INFO - [azure_client.py:76] - Including 1 join conditions
2025-04-06 00:42:13,865 [INFO] text2sql.azure [azure_client.py:97]: Including 1 SQL examples from feedback similarity search
2025-04-06 00:42:13 - INFO - [azure_client.py:97] - Including 1 SQL examples from feedback similarity search
2025-04-06 00:42:13,866 [INFO] text2sql.azure [azure_client.py:114]: PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER): Unique customer identifier, first_name (TEXT): Customer's first name, last_name (TEXT): Customer's last name, email (TEXT): Customer's email address (unique), phone (TEXT): Customer's phone number, address (TEXT): Customer's street address, city (TEXT): Customer's city, state (TEXT): Customer's state/province, country (TEXT): Customer's country, postal_code (TEXT): Customer's postal/zip code, registration_date (TEXT): Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Use the following pre-defined join conditions when joining these tables:\n- When joining customers with customers, use: LEFT JOIN customers ON a=a\n'}, {'role': 'user', 'content': 'Here are some similar queries that were previously successful:\nQuestion: get me all the customers\nSQL: SELECT * FROM customers;\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me all the customers'}]
2025-04-06 00:42:13 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER): Unique customer identifier, first_name (TEXT): Customer's first name, last_name (TEXT): Customer's last name, email (TEXT): Customer's email address (unique), phone (TEXT): Customer's phone number, address (TEXT): Customer's street address, city (TEXT): Customer's city, state (TEXT): Customer's state/province, country (TEXT): Customer's country, postal_code (TEXT): Customer's postal/zip code, registration_date (TEXT): Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Use the following pre-defined join conditions when joining these tables:\n- When joining customers with customers, use: LEFT JOIN customers ON a=a\n'}, {'role': 'user', 'content': 'Here are some similar queries that were previously successful:\nQuestion: get me all the customers\nSQL: SELECT * FROM customers;\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me all the customers'}]
2025-04-06 00:42:13,867 [INFO] text2sql.llm_engine [llm_engine.py:56]: [SQL_GEN] Completion generation started
2025-04-06 00:42:13 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-06 00:42:14,224 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:42:14] "GET /api/query/progress/d04dd283-8a65-4f62-bb9d-d65059b994b5 HTTP/1.1" 200 -
2025-04-06 00:42:15,511 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:42:15] "GET /api/query/progress/d04dd283-8a65-4f62-bb9d-d65059b994b5 HTTP/1.1" 200 -
2025-04-06 00:42:16,169 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:42:16] "GET /api/query/progress/d04dd283-8a65-4f62-bb9d-d65059b994b5 HTTP/1.1" 200 -
2025-04-06 00:42:16,629 [INFO] text2sql.llm_engine [llm_engine.py:119]: [SQL_GEN] Completion generation completed in 2.76s
2025-04-06 00:42:16 - INFO - [llm_engine.py:119] - [SQL_GEN] Completion generation completed in 2.76s
2025-04-06 00:42:16,631 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-06 00:42:16 - INFO - [llm_engine.py:120] - **************************
2025-04-06 00:42:16,634 [INFO] text2sql.azure [azure_client.py:150]: Parsing SQL from model response
2025-04-06 00:42:16 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-06 00:42:16,636 [INFO] text2sql.azure [azure_client.py:157]: Found SQL code block in response
2025-04-06 00:42:16 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-06 00:42:16,639 [INFO] text2sql.azure [azure_client.py:171]: Extracted SQL query (24 chars) and explanation (128 chars)
2025-04-06 00:42:16 - INFO - [azure_client.py:171] - Extracted SQL query (24 chars) and explanation (128 chars)
2025-04-06 00:42:16,641 [INFO] text2sql.azure [azure_client.py:124]: Generated SQL: SELECT * FROM customers;
2025-04-06 00:42:16 - INFO - [azure_client.py:124] - Generated SQL: SELECT * FROM customers;
2025-04-06 00:42:16,643 [INFO] text2sql.azure [azure_client.py:132]: SQL generation completed in 2.78s
2025-04-06 00:42:16 - INFO - [azure_client.py:132] - SQL generation completed in 2.78s
2025-04-06 00:42:16,645 [INFO] text2sql.database [database.py:65]: Executing SQL query: SELECT * FROM customers;
2025-04-06 00:42:16 - INFO - [database.py:65] - Executing SQL query: SELECT * FROM customers;
2025-04-06 00:42:16,650 [INFO] text2sql.database [database.py:86]: Query returned 5 rows with 11 columns
2025-04-06 00:42:16 - INFO - [database.py:86] - Query returned 5 rows with 11 columns
2025-04-06 00:42:16,655 [INFO] text2sql.database [database.py:95]: Query processing completed in 0.01s
2025-04-06 00:42:16 - INFO - [database.py:95] - Query processing completed in 0.01s
2025-04-06 00:42:16,658 [INFO] text2sql.sql_generator [sql_generator.py:376]: SQL generation completed in 26.70s
2025-04-06 00:42:16,659 [INFO] text2sql.sql_generator [sql_generator.py:125]: Query processing completed in 26.70s
2025-04-06 00:42:17,468 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:42:17] "GET /api/query/progress/d04dd283-8a65-4f62-bb9d-d65059b994b5 HTTP/1.1" 200 -
2025-04-06 00:43:50,034 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:43:50] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 00:44:16,765 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:44:16] "GET / HTTP/1.1" 200 -
2025-04-06 00:44:17,131 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:44:17] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 00:44:17,140 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:44:17] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-06 00:44:17,146 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:44:17] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-06 00:44:17,152 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:44:17] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-06 00:44:17,154 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:44:17] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-06 00:44:17,160 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:44:17] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-06 00:44:17,455 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:44:17] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-06 00:44:17,473 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:44:17] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-06 00:44:17,474 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:44:17] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-06 00:44:17,798 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:44:17] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-06 00:45:17,963 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/config/config.py', reloading
2025-04-06 00:45:17,964 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/config/config.py', reloading
2025-04-06 00:45:17,966 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/config/config.py', reloading
2025-04-06 00:45:18,967 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-06 00:45:18,968 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-06 00:45:18,969 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-06 00:45:18,970 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-06 00:45:18,970 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-06 00:45:18 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-06 00:45:18,971 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-06 00:45:18 - INFO - [database.py:258] - Closing database connection
2025-04-06 00:45:18,973 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-06 00:45:18 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-06 00:45:19,899 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-06 00:45:23,515 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:45:23,516 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:45:23,525 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:45:23,526 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:45:23,526 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-06 00:45:23,533 [INFO] text2sql [app.py:66]: Debug logging enabled for SQL generator and agents
2025-04-06 00:45:23 - INFO - [app.py:66] - Debug logging enabled for SQL generator and agents
2025-04-06 00:45:23,534 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:45:23 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:45:23,535 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-06 00:45:23 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-06 00:45:23,569 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-06 00:45:23 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-06 00:45:23,569 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:45:23,570 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:45:23,570 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:45:23,570 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:45:23,570 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:45:23 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:45:23,570 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-06 00:45:23 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-06 00:45:23,600 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-06 00:45:23 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-06 00:45:23,600 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:45:23,600 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:45:23,601 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:45:23,601 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:45:23,601 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:45:23 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:45:23,601 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-06 00:45:23 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-06 00:45:23,629 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-06 00:45:23 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-06 00:45:23,630 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:45:23,630 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:45:23,630 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:45:23,630 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:45:23,630 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-06 00:45:23 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-06 00:45:23,631 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:45:23 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:45:23,631 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-06 00:45:23 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-06 00:45:23,660 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-06 00:45:23 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-06 00:45:23,660 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-06 00:45:23 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-06 00:45:23,660 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-06 00:45:23 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-06 00:45:23,660 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:45:23,660 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:45:23,661 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:45:23,661 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:45:23,661 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-06 00:45:23 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-06 00:45:23,680 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-06 00:45:23,680 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-06 00:45:48,729 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'get me count of customers by order date'
2025-04-06 00:45:48,730 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:45:48] "POST /api/query HTTP/1.1" 200 -
2025-04-06 00:45:48,730 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'get me count of customers by order date'
2025-04-06 00:45:48,732 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-06 00:45:48,732 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.00s
2025-04-06 00:45:48,733 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-06 00:45:48,734 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-06 00:45:48,735 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-06 00:45:48 - INFO - [database.py:44] - Attempting database connection
2025-04-06 00:45:48,736 [INFO] text2sql.database [database.py:48]: Database connection established in 0.00s
2025-04-06 00:45:48 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-06 00:45:48,737 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'get me count of customers by order date'
2025-04-06 00:45:48,738 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (6): customers, products, orders, order_items, sales_metrics, db1.customers
2025-04-06 00:45:48,738 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-06 00:45:48,739 [INFO] text2sql.llm_engine [llm_engine.py:56]: [TABLE] Completion generation started
2025-04-06 00:45:48 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-06 00:45:49,235 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:45:49] "GET /api/query/progress/3a3eaabb-ab85-47e6-a56c-8675ca360886 HTTP/1.1" 200 -
2025-04-06 00:45:50,018 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:45:50] "GET /api/query/progress/3a3eaabb-ab85-47e6-a56c-8675ca360886 HTTP/1.1" 200 -
2025-04-06 00:45:50,256 [INFO] text2sql.llm_engine [llm_engine.py:119]: [TABLE] Completion generation completed in 1.52s
2025-04-06 00:45:50 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 1.52s
2025-04-06 00:45:50,257 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-06 00:45:50 - INFO - [llm_engine.py:120] - **************************
2025-04-06 00:45:50,258 [INFO] text2sql.agents.table [table_agent.py:69]: Raw model response: 'orders, customers'
2025-04-06 00:45:50,259 [INFO] text2sql.agents.table [table_agent.py:90]: Table selection completed in 1.52s. Selected: orders, customers
2025-04-06 00:45:50,259 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'get me count of customers by order date'
2025-04-06 00:45:50,260 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: orders, customers
2025-04-06 00:45:50,260 [INFO] text2sql.agents.column [column_agent.py:94]: Sending request to AI model for column selection
2025-04-06 00:45:50,260 [INFO] text2sql.llm_engine [llm_engine.py:56]: [COLUMN] Completion generation started
2025-04-06 00:45:50 - INFO - [llm_engine.py:56] - [COLUMN] Completion generation started
2025-04-06 00:45:50,266 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:45:50] "GET /api/query/progress/3a3eaabb-ab85-47e6-a56c-8675ca360886 HTTP/1.1" 200 -
2025-04-06 00:45:50,695 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:45:50] "GET /api/query/progress/3a3eaabb-ab85-47e6-a56c-8675ca360886 HTTP/1.1" 200 -
2025-04-06 00:45:51,490 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:45:51] "GET /api/query/progress/3a3eaabb-ab85-47e6-a56c-8675ca360886 HTTP/1.1" 200 -
2025-04-06 00:45:51,750 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:45:51] "GET /api/query/progress/3a3eaabb-ab85-47e6-a56c-8675ca360886 HTTP/1.1" 200 -
2025-04-06 00:45:51,764 [INFO] text2sql.llm_engine [llm_engine.py:119]: [COLUMN] Completion generation completed in 1.50s
2025-04-06 00:45:51 - INFO - [llm_engine.py:119] - [COLUMN] Completion generation completed in 1.50s
2025-04-06 00:45:51,765 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-06 00:45:51 - INFO - [llm_engine.py:120] - **************************
2025-04-06 00:45:51,766 [INFO] text2sql.agents.column [column_agent.py:99]: Raw model response: '{
  "orders": ["order_id", "customer_id", "order_date"],
  "customers": ["customer_id"]
}'
2025-04-06 00:45:51,767 [INFO] text2sql.agents.column [column_agent.py:139]: Parsing column selection from model response
2025-04-06 00:45:51,767 [INFO] text2sql.agents.column [column_agent.py:149]: Parsed column selection JSON: {"orders": ["order_id", "customer_id", "order_date"], "customers": ["customer_id"]}
2025-04-06 00:45:51,767 [INFO] text2sql.agents.column [column_agent.py:111]: Table 'orders': Pruned 2 columns, kept 3/5
2025-04-06 00:45:51,768 [INFO] text2sql.agents.column [column_agent.py:111]: Table 'customers': Pruned 10 columns, kept 1/11
2025-04-06 00:45:51,768 [INFO] text2sql.agents.column [column_agent.py:197]: Building pruned schema
2025-04-06 00:45:51,769 [INFO] text2sql.agents.column [column_agent.py:226]: Built pruned schema (404 chars)
2025-04-06 00:45:51,769 [INFO] text2sql.agents.column [column_agent.py:120]: Column pruning completed in 1.51s
2025-04-06 00:45:51,770 [INFO] text2sql.sql_generator [sql_generator.py:237]: Found 2 join conditions for the relevant tables
2025-04-06 00:45:51,770 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-06 00:45:51 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-06 00:45:51,771 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-06 00:45:51 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-06 00:45:51,772 [INFO] text2sql.feedback [feedback_manager.py:267]: Stage 1: Vector search for 'get me count of customers by order date...'
2025-04-06 00:45:51 - INFO - [feedback_manager.py:267] - Stage 1: Vector search for 'get me count of customers by order date...'
2025-04-06 00:45:51,774 [INFO] text2sql.feedback [feedback_manager.py:62]: Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-06 00:45:51 - INFO - [feedback_manager.py:62] - Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-06 00:45:52,168 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:45:52] "GET /api/query/progress/3a3eaabb-ab85-47e6-a56c-8675ca360886 HTTP/1.1" 200 -
2025-04-06 00:45:52,949 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:45:52] "GET /api/query/progress/3a3eaabb-ab85-47e6-a56c-8675ca360886 HTTP/1.1" 200 -
2025-04-06 00:45:53,215 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:45:53] "GET /api/query/progress/3a3eaabb-ab85-47e6-a56c-8675ca360886 HTTP/1.1" 200 -
2025-04-06 00:45:53,637 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:45:53] "GET /api/query/progress/3a3eaabb-ab85-47e6-a56c-8675ca360886 HTTP/1.1" 200 -
2025-04-06 00:45:54,281 [INFO] text2sql.feedback [feedback_manager.py:65]: Embedding model loaded in 2.51s
2025-04-06 00:45:54 - INFO - [feedback_manager.py:65] - Embedding model loaded in 2.51s
2025-04-06 00:45:54,343 [INFO] text2sql.feedback [feedback_manager.py:322]: Found 1 initial candidates from vector search
2025-04-06 00:45:54 - INFO - [feedback_manager.py:322] - Found 1 initial candidates from vector search
2025-04-06 00:45:54,343 [INFO] text2sql.feedback [feedback_manager.py:367]: Less than 3 candidates, skipping reranking
2025-04-06 00:45:54 - INFO - [feedback_manager.py:367] - Less than 3 candidates, skipping reranking
2025-04-06 00:45:54,344 [INFO] text2sql.sql_generator [sql_generator.py:280]: Found 1 similar queries with reranking
2025-04-06 00:45:54,345 [INFO] text2sql.sql_generator [sql_generator.py:302]: Added similar query #1 from feedback (score: 0.5176): get me all the customers...
2025-04-06 00:45:54,345 [INFO] text2sql.azure [azure_client.py:35]: SQL generation started for query: 'get me count of customers by order date'
2025-04-06 00:45:54 - INFO - [azure_client.py:35] - SQL generation started for query: 'get me count of customers by order date'
2025-04-06 00:45:54,347 [INFO] text2sql.azure [azure_client.py:69]: Including schema information (404 chars)
2025-04-06 00:45:54 - INFO - [azure_client.py:69] - Including schema information (404 chars)
2025-04-06 00:45:54,347 [INFO] text2sql.azure [azure_client.py:76]: Including 2 join conditions
2025-04-06 00:45:54 - INFO - [azure_client.py:76] - Including 2 join conditions
2025-04-06 00:45:54,349 [INFO] text2sql.azure [azure_client.py:97]: Including 1 SQL examples from feedback similarity search
2025-04-06 00:45:54 - INFO - [azure_client.py:97] - Including 1 SQL examples from feedback similarity search
2025-04-06 00:45:54,350 [INFO] text2sql.azure [azure_client.py:114]: PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER): Unique order identifier, customer_id (INTEGER): Reference to customer who placed the order, order_date (TEXT): Date when order was placed\nPrimary Key(s): order_id\n\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER): Unique customer identifier\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Use the following pre-defined join conditions when joining these tables:\n- When joining customers with orders, use: INNER JOIN orders ON customers.customer_id = orders.customer_id\n- When joining customers with customers, use: LEFT JOIN customers ON a=a\n'}, {'role': 'user', 'content': 'Here are some similar queries that were previously successful:\nQuestion: get me all the customers\nSQL: SELECT * FROM customers;\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me count of customers by order date'}]
2025-04-06 00:45:54 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER): Unique order identifier, customer_id (INTEGER): Reference to customer who placed the order, order_date (TEXT): Date when order was placed\nPrimary Key(s): order_id\n\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER): Unique customer identifier\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Use the following pre-defined join conditions when joining these tables:\n- When joining customers with orders, use: INNER JOIN orders ON customers.customer_id = orders.customer_id\n- When joining customers with customers, use: LEFT JOIN customers ON a=a\n'}, {'role': 'user', 'content': 'Here are some similar queries that were previously successful:\nQuestion: get me all the customers\nSQL: SELECT * FROM customers;\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me count of customers by order date'}]
2025-04-06 00:45:54,351 [INFO] text2sql.llm_engine [llm_engine.py:56]: [SQL_GEN] Completion generation started
2025-04-06 00:45:54 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-06 00:45:54,411 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:45:54] "GET /api/query/progress/3a3eaabb-ab85-47e6-a56c-8675ca360886 HTTP/1.1" 200 -
2025-04-06 00:45:54,675 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:45:54] "GET /api/query/progress/3a3eaabb-ab85-47e6-a56c-8675ca360886 HTTP/1.1" 200 -
2025-04-06 00:45:55,102 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:45:55] "GET /api/query/progress/3a3eaabb-ab85-47e6-a56c-8675ca360886 HTTP/1.1" 200 -
2025-04-06 00:45:55,899 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:45:55] "GET /api/query/progress/3a3eaabb-ab85-47e6-a56c-8675ca360886 HTTP/1.1" 200 -
2025-04-06 00:45:56,007 [INFO] text2sql.llm_engine [llm_engine.py:119]: [SQL_GEN] Completion generation completed in 1.66s
2025-04-06 00:45:56 - INFO - [llm_engine.py:119] - [SQL_GEN] Completion generation completed in 1.66s
2025-04-06 00:45:56,008 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-06 00:45:56 - INFO - [llm_engine.py:120] - **************************
2025-04-06 00:45:56,009 [INFO] text2sql.azure [azure_client.py:150]: Parsing SQL from model response
2025-04-06 00:45:56 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-06 00:45:56,010 [INFO] text2sql.azure [azure_client.py:157]: Found SQL code block in response
2025-04-06 00:45:56 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-06 00:45:56,012 [INFO] text2sql.azure [azure_client.py:171]: Extracted SQL query (170 chars) and explanation (151 chars)
2025-04-06 00:45:56 - INFO - [azure_client.py:171] - Extracted SQL query (170 chars) and explanation (151 chars)
2025-04-06 00:45:56,014 [INFO] text2sql.azure [azure_client.py:124]: Generated SQL: SELECT 
    o.order_date,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM customers c
INNER JOIN orders o ON c.customer_id = o.customer_id
GROUP BY o.order_date;
2025-04-06 00:45:56 - INFO - [azure_client.py:124] - Generated SQL: SELECT 
    o.order_date,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM customers c
INNER JOIN orders o ON c.customer_id = o.customer_id
GROUP BY o.order_date;
2025-04-06 00:45:56,015 [INFO] text2sql.azure [azure_client.py:132]: SQL generation completed in 1.67s
2025-04-06 00:45:56 - INFO - [azure_client.py:132] - SQL generation completed in 1.67s
2025-04-06 00:45:56,016 [INFO] text2sql.database [database.py:65]: Executing SQL query: SELECT 
    o.order_date,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM customers c
INNER JOIN orders o ON c.customer_id = o.customer_id
GROUP BY o.order_date;
2025-04-06 00:45:56 - INFO - [database.py:65] - Executing SQL query: SELECT 
    o.order_date,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM customers c
INNER JOIN orders o ON c.customer_id = o.customer_id
GROUP BY o.order_date;
2025-04-06 00:45:56,020 [INFO] text2sql.database [database.py:86]: Query returned 8 rows with 2 columns
2025-04-06 00:45:56 - INFO - [database.py:86] - Query returned 8 rows with 2 columns
2025-04-06 00:45:56,022 [INFO] text2sql.database [database.py:95]: Query processing completed in 0.01s
2025-04-06 00:45:56 - INFO - [database.py:95] - Query processing completed in 0.01s
2025-04-06 00:45:56,025 [INFO] text2sql.sql_generator [sql_generator.py:376]: SQL generation completed in 7.29s
2025-04-06 00:45:56,026 [INFO] text2sql.sql_generator [sql_generator.py:125]: Query processing completed in 7.30s
2025-04-06 00:45:56,148 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:45:56] "GET /api/query/progress/3a3eaabb-ab85-47e6-a56c-8675ca360886 HTTP/1.1" 200 -
2025-04-06 00:46:54,910 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/config/config.py', reloading
2025-04-06 00:46:54,911 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/config/config.py', reloading
2025-04-06 00:46:54,923 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/config/config.py', reloading
2025-04-06 00:46:55,924 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-06 00:46:55,924 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-06 00:46:55,924 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-06 00:46:55,924 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-06 00:46:55,924 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-06 00:46:55 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-06 00:46:55,925 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-06 00:46:55 - INFO - [database.py:258] - Closing database connection
2025-04-06 00:46:55,925 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-06 00:46:55 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-06 00:46:56,809 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-06 00:47:00,474 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:47:00,475 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:47:00,475 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:47:00,475 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:47:00,476 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-06 00:47:00,483 [INFO] text2sql [app.py:66]: Debug logging enabled for SQL generator and agents
2025-04-06 00:47:00 - INFO - [app.py:66] - Debug logging enabled for SQL generator and agents
2025-04-06 00:47:00,484 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:47:00 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:47:00,485 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: google/gemini-2.5-pro-exp-03-25:free
2025-04-06 00:47:00 - INFO - [llm_engine.py:29] - Using model: google/gemini-2.5-pro-exp-03-25:free
2025-04-06 00:47:00,520 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-06 00:47:00 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-06 00:47:00,520 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:47:00,521 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:47:00,521 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:47:00,521 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:47:00,521 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:47:00 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:47:00,521 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: google/gemini-2.5-pro-exp-03-25:free
2025-04-06 00:47:00 - INFO - [llm_engine.py:29] - Using model: google/gemini-2.5-pro-exp-03-25:free
2025-04-06 00:47:00,554 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-06 00:47:00 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-06 00:47:00,554 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:47:00,555 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:47:00,555 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:47:00,555 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:47:00,555 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:47:00 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:47:00,556 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: google/gemini-2.5-pro-exp-03-25:free
2025-04-06 00:47:00 - INFO - [llm_engine.py:29] - Using model: google/gemini-2.5-pro-exp-03-25:free
2025-04-06 00:47:00,586 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-06 00:47:00 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-06 00:47:00,586 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:47:00,586 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:47:00,586 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:47:00,586 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:47:00,587 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-06 00:47:00 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-06 00:47:00,587 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:47:00 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:47:00,587 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: google/gemini-2.5-pro-exp-03-25:free
2025-04-06 00:47:00 - INFO - [llm_engine.py:29] - Using model: google/gemini-2.5-pro-exp-03-25:free
2025-04-06 00:47:00,616 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-06 00:47:00 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-06 00:47:00,617 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-06 00:47:00 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-06 00:47:00,617 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-06 00:47:00 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-06 00:47:00,617 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:47:00,618 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:47:00,618 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:47:00,618 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:47:00,618 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-06 00:47:00 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-06 00:47:00,639 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-06 00:47:00,639 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-06 00:47:03,003 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'get me count of customers by order date'
2025-04-06 00:47:03,004 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:47:03] "POST /api/query HTTP/1.1" 200 -
2025-04-06 00:47:03,004 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'get me count of customers by order date'
2025-04-06 00:47:03,006 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-06 00:47:03,006 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.00s
2025-04-06 00:47:03,007 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-06 00:47:03,008 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-06 00:47:03,008 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-06 00:47:03 - INFO - [database.py:44] - Attempting database connection
2025-04-06 00:47:03,010 [INFO] text2sql.database [database.py:48]: Database connection established in 0.00s
2025-04-06 00:47:03 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-06 00:47:03,011 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'get me count of customers by order date'
2025-04-06 00:47:03,011 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (6): customers, products, orders, order_items, sales_metrics, db1.customers
2025-04-06 00:47:03,012 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-06 00:47:03,013 [INFO] text2sql.llm_engine [llm_engine.py:56]: [TABLE] Completion generation started
2025-04-06 00:47:03 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-06 00:47:03,518 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:47:03] "GET /api/query/progress/9773e012-77f0-499c-9396-ea9528f6d0f4 HTTP/1.1" 200 -
2025-04-06 00:47:04,307 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:47:04] "GET /api/query/progress/9773e012-77f0-499c-9396-ea9528f6d0f4 HTTP/1.1" 200 -
2025-04-06 00:47:04,556 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:47:04] "GET /api/query/progress/9773e012-77f0-499c-9396-ea9528f6d0f4 HTTP/1.1" 200 -
2025-04-06 00:47:04,990 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:47:04] "GET /api/query/progress/9773e012-77f0-499c-9396-ea9528f6d0f4 HTTP/1.1" 200 -
2025-04-06 00:47:06,619 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:47:06] "GET /api/query/progress/9773e012-77f0-499c-9396-ea9528f6d0f4 HTTP/1.1" 200 -
2025-04-06 00:47:07,286 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:47:07] "GET /api/query/progress/9773e012-77f0-499c-9396-ea9528f6d0f4 HTTP/1.1" 200 -
2025-04-06 00:47:08,586 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:47:08] "GET /api/query/progress/9773e012-77f0-499c-9396-ea9528f6d0f4 HTTP/1.1" 200 -
2025-04-06 00:47:09,257 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:47:09] "GET /api/query/progress/9773e012-77f0-499c-9396-ea9528f6d0f4 HTTP/1.1" 200 -
2025-04-06 00:47:10,549 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:47:10] "GET /api/query/progress/9773e012-77f0-499c-9396-ea9528f6d0f4 HTTP/1.1" 200 -
2025-04-06 00:47:10,735 [INFO] text2sql.llm_engine [llm_engine.py:119]: [TABLE] Completion generation completed in 7.72s
2025-04-06 00:47:10 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 7.72s
2025-04-06 00:47:10,735 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-06 00:47:10 - INFO - [llm_engine.py:120] - **************************
2025-04-06 00:47:10,736 [INFO] text2sql.agents.table [table_agent.py:69]: Raw model response: 'orders'
2025-04-06 00:47:10,737 [INFO] text2sql.agents.table [table_agent.py:90]: Table selection completed in 7.73s. Selected: orders
2025-04-06 00:47:10,737 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'get me count of customers by order date'
2025-04-06 00:47:10,738 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: orders
2025-04-06 00:47:10,738 [INFO] text2sql.agents.column [column_agent.py:38]: Only one table involved (orders). Skipping LLM call and including all columns.
2025-04-06 00:47:10,739 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-06 00:47:10 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-06 00:47:10,739 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-06 00:47:10 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-06 00:47:10,740 [INFO] text2sql.feedback [feedback_manager.py:267]: Stage 1: Vector search for 'get me count of customers by order date...'
2025-04-06 00:47:10 - INFO - [feedback_manager.py:267] - Stage 1: Vector search for 'get me count of customers by order date...'
2025-04-06 00:47:10,741 [INFO] text2sql.feedback [feedback_manager.py:62]: Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-06 00:47:10 - INFO - [feedback_manager.py:62] - Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-06 00:47:11,213 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:47:11] "GET /api/query/progress/9773e012-77f0-499c-9396-ea9528f6d0f4 HTTP/1.1" 200 -
2025-04-06 00:47:12,506 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:47:12] "GET /api/query/progress/9773e012-77f0-499c-9396-ea9528f6d0f4 HTTP/1.1" 200 -
2025-04-06 00:47:13,187 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:47:13] "GET /api/query/progress/9773e012-77f0-499c-9396-ea9528f6d0f4 HTTP/1.1" 200 -
2025-04-06 00:47:13,307 [INFO] text2sql.feedback [feedback_manager.py:65]: Embedding model loaded in 2.57s
2025-04-06 00:47:13 - INFO - [feedback_manager.py:65] - Embedding model loaded in 2.57s
2025-04-06 00:47:13,339 [INFO] text2sql.feedback [feedback_manager.py:322]: Found 1 initial candidates from vector search
2025-04-06 00:47:13 - INFO - [feedback_manager.py:322] - Found 1 initial candidates from vector search
2025-04-06 00:47:13,340 [INFO] text2sql.feedback [feedback_manager.py:367]: Less than 3 candidates, skipping reranking
2025-04-06 00:47:13 - INFO - [feedback_manager.py:367] - Less than 3 candidates, skipping reranking
2025-04-06 00:47:13,341 [INFO] text2sql.sql_generator [sql_generator.py:280]: Found 1 similar queries with reranking
2025-04-06 00:47:13,341 [INFO] text2sql.sql_generator [sql_generator.py:302]: Added similar query #1 from feedback (score: 0.5176): get me all the customers...
2025-04-06 00:47:13,341 [INFO] text2sql.azure [azure_client.py:35]: SQL generation started for query: 'get me count of customers by order date'
2025-04-06 00:47:13 - INFO - [azure_client.py:35] - SQL generation started for query: 'get me count of customers by order date'
2025-04-06 00:47:13,342 [INFO] text2sql.azure [azure_client.py:69]: Including schema information (363 chars)
2025-04-06 00:47:13 - INFO - [azure_client.py:69] - Including schema information (363 chars)
2025-04-06 00:47:13,343 [INFO] text2sql.azure [azure_client.py:97]: Including 1 SQL examples from feedback similarity search
2025-04-06 00:47:13 - INFO - [azure_client.py:97] - Including 1 SQL examples from feedback similarity search
2025-04-06 00:47:13,344 [INFO] text2sql.azure [azure_client.py:114]: PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER) - Unique order identifier, customer_id (INTEGER) - Reference to customer who placed the order, order_date (TEXT) - Date when order was placed, status (TEXT) - Order status (pending, shipped, completed, etc.), total_amount (REAL) - Total order amount\nPrimary Key(s): order_id\n"}, {'role': 'user', 'content': 'Here are some similar queries that were previously successful:\nQuestion: get me all the customers\nSQL: SELECT * FROM customers;\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me count of customers by order date'}]
2025-04-06 00:47:13 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER) - Unique order identifier, customer_id (INTEGER) - Reference to customer who placed the order, order_date (TEXT) - Date when order was placed, status (TEXT) - Order status (pending, shipped, completed, etc.), total_amount (REAL) - Total order amount\nPrimary Key(s): order_id\n"}, {'role': 'user', 'content': 'Here are some similar queries that were previously successful:\nQuestion: get me all the customers\nSQL: SELECT * FROM customers;\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me count of customers by order date'}]
2025-04-06 00:47:13,345 [INFO] text2sql.llm_engine [llm_engine.py:56]: [SQL_GEN] Completion generation started
2025-04-06 00:47:13 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-06 00:47:14,482 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:47:14] "GET /api/query/progress/9773e012-77f0-499c-9396-ea9528f6d0f4 HTTP/1.1" 200 -
2025-04-06 00:47:15,153 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:47:15] "GET /api/query/progress/9773e012-77f0-499c-9396-ea9528f6d0f4 HTTP/1.1" 200 -
2025-04-06 00:47:16,261 [ERROR] text2sql.llm_engine [llm_engine.py:125]: [SQL_GEN] Completion generation error after 2.92s: 'NoneType' object is not subscriptable
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/llm_engine.py", line 110, in generate_completion
    completion_text = response.choices[0].message.content
                      ~~~~~~~~~~~~~~~~^^^
TypeError: 'NoneType' object is not subscriptable
2025-04-06 00:47:16 - ERROR - [llm_engine.py:125] - [SQL_GEN] Completion generation error after 2.92s: 'NoneType' object is not subscriptable
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/llm_engine.py", line 110, in generate_completion
    completion_text = response.choices[0].message.content
                      ~~~~~~~~~~~~~~~~^^^
TypeError: 'NoneType' object is not subscriptable
2025-04-06 00:47:16,263 [ERROR] text2sql.azure [azure_client.py:138]: SQL generation error after 2.92s: 'NoneType' object is not subscriptable
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/azure_client.py", line 117, in generate_sql
    raw_response = self.llm_engine.generate_completion(messages, log_prefix="SQL_GEN")
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/text2sql/src/utils/llm_engine.py", line 110, in generate_completion
    completion_text = response.choices[0].message.content
                      ~~~~~~~~~~~~~~~~^^^
TypeError: 'NoneType' object is not subscriptable
2025-04-06 00:47:16 - ERROR - [azure_client.py:138] - SQL generation error after 2.92s: 'NoneType' object is not subscriptable
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/azure_client.py", line 117, in generate_sql
    raw_response = self.llm_engine.generate_completion(messages, log_prefix="SQL_GEN")
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/text2sql/src/utils/llm_engine.py", line 110, in generate_completion
    completion_text = response.choices[0].message.content
                      ~~~~~~~~~~~~~~~~^^^
TypeError: 'NoneType' object is not subscriptable
2025-04-06 00:47:16,267 [INFO] text2sql.sql_generator [sql_generator.py:376]: SQL generation completed in 13.26s
2025-04-06 00:47:16,268 [INFO] text2sql.sql_generator [sql_generator.py:125]: Query processing completed in 13.26s
2025-04-06 00:47:16,436 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:47:16] "GET /api/query/progress/9773e012-77f0-499c-9396-ea9528f6d0f4 HTTP/1.1" 200 -
2025-04-06 00:47:25,495 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'get me count of customers by order date'
2025-04-06 00:47:25,496 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:47:25] "POST /api/query HTTP/1.1" 200 -
2025-04-06 00:47:25,496 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'get me count of customers by order date'
2025-04-06 00:47:25,498 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-06 00:47:25,498 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.00s
2025-04-06 00:47:25,500 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-06 00:47:25,501 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-06 00:47:25,501 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-06 00:47:25 - INFO - [database.py:44] - Attempting database connection
2025-04-06 00:47:25,503 [INFO] text2sql.database [database.py:48]: Database connection established in 0.00s
2025-04-06 00:47:25 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-06 00:47:25,505 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'get me count of customers by order date'
2025-04-06 00:47:25,505 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (6): customers, products, orders, order_items, sales_metrics, db1.customers
2025-04-06 00:47:25,506 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-06 00:47:25,506 [INFO] text2sql.llm_engine [llm_engine.py:56]: [TABLE] Completion generation started
2025-04-06 00:47:25 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-06 00:47:26,302 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:47:26] "GET /api/query/progress/3f24c4cd-765c-4172-81c8-b845659f394d HTTP/1.1" 200 -
2025-04-06 00:47:26,551 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:47:26] "GET /api/query/progress/3f24c4cd-765c-4172-81c8-b845659f394d HTTP/1.1" 200 -
2025-04-06 00:47:26,985 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:47:26] "GET /api/query/progress/3f24c4cd-765c-4172-81c8-b845659f394d HTTP/1.1" 200 -
2025-04-06 00:47:27,781 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:47:27] "GET /api/query/progress/3f24c4cd-765c-4172-81c8-b845659f394d HTTP/1.1" 200 -
2025-04-06 00:47:28,030 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:47:28] "GET /api/query/progress/3f24c4cd-765c-4172-81c8-b845659f394d HTTP/1.1" 200 -
2025-04-06 00:47:28,442 [ERROR] text2sql.llm_engine [llm_engine.py:125]: [TABLE] Completion generation error after 2.94s: 'NoneType' object is not subscriptable
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/llm_engine.py", line 110, in generate_completion
    completion_text = response.choices[0].message.content
                      ~~~~~~~~~~~~~~~~^^^
TypeError: 'NoneType' object is not subscriptable
2025-04-06 00:47:28 - ERROR - [llm_engine.py:125] - [TABLE] Completion generation error after 2.94s: 'NoneType' object is not subscriptable
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/llm_engine.py", line 110, in generate_completion
    completion_text = response.choices[0].message.content
                      ~~~~~~~~~~~~~~~~^^^
TypeError: 'NoneType' object is not subscriptable
2025-04-06 00:47:28,446 [ERROR] text2sql.agents.table [table_agent.py:95]: Table selection error after 2.94s: 'NoneType' object is not subscriptable
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/agents/table_agent.py", line 67, in get_relevant_tables
    raw_response = self.llm_engine.generate_completion(messages, log_prefix="TABLE")
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/text2sql/src/utils/llm_engine.py", line 110, in generate_completion
    completion_text = response.choices[0].message.content
                      ~~~~~~~~~~~~~~~~^^^
TypeError: 'NoneType' object is not subscriptable
2025-04-06 00:47:28,449 [WARNING] text2sql.agents.table [table_agent.py:98]: Defaulting to first 3 tables due to error: customers, products, orders
2025-04-06 00:47:28,451 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:47:28] "GET /api/query/progress/3f24c4cd-765c-4172-81c8-b845659f394d HTTP/1.1" 200 -
2025-04-06 00:47:28,452 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'get me count of customers by order date'
2025-04-06 00:47:28,455 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: customers, products, orders
2025-04-06 00:47:28,456 [INFO] text2sql.agents.column [column_agent.py:94]: Sending request to AI model for column selection
2025-04-06 00:47:28,458 [INFO] text2sql.llm_engine [llm_engine.py:56]: [COLUMN] Completion generation started
2025-04-06 00:47:28 - INFO - [llm_engine.py:56] - [COLUMN] Completion generation started
2025-04-06 00:47:29,258 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:47:29] "GET /api/query/progress/3f24c4cd-765c-4172-81c8-b845659f394d HTTP/1.1" 200 -
2025-04-06 00:47:29,515 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:47:29] "GET /api/query/progress/3f24c4cd-765c-4172-81c8-b845659f394d HTTP/1.1" 200 -
2025-04-06 00:47:29,930 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:47:29] "GET /api/query/progress/3f24c4cd-765c-4172-81c8-b845659f394d HTTP/1.1" 200 -
2025-04-06 00:47:30,723 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:47:30] "GET /api/query/progress/3f24c4cd-765c-4172-81c8-b845659f394d HTTP/1.1" 200 -
2025-04-06 00:47:30,989 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:47:30] "GET /api/query/progress/3f24c4cd-765c-4172-81c8-b845659f394d HTTP/1.1" 200 -
2025-04-06 00:47:31,400 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:47:31] "GET /api/query/progress/3f24c4cd-765c-4172-81c8-b845659f394d HTTP/1.1" 200 -
2025-04-06 00:47:32,220 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:47:32] "GET /api/query/progress/3f24c4cd-765c-4172-81c8-b845659f394d HTTP/1.1" 200 -
2025-04-06 00:47:32,462 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:47:32] "GET /api/query/progress/3f24c4cd-765c-4172-81c8-b845659f394d HTTP/1.1" 200 -
2025-04-06 00:47:32,879 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:47:32] "GET /api/query/progress/3f24c4cd-765c-4172-81c8-b845659f394d HTTP/1.1" 200 -
2025-04-06 00:47:33,684 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:47:33] "GET /api/query/progress/3f24c4cd-765c-4172-81c8-b845659f394d HTTP/1.1" 200 -
2025-04-06 00:47:33,930 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:47:33] "GET /api/query/progress/3f24c4cd-765c-4172-81c8-b845659f394d HTTP/1.1" 200 -
2025-04-06 00:47:34,334 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:47:34] "GET /api/query/progress/3f24c4cd-765c-4172-81c8-b845659f394d HTTP/1.1" 200 -
2025-04-06 00:47:34,380 [INFO] text2sql.llm_engine [llm_engine.py:119]: [COLUMN] Completion generation completed in 5.92s
2025-04-06 00:47:34 - INFO - [llm_engine.py:119] - [COLUMN] Completion generation completed in 5.92s
2025-04-06 00:47:34,382 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-06 00:47:34 - INFO - [llm_engine.py:120] - **************************
2025-04-06 00:47:34,383 [INFO] text2sql.agents.column [column_agent.py:99]: Raw model response: '```json
{
  "orders": [
    "order_id",
    "customer_id",
    "order_date"
  ]
}
```'
2025-04-06 00:47:34,384 [INFO] text2sql.agents.column [column_agent.py:139]: Parsing column selection from model response
2025-04-06 00:47:34,386 [INFO] text2sql.agents.column [column_agent.py:149]: Parsed column selection JSON: {"orders": ["order_id", "customer_id", "order_date"]}
2025-04-06 00:47:34,386 [INFO] text2sql.agents.column [column_agent.py:111]: Table 'orders': Pruned 2 columns, kept 3/5
2025-04-06 00:47:34,387 [INFO] text2sql.agents.column [column_agent.py:197]: Building pruned schema
2025-04-06 00:47:34,388 [INFO] text2sql.agents.column [column_agent.py:226]: Built pruned schema (252 chars)
2025-04-06 00:47:34,389 [INFO] text2sql.agents.column [column_agent.py:120]: Column pruning completed in 5.94s
2025-04-06 00:47:34,389 [ERROR] text2sql [background_tasks.py:62]: Exception while processing query: 'join_type'
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/background_tasks.py", line 39, in process_in_background
    result = self.sql_manager.process_query(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/text2sql/src/models/sql_generator.py", line 71, in process_query
    sql_result = self._generate_sql(query, workspaces, explicit_tables, progress_callback)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/text2sql/src/models/sql_generator.py", line 222, in _generate_sql
    join_info = "\n".join([
                          ^
  File "/home/vijay/text2sql/src/models/sql_generator.py", line 224, in <listcomp>
    f"{join['join_type']} JOIN on {join['condition']}"
       ~~~~^^^^^^^^^^^^^
KeyError: 'join_type'
2025-04-06 00:47:34 - ERROR - [background_tasks.py:62] - Exception while processing query: 'join_type'
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/background_tasks.py", line 39, in process_in_background
    result = self.sql_manager.process_query(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/text2sql/src/models/sql_generator.py", line 71, in process_query
    sql_result = self._generate_sql(query, workspaces, explicit_tables, progress_callback)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/text2sql/src/models/sql_generator.py", line 222, in _generate_sql
    join_info = "\n".join([
                          ^
  File "/home/vijay/text2sql/src/models/sql_generator.py", line 224, in <listcomp>
    f"{join['join_type']} JOIN on {join['condition']}"
       ~~~~^^^^^^^^^^^^^
KeyError: 'join_type'
2025-04-06 00:47:35,141 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:47:35] "GET /api/query/progress/3f24c4cd-765c-4172-81c8-b845659f394d HTTP/1.1" 200 -
2025-04-06 00:47:39,460 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/config/config.py', reloading
2025-04-06 00:47:39,470 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/config/config.py', reloading
2025-04-06 00:47:39,476 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/config/config.py', reloading
2025-04-06 00:47:40,478 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-06 00:47:40,478 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-06 00:47:40,479 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-06 00:47:40,479 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-06 00:47:40,480 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-06 00:47:40 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-06 00:47:40,480 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-06 00:47:40 - INFO - [database.py:258] - Closing database connection
2025-04-06 00:47:40,481 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-06 00:47:40 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-06 00:47:41,353 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-06 00:47:44,829 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:47:44,830 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:47:44,830 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:47:44,830 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:47:44,830 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-06 00:47:44,837 [INFO] text2sql [app.py:66]: Debug logging enabled for SQL generator and agents
2025-04-06 00:47:44 - INFO - [app.py:66] - Debug logging enabled for SQL generator and agents
2025-04-06 00:47:44,839 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:47:44 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:47:44,839 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-06 00:47:44 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-06 00:47:44,888 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-06 00:47:44 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-06 00:47:44,888 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:47:44,888 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:47:44,888 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:47:44,889 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:47:44,889 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:47:44 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:47:44,889 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-06 00:47:44 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-06 00:47:44,924 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-06 00:47:44 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-06 00:47:44,924 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:47:44,925 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:47:44,925 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:47:44,925 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:47:44,925 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:47:44 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:47:44,925 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-06 00:47:44 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-06 00:47:44,955 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-06 00:47:44 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-06 00:47:44,955 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:47:44,956 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:47:44,956 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:47:44,956 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:47:44,956 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-06 00:47:44 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-06 00:47:44,956 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:47:44 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 00:47:44,956 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-06 00:47:44 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-06 00:47:44,983 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-06 00:47:44 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-06 00:47:44,984 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-06 00:47:44 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-06 00:47:44,984 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-06 00:47:44 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-06 00:47:44,984 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 00:47:44,985 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 00:47:44,985 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 00:47:44,985 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 00:47:44,985 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-06 00:47:44 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-06 00:47:45,004 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-06 00:47:45,004 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-06 00:47:47,286 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'get me count of customers by order date'
2025-04-06 00:47:47,287 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:47:47] "POST /api/query HTTP/1.1" 200 -
2025-04-06 00:47:47,287 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'get me count of customers by order date'
2025-04-06 00:47:47,288 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-06 00:47:47,290 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.00s
2025-04-06 00:47:47,291 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-06 00:47:47,291 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-06 00:47:47,291 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-06 00:47:47 - INFO - [database.py:44] - Attempting database connection
2025-04-06 00:47:47,293 [INFO] text2sql.database [database.py:48]: Database connection established in 0.00s
2025-04-06 00:47:47 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-06 00:47:47,294 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'get me count of customers by order date'
2025-04-06 00:47:47,294 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (6): customers, products, orders, order_items, sales_metrics, db1.customers
2025-04-06 00:47:47,295 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-06 00:47:47,296 [INFO] text2sql.llm_engine [llm_engine.py:56]: [TABLE] Completion generation started
2025-04-06 00:47:47 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-06 00:47:47,791 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:47:47] "GET /api/query/progress/3fb4011f-18dc-4621-9684-0778f729deb0 HTTP/1.1" 200 -
2025-04-06 00:47:48,580 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:47:48] "GET /api/query/progress/3fb4011f-18dc-4621-9684-0778f729deb0 HTTP/1.1" 200 -
2025-04-06 00:47:48,847 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:47:48] "GET /api/query/progress/3fb4011f-18dc-4621-9684-0778f729deb0 HTTP/1.1" 200 -
2025-04-06 00:47:48,910 [INFO] text2sql.llm_engine [llm_engine.py:119]: [TABLE] Completion generation completed in 1.61s
2025-04-06 00:47:48 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 1.61s
2025-04-06 00:47:48,912 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-06 00:47:48 - INFO - [llm_engine.py:120] - **************************
2025-04-06 00:47:48,913 [INFO] text2sql.agents.table [table_agent.py:69]: Raw model response: 'orders, customers'
2025-04-06 00:47:48,914 [INFO] text2sql.agents.table [table_agent.py:90]: Table selection completed in 1.62s. Selected: orders, customers
2025-04-06 00:47:48,915 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'get me count of customers by order date'
2025-04-06 00:47:48,916 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: orders, customers
2025-04-06 00:47:48,917 [INFO] text2sql.agents.column [column_agent.py:94]: Sending request to AI model for column selection
2025-04-06 00:47:48,918 [INFO] text2sql.llm_engine [llm_engine.py:56]: [COLUMN] Completion generation started
2025-04-06 00:47:48 - INFO - [llm_engine.py:56] - [COLUMN] Completion generation started
2025-04-06 00:47:49,257 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:47:49] "GET /api/query/progress/3fb4011f-18dc-4621-9684-0778f729deb0 HTTP/1.1" 200 -
2025-04-06 00:47:50,044 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:47:50] "GET /api/query/progress/3fb4011f-18dc-4621-9684-0778f729deb0 HTTP/1.1" 200 -
2025-04-06 00:47:50,297 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:47:50] "GET /api/query/progress/3fb4011f-18dc-4621-9684-0778f729deb0 HTTP/1.1" 200 -
2025-04-06 00:47:50,424 [INFO] text2sql.llm_engine [llm_engine.py:119]: [COLUMN] Completion generation completed in 1.51s
2025-04-06 00:47:50 - INFO - [llm_engine.py:119] - [COLUMN] Completion generation completed in 1.51s
2025-04-06 00:47:50,428 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-06 00:47:50 - INFO - [llm_engine.py:120] - **************************
2025-04-06 00:47:50,433 [INFO] text2sql.agents.column [column_agent.py:99]: Raw model response: '{
  "orders": ["order_id", "customer_id", "order_date"],
  "customers": ["customer_id"]
}'
2025-04-06 00:47:50,435 [INFO] text2sql.agents.column [column_agent.py:139]: Parsing column selection from model response
2025-04-06 00:47:50,435 [INFO] text2sql.agents.column [column_agent.py:149]: Parsed column selection JSON: {"orders": ["order_id", "customer_id", "order_date"], "customers": ["customer_id"]}
2025-04-06 00:47:50,437 [INFO] text2sql.agents.column [column_agent.py:111]: Table 'orders': Pruned 2 columns, kept 3/5
2025-04-06 00:47:50,438 [INFO] text2sql.agents.column [column_agent.py:111]: Table 'customers': Pruned 10 columns, kept 1/11
2025-04-06 00:47:50,438 [INFO] text2sql.agents.column [column_agent.py:197]: Building pruned schema
2025-04-06 00:47:50,439 [INFO] text2sql.agents.column [column_agent.py:226]: Built pruned schema (404 chars)
2025-04-06 00:47:50,440 [INFO] text2sql.agents.column [column_agent.py:120]: Column pruning completed in 1.53s
2025-04-06 00:47:50,441 [INFO] text2sql.sql_generator [sql_generator.py:237]: Found 2 join conditions for the relevant tables
2025-04-06 00:47:50,442 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-06 00:47:50 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-06 00:47:50,444 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-06 00:47:50 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-06 00:47:50,446 [INFO] text2sql.feedback [feedback_manager.py:267]: Stage 1: Vector search for 'get me count of customers by order date...'
2025-04-06 00:47:50 - INFO - [feedback_manager.py:267] - Stage 1: Vector search for 'get me count of customers by order date...'
2025-04-06 00:47:50,452 [INFO] text2sql.feedback [feedback_manager.py:62]: Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-06 00:47:50 - INFO - [feedback_manager.py:62] - Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-06 00:47:50,728 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:47:50] "GET /api/query/progress/3fb4011f-18dc-4621-9684-0778f729deb0 HTTP/1.1" 200 -
2025-04-06 00:47:51,514 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:47:51] "GET /api/query/progress/3fb4011f-18dc-4621-9684-0778f729deb0 HTTP/1.1" 200 -
2025-04-06 00:47:51,772 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:47:51] "GET /api/query/progress/3fb4011f-18dc-4621-9684-0778f729deb0 HTTP/1.1" 200 -
2025-04-06 00:47:52,193 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:47:52] "GET /api/query/progress/3fb4011f-18dc-4621-9684-0778f729deb0 HTTP/1.1" 200 -
2025-04-06 00:47:53,000 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:47:53] "GET /api/query/progress/3fb4011f-18dc-4621-9684-0778f729deb0 HTTP/1.1" 200 -
2025-04-06 00:47:53,237 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:47:53] "GET /api/query/progress/3fb4011f-18dc-4621-9684-0778f729deb0 HTTP/1.1" 200 -
2025-04-06 00:47:53,536 [INFO] text2sql.feedback [feedback_manager.py:65]: Embedding model loaded in 3.08s
2025-04-06 00:47:53 - INFO - [feedback_manager.py:65] - Embedding model loaded in 3.08s
2025-04-06 00:47:53,576 [INFO] text2sql.feedback [feedback_manager.py:322]: Found 1 initial candidates from vector search
2025-04-06 00:47:53 - INFO - [feedback_manager.py:322] - Found 1 initial candidates from vector search
2025-04-06 00:47:53,577 [INFO] text2sql.feedback [feedback_manager.py:367]: Less than 3 candidates, skipping reranking
2025-04-06 00:47:53 - INFO - [feedback_manager.py:367] - Less than 3 candidates, skipping reranking
2025-04-06 00:47:53,578 [INFO] text2sql.sql_generator [sql_generator.py:280]: Found 1 similar queries with reranking
2025-04-06 00:47:53,579 [INFO] text2sql.sql_generator [sql_generator.py:302]: Added similar query #1 from feedback (score: 0.5176): get me all the customers...
2025-04-06 00:47:53,579 [INFO] text2sql.azure [azure_client.py:35]: SQL generation started for query: 'get me count of customers by order date'
2025-04-06 00:47:53 - INFO - [azure_client.py:35] - SQL generation started for query: 'get me count of customers by order date'
2025-04-06 00:47:53,580 [INFO] text2sql.azure [azure_client.py:69]: Including schema information (404 chars)
2025-04-06 00:47:53 - INFO - [azure_client.py:69] - Including schema information (404 chars)
2025-04-06 00:47:53,581 [INFO] text2sql.azure [azure_client.py:76]: Including 2 join conditions
2025-04-06 00:47:53 - INFO - [azure_client.py:76] - Including 2 join conditions
2025-04-06 00:47:53,582 [INFO] text2sql.azure [azure_client.py:97]: Including 1 SQL examples from feedback similarity search
2025-04-06 00:47:53 - INFO - [azure_client.py:97] - Including 1 SQL examples from feedback similarity search
2025-04-06 00:47:53,583 [INFO] text2sql.azure [azure_client.py:114]: PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER): Unique order identifier, customer_id (INTEGER): Reference to customer who placed the order, order_date (TEXT): Date when order was placed\nPrimary Key(s): order_id\n\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER): Unique customer identifier\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Use the following pre-defined join conditions when joining these tables:\n- When joining customers with orders, use: INNER JOIN orders ON customers.customer_id = orders.customer_id\n- When joining customers with customers, use: LEFT JOIN customers ON a=a\n'}, {'role': 'user', 'content': 'Here are some similar queries that were previously successful:\nQuestion: get me all the customers\nSQL: SELECT * FROM customers;\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me count of customers by order date'}]
2025-04-06 00:47:53 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER): Unique order identifier, customer_id (INTEGER): Reference to customer who placed the order, order_date (TEXT): Date when order was placed\nPrimary Key(s): order_id\n\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER): Unique customer identifier\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Use the following pre-defined join conditions when joining these tables:\n- When joining customers with orders, use: INNER JOIN orders ON customers.customer_id = orders.customer_id\n- When joining customers with customers, use: LEFT JOIN customers ON a=a\n'}, {'role': 'user', 'content': 'Here are some similar queries that were previously successful:\nQuestion: get me all the customers\nSQL: SELECT * FROM customers;\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me count of customers by order date'}]
2025-04-06 00:47:53,584 [INFO] text2sql.llm_engine [llm_engine.py:56]: [SQL_GEN] Completion generation started
2025-04-06 00:47:53 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-06 00:47:53,660 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:47:53] "GET /api/query/progress/3fb4011f-18dc-4621-9684-0778f729deb0 HTTP/1.1" 200 -
2025-04-06 00:47:54,469 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:47:54] "GET /api/query/progress/3fb4011f-18dc-4621-9684-0778f729deb0 HTTP/1.1" 200 -
2025-04-06 00:47:54,723 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:47:54] "GET /api/query/progress/3fb4011f-18dc-4621-9684-0778f729deb0 HTTP/1.1" 200 -
2025-04-06 00:47:55,141 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:47:55] "GET /api/query/progress/3fb4011f-18dc-4621-9684-0778f729deb0 HTTP/1.1" 200 -
2025-04-06 00:47:55,359 [INFO] text2sql.llm_engine [llm_engine.py:119]: [SQL_GEN] Completion generation completed in 1.78s
2025-04-06 00:47:55 - INFO - [llm_engine.py:119] - [SQL_GEN] Completion generation completed in 1.78s
2025-04-06 00:47:55,364 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-06 00:47:55 - INFO - [llm_engine.py:120] - **************************
2025-04-06 00:47:55,370 [INFO] text2sql.azure [azure_client.py:150]: Parsing SQL from model response
2025-04-06 00:47:55 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-06 00:47:55,377 [INFO] text2sql.azure [azure_client.py:157]: Found SQL code block in response
2025-04-06 00:47:55 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-06 00:47:55,385 [INFO] text2sql.azure [azure_client.py:171]: Extracted SQL query (197 chars) and explanation (87 chars)
2025-04-06 00:47:55 - INFO - [azure_client.py:171] - Extracted SQL query (197 chars) and explanation (87 chars)
2025-04-06 00:47:55,390 [INFO] text2sql.azure [azure_client.py:124]: Generated SQL: SELECT 
    orders.order_date,
    COUNT(DISTINCT customers.customer_id) AS customer_count
FROM customers
INNER JOIN orders ON customers.customer_id = orders.customer_id
GROUP BY orders.order_date;
2025-04-06 00:47:55 - INFO - [azure_client.py:124] - Generated SQL: SELECT 
    orders.order_date,
    COUNT(DISTINCT customers.customer_id) AS customer_count
FROM customers
INNER JOIN orders ON customers.customer_id = orders.customer_id
GROUP BY orders.order_date;
2025-04-06 00:47:55,397 [INFO] text2sql.azure [azure_client.py:132]: SQL generation completed in 1.82s
2025-04-06 00:47:55 - INFO - [azure_client.py:132] - SQL generation completed in 1.82s
2025-04-06 00:47:55,401 [INFO] text2sql.database [database.py:65]: Executing SQL query: SELECT 
    orders.order_date,
    COUNT(DISTINCT customers.customer_id) AS customer_count
FROM customers
INNER JOIN orders ON customers.customer_id = orders.customer_id
GROUP BY orders.order_date;
2025-04-06 00:47:55 - INFO - [database.py:65] - Executing SQL query: SELECT 
    orders.order_date,
    COUNT(DISTINCT customers.customer_id) AS customer_count
FROM customers
INNER JOIN orders ON customers.customer_id = orders.customer_id
GROUP BY orders.order_date;
2025-04-06 00:47:55,409 [INFO] text2sql.database [database.py:86]: Query returned 8 rows with 2 columns
2025-04-06 00:47:55 - INFO - [database.py:86] - Query returned 8 rows with 2 columns
2025-04-06 00:47:55,415 [INFO] text2sql.database [database.py:95]: Query processing completed in 0.01s
2025-04-06 00:47:55 - INFO - [database.py:95] - Query processing completed in 0.01s
2025-04-06 00:47:55,419 [INFO] text2sql.sql_generator [sql_generator.py:376]: SQL generation completed in 8.13s
2025-04-06 00:47:55,420 [INFO] text2sql.sql_generator [sql_generator.py:125]: Query processing completed in 8.13s
2025-04-06 00:47:55,932 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:47:55] "GET /api/query/progress/3fb4011f-18dc-4621-9684-0778f729deb0 HTTP/1.1" 200 -
2025-04-06 00:48:20,471 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'get me count of customers by order month'
2025-04-06 00:48:20,472 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'get me count of customers by order month'
2025-04-06 00:48:20,473 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:48:20] "POST /api/query HTTP/1.1" 200 -
2025-04-06 00:48:20,473 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-06 00:48:20,474 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.00s
2025-04-06 00:48:20,475 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-06 00:48:20,476 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-06 00:48:20,477 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-06 00:48:20 - INFO - [database.py:44] - Attempting database connection
2025-04-06 00:48:20,479 [INFO] text2sql.database [database.py:48]: Database connection established in 0.00s
2025-04-06 00:48:20 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-06 00:48:20,481 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'get me count of customers by order month'
2025-04-06 00:48:20,482 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (6): customers, products, orders, order_items, sales_metrics, db1.customers
2025-04-06 00:48:20,483 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-06 00:48:20,483 [INFO] text2sql.llm_engine [llm_engine.py:56]: [TABLE] Completion generation started
2025-04-06 00:48:20 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-06 00:48:21,279 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:48:21] "GET /api/query/progress/27c47307-4702-45ee-a0a0-55de55a78811 HTTP/1.1" 200 -
2025-04-06 00:48:21,527 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:48:21] "GET /api/query/progress/27c47307-4702-45ee-a0a0-55de55a78811 HTTP/1.1" 200 -
2025-04-06 00:48:21,965 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:48:21] "GET /api/query/progress/27c47307-4702-45ee-a0a0-55de55a78811 HTTP/1.1" 200 -
2025-04-06 00:48:22,094 [INFO] text2sql.llm_engine [llm_engine.py:119]: [TABLE] Completion generation completed in 1.61s
2025-04-06 00:48:22 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 1.61s
2025-04-06 00:48:22,097 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-06 00:48:22 - INFO - [llm_engine.py:120] - **************************
2025-04-06 00:48:22,101 [INFO] text2sql.agents.table [table_agent.py:69]: Raw model response: 'customers, orders'
2025-04-06 00:48:22,102 [INFO] text2sql.agents.table [table_agent.py:90]: Table selection completed in 1.62s. Selected: customers, orders
2025-04-06 00:48:22,103 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'get me count of customers by order month'
2025-04-06 00:48:22,105 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: customers, orders
2025-04-06 00:48:22,107 [INFO] text2sql.agents.column [column_agent.py:94]: Sending request to AI model for column selection
2025-04-06 00:48:22,108 [INFO] text2sql.llm_engine [llm_engine.py:56]: [COLUMN] Completion generation started
2025-04-06 00:48:22 - INFO - [llm_engine.py:56] - [COLUMN] Completion generation started
2025-04-06 00:48:22,741 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:48:22] "GET /api/query/progress/27c47307-4702-45ee-a0a0-55de55a78811 HTTP/1.1" 200 -
2025-04-06 00:48:22,998 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:48:22] "GET /api/query/progress/27c47307-4702-45ee-a0a0-55de55a78811 HTTP/1.1" 200 -
2025-04-06 00:48:23,432 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:48:23] "GET /api/query/progress/27c47307-4702-45ee-a0a0-55de55a78811 HTTP/1.1" 200 -
2025-04-06 00:48:23,490 [INFO] text2sql.llm_engine [llm_engine.py:119]: [COLUMN] Completion generation completed in 1.38s
2025-04-06 00:48:23 - INFO - [llm_engine.py:119] - [COLUMN] Completion generation completed in 1.38s
2025-04-06 00:48:23,492 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-06 00:48:23 - INFO - [llm_engine.py:120] - **************************
2025-04-06 00:48:23,493 [INFO] text2sql.agents.column [column_agent.py:99]: Raw model response: '{
  "customers": ["customer_id"],
  "orders": ["order_id", "customer_id", "order_date"]
}'
2025-04-06 00:48:23,495 [INFO] text2sql.agents.column [column_agent.py:139]: Parsing column selection from model response
2025-04-06 00:48:23,495 [INFO] text2sql.agents.column [column_agent.py:149]: Parsed column selection JSON: {"customers": ["customer_id"], "orders": ["order_id", "customer_id", "order_date"]}
2025-04-06 00:48:23,496 [INFO] text2sql.agents.column [column_agent.py:111]: Table 'customers': Pruned 10 columns, kept 1/11
2025-04-06 00:48:23,497 [INFO] text2sql.agents.column [column_agent.py:111]: Table 'orders': Pruned 2 columns, kept 3/5
2025-04-06 00:48:23,499 [INFO] text2sql.agents.column [column_agent.py:197]: Building pruned schema
2025-04-06 00:48:23,500 [INFO] text2sql.agents.column [column_agent.py:226]: Built pruned schema (404 chars)
2025-04-06 00:48:23,500 [INFO] text2sql.agents.column [column_agent.py:120]: Column pruning completed in 1.40s
2025-04-06 00:48:23,501 [INFO] text2sql.sql_generator [sql_generator.py:237]: Found 2 join conditions for the relevant tables
2025-04-06 00:48:23,502 [INFO] text2sql.feedback [feedback_manager.py:267]: Stage 1: Vector search for 'get me count of customers by order month...'
2025-04-06 00:48:23 - INFO - [feedback_manager.py:267] - Stage 1: Vector search for 'get me count of customers by order month...'
2025-04-06 00:48:23,532 [INFO] text2sql.feedback [feedback_manager.py:322]: Found 1 initial candidates from vector search
2025-04-06 00:48:23 - INFO - [feedback_manager.py:322] - Found 1 initial candidates from vector search
2025-04-06 00:48:23,532 [INFO] text2sql.feedback [feedback_manager.py:367]: Less than 3 candidates, skipping reranking
2025-04-06 00:48:23 - INFO - [feedback_manager.py:367] - Less than 3 candidates, skipping reranking
2025-04-06 00:48:23,534 [INFO] text2sql.sql_generator [sql_generator.py:280]: Found 1 similar queries with reranking
2025-04-06 00:48:23,535 [INFO] text2sql.sql_generator [sql_generator.py:302]: Added similar query #1 from feedback (score: 0.5187): get me all the customers...
2025-04-06 00:48:23,535 [INFO] text2sql.azure [azure_client.py:35]: SQL generation started for query: 'get me count of customers by order month'
2025-04-06 00:48:23 - INFO - [azure_client.py:35] - SQL generation started for query: 'get me count of customers by order month'
2025-04-06 00:48:23,536 [INFO] text2sql.azure [azure_client.py:69]: Including schema information (404 chars)
2025-04-06 00:48:23 - INFO - [azure_client.py:69] - Including schema information (404 chars)
2025-04-06 00:48:23,537 [INFO] text2sql.azure [azure_client.py:76]: Including 2 join conditions
2025-04-06 00:48:23 - INFO - [azure_client.py:76] - Including 2 join conditions
2025-04-06 00:48:23,538 [INFO] text2sql.azure [azure_client.py:97]: Including 1 SQL examples from feedback similarity search
2025-04-06 00:48:23 - INFO - [azure_client.py:97] - Including 1 SQL examples from feedback similarity search
2025-04-06 00:48:23,539 [INFO] text2sql.azure [azure_client.py:114]: PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER): Unique customer identifier\nPrimary Key(s): customer_id\n\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER): Unique order identifier, customer_id (INTEGER): Reference to customer who placed the order, order_date (TEXT): Date when order was placed\nPrimary Key(s): order_id\n"}, {'role': 'user', 'content': 'Use the following pre-defined join conditions when joining these tables:\n- When joining customers with orders, use: INNER JOIN orders ON customers.customer_id = orders.customer_id\n- When joining customers with customers, use: LEFT JOIN customers ON a=a\n'}, {'role': 'user', 'content': 'Here are some similar queries that were previously successful:\nQuestion: get me all the customers\nSQL: SELECT * FROM customers;\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me count of customers by order month'}]
2025-04-06 00:48:23 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER): Unique customer identifier\nPrimary Key(s): customer_id\n\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER): Unique order identifier, customer_id (INTEGER): Reference to customer who placed the order, order_date (TEXT): Date when order was placed\nPrimary Key(s): order_id\n"}, {'role': 'user', 'content': 'Use the following pre-defined join conditions when joining these tables:\n- When joining customers with orders, use: INNER JOIN orders ON customers.customer_id = orders.customer_id\n- When joining customers with customers, use: LEFT JOIN customers ON a=a\n'}, {'role': 'user', 'content': 'Here are some similar queries that were previously successful:\nQuestion: get me all the customers\nSQL: SELECT * FROM customers;\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me count of customers by order month'}]
2025-04-06 00:48:23,540 [INFO] text2sql.llm_engine [llm_engine.py:56]: [SQL_GEN] Completion generation started
2025-04-06 00:48:23 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-06 00:48:24,244 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:48:24] "GET /api/query/progress/27c47307-4702-45ee-a0a0-55de55a78811 HTTP/1.1" 200 -
2025-04-06 00:48:24,493 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:48:24] "GET /api/query/progress/27c47307-4702-45ee-a0a0-55de55a78811 HTTP/1.1" 200 -
2025-04-06 00:48:24,909 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:48:24] "GET /api/query/progress/27c47307-4702-45ee-a0a0-55de55a78811 HTTP/1.1" 200 -
2025-04-06 00:48:25,050 [INFO] text2sql.llm_engine [llm_engine.py:119]: [SQL_GEN] Completion generation completed in 1.51s
2025-04-06 00:48:25 - INFO - [llm_engine.py:119] - [SQL_GEN] Completion generation completed in 1.51s
2025-04-06 00:48:25,052 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-06 00:48:25 - INFO - [llm_engine.py:120] - **************************
2025-04-06 00:48:25,053 [INFO] text2sql.azure [azure_client.py:150]: Parsing SQL from model response
2025-04-06 00:48:25 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-06 00:48:25,055 [INFO] text2sql.azure [azure_client.py:157]: Found SQL code block in response
2025-04-06 00:48:25 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-06 00:48:25,056 [INFO] text2sql.azure [azure_client.py:171]: Extracted SQL query (244 chars) and explanation (189 chars)
2025-04-06 00:48:25 - INFO - [azure_client.py:171] - Extracted SQL query (244 chars) and explanation (189 chars)
2025-04-06 00:48:25,057 [INFO] text2sql.azure [azure_client.py:124]: Generated SQL: SELECT 
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id
GROUP BY 
    order_month
ORDER BY 
    order_month;
2025-04-06 00:48:25 - INFO - [azure_client.py:124] - Generated SQL: SELECT 
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id
GROUP BY 
    order_month
ORDER BY 
    order_month;
2025-04-06 00:48:25,059 [INFO] text2sql.azure [azure_client.py:132]: SQL generation completed in 1.52s
2025-04-06 00:48:25 - INFO - [azure_client.py:132] - SQL generation completed in 1.52s
2025-04-06 00:48:25,060 [INFO] text2sql.database [database.py:65]: Executing SQL query: SELECT 
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id
GROUP BY 
    order_month
ORDER BY 
    order_month;
2025-04-06 00:48:25 - INFO - [database.py:65] - Executing SQL query: SELECT 
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id
GROUP BY 
    order_month
ORDER BY 
    order_month;
2025-04-06 00:48:25,063 [INFO] text2sql.database [database.py:86]: Query returned 2 rows with 2 columns
2025-04-06 00:48:25 - INFO - [database.py:86] - Query returned 2 rows with 2 columns
2025-04-06 00:48:25,066 [INFO] text2sql.database [database.py:95]: Query processing completed in 0.01s
2025-04-06 00:48:25 - INFO - [database.py:95] - Query processing completed in 0.01s
2025-04-06 00:48:25,068 [INFO] text2sql.sql_generator [sql_generator.py:376]: SQL generation completed in 4.59s
2025-04-06 00:48:25,068 [INFO] text2sql.sql_generator [sql_generator.py:125]: Query processing completed in 4.60s
2025-04-06 00:48:25,696 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:48:25] "GET /api/query/progress/27c47307-4702-45ee-a0a0-55de55a78811 HTTP/1.1" 200 -
2025-04-06 00:48:59,565 [INFO] text2sql [app.py:312]: Feedback received for query: 'get me count of customers by order month...' - Rating: 1
2025-04-06 00:48:59 - INFO - [app.py:312] - Feedback received for query: 'get me count of customers by order month...' - Rating: 1
2025-04-06 00:48:59,566 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-06 00:48:59 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-06 00:48:59,568 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-06 00:48:59 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-06 00:48:59,571 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-06 00:48:59 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-06 00:48:59,572 [INFO] text2sql.feedback [feedback_manager.py:62]: Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-06 00:48:59 - INFO - [feedback_manager.py:62] - Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-06 00:49:03,163 [INFO] text2sql.feedback [feedback_manager.py:65]: Embedding model loaded in 3.59s
2025-04-06 00:49:03 - INFO - [feedback_manager.py:65] - Embedding model loaded in 3.59s
2025-04-06 00:49:03,224 [INFO] text2sql.feedback [feedback_manager.py:170]: Saved feedback for query: 'get me count of customers by order month...' with rating 1
2025-04-06 00:49:03 - INFO - [feedback_manager.py:170] - Saved feedback for query: 'get me count of customers by order month...' with rating 1
2025-04-06 00:49:03,233 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:49:03] "POST /api/feedback HTTP/1.1" 200 -
2025-04-06 00:49:06,942 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:49:06] "GET /samples HTTP/1.1" 200 -
2025-04-06 00:49:07,182 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:49:07] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 00:49:07,281 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:49:07] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-06 00:49:07,289 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:49:07] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-06 00:49:07,290 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:49:07] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-06 00:49:07,295 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:49:07] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-06 00:49:07,297 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:49:07] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-06 00:49:07,493 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:49:07] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-06 00:49:07,597 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:49:07] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-06 00:49:07,600 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:49:07] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-06 00:49:07,604 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:49:07] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-06 00:49:07,916 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:49:07] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-06 00:49:07,917 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:49:07] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-06 00:49:07,921 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:49:07] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-06 00:49:07,927 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-06 00:49:07 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-06 00:49:07,928 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-06 00:49:07 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-06 00:49:07,930 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-06 00:49:07 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-06 00:49:07,932 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 2 samples (page 1, limit 10)
2025-04-06 00:49:07 - INFO - [feedback_manager.py:531] - Retrieved 2 samples (page 1, limit 10)
2025-04-06 00:49:07,933 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 00:49:07] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-06 10:19:36,769 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 10:19:36] "GET / HTTP/1.1" 200 -
2025-04-06 10:19:36,996 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 10:19:36] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 10:19:37,115 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 10:19:37] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-06 10:19:37,133 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 10:19:37] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-06 10:19:37,135 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 10:19:37] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-06 10:19:37,136 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 10:19:37] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-06 10:19:37,140 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 10:19:37] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-06 10:19:37,305 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 10:19:37] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-06 10:19:37,424 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 10:19:37] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-06 10:19:37,437 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 10:19:37] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-06 10:19:37,767 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 10:19:37] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-06 10:20:05,428 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'get me all the orders'
2025-04-06 10:20:05,429 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 10:20:05] "POST /api/query HTTP/1.1" 200 -
2025-04-06 10:20:05,430 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'get me all the orders'
2025-04-06 10:20:05,432 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-06 10:20:05,432 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.00s
2025-04-06 10:20:05,434 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-06 10:20:05,435 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-06 10:20:05,436 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-06 10:20:05 - INFO - [database.py:44] - Attempting database connection
2025-04-06 10:20:05,450 [INFO] text2sql.database [database.py:48]: Database connection established in 0.01s
2025-04-06 10:20:05 - INFO - [database.py:48] - Database connection established in 0.01s
2025-04-06 10:20:05,451 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'get me all the orders'
2025-04-06 10:20:05,452 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (6): customers, products, orders, order_items, sales_metrics, db1.customers
2025-04-06 10:20:05,454 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-06 10:20:05,455 [INFO] text2sql.llm_engine [llm_engine.py:56]: [TABLE] Completion generation started
2025-04-06 10:20:05 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-06 10:20:06,235 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 10:20:06] "GET /api/query/progress/d07228bc-f6ba-47c4-8405-ecf41e02a801 HTTP/1.1" 200 -
2025-04-06 10:20:06,475 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 10:20:06] "GET /api/query/progress/d07228bc-f6ba-47c4-8405-ecf41e02a801 HTTP/1.1" 200 -
2025-04-06 10:20:06,917 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 10:20:06] "GET /api/query/progress/d07228bc-f6ba-47c4-8405-ecf41e02a801 HTTP/1.1" 200 -
2025-04-06 10:20:07,720 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 10:20:07] "GET /api/query/progress/d07228bc-f6ba-47c4-8405-ecf41e02a801 HTTP/1.1" 200 -
2025-04-06 10:20:07,969 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 10:20:07] "GET /api/query/progress/d07228bc-f6ba-47c4-8405-ecf41e02a801 HTTP/1.1" 200 -
2025-04-06 10:20:08,389 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 10:20:08] "GET /api/query/progress/d07228bc-f6ba-47c4-8405-ecf41e02a801 HTTP/1.1" 200 -
2025-04-06 10:20:09,175 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 10:20:09] "GET /api/query/progress/d07228bc-f6ba-47c4-8405-ecf41e02a801 HTTP/1.1" 200 -
2025-04-06 10:20:09,436 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 10:20:09] "GET /api/query/progress/d07228bc-f6ba-47c4-8405-ecf41e02a801 HTTP/1.1" 200 -
2025-04-06 10:20:09,848 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 10:20:09] "GET /api/query/progress/d07228bc-f6ba-47c4-8405-ecf41e02a801 HTTP/1.1" 200 -
2025-04-06 10:20:10,638 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 10:20:10] "GET /api/query/progress/d07228bc-f6ba-47c4-8405-ecf41e02a801 HTTP/1.1" 200 -
2025-04-06 10:20:10,734 [INFO] text2sql.llm_engine [llm_engine.py:119]: [TABLE] Completion generation completed in 5.28s
2025-04-06 10:20:10 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 5.28s
2025-04-06 10:20:10,735 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-06 10:20:10 - INFO - [llm_engine.py:120] - **************************
2025-04-06 10:20:10,737 [INFO] text2sql.agents.table [table_agent.py:69]: Raw model response: 'orders'
2025-04-06 10:20:10,738 [INFO] text2sql.agents.table [table_agent.py:90]: Table selection completed in 5.29s. Selected: orders
2025-04-06 10:20:10,738 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'get me all the orders'
2025-04-06 10:20:10,739 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: orders
2025-04-06 10:20:10,739 [INFO] text2sql.agents.column [column_agent.py:38]: Only one table involved (orders). Skipping LLM call and including all columns.
2025-04-06 10:20:10,740 [INFO] text2sql.feedback [feedback_manager.py:267]: Stage 1: Vector search for 'get me all the orders...'
2025-04-06 10:20:10 - INFO - [feedback_manager.py:267] - Stage 1: Vector search for 'get me all the orders...'
2025-04-06 10:20:10,886 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 10:20:10] "GET /api/query/progress/d07228bc-f6ba-47c4-8405-ecf41e02a801 HTTP/1.1" 200 -
2025-04-06 10:20:10,936 [INFO] text2sql.feedback [feedback_manager.py:322]: Found 2 initial candidates from vector search
2025-04-06 10:20:10 - INFO - [feedback_manager.py:322] - Found 2 initial candidates from vector search
2025-04-06 10:20:10,937 [INFO] text2sql.feedback [feedback_manager.py:367]: Less than 3 candidates, skipping reranking
2025-04-06 10:20:10 - INFO - [feedback_manager.py:367] - Less than 3 candidates, skipping reranking
2025-04-06 10:20:10,938 [INFO] text2sql.sql_generator [sql_generator.py:280]: Found 2 similar queries with reranking
2025-04-06 10:20:10,938 [INFO] text2sql.sql_generator [sql_generator.py:302]: Added similar query #1 from feedback (score: 0.5707): get me all the customers...
2025-04-06 10:20:10,939 [INFO] text2sql.sql_generator [sql_generator.py:302]: Added similar query #2 from feedback (score: 0.3384): get me count of customers by order month...
2025-04-06 10:20:10,939 [INFO] text2sql.azure [azure_client.py:35]: SQL generation started for query: 'get me all the orders'
2025-04-06 10:20:10 - INFO - [azure_client.py:35] - SQL generation started for query: 'get me all the orders'
2025-04-06 10:20:10,940 [INFO] text2sql.azure [azure_client.py:69]: Including schema information (363 chars)
2025-04-06 10:20:10 - INFO - [azure_client.py:69] - Including schema information (363 chars)
2025-04-06 10:20:10,941 [INFO] text2sql.azure [azure_client.py:97]: Including 2 SQL examples from feedback similarity search
2025-04-06 10:20:10 - INFO - [azure_client.py:97] - Including 2 SQL examples from feedback similarity search
2025-04-06 10:20:10,942 [INFO] text2sql.azure [azure_client.py:114]: PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER) - Unique order identifier, customer_id (INTEGER) - Reference to customer who placed the order, order_date (TEXT) - Date when order was placed, status (TEXT) - Order status (pending, shipped, completed, etc.), total_amount (REAL) - Total order amount\nPrimary Key(s): order_id\n"}, {'role': 'user', 'content': "Here are some similar queries that were previously successful:\nQuestion: get me all the customers\nSQL: SELECT * FROM customers;\n\nQuestion: get me count of customers by order month\nSQL: SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;\n\n"}, {'role': 'user', 'content': 'Convert this question to SQL: get me all the orders'}]
2025-04-06 10:20:10 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER) - Unique order identifier, customer_id (INTEGER) - Reference to customer who placed the order, order_date (TEXT) - Date when order was placed, status (TEXT) - Order status (pending, shipped, completed, etc.), total_amount (REAL) - Total order amount\nPrimary Key(s): order_id\n"}, {'role': 'user', 'content': "Here are some similar queries that were previously successful:\nQuestion: get me all the customers\nSQL: SELECT * FROM customers;\n\nQuestion: get me count of customers by order month\nSQL: SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;\n\n"}, {'role': 'user', 'content': 'Convert this question to SQL: get me all the orders'}]
2025-04-06 10:20:10,943 [INFO] text2sql.llm_engine [llm_engine.py:56]: [SQL_GEN] Completion generation started
2025-04-06 10:20:10 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-06 10:20:12,107 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 10:20:12] "GET /api/query/progress/d07228bc-f6ba-47c4-8405-ecf41e02a801 HTTP/1.1" 200 -
2025-04-06 10:20:13,073 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 10:20:13] "GET /api/query/progress/d07228bc-f6ba-47c4-8405-ecf41e02a801 HTTP/1.1" 200 -
2025-04-06 10:20:13,312 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 10:20:13] "GET /api/query/progress/d07228bc-f6ba-47c4-8405-ecf41e02a801 HTTP/1.1" 200 -
2025-04-06 10:20:13,759 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 10:20:13] "GET /api/query/progress/d07228bc-f6ba-47c4-8405-ecf41e02a801 HTTP/1.1" 200 -
2025-04-06 10:20:14,552 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 10:20:14] "GET /api/query/progress/d07228bc-f6ba-47c4-8405-ecf41e02a801 HTTP/1.1" 200 -
2025-04-06 10:20:14,786 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 10:20:14] "GET /api/query/progress/d07228bc-f6ba-47c4-8405-ecf41e02a801 HTTP/1.1" 200 -
2025-04-06 10:20:15,233 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 10:20:15] "GET /api/query/progress/d07228bc-f6ba-47c4-8405-ecf41e02a801 HTTP/1.1" 200 -
2025-04-06 10:20:15,437 [INFO] text2sql.llm_engine [llm_engine.py:119]: [SQL_GEN] Completion generation completed in 4.49s
2025-04-06 10:20:15 - INFO - [llm_engine.py:119] - [SQL_GEN] Completion generation completed in 4.49s
2025-04-06 10:20:15,439 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-06 10:20:15 - INFO - [llm_engine.py:120] - **************************
2025-04-06 10:20:15,441 [INFO] text2sql.azure [azure_client.py:150]: Parsing SQL from model response
2025-04-06 10:20:15 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-06 10:20:15,442 [INFO] text2sql.azure [azure_client.py:157]: Found SQL code block in response
2025-04-06 10:20:15 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-06 10:20:15,444 [INFO] text2sql.azure [azure_client.py:171]: Extracted SQL query (21 chars) and explanation (73 chars)
2025-04-06 10:20:15 - INFO - [azure_client.py:171] - Extracted SQL query (21 chars) and explanation (73 chars)
2025-04-06 10:20:15,445 [INFO] text2sql.azure [azure_client.py:124]: Generated SQL: SELECT *
FROM orders;
2025-04-06 10:20:15 - INFO - [azure_client.py:124] - Generated SQL: SELECT *
FROM orders;
2025-04-06 10:20:15,447 [INFO] text2sql.azure [azure_client.py:132]: SQL generation completed in 4.51s
2025-04-06 10:20:15 - INFO - [azure_client.py:132] - SQL generation completed in 4.51s
2025-04-06 10:20:15,448 [INFO] text2sql.database [database.py:65]: Executing SQL query: SELECT *
FROM orders;
2025-04-06 10:20:15 - INFO - [database.py:65] - Executing SQL query: SELECT *
FROM orders;
2025-04-06 10:20:15,470 [INFO] text2sql.database [database.py:86]: Query returned 8 rows with 5 columns
2025-04-06 10:20:15 - INFO - [database.py:86] - Query returned 8 rows with 5 columns
2025-04-06 10:20:15,482 [INFO] text2sql.database [database.py:95]: Query processing completed in 0.03s
2025-04-06 10:20:15 - INFO - [database.py:95] - Query processing completed in 0.03s
2025-04-06 10:20:15,484 [INFO] text2sql.sql_generator [sql_generator.py:376]: SQL generation completed in 10.05s
2025-04-06 10:20:15,484 [INFO] text2sql.sql_generator [sql_generator.py:125]: Query processing completed in 10.06s
2025-04-06 10:20:16,027 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 10:20:16] "GET /api/query/progress/d07228bc-f6ba-47c4-8405-ecf41e02a801 HTTP/1.1" 200 -
2025-04-06 10:20:33,415 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'get me count of orders by customer'
2025-04-06 10:20:33,415 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 10:20:33] "POST /api/query HTTP/1.1" 200 -
2025-04-06 10:20:33,416 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'get me count of orders by customer'
2025-04-06 10:20:33,417 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-06 10:20:33,418 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.00s
2025-04-06 10:20:33,419 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-06 10:20:33,419 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-06 10:20:33,420 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-06 10:20:33 - INFO - [database.py:44] - Attempting database connection
2025-04-06 10:20:33,422 [INFO] text2sql.database [database.py:48]: Database connection established in 0.00s
2025-04-06 10:20:33 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-06 10:20:33,424 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'get me count of orders by customer'
2025-04-06 10:20:33,424 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (6): customers, products, orders, order_items, sales_metrics, db1.customers
2025-04-06 10:20:33,425 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-06 10:20:33,425 [INFO] text2sql.llm_engine [llm_engine.py:56]: [TABLE] Completion generation started
2025-04-06 10:20:33 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-06 10:20:34,215 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 10:20:34] "GET /api/query/progress/51676681-d5ec-4b69-80b8-35153a9c7c00 HTTP/1.1" 200 -
2025-04-06 10:20:34,473 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 10:20:34] "GET /api/query/progress/51676681-d5ec-4b69-80b8-35153a9c7c00 HTTP/1.1" 200 -
2025-04-06 10:20:34,896 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 10:20:34] "GET /api/query/progress/51676681-d5ec-4b69-80b8-35153a9c7c00 HTTP/1.1" 200 -
2025-04-06 10:20:35,662 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 10:20:35] "GET /api/query/progress/51676681-d5ec-4b69-80b8-35153a9c7c00 HTTP/1.1" 200 -
2025-04-06 10:20:35,908 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 10:20:35] "GET /api/query/progress/51676681-d5ec-4b69-80b8-35153a9c7c00 HTTP/1.1" 200 -
2025-04-06 10:20:35,911 [INFO] text2sql.llm_engine [llm_engine.py:119]: [TABLE] Completion generation completed in 2.49s
2025-04-06 10:20:35 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 2.49s
2025-04-06 10:20:35,913 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-06 10:20:35 - INFO - [llm_engine.py:120] - **************************
2025-04-06 10:20:35,914 [INFO] text2sql.agents.table [table_agent.py:69]: Raw model response: 'orders'
2025-04-06 10:20:35,915 [INFO] text2sql.agents.table [table_agent.py:90]: Table selection completed in 2.49s. Selected: orders
2025-04-06 10:20:35,916 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'get me count of orders by customer'
2025-04-06 10:20:35,917 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: orders
2025-04-06 10:20:35,917 [INFO] text2sql.agents.column [column_agent.py:38]: Only one table involved (orders). Skipping LLM call and including all columns.
2025-04-06 10:20:35,918 [INFO] text2sql.feedback [feedback_manager.py:267]: Stage 1: Vector search for 'get me count of orders by customer...'
2025-04-06 10:20:35 - INFO - [feedback_manager.py:267] - Stage 1: Vector search for 'get me count of orders by customer...'
2025-04-06 10:20:35,946 [INFO] text2sql.feedback [feedback_manager.py:322]: Found 2 initial candidates from vector search
2025-04-06 10:20:35 - INFO - [feedback_manager.py:322] - Found 2 initial candidates from vector search
2025-04-06 10:20:35,946 [INFO] text2sql.feedback [feedback_manager.py:367]: Less than 3 candidates, skipping reranking
2025-04-06 10:20:35 - INFO - [feedback_manager.py:367] - Less than 3 candidates, skipping reranking
2025-04-06 10:20:35,948 [INFO] text2sql.sql_generator [sql_generator.py:280]: Found 2 similar queries with reranking
2025-04-06 10:20:35,948 [INFO] text2sql.sql_generator [sql_generator.py:302]: Added similar query #1 from feedback (score: 0.8318): get me count of customers by order month...
2025-04-06 10:20:35,948 [INFO] text2sql.sql_generator [sql_generator.py:302]: Added similar query #2 from feedback (score: 0.5396): get me all the customers...
2025-04-06 10:20:35,949 [INFO] text2sql.azure [azure_client.py:35]: SQL generation started for query: 'get me count of orders by customer'
2025-04-06 10:20:35 - INFO - [azure_client.py:35] - SQL generation started for query: 'get me count of orders by customer'
2025-04-06 10:20:35,950 [INFO] text2sql.azure [azure_client.py:69]: Including schema information (363 chars)
2025-04-06 10:20:35 - INFO - [azure_client.py:69] - Including schema information (363 chars)
2025-04-06 10:20:35,950 [INFO] text2sql.azure [azure_client.py:97]: Including 2 SQL examples from feedback similarity search
2025-04-06 10:20:35 - INFO - [azure_client.py:97] - Including 2 SQL examples from feedback similarity search
2025-04-06 10:20:35,952 [INFO] text2sql.azure [azure_client.py:114]: PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER) - Unique order identifier, customer_id (INTEGER) - Reference to customer who placed the order, order_date (TEXT) - Date when order was placed, status (TEXT) - Order status (pending, shipped, completed, etc.), total_amount (REAL) - Total order amount\nPrimary Key(s): order_id\n"}, {'role': 'user', 'content': "Here are some similar queries that were previously successful:\nQuestion: get me count of customers by order month\nSQL: SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;\n\nQuestion: get me all the customers\nSQL: SELECT * FROM customers;\n\n"}, {'role': 'user', 'content': 'Convert this question to SQL: get me count of orders by customer'}]
2025-04-06 10:20:35 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER) - Unique order identifier, customer_id (INTEGER) - Reference to customer who placed the order, order_date (TEXT) - Date when order was placed, status (TEXT) - Order status (pending, shipped, completed, etc.), total_amount (REAL) - Total order amount\nPrimary Key(s): order_id\n"}, {'role': 'user', 'content': "Here are some similar queries that were previously successful:\nQuestion: get me count of customers by order month\nSQL: SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;\n\nQuestion: get me all the customers\nSQL: SELECT * FROM customers;\n\n"}, {'role': 'user', 'content': 'Convert this question to SQL: get me count of orders by customer'}]
2025-04-06 10:20:35,952 [INFO] text2sql.llm_engine [llm_engine.py:56]: [SQL_GEN] Completion generation started
2025-04-06 10:20:35 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-06 10:20:36,327 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 10:20:36] "GET /api/query/progress/51676681-d5ec-4b69-80b8-35153a9c7c00 HTTP/1.1" 200 -
2025-04-06 10:20:37,127 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 10:20:37] "GET /api/query/progress/51676681-d5ec-4b69-80b8-35153a9c7c00 HTTP/1.1" 200 -
2025-04-06 10:20:37,354 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 10:20:37] "GET /api/query/progress/51676681-d5ec-4b69-80b8-35153a9c7c00 HTTP/1.1" 200 -
2025-04-06 10:20:37,779 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 10:20:37] "GET /api/query/progress/51676681-d5ec-4b69-80b8-35153a9c7c00 HTTP/1.1" 200 -
2025-04-06 10:20:38,553 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 10:20:38] "GET /api/query/progress/51676681-d5ec-4b69-80b8-35153a9c7c00 HTTP/1.1" 200 -
2025-04-06 10:20:38,802 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 10:20:38] "GET /api/query/progress/51676681-d5ec-4b69-80b8-35153a9c7c00 HTTP/1.1" 200 -
2025-04-06 10:20:39,214 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 10:20:39] "GET /api/query/progress/51676681-d5ec-4b69-80b8-35153a9c7c00 HTTP/1.1" 200 -
2025-04-06 10:20:40,010 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 10:20:40] "GET /api/query/progress/51676681-d5ec-4b69-80b8-35153a9c7c00 HTTP/1.1" 200 -
2025-04-06 10:20:40,250 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 10:20:40] "GET /api/query/progress/51676681-d5ec-4b69-80b8-35153a9c7c00 HTTP/1.1" 200 -
2025-04-06 10:20:40,660 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 10:20:40] "GET /api/query/progress/51676681-d5ec-4b69-80b8-35153a9c7c00 HTTP/1.1" 200 -
2025-04-06 10:20:41,451 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 10:20:41] "GET /api/query/progress/51676681-d5ec-4b69-80b8-35153a9c7c00 HTTP/1.1" 200 -
2025-04-06 10:20:41,689 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 10:20:41] "GET /api/query/progress/51676681-d5ec-4b69-80b8-35153a9c7c00 HTTP/1.1" 200 -
2025-04-06 10:20:42,125 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 10:20:42] "GET /api/query/progress/51676681-d5ec-4b69-80b8-35153a9c7c00 HTTP/1.1" 200 -
2025-04-06 10:20:42,912 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 10:20:42] "GET /api/query/progress/51676681-d5ec-4b69-80b8-35153a9c7c00 HTTP/1.1" 200 -
2025-04-06 10:20:43,163 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 10:20:43] "GET /api/query/progress/51676681-d5ec-4b69-80b8-35153a9c7c00 HTTP/1.1" 200 -
2025-04-06 10:20:43,601 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 10:20:43] "GET /api/query/progress/51676681-d5ec-4b69-80b8-35153a9c7c00 HTTP/1.1" 200 -
2025-04-06 10:20:44,168 [INFO] text2sql.llm_engine [llm_engine.py:119]: [SQL_GEN] Completion generation completed in 8.22s
2025-04-06 10:20:44 - INFO - [llm_engine.py:119] - [SQL_GEN] Completion generation completed in 8.22s
2025-04-06 10:20:44,171 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-06 10:20:44 - INFO - [llm_engine.py:120] - **************************
2025-04-06 10:20:44,177 [INFO] text2sql.azure [azure_client.py:150]: Parsing SQL from model response
2025-04-06 10:20:44 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-06 10:20:44,182 [INFO] text2sql.azure [azure_client.py:157]: Found SQL code block in response
2025-04-06 10:20:44 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-06 10:20:44,185 [INFO] text2sql.azure [azure_client.py:171]: Extracted SQL query (139 chars) and explanation (77 chars)
2025-04-06 10:20:44 - INFO - [azure_client.py:171] - Extracted SQL query (139 chars) and explanation (77 chars)
2025-04-06 10:20:44,190 [INFO] text2sql.azure [azure_client.py:124]: Generated SQL: SELECT 
    o.customer_id,
    COUNT(o.order_id) AS order_count
FROM 
    orders o
GROUP BY 
    o.customer_id
ORDER BY 
    o.customer_id;
2025-04-06 10:20:44 - INFO - [azure_client.py:124] - Generated SQL: SELECT 
    o.customer_id,
    COUNT(o.order_id) AS order_count
FROM 
    orders o
GROUP BY 
    o.customer_id
ORDER BY 
    o.customer_id;
2025-04-06 10:20:44,195 [INFO] text2sql.azure [azure_client.py:132]: SQL generation completed in 8.25s
2025-04-06 10:20:44 - INFO - [azure_client.py:132] - SQL generation completed in 8.25s
2025-04-06 10:20:44,198 [INFO] text2sql.database [database.py:65]: Executing SQL query: SELECT 
    o.customer_id,
    COUNT(o.order_id) AS order_count
FROM 
    orders o
GROUP BY 
    o.customer_id
ORDER BY 
    o.customer_id;
2025-04-06 10:20:44 - INFO - [database.py:65] - Executing SQL query: SELECT 
    o.customer_id,
    COUNT(o.order_id) AS order_count
FROM 
    orders o
GROUP BY 
    o.customer_id
ORDER BY 
    o.customer_id;
2025-04-06 10:20:44,203 [INFO] text2sql.database [database.py:86]: Query returned 5 rows with 2 columns
2025-04-06 10:20:44 - INFO - [database.py:86] - Query returned 5 rows with 2 columns
2025-04-06 10:20:44,206 [INFO] text2sql.database [database.py:95]: Query processing completed in 0.01s
2025-04-06 10:20:44 - INFO - [database.py:95] - Query processing completed in 0.01s
2025-04-06 10:20:44,209 [INFO] text2sql.sql_generator [sql_generator.py:376]: SQL generation completed in 10.79s
2025-04-06 10:20:44,210 [INFO] text2sql.sql_generator [sql_generator.py:125]: Query processing completed in 10.80s
2025-04-06 10:20:44,390 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 10:20:44] "GET /api/query/progress/51676681-d5ec-4b69-80b8-35153a9c7c00 HTTP/1.1" 200 -
2025-04-06 12:15:15,267 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 12:15:15] "GET /admin/ HTTP/1.1" 200 -
2025-04-06 12:15:15,408 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 12:15:15] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 12:15:15,602 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 12:15:15] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-06 12:15:15,663 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 12:15:15] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-06 12:15:15,954 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 12:15:15] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-06 12:15:22,130 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 12:15:22] "GET /samples HTTP/1.1" 200 -
2025-04-06 12:15:22,371 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 12:15:22] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 12:15:22,465 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 12:15:22] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-06 12:15:22,471 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 12:15:22] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-06 12:15:22,473 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 12:15:22] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-06 12:15:22,479 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 12:15:22] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-06 12:15:22,482 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 12:15:22] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-06 12:15:22,677 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 12:15:22] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-06 12:15:22,784 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 12:15:22] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-06 12:15:22,793 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 12:15:22] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-06 12:15:22,796 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 12:15:22] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-06 12:15:23,119 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 12:15:23] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-06 12:15:23,123 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 12:15:23] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-06 12:15:23,126 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 12:15:23] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-06 12:15:23,138 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-06 12:15:23 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-06 12:15:23,150 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-06 12:15:23 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-06 12:15:23,156 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.01s
2025-04-06 12:15:23 - INFO - [feedback_manager.py:47] - Database connection established in 0.01s
2025-04-06 12:15:23,164 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 2 samples (page 1, limit 10)
2025-04-06 12:15:23 - INFO - [feedback_manager.py:531] - Retrieved 2 samples (page 1, limit 10)
2025-04-06 12:15:23,166 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 12:15:23] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-06 12:15:26,339 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 12:15:26] "GET /admin/users HTTP/1.1" 200 -
2025-04-06 12:15:26,671 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 12:15:26] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 12:15:26,678 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 12:15:26] "[36mGET /static/js/admin/users.js HTTP/1.1[0m" 304 -
2025-04-06 12:15:31,119 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 12:15:31] "GET /admin/users/create HTTP/1.1" 200 -
2025-04-06 12:15:31,451 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 12:15:31] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 12:15:34,775 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 12:15:34] "GET /admin/users HTTP/1.1" 200 -
2025-04-06 12:15:35,108 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 12:15:35] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 12:15:35,114 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 12:15:35] "[36mGET /static/js/admin/users.js HTTP/1.1[0m" 304 -
2025-04-06 12:15:37,170 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 12:15:37] "GET /admin/roles HTTP/1.1" 200 -
2025-04-06 12:15:37,499 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 12:15:37] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 12:15:37,505 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 12:15:37] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-06 12:15:46,435 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 12:15:46] "[35m[1mPOST /admin/api/roles HTTP/1.1[0m" 500 -
2025-04-06 13:42:45,264 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 13:42:45] "GET / HTTP/1.1" 200 -
2025-04-06 13:42:45,501 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 13:42:45] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 13:42:45,595 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 13:42:45] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-06 13:42:45,606 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 13:42:45] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-06 13:42:45,607 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 13:42:45] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-06 13:42:45,611 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 13:42:45] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-06 13:42:45,618 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 13:42:45] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-06 13:42:45,806 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 13:42:45] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-06 13:42:45,893 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 13:42:45] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-06 13:42:45,918 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 13:42:45] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-06 13:42:46,245 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 13:42:46] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-06 19:10:42,304 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'get me all the orders'
2025-04-06 19:10:42,306 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:10:42] "POST /api/query HTTP/1.1" 200 -
2025-04-06 19:10:42,309 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'get me all the orders'
2025-04-06 19:10:42,311 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-06 19:10:42,313 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.00s
2025-04-06 19:10:42,313 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-06 19:10:42,314 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-06 19:10:42,314 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-06 19:10:42 - INFO - [database.py:44] - Attempting database connection
2025-04-06 19:10:42,327 [INFO] text2sql.database [database.py:48]: Database connection established in 0.01s
2025-04-06 19:10:42 - INFO - [database.py:48] - Database connection established in 0.01s
2025-04-06 19:10:42,328 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'get me all the orders'
2025-04-06 19:10:42,329 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (6): customers, products, orders, order_items, sales_metrics, db1.customers
2025-04-06 19:10:42,333 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-06 19:10:42,334 [INFO] text2sql.llm_engine [llm_engine.py:56]: [TABLE] Completion generation started
2025-04-06 19:10:42 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-06 19:10:42,819 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:10:42] "GET /api/query/progress/d85e238a-fa7e-49f4-905b-b2802ffdff43 HTTP/1.1" 200 -
2025-04-06 19:10:43,612 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:10:43] "GET /api/query/progress/d85e238a-fa7e-49f4-905b-b2802ffdff43 HTTP/1.1" 200 -
2025-04-06 19:10:43,876 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:10:43] "GET /api/query/progress/d85e238a-fa7e-49f4-905b-b2802ffdff43 HTTP/1.1" 200 -
2025-04-06 19:10:44,064 [INFO] text2sql.llm_engine [llm_engine.py:119]: [TABLE] Completion generation completed in 1.73s
2025-04-06 19:10:44 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 1.73s
2025-04-06 19:10:44,065 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-06 19:10:44 - INFO - [llm_engine.py:120] - **************************
2025-04-06 19:10:44,069 [INFO] text2sql.agents.table [table_agent.py:69]: Raw model response: 'orders'
2025-04-06 19:10:44,071 [INFO] text2sql.agents.table [table_agent.py:90]: Table selection completed in 1.74s. Selected: orders
2025-04-06 19:10:44,074 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'get me all the orders'
2025-04-06 19:10:44,076 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: orders
2025-04-06 19:10:44,077 [INFO] text2sql.agents.column [column_agent.py:38]: Only one table involved (orders). Skipping LLM call and including all columns.
2025-04-06 19:10:44,080 [INFO] text2sql.feedback [feedback_manager.py:267]: Stage 1: Vector search for 'get me all the orders...'
2025-04-06 19:10:44 - INFO - [feedback_manager.py:267] - Stage 1: Vector search for 'get me all the orders...'
2025-04-06 19:10:44,277 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:10:44] "GET /api/query/progress/d85e238a-fa7e-49f4-905b-b2802ffdff43 HTTP/1.1" 200 -
2025-04-06 19:10:44,373 [INFO] text2sql.feedback [feedback_manager.py:322]: Found 2 initial candidates from vector search
2025-04-06 19:10:44 - INFO - [feedback_manager.py:322] - Found 2 initial candidates from vector search
2025-04-06 19:10:44,374 [INFO] text2sql.feedback [feedback_manager.py:367]: Less than 3 candidates, skipping reranking
2025-04-06 19:10:44 - INFO - [feedback_manager.py:367] - Less than 3 candidates, skipping reranking
2025-04-06 19:10:44,375 [INFO] text2sql.sql_generator [sql_generator.py:280]: Found 2 similar queries with reranking
2025-04-06 19:10:44,376 [INFO] text2sql.sql_generator [sql_generator.py:302]: Added similar query #1 from feedback (score: 0.5707): get me all the customers...
2025-04-06 19:10:44,376 [INFO] text2sql.sql_generator [sql_generator.py:302]: Added similar query #2 from feedback (score: 0.3384): get me count of customers by order month...
2025-04-06 19:10:44,377 [INFO] text2sql.azure [azure_client.py:35]: SQL generation started for query: 'get me all the orders'
2025-04-06 19:10:44 - INFO - [azure_client.py:35] - SQL generation started for query: 'get me all the orders'
2025-04-06 19:10:44,378 [INFO] text2sql.azure [azure_client.py:69]: Including schema information (363 chars)
2025-04-06 19:10:44 - INFO - [azure_client.py:69] - Including schema information (363 chars)
2025-04-06 19:10:44,379 [INFO] text2sql.azure [azure_client.py:97]: Including 2 SQL examples from feedback similarity search
2025-04-06 19:10:44 - INFO - [azure_client.py:97] - Including 2 SQL examples from feedback similarity search
2025-04-06 19:10:44,381 [INFO] text2sql.azure [azure_client.py:114]: PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER) - Unique order identifier, customer_id (INTEGER) - Reference to customer who placed the order, order_date (TEXT) - Date when order was placed, status (TEXT) - Order status (pending, shipped, completed, etc.), total_amount (REAL) - Total order amount\nPrimary Key(s): order_id\n"}, {'role': 'user', 'content': "Here are some similar queries that were previously successful:\nQuestion: get me all the customers\nSQL: SELECT * FROM customers;\n\nQuestion: get me count of customers by order month\nSQL: SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;\n\n"}, {'role': 'user', 'content': 'Convert this question to SQL: get me all the orders'}]
2025-04-06 19:10:44 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER) - Unique order identifier, customer_id (INTEGER) - Reference to customer who placed the order, order_date (TEXT) - Date when order was placed, status (TEXT) - Order status (pending, shipped, completed, etc.), total_amount (REAL) - Total order amount\nPrimary Key(s): order_id\n"}, {'role': 'user', 'content': "Here are some similar queries that were previously successful:\nQuestion: get me all the customers\nSQL: SELECT * FROM customers;\n\nQuestion: get me count of customers by order month\nSQL: SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;\n\n"}, {'role': 'user', 'content': 'Convert this question to SQL: get me all the orders'}]
2025-04-06 19:10:44,382 [INFO] text2sql.llm_engine [llm_engine.py:56]: [SQL_GEN] Completion generation started
2025-04-06 19:10:44 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-06 19:10:45,062 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:10:45] "GET /api/query/progress/d85e238a-fa7e-49f4-905b-b2802ffdff43 HTTP/1.1" 200 -
2025-04-06 19:10:45,321 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:10:45] "GET /api/query/progress/d85e238a-fa7e-49f4-905b-b2802ffdff43 HTTP/1.1" 200 -
2025-04-06 19:10:45,753 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:10:45] "GET /api/query/progress/d85e238a-fa7e-49f4-905b-b2802ffdff43 HTTP/1.1" 200 -
2025-04-06 19:10:46,429 [INFO] text2sql.llm_engine [llm_engine.py:119]: [SQL_GEN] Completion generation completed in 2.05s
2025-04-06 19:10:46 - INFO - [llm_engine.py:119] - [SQL_GEN] Completion generation completed in 2.05s
2025-04-06 19:10:46,435 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-06 19:10:46 - INFO - [llm_engine.py:120] - **************************
2025-04-06 19:10:46,440 [INFO] text2sql.azure [azure_client.py:150]: Parsing SQL from model response
2025-04-06 19:10:46 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-06 19:10:46,446 [INFO] text2sql.azure [azure_client.py:157]: Found SQL code block in response
2025-04-06 19:10:46 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-06 19:10:46,448 [INFO] text2sql.azure [azure_client.py:171]: Extracted SQL query (21 chars) and explanation (71 chars)
2025-04-06 19:10:46 - INFO - [azure_client.py:171] - Extracted SQL query (21 chars) and explanation (71 chars)
2025-04-06 19:10:46,451 [INFO] text2sql.azure [azure_client.py:124]: Generated SQL: SELECT *
FROM orders;
2025-04-06 19:10:46 - INFO - [azure_client.py:124] - Generated SQL: SELECT *
FROM orders;
2025-04-06 19:10:46,456 [INFO] text2sql.azure [azure_client.py:132]: SQL generation completed in 2.08s
2025-04-06 19:10:46 - INFO - [azure_client.py:132] - SQL generation completed in 2.08s
2025-04-06 19:10:46,458 [INFO] text2sql.database [database.py:65]: Executing SQL query: SELECT *
FROM orders;
2025-04-06 19:10:46 - INFO - [database.py:65] - Executing SQL query: SELECT *
FROM orders;
2025-04-06 19:10:46,498 [INFO] text2sql.database [database.py:86]: Query returned 8 rows with 5 columns
2025-04-06 19:10:46 - INFO - [database.py:86] - Query returned 8 rows with 5 columns
2025-04-06 19:10:46,519 [INFO] text2sql.database [database.py:95]: Query processing completed in 0.06s
2025-04-06 19:10:46 - INFO - [database.py:95] - Query processing completed in 0.06s
2025-04-06 19:10:46,521 [INFO] text2sql.sql_generator [sql_generator.py:376]: SQL generation completed in 4.21s
2025-04-06 19:10:46,522 [INFO] text2sql.sql_generator [sql_generator.py:125]: Query processing completed in 4.22s
2025-04-06 19:10:46,537 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:10:46] "GET /api/query/progress/d85e238a-fa7e-49f4-905b-b2802ffdff43 HTTP/1.1" 200 -
2025-04-06 19:11:20,201 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'get me total amount of orders by customer'
2025-04-06 19:11:20,202 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:11:20] "POST /api/query HTTP/1.1" 200 -
2025-04-06 19:11:20,202 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'get me total amount of orders by customer'
2025-04-06 19:11:20,203 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-06 19:11:20,205 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.00s
2025-04-06 19:11:20,205 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-06 19:11:20,206 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-06 19:11:20,206 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-06 19:11:20 - INFO - [database.py:44] - Attempting database connection
2025-04-06 19:11:20,208 [INFO] text2sql.database [database.py:48]: Database connection established in 0.00s
2025-04-06 19:11:20 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-06 19:11:20,209 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'get me total amount of orders by customer'
2025-04-06 19:11:20,210 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (6): customers, products, orders, order_items, sales_metrics, db1.customers
2025-04-06 19:11:20,210 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-06 19:11:20,211 [INFO] text2sql.llm_engine [llm_engine.py:56]: [TABLE] Completion generation started
2025-04-06 19:11:20 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-06 19:11:21,719 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:11:21] "GET /api/query/progress/6d31df0a-a1ee-458e-a8c8-23b5a11de457 HTTP/1.1" 200 -
2025-04-06 19:11:21,974 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:11:21] "GET /api/query/progress/6d31df0a-a1ee-458e-a8c8-23b5a11de457 HTTP/1.1" 200 -
2025-04-06 19:11:22,382 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:11:22] "GET /api/query/progress/6d31df0a-a1ee-458e-a8c8-23b5a11de457 HTTP/1.1" 200 -
2025-04-06 19:11:22,498 [INFO] text2sql.llm_engine [llm_engine.py:119]: [TABLE] Completion generation completed in 2.29s
2025-04-06 19:11:22 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 2.29s
2025-04-06 19:11:22,503 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-06 19:11:22 - INFO - [llm_engine.py:120] - **************************
2025-04-06 19:11:22,513 [INFO] text2sql.agents.table [table_agent.py:69]: Raw model response: 'orders'
2025-04-06 19:11:22,516 [INFO] text2sql.agents.table [table_agent.py:90]: Table selection completed in 2.31s. Selected: orders
2025-04-06 19:11:22,518 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'get me total amount of orders by customer'
2025-04-06 19:11:22,519 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: orders
2025-04-06 19:11:22,522 [INFO] text2sql.agents.column [column_agent.py:38]: Only one table involved (orders). Skipping LLM call and including all columns.
2025-04-06 19:11:22,523 [INFO] text2sql.feedback [feedback_manager.py:267]: Stage 1: Vector search for 'get me total amount of orders by customer...'
2025-04-06 19:11:22 - INFO - [feedback_manager.py:267] - Stage 1: Vector search for 'get me total amount of orders by customer...'
2025-04-06 19:11:22,569 [INFO] text2sql.feedback [feedback_manager.py:322]: Found 2 initial candidates from vector search
2025-04-06 19:11:22 - INFO - [feedback_manager.py:322] - Found 2 initial candidates from vector search
2025-04-06 19:11:22,570 [INFO] text2sql.feedback [feedback_manager.py:367]: Less than 3 candidates, skipping reranking
2025-04-06 19:11:22 - INFO - [feedback_manager.py:367] - Less than 3 candidates, skipping reranking
2025-04-06 19:11:22,572 [INFO] text2sql.sql_generator [sql_generator.py:280]: Found 2 similar queries with reranking
2025-04-06 19:11:22,572 [INFO] text2sql.sql_generator [sql_generator.py:302]: Added similar query #1 from feedback (score: 0.7934): get me count of customers by order month...
2025-04-06 19:11:22,572 [INFO] text2sql.sql_generator [sql_generator.py:302]: Added similar query #2 from feedback (score: 0.5238): get me all the customers...
2025-04-06 19:11:22,573 [INFO] text2sql.azure [azure_client.py:35]: SQL generation started for query: 'get me total amount of orders by customer'
2025-04-06 19:11:22 - INFO - [azure_client.py:35] - SQL generation started for query: 'get me total amount of orders by customer'
2025-04-06 19:11:22,574 [INFO] text2sql.azure [azure_client.py:69]: Including schema information (363 chars)
2025-04-06 19:11:22 - INFO - [azure_client.py:69] - Including schema information (363 chars)
2025-04-06 19:11:22,575 [INFO] text2sql.azure [azure_client.py:97]: Including 2 SQL examples from feedback similarity search
2025-04-06 19:11:22 - INFO - [azure_client.py:97] - Including 2 SQL examples from feedback similarity search
2025-04-06 19:11:22,576 [INFO] text2sql.azure [azure_client.py:114]: PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER) - Unique order identifier, customer_id (INTEGER) - Reference to customer who placed the order, order_date (TEXT) - Date when order was placed, status (TEXT) - Order status (pending, shipped, completed, etc.), total_amount (REAL) - Total order amount\nPrimary Key(s): order_id\n"}, {'role': 'user', 'content': "Here are some similar queries that were previously successful:\nQuestion: get me count of customers by order month\nSQL: SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;\n\nQuestion: get me all the customers\nSQL: SELECT * FROM customers;\n\n"}, {'role': 'user', 'content': 'Convert this question to SQL: get me total amount of orders by customer'}]
2025-04-06 19:11:22 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER) - Unique order identifier, customer_id (INTEGER) - Reference to customer who placed the order, order_date (TEXT) - Date when order was placed, status (TEXT) - Order status (pending, shipped, completed, etc.), total_amount (REAL) - Total order amount\nPrimary Key(s): order_id\n"}, {'role': 'user', 'content': "Here are some similar queries that were previously successful:\nQuestion: get me count of customers by order month\nSQL: SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;\n\nQuestion: get me all the customers\nSQL: SELECT * FROM customers;\n\n"}, {'role': 'user', 'content': 'Convert this question to SQL: get me total amount of orders by customer'}]
2025-04-06 19:11:22,577 [INFO] text2sql.llm_engine [llm_engine.py:56]: [SQL_GEN] Completion generation started
2025-04-06 19:11:22 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-06 19:11:23,185 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:11:23] "GET /api/query/progress/6d31df0a-a1ee-458e-a8c8-23b5a11de457 HTTP/1.1" 200 -
2025-04-06 19:11:23,452 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:11:23] "GET /api/query/progress/6d31df0a-a1ee-458e-a8c8-23b5a11de457 HTTP/1.1" 200 -
2025-04-06 19:11:23,875 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:11:23] "GET /api/query/progress/6d31df0a-a1ee-458e-a8c8-23b5a11de457 HTTP/1.1" 200 -
2025-04-06 19:11:24,006 [INFO] text2sql.llm_engine [llm_engine.py:119]: [SQL_GEN] Completion generation completed in 1.43s
2025-04-06 19:11:24 - INFO - [llm_engine.py:119] - [SQL_GEN] Completion generation completed in 1.43s
2025-04-06 19:11:24,008 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-06 19:11:24 - INFO - [llm_engine.py:120] - **************************
2025-04-06 19:11:24,009 [INFO] text2sql.azure [azure_client.py:150]: Parsing SQL from model response
2025-04-06 19:11:24 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-06 19:11:24,010 [INFO] text2sql.azure [azure_client.py:157]: Found SQL code block in response
2025-04-06 19:11:24 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-06 19:11:24,011 [INFO] text2sql.azure [azure_client.py:171]: Extracted SQL query (148 chars) and explanation (82 chars)
2025-04-06 19:11:24 - INFO - [azure_client.py:171] - Extracted SQL query (148 chars) and explanation (82 chars)
2025-04-06 19:11:24,012 [INFO] text2sql.azure [azure_client.py:124]: Generated SQL: SELECT 
    o.customer_id,
    SUM(o.total_amount) AS total_order_amount
FROM 
    orders o
GROUP BY 
    o.customer_id
ORDER BY 
    o.customer_id;
2025-04-06 19:11:24 - INFO - [azure_client.py:124] - Generated SQL: SELECT 
    o.customer_id,
    SUM(o.total_amount) AS total_order_amount
FROM 
    orders o
GROUP BY 
    o.customer_id
ORDER BY 
    o.customer_id;
2025-04-06 19:11:24,013 [INFO] text2sql.azure [azure_client.py:132]: SQL generation completed in 1.44s
2025-04-06 19:11:24 - INFO - [azure_client.py:132] - SQL generation completed in 1.44s
2025-04-06 19:11:24,014 [INFO] text2sql.database [database.py:65]: Executing SQL query: SELECT 
    o.customer_id,
    SUM(o.total_amount) AS total_order_amount
FROM 
    orders o
GROUP BY 
    o.customer_id
ORDER BY 
    o.customer_id;
2025-04-06 19:11:24 - INFO - [database.py:65] - Executing SQL query: SELECT 
    o.customer_id,
    SUM(o.total_amount) AS total_order_amount
FROM 
    orders o
GROUP BY 
    o.customer_id
ORDER BY 
    o.customer_id;
2025-04-06 19:11:24,027 [INFO] text2sql.database [database.py:86]: Query returned 5 rows with 2 columns
2025-04-06 19:11:24 - INFO - [database.py:86] - Query returned 5 rows with 2 columns
2025-04-06 19:11:24,029 [INFO] text2sql.database [database.py:95]: Query processing completed in 0.02s
2025-04-06 19:11:24 - INFO - [database.py:95] - Query processing completed in 0.02s
2025-04-06 19:11:24,032 [INFO] text2sql.sql_generator [sql_generator.py:376]: SQL generation completed in 3.83s
2025-04-06 19:11:24,032 [INFO] text2sql.sql_generator [sql_generator.py:125]: Query processing completed in 3.83s
2025-04-06 19:11:24,676 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:11:24] "GET /api/query/progress/6d31df0a-a1ee-458e-a8c8-23b5a11de457 HTTP/1.1" 200 -
2025-04-06 19:12:04,729 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:12:04] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 19:14:03,821 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:14:03] "GET / HTTP/1.1" 200 -
2025-04-06 19:14:04,058 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:14:04] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 19:14:04,178 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:14:04] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-06 19:14:04,182 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:14:04] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-06 19:14:04,188 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:14:04] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-06 19:14:04,198 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:14:04] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-06 19:14:04,204 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:14:04] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-06 19:14:04,376 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:14:04] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-06 19:14:04,494 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:14:04] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-06 19:14:04,495 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:14:04] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-06 19:14:04,828 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:14:04] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-06 19:14:43,094 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'get xx for each customer orders'
2025-04-06 19:14:43,095 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:14:43] "POST /api/query HTTP/1.1" 200 -
2025-04-06 19:14:43,096 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'get xx for each customer orders'
2025-04-06 19:14:43,097 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-06 19:14:43,099 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.00s
2025-04-06 19:14:43,099 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-06 19:14:43,100 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-06 19:14:43,101 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-06 19:14:43 - INFO - [database.py:44] - Attempting database connection
2025-04-06 19:14:43,114 [INFO] text2sql.database [database.py:48]: Database connection established in 0.01s
2025-04-06 19:14:43 - INFO - [database.py:48] - Database connection established in 0.01s
2025-04-06 19:14:43,116 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'get xx for each customer orders'
2025-04-06 19:14:43,116 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (6): customers, products, orders, order_items, sales_metrics, db1.customers
2025-04-06 19:14:43,117 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-06 19:14:43,117 [INFO] text2sql.llm_engine [llm_engine.py:56]: [TABLE] Completion generation started
2025-04-06 19:14:43 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-06 19:14:43,920 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:14:43] "GET /api/query/progress/55c88c3a-856b-4aba-a4a7-1971372b4400 HTTP/1.1" 200 -
2025-04-06 19:14:44,172 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:14:44] "GET /api/query/progress/55c88c3a-856b-4aba-a4a7-1971372b4400 HTTP/1.1" 200 -
2025-04-06 19:14:44,600 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:14:44] "GET /api/query/progress/55c88c3a-856b-4aba-a4a7-1971372b4400 HTTP/1.1" 200 -
2025-04-06 19:14:44,810 [INFO] text2sql.llm_engine [llm_engine.py:119]: [TABLE] Completion generation completed in 1.69s
2025-04-06 19:14:44 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 1.69s
2025-04-06 19:14:44,811 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-06 19:14:44 - INFO - [llm_engine.py:120] - **************************
2025-04-06 19:14:44,811 [INFO] text2sql.agents.table [table_agent.py:69]: Raw model response: 'orders, order_items, customers'
2025-04-06 19:14:44,812 [INFO] text2sql.agents.table [table_agent.py:90]: Table selection completed in 1.70s. Selected: orders, order_items, customers
2025-04-06 19:14:44,812 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'get xx for each customer orders'
2025-04-06 19:14:44,813 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: orders, order_items, customers
2025-04-06 19:14:44,813 [INFO] text2sql.agents.column [column_agent.py:94]: Sending request to AI model for column selection
2025-04-06 19:14:44,814 [INFO] text2sql.llm_engine [llm_engine.py:56]: [COLUMN] Completion generation started
2025-04-06 19:14:44 - INFO - [llm_engine.py:56] - [COLUMN] Completion generation started
2025-04-06 19:14:45,383 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:14:45] "GET /api/query/progress/55c88c3a-856b-4aba-a4a7-1971372b4400 HTTP/1.1" 200 -
2025-04-06 19:14:45,649 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:14:45] "GET /api/query/progress/55c88c3a-856b-4aba-a4a7-1971372b4400 HTTP/1.1" 200 -
2025-04-06 19:14:46,060 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:14:46] "GET /api/query/progress/55c88c3a-856b-4aba-a4a7-1971372b4400 HTTP/1.1" 200 -
2025-04-06 19:14:46,218 [INFO] text2sql.llm_engine [llm_engine.py:119]: [COLUMN] Completion generation completed in 1.40s
2025-04-06 19:14:46 - INFO - [llm_engine.py:119] - [COLUMN] Completion generation completed in 1.40s
2025-04-06 19:14:46,218 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-06 19:14:46 - INFO - [llm_engine.py:120] - **************************
2025-04-06 19:14:46,219 [INFO] text2sql.agents.column [column_agent.py:99]: Raw model response: '{
  "customers": [
    "customer_id",
    "first_name",
    "last_name"
  ],
  "orders": [
    "order_id",
    "customer_id",
    "order_date",
    "status",
    "total_amount"
  ],
  "order_items": [
    "order_id",
    "item_id",
    "product_id",
    "quantity",
    "price"
  ]
}'
2025-04-06 19:14:46,219 [INFO] text2sql.agents.column [column_agent.py:139]: Parsing column selection from model response
2025-04-06 19:14:46,220 [INFO] text2sql.agents.column [column_agent.py:149]: Parsed column selection JSON: {"customers": ["customer_id", "first_name", "last_name"], "orders": ["order_id", "customer_id", "order_date", "status", "total_amount"], "order_items": ["order_id", "item_id", "product_id", "quantity", "price"]}
2025-04-06 19:14:46,220 [INFO] text2sql.agents.column [column_agent.py:111]: Table 'orders': Pruned 0 columns, kept 5/5
2025-04-06 19:14:46,221 [INFO] text2sql.agents.column [column_agent.py:111]: Table 'order_items': Pruned 0 columns, kept 5/5
2025-04-06 19:14:46,221 [INFO] text2sql.agents.column [column_agent.py:111]: Table 'customers': Pruned 8 columns, kept 3/11
2025-04-06 19:14:46,221 [INFO] text2sql.agents.column [column_agent.py:197]: Building pruned schema
2025-04-06 19:14:46,222 [INFO] text2sql.agents.column [column_agent.py:226]: Built pruned schema (941 chars)
2025-04-06 19:14:46,222 [INFO] text2sql.agents.column [column_agent.py:120]: Column pruning completed in 1.41s
2025-04-06 19:14:46,223 [INFO] text2sql.sql_generator [sql_generator.py:237]: Found 3 join conditions for the relevant tables
2025-04-06 19:14:46,223 [INFO] text2sql.feedback [feedback_manager.py:267]: Stage 1: Vector search for 'get xx for each customer orders...'
2025-04-06 19:14:46 - INFO - [feedback_manager.py:267] - Stage 1: Vector search for 'get xx for each customer orders...'
2025-04-06 19:14:46,364 [INFO] text2sql.feedback [feedback_manager.py:322]: Found 2 initial candidates from vector search
2025-04-06 19:14:46 - INFO - [feedback_manager.py:322] - Found 2 initial candidates from vector search
2025-04-06 19:14:46,365 [INFO] text2sql.feedback [feedback_manager.py:367]: Less than 3 candidates, skipping reranking
2025-04-06 19:14:46 - INFO - [feedback_manager.py:367] - Less than 3 candidates, skipping reranking
2025-04-06 19:14:46,366 [INFO] text2sql.sql_generator [sql_generator.py:280]: Found 2 similar queries with reranking
2025-04-06 19:14:46,367 [INFO] text2sql.sql_generator [sql_generator.py:302]: Added similar query #1 from feedback (score: 0.6344): get me count of customers by order month...
2025-04-06 19:14:46,367 [INFO] text2sql.sql_generator [sql_generator.py:302]: Added similar query #2 from feedback (score: 0.5777): get me all the customers...
2025-04-06 19:14:46,368 [INFO] text2sql.azure [azure_client.py:35]: SQL generation started for query: 'get xx for each customer orders'
2025-04-06 19:14:46 - INFO - [azure_client.py:35] - SQL generation started for query: 'get xx for each customer orders'
2025-04-06 19:14:46,369 [INFO] text2sql.azure [azure_client.py:69]: Including schema information (941 chars)
2025-04-06 19:14:46 - INFO - [azure_client.py:69] - Including schema information (941 chars)
2025-04-06 19:14:46,370 [INFO] text2sql.azure [azure_client.py:76]: Including 3 join conditions
2025-04-06 19:14:46 - INFO - [azure_client.py:76] - Including 3 join conditions
2025-04-06 19:14:46,372 [INFO] text2sql.azure [azure_client.py:97]: Including 2 SQL examples from feedback similarity search
2025-04-06 19:14:46 - INFO - [azure_client.py:97] - Including 2 SQL examples from feedback similarity search
2025-04-06 19:14:46,373 [INFO] text2sql.azure [azure_client.py:114]: PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER): Unique order identifier, customer_id (INTEGER): Reference to customer who placed the order, order_date (TEXT): Date when order was placed, status (TEXT): Order status (pending, shipped, completed, etc.), total_amount (REAL): Total order amount\nPrimary Key(s): order_id\n\nTable: order_items\nDescription: Individual items within each order\nColumns: item_id (INTEGER): Unique order item identifier, order_id (INTEGER): Reference to parent order, product_id (INTEGER): Reference to purchased product, quantity (INTEGER): Quantity of product ordered, price (REAL): Price per unit at time of purchase\nPrimary Key(s): item_id\n\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER): Unique customer identifier, first_name (TEXT): Customer's first name, last_name (TEXT): Customer's last name\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Use the following pre-defined join conditions when joining these tables:\n- When joining customers with orders, use: INNER JOIN orders ON customers.customer_id = orders.customer_id\n- When joining orders with order_items, use: INNER JOIN order_items ON orders.order_id = order_items.order_id\n- When joining customers with customers, use: LEFT JOIN customers ON a=a\n'}, {'role': 'user', 'content': "Here are some similar queries that were previously successful:\nQuestion: get me count of customers by order month\nSQL: SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;\n\nQuestion: get me all the customers\nSQL: SELECT * FROM customers;\n\n"}, {'role': 'user', 'content': 'Convert this question to SQL: get xx for each customer orders'}]
2025-04-06 19:14:46 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER): Unique order identifier, customer_id (INTEGER): Reference to customer who placed the order, order_date (TEXT): Date when order was placed, status (TEXT): Order status (pending, shipped, completed, etc.), total_amount (REAL): Total order amount\nPrimary Key(s): order_id\n\nTable: order_items\nDescription: Individual items within each order\nColumns: item_id (INTEGER): Unique order item identifier, order_id (INTEGER): Reference to parent order, product_id (INTEGER): Reference to purchased product, quantity (INTEGER): Quantity of product ordered, price (REAL): Price per unit at time of purchase\nPrimary Key(s): item_id\n\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER): Unique customer identifier, first_name (TEXT): Customer's first name, last_name (TEXT): Customer's last name\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Use the following pre-defined join conditions when joining these tables:\n- When joining customers with orders, use: INNER JOIN orders ON customers.customer_id = orders.customer_id\n- When joining orders with order_items, use: INNER JOIN order_items ON orders.order_id = order_items.order_id\n- When joining customers with customers, use: LEFT JOIN customers ON a=a\n'}, {'role': 'user', 'content': "Here are some similar queries that were previously successful:\nQuestion: get me count of customers by order month\nSQL: SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;\n\nQuestion: get me all the customers\nSQL: SELECT * FROM customers;\n\n"}, {'role': 'user', 'content': 'Convert this question to SQL: get xx for each customer orders'}]
2025-04-06 19:14:46,374 [INFO] text2sql.llm_engine [llm_engine.py:56]: [SQL_GEN] Completion generation started
2025-04-06 19:14:46 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-06 19:14:46,859 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:14:46] "GET /api/query/progress/55c88c3a-856b-4aba-a4a7-1971372b4400 HTTP/1.1" 200 -
2025-04-06 19:14:47,105 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:14:47] "GET /api/query/progress/55c88c3a-856b-4aba-a4a7-1971372b4400 HTTP/1.1" 200 -
2025-04-06 19:14:47,518 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:14:47] "GET /api/query/progress/55c88c3a-856b-4aba-a4a7-1971372b4400 HTTP/1.1" 200 -
2025-04-06 19:14:48,302 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:14:48] "GET /api/query/progress/55c88c3a-856b-4aba-a4a7-1971372b4400 HTTP/1.1" 200 -
2025-04-06 19:14:48,558 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:14:48] "GET /api/query/progress/55c88c3a-856b-4aba-a4a7-1971372b4400 HTTP/1.1" 200 -
2025-04-06 19:14:48,975 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:14:48] "GET /api/query/progress/55c88c3a-856b-4aba-a4a7-1971372b4400 HTTP/1.1" 200 -
2025-04-06 19:14:49,167 [INFO] text2sql.llm_engine [llm_engine.py:119]: [SQL_GEN] Completion generation completed in 2.79s
2025-04-06 19:14:49 - INFO - [llm_engine.py:119] - [SQL_GEN] Completion generation completed in 2.79s
2025-04-06 19:14:49,169 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-06 19:14:49 - INFO - [llm_engine.py:120] - **************************
2025-04-06 19:14:49,170 [INFO] text2sql.azure [azure_client.py:150]: Parsing SQL from model response
2025-04-06 19:14:49 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-06 19:14:49,172 [INFO] text2sql.azure [azure_client.py:157]: Found SQL code block in response
2025-04-06 19:14:49 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-06 19:14:49,173 [INFO] text2sql.azure [azure_client.py:171]: Extracted SQL query (313 chars) and explanation (393 chars)
2025-04-06 19:14:49 - INFO - [azure_client.py:171] - Extracted SQL query (313 chars) and explanation (393 chars)
2025-04-06 19:14:49,174 [INFO] text2sql.azure [azure_client.py:124]: Generated SQL: SELECT
    c.customer_id,
    c.first_name,
    c.last_name,
    COUNT(o.order_id) AS total_orders,
    SUM(o.total_amount) AS total_order_amount
FROM
    customers c
INNER JOIN
    orders o ON c.customer_id = o.customer_id
GROUP BY
    c.customer_id,
    c.first_name,
    c.last_name
ORDER BY
    c.customer_id;
2025-04-06 19:14:49 - INFO - [azure_client.py:124] - Generated SQL: SELECT
    c.customer_id,
    c.first_name,
    c.last_name,
    COUNT(o.order_id) AS total_orders,
    SUM(o.total_amount) AS total_order_amount
FROM
    customers c
INNER JOIN
    orders o ON c.customer_id = o.customer_id
GROUP BY
    c.customer_id,
    c.first_name,
    c.last_name
ORDER BY
    c.customer_id;
2025-04-06 19:14:49,176 [INFO] text2sql.azure [azure_client.py:132]: SQL generation completed in 2.81s
2025-04-06 19:14:49 - INFO - [azure_client.py:132] - SQL generation completed in 2.81s
2025-04-06 19:14:49,177 [INFO] text2sql.database [database.py:65]: Executing SQL query: SELECT
    c.customer_id,
    c.first_name,
    c.last_name,
    COUNT(o.order_id) AS total_orders,
    SUM(o.total_amount) AS total_order_amount
FROM
    customers c
INNER JOIN
    orders o ON c.customer_id = o.customer_id
GROUP BY
    c.customer_id,
    c.first_name,
    c.last_name
ORDER BY
    c.customer_id;
2025-04-06 19:14:49 - INFO - [database.py:65] - Executing SQL query: SELECT
    c.customer_id,
    c.first_name,
    c.last_name,
    COUNT(o.order_id) AS total_orders,
    SUM(o.total_amount) AS total_order_amount
FROM
    customers c
INNER JOIN
    orders o ON c.customer_id = o.customer_id
GROUP BY
    c.customer_id,
    c.first_name,
    c.last_name
ORDER BY
    c.customer_id;
2025-04-06 19:14:49,192 [INFO] text2sql.database [database.py:86]: Query returned 5 rows with 5 columns
2025-04-06 19:14:49 - INFO - [database.py:86] - Query returned 5 rows with 5 columns
2025-04-06 19:14:49,203 [INFO] text2sql.database [database.py:95]: Query processing completed in 0.03s
2025-04-06 19:14:49 - INFO - [database.py:95] - Query processing completed in 0.03s
2025-04-06 19:14:49,205 [INFO] text2sql.sql_generator [sql_generator.py:376]: SQL generation completed in 6.11s
2025-04-06 19:14:49,206 [INFO] text2sql.sql_generator [sql_generator.py:125]: Query processing completed in 6.11s
2025-04-06 19:14:49,757 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:14:49] "GET /api/query/progress/55c88c3a-856b-4aba-a4a7-1971372b4400 HTTP/1.1" 200 -
2025-04-06 19:15:05,404 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'get column dfdf for each customer orders'
2025-04-06 19:15:05,405 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:15:05] "POST /api/query HTTP/1.1" 200 -
2025-04-06 19:15:05,405 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'get column dfdf for each customer orders'
2025-04-06 19:15:05,407 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-06 19:15:05,408 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.00s
2025-04-06 19:15:05,409 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-06 19:15:05,409 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-06 19:15:05,410 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-06 19:15:05 - INFO - [database.py:44] - Attempting database connection
2025-04-06 19:15:05,412 [INFO] text2sql.database [database.py:48]: Database connection established in 0.00s
2025-04-06 19:15:05 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-06 19:15:05,414 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'get column dfdf for each customer orders'
2025-04-06 19:15:05,414 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (6): customers, products, orders, order_items, sales_metrics, db1.customers
2025-04-06 19:15:05,418 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-06 19:15:05,419 [INFO] text2sql.llm_engine [llm_engine.py:56]: [TABLE] Completion generation started
2025-04-06 19:15:05 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-06 19:15:06,219 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:15:06] "GET /api/query/progress/f467b068-6b1a-4b7e-ba78-014bce5fcc5d HTTP/1.1" 200 -
2025-04-06 19:15:06,463 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:15:06] "GET /api/query/progress/f467b068-6b1a-4b7e-ba78-014bce5fcc5d HTTP/1.1" 200 -
2025-04-06 19:15:06,895 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:15:06] "GET /api/query/progress/f467b068-6b1a-4b7e-ba78-014bce5fcc5d HTTP/1.1" 200 -
2025-04-06 19:15:07,307 [INFO] text2sql.llm_engine [llm_engine.py:119]: [TABLE] Completion generation completed in 1.89s
2025-04-06 19:15:07 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 1.89s
2025-04-06 19:15:07,309 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-06 19:15:07 - INFO - [llm_engine.py:120] - **************************
2025-04-06 19:15:07,310 [INFO] text2sql.agents.table [table_agent.py:69]: Raw model response: 'orders'
2025-04-06 19:15:07,310 [INFO] text2sql.agents.table [table_agent.py:90]: Table selection completed in 1.90s. Selected: orders
2025-04-06 19:15:07,311 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'get column dfdf for each customer orders'
2025-04-06 19:15:07,312 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: orders
2025-04-06 19:15:07,313 [INFO] text2sql.agents.column [column_agent.py:38]: Only one table involved (orders). Skipping LLM call and including all columns.
2025-04-06 19:15:07,313 [INFO] text2sql.feedback [feedback_manager.py:267]: Stage 1: Vector search for 'get column dfdf for each customer orders...'
2025-04-06 19:15:07 - INFO - [feedback_manager.py:267] - Stage 1: Vector search for 'get column dfdf for each customer orders...'
2025-04-06 19:15:07,345 [INFO] text2sql.feedback [feedback_manager.py:322]: Found 2 initial candidates from vector search
2025-04-06 19:15:07 - INFO - [feedback_manager.py:322] - Found 2 initial candidates from vector search
2025-04-06 19:15:07,345 [INFO] text2sql.feedback [feedback_manager.py:367]: Less than 3 candidates, skipping reranking
2025-04-06 19:15:07 - INFO - [feedback_manager.py:367] - Less than 3 candidates, skipping reranking
2025-04-06 19:15:07,346 [INFO] text2sql.sql_generator [sql_generator.py:280]: Found 2 similar queries with reranking
2025-04-06 19:15:07,346 [INFO] text2sql.sql_generator [sql_generator.py:302]: Added similar query #1 from feedback (score: 0.5210): get me count of customers by order month...
2025-04-06 19:15:07,346 [INFO] text2sql.sql_generator [sql_generator.py:302]: Added similar query #2 from feedback (score: 0.3723): get me all the customers...
2025-04-06 19:15:07,347 [INFO] text2sql.azure [azure_client.py:35]: SQL generation started for query: 'get column dfdf for each customer orders'
2025-04-06 19:15:07 - INFO - [azure_client.py:35] - SQL generation started for query: 'get column dfdf for each customer orders'
2025-04-06 19:15:07,348 [INFO] text2sql.azure [azure_client.py:69]: Including schema information (363 chars)
2025-04-06 19:15:07 - INFO - [azure_client.py:69] - Including schema information (363 chars)
2025-04-06 19:15:07,349 [INFO] text2sql.azure [azure_client.py:97]: Including 2 SQL examples from feedback similarity search
2025-04-06 19:15:07 - INFO - [azure_client.py:97] - Including 2 SQL examples from feedback similarity search
2025-04-06 19:15:07,350 [INFO] text2sql.azure [azure_client.py:114]: PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER) - Unique order identifier, customer_id (INTEGER) - Reference to customer who placed the order, order_date (TEXT) - Date when order was placed, status (TEXT) - Order status (pending, shipped, completed, etc.), total_amount (REAL) - Total order amount\nPrimary Key(s): order_id\n"}, {'role': 'user', 'content': "Here are some similar queries that were previously successful:\nQuestion: get me count of customers by order month\nSQL: SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;\n\nQuestion: get me all the customers\nSQL: SELECT * FROM customers;\n\n"}, {'role': 'user', 'content': 'Convert this question to SQL: get column dfdf for each customer orders'}]
2025-04-06 19:15:07 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER) - Unique order identifier, customer_id (INTEGER) - Reference to customer who placed the order, order_date (TEXT) - Date when order was placed, status (TEXT) - Order status (pending, shipped, completed, etc.), total_amount (REAL) - Total order amount\nPrimary Key(s): order_id\n"}, {'role': 'user', 'content': "Here are some similar queries that were previously successful:\nQuestion: get me count of customers by order month\nSQL: SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;\n\nQuestion: get me all the customers\nSQL: SELECT * FROM customers;\n\n"}, {'role': 'user', 'content': 'Convert this question to SQL: get column dfdf for each customer orders'}]
2025-04-06 19:15:07,351 [INFO] text2sql.llm_engine [llm_engine.py:56]: [SQL_GEN] Completion generation started
2025-04-06 19:15:07 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-06 19:15:07,684 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:15:07] "GET /api/query/progress/f467b068-6b1a-4b7e-ba78-014bce5fcc5d HTTP/1.1" 200 -
2025-04-06 19:15:07,949 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:15:07] "GET /api/query/progress/f467b068-6b1a-4b7e-ba78-014bce5fcc5d HTTP/1.1" 200 -
2025-04-06 19:15:08,372 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:15:08] "GET /api/query/progress/f467b068-6b1a-4b7e-ba78-014bce5fcc5d HTTP/1.1" 200 -
2025-04-06 19:15:09,174 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:15:09] "GET /api/query/progress/f467b068-6b1a-4b7e-ba78-014bce5fcc5d HTTP/1.1" 200 -
2025-04-06 19:15:09,418 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:15:09] "GET /api/query/progress/f467b068-6b1a-4b7e-ba78-014bce5fcc5d HTTP/1.1" 200 -
2025-04-06 19:15:09,853 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:15:09] "GET /api/query/progress/f467b068-6b1a-4b7e-ba78-014bce5fcc5d HTTP/1.1" 200 -
2025-04-06 19:15:10,639 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:15:10] "GET /api/query/progress/f467b068-6b1a-4b7e-ba78-014bce5fcc5d HTTP/1.1" 200 -
2025-04-06 19:15:10,911 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:15:10] "GET /api/query/progress/f467b068-6b1a-4b7e-ba78-014bce5fcc5d HTTP/1.1" 200 -
2025-04-06 19:15:11,327 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:15:11] "GET /api/query/progress/f467b068-6b1a-4b7e-ba78-014bce5fcc5d HTTP/1.1" 200 -
2025-04-06 19:15:11,453 [INFO] text2sql.llm_engine [llm_engine.py:119]: [SQL_GEN] Completion generation completed in 4.10s
2025-04-06 19:15:11 - INFO - [llm_engine.py:119] - [SQL_GEN] Completion generation completed in 4.10s
2025-04-06 19:15:11,454 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-06 19:15:11 - INFO - [llm_engine.py:120] - **************************
2025-04-06 19:15:11,454 [INFO] text2sql.azure [azure_client.py:150]: Parsing SQL from model response
2025-04-06 19:15:11 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-06 19:15:11,456 [INFO] text2sql.azure [azure_client.py:157]: Found SQL code block in response
2025-04-06 19:15:11 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-06 19:15:11,457 [INFO] text2sql.azure [azure_client.py:171]: Extracted SQL query (118 chars) and explanation (799 chars)
2025-04-06 19:15:11 - INFO - [azure_client.py:171] - Extracted SQL query (118 chars) and explanation (799 chars)
2025-04-06 19:15:11,458 [INFO] text2sql.azure [azure_client.py:124]: Generated SQL: SELECT 
    c.customer_id,
    o.dfdf
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id;
2025-04-06 19:15:11 - INFO - [azure_client.py:124] - Generated SQL: SELECT 
    c.customer_id,
    o.dfdf
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id;
2025-04-06 19:15:11,459 [INFO] text2sql.azure [azure_client.py:132]: SQL generation completed in 4.11s
2025-04-06 19:15:11 - INFO - [azure_client.py:132] - SQL generation completed in 4.11s
2025-04-06 19:15:11,460 [INFO] text2sql.database [database.py:65]: Executing SQL query: SELECT 
    c.customer_id,
    o.dfdf
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id;
2025-04-06 19:15:11 - INFO - [database.py:65] - Executing SQL query: SELECT 
    c.customer_id,
    o.dfdf
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id;
2025-04-06 19:15:11,464 [ERROR] text2sql.database [database.py:122]: SQL error after 0.00s: (sqlite3.OperationalError) no such column: o.dfdf
[SQL: SELECT 
    c.customer_id,
    o.dfdf
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id;]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: o.dfdf

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/database.py", line 78, in execute_query
    result = conn.execute(text(sql_query))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1414, in execute
    return meth(
           ^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: o.dfdf
[SQL: SELECT 
    c.customer_id,
    o.dfdf
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id;]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-04-06 19:15:11 - ERROR - [database.py:122] - SQL error after 0.00s: (sqlite3.OperationalError) no such column: o.dfdf
[SQL: SELECT 
    c.customer_id,
    o.dfdf
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id;]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: o.dfdf

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/database.py", line 78, in execute_query
    result = conn.execute(text(sql_query))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1414, in execute
    return meth(
           ^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: o.dfdf
[SQL: SELECT 
    c.customer_id,
    o.dfdf
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id;]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-04-06 19:15:11,495 [INFO] text2sql.sql_generator [sql_generator.py:376]: SQL generation completed in 6.09s
2025-04-06 19:15:11,496 [INFO] text2sql.sql_generator [sql_generator.py:125]: Query processing completed in 6.09s
2025-04-06 19:15:12,904 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:15:12] "GET /api/query/progress/f467b068-6b1a-4b7e-ba78-014bce5fcc5d HTTP/1.1" 200 -
2025-04-06 19:15:48,786 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:15:48] "GET / HTTP/1.1" 200 -
2025-04-06 19:15:49,129 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:15:49] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 19:15:49,131 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:15:49] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-06 19:15:49,134 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:15:49] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-06 19:15:49,141 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:15:49] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-06 19:15:49,146 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:15:49] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-06 19:15:49,149 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:15:49] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-06 19:15:49,454 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:15:49] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-06 19:15:49,460 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:15:49] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-06 19:15:49,465 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:15:49] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-06 19:15:49,789 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:15:49] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-06 19:15:58,499 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:15:58] "GET /admin/ HTTP/1.1" 200 -
2025-04-06 19:15:58,837 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:15:58] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-06 19:15:58,839 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:15:58] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 19:15:59,091 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:15:59] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-06 19:15:59,172 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:15:59] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-06 19:16:07,275 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:16:07] "GET /admin/ HTTP/1.1" 200 -
2025-04-06 19:16:07,605 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:16:07] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 19:16:07,610 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:16:07] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-06 19:16:07,874 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:16:07] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-06 19:16:07,933 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:16:07] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-06 19:16:10,130 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:16:10] "GET /samples HTTP/1.1" 200 -
2025-04-06 19:16:10,469 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:16:10] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 19:16:10,483 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:16:10] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-06 19:16:10,486 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:16:10] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-06 19:16:10,493 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:16:10] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-06 19:16:10,502 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:16:10] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-06 19:16:10,504 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:16:10] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-06 19:16:10,800 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:16:10] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-06 19:16:10,815 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:16:10] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-06 19:16:10,827 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:16:10] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-06 19:16:10,834 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:16:10] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-06 19:16:11,001 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:16:11] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-06 19:16:11,151 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:16:11] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-06 19:16:11,155 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:16:11] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-06 19:16:11,160 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-06 19:16:11 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-06 19:16:11,172 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-06 19:16:11 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-06 19:16:11,175 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-06 19:16:11 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-06 19:16:11,181 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 2 samples (page 1, limit 10)
2025-04-06 19:16:11 - INFO - [feedback_manager.py:531] - Retrieved 2 samples (page 1, limit 10)
2025-04-06 19:16:11,183 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:16:11] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-06 19:16:13,713 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:16:13] "GET /admin/users HTTP/1.1" 200 -
2025-04-06 19:16:14,049 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:16:14] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 19:16:14,056 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:16:14] "[36mGET /static/js/admin/users.js HTTP/1.1[0m" 304 -
2025-04-06 19:16:16,514 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:16:16] "GET /admin/roles HTTP/1.1" 200 -
2025-04-06 19:16:16,852 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:16:16] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 19:16:16,864 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:16:16] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-06 19:16:25,907 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:16:25] "[35m[1mGET /admin/api/roles/2/permissions HTTP/1.1[0m" 500 -
2025-04-06 19:16:39,376 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:16:39] "[35m[1mGET /admin/api/roles/1/permissions HTTP/1.1[0m" 500 -
2025-04-06 19:25:22,313 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:25:22] "[35m[1mGET /admin/api/roles/2/permissions HTTP/1.1[0m" 500 -
2025-04-06 19:25:53,998 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/user_manager.py', reloading
2025-04-06 19:25:54,007 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/user_manager.py', reloading
2025-04-06 19:25:55,020 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-06 19:25:55,026 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-06 19:25:55,030 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-06 19:25:55,030 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-06 19:25:55,031 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-06 19:25:55 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-06 19:25:55,035 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-06 19:25:55 - INFO - [database.py:258] - Closing database connection
2025-04-06 19:25:55,051 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-06 19:25:55 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-06 19:26:00,668 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-06 19:26:16,444 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 19:26:16,446 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 19:26:16,447 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 19:26:16,449 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 19:26:16,452 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-06 19:26:16,493 [INFO] text2sql [app.py:66]: Debug logging enabled for SQL generator and agents
2025-04-06 19:26:16 - INFO - [app.py:66] - Debug logging enabled for SQL generator and agents
2025-04-06 19:26:16,498 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 19:26:16 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 19:26:16,499 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-06 19:26:16 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-06 19:26:16,661 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-06 19:26:16 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-06 19:26:16,662 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 19:26:16,663 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 19:26:16,663 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 19:26:16,664 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 19:26:16,664 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 19:26:16 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 19:26:16,665 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-06 19:26:16 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-06 19:26:16,787 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-06 19:26:16 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-06 19:26:16,788 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 19:26:16,789 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 19:26:16,789 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 19:26:16,790 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 19:26:16,790 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 19:26:16 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 19:26:16,791 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-06 19:26:16 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-06 19:26:16,879 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-06 19:26:16 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-06 19:26:16,879 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 19:26:16,880 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 19:26:16,880 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 19:26:16,881 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 19:26:16,881 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-06 19:26:16 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-06 19:26:16,882 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 19:26:16 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 19:26:16,883 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-06 19:26:16 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-06 19:26:16,976 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-06 19:26:16 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-06 19:26:16,977 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-06 19:26:16 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-06 19:26:16,978 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-06 19:26:16 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-06 19:26:16,979 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 19:26:16,979 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 19:26:16,980 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 19:26:16,981 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 19:26:16,981 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-06 19:26:16 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-06 19:26:17,074 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-06 19:26:17,077 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-06 19:27:38,739 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/user_manager.py', reloading
2025-04-06 19:27:38,739 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/user_manager.py', reloading
2025-04-06 19:27:38,741 [INFO] werkzeug [_internal.py:97]:  * Detected change in '/home/vijay/text2sql/src/utils/user_manager.py', reloading
2025-04-06 19:27:39,742 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-06 19:27:39,743 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-06 19:27:39,744 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-06 19:27:39,745 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-06 19:27:39,746 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-06 19:27:39 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-06 19:27:39,748 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-06 19:27:39 - INFO - [database.py:258] - Closing database connection
2025-04-06 19:27:39,749 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-06 19:27:39 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-06 19:27:40,729 [INFO] werkzeug [_internal.py:97]:  * Restarting with watchdog (inotify)
2025-04-06 19:27:44,534 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 19:27:44,535 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 19:27:44,535 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 19:27:44,535 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 19:27:44,536 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-06 19:27:44,542 [INFO] text2sql [app.py:66]: Debug logging enabled for SQL generator and agents
2025-04-06 19:27:44 - INFO - [app.py:66] - Debug logging enabled for SQL generator and agents
2025-04-06 19:27:44,543 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 19:27:44 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 19:27:44,544 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-06 19:27:44 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-06 19:27:44,575 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-06 19:27:44 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-06 19:27:44,575 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 19:27:44,575 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 19:27:44,575 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 19:27:44,575 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 19:27:44,576 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 19:27:44 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 19:27:44,576 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-06 19:27:44 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-06 19:27:44,605 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-06 19:27:44 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-06 19:27:44,605 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 19:27:44,606 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 19:27:44,606 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 19:27:44,606 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 19:27:44,606 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 19:27:44 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 19:27:44,606 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-06 19:27:44 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-06 19:27:44,635 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-06 19:27:44 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-06 19:27:44,635 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 19:27:44,635 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 19:27:44,635 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 19:27:44,635 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 19:27:44,635 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-06 19:27:44 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-06 19:27:44,636 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 19:27:44 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-06 19:27:44,636 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-06 19:27:44 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-06 19:27:44,662 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-06 19:27:44 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-06 19:27:44,663 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-06 19:27:44 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-06 19:27:44,663 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-06 19:27:44 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-06 19:27:44,663 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 19:27:44,663 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 19:27:44,663 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 19:27:44,664 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 6 join conditions from condition file
2025-04-06 19:27:44,664 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-06 19:27:44 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-06 19:27:44,683 [WARNING] werkzeug [_internal.py:97]:  * Debugger is active!
2025-04-06 19:27:44,684 [INFO] werkzeug [_internal.py:97]:  * Debugger PIN: 519-354-935
2025-04-06 19:28:07,239 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:28:07] "GET /admin/roles HTTP/1.1" 200 -
2025-04-06 19:28:07,452 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:28:07] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 19:28:07,587 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:28:07] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-06 19:28:09,040 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:28:09] "GET /admin/api/roles/2/permissions HTTP/1.1" 200 -
2025-04-06 19:28:17,859 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:28:17] "GET / HTTP/1.1" 200 -
2025-04-06 19:28:18,108 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:28:18] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 19:28:18,187 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:28:18] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-06 19:28:18,196 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:28:18] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-06 19:28:18,197 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:28:18] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-06 19:28:18,200 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:28:18] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-06 19:28:18,201 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:28:18] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-06 19:28:18,419 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:28:18] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-06 19:28:18,486 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:28:18] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-06 19:28:18,499 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:28:18] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-06 19:28:18,838 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:28:18] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-06 19:28:28,211 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:28:28] "GET /samples HTTP/1.1" 200 -
2025-04-06 19:28:28,555 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:28:28] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 19:28:28,565 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:28:28] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-06 19:28:28,566 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:28:28] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-06 19:28:28,576 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:28:28] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-06 19:28:28,577 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:28:28] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-06 19:28:28,578 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:28:28] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-06 19:28:28,872 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:28:28] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-06 19:28:28,874 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:28:28] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-06 19:28:28,879 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:28:28] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-06 19:28:28,886 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:28:28] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-06 19:28:29,210 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:28:29] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-06 19:28:29,211 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:28:29] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-06 19:28:29,213 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:28:29] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-06 19:28:29,216 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-06 19:28:29 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-06 19:28:29,223 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-06 19:28:29 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-06 19:28:29,228 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-06 19:28:29 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-06 19:28:29,242 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 2 samples (page 1, limit 10)
2025-04-06 19:28:29 - INFO - [feedback_manager.py:531] - Retrieved 2 samples (page 1, limit 10)
2025-04-06 19:28:29,243 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:28:29] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-06 19:28:32,056 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:28:32] "GET /admin/roles HTTP/1.1" 200 -
2025-04-06 19:28:32,387 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:28:32] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 19:28:32,397 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:28:32] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-06 19:29:06,781 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:29:06] "GET /admin/roles HTTP/1.1" 200 -
2025-04-06 19:29:07,128 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:29:07] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-06 19:29:07,131 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:29:07] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-06 19:29:12,260 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:29:12] "GET /admin/ HTTP/1.1" 200 -
2025-04-06 19:29:12,600 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:29:12] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 19:29:12,607 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:29:12] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-06 19:29:12,849 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:29:12] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-06 19:29:12,939 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:29:12] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-06 19:29:24,110 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:29:24] "GET /admin/audit-logs HTTP/1.1" 200 -
2025-04-06 19:29:24,456 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:29:24] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 19:29:24,462 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:29:24] "[36mGET /static/js/admin/audit-logs.js HTTP/1.1[0m" 304 -
2025-04-06 19:29:51,853 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:29:51] "GET /samples HTTP/1.1" 200 -
2025-04-06 19:29:52,190 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:29:52] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 19:29:52,215 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:29:52] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-06 19:29:52,220 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:29:52] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-06 19:29:52,224 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:29:52] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-06 19:29:52,226 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:29:52] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-06 19:29:52,229 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:29:52] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-06 19:29:52,509 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:29:52] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-06 19:29:52,534 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:29:52] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-06 19:29:52,538 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:29:52] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-06 19:29:52,545 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:29:52] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-06 19:29:52,683 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:29:52] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-06 19:29:52,888 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:29:52] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-06 19:29:52,889 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:29:52] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-06 19:29:52,901 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-06 19:29:52 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-06 19:29:52,904 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-06 19:29:52 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-06 19:29:52,909 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-06 19:29:52 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-06 19:29:52,914 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 2 samples (page 1, limit 10)
2025-04-06 19:29:52 - INFO - [feedback_manager.py:531] - Retrieved 2 samples (page 1, limit 10)
2025-04-06 19:29:52,916 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:29:52] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-06 19:29:54,361 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:29:54] "GET /admin/roles HTTP/1.1" 200 -
2025-04-06 19:29:54,690 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:29:54] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 19:29:54,700 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:29:54] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-06 19:29:57,550 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:29:57] "GET /admin/schema HTTP/1.1" 200 -
2025-04-06 19:29:57,887 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:29:57] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 19:29:57,898 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:29:57] "[36mGET /static/css/admin-schema.css HTTP/1.1[0m" 304 -
2025-04-06 19:29:57,901 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:29:57] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-06 19:29:57,905 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:29:57] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-06 19:29:57,911 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:29:57] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-06 19:29:57,911 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:29:57] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-06 19:29:58,216 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:29:58] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-06 19:29:58,223 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:29:58] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-06 19:29:58,229 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:29:58] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-06 19:29:58,238 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:29:58] "[36mGET /static/js/admin/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-06 19:29:58,240 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:29:58] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-06 19:29:58,590 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:29:58] "GET /admin/api/schema/workspaces HTTP/1.1" 200 -
2025-04-06 19:29:58,596 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:29:58] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-06 19:29:58,597 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:29:58] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-06 19:29:58,604 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:29:58] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-06 19:30:00,224 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:30:00] "GET /admin/api/schema/workspaces/dfd HTTP/1.1" 200 -
2025-04-06 19:30:21,121 [INFO] text2sql.schema_manager [schema_manager.py:372]: Saving join conditions to /home/vijay/text2sql/config/data/condition.json
2025-04-06 19:30:21,133 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 19:30:21,134 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 5 join conditions from condition file
2025-04-06 19:30:21,135 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:30:21] "DELETE /admin/api/schema/joins/3 HTTP/1.1" 200 -
2025-04-06 19:30:21,369 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:30:21] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-06 19:30:21,446 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:30:21] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-06 19:30:23,331 [INFO] text2sql.schema_manager [schema_manager.py:372]: Saving join conditions to /home/vijay/text2sql/config/data/condition.json
2025-04-06 19:30:23,333 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 19:30:23,334 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 4 join conditions from condition file
2025-04-06 19:30:23,335 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:30:23] "DELETE /admin/api/schema/joins/3 HTTP/1.1" 200 -
2025-04-06 19:30:23,645 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:30:23] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-06 19:30:23,648 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:30:23] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-06 19:30:26,156 [INFO] text2sql.schema_manager [schema_manager.py:372]: Saving join conditions to /home/vijay/text2sql/config/data/condition.json
2025-04-06 19:30:26,158 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-06 19:30:26,160 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-06 19:30:26,161 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:30:26] "DELETE /admin/api/schema/joins/3 HTTP/1.1" 200 -
2025-04-06 19:30:26,478 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:30:26] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-06 19:30:26,480 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:30:26] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-06 19:30:32,120 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:30:32] "GET /admin/api/schema/workspaces/Customer HTTP/1.1" 200 -
2025-04-06 19:30:35,447 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:30:35] "GET /admin/api/schema/workspaces/dfd HTTP/1.1" 200 -
2025-04-06 19:30:44,250 [INFO] text2sql.schema_manager [schema_manager.py:256]: Saving schema to /home/vijay/text2sql/config/data/schema.json
2025-04-06 19:30:44,252 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 19:30:44,253 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 19:30:44,253 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:30:44] "DELETE /admin/api/schema/tables/db1.customers?workspace=dfd HTTP/1.1" 200 -
2025-04-06 19:30:44,561 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:30:44] "GET /admin/api/schema/workspaces/dfd HTTP/1.1" 200 -
2025-04-06 19:30:44,563 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:30:44] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-06 19:30:44,565 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:30:44] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-06 19:30:44,831 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:30:44] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-06 19:30:49,342 [INFO] text2sql.schema_manager [schema_manager.py:256]: Saving schema to /home/vijay/text2sql/config/data/schema.json
2025-04-06 19:30:49,345 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 19:30:49,345 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 19:30:49,347 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:30:49] "PUT /admin/api/schema/tables/customers?workspace=dfd HTTP/1.1" 200 -
2025-04-06 19:30:49,660 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:30:49] "GET /admin/api/schema/workspaces/dfd HTTP/1.1" 200 -
2025-04-06 19:30:49,663 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:30:49] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-06 19:30:49,664 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:30:49] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-06 19:30:49,905 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:30:49] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-06 19:30:54,440 [INFO] text2sql.schema_manager [schema_manager.py:256]: Saving schema to /home/vijay/text2sql/config/data/schema.json
2025-04-06 19:30:54,454 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-06 19:30:54,455 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-06 19:30:54,457 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:30:54] "POST /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-06 19:30:54,774 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:30:54] "GET /admin/api/schema/workspaces/dfd HTTP/1.1" 200 -
2025-04-06 19:30:54,781 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:30:54] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-06 19:30:54,785 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:30:54] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-06 19:30:55,015 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:30:55] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-06 19:31:04,542 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:31:04] "GET /admin/api/schema/workspaces/Customer HTTP/1.1" 200 -
2025-04-06 19:31:05,626 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:31:05] "GET / HTTP/1.1" 200 -
2025-04-06 19:31:05,881 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:31:05] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 19:31:05,957 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:31:05] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-06 19:31:05,970 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:31:05] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-06 19:31:05,973 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:31:05] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-06 19:31:05,977 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:31:05] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-06 19:31:05,978 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:31:05] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-06 19:31:06,196 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:31:06] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-06 19:31:06,268 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:31:06] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-06 19:31:06,282 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:31:06] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-06 19:31:06,614 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:31:06] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-06 19:31:16,628 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:31:16] "GET /api/tables/suggestions?workspace=dfd&query= HTTP/1.1" 200 -
2025-04-06 19:31:18,657 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:31:18] "GET /api/tables/suggestions?workspace=dfd&query= HTTP/1.1" 200 -
2025-04-06 19:31:23,411 [INFO] text2sql [app.py:138]: User explicitly specified tables: customers, order_items
2025-04-06 19:31:23 - INFO - [app.py:138] - User explicitly specified tables: customers, order_items
2025-04-06 19:31:23,413 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'table customers table order_items'
2025-04-06 19:31:23,414 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:31:23] "POST /api/query HTTP/1.1" 200 -
2025-04-06 19:31:23,415 [INFO] text2sql.sql_generator [sql_generator.py:40]: User explicitly selected tables: customers, order_items
2025-04-06 19:31:23,416 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'table customers table order_items'
2025-04-06 19:31:23,417 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-06 19:31:23,418 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.00s
2025-04-06 19:31:23,419 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-06 19:31:23,420 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-06 19:31:23,420 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-06 19:31:23 - INFO - [database.py:44] - Attempting database connection
2025-04-06 19:31:23,422 [INFO] text2sql.database [database.py:48]: Database connection established in 0.00s
2025-04-06 19:31:23 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-06 19:31:23,423 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'table customers table order_items'
2025-04-06 19:31:23,424 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: customers, order_items
2025-04-06 19:31:23,426 [INFO] text2sql.agents.column [column_agent.py:94]: Sending request to AI model for column selection
2025-04-06 19:31:23,426 [INFO] text2sql.llm_engine [llm_engine.py:56]: [COLUMN] Completion generation started
2025-04-06 19:31:23 - INFO - [llm_engine.py:56] - [COLUMN] Completion generation started
2025-04-06 19:31:24,217 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:31:24] "GET /api/query/progress/bcb7b810-62c5-4873-b443-c7e1f6d7189e HTTP/1.1" 200 -
2025-04-06 19:31:24,461 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:31:24] "GET /api/query/progress/bcb7b810-62c5-4873-b443-c7e1f6d7189e HTTP/1.1" 200 -
2025-04-06 19:31:24,906 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:31:24] "GET /api/query/progress/bcb7b810-62c5-4873-b443-c7e1f6d7189e HTTP/1.1" 200 -
2025-04-06 19:31:25,136 [INFO] text2sql.llm_engine [llm_engine.py:119]: [COLUMN] Completion generation completed in 1.71s
2025-04-06 19:31:25 - INFO - [llm_engine.py:119] - [COLUMN] Completion generation completed in 1.71s
2025-04-06 19:31:25,138 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-06 19:31:25 - INFO - [llm_engine.py:120] - **************************
2025-04-06 19:31:25,139 [INFO] text2sql.agents.column [column_agent.py:99]: Raw model response: '{
  "customers": ["customer_id"],
  "order_items": ["item_id", "order_id", "product_id", "quantity", "price"]
}'
2025-04-06 19:31:25,141 [INFO] text2sql.agents.column [column_agent.py:139]: Parsing column selection from model response
2025-04-06 19:31:25,142 [INFO] text2sql.agents.column [column_agent.py:149]: Parsed column selection JSON: {"customers": ["customer_id"], "order_items": ["item_id", "order_id", "product_id", "quantity", "price"]}
2025-04-06 19:31:25,144 [INFO] text2sql.agents.column [column_agent.py:111]: Table 'customers': Pruned 10 columns, kept 1/11
2025-04-06 19:31:25,145 [INFO] text2sql.agents.column [column_agent.py:111]: Table 'order_items': Pruned 0 columns, kept 5/5
2025-04-06 19:31:25,145 [INFO] text2sql.agents.column [column_agent.py:197]: Building pruned schema
2025-04-06 19:31:25,146 [INFO] text2sql.agents.column [column_agent.py:226]: Built pruned schema (500 chars)
2025-04-06 19:31:25,146 [INFO] text2sql.agents.column [column_agent.py:120]: Column pruning completed in 1.72s
2025-04-06 19:31:25,147 [INFO] text2sql.sql_generator [sql_generator.py:237]: Found 1 join conditions for the relevant tables
2025-04-06 19:31:25,148 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-06 19:31:25 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-06 19:31:25,151 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-06 19:31:25 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-06 19:31:25,154 [INFO] text2sql.feedback [feedback_manager.py:267]: Stage 1: Vector search for 'table customers table order_items...'
2025-04-06 19:31:25 - INFO - [feedback_manager.py:267] - Stage 1: Vector search for 'table customers table order_items...'
2025-04-06 19:31:25,155 [INFO] text2sql.feedback [feedback_manager.py:62]: Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-06 19:31:25 - INFO - [feedback_manager.py:62] - Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-06 19:31:25,689 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:31:25] "GET /api/query/progress/bcb7b810-62c5-4873-b443-c7e1f6d7189e HTTP/1.1" 200 -
2025-04-06 19:31:25,939 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:31:25] "GET /api/query/progress/bcb7b810-62c5-4873-b443-c7e1f6d7189e HTTP/1.1" 200 -
2025-04-06 19:31:26,364 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:31:26] "GET /api/query/progress/bcb7b810-62c5-4873-b443-c7e1f6d7189e HTTP/1.1" 200 -
2025-04-06 19:31:27,157 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:31:27] "GET /api/query/progress/bcb7b810-62c5-4873-b443-c7e1f6d7189e HTTP/1.1" 200 -
2025-04-06 19:31:27,435 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:31:27] "GET /api/query/progress/bcb7b810-62c5-4873-b443-c7e1f6d7189e HTTP/1.1" 200 -
2025-04-06 19:31:27,825 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:31:27] "GET /api/query/progress/bcb7b810-62c5-4873-b443-c7e1f6d7189e HTTP/1.1" 200 -
2025-04-06 19:31:27,978 [INFO] text2sql.feedback [feedback_manager.py:65]: Embedding model loaded in 2.82s
2025-04-06 19:31:27 - INFO - [feedback_manager.py:65] - Embedding model loaded in 2.82s
2025-04-06 19:31:28,061 [INFO] text2sql.feedback [feedback_manager.py:322]: Found 2 initial candidates from vector search
2025-04-06 19:31:28 - INFO - [feedback_manager.py:322] - Found 2 initial candidates from vector search
2025-04-06 19:31:28,062 [INFO] text2sql.feedback [feedback_manager.py:367]: Less than 3 candidates, skipping reranking
2025-04-06 19:31:28 - INFO - [feedback_manager.py:367] - Less than 3 candidates, skipping reranking
2025-04-06 19:31:28,063 [INFO] text2sql.sql_generator [sql_generator.py:280]: Found 2 similar queries with reranking
2025-04-06 19:31:28,063 [INFO] text2sql.sql_generator [sql_generator.py:302]: Added similar query #1 from feedback (score: 0.5130): get me count of customers by order month...
2025-04-06 19:31:28,063 [INFO] text2sql.sql_generator [sql_generator.py:302]: Added similar query #2 from feedback (score: 0.4041): get me all the customers...
2025-04-06 19:31:28,064 [INFO] text2sql.azure [azure_client.py:35]: SQL generation started for query: 'table customers table order_items'
2025-04-06 19:31:28 - INFO - [azure_client.py:35] - SQL generation started for query: 'table customers table order_items'
2025-04-06 19:31:28,064 [INFO] text2sql.azure [azure_client.py:69]: Including schema information (500 chars)
2025-04-06 19:31:28 - INFO - [azure_client.py:69] - Including schema information (500 chars)
2025-04-06 19:31:28,065 [INFO] text2sql.azure [azure_client.py:76]: Including 1 join conditions
2025-04-06 19:31:28 - INFO - [azure_client.py:76] - Including 1 join conditions
2025-04-06 19:31:28,067 [INFO] text2sql.azure [azure_client.py:97]: Including 2 SQL examples from feedback similarity search
2025-04-06 19:31:28 - INFO - [azure_client.py:97] - Including 2 SQL examples from feedback similarity search
2025-04-06 19:31:28,068 [INFO] text2sql.azure [azure_client.py:114]: PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER): Unique customer identifier\nPrimary Key(s): customer_id\n\nTable: order_items\nDescription: Individual items within each order\nColumns: item_id (INTEGER): Unique order item identifier, order_id (INTEGER): Reference to parent order, product_id (INTEGER): Reference to purchased product, quantity (INTEGER): Quantity of product ordered, price (REAL): Price per unit at time of purchase\nPrimary Key(s): item_id\n"}, {'role': 'user', 'content': 'Use the following pre-defined join conditions when joining these tables:\n- When joining customers with customers, use: LEFT JOIN customers ON a=a\n'}, {'role': 'user', 'content': "Here are some similar queries that were previously successful:\nQuestion: get me count of customers by order month\nSQL: SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;\n\nQuestion: get me all the customers\nSQL: SELECT * FROM customers;\n\n"}, {'role': 'user', 'content': 'Convert this question to SQL: table customers table order_items'}]
2025-04-06 19:31:28 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER): Unique customer identifier\nPrimary Key(s): customer_id\n\nTable: order_items\nDescription: Individual items within each order\nColumns: item_id (INTEGER): Unique order item identifier, order_id (INTEGER): Reference to parent order, product_id (INTEGER): Reference to purchased product, quantity (INTEGER): Quantity of product ordered, price (REAL): Price per unit at time of purchase\nPrimary Key(s): item_id\n"}, {'role': 'user', 'content': 'Use the following pre-defined join conditions when joining these tables:\n- When joining customers with customers, use: LEFT JOIN customers ON a=a\n'}, {'role': 'user', 'content': "Here are some similar queries that were previously successful:\nQuestion: get me count of customers by order month\nSQL: SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;\n\nQuestion: get me all the customers\nSQL: SELECT * FROM customers;\n\n"}, {'role': 'user', 'content': 'Convert this question to SQL: table customers table order_items'}]
2025-04-06 19:31:28,069 [INFO] text2sql.llm_engine [llm_engine.py:56]: [SQL_GEN] Completion generation started
2025-04-06 19:31:28 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-06 19:31:28,617 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:31:28] "GET /api/query/progress/bcb7b810-62c5-4873-b443-c7e1f6d7189e HTTP/1.1" 200 -
2025-04-06 19:31:28,876 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:31:28] "GET /api/query/progress/bcb7b810-62c5-4873-b443-c7e1f6d7189e HTTP/1.1" 200 -
2025-04-06 19:31:29,288 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:31:29] "GET /api/query/progress/bcb7b810-62c5-4873-b443-c7e1f6d7189e HTTP/1.1" 200 -
2025-04-06 19:31:29,392 [INFO] text2sql.llm_engine [llm_engine.py:119]: [SQL_GEN] Completion generation completed in 1.32s
2025-04-06 19:31:29 - INFO - [llm_engine.py:119] - [SQL_GEN] Completion generation completed in 1.32s
2025-04-06 19:31:29,393 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-06 19:31:29 - INFO - [llm_engine.py:120] - **************************
2025-04-06 19:31:29,394 [INFO] text2sql.azure [azure_client.py:150]: Parsing SQL from model response
2025-04-06 19:31:29 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-06 19:31:29,395 [INFO] text2sql.azure [azure_client.py:157]: Found SQL code block in response
2025-04-06 19:31:29 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-06 19:31:29,397 [INFO] text2sql.azure [azure_client.py:171]: Extracted SQL query (56 chars) and explanation (174 chars)
2025-04-06 19:31:29 - INFO - [azure_client.py:171] - Extracted SQL query (56 chars) and explanation (174 chars)
2025-04-06 19:31:29,398 [INFO] text2sql.azure [azure_client.py:124]: Generated SQL: SELECT 
    *
FROM 
    customers c,
    order_items oi;
2025-04-06 19:31:29 - INFO - [azure_client.py:124] - Generated SQL: SELECT 
    *
FROM 
    customers c,
    order_items oi;
2025-04-06 19:31:29,399 [INFO] text2sql.azure [azure_client.py:132]: SQL generation completed in 1.34s
2025-04-06 19:31:29 - INFO - [azure_client.py:132] - SQL generation completed in 1.34s
2025-04-06 19:31:29,401 [INFO] text2sql.database [database.py:65]: Executing SQL query: SELECT 
    *
FROM 
    customers c,
    order_items oi;
2025-04-06 19:31:29 - INFO - [database.py:65] - Executing SQL query: SELECT 
    *
FROM 
    customers c,
    order_items oi;
2025-04-06 19:31:29,418 [INFO] text2sql.database [database.py:86]: Query returned 55 rows with 16 columns
2025-04-06 19:31:29 - INFO - [database.py:86] - Query returned 55 rows with 16 columns
2025-04-06 19:31:29,427 [INFO] text2sql.database [database.py:95]: Query processing completed in 0.03s
2025-04-06 19:31:29 - INFO - [database.py:95] - Query processing completed in 0.03s
2025-04-06 19:31:29,431 [INFO] text2sql.sql_generator [sql_generator.py:376]: SQL generation completed in 6.01s
2025-04-06 19:31:29,431 [INFO] text2sql.sql_generator [sql_generator.py:125]: Query processing completed in 6.02s
2025-04-06 19:31:30,093 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:31:30] "GET /api/query/progress/bcb7b810-62c5-4873-b443-c7e1f6d7189e HTTP/1.1" 200 -
2025-04-06 19:31:44,755 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:31:44] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 19:33:43,184 [INFO] text2sql [app.py:312]: Feedback received for query: '@customers @order_items ...' - Rating: 0
2025-04-06 19:33:43 - INFO - [app.py:312] - Feedback received for query: '@customers @order_items ...' - Rating: 0
2025-04-06 19:33:43,185 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-06 19:33:43 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-06 19:33:43,186 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-06 19:33:43 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-06 19:33:43,187 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-06 19:33:43 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-06 19:33:43,189 [INFO] text2sql.feedback [feedback_manager.py:62]: Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-06 19:33:43 - INFO - [feedback_manager.py:62] - Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-06 19:33:46,674 [INFO] text2sql.feedback [feedback_manager.py:65]: Embedding model loaded in 3.48s
2025-04-06 19:33:46 - INFO - [feedback_manager.py:65] - Embedding model loaded in 3.48s
2025-04-06 19:33:46,728 [INFO] text2sql.feedback [feedback_manager.py:170]: Saved feedback for query: '@customers @order_items ...' with rating 0
2025-04-06 19:33:46 - INFO - [feedback_manager.py:170] - Saved feedback for query: '@customers @order_items ...' with rating 0
2025-04-06 19:33:46,736 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:33:46] "POST /api/feedback HTTP/1.1" 200 -
2025-04-06 19:33:47,582 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:33:47] "GET /samples HTTP/1.1" 200 -
2025-04-06 19:33:47,941 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:33:47] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 19:33:47,942 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:33:47] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-06 19:33:47,945 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:33:47] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-06 19:33:47,949 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:33:47] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-06 19:33:47,954 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:33:47] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-06 19:33:47,956 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:33:47] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-06 19:33:48,277 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:33:48] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-06 19:33:48,279 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:33:48] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-06 19:33:48,289 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:33:48] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-06 19:33:48,295 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:33:48] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-06 19:33:48,616 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:33:48] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-06 19:33:48,618 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:33:48] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-06 19:33:48,622 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:33:48] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-06 19:33:48,633 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-06 19:33:48 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-06 19:33:48,634 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-06 19:33:48 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-06 19:33:48,636 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-06 19:33:48 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-06 19:33:48,640 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 2 samples (page 1, limit 10)
2025-04-06 19:33:48 - INFO - [feedback_manager.py:531] - Retrieved 2 samples (page 1, limit 10)
2025-04-06 19:33:48,641 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:33:48] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-06 19:34:01,543 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:34:01] "GET /admin/ HTTP/1.1" 200 -
2025-04-06 19:34:01,889 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:34:01] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 19:34:01,894 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:34:01] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-06 19:34:02,139 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:34:02] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-06 19:34:02,242 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:34:02] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-06 19:34:14,842 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:34:14] "GET / HTTP/1.1" 200 -
2025-04-06 19:34:15,194 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:34:15] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-06 19:34:15,196 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:34:15] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-06 19:34:15,199 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:34:15] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 19:34:15,204 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:34:15] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-06 19:34:15,202 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:34:15] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-06 19:34:15,210 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:34:15] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-06 19:34:15,512 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:34:15] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-06 19:34:15,519 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:34:15] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-06 19:34:15,521 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:34:15] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-06 19:34:15,849 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:34:15] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-06 19:46:57,562 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:46:57] "GET / HTTP/1.1" 200 -
2025-04-06 19:46:57,783 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:46:57] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 19:46:57,941 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:46:57] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-06 19:46:57,958 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:46:57] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-06 19:46:57,961 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:46:57] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-06 19:46:57,970 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:46:57] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-06 19:46:57,972 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:46:57] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-06 19:46:58,098 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:46:58] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-06 19:46:58,255 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:46:58] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-06 19:46:58,272 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:46:58] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-06 19:46:58,628 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:46:58] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-06 19:47:00,987 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:47:00] "GET / HTTP/1.1" 200 -
2025-04-06 19:47:01,341 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:47:01] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 19:47:01,346 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:47:01] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-06 19:47:01,351 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:47:01] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-06 19:47:01,354 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:47:01] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-06 19:47:01,367 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:47:01] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-06 19:47:01,367 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:47:01] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-06 19:47:01,667 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:47:01] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-06 19:47:01,675 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:47:01] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-06 19:47:01,681 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:47:01] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-06 19:47:02,006 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:47:02] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-06 19:47:03,873 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:47:03] "GET /api/tables/suggestions?workspace=dfd&query= HTTP/1.1" 200 -
2025-04-06 19:47:06,984 [INFO] text2sql [app.py:254]: Schema requested for workspace: dfd
2025-04-06 19:47:06 - INFO - [app.py:254] - Schema requested for workspace: dfd
2025-04-06 19:47:06,997 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:47:06] "GET /api/schema?workspace=dfd HTTP/1.1" 200 -
2025-04-06 19:47:33,956 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:47:33] "GET /admin/schema HTTP/1.1" 200 -
2025-04-06 19:47:34,324 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:47:34] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 19:47:34,326 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:47:34] "[36mGET /static/css/admin-schema.css HTTP/1.1[0m" 304 -
2025-04-06 19:47:34,328 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:47:34] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-06 19:47:34,337 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:47:34] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-06 19:47:34,340 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:47:34] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-06 19:47:34,341 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:47:34] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-06 19:47:34,644 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:47:34] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-06 19:47:34,658 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:47:34] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-06 19:47:34,663 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:47:34] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-06 19:47:34,664 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:47:34] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-06 19:47:34,671 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:47:34] "[36mGET /static/js/admin/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-06 19:47:34,999 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:47:34] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-06 19:47:35,001 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:47:35] "GET /admin/api/schema/workspaces HTTP/1.1" 200 -
2025-04-06 19:47:35,003 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:47:35] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-06 19:47:35,005 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:47:35] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-06 19:47:44,572 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:47:44] "GET /admin/api/schema/joins/export HTTP/1.1" 200 -
2025-04-06 19:47:51,962 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:47:51] "GET /admin/api/schema/export HTTP/1.1" 200 -
2025-04-06 19:48:04,061 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:48:04] "GET /api/tables/suggestions?workspace=Customer HTTP/1.1" 200 -
2025-04-06 19:48:05,374 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:48:05] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-06 19:48:05,688 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:48:05] "GET / HTTP/1.1" 200 -
2025-04-06 19:48:06,031 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:48:06] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 19:48:06,050 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:48:06] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-06 19:48:06,054 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:48:06] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-06 19:48:06,058 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:48:06] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-06 19:48:06,062 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:48:06] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-06 19:48:06,065 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:48:06] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-06 19:48:06,332 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:48:06] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-06 19:48:06,359 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:48:06] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-06 19:48:06,361 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:48:06] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-06 19:48:06,550 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 19:48:06] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-06 22:10:46,307 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 22:10:46] "[35m[1mGET /change-password HTTP/1.1[0m" 500 -
2025-04-06 22:10:46,528 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 22:10:46] "GET /change-password?__debugger__=yes&cmd=resource&f=style.css HTTP/1.1" 200 -
2025-04-06 22:10:46,645 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 22:10:46] "GET /change-password?__debugger__=yes&cmd=resource&f=debugger.js HTTP/1.1" 200 -
2025-04-06 22:10:46,679 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 22:10:46] "GET /change-password?__debugger__=yes&cmd=resource&f=console.png&s=g3ZwA6tX624qa5rXuaeI HTTP/1.1" 200 -
2025-04-06 22:40:51,912 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 22:40:51] "GET / HTTP/1.1" 200 -
2025-04-06 22:40:52,095 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 22:40:52] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 22:40:52,242 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 22:40:52] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-06 22:40:52,244 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 22:40:52] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-06 22:40:52,252 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 22:40:52] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-06 22:40:52,255 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 22:40:52] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-06 22:40:52,256 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 22:40:52] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-06 22:40:52,396 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 22:40:52] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-06 22:40:52,545 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 22:40:52] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-06 22:40:52,546 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 22:40:52] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-06 22:40:52,859 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 22:40:52] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-06 22:41:42,277 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 22:41:42] "GET / HTTP/1.1" 200 -
2025-04-06 22:41:42,622 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 22:41:42] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-06 22:41:42,623 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 22:41:42] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-06 22:41:42,625 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 22:41:42] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-06 22:41:42,629 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 22:41:42] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-06 22:41:42,630 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 22:41:42] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-06 22:41:42,634 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 22:41:42] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-06 22:41:42,947 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 22:41:42] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-06 22:41:42,950 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 22:41:42] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-06 22:41:42,953 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 22:41:42] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-06 22:41:43,288 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 22:41:43] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-06 22:41:45,146 [INFO] text2sql [app.py:254]: Schema requested for workspace: dfd
2025-04-06 22:41:45 - INFO - [app.py:254] - Schema requested for workspace: dfd
2025-04-06 22:41:45,151 [INFO] werkzeug [_internal.py:97]: 127.0.0.1 - - [06/Apr/2025 22:41:45] "GET /api/schema?workspace=dfd HTTP/1.1" 200 -
2025-04-07 01:40:14,569 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 01:40:14,569 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 01:40:14,569 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 01:40:14,569 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 01:40:14,570 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-07 01:47:23,522 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 01:47:23,523 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 01:47:23,523 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 01:47:23,523 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 01:47:23,524 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-07 01:47:23,537 [INFO] text2sql [app.py:67]: Debug logging enabled for SQL generator and agents
2025-04-07 01:47:23 - INFO - [app.py:67] - Debug logging enabled for SQL generator and agents
2025-04-07 01:47:23,538 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:47:23 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:47:23,538 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 01:47:23 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 01:47:23,587 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 01:47:23 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 01:47:23,587 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 01:47:23,587 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 01:47:23,587 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 01:47:23,588 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 01:47:23,589 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:47:23 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:47:23,589 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 01:47:23 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 01:47:23,637 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 01:47:23 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 01:47:23,637 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 01:47:23,637 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 01:47:23,638 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 01:47:23,638 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 01:47:23,638 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:47:23 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:47:23,638 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 01:47:23 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 01:47:23,684 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 01:47:23 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 01:47:23,684 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 01:47:23,685 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 01:47:23,685 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 01:47:23,686 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 01:47:23,686 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-07 01:47:23 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-07 01:47:23,686 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:47:23 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:47:23,686 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 01:47:23 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 01:47:23,734 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 01:47:23 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 01:47:23,734 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-07 01:47:23 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-07 01:47:23,734 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-07 01:47:23 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-07 01:47:23,735 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 01:47:23,735 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 01:47:23,735 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 01:47:23,735 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 01:47:23,736 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 01:47:23 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 01:47:23,769 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-07 01:47:23,770 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-07 01:47:23,770 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-07 01:47:23,770 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-07 01:47:23,770 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-07 01:47:23 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-07 01:47:23,770 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-07 01:47:23 - INFO - [database.py:258] - Closing database connection
2025-04-07 01:47:23,770 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-07 01:47:23 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-07 01:47:45,013 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 01:47:45,013 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 01:47:45,013 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 01:47:45,014 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 01:47:45,014 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-07 01:47:45,029 [INFO] text2sql [app.py:67]: Debug logging enabled for SQL generator and agents
2025-04-07 01:47:45 - INFO - [app.py:67] - Debug logging enabled for SQL generator and agents
2025-04-07 01:47:45,031 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:47:45 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:47:45,032 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 01:47:45 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 01:47:45,083 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 01:47:45 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 01:47:45,084 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 01:47:45,084 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 01:47:45,084 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 01:47:45,084 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 01:47:45,084 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:47:45 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:47:45,085 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 01:47:45 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 01:47:45,132 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 01:47:45 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 01:47:45,132 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 01:47:45,133 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 01:47:45,133 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 01:47:45,133 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 01:47:45,133 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:47:45 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:47:45,134 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 01:47:45 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 01:47:45,179 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 01:47:45 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 01:47:45,180 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 01:47:45,180 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 01:47:45,180 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 01:47:45,181 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 01:47:45,181 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-07 01:47:45 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-07 01:47:45,181 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:47:45 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:47:45,181 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 01:47:45 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 01:47:45,230 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 01:47:45 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 01:47:45,230 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-07 01:47:45 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-07 01:47:45,231 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-07 01:47:45 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-07 01:47:45,231 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 01:47:45,232 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 01:47:45,232 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 01:47:45,232 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 01:47:45,232 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 01:47:45 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 01:47:45,270 [INFO] werkzeug [_internal.py:224]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.27.251.157:5000
2025-04-07 01:47:45,270 [INFO] werkzeug [_internal.py:224]: [33mPress CTRL+C to quit[0m
2025-04-07 01:47:45,304 [INFO] werkzeug [_internal.py:224]:  * Restarting with watchdog (inotify)
2025-04-07 01:47:51,886 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 01:47:51,887 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 01:47:51,887 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 01:47:51,887 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 01:47:51,888 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-07 01:47:51,900 [INFO] text2sql [app.py:67]: Debug logging enabled for SQL generator and agents
2025-04-07 01:47:51 - INFO - [app.py:67] - Debug logging enabled for SQL generator and agents
2025-04-07 01:47:51,902 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:47:51 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:47:51,903 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 01:47:51 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 01:47:51,957 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 01:47:51 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 01:47:51,958 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 01:47:51,958 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 01:47:51,958 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 01:47:51,959 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 01:47:51,959 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:47:51 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:47:51,959 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 01:47:51 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 01:47:52,014 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 01:47:52 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 01:47:52,015 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 01:47:52,015 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 01:47:52,015 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 01:47:52,015 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 01:47:52,016 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:47:52 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:47:52,016 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 01:47:52 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 01:47:52,074 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 01:47:52 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 01:47:52,074 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 01:47:52,075 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 01:47:52,075 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 01:47:52,075 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 01:47:52,075 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-07 01:47:52 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-07 01:47:52,076 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:47:52 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:47:52,076 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 01:47:52 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 01:47:52,142 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 01:47:52 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 01:47:52,143 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-07 01:47:52 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-07 01:47:52,143 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-07 01:47:52 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-07 01:47:52,144 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 01:47:52,144 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 01:47:52,144 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 01:47:52,144 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 01:47:52,145 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 01:47:52 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 01:47:52,189 [WARNING] werkzeug [_internal.py:224]:  * Debugger is active!
2025-04-07 01:47:52,202 [INFO] werkzeug [_internal.py:224]:  * Debugger PIN: 774-546-021
2025-04-07 01:48:00,043 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:48:00] "GET / HTTP/1.1" 200 -
2025-04-07 01:48:00,094 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:48:00] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-07 01:48:00,431 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:48:00] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-07 01:48:00,434 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:48:00] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-07 01:48:00,436 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:48:00] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-07 01:48:00,447 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:48:00] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-07 01:48:00,450 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:48:00] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-07 01:48:00,459 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:48:00] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-07 01:48:00,784 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:48:00] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-07 01:48:00,790 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:48:00] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-07 01:48:01,135 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:48:01] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-04-07 01:48:05,347 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:48:05] "GET / HTTP/1.1" 200 -
2025-04-07 01:48:06,420 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:48:06] "GET / HTTP/1.1" 200 -
2025-04-07 01:48:06,834 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:48:06] "GET / HTTP/1.1" 200 -
2025-04-07 01:48:07,360 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:48:07] "GET / HTTP/1.1" 200 -
2025-04-07 01:48:07,775 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:48:07] "GET / HTTP/1.1" 200 -
2025-04-07 01:48:11,721 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:48:11] "[32mGET /logout HTTP/1.1[0m" 302 -
2025-04-07 01:48:11,962 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:48:11] "GET /login HTTP/1.1" 200 -
2025-04-07 01:48:13,757 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:48:13] "GET /login HTTP/1.1" 200 -
2025-04-07 01:48:20,833 [INFO] text2sql [user_manager.py:48]: Upgrading password hash from SHA-256 to bcrypt
2025-04-07 01:48:20 - INFO - [user_manager.py:48] - Upgrading password hash from SHA-256 to bcrypt
2025-04-07 01:48:21,090 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:48:21] "[32mPOST /login HTTP/1.1[0m" 302 -
2025-04-07 01:48:21,101 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:48:21] "GET / HTTP/1.1" 200 -
2025-04-07 01:50:22,420 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/routes/security_routes.py', reloading
2025-04-07 01:50:22,421 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/app.py', reloading
2025-04-07 01:50:22,422 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/routes/security_routes.py', reloading
2025-04-07 01:50:22,422 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/app.py', reloading
2025-04-07 01:50:22,433 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/routes/security_routes.py', reloading
2025-04-07 01:50:22,434 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/app.py', reloading
2025-04-07 01:50:23,435 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-07 01:50:23,435 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-07 01:50:23,436 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-07 01:50:23,436 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-07 01:50:23,436 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-07 01:50:23 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-07 01:50:23,436 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-07 01:50:23 - INFO - [database.py:258] - Closing database connection
2025-04-07 01:50:23,437 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-07 01:50:23 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-07 01:50:24,343 [INFO] werkzeug [_internal.py:224]:  * Restarting with watchdog (inotify)
2025-04-07 01:50:28,423 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 01:50:28,424 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 01:50:28,424 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 01:50:28,425 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 01:50:28,425 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-07 01:50:28,441 [INFO] text2sql [app.py:67]: Debug logging enabled for SQL generator and agents
2025-04-07 01:50:28 - INFO - [app.py:67] - Debug logging enabled for SQL generator and agents
2025-04-07 01:50:28,442 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:50:28 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:50:28,443 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 01:50:28 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 01:50:28,488 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 01:50:28 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 01:50:28,488 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 01:50:28,488 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 01:50:28,488 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 01:50:28,488 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 01:50:28,489 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:50:28 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:50:28,489 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 01:50:28 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 01:50:28,535 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 01:50:28 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 01:50:28,536 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 01:50:28,536 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 01:50:28,536 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 01:50:28,536 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 01:50:28,536 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:50:28 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:50:28,537 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 01:50:28 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 01:50:28,582 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 01:50:28 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 01:50:28,582 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 01:50:28,582 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 01:50:28,582 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 01:50:28,583 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 01:50:28,583 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-07 01:50:28 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-07 01:50:28,583 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:50:28 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:50:28,584 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 01:50:28 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 01:50:28,631 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 01:50:28 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 01:50:28,632 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-07 01:50:28 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-07 01:50:28,632 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-07 01:50:28 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-07 01:50:28,633 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 01:50:28,633 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 01:50:28,634 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 01:50:28,634 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 01:50:28,634 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 01:50:28 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 01:50:28,672 [WARNING] werkzeug [_internal.py:224]:  * Debugger is active!
2025-04-07 01:50:28,673 [INFO] werkzeug [_internal.py:224]:  * Debugger PIN: 774-546-021
2025-04-07 01:51:47,188 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/routes/security_routes.py', reloading
2025-04-07 01:51:47,201 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/routes/security_routes.py', reloading
2025-04-07 01:51:48,205 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-07 01:51:48,206 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-07 01:51:48,206 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-07 01:51:48,207 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-07 01:51:48,208 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-07 01:51:48 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-07 01:51:48,209 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-07 01:51:48 - INFO - [database.py:258] - Closing database connection
2025-04-07 01:51:48,210 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-07 01:51:48 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-07 01:51:50,364 [INFO] werkzeug [_internal.py:224]:  * Restarting with watchdog (inotify)
2025-04-07 01:51:57,158 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 01:51:57,159 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 01:51:57,159 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 01:51:57,159 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 01:51:57,160 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-07 01:51:57,177 [INFO] text2sql [app.py:67]: Debug logging enabled for SQL generator and agents
2025-04-07 01:51:57 - INFO - [app.py:67] - Debug logging enabled for SQL generator and agents
2025-04-07 01:51:57,180 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:51:57 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:51:57,180 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 01:51:57 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 01:51:57,236 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 01:51:57 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 01:51:57,237 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 01:51:57,237 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 01:51:57,237 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 01:51:57,238 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 01:51:57,238 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:51:57 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:51:57,238 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 01:51:57 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 01:51:57,292 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 01:51:57 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 01:51:57,293 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 01:51:57,293 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 01:51:57,294 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 01:51:57,294 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 01:51:57,294 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:51:57 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:51:57,295 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 01:51:57 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 01:51:57,345 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 01:51:57 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 01:51:57,346 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 01:51:57,346 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 01:51:57,346 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 01:51:57,347 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 01:51:57,347 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-07 01:51:57 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-07 01:51:57,347 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:51:57 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:51:57,348 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 01:51:57 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 01:51:57,404 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 01:51:57 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 01:51:57,404 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-07 01:51:57 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-07 01:51:57,405 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-07 01:51:57 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-07 01:51:57,405 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 01:51:57,406 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 01:51:57,406 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 01:51:57,406 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 01:51:57,406 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 01:51:57 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 01:51:57,453 [WARNING] werkzeug [_internal.py:224]:  * Debugger is active!
2025-04-07 01:51:57,454 [INFO] werkzeug [_internal.py:224]:  * Debugger PIN: 774-546-021
2025-04-07 01:52:15,134 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/routes/security_routes.py', reloading
2025-04-07 01:52:15,135 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/routes/security_routes.py', reloading
2025-04-07 01:52:15,145 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/routes/security_routes.py', reloading
2025-04-07 01:52:16,146 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-07 01:52:16,146 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-07 01:52:16,146 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-07 01:52:16,147 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-07 01:52:16,147 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-07 01:52:16 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-07 01:52:16,147 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-07 01:52:16 - INFO - [database.py:258] - Closing database connection
2025-04-07 01:52:16,147 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-07 01:52:16 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-07 01:52:17,113 [INFO] werkzeug [_internal.py:224]:  * Restarting with watchdog (inotify)
2025-04-07 01:52:22,623 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 01:52:22,623 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 01:52:22,624 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 01:52:22,624 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 01:52:22,625 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-07 01:52:22,644 [INFO] text2sql [app.py:67]: Debug logging enabled for SQL generator and agents
2025-04-07 01:52:22 - INFO - [app.py:67] - Debug logging enabled for SQL generator and agents
2025-04-07 01:52:22,646 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:52:22 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:52:22,647 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 01:52:22 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 01:52:22,707 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 01:52:22 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 01:52:22,707 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 01:52:22,708 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 01:52:22,708 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 01:52:22,708 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 01:52:22,709 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:52:22 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:52:22,709 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 01:52:22 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 01:52:22,764 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 01:52:22 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 01:52:22,765 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 01:52:22,765 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 01:52:22,765 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 01:52:22,766 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 01:52:22,766 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:52:22 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:52:22,766 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 01:52:22 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 01:52:22,819 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 01:52:22 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 01:52:22,819 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 01:52:22,819 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 01:52:22,820 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 01:52:22,820 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 01:52:22,820 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-07 01:52:22 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-07 01:52:22,820 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:52:22 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:52:22,821 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 01:52:22 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 01:52:22,876 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 01:52:22 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 01:52:22,877 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-07 01:52:22 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-07 01:52:22,877 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-07 01:52:22 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-07 01:52:22,877 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 01:52:22,878 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 01:52:22,878 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 01:52:22,878 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 01:52:22,879 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 01:52:22 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 01:52:22,923 [WARNING] werkzeug [_internal.py:224]:  * Debugger is active!
2025-04-07 01:52:22,923 [INFO] werkzeug [_internal.py:224]:  * Debugger PIN: 774-546-021
2025-04-07 01:52:23,860 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:52:23] "GET / HTTP/1.1" 200 -
2025-04-07 01:54:10,454 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/routes/security_routes.py', reloading
2025-04-07 01:54:10,456 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/routes/security_routes.py', reloading
2025-04-07 01:54:10,467 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/routes/security_routes.py', reloading
2025-04-07 01:54:11,469 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-07 01:54:11,470 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-07 01:54:11,471 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-07 01:54:11,471 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-07 01:54:11,472 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-07 01:54:11 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-07 01:54:11,472 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-07 01:54:11 - INFO - [database.py:258] - Closing database connection
2025-04-07 01:54:11,473 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-07 01:54:11 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-07 01:54:13,178 [INFO] werkzeug [_internal.py:224]:  * Restarting with watchdog (inotify)
2025-04-07 01:54:19,943 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 01:54:19,944 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 01:54:19,944 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 01:54:19,945 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 01:54:19,945 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-07 01:54:19,965 [INFO] text2sql [app.py:67]: Debug logging enabled for SQL generator and agents
2025-04-07 01:54:19 - INFO - [app.py:67] - Debug logging enabled for SQL generator and agents
2025-04-07 01:54:19,968 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:54:19 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:54:19,969 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 01:54:19 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 01:54:20,041 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 01:54:20 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 01:54:20,042 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 01:54:20,042 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 01:54:20,042 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 01:54:20,042 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 01:54:20,043 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:54:20 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:54:20,043 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 01:54:20 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 01:54:20,106 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 01:54:20 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 01:54:20,107 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 01:54:20,108 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 01:54:20,108 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 01:54:20,108 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 01:54:20,109 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:54:20 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:54:20,109 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 01:54:20 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 01:54:20,174 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 01:54:20 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 01:54:20,174 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 01:54:20,175 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 01:54:20,175 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 01:54:20,176 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 01:54:20,176 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-07 01:54:20 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-07 01:54:20,177 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:54:20 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:54:20,177 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 01:54:20 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 01:54:20,243 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 01:54:20 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 01:54:20,243 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-07 01:54:20 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-07 01:54:20,244 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-07 01:54:20 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-07 01:54:20,244 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 01:54:20,244 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 01:54:20,245 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 01:54:20,245 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 01:54:20,245 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 01:54:20 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 01:54:20,298 [WARNING] werkzeug [_internal.py:224]:  * Debugger is active!
2025-04-07 01:54:20,299 [INFO] werkzeug [_internal.py:224]:  * Debugger PIN: 774-546-021
2025-04-07 01:54:28,257 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:54:28] "GET / HTTP/1.1" 200 -
2025-04-07 01:54:28,444 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:54:28] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-07 01:54:31,138 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:54:31] "GET / HTTP/1.1" 200 -
2025-04-07 01:54:31,726 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:54:31] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-07 01:54:39,166 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:54:39] "GET /admin/ HTTP/1.1" 200 -
2025-04-07 01:54:39,509 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:54:39] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-07 01:54:39,766 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:54:39] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-07 01:54:39,838 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:54:39] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-07 01:54:49,789 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:54:49] "GET /samples HTTP/1.1" 200 -
2025-04-07 01:54:50,148 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:54:50] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-07 01:54:50,383 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:54:50] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-07 01:54:50,472 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:54:50] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-07 01:54:50,475 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:54:50] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-07 01:54:50,487 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 01:54:50 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 01:54:50,489 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-07 01:54:50 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-07 01:54:50,493 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-07 01:54:50 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-07 01:54:50,497 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 2 samples (page 1, limit 10)
2025-04-07 01:54:50 - INFO - [feedback_manager.py:531] - Retrieved 2 samples (page 1, limit 10)
2025-04-07 01:54:50,499 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:54:50] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-07 01:54:58,588 [INFO] text2sql [app.py:267]: Schema requested for workspace: dfd
2025-04-07 01:54:58 - INFO - [app.py:267] - Schema requested for workspace: dfd
2025-04-07 01:54:58,590 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:54:58] "GET /api/schema?workspace=dfd HTTP/1.1" 200 -
2025-04-07 01:55:02,625 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:55:02] "[32mGET /logout HTTP/1.1[0m" 302 -
2025-04-07 01:55:02,863 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:55:02] "GET /login HTTP/1.1" 200 -
2025-04-07 01:55:04,695 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:55:04] "GET /reset-password-request HTTP/1.1" 200 -
2025-04-07 01:55:06,664 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:55:06] "GET /login HTTP/1.1" 200 -
2025-04-07 01:55:12,871 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/routes/security_routes.py', reloading
2025-04-07 01:55:12,872 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/routes/security_routes.py', reloading
2025-04-07 01:55:12,874 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/routes/security_routes.py', reloading
2025-04-07 01:55:13,876 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-07 01:55:13,876 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-07 01:55:13,877 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-07 01:55:13,877 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-07 01:55:13,878 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-07 01:55:13 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-07 01:55:13,879 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-07 01:55:13 - INFO - [database.py:258] - Closing database connection
2025-04-07 01:55:13,880 [INFO] text2sql.feedback [feedback_manager.py:668]: Closing database connection
2025-04-07 01:55:13 - INFO - [feedback_manager.py:668] - Closing database connection
2025-04-07 01:55:14,820 [INFO] werkzeug [_internal.py:224]:  * Restarting with watchdog (inotify)
2025-04-07 01:55:19,471 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 01:55:19,472 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 01:55:19,472 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 01:55:19,473 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 01:55:19,473 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-07 01:55:19,492 [INFO] text2sql [app.py:67]: Debug logging enabled for SQL generator and agents
2025-04-07 01:55:19 - INFO - [app.py:67] - Debug logging enabled for SQL generator and agents
2025-04-07 01:55:19,494 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:55:19 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:55:19,494 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 01:55:19 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 01:55:19,556 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 01:55:19 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 01:55:19,557 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 01:55:19,557 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 01:55:19,558 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 01:55:19,558 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 01:55:19,558 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:55:19 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:55:19,559 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 01:55:19 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 01:55:19,618 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 01:55:19 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 01:55:19,618 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 01:55:19,619 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 01:55:19,619 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 01:55:19,619 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 01:55:19,620 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:55:19 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:55:19,620 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 01:55:19 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 01:55:19,677 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 01:55:19 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 01:55:19,678 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 01:55:19,678 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 01:55:19,679 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 01:55:19,679 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 01:55:19,680 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-07 01:55:19 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-07 01:55:19,680 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:55:19 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 01:55:19,681 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 01:55:19 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 01:55:19,740 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 01:55:19 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 01:55:19,740 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-07 01:55:19 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-07 01:55:19,741 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-07 01:55:19 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-07 01:55:19,741 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 01:55:19,742 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 01:55:19,742 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 01:55:19,742 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 01:55:19,742 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 01:55:19 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 01:55:19,788 [WARNING] werkzeug [_internal.py:224]:  * Debugger is active!
2025-04-07 01:55:19,788 [INFO] werkzeug [_internal.py:224]:  * Debugger PIN: 774-546-021
2025-04-07 01:55:24,472 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:55:24] "[32mPOST /login HTTP/1.1[0m" 302 -
2025-04-07 01:55:24,494 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:55:24] "GET / HTTP/1.1" 200 -
2025-04-07 01:55:24,856 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:55:24] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-07 01:55:26,750 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:55:26] "GET / HTTP/1.1" 200 -
2025-04-07 01:55:27,110 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:55:27] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-07 01:55:28,689 [INFO] text2sql [app.py:267]: Schema requested for workspace: dfd
2025-04-07 01:55:28 - INFO - [app.py:267] - Schema requested for workspace: dfd
2025-04-07 01:55:28,696 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:55:28] "GET /api/schema?workspace=dfd HTTP/1.1" 200 -
2025-04-07 01:57:21,611 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:57:21] "[32mGET /logout HTTP/1.1[0m" 302 -
2025-04-07 01:57:21,848 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:57:21] "GET /login HTTP/1.1" 200 -
2025-04-07 01:57:29,286 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:57:29] "[32mPOST /login HTTP/1.1[0m" 302 -
2025-04-07 01:57:29,610 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:57:29] "GET / HTTP/1.1" 200 -
2025-04-07 01:57:29,852 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:57:29] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-07 01:57:35,478 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'get me all the customers'
2025-04-07 01:57:35,479 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:57:35] "POST /api/query HTTP/1.1" 200 -
2025-04-07 01:57:35,480 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'get me all the customers'
2025-04-07 01:57:35,481 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-07 01:57:35,482 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.00s
2025-04-07 01:57:35,483 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-07 01:57:35,484 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-07 01:57:35,484 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-07 01:57:35 - INFO - [database.py:44] - Attempting database connection
2025-04-07 01:57:35,486 [INFO] text2sql.database [database.py:48]: Database connection established in 0.00s
2025-04-07 01:57:35 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-07 01:57:35,488 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'get me all the customers'
2025-04-07 01:57:35,488 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (6): customers1, products, orders, order_items, sales_metrics, customers
2025-04-07 01:57:35,489 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-07 01:57:35,490 [INFO] text2sql.llm_engine [llm_engine.py:56]: [TABLE] Completion generation started
2025-04-07 01:57:35 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-07 01:57:36,287 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:57:36] "GET /api/query/progress/017bd9d1-5a40-4abc-a7bb-712b13a66657 HTTP/1.1" 200 -
2025-04-07 01:57:36,551 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:57:36] "GET /api/query/progress/017bd9d1-5a40-4abc-a7bb-712b13a66657 HTTP/1.1" 200 -
2025-04-07 01:57:36,962 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:57:36] "GET /api/query/progress/017bd9d1-5a40-4abc-a7bb-712b13a66657 HTTP/1.1" 200 -
2025-04-07 01:57:37,016 [INFO] text2sql.llm_engine [llm_engine.py:119]: [TABLE] Completion generation completed in 1.53s
2025-04-07 01:57:37 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 1.53s
2025-04-07 01:57:37,016 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-07 01:57:37 - INFO - [llm_engine.py:120] - **************************
2025-04-07 01:57:37,017 [INFO] text2sql.agents.table [table_agent.py:69]: Raw model response: 'customers'
2025-04-07 01:57:37,018 [INFO] text2sql.agents.table [table_agent.py:90]: Table selection completed in 1.53s. Selected: customers
2025-04-07 01:57:37,018 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'get me all the customers'
2025-04-07 01:57:37,019 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: customers
2025-04-07 01:57:37,019 [INFO] text2sql.agents.column [column_agent.py:38]: Only one table involved (customers). Skipping LLM call and including all columns.
2025-04-07 01:57:37,020 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-07 01:57:37 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-07 01:57:37,022 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-07 01:57:37 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-07 01:57:37,023 [INFO] text2sql.feedback [feedback_manager.py:267]: Stage 1: Vector search for 'get me all the customers...'
2025-04-07 01:57:37 - INFO - [feedback_manager.py:267] - Stage 1: Vector search for 'get me all the customers...'
2025-04-07 01:57:37,024 [INFO] text2sql.feedback [feedback_manager.py:62]: Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-07 01:57:37 - INFO - [feedback_manager.py:62] - Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-07 01:57:37,756 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:57:37] "GET /api/query/progress/017bd9d1-5a40-4abc-a7bb-712b13a66657 HTTP/1.1" 200 -
2025-04-07 01:57:37,998 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:57:37] "GET /api/query/progress/017bd9d1-5a40-4abc-a7bb-712b13a66657 HTTP/1.1" 200 -
2025-04-07 01:57:38,421 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:57:38] "GET /api/query/progress/017bd9d1-5a40-4abc-a7bb-712b13a66657 HTTP/1.1" 200 -
2025-04-07 01:57:39,214 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:57:39] "GET /api/query/progress/017bd9d1-5a40-4abc-a7bb-712b13a66657 HTTP/1.1" 200 -
2025-04-07 01:57:39,472 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:57:39] "GET /api/query/progress/017bd9d1-5a40-4abc-a7bb-712b13a66657 HTTP/1.1" 200 -
2025-04-07 01:57:39,891 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:57:39] "GET /api/query/progress/017bd9d1-5a40-4abc-a7bb-712b13a66657 HTTP/1.1" 200 -
2025-04-07 01:57:40,026 [INFO] text2sql.feedback [feedback_manager.py:65]: Embedding model loaded in 3.00s
2025-04-07 01:57:40 - INFO - [feedback_manager.py:65] - Embedding model loaded in 3.00s
2025-04-07 01:57:40,233 [INFO] text2sql.feedback [feedback_manager.py:322]: Found 2 initial candidates from vector search
2025-04-07 01:57:40 - INFO - [feedback_manager.py:322] - Found 2 initial candidates from vector search
2025-04-07 01:57:40,234 [INFO] text2sql.feedback [feedback_manager.py:367]: Less than 3 candidates, skipping reranking
2025-04-07 01:57:40 - INFO - [feedback_manager.py:367] - Less than 3 candidates, skipping reranking
2025-04-07 01:57:40,235 [INFO] text2sql.sql_generator [sql_generator.py:280]: Found 2 similar queries with reranking
2025-04-07 01:57:40,235 [INFO] text2sql.sql_generator [sql_generator.py:302]: Added similar query #1 from feedback (score: 1.0000): get me all the customers...
2025-04-07 01:57:40,236 [INFO] text2sql.sql_generator [sql_generator.py:302]: Added similar query #2 from feedback (score: 0.5187): get me count of customers by order month...
2025-04-07 01:57:40,236 [INFO] text2sql.azure [azure_client.py:35]: SQL generation started for query: 'get me all the customers'
2025-04-07 01:57:40 - INFO - [azure_client.py:35] - SQL generation started for query: 'get me all the customers'
2025-04-07 01:57:40,237 [INFO] text2sql.azure [azure_client.py:69]: Including schema information (74 chars)
2025-04-07 01:57:40 - INFO - [azure_client.py:69] - Including schema information (74 chars)
2025-04-07 01:57:40,240 [INFO] text2sql.azure [azure_client.py:97]: Including 2 SQL examples from feedback similarity search
2025-04-07 01:57:40 - INFO - [azure_client.py:97] - Including 2 SQL examples from feedback similarity search
2025-04-07 01:57:40,242 [INFO] text2sql.azure [azure_client.py:114]: PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: \n"}, {'role': 'user', 'content': "Here are some similar queries that were previously successful:\nQuestion: get me all the customers\nSQL: SELECT * FROM customers;\n\nQuestion: get me count of customers by order month\nSQL: SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;\n\n"}, {'role': 'user', 'content': 'Convert this question to SQL: get me all the customers'}]
2025-04-07 01:57:40 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: \n"}, {'role': 'user', 'content': "Here are some similar queries that were previously successful:\nQuestion: get me all the customers\nSQL: SELECT * FROM customers;\n\nQuestion: get me count of customers by order month\nSQL: SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;\n\n"}, {'role': 'user', 'content': 'Convert this question to SQL: get me all the customers'}]
2025-04-07 01:57:40,243 [INFO] text2sql.llm_engine [llm_engine.py:56]: [SQL_GEN] Completion generation started
2025-04-07 01:57:40 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-07 01:57:40,689 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:57:40] "GET /api/query/progress/017bd9d1-5a40-4abc-a7bb-712b13a66657 HTTP/1.1" 200 -
2025-04-07 01:57:40,941 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:57:40] "GET /api/query/progress/017bd9d1-5a40-4abc-a7bb-712b13a66657 HTTP/1.1" 200 -
2025-04-07 01:57:41,323 [INFO] text2sql.llm_engine [llm_engine.py:119]: [SQL_GEN] Completion generation completed in 1.08s
2025-04-07 01:57:41 - INFO - [llm_engine.py:119] - [SQL_GEN] Completion generation completed in 1.08s
2025-04-07 01:57:41,326 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-07 01:57:41 - INFO - [llm_engine.py:120] - **************************
2025-04-07 01:57:41,329 [INFO] text2sql.azure [azure_client.py:150]: Parsing SQL from model response
2025-04-07 01:57:41 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-07 01:57:41,331 [INFO] text2sql.azure [azure_client.py:157]: Found SQL code block in response
2025-04-07 01:57:41 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-07 01:57:41,335 [INFO] text2sql.azure [azure_client.py:171]: Extracted SQL query (25 chars) and explanation (91 chars)
2025-04-07 01:57:41 - INFO - [azure_client.py:171] - Extracted SQL query (25 chars) and explanation (91 chars)
2025-04-07 01:57:41,338 [INFO] text2sql.azure [azure_client.py:124]: Generated SQL: SELECT * 
FROM customers;
2025-04-07 01:57:41 - INFO - [azure_client.py:124] - Generated SQL: SELECT * 
FROM customers;
2025-04-07 01:57:41,343 [INFO] text2sql.azure [azure_client.py:132]: SQL generation completed in 1.11s
2025-04-07 01:57:41 - INFO - [azure_client.py:132] - SQL generation completed in 1.11s
2025-04-07 01:57:41,347 [INFO] text2sql.database [database.py:65]: Executing SQL query: SELECT * 
FROM customers;
2025-04-07 01:57:41 - INFO - [database.py:65] - Executing SQL query: SELECT * 
FROM customers;
2025-04-07 01:57:41,357 [INFO] text2sql.database [database.py:86]: Query returned 5 rows with 11 columns
2025-04-07 01:57:41 - INFO - [database.py:86] - Query returned 5 rows with 11 columns
2025-04-07 01:57:41,361 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:57:41] "GET /api/query/progress/017bd9d1-5a40-4abc-a7bb-712b13a66657 HTTP/1.1" 200 -
2025-04-07 01:57:41,375 [INFO] text2sql.database [database.py:95]: Query processing completed in 0.03s
2025-04-07 01:57:41 - INFO - [database.py:95] - Query processing completed in 0.03s
2025-04-07 01:57:41,379 [INFO] text2sql.sql_generator [sql_generator.py:376]: SQL generation completed in 5.90s
2025-04-07 01:57:41,380 [INFO] text2sql.sql_generator [sql_generator.py:125]: Query processing completed in 5.90s
2025-04-07 01:57:42,146 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 01:57:42] "GET /api/query/progress/017bd9d1-5a40-4abc-a7bb-712b13a66657 HTTP/1.1" 200 -
2025-04-07 02:01:13,043 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 02:01:13] "GET / HTTP/1.1" 200 -
2025-04-07 02:01:13,292 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 02:01:13] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-07 02:01:17,850 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 02:01:17] "GET /samples HTTP/1.1" 200 -
2025-04-07 02:01:18,240 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 02:01:18] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-07 02:01:18,468 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 02:01:18] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-07 02:01:18,576 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 02:01:18] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-07 02:01:18,580 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 02:01:18] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-07 02:01:18,591 [INFO] text2sql.feedback [feedback_manager.py:32]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 02:01:18 - INFO - [feedback_manager.py:32] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 02:01:18,592 [INFO] text2sql.feedback [feedback_manager.py:43]: Attempting database connection
2025-04-07 02:01:18 - INFO - [feedback_manager.py:43] - Attempting database connection
2025-04-07 02:01:18,596 [INFO] text2sql.feedback [feedback_manager.py:47]: Database connection established in 0.00s
2025-04-07 02:01:18 - INFO - [feedback_manager.py:47] - Database connection established in 0.00s
2025-04-07 02:01:18,602 [INFO] text2sql.feedback [feedback_manager.py:531]: Retrieved 2 samples (page 1, limit 10)
2025-04-07 02:01:18 - INFO - [feedback_manager.py:531] - Retrieved 2 samples (page 1, limit 10)
2025-04-07 02:01:18,604 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 02:01:18] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-07 02:01:20,666 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 02:01:20] "GET /admin/audit-logs HTTP/1.1" 200 -
2025-04-07 02:01:20,999 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 02:01:20] "[36mGET /static/js/admin/audit-logs.js HTTP/1.1[0m" 304 -
2025-04-07 02:01:26,691 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 02:01:26] "GET /admin/api/audit-logs/53 HTTP/1.1" 200 -
2025-04-07 02:03:44,581 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 02:03:44] "GET /admin/schema HTTP/1.1" 200 -
2025-04-07 02:03:44,830 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 02:03:44] "[36mGET /static/css/admin-schema.css HTTP/1.1[0m" 304 -
2025-04-07 02:03:44,917 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 02:03:44] "[36mGET /static/js/admin/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-07 02:03:44,926 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 02:03:44] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-07 02:03:45,219 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 02:03:45] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-07 02:03:45,222 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 02:03:45] "GET /admin/api/schema/workspaces HTTP/1.1" 200 -
2025-04-07 02:03:45,225 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 02:03:45] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-07 02:03:46,787 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 02:03:46] "GET /admin/api/schema/workspaces/dfd HTTP/1.1" 200 -
2025-04-07 02:03:47,072 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 02:03:47] "GET /admin/api/schema/workspaces/dfd HTTP/1.1" 200 -
2025-04-07 02:03:54,552 [INFO] text2sql.schema_manager [schema_manager.py:256]: Saving schema to /home/vijay/text2sql/config/data/schema.json
2025-04-07 02:03:54,555 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 02:03:54,556 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 02:03:54,557 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 02:03:54] "PUT /admin/api/schema/tables/customers1?workspace=dfd HTTP/1.1" 200 -
2025-04-07 02:03:54,798 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 02:03:54] "GET /admin/api/schema/tables/customers1?workspace=dfd HTTP/1.1" 200 -
2025-04-07 02:03:54,865 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 02:03:54] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-07 02:03:55,111 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 02:03:55] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-07 02:03:58,309 [INFO] text2sql.schema_manager [schema_manager.py:256]: Saving schema to /home/vijay/text2sql/config/data/schema.json
2025-04-07 02:03:58,310 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 02:03:58,311 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 02:03:58,312 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 02:03:58] "PUT /admin/api/schema/tables/customers1?workspace=dfd HTTP/1.1" 200 -
2025-04-07 02:03:58,628 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 02:03:58] "GET /admin/api/schema/tables/customers1?workspace=dfd HTTP/1.1" 200 -
2025-04-07 02:04:01,225 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 02:04:01] "GET / HTTP/1.1" 200 -
2025-04-07 02:04:01,583 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 02:04:01] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-07 08:25:44,113 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:25:44] "[32mGET / HTTP/1.1[0m" 302 -
2025-04-07 08:25:44,363 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:25:44] "GET /login HTTP/1.1" 200 -
2025-04-07 08:25:44,426 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:25:44] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-07 08:26:03,142 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:26:03] "POST /login HTTP/1.1" 200 -
2025-04-07 08:26:12,191 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:26:12] "[32mPOST /login HTTP/1.1[0m" 302 -
2025-04-07 08:26:12,201 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:26:12] "GET / HTTP/1.1" 200 -
2025-04-07 08:26:12,558 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:26:12] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-07 08:26:12,565 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:26:12] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-07 08:26:12,569 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:26:12] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-07 08:26:12,570 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:26:12] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-07 08:26:12,572 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:26:12] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-07 08:26:12,577 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:26:12] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-07 08:26:12,884 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:26:12] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-07 08:26:12,892 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:26:12] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-07 08:26:13,246 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:26:13] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-07 08:26:23,468 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:26:23] "GET / HTTP/1.1" 200 -
2025-04-07 08:26:23,821 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:26:23] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-07 08:26:25,647 [INFO] text2sql [app.py:267]: Schema requested for workspace: dfd
2025-04-07 08:26:25 - INFO - [app.py:267] - Schema requested for workspace: dfd
2025-04-07 08:26:25,650 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:26:25] "GET /api/schema?workspace=dfd HTTP/1.1" 200 -
2025-04-07 08:26:29,877 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:26:29] "GET /admin/ HTTP/1.1" 200 -
2025-04-07 08:26:30,110 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:26:30] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-07 08:26:30,206 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:26:30] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-07 08:26:30,408 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:26:30] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-07 08:26:34,597 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:26:34] "GET /admin/audit-logs HTTP/1.1" 200 -
2025-04-07 08:26:34,952 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:26:34] "[36mGET /static/js/admin/audit-logs.js HTTP/1.1[0m" 304 -
2025-04-07 08:26:40,037 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:26:40] "GET /admin/audit-logs?page=2 HTTP/1.1" 200 -
2025-04-07 08:26:41,770 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:26:41] "GET /admin/audit-logs?page=1 HTTP/1.1" 200 -
2025-04-07 08:26:47,072 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:26:47] "GET /admin/api/audit-logs/53 HTTP/1.1" 200 -
2025-04-07 08:26:50,323 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:26:50] "GET /admin/api/audit-logs/46 HTTP/1.1" 200 -
2025-04-07 08:26:55,787 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:26:55] "GET /admin/api/audit-logs/44 HTTP/1.1" 200 -
2025-04-07 08:37:15,140 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:37:15] "GET / HTTP/1.1" 200 -
2025-04-07 08:37:15,380 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:37:15] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-07 08:37:24,261 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'who are you'
2025-04-07 08:37:24,262 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:37:24] "POST /api/query HTTP/1.1" 200 -
2025-04-07 08:37:24,262 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'who are you'
2025-04-07 08:37:24,265 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-07 08:37:24,265 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.00s
2025-04-07 08:37:24,266 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-07 08:37:24,266 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-07 08:37:24,267 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-07 08:37:24 - INFO - [database.py:44] - Attempting database connection
2025-04-07 08:37:24,280 [INFO] text2sql.database [database.py:48]: Database connection established in 0.01s
2025-04-07 08:37:24 - INFO - [database.py:48] - Database connection established in 0.01s
2025-04-07 08:37:24,281 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'who are you'
2025-04-07 08:37:24,282 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (6): customers1, products, orders, order_items, sales_metrics, customers
2025-04-07 08:37:24,282 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-07 08:37:24,283 [INFO] text2sql.llm_engine [llm_engine.py:56]: [TABLE] Completion generation started
2025-04-07 08:37:24 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-07 08:37:25,073 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:37:25] "GET /api/query/progress/9bb99929-8d5a-412c-b051-bf9ab0e528dc HTTP/1.1" 200 -
2025-04-07 08:37:25,312 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:37:25] "GET /api/query/progress/9bb99929-8d5a-412c-b051-bf9ab0e528dc HTTP/1.1" 200 -
2025-04-07 08:37:25,752 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:37:25] "GET /api/query/progress/9bb99929-8d5a-412c-b051-bf9ab0e528dc HTTP/1.1" 200 -
2025-04-07 08:37:26,130 [INFO] text2sql.llm_engine [llm_engine.py:119]: [TABLE] Completion generation completed in 1.85s
2025-04-07 08:37:26 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 1.85s
2025-04-07 08:37:26,134 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-07 08:37:26 - INFO - [llm_engine.py:120] - **************************
2025-04-07 08:37:26,141 [INFO] text2sql.agents.table [table_agent.py:69]: Raw model response: 'None'
2025-04-07 08:37:26,145 [WARNING] text2sql.agents.table [table_agent.py:81]: Model suggested 1 invalid tables that were filtered out
2025-04-07 08:37:26,147 [WARNING] text2sql.agents.table [table_agent.py:84]: No valid tables selected by the model, defaulting to first table
2025-04-07 08:37:26,149 [INFO] text2sql.agents.table [table_agent.py:90]: Table selection completed in 1.87s. Selected: customers1
2025-04-07 08:37:26,150 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'who are you'
2025-04-07 08:37:26,153 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: customers1
2025-04-07 08:37:26,154 [INFO] text2sql.agents.column [column_agent.py:38]: Only one table involved (customers1). Skipping LLM call and including all columns.
2025-04-07 08:37:26,155 [INFO] text2sql.feedback [feedback_manager.py:267]: Stage 1: Vector search for 'who are you...'
2025-04-07 08:37:26 - INFO - [feedback_manager.py:267] - Stage 1: Vector search for 'who are you...'
2025-04-07 08:37:26,265 [INFO] text2sql.feedback [feedback_manager.py:322]: Found 2 initial candidates from vector search
2025-04-07 08:37:26 - INFO - [feedback_manager.py:322] - Found 2 initial candidates from vector search
2025-04-07 08:37:26,266 [INFO] text2sql.feedback [feedback_manager.py:367]: Less than 3 candidates, skipping reranking
2025-04-07 08:37:26 - INFO - [feedback_manager.py:367] - Less than 3 candidates, skipping reranking
2025-04-07 08:37:26,267 [INFO] text2sql.sql_generator [sql_generator.py:280]: Found 2 similar queries with reranking
2025-04-07 08:37:26,268 [INFO] text2sql.sql_generator [sql_generator.py:302]: Added similar query #1 from feedback (score: 0.1413): get me all the customers...
2025-04-07 08:37:26,268 [INFO] text2sql.sql_generator [sql_generator.py:302]: Added similar query #2 from feedback (score: -0.0529): get me count of customers by order month...
2025-04-07 08:37:26,268 [INFO] text2sql.azure [azure_client.py:35]: SQL generation started for query: 'who are you'
2025-04-07 08:37:26 - INFO - [azure_client.py:35] - SQL generation started for query: 'who are you'
2025-04-07 08:37:26,269 [INFO] text2sql.azure [azure_client.py:69]: Including schema information (588 chars)
2025-04-07 08:37:26 - INFO - [azure_client.py:69] - Including schema information (588 chars)
2025-04-07 08:37:26,270 [INFO] text2sql.azure [azure_client.py:97]: Including 2 SQL examples from feedback similarity search
2025-04-07 08:37:26 - INFO - [azure_client.py:97] - Including 2 SQL examples from feedback similarity search
2025-04-07 08:37:26,271 [INFO] text2sql.azure [azure_client.py:114]: PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers1\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': "Here are some similar queries that were previously successful:\nQuestion: get me all the customers\nSQL: SELECT * FROM customers;\n\nQuestion: get me count of customers by order month\nSQL: SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;\n\n"}, {'role': 'user', 'content': 'Convert this question to SQL: who are you'}]
2025-04-07 08:37:26 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers1\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': "Here are some similar queries that were previously successful:\nQuestion: get me all the customers\nSQL: SELECT * FROM customers;\n\nQuestion: get me count of customers by order month\nSQL: SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;\n\n"}, {'role': 'user', 'content': 'Convert this question to SQL: who are you'}]
2025-04-07 08:37:26,272 [INFO] text2sql.llm_engine [llm_engine.py:56]: [SQL_GEN] Completion generation started
2025-04-07 08:37:26 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-07 08:37:26,543 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:37:26] "GET /api/query/progress/9bb99929-8d5a-412c-b051-bf9ab0e528dc HTTP/1.1" 200 -
2025-04-07 08:37:26,793 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:37:26] "GET /api/query/progress/9bb99929-8d5a-412c-b051-bf9ab0e528dc HTTP/1.1" 200 -
2025-04-07 08:37:27,226 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:37:27] "GET /api/query/progress/9bb99929-8d5a-412c-b051-bf9ab0e528dc HTTP/1.1" 200 -
2025-04-07 08:37:27,749 [INFO] text2sql.llm_engine [llm_engine.py:119]: [SQL_GEN] Completion generation completed in 1.48s
2025-04-07 08:37:27 - INFO - [llm_engine.py:119] - [SQL_GEN] Completion generation completed in 1.48s
2025-04-07 08:37:27,751 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-07 08:37:27 - INFO - [llm_engine.py:120] - **************************
2025-04-07 08:37:27,753 [INFO] text2sql.azure [azure_client.py:150]: Parsing SQL from model response
2025-04-07 08:37:27 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-07 08:37:27,755 [INFO] text2sql.azure [azure_client.py:157]: Found SQL code block in response
2025-04-07 08:37:27 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-07 08:37:27,756 [INFO] text2sql.azure [azure_client.py:171]: Extracted SQL query (36 chars) and explanation (165 chars)
2025-04-07 08:37:27 - INFO - [azure_client.py:171] - Extracted SQL query (36 chars) and explanation (165 chars)
2025-04-07 08:37:27,757 [INFO] text2sql.azure [azure_client.py:124]: Generated SQL: SELECT 
    * 
FROM 
    customers1;
2025-04-07 08:37:27 - INFO - [azure_client.py:124] - Generated SQL: SELECT 
    * 
FROM 
    customers1;
2025-04-07 08:37:27,759 [INFO] text2sql.azure [azure_client.py:132]: SQL generation completed in 1.49s
2025-04-07 08:37:27 - INFO - [azure_client.py:132] - SQL generation completed in 1.49s
2025-04-07 08:37:27,762 [INFO] text2sql.database [database.py:65]: Executing SQL query: SELECT 
    * 
FROM 
    customers1;
2025-04-07 08:37:27 - INFO - [database.py:65] - Executing SQL query: SELECT 
    * 
FROM 
    customers1;
2025-04-07 08:37:27,776 [ERROR] text2sql.database [database.py:122]: SQL error after 0.01s: (sqlite3.OperationalError) no such table: customers1
[SQL: SELECT 
    * 
FROM 
    customers1;]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: customers1

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/database.py", line 78, in execute_query
    result = conn.execute(text(sql_query))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1414, in execute
    return meth(
           ^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: customers1
[SQL: SELECT 
    * 
FROM 
    customers1;]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-04-07 08:37:27 - ERROR - [database.py:122] - SQL error after 0.01s: (sqlite3.OperationalError) no such table: customers1
[SQL: SELECT 
    * 
FROM 
    customers1;]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: customers1

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/database.py", line 78, in execute_query
    result = conn.execute(text(sql_query))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1414, in execute
    return meth(
           ^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: customers1
[SQL: SELECT 
    * 
FROM 
    customers1;]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-04-07 08:37:27,789 [INFO] text2sql.sql_generator [sql_generator.py:376]: SQL generation completed in 3.52s
2025-04-07 08:37:27,789 [INFO] text2sql.sql_generator [sql_generator.py:125]: Query processing completed in 3.53s
2025-04-07 08:37:28,032 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:37:28] "GET /api/query/progress/9bb99929-8d5a-412c-b051-bf9ab0e528dc HTTP/1.1" 200 -
2025-04-07 08:37:44,994 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:37:44] "GET /admin/schema HTTP/1.1" 200 -
2025-04-07 08:37:45,334 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:37:45] "[36mGET /static/css/admin-schema.css HTTP/1.1[0m" 304 -
2025-04-07 08:37:45,337 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:37:45] "[36mGET /static/js/admin/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-07 08:37:45,601 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:37:45] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-07 08:37:45,655 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:37:45] "GET /admin/api/schema/workspaces HTTP/1.1" 200 -
2025-04-07 08:37:45,656 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:37:45] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-07 08:37:45,657 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:37:45] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-07 08:37:46,342 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:37:46] "GET /admin/api/schema/workspaces/dfd HTTP/1.1" 200 -
2025-04-07 08:37:52,025 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:37:52] "[31m[1mPUT /admin/api/schema/tables/customers1?workspace=dfd HTTP/1.1[0m" 409 -
2025-04-07 08:37:55,302 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:37:55] "[31m[1mPUT /admin/api/schema/tables/customers1?workspace=dfd HTTP/1.1[0m" 409 -
2025-04-07 08:38:02,617 [INFO] text2sql.schema_manager [schema_manager.py:256]: Saving schema to /home/vijay/text2sql/config/data/schema.json
2025-04-07 08:38:02,620 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 08:38:02,621 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 08:38:02,622 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:38:02] "DELETE /admin/api/schema/tables/customers?workspace=dfd HTTP/1.1" 200 -
2025-04-07 08:38:02,859 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:38:02] "GET /admin/api/schema/workspaces/dfd HTTP/1.1" 200 -
2025-04-07 08:38:02,925 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:38:02] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-07 08:38:02,927 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:38:02] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-07 08:38:02,930 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:38:02] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-07 08:38:06,658 [INFO] text2sql.schema_manager [schema_manager.py:256]: Saving schema to /home/vijay/text2sql/config/data/schema.json
2025-04-07 08:38:06,660 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 08:38:06,661 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 08:38:06,662 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:38:06] "POST /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-07 08:38:06,929 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:38:06] "GET /admin/api/schema/workspaces/dfd HTTP/1.1" 200 -
2025-04-07 08:38:06,972 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:38:06] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-07 08:38:06,972 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:38:06] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-07 08:38:06,979 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:38:06] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-07 08:38:13,145 [INFO] text2sql.schema_manager [schema_manager.py:256]: Saving schema to /home/vijay/text2sql/config/data/schema.json
2025-04-07 08:38:13,147 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 08:38:13,148 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 08:38:13,150 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:38:13] "DELETE /admin/api/schema/tables/customers?workspace=dfd HTTP/1.1" 200 -
2025-04-07 08:38:13,392 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:38:13] "GET /admin/api/schema/workspaces/dfd HTTP/1.1" 200 -
2025-04-07 08:38:13,489 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:38:13] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-07 08:38:13,492 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:38:13] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-07 08:38:13,500 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:38:13] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-07 08:38:38,889 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:38:38] "GET / HTTP/1.1" 200 -
2025-04-07 08:38:39,143 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 08:38:39] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-07 13:29:17,630 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 13:29:17] "[32mGET / HTTP/1.1[0m" 302 -
2025-04-07 13:29:17,807 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 13:29:17] "GET /login HTTP/1.1" 200 -
2025-04-07 13:39:31,671 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 13:39:31] "[32mPOST /login HTTP/1.1[0m" 302 -
2025-04-07 13:39:31,692 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 13:39:31] "GET / HTTP/1.1" 200 -
2025-04-07 13:39:32,067 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 13:39:32] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-07 13:39:32,068 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 13:39:32] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-07 13:39:32,072 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 13:39:32] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-07 13:39:32,080 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 13:39:32] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-07 13:39:32,092 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 13:39:32] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-07 13:39:32,094 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 13:39:32] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-07 13:39:32,425 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 13:39:32] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-07 13:39:32,440 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 13:39:32] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-07 13:39:32,818 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 13:39:32] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-07 13:39:41,104 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 13:39:41] "GET /admin/audit-logs HTTP/1.1" 200 -
2025-04-07 13:39:41,453 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 13:39:41] "[36mGET /static/js/admin/audit-logs.js HTTP/1.1[0m" 304 -
2025-04-07 13:39:45,481 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 13:39:45] "GET /admin/api/audit-logs/56 HTTP/1.1" 200 -
2025-04-07 13:39:49,879 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 13:39:49] "GET / HTTP/1.1" 200 -
2025-04-07 13:39:50,108 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 13:39:50] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-07 13:39:58,626 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'who are you'
2025-04-07 13:39:58,628 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 13:39:58] "POST /api/query HTTP/1.1" 200 -
2025-04-07 13:39:58,630 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'who are you'
2025-04-07 13:39:58,633 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-07 13:39:58,634 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.00s
2025-04-07 13:39:58,635 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-07 13:39:58,636 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-07 13:39:58,638 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-07 13:39:58 - INFO - [database.py:44] - Attempting database connection
2025-04-07 13:39:58,691 [INFO] text2sql.database [database.py:48]: Database connection established in 0.05s
2025-04-07 13:39:58 - INFO - [database.py:48] - Database connection established in 0.05s
2025-04-07 13:39:58,694 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'who are you'
2025-04-07 13:39:58,696 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (6): customers1, products, orders, order_items, sales_metrics, customers
2025-04-07 13:39:58,700 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-07 13:39:58,701 [INFO] text2sql.llm_engine [llm_engine.py:56]: [TABLE] Completion generation started
2025-04-07 13:39:58 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-07 13:39:59,451 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 13:39:59] "GET /api/query/progress/3b3daeb0-797d-4869-b02a-ae0155b64d70 HTTP/1.1" 200 -
2025-04-07 13:39:59,713 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 13:39:59] "GET /api/query/progress/3b3daeb0-797d-4869-b02a-ae0155b64d70 HTTP/1.1" 200 -
2025-04-07 13:40:00,123 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 13:40:00] "GET /api/query/progress/3b3daeb0-797d-4869-b02a-ae0155b64d70 HTTP/1.1" 200 -
2025-04-07 13:40:00,504 [INFO] text2sql.llm_engine [llm_engine.py:119]: [TABLE] Completion generation completed in 1.80s
2025-04-07 13:40:00 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 1.80s
2025-04-07 13:40:00,509 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-07 13:40:00 - INFO - [llm_engine.py:120] - **************************
2025-04-07 13:40:00,516 [INFO] text2sql.agents.table [table_agent.py:69]: Raw model response: 'None'
2025-04-07 13:40:00,520 [WARNING] text2sql.agents.table [table_agent.py:81]: Model suggested 1 invalid tables that were filtered out
2025-04-07 13:40:00,523 [WARNING] text2sql.agents.table [table_agent.py:84]: No valid tables selected by the model, defaulting to first table
2025-04-07 13:40:00,527 [INFO] text2sql.agents.table [table_agent.py:90]: Table selection completed in 1.83s. Selected: customers1
2025-04-07 13:40:00,531 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'who are you'
2025-04-07 13:40:00,535 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: customers1
2025-04-07 13:40:00,538 [INFO] text2sql.agents.column [column_agent.py:38]: Only one table involved (customers1). Skipping LLM call and including all columns.
2025-04-07 13:40:00,542 [INFO] text2sql.feedback [feedback_manager.py:267]: Stage 1: Vector search for 'who are you...'
2025-04-07 13:40:00 - INFO - [feedback_manager.py:267] - Stage 1: Vector search for 'who are you...'
2025-04-07 13:40:00,893 [INFO] text2sql.feedback [feedback_manager.py:322]: Found 2 initial candidates from vector search
2025-04-07 13:40:00 - INFO - [feedback_manager.py:322] - Found 2 initial candidates from vector search
2025-04-07 13:40:00,895 [INFO] text2sql.feedback [feedback_manager.py:367]: Less than 3 candidates, skipping reranking
2025-04-07 13:40:00 - INFO - [feedback_manager.py:367] - Less than 3 candidates, skipping reranking
2025-04-07 13:40:00,896 [INFO] text2sql.sql_generator [sql_generator.py:280]: Found 2 similar queries with reranking
2025-04-07 13:40:00,896 [INFO] text2sql.sql_generator [sql_generator.py:302]: Added similar query #1 from feedback (score: 0.1413): get me all the customers...
2025-04-07 13:40:00,897 [INFO] text2sql.sql_generator [sql_generator.py:302]: Added similar query #2 from feedback (score: -0.0529): get me count of customers by order month...
2025-04-07 13:40:00,897 [INFO] text2sql.azure [azure_client.py:35]: SQL generation started for query: 'who are you'
2025-04-07 13:40:00 - INFO - [azure_client.py:35] - SQL generation started for query: 'who are you'
2025-04-07 13:40:00,898 [INFO] text2sql.azure [azure_client.py:69]: Including schema information (588 chars)
2025-04-07 13:40:00 - INFO - [azure_client.py:69] - Including schema information (588 chars)
2025-04-07 13:40:00,899 [INFO] text2sql.azure [azure_client.py:97]: Including 2 SQL examples from feedback similarity search
2025-04-07 13:40:00 - INFO - [azure_client.py:97] - Including 2 SQL examples from feedback similarity search
2025-04-07 13:40:00,901 [INFO] text2sql.azure [azure_client.py:114]: PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers1\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': "Here are some similar queries that were previously successful:\nQuestion: get me all the customers\nSQL: SELECT * FROM customers;\n\nQuestion: get me count of customers by order month\nSQL: SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;\n\n"}, {'role': 'user', 'content': 'Convert this question to SQL: who are you'}]
2025-04-07 13:40:00 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers1\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': "Here are some similar queries that were previously successful:\nQuestion: get me all the customers\nSQL: SELECT * FROM customers;\n\nQuestion: get me count of customers by order month\nSQL: SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;\n\n"}, {'role': 'user', 'content': 'Convert this question to SQL: who are you'}]
2025-04-07 13:40:00,903 [INFO] text2sql.llm_engine [llm_engine.py:56]: [SQL_GEN] Completion generation started
2025-04-07 13:40:00 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-07 13:40:00,916 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 13:40:00] "GET /api/query/progress/3b3daeb0-797d-4869-b02a-ae0155b64d70 HTTP/1.1" 200 -
2025-04-07 13:40:01,160 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 13:40:01] "GET /api/query/progress/3b3daeb0-797d-4869-b02a-ae0155b64d70 HTTP/1.1" 200 -
2025-04-07 13:40:01,593 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 13:40:01] "GET /api/query/progress/3b3daeb0-797d-4869-b02a-ae0155b64d70 HTTP/1.1" 200 -
2025-04-07 13:40:02,410 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 13:40:02] "GET /api/query/progress/3b3daeb0-797d-4869-b02a-ae0155b64d70 HTTP/1.1" 200 -
2025-04-07 13:40:02,648 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 13:40:02] "GET /api/query/progress/3b3daeb0-797d-4869-b02a-ae0155b64d70 HTTP/1.1" 200 -
2025-04-07 13:40:02,759 [INFO] text2sql.llm_engine [llm_engine.py:119]: [SQL_GEN] Completion generation completed in 1.86s
2025-04-07 13:40:02 - INFO - [llm_engine.py:119] - [SQL_GEN] Completion generation completed in 1.86s
2025-04-07 13:40:02,762 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-07 13:40:02 - INFO - [llm_engine.py:120] - **************************
2025-04-07 13:40:02,764 [INFO] text2sql.azure [azure_client.py:150]: Parsing SQL from model response
2025-04-07 13:40:02 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-07 13:40:02,768 [INFO] text2sql.azure [azure_client.py:157]: Found SQL code block in response
2025-04-07 13:40:02 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-07 13:40:02,770 [INFO] text2sql.azure [azure_client.py:171]: Extracted SQL query (36 chars) and explanation (142 chars)
2025-04-07 13:40:02 - INFO - [azure_client.py:171] - Extracted SQL query (36 chars) and explanation (142 chars)
2025-04-07 13:40:02,774 [INFO] text2sql.azure [azure_client.py:124]: Generated SQL: SELECT 
    * 
FROM 
    customers1;
2025-04-07 13:40:02 - INFO - [azure_client.py:124] - Generated SQL: SELECT 
    * 
FROM 
    customers1;
2025-04-07 13:40:02,778 [INFO] text2sql.azure [azure_client.py:132]: SQL generation completed in 1.88s
2025-04-07 13:40:02 - INFO - [azure_client.py:132] - SQL generation completed in 1.88s
2025-04-07 13:40:02,782 [INFO] text2sql.database [database.py:65]: Executing SQL query: SELECT 
    * 
FROM 
    customers1;
2025-04-07 13:40:02 - INFO - [database.py:65] - Executing SQL query: SELECT 
    * 
FROM 
    customers1;
2025-04-07 13:40:02,832 [ERROR] text2sql.database [database.py:122]: SQL error after 0.05s: (sqlite3.OperationalError) no such table: customers1
[SQL: SELECT 
    * 
FROM 
    customers1;]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: customers1

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/database.py", line 78, in execute_query
    result = conn.execute(text(sql_query))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1414, in execute
    return meth(
           ^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: customers1
[SQL: SELECT 
    * 
FROM 
    customers1;]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-04-07 13:40:02 - ERROR - [database.py:122] - SQL error after 0.05s: (sqlite3.OperationalError) no such table: customers1
[SQL: SELECT 
    * 
FROM 
    customers1;]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: customers1

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/database.py", line 78, in execute_query
    result = conn.execute(text(sql_query))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1414, in execute
    return meth(
           ^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: customers1
[SQL: SELECT 
    * 
FROM 
    customers1;]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-04-07 13:40:02,846 [INFO] text2sql.sql_generator [sql_generator.py:376]: SQL generation completed in 4.21s
2025-04-07 13:40:02,848 [INFO] text2sql.sql_generator [sql_generator.py:125]: Query processing completed in 4.22s
2025-04-07 13:40:03,073 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 13:40:03] "GET /api/query/progress/3b3daeb0-797d-4869-b02a-ae0155b64d70 HTTP/1.1" 200 -
2025-04-07 13:42:20,790 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 13:42:20] "GET / HTTP/1.1" 200 -
2025-04-07 13:42:20,986 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 13:42:20] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-07 13:42:23,717 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 13:42:23] "GET / HTTP/1.1" 200 -
2025-04-07 13:42:24,145 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 13:42:24] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-07 13:42:24,569 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 13:42:24] "GET / HTTP/1.1" 200 -
2025-04-07 13:42:24,988 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 13:42:24] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-07 17:18:43,226 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 17:18:43] "[32mGET / HTTP/1.1[0m" 302 -
2025-04-07 17:18:43,458 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 17:18:43] "GET /login HTTP/1.1" 200 -
2025-04-07 17:18:58,267 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 17:18:58] "POST /login HTTP/1.1" 200 -
2025-04-07 17:19:03,724 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 17:19:03] "[32mPOST /login HTTP/1.1[0m" 302 -
2025-04-07 17:19:03,747 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 17:19:03] "GET / HTTP/1.1" 200 -
2025-04-07 17:19:04,114 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 17:19:04] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-07 17:19:04,120 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 17:19:04] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-07 17:19:04,129 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 17:19:04] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-07 17:19:04,130 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 17:19:04] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-07 17:19:04,131 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 17:19:04] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-07 17:19:04,133 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 17:19:04] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-07 17:19:04,425 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 17:19:04] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-07 17:19:04,439 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 17:19:04] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-07 17:19:04,798 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 17:19:04] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-07 17:19:13,430 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'get me count of customers'
2025-04-07 17:19:13,431 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 17:19:13] "POST /api/query HTTP/1.1" 200 -
2025-04-07 17:19:13,432 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'get me count of customers'
2025-04-07 17:19:13,434 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-07 17:19:13,435 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.00s
2025-04-07 17:19:13,435 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-07 17:19:13,436 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-07 17:19:13,437 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-07 17:19:13 - INFO - [database.py:44] - Attempting database connection
2025-04-07 17:19:13,475 [INFO] text2sql.database [database.py:48]: Database connection established in 0.04s
2025-04-07 17:19:13 - INFO - [database.py:48] - Database connection established in 0.04s
2025-04-07 17:19:13,477 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'get me count of customers'
2025-04-07 17:19:13,479 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (6): customers1, products, orders, order_items, sales_metrics, customers
2025-04-07 17:19:13,480 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-07 17:19:13,481 [INFO] text2sql.llm_engine [llm_engine.py:56]: [TABLE] Completion generation started
2025-04-07 17:19:13 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-07 17:19:14,243 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 17:19:14] "GET /api/query/progress/5b95a876-f7ad-4a76-bce1-2148d4e797fd HTTP/1.1" 200 -
2025-04-07 17:19:14,494 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 17:19:14] "GET /api/query/progress/5b95a876-f7ad-4a76-bce1-2148d4e797fd HTTP/1.1" 200 -
2025-04-07 17:19:14,921 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 17:19:14] "GET /api/query/progress/5b95a876-f7ad-4a76-bce1-2148d4e797fd HTTP/1.1" 200 -
2025-04-07 17:19:15,283 [INFO] text2sql.llm_engine [llm_engine.py:119]: [TABLE] Completion generation completed in 1.80s
2025-04-07 17:19:15 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 1.80s
2025-04-07 17:19:15,286 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-07 17:19:15 - INFO - [llm_engine.py:120] - **************************
2025-04-07 17:19:15,287 [INFO] text2sql.agents.table [table_agent.py:69]: Raw model response: 'customers'
2025-04-07 17:19:15,289 [INFO] text2sql.agents.table [table_agent.py:90]: Table selection completed in 1.81s. Selected: customers
2025-04-07 17:19:15,291 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'get me count of customers'
2025-04-07 17:19:15,293 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: customers
2025-04-07 17:19:15,295 [INFO] text2sql.agents.column [column_agent.py:38]: Only one table involved (customers). Skipping LLM call and including all columns.
2025-04-07 17:19:15,296 [INFO] text2sql.feedback [feedback_manager.py:267]: Stage 1: Vector search for 'get me count of customers...'
2025-04-07 17:19:15 - INFO - [feedback_manager.py:267] - Stage 1: Vector search for 'get me count of customers...'
2025-04-07 17:19:15,407 [INFO] text2sql.feedback [feedback_manager.py:322]: Found 2 initial candidates from vector search
2025-04-07 17:19:15 - INFO - [feedback_manager.py:322] - Found 2 initial candidates from vector search
2025-04-07 17:19:15,410 [INFO] text2sql.feedback [feedback_manager.py:367]: Less than 3 candidates, skipping reranking
2025-04-07 17:19:15 - INFO - [feedback_manager.py:367] - Less than 3 candidates, skipping reranking
2025-04-07 17:19:15,413 [INFO] text2sql.sql_generator [sql_generator.py:280]: Found 2 similar queries with reranking
2025-04-07 17:19:15,414 [INFO] text2sql.sql_generator [sql_generator.py:302]: Added similar query #1 from feedback (score: 0.7587): get me count of customers by order month...
2025-04-07 17:19:15,415 [INFO] text2sql.sql_generator [sql_generator.py:302]: Added similar query #2 from feedback (score: 0.7282): get me all the customers...
2025-04-07 17:19:15,416 [INFO] text2sql.azure [azure_client.py:35]: SQL generation started for query: 'get me count of customers'
2025-04-07 17:19:15 - INFO - [azure_client.py:35] - SQL generation started for query: 'get me count of customers'
2025-04-07 17:19:15,418 [INFO] text2sql.azure [azure_client.py:69]: Including schema information (74 chars)
2025-04-07 17:19:15 - INFO - [azure_client.py:69] - Including schema information (74 chars)
2025-04-07 17:19:15,422 [INFO] text2sql.azure [azure_client.py:97]: Including 2 SQL examples from feedback similarity search
2025-04-07 17:19:15 - INFO - [azure_client.py:97] - Including 2 SQL examples from feedback similarity search
2025-04-07 17:19:15,424 [INFO] text2sql.azure [azure_client.py:114]: PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: \n"}, {'role': 'user', 'content': "Here are some similar queries that were previously successful:\nQuestion: get me count of customers by order month\nSQL: SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;\n\nQuestion: get me all the customers\nSQL: SELECT * FROM customers;\n\n"}, {'role': 'user', 'content': 'Convert this question to SQL: get me count of customers'}]
2025-04-07 17:19:15 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: \n"}, {'role': 'user', 'content': "Here are some similar queries that were previously successful:\nQuestion: get me count of customers by order month\nSQL: SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;\n\nQuestion: get me all the customers\nSQL: SELECT * FROM customers;\n\n"}, {'role': 'user', 'content': 'Convert this question to SQL: get me count of customers'}]
2025-04-07 17:19:15,425 [INFO] text2sql.llm_engine [llm_engine.py:56]: [SQL_GEN] Completion generation started
2025-04-07 17:19:15 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-07 17:19:15,732 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 17:19:15] "GET /api/query/progress/5b95a876-f7ad-4a76-bce1-2148d4e797fd HTTP/1.1" 200 -
2025-04-07 17:19:15,980 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 17:19:15] "GET /api/query/progress/5b95a876-f7ad-4a76-bce1-2148d4e797fd HTTP/1.1" 200 -
2025-04-07 17:19:16,390 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 17:19:16] "GET /api/query/progress/5b95a876-f7ad-4a76-bce1-2148d4e797fd HTTP/1.1" 200 -
2025-04-07 17:19:16,986 [INFO] text2sql.llm_engine [llm_engine.py:119]: [SQL_GEN] Completion generation completed in 1.56s
2025-04-07 17:19:16 - INFO - [llm_engine.py:119] - [SQL_GEN] Completion generation completed in 1.56s
2025-04-07 17:19:16,988 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-07 17:19:16 - INFO - [llm_engine.py:120] - **************************
2025-04-07 17:19:16,992 [INFO] text2sql.azure [azure_client.py:150]: Parsing SQL from model response
2025-04-07 17:19:16 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-07 17:19:16,997 [INFO] text2sql.azure [azure_client.py:157]: Found SQL code block in response
2025-04-07 17:19:16 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-07 17:19:16,999 [INFO] text2sql.azure [azure_client.py:171]: Extracted SQL query (59 chars) and explanation (88 chars)
2025-04-07 17:19:16 - INFO - [azure_client.py:171] - Extracted SQL query (59 chars) and explanation (88 chars)
2025-04-07 17:19:17,002 [INFO] text2sql.azure [azure_client.py:124]: Generated SQL: SELECT 
    COUNT(*) AS customer_count
FROM 
    customers;
2025-04-07 17:19:17 - INFO - [azure_client.py:124] - Generated SQL: SELECT 
    COUNT(*) AS customer_count
FROM 
    customers;
2025-04-07 17:19:17,007 [INFO] text2sql.azure [azure_client.py:132]: SQL generation completed in 1.59s
2025-04-07 17:19:17 - INFO - [azure_client.py:132] - SQL generation completed in 1.59s
2025-04-07 17:19:17,011 [INFO] text2sql.database [database.py:65]: Executing SQL query: SELECT 
    COUNT(*) AS customer_count
FROM 
    customers;
2025-04-07 17:19:17 - INFO - [database.py:65] - Executing SQL query: SELECT 
    COUNT(*) AS customer_count
FROM 
    customers;
2025-04-07 17:19:17,095 [INFO] text2sql.database [database.py:86]: Query returned 1 rows with 1 columns
2025-04-07 17:19:17 - INFO - [database.py:86] - Query returned 1 rows with 1 columns
2025-04-07 17:19:17,150 [INFO] text2sql.database [database.py:95]: Query processing completed in 0.14s
2025-04-07 17:19:17 - INFO - [database.py:95] - Query processing completed in 0.14s
2025-04-07 17:19:17,156 [INFO] text2sql.sql_generator [sql_generator.py:376]: SQL generation completed in 3.72s
2025-04-07 17:19:17,158 [INFO] text2sql.sql_generator [sql_generator.py:125]: Query processing completed in 3.73s
2025-04-07 17:19:17,197 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 17:19:17] "GET /api/query/progress/5b95a876-f7ad-4a76-bce1-2148d4e797fd HTTP/1.1" 200 -
2025-04-07 17:19:37,466 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 17:19:37] "GET / HTTP/1.1" 200 -
2025-04-07 17:19:37,696 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 17:19:37] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-07 17:19:40,210 [INFO] text2sql [app.py:267]: Schema requested for workspace: dfd
2025-04-07 17:19:40 - INFO - [app.py:267] - Schema requested for workspace: dfd
2025-04-07 17:19:40,213 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 17:19:40] "GET /api/schema?workspace=dfd HTTP/1.1" 200 -
2025-04-07 17:19:44,423 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 17:19:44] "GET /admin/ HTTP/1.1" 200 -
2025-04-07 17:19:44,679 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 17:19:44] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-07 17:19:44,855 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 17:19:44] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-07 17:19:45,016 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 17:19:45] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-07 17:19:53,102 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 17:19:53] "GET / HTTP/1.1" 200 -
2025-04-07 17:19:53,478 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 17:19:53] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-07 20:48:31,697 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 20:48:31,699 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 20:48:31,700 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 20:48:31,714 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 20:48:31,717 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-07 20:48:31,838 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 20:48:31,849 [INFO] text2sql [app.py:67]: Debug logging enabled for SQL generator and agents
2025-04-07 20:48:31 - INFO - [app.py:67] - Debug logging enabled for SQL generator and agents
2025-04-07 20:48:31,878 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 20:48:31 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 20:48:31,879 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 20:48:31 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 20:48:32,263 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 20:48:32 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 20:48:32,269 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 20:48:32,271 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 20:48:32,271 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 20:48:32,272 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 20:48:32,274 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 20:48:32 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 20:48:32,279 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 20:48:32 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 20:48:32,468 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 20:48:32 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 20:48:32,468 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 20:48:32,470 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 20:48:32,470 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 20:48:32,471 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 20:48:32,471 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 20:48:32 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 20:48:32,472 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 20:48:32 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 20:48:32,631 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 20:48:32 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 20:48:32,632 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 20:48:32,632 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 20:48:32,633 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 20:48:32,634 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 20:48:32,635 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-07 20:48:32 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-07 20:48:32,637 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 20:48:32 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 20:48:32,639 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 20:48:32 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 20:48:32,794 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 20:48:32 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 20:48:32,795 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-07 20:48:32 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-07 20:48:32,796 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-07 20:48:32 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-07 20:48:32,796 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 20:48:32,797 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 20:48:32,797 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 20:48:32,802 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 20:48:32,803 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 20:48:32 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 20:48:32,913 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-07 20:48:32,913 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-07 20:48:32,913 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-07 20:48:32,914 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-07 20:48:32,914 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-07 20:48:32 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-07 20:48:32,915 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-07 20:48:32 - INFO - [database.py:258] - Closing database connection
2025-04-07 20:48:32,915 [INFO] text2sql.feedback [feedback_manager.py:750]: Closing database connections
2025-04-07 20:48:32 - INFO - [feedback_manager.py:750] - Closing database connections
2025-04-07 20:48:32,916 [INFO] text2sql.vector [vector_store.py:288]: Closing vector database connection
2025-04-07 20:48:32 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-07 20:48:45,185 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 20:48:45,185 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 20:48:45,186 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 20:48:45,186 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 20:48:45,187 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-07 20:48:45,199 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 20:48:45,202 [INFO] text2sql [app.py:67]: Debug logging enabled for SQL generator and agents
2025-04-07 20:48:45 - INFO - [app.py:67] - Debug logging enabled for SQL generator and agents
2025-04-07 20:48:45,205 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 20:48:45 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 20:48:45,205 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 20:48:45 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 20:48:45,284 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 20:48:45 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 20:48:45,285 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 20:48:45,285 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 20:48:45,286 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 20:48:45,286 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 20:48:45,286 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 20:48:45 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 20:48:45,287 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 20:48:45 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 20:48:45,362 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 20:48:45 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 20:48:45,362 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 20:48:45,363 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 20:48:45,363 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 20:48:45,363 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 20:48:45,363 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 20:48:45 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 20:48:45,364 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 20:48:45 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 20:48:45,473 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 20:48:45 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 20:48:45,476 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 20:48:45,477 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 20:48:45,479 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 20:48:45,480 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 20:48:45,480 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-07 20:48:45 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-07 20:48:45,481 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 20:48:45 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 20:48:45,481 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 20:48:45 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 20:48:45,564 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 20:48:45 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 20:48:45,565 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-07 20:48:45 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-07 20:48:45,565 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-07 20:48:45 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-07 20:48:45,566 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 20:48:45,566 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 20:48:45,566 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 20:48:45,567 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 20:48:45,567 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 20:48:45 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 20:48:45,638 [INFO] werkzeug [_internal.py:224]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.27.251.157:5000
2025-04-07 20:48:45,639 [INFO] werkzeug [_internal.py:224]: [33mPress CTRL+C to quit[0m
2025-04-07 20:48:45,653 [INFO] werkzeug [_internal.py:224]:  * Restarting with watchdog (inotify)
2025-04-07 20:48:54,624 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 20:48:54,625 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 20:48:54,625 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 20:48:54,625 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 20:48:54,626 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-07 20:48:54,634 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 20:48:54,635 [INFO] text2sql [app.py:67]: Debug logging enabled for SQL generator and agents
2025-04-07 20:48:54 - INFO - [app.py:67] - Debug logging enabled for SQL generator and agents
2025-04-07 20:48:54,637 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 20:48:54 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 20:48:54,637 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 20:48:54 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 20:48:54,682 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 20:48:54 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 20:48:54,682 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 20:48:54,683 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 20:48:54,683 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 20:48:54,683 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 20:48:54,683 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 20:48:54 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 20:48:54,683 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 20:48:54 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 20:48:54,729 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 20:48:54 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 20:48:54,729 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 20:48:54,729 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 20:48:54,730 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 20:48:54,730 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 20:48:54,730 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 20:48:54 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 20:48:54,730 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 20:48:54 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 20:48:54,774 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 20:48:54 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 20:48:54,774 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 20:48:54,775 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 20:48:54,775 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 20:48:54,775 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 20:48:54,775 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-07 20:48:54 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-07 20:48:54,776 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 20:48:54 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 20:48:54,776 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 20:48:54 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 20:48:54,823 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 20:48:54 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 20:48:54,824 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-07 20:48:54 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-07 20:48:54,824 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-07 20:48:54 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-07 20:48:54,825 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 20:48:54,825 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 20:48:54,825 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 20:48:54,825 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 20:48:54,826 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 20:48:54 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 20:48:54,868 [WARNING] werkzeug [_internal.py:224]:  * Debugger is active!
2025-04-07 20:48:54,879 [INFO] werkzeug [_internal.py:224]:  * Debugger PIN: 774-546-021
2025-04-07 20:48:55,590 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:48:55] "[32mGET / HTTP/1.1[0m" 302 -
2025-04-07 20:48:55,618 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:48:55] "GET /login HTTP/1.1" 200 -
2025-04-07 20:49:00,024 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:49:00] "POST /login HTTP/1.1" 200 -
2025-04-07 20:49:04,510 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:49:04] "[32mPOST /login HTTP/1.1[0m" 302 -
2025-04-07 20:49:04,835 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:49:04] "GET / HTTP/1.1" 200 -
2025-04-07 20:49:05,041 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:49:05] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-07 20:49:05,169 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:49:05] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-07 20:49:05,180 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:49:05] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-07 20:49:05,184 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:49:05] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-07 20:49:05,186 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:49:05] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-07 20:49:05,188 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:49:05] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-07 20:49:05,326 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:49:05] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-07 20:49:05,458 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:49:05] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-07 20:49:05,758 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:49:05] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-07 20:49:13,748 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:49:13] "[31m[1mGET /admin/api/embeddings/migrate HTTP/1.1[0m" 405 -
2025-04-07 20:50:44,724 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_api_routes.py', reloading
2025-04-07 20:50:44,728 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_api_routes.py', reloading
2025-04-07 20:50:44,741 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_api_routes.py', reloading
2025-04-07 20:50:45,744 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-07 20:50:45,745 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-07 20:50:45,746 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-07 20:50:45,747 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-07 20:50:45,748 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-07 20:50:45 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-07 20:50:45,751 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-07 20:50:45 - INFO - [database.py:258] - Closing database connection
2025-04-07 20:50:45,759 [INFO] text2sql.feedback [feedback_manager.py:750]: Closing database connections
2025-04-07 20:50:45 - INFO - [feedback_manager.py:750] - Closing database connections
2025-04-07 20:50:45,760 [INFO] text2sql.vector [vector_store.py:288]: Closing vector database connection
2025-04-07 20:50:45 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-07 20:50:47,064 [INFO] werkzeug [_internal.py:224]:  * Restarting with watchdog (inotify)
2025-04-07 20:50:54,776 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 20:50:54,777 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 20:50:54,777 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 20:50:54,778 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 20:50:54,778 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-07 20:50:54,791 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 20:50:54,793 [INFO] text2sql [app.py:67]: Debug logging enabled for SQL generator and agents
2025-04-07 20:50:54 - INFO - [app.py:67] - Debug logging enabled for SQL generator and agents
2025-04-07 20:50:54,795 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 20:50:54 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 20:50:54,796 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 20:50:54 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 20:50:54,848 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 20:50:54 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 20:50:54,849 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 20:50:54,849 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 20:50:54,849 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 20:50:54,850 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 20:50:54,850 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 20:50:54 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 20:50:54,850 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 20:50:54 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 20:50:54,907 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 20:50:54 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 20:50:54,907 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 20:50:54,908 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 20:50:54,908 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 20:50:54,908 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 20:50:54,908 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 20:50:54 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 20:50:54,908 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 20:50:54 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 20:50:54,960 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 20:50:54 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 20:50:54,961 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 20:50:54,961 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 20:50:54,961 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 20:50:54,961 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 20:50:54,962 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-07 20:50:54 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-07 20:50:54,962 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 20:50:54 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 20:50:54,962 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 20:50:54 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 20:50:55,012 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 20:50:55 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 20:50:55,013 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-07 20:50:55 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-07 20:50:55,013 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-07 20:50:55 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-07 20:50:55,013 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 20:50:55,014 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 20:50:55,014 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 20:50:55,014 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 20:50:55,015 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 20:50:55 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 20:50:55,057 [WARNING] werkzeug [_internal.py:224]:  * Debugger is active!
2025-04-07 20:50:55,058 [INFO] werkzeug [_internal.py:224]:  * Debugger PIN: 774-546-021
2025-04-07 20:51:01,476 [INFO] text2sql.feedback [feedback_manager.py:49]: Attempting database connection
2025-04-07 20:51:01 - INFO - [feedback_manager.py:49] - Attempting database connection
2025-04-07 20:51:01,479 [INFO] text2sql.feedback [feedback_manager.py:53]: Database connection established in 0.00s
2025-04-07 20:51:01 - INFO - [feedback_manager.py:53] - Database connection established in 0.00s
2025-04-07 20:51:01,480 [INFO] text2sql.vector [vector_store.py:38]: Connecting to vector database at ./vector_store.db
2025-04-07 20:51:01 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-07 20:51:02,556 [DEBUG] pymilvus.milvus_client.milvus_client [milvus_client.py:728]: Created new connection using: abd42c9ce48c44188af26f804eb7cade
2025-04-07 20:51:02,556 [INFO] text2sql.vector [vector_store.py:42]: Vector database connection established in 1.08s
2025-04-07 20:51:02 - INFO - [vector_store.py:42] - Vector database connection established in 1.08s
2025-04-07 20:51:02,560 [INFO] text2sql.vector [vector_store.py:66]: Creating collection 'query_embeddings'
2025-04-07 20:51:02 - INFO - [vector_store.py:66] - Creating collection 'query_embeddings'
2025-04-07 20:51:02,571 [DEBUG] pymilvus.milvus_client.milvus_client [milvus_client.py:137]: Successfully created collection: query_embeddings
2025-04-07 20:51:05,178 [DEBUG] pymilvus.milvus_client.milvus_client [milvus_client.py:174]: Successfully created an index on collection: query_embeddings
2025-04-07 20:51:05,181 [INFO] text2sql.vector [vector_store.py:73]: Collection 'query_embeddings' created successfully
2025-04-07 20:51:05 - INFO - [vector_store.py:73] - Collection 'query_embeddings' created successfully
2025-04-07 20:51:05,189 [INFO] text2sql.feedback [feedback_manager.py:430]: Feedback stats: 3 total, 2 positive, 1 negative
2025-04-07 20:51:05 - INFO - [feedback_manager.py:430] - Feedback stats: 3 total, 2 positive, 1 negative
2025-04-07 20:51:05,192 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:51:05] "GET /admin/api/embeddings/migrate HTTP/1.1" 200 -
2025-04-07 20:51:18,445 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:51:18] "GET / HTTP/1.1" 200 -
2025-04-07 20:51:18,787 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:51:18] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-07 20:51:19,959 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:51:19] "GET / HTTP/1.1" 200 -
2025-04-07 20:51:20,308 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:51:20] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-07 20:51:24,907 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:51:24] "GET /samples HTTP/1.1" 200 -
2025-04-07 20:51:25,226 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:51:25] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-07 20:51:25,456 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:51:25] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-07 20:51:25,531 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:51:25] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-07 20:51:25,532 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:51:25] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-07 20:51:25,538 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 20:51:25 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 20:51:25,539 [INFO] text2sql.feedback [feedback_manager.py:49]: Attempting database connection
2025-04-07 20:51:25 - INFO - [feedback_manager.py:49] - Attempting database connection
2025-04-07 20:51:25,541 [INFO] text2sql.feedback [feedback_manager.py:53]: Database connection established in 0.00s
2025-04-07 20:51:25 - INFO - [feedback_manager.py:53] - Database connection established in 0.00s
2025-04-07 20:51:25,542 [INFO] text2sql.vector [vector_store.py:38]: Connecting to vector database at ./vector_store.db
2025-04-07 20:51:25 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-07 20:51:25,546 [DEBUG] pymilvus.milvus_client.milvus_client [milvus_client.py:728]: Created new connection using: 6113112b0168402c8f37c1904f153819
2025-04-07 20:51:25,546 [INFO] text2sql.vector [vector_store.py:42]: Vector database connection established in 0.00s
2025-04-07 20:51:25 - INFO - [vector_store.py:42] - Vector database connection established in 0.00s
2025-04-07 20:51:25,548 [INFO] text2sql.vector [vector_store.py:75]: Collection 'query_embeddings' already exists
2025-04-07 20:51:25 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-07 20:51:25,551 [INFO] text2sql.feedback [feedback_manager.py:514]: Retrieved 2 samples (page 1, limit 10)
2025-04-07 20:51:25 - INFO - [feedback_manager.py:514] - Retrieved 2 samples (page 1, limit 10)
2025-04-07 20:51:25,553 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:51:25] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-07 20:52:40,022 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_api_routes.py', reloading
2025-04-07 20:52:40,023 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_api_routes.py', reloading
2025-04-07 20:52:40,024 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_api_routes.py', reloading
2025-04-07 20:52:41,025 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-07 20:52:41,025 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-07 20:52:41,026 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-07 20:52:41,026 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-07 20:52:41,026 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-07 20:52:41 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-07 20:52:41,027 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-07 20:52:41 - INFO - [database.py:258] - Closing database connection
2025-04-07 20:52:41,027 [INFO] text2sql.feedback [feedback_manager.py:750]: Closing database connections
2025-04-07 20:52:41 - INFO - [feedback_manager.py:750] - Closing database connections
2025-04-07 20:52:41,028 [INFO] text2sql.vector [vector_store.py:288]: Closing vector database connection
2025-04-07 20:52:41 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-07 20:52:41,926 [INFO] werkzeug [_internal.py:224]:  * Restarting with watchdog (inotify)
2025-04-07 20:52:51,280 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 20:52:51,280 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 20:52:51,281 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 20:52:51,281 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 20:52:51,282 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-07 20:52:51,297 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 20:52:51,299 [INFO] text2sql [app.py:67]: Debug logging enabled for SQL generator and agents
2025-04-07 20:52:51 - INFO - [app.py:67] - Debug logging enabled for SQL generator and agents
2025-04-07 20:52:51,301 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 20:52:51 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 20:52:51,301 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 20:52:51 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 20:52:51,358 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 20:52:51 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 20:52:51,360 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 20:52:51,361 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 20:52:51,361 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 20:52:51,361 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 20:52:51,361 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 20:52:51 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 20:52:51,362 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 20:52:51 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 20:52:51,420 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 20:52:51 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 20:52:51,420 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 20:52:51,421 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 20:52:51,421 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 20:52:51,421 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 20:52:51,422 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 20:52:51 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 20:52:51,422 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 20:52:51 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 20:52:51,485 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 20:52:51 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 20:52:51,486 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 20:52:51,487 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 20:52:51,487 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 20:52:51,488 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 20:52:51,488 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-07 20:52:51 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-07 20:52:51,488 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 20:52:51 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 20:52:51,489 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 20:52:51 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 20:52:51,551 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 20:52:51 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 20:52:51,551 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-07 20:52:51 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-07 20:52:51,552 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-07 20:52:51 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-07 20:52:51,552 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 20:52:51,553 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 20:52:51,553 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 20:52:51,553 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 20:52:51,554 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 20:52:51 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 20:52:51,600 [WARNING] werkzeug [_internal.py:224]:  * Debugger is active!
2025-04-07 20:52:51,601 [INFO] werkzeug [_internal.py:224]:  * Debugger PIN: 774-546-021
2025-04-07 20:52:57,897 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:52:57] "GET /samples HTTP/1.1" 200 -
2025-04-07 20:52:58,075 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:52:58] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-07 20:52:58,265 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:52:58] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-07 20:52:58,270 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:52:58] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-07 20:52:58,282 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 20:52:58 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 20:52:58,284 [INFO] text2sql.feedback [feedback_manager.py:49]: Attempting database connection
2025-04-07 20:52:58 - INFO - [feedback_manager.py:49] - Attempting database connection
2025-04-07 20:52:58,288 [INFO] text2sql.feedback [feedback_manager.py:53]: Database connection established in 0.00s
2025-04-07 20:52:58 - INFO - [feedback_manager.py:53] - Database connection established in 0.00s
2025-04-07 20:52:58,291 [INFO] text2sql.vector [vector_store.py:38]: Connecting to vector database at ./vector_store.db
2025-04-07 20:52:58 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-07 20:52:59,358 [DEBUG] pymilvus.milvus_client.milvus_client [milvus_client.py:728]: Created new connection using: 2859f6250b2142799f9a46e4cdedf72f
2025-04-07 20:52:59,358 [INFO] text2sql.vector [vector_store.py:42]: Vector database connection established in 1.07s
2025-04-07 20:52:59 - INFO - [vector_store.py:42] - Vector database connection established in 1.07s
2025-04-07 20:52:59,364 [INFO] text2sql.vector [vector_store.py:75]: Collection 'query_embeddings' already exists
2025-04-07 20:52:59 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-07 20:52:59,375 [INFO] text2sql.feedback [feedback_manager.py:514]: Retrieved 2 samples (page 1, limit 10)
2025-04-07 20:52:59 - INFO - [feedback_manager.py:514] - Retrieved 2 samples (page 1, limit 10)
2025-04-07 20:52:59,388 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:52:59] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-07 20:53:06,177 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:53:06] "GET / HTTP/1.1" 200 -
2025-04-07 20:53:06,514 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:53:06] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-07 20:53:10,301 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:53:10] "GET /samples HTTP/1.1" 200 -
2025-04-07 20:53:10,702 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:53:10] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-07 20:53:10,708 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:53:10] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-07 20:53:10,720 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:53:10] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-07 20:53:10,728 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 20:53:10 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 20:53:10,730 [INFO] text2sql.feedback [feedback_manager.py:49]: Attempting database connection
2025-04-07 20:53:10 - INFO - [feedback_manager.py:49] - Attempting database connection
2025-04-07 20:53:10,737 [INFO] text2sql.feedback [feedback_manager.py:53]: Database connection established in 0.01s
2025-04-07 20:53:10 - INFO - [feedback_manager.py:53] - Database connection established in 0.01s
2025-04-07 20:53:10,740 [INFO] text2sql.vector [vector_store.py:38]: Connecting to vector database at ./vector_store.db
2025-04-07 20:53:10 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-07 20:53:10,750 [DEBUG] pymilvus.milvus_client.milvus_client [milvus_client.py:728]: Created new connection using: f12305aa39774d04a9188d6647e3ab1e
2025-04-07 20:53:10,751 [INFO] text2sql.vector [vector_store.py:42]: Vector database connection established in 0.01s
2025-04-07 20:53:10 - INFO - [vector_store.py:42] - Vector database connection established in 0.01s
2025-04-07 20:53:10,755 [INFO] text2sql.vector [vector_store.py:75]: Collection 'query_embeddings' already exists
2025-04-07 20:53:10 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-07 20:53:10,762 [INFO] text2sql.feedback [feedback_manager.py:514]: Retrieved 2 samples (page 1, limit 10)
2025-04-07 20:53:10 - INFO - [feedback_manager.py:514] - Retrieved 2 samples (page 1, limit 10)
2025-04-07 20:53:10,766 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:53:10] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-07 20:53:14,140 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:53:14] "GET / HTTP/1.1" 200 -
2025-04-07 20:53:14,496 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:53:14] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-07 20:53:15,990 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'get me count of customers by order month'
2025-04-07 20:53:15,991 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:53:15] "POST /api/query HTTP/1.1" 200 -
2025-04-07 20:53:15,992 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'get me count of customers by order month'
2025-04-07 20:53:15,994 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-07 20:53:15,994 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.00s
2025-04-07 20:53:15,995 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-07 20:53:15,996 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-07 20:53:15,997 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-07 20:53:15 - INFO - [database.py:44] - Attempting database connection
2025-04-07 20:53:15,999 [INFO] text2sql.database [database.py:48]: Database connection established in 0.00s
2025-04-07 20:53:15 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-07 20:53:16,002 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'get me count of customers by order month'
2025-04-07 20:53:16,003 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-07 20:53:16,004 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-07 20:53:16,005 [INFO] text2sql.llm_engine [llm_engine.py:56]: [TABLE] Completion generation started
2025-04-07 20:53:16 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-07 20:53:16,775 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:53:16] "GET /api/query/progress/0a740e7e-f24d-471d-83af-c20291dce75b HTTP/1.1" 200 -
2025-04-07 20:53:17,327 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:53:17] "GET /api/query/progress/0a740e7e-f24d-471d-83af-c20291dce75b HTTP/1.1" 200 -
2025-04-07 20:53:17,617 [INFO] text2sql.llm_engine [llm_engine.py:119]: [TABLE] Completion generation completed in 1.61s
2025-04-07 20:53:17 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 1.61s
2025-04-07 20:53:17,618 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-07 20:53:17 - INFO - [llm_engine.py:120] - **************************
2025-04-07 20:53:17,619 [INFO] text2sql.agents.table [table_agent.py:69]: Raw model response: 'customers, orders'
2025-04-07 20:53:17,620 [INFO] text2sql.agents.table [table_agent.py:90]: Table selection completed in 1.62s. Selected: customers, orders
2025-04-07 20:53:17,620 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'get me count of customers by order month'
2025-04-07 20:53:17,620 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: customers, orders
2025-04-07 20:53:17,621 [INFO] text2sql.agents.column [column_agent.py:94]: Sending request to AI model for column selection
2025-04-07 20:53:17,621 [INFO] text2sql.llm_engine [llm_engine.py:56]: [COLUMN] Completion generation started
2025-04-07 20:53:17 - INFO - [llm_engine.py:56] - [COLUMN] Completion generation started
2025-04-07 20:53:18,567 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:53:18] "GET /api/query/progress/0a740e7e-f24d-471d-83af-c20291dce75b HTTP/1.1" 200 -
2025-04-07 20:53:18,940 [INFO] text2sql.llm_engine [llm_engine.py:119]: [COLUMN] Completion generation completed in 1.32s
2025-04-07 20:53:18 - INFO - [llm_engine.py:119] - [COLUMN] Completion generation completed in 1.32s
2025-04-07 20:53:18,941 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-07 20:53:18 - INFO - [llm_engine.py:120] - **************************
2025-04-07 20:53:18,942 [INFO] text2sql.agents.column [column_agent.py:99]: Raw model response: '{
  "customers": ["customer_id"],
  "orders": ["order_id", "customer_id", "order_date"]
}'
2025-04-07 20:53:18,943 [INFO] text2sql.agents.column [column_agent.py:139]: Parsing column selection from model response
2025-04-07 20:53:18,944 [INFO] text2sql.agents.column [column_agent.py:149]: Parsed column selection JSON: {"customers": ["customer_id"], "orders": ["order_id", "customer_id", "order_date"]}
2025-04-07 20:53:18,944 [INFO] text2sql.agents.column [column_agent.py:111]: Table 'customers': Pruned 10 columns, kept 1/11
2025-04-07 20:53:18,945 [INFO] text2sql.agents.column [column_agent.py:111]: Table 'orders': Pruned 2 columns, kept 3/5
2025-04-07 20:53:18,945 [INFO] text2sql.agents.column [column_agent.py:197]: Building pruned schema
2025-04-07 20:53:18,946 [INFO] text2sql.agents.column [column_agent.py:226]: Built pruned schema (404 chars)
2025-04-07 20:53:18,947 [INFO] text2sql.agents.column [column_agent.py:120]: Column pruning completed in 1.33s
2025-04-07 20:53:18,947 [INFO] text2sql.sql_generator [sql_generator.py:237]: Found 1 join conditions for the relevant tables
2025-04-07 20:53:18,948 [INFO] text2sql.feedback [feedback_manager.py:260]: Stage 1: Vector search for 'get me count of customers by order month...'
2025-04-07 20:53:18 - INFO - [feedback_manager.py:260] - Stage 1: Vector search for 'get me count of customers by order month...'
2025-04-07 20:53:18,949 [INFO] text2sql.feedback [feedback_manager.py:74]: Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-07 20:53:18 - INFO - [feedback_manager.py:74] - Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-07 20:53:19,216 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:53:19] "GET /api/query/progress/0a740e7e-f24d-471d-83af-c20291dce75b HTTP/1.1" 200 -
2025-04-07 20:53:22,417 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:53:22] "GET /api/query/progress/0a740e7e-f24d-471d-83af-c20291dce75b HTTP/1.1" 200 -
2025-04-07 20:53:23,062 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:53:23] "GET /api/query/progress/0a740e7e-f24d-471d-83af-c20291dce75b HTTP/1.1" 200 -
2025-04-07 20:53:24,083 [INFO] text2sql.feedback [feedback_manager.py:77]: Embedding model loaded in 5.13s
2025-04-07 20:53:24 - INFO - [feedback_manager.py:77] - Embedding model loaded in 5.13s
2025-04-07 20:53:24,256 [INFO] text2sql.vector [vector_store.py:38]: Connecting to vector database at ./vector_store.db
2025-04-07 20:53:24 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-07 20:53:24,412 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:53:24] "GET /api/query/progress/0a740e7e-f24d-471d-83af-c20291dce75b HTTP/1.1" 200 -
2025-04-07 20:53:24,417 [DEBUG] pymilvus.milvus_client.milvus_client [milvus_client.py:728]: Created new connection using: 6fe142ae343e451697e48c2fc35ab5c9
2025-04-07 20:53:24,417 [INFO] text2sql.vector [vector_store.py:42]: Vector database connection established in 0.16s
2025-04-07 20:53:24 - INFO - [vector_store.py:42] - Vector database connection established in 0.16s
2025-04-07 20:53:24,421 [INFO] text2sql.vector [vector_store.py:75]: Collection 'query_embeddings' already exists
2025-04-07 20:53:24 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-07 20:53:24,430 [WARNING] text2sql.feedback [feedback_manager.py:282]: No candidates found from vector search, falling back to text-based search
2025-04-07 20:53:24 - WARNING - [feedback_manager.py:282] - No candidates found from vector search, falling back to text-based search
2025-04-07 20:53:24,431 [INFO] text2sql.feedback [feedback_manager.py:49]: Attempting database connection
2025-04-07 20:53:24 - INFO - [feedback_manager.py:49] - Attempting database connection
2025-04-07 20:53:24,434 [INFO] text2sql.feedback [feedback_manager.py:53]: Database connection established in 0.00s
2025-04-07 20:53:24 - INFO - [feedback_manager.py:53] - Database connection established in 0.00s
2025-04-07 20:53:24,435 [INFO] text2sql.vector [vector_store.py:38]: Connecting to vector database at ./vector_store.db
2025-04-07 20:53:24 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-07 20:53:24,441 [DEBUG] pymilvus.milvus_client.milvus_client [milvus_client.py:728]: Created new connection using: 075da60aed4047e2bd5d1caef11fec5b
2025-04-07 20:53:24,442 [INFO] text2sql.vector [vector_store.py:42]: Vector database connection established in 0.01s
2025-04-07 20:53:24 - INFO - [vector_store.py:42] - Vector database connection established in 0.01s
2025-04-07 20:53:24,445 [INFO] text2sql.vector [vector_store.py:75]: Collection 'query_embeddings' already exists
2025-04-07 20:53:24 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-07 20:53:24,449 [INFO] text2sql.feedback [feedback_manager.py:396]: Found 2 similar queries using text-based search for 'get me count of customers by order month...'
2025-04-07 20:53:24 - INFO - [feedback_manager.py:396] - Found 2 similar queries using text-based search for 'get me count of customers by order month...'
2025-04-07 20:53:24,450 [INFO] text2sql.sql_generator [sql_generator.py:280]: Found 2 similar queries with reranking
2025-04-07 20:53:24,451 [INFO] text2sql.sql_generator [sql_generator.py:302]: Added similar query #1 from feedback (score: 0.0000): get me count of customers by order month...
2025-04-07 20:53:24,452 [INFO] text2sql.sql_generator [sql_generator.py:302]: Added similar query #2 from feedback (score: 0.0000): get me all the customers...
2025-04-07 20:53:24,452 [INFO] text2sql.azure [azure_client.py:35]: SQL generation started for query: 'get me count of customers by order month'
2025-04-07 20:53:24 - INFO - [azure_client.py:35] - SQL generation started for query: 'get me count of customers by order month'
2025-04-07 20:53:24,454 [INFO] text2sql.azure [azure_client.py:69]: Including schema information (404 chars)
2025-04-07 20:53:24 - INFO - [azure_client.py:69] - Including schema information (404 chars)
2025-04-07 20:53:24,456 [INFO] text2sql.azure [azure_client.py:76]: Including 1 join conditions
2025-04-07 20:53:24 - INFO - [azure_client.py:76] - Including 1 join conditions
2025-04-07 20:53:24,460 [INFO] text2sql.azure [azure_client.py:97]: Including 2 SQL examples from feedback similarity search
2025-04-07 20:53:24 - INFO - [azure_client.py:97] - Including 2 SQL examples from feedback similarity search
2025-04-07 20:53:24,462 [INFO] text2sql.azure [azure_client.py:114]: PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER): Unique customer identifier\nPrimary Key(s): customer_id\n\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER): Unique order identifier, customer_id (INTEGER): Reference to customer who placed the order, order_date (TEXT): Date when order was placed\nPrimary Key(s): order_id\n"}, {'role': 'user', 'content': 'Use the following pre-defined join conditions when joining these tables:\n- When joining customers with orders, use: INNER JOIN orders ON customers.customer_id = orders.customer_id\n'}, {'role': 'user', 'content': "Here are some similar queries that were previously successful:\nQuestion: get me count of customers by order month\nSQL: SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;\n\nQuestion: get me all the customers\nSQL: SELECT * FROM customers;\n\n"}, {'role': 'user', 'content': 'Convert this question to SQL: get me count of customers by order month'}]
2025-04-07 20:53:24 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER): Unique customer identifier\nPrimary Key(s): customer_id\n\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER): Unique order identifier, customer_id (INTEGER): Reference to customer who placed the order, order_date (TEXT): Date when order was placed\nPrimary Key(s): order_id\n"}, {'role': 'user', 'content': 'Use the following pre-defined join conditions when joining these tables:\n- When joining customers with orders, use: INNER JOIN orders ON customers.customer_id = orders.customer_id\n'}, {'role': 'user', 'content': "Here are some similar queries that were previously successful:\nQuestion: get me count of customers by order month\nSQL: SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;\n\nQuestion: get me all the customers\nSQL: SELECT * FROM customers;\n\n"}, {'role': 'user', 'content': 'Convert this question to SQL: get me count of customers by order month'}]
2025-04-07 20:53:24,463 [INFO] text2sql.llm_engine [llm_engine.py:56]: [SQL_GEN] Completion generation started
2025-04-07 20:53:24 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-07 20:53:24,944 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:53:24] "GET /api/query/progress/0a740e7e-f24d-471d-83af-c20291dce75b HTTP/1.1" 200 -
2025-04-07 20:53:26,198 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:53:26] "GET /api/query/progress/0a740e7e-f24d-471d-83af-c20291dce75b HTTP/1.1" 200 -
2025-04-07 20:53:26,344 [INFO] text2sql.llm_engine [llm_engine.py:119]: [SQL_GEN] Completion generation completed in 1.88s
2025-04-07 20:53:26 - INFO - [llm_engine.py:119] - [SQL_GEN] Completion generation completed in 1.88s
2025-04-07 20:53:26,345 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-07 20:53:26 - INFO - [llm_engine.py:120] - **************************
2025-04-07 20:53:26,349 [INFO] text2sql.azure [azure_client.py:150]: Parsing SQL from model response
2025-04-07 20:53:26 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-07 20:53:26,352 [INFO] text2sql.azure [azure_client.py:157]: Found SQL code block in response
2025-04-07 20:53:26 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-07 20:53:26,355 [INFO] text2sql.azure [azure_client.py:171]: Extracted SQL query (244 chars) and explanation (103 chars)
2025-04-07 20:53:26 - INFO - [azure_client.py:171] - Extracted SQL query (244 chars) and explanation (103 chars)
2025-04-07 20:53:26,357 [INFO] text2sql.azure [azure_client.py:124]: Generated SQL: SELECT 
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id
GROUP BY 
    order_month
ORDER BY 
    order_month;
2025-04-07 20:53:26 - INFO - [azure_client.py:124] - Generated SQL: SELECT 
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id
GROUP BY 
    order_month
ORDER BY 
    order_month;
2025-04-07 20:53:26,360 [INFO] text2sql.azure [azure_client.py:132]: SQL generation completed in 1.91s
2025-04-07 20:53:26 - INFO - [azure_client.py:132] - SQL generation completed in 1.91s
2025-04-07 20:53:26,361 [INFO] text2sql.database [database.py:65]: Executing SQL query: SELECT 
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id
GROUP BY 
    order_month
ORDER BY 
    order_month;
2025-04-07 20:53:26 - INFO - [database.py:65] - Executing SQL query: SELECT 
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id
GROUP BY 
    order_month
ORDER BY 
    order_month;
2025-04-07 20:53:26,378 [INFO] text2sql.database [database.py:86]: Query returned 2 rows with 2 columns
2025-04-07 20:53:26 - INFO - [database.py:86] - Query returned 2 rows with 2 columns
2025-04-07 20:53:26,385 [INFO] text2sql.database [database.py:95]: Query processing completed in 0.02s
2025-04-07 20:53:26 - INFO - [database.py:95] - Query processing completed in 0.02s
2025-04-07 20:53:26,387 [INFO] text2sql.sql_generator [sql_generator.py:376]: SQL generation completed in 10.39s
2025-04-07 20:53:26,388 [INFO] text2sql.sql_generator [sql_generator.py:125]: Query processing completed in 10.40s
2025-04-07 20:53:26,828 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:53:26] "GET /api/query/progress/0a740e7e-f24d-471d-83af-c20291dce75b HTTP/1.1" 200 -
2025-04-07 20:56:19,394 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_api_routes.py', reloading
2025-04-07 20:56:19,396 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_api_routes.py', reloading
2025-04-07 20:56:19,436 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_api_routes.py', reloading
2025-04-07 20:56:20,446 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-07 20:56:20,447 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-07 20:56:20,447 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-07 20:56:20,447 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-07 20:56:20,448 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-07 20:56:20 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-07 20:56:20,448 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-07 20:56:20 - INFO - [database.py:258] - Closing database connection
2025-04-07 20:56:20,449 [INFO] text2sql.feedback [feedback_manager.py:750]: Closing database connections
2025-04-07 20:56:20 - INFO - [feedback_manager.py:750] - Closing database connections
2025-04-07 20:56:20,451 [INFO] text2sql.vector [vector_store.py:288]: Closing vector database connection
2025-04-07 20:56:20 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-07 20:56:21,968 [INFO] werkzeug [_internal.py:224]:  * Restarting with watchdog (inotify)
2025-04-07 20:56:29,562 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 20:56:29,563 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 20:56:29,563 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 20:56:29,563 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 20:56:29,564 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-07 20:56:29,580 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 20:56:29,582 [INFO] text2sql [app.py:67]: Debug logging enabled for SQL generator and agents
2025-04-07 20:56:29 - INFO - [app.py:67] - Debug logging enabled for SQL generator and agents
2025-04-07 20:56:29,584 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 20:56:29 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 20:56:29,585 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 20:56:29 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 20:56:29,660 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 20:56:29 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 20:56:29,661 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 20:56:29,662 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 20:56:29,662 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 20:56:29,662 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 20:56:29,662 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 20:56:29 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 20:56:29,663 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 20:56:29 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 20:56:29,723 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 20:56:29 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 20:56:29,724 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 20:56:29,724 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 20:56:29,724 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 20:56:29,724 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 20:56:29,725 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 20:56:29 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 20:56:29,725 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 20:56:29 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 20:56:29,791 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 20:56:29 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 20:56:29,792 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 20:56:29,793 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 20:56:29,793 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 20:56:29,793 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 20:56:29,794 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-07 20:56:29 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-07 20:56:29,794 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 20:56:29 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 20:56:29,795 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 20:56:29 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 20:56:29,864 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 20:56:29 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 20:56:29,864 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-07 20:56:29 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-07 20:56:29,865 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-07 20:56:29 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-07 20:56:29,865 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 20:56:29,866 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 20:56:29,866 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 20:56:29,866 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 20:56:29,867 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 20:56:29 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 20:56:29,928 [WARNING] werkzeug [_internal.py:224]:  * Debugger is active!
2025-04-07 20:56:29,929 [INFO] werkzeug [_internal.py:224]:  * Debugger PIN: 774-546-021
2025-04-07 20:57:12,555 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/utils/feedback_manager.py', reloading
2025-04-07 20:57:12,556 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/utils/feedback_manager.py', reloading
2025-04-07 20:57:12,557 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/utils/feedback_manager.py', reloading
2025-04-07 20:57:13,558 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-07 20:57:13,558 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-07 20:57:13,558 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-07 20:57:13,559 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-07 20:57:13,559 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-07 20:57:13 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-07 20:57:13,559 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-07 20:57:13 - INFO - [database.py:258] - Closing database connection
2025-04-07 20:57:13,559 [INFO] text2sql.feedback [feedback_manager.py:750]: Closing database connections
2025-04-07 20:57:13 - INFO - [feedback_manager.py:750] - Closing database connections
2025-04-07 20:57:13,560 [INFO] text2sql.vector [vector_store.py:288]: Closing vector database connection
2025-04-07 20:57:13 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-07 20:57:14,502 [INFO] werkzeug [_internal.py:224]:  * Restarting with watchdog (inotify)
2025-04-07 20:57:22,387 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 20:57:22,387 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 20:57:22,387 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 20:57:22,387 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 20:57:22,388 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-07 20:57:22,399 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 20:57:22,400 [INFO] text2sql [app.py:67]: Debug logging enabled for SQL generator and agents
2025-04-07 20:57:22 - INFO - [app.py:67] - Debug logging enabled for SQL generator and agents
2025-04-07 20:57:22,402 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 20:57:22 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 20:57:22,402 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 20:57:22 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 20:57:22,453 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 20:57:22 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 20:57:22,453 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 20:57:22,454 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 20:57:22,454 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 20:57:22,454 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 20:57:22,454 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 20:57:22 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 20:57:22,454 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 20:57:22 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 20:57:22,500 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 20:57:22 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 20:57:22,500 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 20:57:22,501 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 20:57:22,501 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 20:57:22,501 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 20:57:22,501 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 20:57:22 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 20:57:22,502 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 20:57:22 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 20:57:22,550 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 20:57:22 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 20:57:22,551 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 20:57:22,551 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 20:57:22,551 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 20:57:22,552 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 20:57:22,552 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-07 20:57:22 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-07 20:57:22,552 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 20:57:22 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 20:57:22,552 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 20:57:22 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 20:57:22,599 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 20:57:22 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 20:57:22,599 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-07 20:57:22 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-07 20:57:22,600 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-07 20:57:22 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-07 20:57:22,600 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 20:57:22,600 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 20:57:22,600 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 20:57:22,600 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 20:57:22,601 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 20:57:22 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 20:57:22,640 [WARNING] werkzeug [_internal.py:224]:  * Debugger is active!
2025-04-07 20:57:22,640 [INFO] werkzeug [_internal.py:224]:  * Debugger PIN: 774-546-021
2025-04-07 20:57:25,762 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'get me count of customers by order month'
2025-04-07 20:57:25,764 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:57:25] "POST /api/query HTTP/1.1" 200 -
2025-04-07 20:57:25,764 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'get me count of customers by order month'
2025-04-07 20:57:25,766 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-07 20:57:25,767 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.00s
2025-04-07 20:57:25,768 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-07 20:57:25,768 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-07 20:57:25,769 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-07 20:57:25 - INFO - [database.py:44] - Attempting database connection
2025-04-07 20:57:25,771 [INFO] text2sql.database [database.py:48]: Database connection established in 0.00s
2025-04-07 20:57:25 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-07 20:57:25,773 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'get me count of customers by order month'
2025-04-07 20:57:25,773 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-07 20:57:25,775 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-07 20:57:25,775 [INFO] text2sql.llm_engine [llm_engine.py:56]: [TABLE] Completion generation started
2025-04-07 20:57:25 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-07 20:57:26,812 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:57:26] "GET /api/query/progress/1d67a660-8b45-4d49-8fd6-a7b20a2d530f HTTP/1.1" 200 -
2025-04-07 20:57:27,362 [INFO] text2sql.llm_engine [llm_engine.py:119]: [TABLE] Completion generation completed in 1.59s
2025-04-07 20:57:27 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 1.59s
2025-04-07 20:57:27,363 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-07 20:57:27 - INFO - [llm_engine.py:120] - **************************
2025-04-07 20:57:27,365 [INFO] text2sql.agents.table [table_agent.py:69]: Raw model response: 'customers, orders'
2025-04-07 20:57:27,365 [INFO] text2sql.agents.table [table_agent.py:90]: Table selection completed in 1.59s. Selected: customers, orders
2025-04-07 20:57:27,366 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'get me count of customers by order month'
2025-04-07 20:57:27,367 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: customers, orders
2025-04-07 20:57:27,368 [INFO] text2sql.agents.column [column_agent.py:94]: Sending request to AI model for column selection
2025-04-07 20:57:27,368 [INFO] text2sql.llm_engine [llm_engine.py:56]: [COLUMN] Completion generation started
2025-04-07 20:57:27 - INFO - [llm_engine.py:56] - [COLUMN] Completion generation started
2025-04-07 20:57:28,044 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:57:28] "GET /api/query/progress/1d67a660-8b45-4d49-8fd6-a7b20a2d530f HTTP/1.1" 200 -
2025-04-07 20:57:28,641 [INFO] text2sql.llm_engine [llm_engine.py:119]: [COLUMN] Completion generation completed in 1.27s
2025-04-07 20:57:28 - INFO - [llm_engine.py:119] - [COLUMN] Completion generation completed in 1.27s
2025-04-07 20:57:28,643 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-07 20:57:28 - INFO - [llm_engine.py:120] - **************************
2025-04-07 20:57:28,645 [INFO] text2sql.agents.column [column_agent.py:99]: Raw model response: '{
  "customers": [
    "customer_id"
  ],
  "orders": [
    "order_id",
    "customer_id",
    "order_date"
  ]
}'
2025-04-07 20:57:28,646 [INFO] text2sql.agents.column [column_agent.py:139]: Parsing column selection from model response
2025-04-07 20:57:28,647 [INFO] text2sql.agents.column [column_agent.py:149]: Parsed column selection JSON: {"customers": ["customer_id"], "orders": ["order_id", "customer_id", "order_date"]}
2025-04-07 20:57:28,647 [INFO] text2sql.agents.column [column_agent.py:111]: Table 'customers': Pruned 10 columns, kept 1/11
2025-04-07 20:57:28,649 [INFO] text2sql.agents.column [column_agent.py:111]: Table 'orders': Pruned 2 columns, kept 3/5
2025-04-07 20:57:28,649 [INFO] text2sql.agents.column [column_agent.py:197]: Building pruned schema
2025-04-07 20:57:28,650 [INFO] text2sql.agents.column [column_agent.py:226]: Built pruned schema (404 chars)
2025-04-07 20:57:28,651 [INFO] text2sql.agents.column [column_agent.py:120]: Column pruning completed in 1.28s
2025-04-07 20:57:28,651 [INFO] text2sql.sql_generator [sql_generator.py:237]: Found 1 join conditions for the relevant tables
2025-04-07 20:57:28,652 [INFO] text2sql.feedback [feedback_manager.py:260]: Stage 1: Vector search for 'get me count of customers by order month...'
2025-04-07 20:57:28 - INFO - [feedback_manager.py:260] - Stage 1: Vector search for 'get me count of customers by order month...'
2025-04-07 20:57:28,654 [INFO] text2sql.feedback [feedback_manager.py:74]: Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-07 20:57:28 - INFO - [feedback_manager.py:74] - Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-07 20:57:28,691 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:57:28] "GET /api/query/progress/1d67a660-8b45-4d49-8fd6-a7b20a2d530f HTTP/1.1" 200 -
2025-04-07 20:57:29,931 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:57:29] "GET /api/query/progress/1d67a660-8b45-4d49-8fd6-a7b20a2d530f HTTP/1.1" 200 -
2025-04-07 20:57:30,577 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:57:30] "GET /api/query/progress/1d67a660-8b45-4d49-8fd6-a7b20a2d530f HTTP/1.1" 200 -
2025-04-07 20:57:31,807 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:57:31] "GET /api/query/progress/1d67a660-8b45-4d49-8fd6-a7b20a2d530f HTTP/1.1" 200 -
2025-04-07 20:57:32,461 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:57:32] "GET /api/query/progress/1d67a660-8b45-4d49-8fd6-a7b20a2d530f HTTP/1.1" 200 -
2025-04-07 20:57:33,698 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:57:33] "GET /api/query/progress/1d67a660-8b45-4d49-8fd6-a7b20a2d530f HTTP/1.1" 200 -
2025-04-07 20:57:34,346 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:57:34] "GET /api/query/progress/1d67a660-8b45-4d49-8fd6-a7b20a2d530f HTTP/1.1" 200 -
2025-04-07 20:57:35,584 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:57:35] "GET /api/query/progress/1d67a660-8b45-4d49-8fd6-a7b20a2d530f HTTP/1.1" 200 -
2025-04-07 20:57:36,216 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:57:36] "GET /api/query/progress/1d67a660-8b45-4d49-8fd6-a7b20a2d530f HTTP/1.1" 200 -
2025-04-07 20:57:37,436 [INFO] text2sql.feedback [feedback_manager.py:77]: Embedding model loaded in 8.78s
2025-04-07 20:57:37 - INFO - [feedback_manager.py:77] - Embedding model loaded in 8.78s
2025-04-07 20:57:37,447 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:57:37] "GET /api/query/progress/1d67a660-8b45-4d49-8fd6-a7b20a2d530f HTTP/1.1" 200 -
2025-04-07 20:57:37,468 [INFO] text2sql.vector [vector_store.py:38]: Connecting to vector database at ./vector_store.db
2025-04-07 20:57:37 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-07 20:57:38,095 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:57:38] "GET /api/query/progress/1d67a660-8b45-4d49-8fd6-a7b20a2d530f HTTP/1.1" 200 -
2025-04-07 20:57:38,502 [DEBUG] pymilvus.milvus_client.milvus_client [milvus_client.py:728]: Created new connection using: 88486e584cd34c00a3d844e15b8a3099
2025-04-07 20:57:38,502 [INFO] text2sql.vector [vector_store.py:42]: Vector database connection established in 1.03s
2025-04-07 20:57:38 - INFO - [vector_store.py:42] - Vector database connection established in 1.03s
2025-04-07 20:57:38,506 [INFO] text2sql.vector [vector_store.py:75]: Collection 'query_embeddings' already exists
2025-04-07 20:57:38 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-07 20:57:38,511 [WARNING] text2sql.feedback [feedback_manager.py:281]: No candidates found from vector search, falling back to text-based search
2025-04-07 20:57:38 - WARNING - [feedback_manager.py:281] - No candidates found from vector search, falling back to text-based search
2025-04-07 20:57:38,513 [INFO] text2sql.feedback [feedback_manager.py:49]: Attempting database connection
2025-04-07 20:57:38 - INFO - [feedback_manager.py:49] - Attempting database connection
2025-04-07 20:57:38,515 [INFO] text2sql.feedback [feedback_manager.py:53]: Database connection established in 0.00s
2025-04-07 20:57:38 - INFO - [feedback_manager.py:53] - Database connection established in 0.00s
2025-04-07 20:57:38,516 [INFO] text2sql.vector [vector_store.py:38]: Connecting to vector database at ./vector_store.db
2025-04-07 20:57:38 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-07 20:57:38,521 [DEBUG] pymilvus.milvus_client.milvus_client [milvus_client.py:728]: Created new connection using: 84486ed270064cb99a747ce3b176c37d
2025-04-07 20:57:38,521 [INFO] text2sql.vector [vector_store.py:42]: Vector database connection established in 0.01s
2025-04-07 20:57:38 - INFO - [vector_store.py:42] - Vector database connection established in 0.01s
2025-04-07 20:57:38,524 [INFO] text2sql.vector [vector_store.py:75]: Collection 'query_embeddings' already exists
2025-04-07 20:57:38 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-07 20:57:38,526 [INFO] text2sql.feedback [feedback_manager.py:395]: Found 2 similar queries using text-based search for 'get me count of customers by order month...'
2025-04-07 20:57:38 - INFO - [feedback_manager.py:395] - Found 2 similar queries using text-based search for 'get me count of customers by order month...'
2025-04-07 20:57:38,527 [INFO] text2sql.sql_generator [sql_generator.py:280]: Found 2 similar queries with reranking
2025-04-07 20:57:38,528 [INFO] text2sql.sql_generator [sql_generator.py:302]: Added similar query #1 from feedback (score: 0.0000): get me count of customers by order month...
2025-04-07 20:57:38,529 [INFO] text2sql.sql_generator [sql_generator.py:302]: Added similar query #2 from feedback (score: 0.0000): get me all the customers...
2025-04-07 20:57:38,529 [INFO] text2sql.azure [azure_client.py:35]: SQL generation started for query: 'get me count of customers by order month'
2025-04-07 20:57:38 - INFO - [azure_client.py:35] - SQL generation started for query: 'get me count of customers by order month'
2025-04-07 20:57:38,531 [INFO] text2sql.azure [azure_client.py:69]: Including schema information (404 chars)
2025-04-07 20:57:38 - INFO - [azure_client.py:69] - Including schema information (404 chars)
2025-04-07 20:57:38,532 [INFO] text2sql.azure [azure_client.py:76]: Including 1 join conditions
2025-04-07 20:57:38 - INFO - [azure_client.py:76] - Including 1 join conditions
2025-04-07 20:57:38,534 [INFO] text2sql.azure [azure_client.py:97]: Including 2 SQL examples from feedback similarity search
2025-04-07 20:57:38 - INFO - [azure_client.py:97] - Including 2 SQL examples from feedback similarity search
2025-04-07 20:57:38,535 [INFO] text2sql.azure [azure_client.py:114]: PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER): Unique customer identifier\nPrimary Key(s): customer_id\n\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER): Unique order identifier, customer_id (INTEGER): Reference to customer who placed the order, order_date (TEXT): Date when order was placed\nPrimary Key(s): order_id\n"}, {'role': 'user', 'content': 'Use the following pre-defined join conditions when joining these tables:\n- When joining customers with orders, use: INNER JOIN orders ON customers.customer_id = orders.customer_id\n'}, {'role': 'user', 'content': "Here are some similar queries that were previously successful:\nQuestion: get me count of customers by order month\nSQL: SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;\n\nQuestion: get me all the customers\nSQL: SELECT * FROM customers;\n\n"}, {'role': 'user', 'content': 'Convert this question to SQL: get me count of customers by order month'}]
2025-04-07 20:57:38 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER): Unique customer identifier\nPrimary Key(s): customer_id\n\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER): Unique order identifier, customer_id (INTEGER): Reference to customer who placed the order, order_date (TEXT): Date when order was placed\nPrimary Key(s): order_id\n"}, {'role': 'user', 'content': 'Use the following pre-defined join conditions when joining these tables:\n- When joining customers with orders, use: INNER JOIN orders ON customers.customer_id = orders.customer_id\n'}, {'role': 'user', 'content': "Here are some similar queries that were previously successful:\nQuestion: get me count of customers by order month\nSQL: SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;\n\nQuestion: get me all the customers\nSQL: SELECT * FROM customers;\n\n"}, {'role': 'user', 'content': 'Convert this question to SQL: get me count of customers by order month'}]
2025-04-07 20:57:38,537 [INFO] text2sql.llm_engine [llm_engine.py:56]: [SQL_GEN] Completion generation started
2025-04-07 20:57:38 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-07 20:57:39,323 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:57:39] "GET /api/query/progress/1d67a660-8b45-4d49-8fd6-a7b20a2d530f HTTP/1.1" 200 -
2025-04-07 20:57:39,974 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:57:39] "GET /api/query/progress/1d67a660-8b45-4d49-8fd6-a7b20a2d530f HTTP/1.1" 200 -
2025-04-07 20:57:40,443 [INFO] text2sql.llm_engine [llm_engine.py:119]: [SQL_GEN] Completion generation completed in 1.91s
2025-04-07 20:57:40 - INFO - [llm_engine.py:119] - [SQL_GEN] Completion generation completed in 1.91s
2025-04-07 20:57:40,444 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-07 20:57:40 - INFO - [llm_engine.py:120] - **************************
2025-04-07 20:57:40,445 [INFO] text2sql.azure [azure_client.py:150]: Parsing SQL from model response
2025-04-07 20:57:40 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-07 20:57:40,446 [INFO] text2sql.azure [azure_client.py:157]: Found SQL code block in response
2025-04-07 20:57:40 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-07 20:57:40,447 [INFO] text2sql.azure [azure_client.py:171]: Extracted SQL query (244 chars) and explanation (112 chars)
2025-04-07 20:57:40 - INFO - [azure_client.py:171] - Extracted SQL query (244 chars) and explanation (112 chars)
2025-04-07 20:57:40,448 [INFO] text2sql.azure [azure_client.py:124]: Generated SQL: SELECT 
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id
GROUP BY 
    order_month
ORDER BY 
    order_month;
2025-04-07 20:57:40 - INFO - [azure_client.py:124] - Generated SQL: SELECT 
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id
GROUP BY 
    order_month
ORDER BY 
    order_month;
2025-04-07 20:57:40,449 [INFO] text2sql.azure [azure_client.py:132]: SQL generation completed in 1.92s
2025-04-07 20:57:40 - INFO - [azure_client.py:132] - SQL generation completed in 1.92s
2025-04-07 20:57:40,450 [INFO] text2sql.database [database.py:65]: Executing SQL query: SELECT 
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id
GROUP BY 
    order_month
ORDER BY 
    order_month;
2025-04-07 20:57:40 - INFO - [database.py:65] - Executing SQL query: SELECT 
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id
GROUP BY 
    order_month
ORDER BY 
    order_month;
2025-04-07 20:57:40,453 [INFO] text2sql.database [database.py:86]: Query returned 2 rows with 2 columns
2025-04-07 20:57:40 - INFO - [database.py:86] - Query returned 2 rows with 2 columns
2025-04-07 20:57:40,456 [INFO] text2sql.database [database.py:95]: Query processing completed in 0.01s
2025-04-07 20:57:40 - INFO - [database.py:95] - Query processing completed in 0.01s
2025-04-07 20:57:40,458 [INFO] text2sql.sql_generator [sql_generator.py:376]: SQL generation completed in 14.69s
2025-04-07 20:57:40,458 [INFO] text2sql.sql_generator [sql_generator.py:125]: Query processing completed in 14.70s
2025-04-07 20:57:41,212 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:57:41] "GET /api/query/progress/1d67a660-8b45-4d49-8fd6-a7b20a2d530f HTTP/1.1" 200 -
2025-04-07 20:58:21,701 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:58:21] "GET /admin/schema HTTP/1.1" 200 -
2025-04-07 20:58:22,048 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:58:22] "[36mGET /static/css/admin-schema.css HTTP/1.1[0m" 304 -
2025-04-07 20:58:22,048 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:58:22] "[36mGET /static/js/admin/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-07 20:58:22,279 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:58:22] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-07 20:58:22,353 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:58:22] "GET /admin/api/schema/workspaces HTTP/1.1" 200 -
2025-04-07 20:58:22,355 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:58:22] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-07 20:58:22,359 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:58:22] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-07 20:58:24,952 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:58:24] "GET /samples HTTP/1.1" 200 -
2025-04-07 20:58:25,279 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:58:25] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-07 20:58:25,528 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:58:25] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-07 20:58:25,600 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:58:25] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-07 20:58:25,602 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:58:25] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-07 20:58:25,608 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 20:58:25 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 20:58:25,610 [INFO] text2sql.feedback [feedback_manager.py:49]: Attempting database connection
2025-04-07 20:58:25 - INFO - [feedback_manager.py:49] - Attempting database connection
2025-04-07 20:58:25,611 [INFO] text2sql.feedback [feedback_manager.py:53]: Database connection established in 0.00s
2025-04-07 20:58:25 - INFO - [feedback_manager.py:53] - Database connection established in 0.00s
2025-04-07 20:58:25,613 [INFO] text2sql.vector [vector_store.py:38]: Connecting to vector database at ./vector_store.db
2025-04-07 20:58:25 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-07 20:58:25,617 [DEBUG] pymilvus.milvus_client.milvus_client [milvus_client.py:728]: Created new connection using: 5060a484dcf44430809dd8bf67f14016
2025-04-07 20:58:25,617 [INFO] text2sql.vector [vector_store.py:42]: Vector database connection established in 0.00s
2025-04-07 20:58:25 - INFO - [vector_store.py:42] - Vector database connection established in 0.00s
2025-04-07 20:58:25,619 [INFO] text2sql.vector [vector_store.py:75]: Collection 'query_embeddings' already exists
2025-04-07 20:58:25 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-07 20:58:25,621 [INFO] text2sql.feedback [feedback_manager.py:513]: Retrieved 2 samples (page 1, limit 10)
2025-04-07 20:58:25 - INFO - [feedback_manager.py:513] - Retrieved 2 samples (page 1, limit 10)
2025-04-07 20:58:25,623 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:58:25] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-07 20:59:48,624 [INFO] text2sql.feedback [feedback_manager.py:49]: Attempting database connection
2025-04-07 20:59:48 - INFO - [feedback_manager.py:49] - Attempting database connection
2025-04-07 20:59:48,626 [INFO] text2sql.feedback [feedback_manager.py:53]: Database connection established in 0.00s
2025-04-07 20:59:48 - INFO - [feedback_manager.py:53] - Database connection established in 0.00s
2025-04-07 20:59:48,627 [INFO] text2sql.vector [vector_store.py:38]: Connecting to vector database at ./vector_store.db
2025-04-07 20:59:48 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-07 20:59:48,632 [DEBUG] pymilvus.milvus_client.milvus_client [milvus_client.py:728]: Created new connection using: 4ef3113ba185484c93540e6e23afbe8f
2025-04-07 20:59:48,632 [INFO] text2sql.vector [vector_store.py:42]: Vector database connection established in 0.00s
2025-04-07 20:59:48 - INFO - [vector_store.py:42] - Vector database connection established in 0.00s
2025-04-07 20:59:48,634 [INFO] text2sql.vector [vector_store.py:75]: Collection 'query_embeddings' already exists
2025-04-07 20:59:48 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-07 20:59:48,636 [INFO] text2sql.feedback [feedback_manager.py:429]: Feedback stats: 3 total, 2 positive, 1 negative
2025-04-07 20:59:48 - INFO - [feedback_manager.py:429] - Feedback stats: 3 total, 2 positive, 1 negative
2025-04-07 20:59:48,637 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 20:59:48] "GET /admin/api/embeddings/migrate HTTP/1.1" 200 -
2025-04-07 21:02:05,216 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_api_routes.py', reloading
2025-04-07 21:02:05,217 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_api_routes.py', reloading
2025-04-07 21:02:05,228 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/routes/admin_api_routes.py', reloading
2025-04-07 21:02:06,228 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-07 21:02:06,229 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-07 21:02:06,229 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-07 21:02:06,229 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-07 21:02:06,229 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-07 21:02:06 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-07 21:02:06,229 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-07 21:02:06 - INFO - [database.py:258] - Closing database connection
2025-04-07 21:02:06,230 [INFO] text2sql.feedback [feedback_manager.py:749]: Closing database connections
2025-04-07 21:02:06 - INFO - [feedback_manager.py:749] - Closing database connections
2025-04-07 21:02:06,231 [INFO] text2sql.vector [vector_store.py:288]: Closing vector database connection
2025-04-07 21:02:06 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-07 21:02:07,209 [INFO] werkzeug [_internal.py:224]:  * Restarting with watchdog (inotify)
2025-04-07 21:02:10,977 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 21:02:10,978 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 21:02:10,987 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 21:02:10,988 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 21:02:10,988 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-07 21:02:10,996 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 21:02:10,997 [INFO] text2sql [app.py:67]: Debug logging enabled for SQL generator and agents
2025-04-07 21:02:10 - INFO - [app.py:67] - Debug logging enabled for SQL generator and agents
2025-04-07 21:02:10,999 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:02:10 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:02:10,999 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 21:02:10 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 21:02:11,034 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 21:02:11 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 21:02:11,034 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 21:02:11,034 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 21:02:11,034 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 21:02:11,035 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 21:02:11,035 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:02:11 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:02:11,035 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 21:02:11 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 21:02:11,075 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 21:02:11 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 21:02:11,075 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 21:02:11,075 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 21:02:11,076 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 21:02:11,076 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 21:02:11,076 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:02:11 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:02:11,076 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 21:02:11 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 21:02:11,106 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 21:02:11 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 21:02:11,107 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 21:02:11,107 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 21:02:11,107 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 21:02:11,107 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 21:02:11,107 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-07 21:02:11 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-07 21:02:11,107 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:02:11 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:02:11,108 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 21:02:11 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 21:02:11,139 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 21:02:11 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 21:02:11,139 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-07 21:02:11 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-07 21:02:11,139 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-07 21:02:11 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-07 21:02:11,140 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 21:02:11,140 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 21:02:11,140 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 21:02:11,140 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 21:02:11,140 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 21:02:11 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 21:02:11,164 [WARNING] werkzeug [_internal.py:224]:  * Debugger is active!
2025-04-07 21:02:11,165 [INFO] werkzeug [_internal.py:224]:  * Debugger PIN: 774-546-021
2025-04-07 21:02:12,629 [INFO] text2sql.feedback [feedback_manager.py:49]: Attempting database connection
2025-04-07 21:02:12 - INFO - [feedback_manager.py:49] - Attempting database connection
2025-04-07 21:02:12,631 [INFO] text2sql.feedback [feedback_manager.py:53]: Database connection established in 0.00s
2025-04-07 21:02:12 - INFO - [feedback_manager.py:53] - Database connection established in 0.00s
2025-04-07 21:02:12,632 [INFO] text2sql.vector [vector_store.py:38]: Connecting to vector database at ./vector_store.db
2025-04-07 21:02:12 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-07 21:02:13,660 [DEBUG] pymilvus.milvus_client.milvus_client [milvus_client.py:728]: Created new connection using: 7fb03d7d746547a0a17ac15ead175c69
2025-04-07 21:02:13,660 [INFO] text2sql.vector [vector_store.py:42]: Vector database connection established in 1.03s
2025-04-07 21:02:13 - INFO - [vector_store.py:42] - Vector database connection established in 1.03s
2025-04-07 21:02:13,663 [INFO] text2sql.vector [vector_store.py:75]: Collection 'query_embeddings' already exists
2025-04-07 21:02:13 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-07 21:02:13,664 [INFO] text2sql.feedback [feedback_manager.py:679]: Starting migration of existing embeddings to vector store
2025-04-07 21:02:13 - INFO - [feedback_manager.py:679] - Starting migration of existing embeddings to vector store
2025-04-07 21:02:13,716 [INFO] text2sql.feedback [feedback_manager.py:733]: Embedding migration completed in 0.05s: 3 succeeded, 0 failed
2025-04-07 21:02:13 - INFO - [feedback_manager.py:733] - Embedding migration completed in 0.05s: 3 succeeded, 0 failed
2025-04-07 21:02:13,728 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:02:13] "GET /admin/api/embeddings/migrate HTTP/1.1" 200 -
2025-04-07 21:02:31,165 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:02:31] "GET / HTTP/1.1" 200 -
2025-04-07 21:02:31,508 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:02:31] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-07 21:02:31,513 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:02:31] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-07 21:02:31,517 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:02:31] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-07 21:02:31,520 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:02:31] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-07 21:02:31,522 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:02:31] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-07 21:02:31,524 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:02:31] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-07 21:02:31,814 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:02:31] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-07 21:02:31,817 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:02:31] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-07 21:02:31,822 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:02:31] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-07 21:02:32,141 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:02:32] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-07 21:02:33,944 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:02:33] "GET /samples HTTP/1.1" 200 -
2025-04-07 21:02:34,270 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:02:34] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-07 21:02:34,511 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:02:34] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-07 21:02:34,570 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:02:34] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-07 21:02:34,571 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:02:34] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-07 21:02:34,579 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 21:02:34 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 21:02:34,580 [INFO] text2sql.feedback [feedback_manager.py:49]: Attempting database connection
2025-04-07 21:02:34 - INFO - [feedback_manager.py:49] - Attempting database connection
2025-04-07 21:02:34,583 [INFO] text2sql.feedback [feedback_manager.py:53]: Database connection established in 0.00s
2025-04-07 21:02:34 - INFO - [feedback_manager.py:53] - Database connection established in 0.00s
2025-04-07 21:02:34,585 [INFO] text2sql.vector [vector_store.py:38]: Connecting to vector database at ./vector_store.db
2025-04-07 21:02:34 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-07 21:02:34,590 [DEBUG] pymilvus.milvus_client.milvus_client [milvus_client.py:728]: Created new connection using: 20066156692640cba02f4ec4307fa079
2025-04-07 21:02:34,590 [INFO] text2sql.vector [vector_store.py:42]: Vector database connection established in 0.00s
2025-04-07 21:02:34 - INFO - [vector_store.py:42] - Vector database connection established in 0.00s
2025-04-07 21:02:34,591 [INFO] text2sql.vector [vector_store.py:75]: Collection 'query_embeddings' already exists
2025-04-07 21:02:34 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-07 21:02:34,594 [INFO] text2sql.feedback [feedback_manager.py:513]: Retrieved 2 samples (page 1, limit 10)
2025-04-07 21:02:34 - INFO - [feedback_manager.py:513] - Retrieved 2 samples (page 1, limit 10)
2025-04-07 21:02:34,597 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:02:34] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-07 21:02:45,114 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:02:45] "GET / HTTP/1.1" 200 -
2025-04-07 21:02:45,460 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:02:45] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-07 21:02:47,214 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'get me count of customers by order month'
2025-04-07 21:02:47,215 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:02:47] "POST /api/query HTTP/1.1" 200 -
2025-04-07 21:02:47,215 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'get me count of customers by order month'
2025-04-07 21:02:47,217 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-07 21:02:47,218 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.00s
2025-04-07 21:02:47,219 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-07 21:02:47,219 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-07 21:02:47,221 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-07 21:02:47 - INFO - [database.py:44] - Attempting database connection
2025-04-07 21:02:47,223 [INFO] text2sql.database [database.py:48]: Database connection established in 0.00s
2025-04-07 21:02:47 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-07 21:02:47,224 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'get me count of customers by order month'
2025-04-07 21:02:47,225 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-07 21:02:47,226 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-07 21:02:47,226 [INFO] text2sql.llm_engine [llm_engine.py:56]: [TABLE] Completion generation started
2025-04-07 21:02:47 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-07 21:02:48,221 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:02:48] "GET /api/query/progress/427c421d-32dc-49f2-a2d4-d252f058eb94 HTTP/1.1" 200 -
2025-04-07 21:02:48,866 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:02:48] "GET /api/query/progress/427c421d-32dc-49f2-a2d4-d252f058eb94 HTTP/1.1" 200 -
2025-04-07 21:02:48,875 [INFO] text2sql.llm_engine [llm_engine.py:119]: [TABLE] Completion generation completed in 1.65s
2025-04-07 21:02:48 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 1.65s
2025-04-07 21:02:48,876 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-07 21:02:48 - INFO - [llm_engine.py:120] - **************************
2025-04-07 21:02:48,878 [INFO] text2sql.agents.table [table_agent.py:69]: Raw model response: 'customers, orders'
2025-04-07 21:02:48,879 [INFO] text2sql.agents.table [table_agent.py:90]: Table selection completed in 1.66s. Selected: customers, orders
2025-04-07 21:02:48,880 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'get me count of customers by order month'
2025-04-07 21:02:48,881 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: customers, orders
2025-04-07 21:02:48,881 [INFO] text2sql.agents.column [column_agent.py:94]: Sending request to AI model for column selection
2025-04-07 21:02:48,882 [INFO] text2sql.llm_engine [llm_engine.py:56]: [COLUMN] Completion generation started
2025-04-07 21:02:48 - INFO - [llm_engine.py:56] - [COLUMN] Completion generation started
2025-04-07 21:02:50,123 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:02:50] "GET /api/query/progress/427c421d-32dc-49f2-a2d4-d252f058eb94 HTTP/1.1" 200 -
2025-04-07 21:02:50,339 [INFO] text2sql.llm_engine [llm_engine.py:119]: [COLUMN] Completion generation completed in 1.46s
2025-04-07 21:02:50 - INFO - [llm_engine.py:119] - [COLUMN] Completion generation completed in 1.46s
2025-04-07 21:02:50,341 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-07 21:02:50 - INFO - [llm_engine.py:120] - **************************
2025-04-07 21:02:50,344 [INFO] text2sql.agents.column [column_agent.py:99]: Raw model response: '{
  "customers": [
    "customer_id"
  ],
  "orders": [
    "order_id",
    "customer_id",
    "order_date"
  ]
}'
2025-04-07 21:02:50,345 [INFO] text2sql.agents.column [column_agent.py:139]: Parsing column selection from model response
2025-04-07 21:02:50,347 [INFO] text2sql.agents.column [column_agent.py:149]: Parsed column selection JSON: {"customers": ["customer_id"], "orders": ["order_id", "customer_id", "order_date"]}
2025-04-07 21:02:50,348 [INFO] text2sql.agents.column [column_agent.py:111]: Table 'customers': Pruned 10 columns, kept 1/11
2025-04-07 21:02:50,349 [INFO] text2sql.agents.column [column_agent.py:111]: Table 'orders': Pruned 2 columns, kept 3/5
2025-04-07 21:02:50,350 [INFO] text2sql.agents.column [column_agent.py:197]: Building pruned schema
2025-04-07 21:02:50,352 [INFO] text2sql.agents.column [column_agent.py:226]: Built pruned schema (404 chars)
2025-04-07 21:02:50,353 [INFO] text2sql.agents.column [column_agent.py:120]: Column pruning completed in 1.47s
2025-04-07 21:02:50,353 [INFO] text2sql.sql_generator [sql_generator.py:237]: Found 1 join conditions for the relevant tables
2025-04-07 21:02:50,354 [INFO] text2sql.feedback [feedback_manager.py:260]: Stage 1: Vector search for 'get me count of customers by order month...'
2025-04-07 21:02:50 - INFO - [feedback_manager.py:260] - Stage 1: Vector search for 'get me count of customers by order month...'
2025-04-07 21:02:50,356 [INFO] text2sql.feedback [feedback_manager.py:74]: Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-07 21:02:50 - INFO - [feedback_manager.py:74] - Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-07 21:02:50,771 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:02:50] "GET /api/query/progress/427c421d-32dc-49f2-a2d4-d252f058eb94 HTTP/1.1" 200 -
2025-04-07 21:02:52,009 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:02:52] "GET /api/query/progress/427c421d-32dc-49f2-a2d4-d252f058eb94 HTTP/1.1" 200 -
2025-04-07 21:02:52,646 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:02:52] "GET /api/query/progress/427c421d-32dc-49f2-a2d4-d252f058eb94 HTTP/1.1" 200 -
2025-04-07 21:02:53,885 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:02:53] "GET /api/query/progress/427c421d-32dc-49f2-a2d4-d252f058eb94 HTTP/1.1" 200 -
2025-04-07 21:02:54,541 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:02:54] "GET /api/query/progress/427c421d-32dc-49f2-a2d4-d252f058eb94 HTTP/1.1" 200 -
2025-04-07 21:02:55,786 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:02:55] "GET /api/query/progress/427c421d-32dc-49f2-a2d4-d252f058eb94 HTTP/1.1" 200 -
2025-04-07 21:02:56,432 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:02:56] "GET /api/query/progress/427c421d-32dc-49f2-a2d4-d252f058eb94 HTTP/1.1" 200 -
2025-04-07 21:02:57,680 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:02:57] "GET /api/query/progress/427c421d-32dc-49f2-a2d4-d252f058eb94 HTTP/1.1" 200 -
2025-04-07 21:02:58,340 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:02:58] "GET /api/query/progress/427c421d-32dc-49f2-a2d4-d252f058eb94 HTTP/1.1" 200 -
2025-04-07 21:02:59,567 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:02:59] "GET /api/query/progress/427c421d-32dc-49f2-a2d4-d252f058eb94 HTTP/1.1" 200 -
2025-04-07 21:03:00,227 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:03:00] "GET /api/query/progress/427c421d-32dc-49f2-a2d4-d252f058eb94 HTTP/1.1" 200 -
2025-04-07 21:03:01,438 [INFO] text2sql.feedback [feedback_manager.py:77]: Embedding model loaded in 11.08s
2025-04-07 21:03:01 - INFO - [feedback_manager.py:77] - Embedding model loaded in 11.08s
2025-04-07 21:03:01,470 [INFO] text2sql.vector [vector_store.py:38]: Connecting to vector database at ./vector_store.db
2025-04-07 21:03:01 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-07 21:03:01,475 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:03:01] "GET /api/query/progress/427c421d-32dc-49f2-a2d4-d252f058eb94 HTTP/1.1" 200 -
2025-04-07 21:03:01,478 [DEBUG] pymilvus.milvus_client.milvus_client [milvus_client.py:728]: Created new connection using: c3f8e82788fd454b8cee423d7a5a7f96
2025-04-07 21:03:01,478 [INFO] text2sql.vector [vector_store.py:42]: Vector database connection established in 0.01s
2025-04-07 21:03:01 - INFO - [vector_store.py:42] - Vector database connection established in 0.01s
2025-04-07 21:03:01,480 [INFO] text2sql.vector [vector_store.py:75]: Collection 'query_embeddings' already exists
2025-04-07 21:03:01 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-07 21:03:01,501 [ERROR] text2sql.vector [vector_store.py:183]: Error searching similar vectors: 'query_text'
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/vector_store.py", line 169, in search_similar
    'query_text': hit['query_text'],
                  ~~~^^^^^^^^^^^^^^
KeyError: 'query_text'
2025-04-07 21:03:01 - ERROR - [vector_store.py:183] - Error searching similar vectors: 'query_text'
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/vector_store.py", line 169, in search_similar
    'query_text': hit['query_text'],
                  ~~~^^^^^^^^^^^^^^
KeyError: 'query_text'
2025-04-07 21:03:01,503 [WARNING] text2sql.feedback [feedback_manager.py:281]: No candidates found from vector search, falling back to text-based search
2025-04-07 21:03:01 - WARNING - [feedback_manager.py:281] - No candidates found from vector search, falling back to text-based search
2025-04-07 21:03:01,505 [INFO] text2sql.feedback [feedback_manager.py:49]: Attempting database connection
2025-04-07 21:03:01 - INFO - [feedback_manager.py:49] - Attempting database connection
2025-04-07 21:03:01,506 [INFO] text2sql.feedback [feedback_manager.py:53]: Database connection established in 0.00s
2025-04-07 21:03:01 - INFO - [feedback_manager.py:53] - Database connection established in 0.00s
2025-04-07 21:03:01,507 [INFO] text2sql.vector [vector_store.py:38]: Connecting to vector database at ./vector_store.db
2025-04-07 21:03:01 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-07 21:03:01,512 [DEBUG] pymilvus.milvus_client.milvus_client [milvus_client.py:728]: Created new connection using: 0c16dc6ce6444da9914d05981f30b0e7
2025-04-07 21:03:01,512 [INFO] text2sql.vector [vector_store.py:42]: Vector database connection established in 0.01s
2025-04-07 21:03:01 - INFO - [vector_store.py:42] - Vector database connection established in 0.01s
2025-04-07 21:03:01,514 [INFO] text2sql.vector [vector_store.py:75]: Collection 'query_embeddings' already exists
2025-04-07 21:03:01 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-07 21:03:01,517 [INFO] text2sql.feedback [feedback_manager.py:395]: Found 2 similar queries using text-based search for 'get me count of customers by order month...'
2025-04-07 21:03:01 - INFO - [feedback_manager.py:395] - Found 2 similar queries using text-based search for 'get me count of customers by order month...'
2025-04-07 21:03:01,518 [INFO] text2sql.sql_generator [sql_generator.py:280]: Found 2 similar queries with reranking
2025-04-07 21:03:01,518 [INFO] text2sql.sql_generator [sql_generator.py:302]: Added similar query #1 from feedback (score: 0.0000): get me count of customers by order month...
2025-04-07 21:03:01,518 [INFO] text2sql.sql_generator [sql_generator.py:302]: Added similar query #2 from feedback (score: 0.0000): get me all the customers...
2025-04-07 21:03:01,519 [INFO] text2sql.azure [azure_client.py:35]: SQL generation started for query: 'get me count of customers by order month'
2025-04-07 21:03:01 - INFO - [azure_client.py:35] - SQL generation started for query: 'get me count of customers by order month'
2025-04-07 21:03:01,519 [INFO] text2sql.azure [azure_client.py:69]: Including schema information (404 chars)
2025-04-07 21:03:01 - INFO - [azure_client.py:69] - Including schema information (404 chars)
2025-04-07 21:03:01,519 [INFO] text2sql.azure [azure_client.py:76]: Including 1 join conditions
2025-04-07 21:03:01 - INFO - [azure_client.py:76] - Including 1 join conditions
2025-04-07 21:03:01,520 [INFO] text2sql.azure [azure_client.py:97]: Including 2 SQL examples from feedback similarity search
2025-04-07 21:03:01 - INFO - [azure_client.py:97] - Including 2 SQL examples from feedback similarity search
2025-04-07 21:03:01,522 [INFO] text2sql.azure [azure_client.py:114]: PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER): Unique customer identifier\nPrimary Key(s): customer_id\n\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER): Unique order identifier, customer_id (INTEGER): Reference to customer who placed the order, order_date (TEXT): Date when order was placed\nPrimary Key(s): order_id\n"}, {'role': 'user', 'content': 'Use the following pre-defined join conditions when joining these tables:\n- When joining customers with orders, use: INNER JOIN orders ON customers.customer_id = orders.customer_id\n'}, {'role': 'user', 'content': "Here are some similar queries that were previously successful:\nQuestion: get me count of customers by order month\nSQL: SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;\n\nQuestion: get me all the customers\nSQL: SELECT * FROM customers;\n\n"}, {'role': 'user', 'content': 'Convert this question to SQL: get me count of customers by order month'}]
2025-04-07 21:03:01 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER): Unique customer identifier\nPrimary Key(s): customer_id\n\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER): Unique order identifier, customer_id (INTEGER): Reference to customer who placed the order, order_date (TEXT): Date when order was placed\nPrimary Key(s): order_id\n"}, {'role': 'user', 'content': 'Use the following pre-defined join conditions when joining these tables:\n- When joining customers with orders, use: INNER JOIN orders ON customers.customer_id = orders.customer_id\n'}, {'role': 'user', 'content': "Here are some similar queries that were previously successful:\nQuestion: get me count of customers by order month\nSQL: SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;\n\nQuestion: get me all the customers\nSQL: SELECT * FROM customers;\n\n"}, {'role': 'user', 'content': 'Convert this question to SQL: get me count of customers by order month'}]
2025-04-07 21:03:01,523 [INFO] text2sql.llm_engine [llm_engine.py:56]: [SQL_GEN] Completion generation started
2025-04-07 21:03:01 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-07 21:03:04,126 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:03:04] "GET /api/query/progress/427c421d-32dc-49f2-a2d4-d252f058eb94 HTTP/1.1" 200 -
2025-04-07 21:03:05,374 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:03:05] "GET /api/query/progress/427c421d-32dc-49f2-a2d4-d252f058eb94 HTTP/1.1" 200 -
2025-04-07 21:03:05,777 [INFO] text2sql.llm_engine [llm_engine.py:119]: [SQL_GEN] Completion generation completed in 4.25s
2025-04-07 21:03:05 - INFO - [llm_engine.py:119] - [SQL_GEN] Completion generation completed in 4.25s
2025-04-07 21:03:05,779 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-07 21:03:05 - INFO - [llm_engine.py:120] - **************************
2025-04-07 21:03:05,781 [INFO] text2sql.azure [azure_client.py:150]: Parsing SQL from model response
2025-04-07 21:03:05 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-07 21:03:05,782 [INFO] text2sql.azure [azure_client.py:157]: Found SQL code block in response
2025-04-07 21:03:05 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-07 21:03:05,783 [INFO] text2sql.azure [azure_client.py:171]: Extracted SQL query (244 chars) and explanation (104 chars)
2025-04-07 21:03:05 - INFO - [azure_client.py:171] - Extracted SQL query (244 chars) and explanation (104 chars)
2025-04-07 21:03:05,783 [INFO] text2sql.azure [azure_client.py:124]: Generated SQL: SELECT 
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id
GROUP BY 
    order_month
ORDER BY 
    order_month;
2025-04-07 21:03:05 - INFO - [azure_client.py:124] - Generated SQL: SELECT 
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id
GROUP BY 
    order_month
ORDER BY 
    order_month;
2025-04-07 21:03:05,786 [INFO] text2sql.azure [azure_client.py:132]: SQL generation completed in 4.27s
2025-04-07 21:03:05 - INFO - [azure_client.py:132] - SQL generation completed in 4.27s
2025-04-07 21:03:05,787 [INFO] text2sql.database [database.py:65]: Executing SQL query: SELECT 
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id
GROUP BY 
    order_month
ORDER BY 
    order_month;
2025-04-07 21:03:05 - INFO - [database.py:65] - Executing SQL query: SELECT 
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id
GROUP BY 
    order_month
ORDER BY 
    order_month;
2025-04-07 21:03:05,790 [INFO] text2sql.database [database.py:86]: Query returned 2 rows with 2 columns
2025-04-07 21:03:05 - INFO - [database.py:86] - Query returned 2 rows with 2 columns
2025-04-07 21:03:05,792 [INFO] text2sql.database [database.py:95]: Query processing completed in 0.01s
2025-04-07 21:03:05 - INFO - [database.py:95] - Query processing completed in 0.01s
2025-04-07 21:03:05,795 [INFO] text2sql.sql_generator [sql_generator.py:376]: SQL generation completed in 18.58s
2025-04-07 21:03:05,795 [INFO] text2sql.sql_generator [sql_generator.py:125]: Query processing completed in 18.58s
2025-04-07 21:03:06,025 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:03:06] "GET /api/query/progress/427c421d-32dc-49f2-a2d4-d252f058eb94 HTTP/1.1" 200 -
2025-04-07 21:04:32,860 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/utils/vector_store.py', reloading
2025-04-07 21:04:32,860 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/utils/vector_store.py', reloading
2025-04-07 21:04:32,871 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/utils/vector_store.py', reloading
2025-04-07 21:04:33,872 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-07 21:04:33,872 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-07 21:04:33,872 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-07 21:04:33,872 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-07 21:04:33,872 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-07 21:04:33 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-07 21:04:33,872 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-07 21:04:33 - INFO - [database.py:258] - Closing database connection
2025-04-07 21:04:33,873 [INFO] text2sql.feedback [feedback_manager.py:749]: Closing database connections
2025-04-07 21:04:33 - INFO - [feedback_manager.py:749] - Closing database connections
2025-04-07 21:04:33,874 [INFO] text2sql.vector [vector_store.py:288]: Closing vector database connection
2025-04-07 21:04:33 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-07 21:04:34,876 [INFO] werkzeug [_internal.py:224]:  * Restarting with watchdog (inotify)
2025-04-07 21:04:38,904 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 21:04:38,904 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 21:04:38,905 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 21:04:38,905 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 21:04:38,905 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-07 21:04:38,912 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 21:04:38,913 [INFO] text2sql [app.py:67]: Debug logging enabled for SQL generator and agents
2025-04-07 21:04:38 - INFO - [app.py:67] - Debug logging enabled for SQL generator and agents
2025-04-07 21:04:38,914 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:04:38 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:04:38,914 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 21:04:38 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 21:04:38,944 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 21:04:38 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 21:04:38,945 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 21:04:38,945 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 21:04:38,945 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 21:04:38,945 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 21:04:38,945 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:04:38 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:04:38,946 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 21:04:38 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 21:04:38,973 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 21:04:38 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 21:04:38,973 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 21:04:38,974 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 21:04:38,974 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 21:04:38,974 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 21:04:38,974 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:04:38 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:04:38,974 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 21:04:38 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 21:04:39,001 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 21:04:39 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 21:04:39,001 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 21:04:39,001 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 21:04:39,001 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 21:04:39,001 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 21:04:39,001 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-07 21:04:39 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-07 21:04:39,002 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:04:39 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:04:39,002 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 21:04:39 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 21:04:39,030 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 21:04:39 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 21:04:39,030 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-07 21:04:39 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-07 21:04:39,030 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-07 21:04:39 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-07 21:04:39,031 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 21:04:39,031 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 21:04:39,031 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 21:04:39,031 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 21:04:39,031 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 21:04:39 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 21:04:39,057 [WARNING] werkzeug [_internal.py:224]:  * Debugger is active!
2025-04-07 21:04:39,058 [INFO] werkzeug [_internal.py:224]:  * Debugger PIN: 774-546-021
2025-04-07 21:04:44,206 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'get me count of customers by order month'
2025-04-07 21:04:44,208 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:04:44] "POST /api/query HTTP/1.1" 200 -
2025-04-07 21:04:44,208 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'get me count of customers by order month'
2025-04-07 21:04:44,211 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-07 21:04:44,212 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.00s
2025-04-07 21:04:44,213 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-07 21:04:44,214 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-07 21:04:44,215 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-07 21:04:44 - INFO - [database.py:44] - Attempting database connection
2025-04-07 21:04:44,217 [INFO] text2sql.database [database.py:48]: Database connection established in 0.00s
2025-04-07 21:04:44 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-07 21:04:44,219 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'get me count of customers by order month'
2025-04-07 21:04:44,219 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-07 21:04:44,221 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-07 21:04:44,222 [INFO] text2sql.llm_engine [llm_engine.py:56]: [TABLE] Completion generation started
2025-04-07 21:04:44 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-07 21:04:47,114 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:04:47] "GET /api/query/progress/cdb17cd6-0f7c-4f16-883b-14acabd11ecd HTTP/1.1" 200 -
2025-04-07 21:04:48,022 [INFO] text2sql.llm_engine [llm_engine.py:119]: [TABLE] Completion generation completed in 3.80s
2025-04-07 21:04:48 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 3.80s
2025-04-07 21:04:48,024 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-07 21:04:48 - INFO - [llm_engine.py:120] - **************************
2025-04-07 21:04:48,026 [INFO] text2sql.agents.table [table_agent.py:69]: Raw model response: 'customers, orders'
2025-04-07 21:04:48,028 [INFO] text2sql.agents.table [table_agent.py:90]: Table selection completed in 3.81s. Selected: customers, orders
2025-04-07 21:04:48,029 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'get me count of customers by order month'
2025-04-07 21:04:48,030 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: customers, orders
2025-04-07 21:04:48,032 [INFO] text2sql.agents.column [column_agent.py:94]: Sending request to AI model for column selection
2025-04-07 21:04:48,033 [INFO] text2sql.llm_engine [llm_engine.py:56]: [COLUMN] Completion generation started
2025-04-07 21:04:48 - INFO - [llm_engine.py:56] - [COLUMN] Completion generation started
2025-04-07 21:04:48,352 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:04:48] "GET /api/query/progress/cdb17cd6-0f7c-4f16-883b-14acabd11ecd HTTP/1.1" 200 -
2025-04-07 21:04:49,015 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:04:49] "GET /api/query/progress/cdb17cd6-0f7c-4f16-883b-14acabd11ecd HTTP/1.1" 200 -
2025-04-07 21:04:50,254 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:04:50] "GET /api/query/progress/cdb17cd6-0f7c-4f16-883b-14acabd11ecd HTTP/1.1" 200 -
2025-04-07 21:04:50,887 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:04:50] "GET /api/query/progress/cdb17cd6-0f7c-4f16-883b-14acabd11ecd HTTP/1.1" 200 -
2025-04-07 21:04:52,125 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:04:52] "GET /api/query/progress/cdb17cd6-0f7c-4f16-883b-14acabd11ecd HTTP/1.1" 200 -
2025-04-07 21:04:52,758 [INFO] text2sql.llm_engine [llm_engine.py:119]: [COLUMN] Completion generation completed in 4.73s
2025-04-07 21:04:52 - INFO - [llm_engine.py:119] - [COLUMN] Completion generation completed in 4.73s
2025-04-07 21:04:52,759 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-07 21:04:52 - INFO - [llm_engine.py:120] - **************************
2025-04-07 21:04:52,761 [INFO] text2sql.agents.column [column_agent.py:99]: Raw model response: '{
  "customers": ["customer_id"],
  "orders": ["order_id", "customer_id", "order_date"]
}'
2025-04-07 21:04:52,762 [INFO] text2sql.agents.column [column_agent.py:139]: Parsing column selection from model response
2025-04-07 21:04:52,762 [INFO] text2sql.agents.column [column_agent.py:149]: Parsed column selection JSON: {"customers": ["customer_id"], "orders": ["order_id", "customer_id", "order_date"]}
2025-04-07 21:04:52,763 [INFO] text2sql.agents.column [column_agent.py:111]: Table 'customers': Pruned 10 columns, kept 1/11
2025-04-07 21:04:52,764 [INFO] text2sql.agents.column [column_agent.py:111]: Table 'orders': Pruned 2 columns, kept 3/5
2025-04-07 21:04:52,765 [INFO] text2sql.agents.column [column_agent.py:197]: Building pruned schema
2025-04-07 21:04:52,766 [INFO] text2sql.agents.column [column_agent.py:226]: Built pruned schema (404 chars)
2025-04-07 21:04:52,767 [INFO] text2sql.agents.column [column_agent.py:120]: Column pruning completed in 4.74s
2025-04-07 21:04:52,767 [INFO] text2sql.sql_generator [sql_generator.py:237]: Found 1 join conditions for the relevant tables
2025-04-07 21:04:52,768 [INFO] text2sql.feedback [feedback_manager.py:260]: Stage 1: Vector search for 'get me count of customers by order month...'
2025-04-07 21:04:52 - INFO - [feedback_manager.py:260] - Stage 1: Vector search for 'get me count of customers by order month...'
2025-04-07 21:04:52,772 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:04:52] "GET /api/query/progress/cdb17cd6-0f7c-4f16-883b-14acabd11ecd HTTP/1.1" 200 -
2025-04-07 21:04:52,776 [INFO] text2sql.feedback [feedback_manager.py:74]: Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-07 21:04:52 - INFO - [feedback_manager.py:74] - Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-07 21:04:54,006 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:04:54] "GET /api/query/progress/cdb17cd6-0f7c-4f16-883b-14acabd11ecd HTTP/1.1" 200 -
2025-04-07 21:04:54,661 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:04:54] "GET /api/query/progress/cdb17cd6-0f7c-4f16-883b-14acabd11ecd HTTP/1.1" 200 -
2025-04-07 21:04:55,899 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:04:55] "GET /api/query/progress/cdb17cd6-0f7c-4f16-883b-14acabd11ecd HTTP/1.1" 200 -
2025-04-07 21:04:56,534 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:04:56] "GET /api/query/progress/cdb17cd6-0f7c-4f16-883b-14acabd11ecd HTTP/1.1" 200 -
2025-04-07 21:04:57,775 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:04:57] "GET /api/query/progress/cdb17cd6-0f7c-4f16-883b-14acabd11ecd HTTP/1.1" 200 -
2025-04-07 21:04:58,413 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:04:58] "GET /api/query/progress/cdb17cd6-0f7c-4f16-883b-14acabd11ecd HTTP/1.1" 200 -
2025-04-07 21:04:59,614 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:04:59] "GET /api/query/progress/cdb17cd6-0f7c-4f16-883b-14acabd11ecd HTTP/1.1" 200 -
2025-04-07 21:05:00,246 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:05:00] "GET /api/query/progress/cdb17cd6-0f7c-4f16-883b-14acabd11ecd HTTP/1.1" 200 -
2025-04-07 21:05:01,472 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:05:01] "GET /api/query/progress/cdb17cd6-0f7c-4f16-883b-14acabd11ecd HTTP/1.1" 200 -
2025-04-07 21:05:02,099 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:05:02] "GET /api/query/progress/cdb17cd6-0f7c-4f16-883b-14acabd11ecd HTTP/1.1" 200 -
2025-04-07 21:05:03,319 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:05:03] "GET /api/query/progress/cdb17cd6-0f7c-4f16-883b-14acabd11ecd HTTP/1.1" 200 -
2025-04-07 21:05:03,966 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:05:03] "GET /api/query/progress/cdb17cd6-0f7c-4f16-883b-14acabd11ecd HTTP/1.1" 200 -
2025-04-07 21:05:04,190 [INFO] text2sql.feedback [feedback_manager.py:77]: Embedding model loaded in 11.41s
2025-04-07 21:05:04 - INFO - [feedback_manager.py:77] - Embedding model loaded in 11.41s
2025-04-07 21:05:04,219 [INFO] text2sql.vector [vector_store.py:38]: Connecting to vector database at ./vector_store.db
2025-04-07 21:05:04 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-07 21:05:05,210 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:05:05] "GET /api/query/progress/cdb17cd6-0f7c-4f16-883b-14acabd11ecd HTTP/1.1" 200 -
2025-04-07 21:05:05,239 [DEBUG] pymilvus.milvus_client.milvus_client [milvus_client.py:728]: Created new connection using: bb22af38dd144b4185a7906c4b4029bc
2025-04-07 21:05:05,239 [INFO] text2sql.vector [vector_store.py:42]: Vector database connection established in 1.02s
2025-04-07 21:05:05 - INFO - [vector_store.py:42] - Vector database connection established in 1.02s
2025-04-07 21:05:05,241 [INFO] text2sql.vector [vector_store.py:75]: Collection 'query_embeddings' already exists
2025-04-07 21:05:05 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-07 21:05:05,278 [ERROR] text2sql.vector [vector_store.py:183]: Error searching similar vectors: 'score'
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/vector_store.py", line 177, in search_similar
    'similarity': hit['score']
                  ~~~^^^^^^^^^
KeyError: 'score'
2025-04-07 21:05:05 - ERROR - [vector_store.py:183] - Error searching similar vectors: 'score'
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/vector_store.py", line 177, in search_similar
    'similarity': hit['score']
                  ~~~^^^^^^^^^
KeyError: 'score'
2025-04-07 21:05:05,280 [WARNING] text2sql.feedback [feedback_manager.py:281]: No candidates found from vector search, falling back to text-based search
2025-04-07 21:05:05 - WARNING - [feedback_manager.py:281] - No candidates found from vector search, falling back to text-based search
2025-04-07 21:05:05,282 [INFO] text2sql.feedback [feedback_manager.py:49]: Attempting database connection
2025-04-07 21:05:05 - INFO - [feedback_manager.py:49] - Attempting database connection
2025-04-07 21:05:05,284 [INFO] text2sql.feedback [feedback_manager.py:53]: Database connection established in 0.00s
2025-04-07 21:05:05 - INFO - [feedback_manager.py:53] - Database connection established in 0.00s
2025-04-07 21:05:05,284 [INFO] text2sql.vector [vector_store.py:38]: Connecting to vector database at ./vector_store.db
2025-04-07 21:05:05 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-07 21:05:05,289 [DEBUG] pymilvus.milvus_client.milvus_client [milvus_client.py:728]: Created new connection using: 46c76fcbd50446108c3b2d2317abd6b7
2025-04-07 21:05:05,289 [INFO] text2sql.vector [vector_store.py:42]: Vector database connection established in 0.00s
2025-04-07 21:05:05 - INFO - [vector_store.py:42] - Vector database connection established in 0.00s
2025-04-07 21:05:05,291 [INFO] text2sql.vector [vector_store.py:75]: Collection 'query_embeddings' already exists
2025-04-07 21:05:05 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-07 21:05:05,293 [INFO] text2sql.feedback [feedback_manager.py:395]: Found 2 similar queries using text-based search for 'get me count of customers by order month...'
2025-04-07 21:05:05 - INFO - [feedback_manager.py:395] - Found 2 similar queries using text-based search for 'get me count of customers by order month...'
2025-04-07 21:05:05,294 [INFO] text2sql.sql_generator [sql_generator.py:280]: Found 2 similar queries with reranking
2025-04-07 21:05:05,295 [INFO] text2sql.sql_generator [sql_generator.py:302]: Added similar query #1 from feedback (score: 0.0000): get me count of customers by order month...
2025-04-07 21:05:05,296 [INFO] text2sql.sql_generator [sql_generator.py:302]: Added similar query #2 from feedback (score: 0.0000): get me all the customers...
2025-04-07 21:05:05,296 [INFO] text2sql.azure [azure_client.py:35]: SQL generation started for query: 'get me count of customers by order month'
2025-04-07 21:05:05 - INFO - [azure_client.py:35] - SQL generation started for query: 'get me count of customers by order month'
2025-04-07 21:05:05,298 [INFO] text2sql.azure [azure_client.py:69]: Including schema information (404 chars)
2025-04-07 21:05:05 - INFO - [azure_client.py:69] - Including schema information (404 chars)
2025-04-07 21:05:05,299 [INFO] text2sql.azure [azure_client.py:76]: Including 1 join conditions
2025-04-07 21:05:05 - INFO - [azure_client.py:76] - Including 1 join conditions
2025-04-07 21:05:05,300 [INFO] text2sql.azure [azure_client.py:97]: Including 2 SQL examples from feedback similarity search
2025-04-07 21:05:05 - INFO - [azure_client.py:97] - Including 2 SQL examples from feedback similarity search
2025-04-07 21:05:05,301 [INFO] text2sql.azure [azure_client.py:114]: PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER): Unique customer identifier\nPrimary Key(s): customer_id\n\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER): Unique order identifier, customer_id (INTEGER): Reference to customer who placed the order, order_date (TEXT): Date when order was placed\nPrimary Key(s): order_id\n"}, {'role': 'user', 'content': 'Use the following pre-defined join conditions when joining these tables:\n- When joining customers with orders, use: INNER JOIN orders ON customers.customer_id = orders.customer_id\n'}, {'role': 'user', 'content': "Here are some similar queries that were previously successful:\nQuestion: get me count of customers by order month\nSQL: SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;\n\nQuestion: get me all the customers\nSQL: SELECT * FROM customers;\n\n"}, {'role': 'user', 'content': 'Convert this question to SQL: get me count of customers by order month'}]
2025-04-07 21:05:05 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER): Unique customer identifier\nPrimary Key(s): customer_id\n\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER): Unique order identifier, customer_id (INTEGER): Reference to customer who placed the order, order_date (TEXT): Date when order was placed\nPrimary Key(s): order_id\n"}, {'role': 'user', 'content': 'Use the following pre-defined join conditions when joining these tables:\n- When joining customers with orders, use: INNER JOIN orders ON customers.customer_id = orders.customer_id\n'}, {'role': 'user', 'content': "Here are some similar queries that were previously successful:\nQuestion: get me count of customers by order month\nSQL: SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;\n\nQuestion: get me all the customers\nSQL: SELECT * FROM customers;\n\n"}, {'role': 'user', 'content': 'Convert this question to SQL: get me count of customers by order month'}]
2025-04-07 21:05:05,302 [INFO] text2sql.llm_engine [llm_engine.py:56]: [SQL_GEN] Completion generation started
2025-04-07 21:05:05 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-07 21:05:05,866 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:05:05] "GET /api/query/progress/cdb17cd6-0f7c-4f16-883b-14acabd11ecd HTTP/1.1" 200 -
2025-04-07 21:05:07,115 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:05:07] "GET /api/query/progress/cdb17cd6-0f7c-4f16-883b-14acabd11ecd HTTP/1.1" 200 -
2025-04-07 21:05:07,500 [INFO] text2sql.llm_engine [llm_engine.py:119]: [SQL_GEN] Completion generation completed in 2.20s
2025-04-07 21:05:07 - INFO - [llm_engine.py:119] - [SQL_GEN] Completion generation completed in 2.20s
2025-04-07 21:05:07,503 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-07 21:05:07 - INFO - [llm_engine.py:120] - **************************
2025-04-07 21:05:07,506 [INFO] text2sql.azure [azure_client.py:150]: Parsing SQL from model response
2025-04-07 21:05:07 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-07 21:05:07,508 [INFO] text2sql.azure [azure_client.py:157]: Found SQL code block in response
2025-04-07 21:05:07 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-07 21:05:07,510 [INFO] text2sql.azure [azure_client.py:171]: Extracted SQL query (244 chars) and explanation (101 chars)
2025-04-07 21:05:07 - INFO - [azure_client.py:171] - Extracted SQL query (244 chars) and explanation (101 chars)
2025-04-07 21:05:07,513 [INFO] text2sql.azure [azure_client.py:124]: Generated SQL: SELECT 
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id
GROUP BY 
    order_month
ORDER BY 
    order_month;
2025-04-07 21:05:07 - INFO - [azure_client.py:124] - Generated SQL: SELECT 
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id
GROUP BY 
    order_month
ORDER BY 
    order_month;
2025-04-07 21:05:07,516 [INFO] text2sql.azure [azure_client.py:132]: SQL generation completed in 2.22s
2025-04-07 21:05:07 - INFO - [azure_client.py:132] - SQL generation completed in 2.22s
2025-04-07 21:05:07,518 [INFO] text2sql.database [database.py:65]: Executing SQL query: SELECT 
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id
GROUP BY 
    order_month
ORDER BY 
    order_month;
2025-04-07 21:05:07 - INFO - [database.py:65] - Executing SQL query: SELECT 
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id
GROUP BY 
    order_month
ORDER BY 
    order_month;
2025-04-07 21:05:07,522 [INFO] text2sql.database [database.py:86]: Query returned 2 rows with 2 columns
2025-04-07 21:05:07 - INFO - [database.py:86] - Query returned 2 rows with 2 columns
2025-04-07 21:05:07,526 [INFO] text2sql.database [database.py:95]: Query processing completed in 0.01s
2025-04-07 21:05:07 - INFO - [database.py:95] - Query processing completed in 0.01s
2025-04-07 21:05:07,528 [INFO] text2sql.sql_generator [sql_generator.py:376]: SQL generation completed in 23.31s
2025-04-07 21:05:07,529 [INFO] text2sql.sql_generator [sql_generator.py:125]: Query processing completed in 23.32s
2025-04-07 21:05:07,753 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:05:07] "GET /api/query/progress/cdb17cd6-0f7c-4f16-883b-14acabd11ecd HTTP/1.1" 200 -
2025-04-07 21:05:39,262 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/utils/vector_store.py', reloading
2025-04-07 21:05:39,263 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/utils/vector_store.py', reloading
2025-04-07 21:05:39,274 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/utils/vector_store.py', reloading
2025-04-07 21:05:40,275 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-07 21:05:40,275 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-07 21:05:40,275 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-07 21:05:40,275 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-07 21:05:40,275 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-07 21:05:40 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-07 21:05:40,275 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-07 21:05:40 - INFO - [database.py:258] - Closing database connection
2025-04-07 21:05:40,276 [INFO] text2sql.feedback [feedback_manager.py:749]: Closing database connections
2025-04-07 21:05:40 - INFO - [feedback_manager.py:749] - Closing database connections
2025-04-07 21:05:40,277 [INFO] text2sql.vector [vector_store.py:288]: Closing vector database connection
2025-04-07 21:05:40 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-07 21:05:41,310 [INFO] werkzeug [_internal.py:224]:  * Restarting with watchdog (inotify)
2025-04-07 21:05:47,679 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 21:05:47,679 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 21:05:47,680 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 21:05:47,680 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 21:05:47,681 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-07 21:05:47,700 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 21:05:47,702 [INFO] text2sql [app.py:67]: Debug logging enabled for SQL generator and agents
2025-04-07 21:05:47 - INFO - [app.py:67] - Debug logging enabled for SQL generator and agents
2025-04-07 21:05:47,709 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:05:47 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:05:47,711 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 21:05:47 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 21:05:47,804 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 21:05:47 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 21:05:47,808 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 21:05:47,809 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 21:05:47,809 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 21:05:47,810 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 21:05:47,810 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:05:47 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:05:47,811 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 21:05:47 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 21:05:47,896 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 21:05:47 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 21:05:47,897 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 21:05:47,897 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 21:05:47,898 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 21:05:47,898 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 21:05:47,898 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:05:47 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:05:47,899 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 21:05:47 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 21:05:47,977 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 21:05:47 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 21:05:47,977 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 21:05:47,978 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 21:05:47,978 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 21:05:47,979 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 21:05:47,979 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-07 21:05:47 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-07 21:05:47,980 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:05:47 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:05:47,980 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 21:05:47 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 21:05:48,060 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 21:05:48 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 21:05:48,062 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-07 21:05:48 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-07 21:05:48,063 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-07 21:05:48 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-07 21:05:48,064 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 21:05:48,064 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 21:05:48,064 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 21:05:48,065 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 21:05:48,065 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 21:05:48 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 21:05:48,128 [WARNING] werkzeug [_internal.py:224]:  * Debugger is active!
2025-04-07 21:05:48,129 [INFO] werkzeug [_internal.py:224]:  * Debugger PIN: 774-546-021
2025-04-07 21:05:49,232 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'get me count of customers by order month'
2025-04-07 21:05:49,235 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:05:49] "POST /api/query HTTP/1.1" 200 -
2025-04-07 21:05:49,242 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'get me count of customers by order month'
2025-04-07 21:05:49,247 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-07 21:05:49,249 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.01s
2025-04-07 21:05:49,250 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-07 21:05:49,252 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-07 21:05:49,253 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-07 21:05:49 - INFO - [database.py:44] - Attempting database connection
2025-04-07 21:05:49,257 [INFO] text2sql.database [database.py:48]: Database connection established in 0.00s
2025-04-07 21:05:49 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-07 21:05:49,261 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'get me count of customers by order month'
2025-04-07 21:05:49,263 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-07 21:05:49,265 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-07 21:05:49,266 [INFO] text2sql.llm_engine [llm_engine.py:56]: [TABLE] Completion generation started
2025-04-07 21:05:49 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-07 21:05:50,302 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:05:50] "GET /api/query/progress/9b46dee5-dab4-4e01-af74-37d8c4cc4d34 HTTP/1.1" 200 -
2025-04-07 21:05:50,948 [INFO] text2sql.llm_engine [llm_engine.py:119]: [TABLE] Completion generation completed in 1.68s
2025-04-07 21:05:50 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 1.68s
2025-04-07 21:05:50,950 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-07 21:05:50 - INFO - [llm_engine.py:120] - **************************
2025-04-07 21:05:50,952 [INFO] text2sql.agents.table [table_agent.py:69]: Raw model response: 'customers, orders'
2025-04-07 21:05:50,952 [INFO] text2sql.agents.table [table_agent.py:90]: Table selection completed in 1.69s. Selected: customers, orders
2025-04-07 21:05:50,953 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'get me count of customers by order month'
2025-04-07 21:05:50,954 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: customers, orders
2025-04-07 21:05:50,955 [INFO] text2sql.agents.column [column_agent.py:94]: Sending request to AI model for column selection
2025-04-07 21:05:50,956 [INFO] text2sql.llm_engine [llm_engine.py:56]: [COLUMN] Completion generation started
2025-04-07 21:05:50 - INFO - [llm_engine.py:56] - [COLUMN] Completion generation started
2025-04-07 21:05:51,543 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:05:51] "GET /api/query/progress/9b46dee5-dab4-4e01-af74-37d8c4cc4d34 HTTP/1.1" 200 -
2025-04-07 21:05:52,188 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:05:52] "GET /api/query/progress/9b46dee5-dab4-4e01-af74-37d8c4cc4d34 HTTP/1.1" 200 -
2025-04-07 21:05:55,389 [INFO] text2sql.llm_engine [llm_engine.py:119]: [COLUMN] Completion generation completed in 4.43s
2025-04-07 21:05:55 - INFO - [llm_engine.py:119] - [COLUMN] Completion generation completed in 4.43s
2025-04-07 21:05:55,394 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-07 21:05:55 - INFO - [llm_engine.py:120] - **************************
2025-04-07 21:05:55,397 [INFO] text2sql.agents.column [column_agent.py:99]: Raw model response: '{
  "customers": [
    "customer_id"
  ],
  "orders": [
    "order_id",
    "customer_id",
    "order_date"
  ]
}'
2025-04-07 21:05:55,399 [INFO] text2sql.agents.column [column_agent.py:139]: Parsing column selection from model response
2025-04-07 21:05:55,400 [INFO] text2sql.agents.column [column_agent.py:149]: Parsed column selection JSON: {"customers": ["customer_id"], "orders": ["order_id", "customer_id", "order_date"]}
2025-04-07 21:05:55,402 [INFO] text2sql.agents.column [column_agent.py:111]: Table 'customers': Pruned 10 columns, kept 1/11
2025-04-07 21:05:55,403 [INFO] text2sql.agents.column [column_agent.py:111]: Table 'orders': Pruned 2 columns, kept 3/5
2025-04-07 21:05:55,404 [INFO] text2sql.agents.column [column_agent.py:197]: Building pruned schema
2025-04-07 21:05:55,405 [INFO] text2sql.agents.column [column_agent.py:226]: Built pruned schema (404 chars)
2025-04-07 21:05:55,406 [INFO] text2sql.agents.column [column_agent.py:120]: Column pruning completed in 4.45s
2025-04-07 21:05:55,408 [INFO] text2sql.sql_generator [sql_generator.py:237]: Found 1 join conditions for the relevant tables
2025-04-07 21:05:55,409 [INFO] text2sql.feedback [feedback_manager.py:260]: Stage 1: Vector search for 'get me count of customers by order month...'
2025-04-07 21:05:55 - INFO - [feedback_manager.py:260] - Stage 1: Vector search for 'get me count of customers by order month...'
2025-04-07 21:05:55,411 [INFO] text2sql.feedback [feedback_manager.py:74]: Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-07 21:05:55 - INFO - [feedback_manager.py:74] - Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-07 21:05:55,425 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:05:55] "GET /api/query/progress/9b46dee5-dab4-4e01-af74-37d8c4cc4d34 HTTP/1.1" 200 -
2025-04-07 21:05:56,089 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:05:56] "GET /api/query/progress/9b46dee5-dab4-4e01-af74-37d8c4cc4d34 HTTP/1.1" 200 -
2025-04-07 21:05:57,329 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:05:57] "GET /api/query/progress/9b46dee5-dab4-4e01-af74-37d8c4cc4d34 HTTP/1.1" 200 -
2025-04-07 21:05:57,991 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:05:57] "GET /api/query/progress/9b46dee5-dab4-4e01-af74-37d8c4cc4d34 HTTP/1.1" 200 -
2025-04-07 21:05:59,253 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:05:59] "GET /api/query/progress/9b46dee5-dab4-4e01-af74-37d8c4cc4d34 HTTP/1.1" 200 -
2025-04-07 21:05:59,909 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:05:59] "GET /api/query/progress/9b46dee5-dab4-4e01-af74-37d8c4cc4d34 HTTP/1.1" 200 -
2025-04-07 21:06:01,144 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:06:01] "GET /api/query/progress/9b46dee5-dab4-4e01-af74-37d8c4cc4d34 HTTP/1.1" 200 -
2025-04-07 21:06:01,542 [INFO] text2sql.feedback [feedback_manager.py:77]: Embedding model loaded in 6.13s
2025-04-07 21:06:01 - INFO - [feedback_manager.py:77] - Embedding model loaded in 6.13s
2025-04-07 21:06:01,578 [INFO] text2sql.vector [vector_store.py:38]: Connecting to vector database at ./vector_store.db
2025-04-07 21:06:01 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-07 21:06:01,825 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:06:01] "GET /api/query/progress/9b46dee5-dab4-4e01-af74-37d8c4cc4d34 HTTP/1.1" 200 -
2025-04-07 21:06:02,604 [DEBUG] pymilvus.milvus_client.milvus_client [milvus_client.py:728]: Created new connection using: c93873a86e934fdc9294dcb9ea57ef31
2025-04-07 21:06:02,604 [INFO] text2sql.vector [vector_store.py:42]: Vector database connection established in 1.03s
2025-04-07 21:06:02 - INFO - [vector_store.py:42] - Vector database connection established in 1.03s
2025-04-07 21:06:02,608 [INFO] text2sql.vector [vector_store.py:75]: Collection 'query_embeddings' already exists
2025-04-07 21:06:02 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-07 21:06:02,646 [INFO] text2sql.feedback [feedback_manager.py:284]: Found 3 initial candidates from vector search
2025-04-07 21:06:02 - INFO - [feedback_manager.py:284] - Found 3 initial candidates from vector search
2025-04-07 21:06:02,647 [INFO] text2sql.feedback [feedback_manager.py:288]: Stage 2: Reranking 3 candidates
2025-04-07 21:06:02 - INFO - [feedback_manager.py:288] - Stage 2: Reranking 3 candidates
2025-04-07 21:06:02,648 [INFO] text2sql.feedback [feedback_manager.py:118]: Loading reranking model 'cross-encoder/ms-marco-MiniLM-L-6-v2'
2025-04-07 21:06:02 - INFO - [feedback_manager.py:118] - Loading reranking model 'cross-encoder/ms-marco-MiniLM-L-6-v2'
2025-04-07 21:06:03,047 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:06:03] "GET /api/query/progress/9b46dee5-dab4-4e01-af74-37d8c4cc4d34 HTTP/1.1" 200 -
2025-04-07 21:06:03,705 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:06:03] "GET /api/query/progress/9b46dee5-dab4-4e01-af74-37d8c4cc4d34 HTTP/1.1" 200 -
2025-04-07 21:06:04,923 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:06:04] "GET /api/query/progress/9b46dee5-dab4-4e01-af74-37d8c4cc4d34 HTTP/1.1" 200 -
2025-04-07 21:06:05,540 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:06:05] "GET /api/query/progress/9b46dee5-dab4-4e01-af74-37d8c4cc4d34 HTTP/1.1" 200 -
2025-04-07 21:06:06,728 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:06:06] "GET /api/query/progress/9b46dee5-dab4-4e01-af74-37d8c4cc4d34 HTTP/1.1" 200 -
2025-04-07 21:06:06,729 [INFO] text2sql.feedback [feedback_manager.py:122]: Reranking model loaded in 4.08s
2025-04-07 21:06:06 - INFO - [feedback_manager.py:122] - Reranking model loaded in 4.08s
2025-04-07 21:06:06,788 [WARNING] text2sql.feedback [feedback_manager.py:314]: No candidates with positive reranking scores, returning vector search results
2025-04-07 21:06:06 - WARNING - [feedback_manager.py:314] - No candidates with positive reranking scores, returning vector search results
2025-04-07 21:06:06,789 [INFO] text2sql.sql_generator [sql_generator.py:280]: Found 2 similar queries with reranking
2025-04-07 21:06:06,789 [INFO] text2sql.sql_generator [sql_generator.py:302]: Added similar query #1 from feedback (score: -10.0364): ...
2025-04-07 21:06:06,790 [INFO] text2sql.sql_generator [sql_generator.py:302]: Added similar query #2 from feedback (score: -10.0364): ...
2025-04-07 21:06:06,790 [INFO] text2sql.azure [azure_client.py:35]: SQL generation started for query: 'get me count of customers by order month'
2025-04-07 21:06:06 - INFO - [azure_client.py:35] - SQL generation started for query: 'get me count of customers by order month'
2025-04-07 21:06:06,791 [INFO] text2sql.azure [azure_client.py:69]: Including schema information (404 chars)
2025-04-07 21:06:06 - INFO - [azure_client.py:69] - Including schema information (404 chars)
2025-04-07 21:06:06,792 [INFO] text2sql.azure [azure_client.py:76]: Including 1 join conditions
2025-04-07 21:06:06 - INFO - [azure_client.py:76] - Including 1 join conditions
2025-04-07 21:06:06,793 [INFO] text2sql.azure [azure_client.py:97]: Including 2 SQL examples from feedback similarity search
2025-04-07 21:06:06 - INFO - [azure_client.py:97] - Including 2 SQL examples from feedback similarity search
2025-04-07 21:06:06,794 [INFO] text2sql.azure [azure_client.py:114]: PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER): Unique customer identifier\nPrimary Key(s): customer_id\n\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER): Unique order identifier, customer_id (INTEGER): Reference to customer who placed the order, order_date (TEXT): Date when order was placed\nPrimary Key(s): order_id\n"}, {'role': 'user', 'content': 'Use the following pre-defined join conditions when joining these tables:\n- When joining customers with orders, use: INNER JOIN orders ON customers.customer_id = orders.customer_id\n'}, {'role': 'user', 'content': 'Here are some similar queries that were previously successful:\nQuestion: \nSQL: \n\nQuestion: \nSQL: \n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me count of customers by order month'}]
2025-04-07 21:06:06 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER): Unique customer identifier\nPrimary Key(s): customer_id\n\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER): Unique order identifier, customer_id (INTEGER): Reference to customer who placed the order, order_date (TEXT): Date when order was placed\nPrimary Key(s): order_id\n"}, {'role': 'user', 'content': 'Use the following pre-defined join conditions when joining these tables:\n- When joining customers with orders, use: INNER JOIN orders ON customers.customer_id = orders.customer_id\n'}, {'role': 'user', 'content': 'Here are some similar queries that were previously successful:\nQuestion: \nSQL: \n\nQuestion: \nSQL: \n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me count of customers by order month'}]
2025-04-07 21:06:06,795 [INFO] text2sql.llm_engine [llm_engine.py:56]: [SQL_GEN] Completion generation started
2025-04-07 21:06:06 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-07 21:06:07,338 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:06:07] "GET /api/query/progress/9b46dee5-dab4-4e01-af74-37d8c4cc4d34 HTTP/1.1" 200 -
2025-04-07 21:06:08,520 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:06:08] "GET /api/query/progress/9b46dee5-dab4-4e01-af74-37d8c4cc4d34 HTTP/1.1" 200 -
2025-04-07 21:06:09,146 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:06:09] "GET /api/query/progress/9b46dee5-dab4-4e01-af74-37d8c4cc4d34 HTTP/1.1" 200 -
2025-04-07 21:06:09,999 [INFO] text2sql.llm_engine [llm_engine.py:119]: [SQL_GEN] Completion generation completed in 3.20s
2025-04-07 21:06:09 - INFO - [llm_engine.py:119] - [SQL_GEN] Completion generation completed in 3.20s
2025-04-07 21:06:10,001 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-07 21:06:10 - INFO - [llm_engine.py:120] - **************************
2025-04-07 21:06:10,004 [INFO] text2sql.azure [azure_client.py:150]: Parsing SQL from model response
2025-04-07 21:06:10 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-07 21:06:10,007 [INFO] text2sql.azure [azure_client.py:157]: Found SQL code block in response
2025-04-07 21:06:10 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-07 21:06:10,010 [INFO] text2sql.azure [azure_client.py:171]: Extracted SQL query (239 chars) and explanation (177 chars)
2025-04-07 21:06:10 - INFO - [azure_client.py:171] - Extracted SQL query (239 chars) and explanation (177 chars)
2025-04-07 21:06:10,011 [INFO] text2sql.azure [azure_client.py:124]: Generated SQL: SELECT
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM
    customers c
    INNER JOIN orders o ON c.customer_id = o.customer_id
GROUP BY
    order_month
ORDER BY
    order_month;
2025-04-07 21:06:10 - INFO - [azure_client.py:124] - Generated SQL: SELECT
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM
    customers c
    INNER JOIN orders o ON c.customer_id = o.customer_id
GROUP BY
    order_month
ORDER BY
    order_month;
2025-04-07 21:06:10,015 [INFO] text2sql.azure [azure_client.py:132]: SQL generation completed in 3.22s
2025-04-07 21:06:10 - INFO - [azure_client.py:132] - SQL generation completed in 3.22s
2025-04-07 21:06:10,016 [INFO] text2sql.database [database.py:65]: Executing SQL query: SELECT
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM
    customers c
    INNER JOIN orders o ON c.customer_id = o.customer_id
GROUP BY
    order_month
ORDER BY
    order_month;
2025-04-07 21:06:10 - INFO - [database.py:65] - Executing SQL query: SELECT
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM
    customers c
    INNER JOIN orders o ON c.customer_id = o.customer_id
GROUP BY
    order_month
ORDER BY
    order_month;
2025-04-07 21:06:10,022 [INFO] text2sql.database [database.py:86]: Query returned 2 rows with 2 columns
2025-04-07 21:06:10 - INFO - [database.py:86] - Query returned 2 rows with 2 columns
2025-04-07 21:06:10,026 [INFO] text2sql.database [database.py:95]: Query processing completed in 0.01s
2025-04-07 21:06:10 - INFO - [database.py:95] - Query processing completed in 0.01s
2025-04-07 21:06:10,029 [INFO] text2sql.sql_generator [sql_generator.py:376]: SQL generation completed in 20.78s
2025-04-07 21:06:10,029 [INFO] text2sql.sql_generator [sql_generator.py:125]: Query processing completed in 20.80s
2025-04-07 21:06:10,369 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:06:10] "GET /api/query/progress/9b46dee5-dab4-4e01-af74-37d8c4cc4d34 HTTP/1.1" 200 -
2025-04-07 21:07:16,593 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/utils/vector_store.py', reloading
2025-04-07 21:07:16,593 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/utils/vector_store.py', reloading
2025-04-07 21:07:16,594 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/utils/vector_store.py', reloading
2025-04-07 21:07:17,595 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-07 21:07:17,595 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-07 21:07:17,595 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-07 21:07:17,595 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-07 21:07:17,596 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-07 21:07:17 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-07 21:07:17,596 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-07 21:07:17 - INFO - [database.py:258] - Closing database connection
2025-04-07 21:07:17,596 [INFO] text2sql.feedback [feedback_manager.py:749]: Closing database connections
2025-04-07 21:07:17 - INFO - [feedback_manager.py:749] - Closing database connections
2025-04-07 21:07:17,597 [INFO] text2sql.vector [vector_store.py:288]: Closing vector database connection
2025-04-07 21:07:17 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-07 21:07:18,524 [INFO] werkzeug [_internal.py:224]:  * Restarting with watchdog (inotify)
2025-04-07 21:07:22,210 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 21:07:22,210 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 21:07:22,210 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 21:07:22,210 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 21:07:22,211 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-07 21:07:22,217 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 21:07:22,218 [INFO] text2sql [app.py:67]: Debug logging enabled for SQL generator and agents
2025-04-07 21:07:22 - INFO - [app.py:67] - Debug logging enabled for SQL generator and agents
2025-04-07 21:07:22,219 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:07:22 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:07:22,219 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 21:07:22 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 21:07:22,248 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 21:07:22 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 21:07:22,248 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 21:07:22,249 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 21:07:22,249 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 21:07:22,249 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 21:07:22,249 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:07:22 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:07:22,249 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 21:07:22 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 21:07:22,278 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 21:07:22 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 21:07:22,278 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 21:07:22,278 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 21:07:22,278 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 21:07:22,279 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 21:07:22,279 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:07:22 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:07:22,279 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 21:07:22 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 21:07:22,306 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 21:07:22 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 21:07:22,307 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 21:07:22,307 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 21:07:22,307 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 21:07:22,307 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 21:07:22,307 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-07 21:07:22 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-07 21:07:22,307 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:07:22 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:07:22,307 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 21:07:22 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 21:07:22,334 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 21:07:22 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 21:07:22,334 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-07 21:07:22 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-07 21:07:22,335 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-07 21:07:22 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-07 21:07:22,335 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 21:07:22,335 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 21:07:22,335 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 21:07:22,335 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 21:07:22,335 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 21:07:22 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 21:07:22,358 [WARNING] werkzeug [_internal.py:224]:  * Debugger is active!
2025-04-07 21:07:22,358 [INFO] werkzeug [_internal.py:224]:  * Debugger PIN: 774-546-021
2025-04-07 21:09:10,704 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/utils/feedback_manager.py', reloading
2025-04-07 21:09:10,704 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/utils/feedback_manager.py', reloading
2025-04-07 21:09:10,714 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/utils/feedback_manager.py', reloading
2025-04-07 21:09:11,715 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-07 21:09:11,715 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-07 21:09:11,715 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-07 21:09:11,716 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-07 21:09:11,716 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-07 21:09:11 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-07 21:09:11,716 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-07 21:09:11 - INFO - [database.py:258] - Closing database connection
2025-04-07 21:09:11,716 [INFO] text2sql.feedback [feedback_manager.py:749]: Closing database connections
2025-04-07 21:09:11 - INFO - [feedback_manager.py:749] - Closing database connections
2025-04-07 21:09:11,717 [INFO] text2sql.vector [vector_store.py:288]: Closing vector database connection
2025-04-07 21:09:11 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-07 21:09:12,693 [INFO] werkzeug [_internal.py:224]:  * Restarting with watchdog (inotify)
2025-04-07 21:09:18,390 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 21:09:18,391 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 21:09:18,391 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 21:09:18,391 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 21:09:18,392 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-07 21:09:18,403 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 21:09:18,406 [INFO] text2sql [app.py:67]: Debug logging enabled for SQL generator and agents
2025-04-07 21:09:18 - INFO - [app.py:67] - Debug logging enabled for SQL generator and agents
2025-04-07 21:09:18,409 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:09:18 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:09:18,409 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 21:09:18 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 21:09:18,485 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 21:09:18 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 21:09:18,486 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 21:09:18,486 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 21:09:18,486 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 21:09:18,486 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 21:09:18,487 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:09:18 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:09:18,487 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 21:09:18 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 21:09:18,547 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 21:09:18 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 21:09:18,548 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 21:09:18,548 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 21:09:18,549 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 21:09:18,549 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 21:09:18,550 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:09:18 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:09:18,550 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 21:09:18 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 21:09:18,613 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 21:09:18 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 21:09:18,613 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 21:09:18,614 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 21:09:18,614 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 21:09:18,614 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 21:09:18,615 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-07 21:09:18 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-07 21:09:18,615 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:09:18 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:09:18,615 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 21:09:18 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 21:09:18,680 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 21:09:18 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 21:09:18,680 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-07 21:09:18 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-07 21:09:18,680 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-07 21:09:18 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-07 21:09:18,681 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 21:09:18,681 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 21:09:18,682 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 21:09:18,682 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 21:09:18,682 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 21:09:18 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 21:09:18,737 [WARNING] werkzeug [_internal.py:224]:  * Debugger is active!
2025-04-07 21:09:18,738 [INFO] werkzeug [_internal.py:224]:  * Debugger PIN: 774-546-021
2025-04-07 21:09:31,931 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'get me count of customers by order month'
2025-04-07 21:09:31,932 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:09:31] "POST /api/query HTTP/1.1" 200 -
2025-04-07 21:09:31,932 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'get me count of customers by order month'
2025-04-07 21:09:31,934 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-07 21:09:31,935 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.00s
2025-04-07 21:09:31,935 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-07 21:09:31,936 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-07 21:09:31,939 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-07 21:09:31 - INFO - [database.py:44] - Attempting database connection
2025-04-07 21:09:31,941 [INFO] text2sql.database [database.py:48]: Database connection established in 0.00s
2025-04-07 21:09:31 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-07 21:09:31,942 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'get me count of customers by order month'
2025-04-07 21:09:31,943 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-07 21:09:31,944 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-07 21:09:31,945 [INFO] text2sql.llm_engine [llm_engine.py:56]: [TABLE] Completion generation started
2025-04-07 21:09:31 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-07 21:09:32,719 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:09:32] "GET /api/query/progress/0a810334-be80-4348-9839-c1def8f66f83 HTTP/1.1" 200 -
2025-04-07 21:09:33,489 [INFO] text2sql.llm_engine [llm_engine.py:119]: [TABLE] Completion generation completed in 1.54s
2025-04-07 21:09:33 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 1.54s
2025-04-07 21:09:33,490 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-07 21:09:33 - INFO - [llm_engine.py:120] - **************************
2025-04-07 21:09:33,491 [INFO] text2sql.agents.table [table_agent.py:69]: Raw model response: 'orders, customers'
2025-04-07 21:09:33,492 [INFO] text2sql.agents.table [table_agent.py:90]: Table selection completed in 1.55s. Selected: orders, customers
2025-04-07 21:09:33,492 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'get me count of customers by order month'
2025-04-07 21:09:33,492 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: orders, customers
2025-04-07 21:09:33,493 [INFO] text2sql.agents.column [column_agent.py:94]: Sending request to AI model for column selection
2025-04-07 21:09:33,494 [INFO] text2sql.llm_engine [llm_engine.py:56]: [COLUMN] Completion generation started
2025-04-07 21:09:33 - INFO - [llm_engine.py:56] - [COLUMN] Completion generation started
2025-04-07 21:09:33,919 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:09:33] "GET /api/query/progress/0a810334-be80-4348-9839-c1def8f66f83 HTTP/1.1" 200 -
2025-04-07 21:09:34,563 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:09:34] "GET /api/query/progress/0a810334-be80-4348-9839-c1def8f66f83 HTTP/1.1" 200 -
2025-04-07 21:09:34,631 [INFO] text2sql.llm_engine [llm_engine.py:119]: [COLUMN] Completion generation completed in 1.14s
2025-04-07 21:09:34 - INFO - [llm_engine.py:119] - [COLUMN] Completion generation completed in 1.14s
2025-04-07 21:09:34,633 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-07 21:09:34 - INFO - [llm_engine.py:120] - **************************
2025-04-07 21:09:34,635 [INFO] text2sql.agents.column [column_agent.py:99]: Raw model response: '{
  "orders": ["order_id", "customer_id", "order_date"],
  "customers": ["customer_id"]
}'
2025-04-07 21:09:34,637 [INFO] text2sql.agents.column [column_agent.py:139]: Parsing column selection from model response
2025-04-07 21:09:34,638 [INFO] text2sql.agents.column [column_agent.py:149]: Parsed column selection JSON: {"orders": ["order_id", "customer_id", "order_date"], "customers": ["customer_id"]}
2025-04-07 21:09:34,638 [INFO] text2sql.agents.column [column_agent.py:111]: Table 'orders': Pruned 2 columns, kept 3/5
2025-04-07 21:09:34,639 [INFO] text2sql.agents.column [column_agent.py:111]: Table 'customers': Pruned 10 columns, kept 1/11
2025-04-07 21:09:34,640 [INFO] text2sql.agents.column [column_agent.py:197]: Building pruned schema
2025-04-07 21:09:34,641 [INFO] text2sql.agents.column [column_agent.py:226]: Built pruned schema (404 chars)
2025-04-07 21:09:34,642 [INFO] text2sql.agents.column [column_agent.py:120]: Column pruning completed in 1.15s
2025-04-07 21:09:34,642 [INFO] text2sql.sql_generator [sql_generator.py:237]: Found 1 join conditions for the relevant tables
2025-04-07 21:09:34,643 [INFO] text2sql.feedback [feedback_manager.py:260]: Stage 1: Vector search for 'get me count of customers by order month...'
2025-04-07 21:09:34 - INFO - [feedback_manager.py:260] - Stage 1: Vector search for 'get me count of customers by order month...'
2025-04-07 21:09:34,645 [INFO] text2sql.feedback [feedback_manager.py:74]: Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-07 21:09:34 - INFO - [feedback_manager.py:74] - Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-07 21:09:35,766 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:09:35] "GET /api/query/progress/0a810334-be80-4348-9839-c1def8f66f83 HTTP/1.1" 200 -
2025-04-07 21:09:36,375 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:09:36] "GET /api/query/progress/0a810334-be80-4348-9839-c1def8f66f83 HTTP/1.1" 200 -
2025-04-07 21:09:37,569 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:09:37] "GET /api/query/progress/0a810334-be80-4348-9839-c1def8f66f83 HTTP/1.1" 200 -
2025-04-07 21:09:38,193 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:09:38] "GET /api/query/progress/0a810334-be80-4348-9839-c1def8f66f83 HTTP/1.1" 200 -
2025-04-07 21:09:39,388 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:09:39] "GET /api/query/progress/0a810334-be80-4348-9839-c1def8f66f83 HTTP/1.1" 200 -
2025-04-07 21:09:39,993 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:09:39] "GET /api/query/progress/0a810334-be80-4348-9839-c1def8f66f83 HTTP/1.1" 200 -
2025-04-07 21:09:41,174 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:09:41] "GET /api/query/progress/0a810334-be80-4348-9839-c1def8f66f83 HTTP/1.1" 200 -
2025-04-07 21:09:41,791 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:09:41] "GET /api/query/progress/0a810334-be80-4348-9839-c1def8f66f83 HTTP/1.1" 200 -
2025-04-07 21:09:42,727 [INFO] text2sql.feedback [feedback_manager.py:77]: Embedding model loaded in 8.08s
2025-04-07 21:09:42 - INFO - [feedback_manager.py:77] - Embedding model loaded in 8.08s
2025-04-07 21:09:42,755 [INFO] text2sql.vector [vector_store.py:38]: Connecting to vector database at ./vector_store.db
2025-04-07 21:09:42 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-07 21:09:42,981 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:09:42] "GET /api/query/progress/0a810334-be80-4348-9839-c1def8f66f83 HTTP/1.1" 200 -
2025-04-07 21:09:43,599 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:09:43] "GET /api/query/progress/0a810334-be80-4348-9839-c1def8f66f83 HTTP/1.1" 200 -
2025-04-07 21:09:43,773 [DEBUG] pymilvus.milvus_client.milvus_client [milvus_client.py:728]: Created new connection using: 440cf44cc0644ebcbe45afe3a34a23fc
2025-04-07 21:09:43,773 [INFO] text2sql.vector [vector_store.py:42]: Vector database connection established in 1.02s
2025-04-07 21:09:43 - INFO - [vector_store.py:42] - Vector database connection established in 1.02s
2025-04-07 21:09:43,775 [INFO] text2sql.vector [vector_store.py:75]: Collection 'query_embeddings' already exists
2025-04-07 21:09:43 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-07 21:09:43,823 [INFO] text2sql.feedback [feedback_manager.py:285]: Found 2 initial candidates from vector search
2025-04-07 21:09:43 - INFO - [feedback_manager.py:285] - Found 2 initial candidates from vector search
2025-04-07 21:09:43,824 [INFO] text2sql.feedback [feedback_manager.py:327]: Less than 3 candidates, skipping reranking
2025-04-07 21:09:43 - INFO - [feedback_manager.py:327] - Less than 3 candidates, skipping reranking
2025-04-07 21:09:43,825 [INFO] text2sql.sql_generator [sql_generator.py:280]: Found 2 similar queries with reranking
2025-04-07 21:09:43,825 [ERROR] text2sql [background_tasks.py:62]: Exception while processing query: Unknown format code 'f' for object of type 'str'
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/background_tasks.py", line 39, in process_in_background
    result = self.sql_manager.process_query(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/text2sql/src/models/sql_generator.py", line 71, in process_query
    sql_result = self._generate_sql(query, workspaces, explicit_tables, progress_callback)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/text2sql/src/models/sql_generator.py", line 300, in _generate_sql
    "score": f"{rerank_score:.4f}"  # Add the reranker score for logging
             ^^^^^^^^^^^^^^^^^^^^^
ValueError: Unknown format code 'f' for object of type 'str'
2025-04-07 21:09:43 - ERROR - [background_tasks.py:62] - Exception while processing query: Unknown format code 'f' for object of type 'str'
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/background_tasks.py", line 39, in process_in_background
    result = self.sql_manager.process_query(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/text2sql/src/models/sql_generator.py", line 71, in process_query
    sql_result = self._generate_sql(query, workspaces, explicit_tables, progress_callback)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/text2sql/src/models/sql_generator.py", line 300, in _generate_sql
    "score": f"{rerank_score:.4f}"  # Add the reranker score for logging
             ^^^^^^^^^^^^^^^^^^^^^
ValueError: Unknown format code 'f' for object of type 'str'
2025-04-07 21:09:44,769 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:09:44] "GET /api/query/progress/0a810334-be80-4348-9839-c1def8f66f83 HTTP/1.1" 200 -
2025-04-07 21:10:56,677 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/utils/feedback_manager.py', reloading
2025-04-07 21:10:56,679 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/utils/feedback_manager.py', reloading
2025-04-07 21:10:56,681 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/utils/feedback_manager.py', reloading
2025-04-07 21:10:57,683 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-07 21:10:57,683 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-07 21:10:57,683 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-07 21:10:57,683 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-07 21:10:57,684 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-07 21:10:57 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-07 21:10:57,684 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-07 21:10:57 - INFO - [database.py:258] - Closing database connection
2025-04-07 21:10:57,684 [INFO] text2sql.feedback [feedback_manager.py:750]: Closing database connections
2025-04-07 21:10:57 - INFO - [feedback_manager.py:750] - Closing database connections
2025-04-07 21:10:57,685 [INFO] text2sql.vector [vector_store.py:288]: Closing vector database connection
2025-04-07 21:10:57 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-07 21:10:58,873 [INFO] werkzeug [_internal.py:224]:  * Restarting with watchdog (inotify)
2025-04-07 21:11:07,569 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 21:11:07,569 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 21:11:07,569 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 21:11:07,570 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 21:11:07,570 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-07 21:11:07,581 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 21:11:07,583 [INFO] text2sql [app.py:67]: Debug logging enabled for SQL generator and agents
2025-04-07 21:11:07 - INFO - [app.py:67] - Debug logging enabled for SQL generator and agents
2025-04-07 21:11:07,585 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:11:07 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:11:07,585 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 21:11:07 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 21:11:07,637 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 21:11:07 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 21:11:07,638 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 21:11:07,638 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 21:11:07,638 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 21:11:07,639 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 21:11:07,639 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:11:07 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:11:07,639 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 21:11:07 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 21:11:07,685 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 21:11:07 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 21:11:07,685 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 21:11:07,686 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 21:11:07,686 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 21:11:07,686 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 21:11:07,686 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:11:07 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:11:07,687 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 21:11:07 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 21:11:07,778 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 21:11:07 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 21:11:07,778 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 21:11:07,779 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 21:11:07,779 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 21:11:07,779 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 21:11:07,780 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-07 21:11:07 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-07 21:11:07,780 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:11:07 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:11:07,781 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 21:11:07 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 21:11:07,859 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 21:11:07 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 21:11:07,860 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-07 21:11:07 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-07 21:11:07,860 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-07 21:11:07 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-07 21:11:07,860 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 21:11:07,861 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 21:11:07,861 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 21:11:07,861 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 21:11:07,861 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 21:11:07 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 21:11:07,901 [WARNING] werkzeug [_internal.py:224]:  * Debugger is active!
2025-04-07 21:11:07,902 [INFO] werkzeug [_internal.py:224]:  * Debugger PIN: 774-546-021
2025-04-07 21:11:22,928 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/utils/feedback_manager.py', reloading
2025-04-07 21:11:22,929 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/utils/feedback_manager.py', reloading
2025-04-07 21:11:22,940 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/utils/feedback_manager.py', reloading
2025-04-07 21:11:23,941 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-07 21:11:23,941 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-07 21:11:23,942 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-07 21:11:23,942 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-07 21:11:23,942 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-07 21:11:23 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-07 21:11:23,942 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-07 21:11:23 - INFO - [database.py:258] - Closing database connection
2025-04-07 21:11:23,943 [INFO] text2sql.feedback [feedback_manager.py:750]: Closing database connections
2025-04-07 21:11:23 - INFO - [feedback_manager.py:750] - Closing database connections
2025-04-07 21:11:23,943 [INFO] text2sql.vector [vector_store.py:288]: Closing vector database connection
2025-04-07 21:11:23 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-07 21:11:24,920 [INFO] werkzeug [_internal.py:224]:  * Restarting with watchdog (inotify)
2025-04-07 21:11:29,390 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 21:11:29,391 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 21:11:29,391 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 21:11:29,391 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 21:11:29,392 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-07 21:11:29,401 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 21:11:29,402 [INFO] text2sql [app.py:67]: Debug logging enabled for SQL generator and agents
2025-04-07 21:11:29 - INFO - [app.py:67] - Debug logging enabled for SQL generator and agents
2025-04-07 21:11:29,405 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:11:29 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:11:29,409 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 21:11:29 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 21:11:29,514 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 21:11:29 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 21:11:29,516 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 21:11:29,517 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 21:11:29,517 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 21:11:29,517 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 21:11:29,517 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:11:29 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:11:29,518 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 21:11:29 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 21:11:29,587 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 21:11:29 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 21:11:29,587 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 21:11:29,588 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 21:11:29,588 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 21:11:29,588 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 21:11:29,588 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:11:29 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:11:29,589 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 21:11:29 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 21:11:29,643 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 21:11:29 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 21:11:29,643 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 21:11:29,644 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 21:11:29,644 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 21:11:29,644 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 21:11:29,644 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-07 21:11:29 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-07 21:11:29,645 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:11:29 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:11:29,645 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 21:11:29 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 21:11:29,703 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 21:11:29 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 21:11:29,703 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-07 21:11:29 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-07 21:11:29,704 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-07 21:11:29 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-07 21:11:29,704 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 21:11:29,704 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 21:11:29,704 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 21:11:29,705 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 21:11:29,705 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 21:11:29 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 21:11:29,749 [WARNING] werkzeug [_internal.py:224]:  * Debugger is active!
2025-04-07 21:11:29,750 [INFO] werkzeug [_internal.py:224]:  * Debugger PIN: 774-546-021
2025-04-07 21:11:40,041 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'get me count of customers by order month'
2025-04-07 21:11:40,042 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:11:40] "POST /api/query HTTP/1.1" 200 -
2025-04-07 21:11:40,042 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'get me count of customers by order month'
2025-04-07 21:11:40,044 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-07 21:11:40,044 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.00s
2025-04-07 21:11:40,045 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-07 21:11:40,046 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-07 21:11:40,047 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-07 21:11:40 - INFO - [database.py:44] - Attempting database connection
2025-04-07 21:11:40,049 [INFO] text2sql.database [database.py:48]: Database connection established in 0.00s
2025-04-07 21:11:40 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-07 21:11:40,050 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'get me count of customers by order month'
2025-04-07 21:11:40,051 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-07 21:11:40,052 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-07 21:11:40,052 [INFO] text2sql.llm_engine [llm_engine.py:56]: [TABLE] Completion generation started
2025-04-07 21:11:40 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-07 21:11:41,048 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:11:41] "GET /api/query/progress/50911dd8-d07c-4d90-9310-1dab8476ff09 HTTP/1.1" 200 -
2025-04-07 21:11:41,805 [INFO] text2sql.llm_engine [llm_engine.py:119]: [TABLE] Completion generation completed in 1.75s
2025-04-07 21:11:41 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 1.75s
2025-04-07 21:11:41,808 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-07 21:11:41 - INFO - [llm_engine.py:120] - **************************
2025-04-07 21:11:41,811 [INFO] text2sql.agents.table [table_agent.py:69]: Raw model response: 'customers, orders'
2025-04-07 21:11:41,812 [INFO] text2sql.agents.table [table_agent.py:90]: Table selection completed in 1.76s. Selected: customers, orders
2025-04-07 21:11:41,813 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'get me count of customers by order month'
2025-04-07 21:11:41,815 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: customers, orders
2025-04-07 21:11:41,816 [INFO] text2sql.agents.column [column_agent.py:94]: Sending request to AI model for column selection
2025-04-07 21:11:41,817 [INFO] text2sql.llm_engine [llm_engine.py:56]: [COLUMN] Completion generation started
2025-04-07 21:11:41 - INFO - [llm_engine.py:56] - [COLUMN] Completion generation started
2025-04-07 21:11:42,334 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:11:42] "GET /api/query/progress/50911dd8-d07c-4d90-9310-1dab8476ff09 HTTP/1.1" 200 -
2025-04-07 21:11:42,991 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:11:42] "GET /api/query/progress/50911dd8-d07c-4d90-9310-1dab8476ff09 HTTP/1.1" 200 -
2025-04-07 21:11:43,950 [INFO] text2sql.llm_engine [llm_engine.py:119]: [COLUMN] Completion generation completed in 2.13s
2025-04-07 21:11:43 - INFO - [llm_engine.py:119] - [COLUMN] Completion generation completed in 2.13s
2025-04-07 21:11:43,951 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-07 21:11:43 - INFO - [llm_engine.py:120] - **************************
2025-04-07 21:11:43,952 [INFO] text2sql.agents.column [column_agent.py:99]: Raw model response: '{
  "customers": ["customer_id"],
  "orders": ["order_id", "customer_id", "order_date"]
}'
2025-04-07 21:11:43,953 [INFO] text2sql.agents.column [column_agent.py:139]: Parsing column selection from model response
2025-04-07 21:11:43,953 [INFO] text2sql.agents.column [column_agent.py:149]: Parsed column selection JSON: {"customers": ["customer_id"], "orders": ["order_id", "customer_id", "order_date"]}
2025-04-07 21:11:43,954 [INFO] text2sql.agents.column [column_agent.py:111]: Table 'customers': Pruned 10 columns, kept 1/11
2025-04-07 21:11:43,955 [INFO] text2sql.agents.column [column_agent.py:111]: Table 'orders': Pruned 2 columns, kept 3/5
2025-04-07 21:11:43,955 [INFO] text2sql.agents.column [column_agent.py:197]: Building pruned schema
2025-04-07 21:11:43,956 [INFO] text2sql.agents.column [column_agent.py:226]: Built pruned schema (404 chars)
2025-04-07 21:11:43,956 [INFO] text2sql.agents.column [column_agent.py:120]: Column pruning completed in 2.14s
2025-04-07 21:11:43,957 [INFO] text2sql.sql_generator [sql_generator.py:237]: Found 1 join conditions for the relevant tables
2025-04-07 21:11:43,958 [INFO] text2sql.feedback [feedback_manager.py:260]: Stage 1: Vector search for 'get me count of customers by order month...'
2025-04-07 21:11:43 - INFO - [feedback_manager.py:260] - Stage 1: Vector search for 'get me count of customers by order month...'
2025-04-07 21:11:43,958 [INFO] text2sql.feedback [feedback_manager.py:74]: Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-07 21:11:43 - INFO - [feedback_manager.py:74] - Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-07 21:11:44,241 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:11:44] "GET /api/query/progress/50911dd8-d07c-4d90-9310-1dab8476ff09 HTTP/1.1" 200 -
2025-04-07 21:11:44,915 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:11:44] "GET /api/query/progress/50911dd8-d07c-4d90-9310-1dab8476ff09 HTTP/1.1" 200 -
2025-04-07 21:11:46,134 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:11:46] "GET /api/query/progress/50911dd8-d07c-4d90-9310-1dab8476ff09 HTTP/1.1" 200 -
2025-04-07 21:11:46,747 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:11:46] "GET /api/query/progress/50911dd8-d07c-4d90-9310-1dab8476ff09 HTTP/1.1" 200 -
2025-04-07 21:11:47,922 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:11:47] "GET /api/query/progress/50911dd8-d07c-4d90-9310-1dab8476ff09 HTTP/1.1" 200 -
2025-04-07 21:11:48,557 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:11:48] "GET /api/query/progress/50911dd8-d07c-4d90-9310-1dab8476ff09 HTTP/1.1" 200 -
2025-04-07 21:11:49,723 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:11:49] "GET /api/query/progress/50911dd8-d07c-4d90-9310-1dab8476ff09 HTTP/1.1" 200 -
2025-04-07 21:11:50,338 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:11:50] "GET /api/query/progress/50911dd8-d07c-4d90-9310-1dab8476ff09 HTTP/1.1" 200 -
2025-04-07 21:11:51,524 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:11:51] "GET /api/query/progress/50911dd8-d07c-4d90-9310-1dab8476ff09 HTTP/1.1" 200 -
2025-04-07 21:11:52,142 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:11:52] "GET /api/query/progress/50911dd8-d07c-4d90-9310-1dab8476ff09 HTTP/1.1" 200 -
2025-04-07 21:11:53,317 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:11:53] "GET /api/query/progress/50911dd8-d07c-4d90-9310-1dab8476ff09 HTTP/1.1" 200 -
2025-04-07 21:11:53,946 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:11:53] "GET /api/query/progress/50911dd8-d07c-4d90-9310-1dab8476ff09 HTTP/1.1" 200 -
2025-04-07 21:11:55,132 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:11:55] "GET /api/query/progress/50911dd8-d07c-4d90-9310-1dab8476ff09 HTTP/1.1" 200 -
2025-04-07 21:11:55,754 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:11:55] "GET /api/query/progress/50911dd8-d07c-4d90-9310-1dab8476ff09 HTTP/1.1" 200 -
2025-04-07 21:11:56,732 [INFO] text2sql.feedback [feedback_manager.py:77]: Embedding model loaded in 12.77s
2025-04-07 21:11:56 - INFO - [feedback_manager.py:77] - Embedding model loaded in 12.77s
2025-04-07 21:11:56,760 [INFO] text2sql.vector [vector_store.py:38]: Connecting to vector database at ./vector_store.db
2025-04-07 21:11:56 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-07 21:11:56,913 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:11:56] "GET /api/query/progress/50911dd8-d07c-4d90-9310-1dab8476ff09 HTTP/1.1" 200 -
2025-04-07 21:11:57,555 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:11:57] "GET /api/query/progress/50911dd8-d07c-4d90-9310-1dab8476ff09 HTTP/1.1" 200 -
2025-04-07 21:11:57,784 [DEBUG] pymilvus.milvus_client.milvus_client [milvus_client.py:728]: Created new connection using: 5096b5d5979f4881a0fcdd4ac3e671ad
2025-04-07 21:11:57,784 [INFO] text2sql.vector [vector_store.py:42]: Vector database connection established in 1.02s
2025-04-07 21:11:57 - INFO - [vector_store.py:42] - Vector database connection established in 1.02s
2025-04-07 21:11:57,788 [INFO] text2sql.vector [vector_store.py:75]: Collection 'query_embeddings' already exists
2025-04-07 21:11:57 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-07 21:11:57,830 [INFO] text2sql.feedback [feedback_manager.py:285]: Found 2 initial candidates from vector search
2025-04-07 21:11:57 - INFO - [feedback_manager.py:285] - Found 2 initial candidates from vector search
2025-04-07 21:11:57,831 [INFO] text2sql.feedback [feedback_manager.py:327]: Less than 3 candidates, skipping reranking
2025-04-07 21:11:57 - INFO - [feedback_manager.py:327] - Less than 3 candidates, skipping reranking
2025-04-07 21:11:57,832 [INFO] text2sql.sql_generator [sql_generator.py:280]: Found 2 similar queries with reranking
2025-04-07 21:11:57,832 [ERROR] text2sql [background_tasks.py:62]: Exception while processing query: Unknown format code 'f' for object of type 'str'
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/background_tasks.py", line 39, in process_in_background
    result = self.sql_manager.process_query(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/text2sql/src/models/sql_generator.py", line 71, in process_query
    sql_result = self._generate_sql(query, workspaces, explicit_tables, progress_callback)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/text2sql/src/models/sql_generator.py", line 300, in _generate_sql
    "score": f"{rerank_score:.4f}"  # Add the reranker score for logging
             ^^^^^^^^^^^^^^^^^^^^^
ValueError: Unknown format code 'f' for object of type 'str'
2025-04-07 21:11:57 - ERROR - [background_tasks.py:62] - Exception while processing query: Unknown format code 'f' for object of type 'str'
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/background_tasks.py", line 39, in process_in_background
    result = self.sql_manager.process_query(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/text2sql/src/models/sql_generator.py", line 71, in process_query
    sql_result = self._generate_sql(query, workspaces, explicit_tables, progress_callback)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/text2sql/src/models/sql_generator.py", line 300, in _generate_sql
    "score": f"{rerank_score:.4f}"  # Add the reranker score for logging
             ^^^^^^^^^^^^^^^^^^^^^
ValueError: Unknown format code 'f' for object of type 'str'
2025-04-07 21:11:58,744 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:11:58] "GET /api/query/progress/50911dd8-d07c-4d90-9310-1dab8476ff09 HTTP/1.1" 200 -
2025-04-07 21:12:35,011 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/models/sql_generator.py', reloading
2025-04-07 21:12:35,012 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/models/sql_generator.py', reloading
2025-04-07 21:12:35,014 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/models/sql_generator.py', reloading
2025-04-07 21:12:36,015 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-07 21:12:36,015 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-07 21:12:36,015 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-07 21:12:36,016 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-07 21:12:36,016 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-07 21:12:36 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-07 21:12:36,016 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-07 21:12:36 - INFO - [database.py:258] - Closing database connection
2025-04-07 21:12:36,017 [INFO] text2sql.feedback [feedback_manager.py:750]: Closing database connections
2025-04-07 21:12:36 - INFO - [feedback_manager.py:750] - Closing database connections
2025-04-07 21:12:36,018 [INFO] text2sql.vector [vector_store.py:288]: Closing vector database connection
2025-04-07 21:12:36 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-07 21:12:37,195 [INFO] werkzeug [_internal.py:224]:  * Restarting with watchdog (inotify)
2025-04-07 21:12:42,147 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 21:12:42,147 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 21:12:42,147 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 21:12:42,148 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 21:12:42,148 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-07 21:12:42,154 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 21:12:42,155 [INFO] text2sql [app.py:67]: Debug logging enabled for SQL generator and agents
2025-04-07 21:12:42 - INFO - [app.py:67] - Debug logging enabled for SQL generator and agents
2025-04-07 21:12:42,157 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:12:42 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:12:42,158 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 21:12:42 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 21:12:42,194 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 21:12:42 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 21:12:42,194 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 21:12:42,194 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 21:12:42,194 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 21:12:42,194 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 21:12:42,194 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:12:42 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:12:42,195 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 21:12:42 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 21:12:42,231 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 21:12:42 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 21:12:42,231 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 21:12:42,232 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 21:12:42,232 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 21:12:42,232 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 21:12:42,232 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:12:42 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:12:42,232 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 21:12:42 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 21:12:42,266 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 21:12:42 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 21:12:42,266 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 21:12:42,266 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 21:12:42,267 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 21:12:42,267 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 21:12:42,267 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-07 21:12:42 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-07 21:12:42,267 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:12:42 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 21:12:42,267 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 21:12:42 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 21:12:42,301 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 21:12:42 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 21:12:42,302 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-07 21:12:42 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-07 21:12:42,302 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-07 21:12:42 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-07 21:12:42,302 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 21:12:42,303 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 21:12:42,303 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 21:12:42,303 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 21:12:42,303 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 21:12:42 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 21:12:42,333 [WARNING] werkzeug [_internal.py:224]:  * Debugger is active!
2025-04-07 21:12:42,334 [INFO] werkzeug [_internal.py:224]:  * Debugger PIN: 774-546-021
2025-04-07 21:13:56,107 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'get me count of customers by order month'
2025-04-07 21:13:56,108 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'get me count of customers by order month'
2025-04-07 21:13:56,110 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:13:56] "POST /api/query HTTP/1.1" 200 -
2025-04-07 21:13:56,110 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-07 21:13:56,112 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.00s
2025-04-07 21:13:56,113 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-07 21:13:56,113 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-07 21:13:56,115 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-07 21:13:56 - INFO - [database.py:44] - Attempting database connection
2025-04-07 21:13:56,116 [INFO] text2sql.database [database.py:48]: Database connection established in 0.00s
2025-04-07 21:13:56 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-07 21:13:56,117 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'get me count of customers by order month'
2025-04-07 21:13:56,118 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-07 21:13:56,118 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-07 21:13:56,119 [INFO] text2sql.llm_engine [llm_engine.py:56]: [TABLE] Completion generation started
2025-04-07 21:13:56 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-07 21:13:56,593 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:13:56] "GET /api/query/progress/3ee0bcb7-3fc3-4a28-b138-565c8fe01a9c HTTP/1.1" 200 -
2025-04-07 21:13:57,366 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:13:57] "GET /api/query/progress/3ee0bcb7-3fc3-4a28-b138-565c8fe01a9c HTTP/1.1" 200 -
2025-04-07 21:13:57,999 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:13:57] "GET /api/query/progress/3ee0bcb7-3fc3-4a28-b138-565c8fe01a9c HTTP/1.1" 200 -
2025-04-07 21:13:58,041 [INFO] text2sql.llm_engine [llm_engine.py:119]: [TABLE] Completion generation completed in 1.92s
2025-04-07 21:13:58 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 1.92s
2025-04-07 21:13:58,042 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-07 21:13:58 - INFO - [llm_engine.py:120] - **************************
2025-04-07 21:13:58,043 [INFO] text2sql.agents.table [table_agent.py:69]: Raw model response: 'customers, orders'
2025-04-07 21:13:58,043 [INFO] text2sql.agents.table [table_agent.py:90]: Table selection completed in 1.93s. Selected: customers, orders
2025-04-07 21:13:58,044 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'get me count of customers by order month'
2025-04-07 21:13:58,044 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: customers, orders
2025-04-07 21:13:58,045 [INFO] text2sql.agents.column [column_agent.py:94]: Sending request to AI model for column selection
2025-04-07 21:13:58,045 [INFO] text2sql.llm_engine [llm_engine.py:56]: [COLUMN] Completion generation started
2025-04-07 21:13:58 - INFO - [llm_engine.py:56] - [COLUMN] Completion generation started
2025-04-07 21:13:59,169 [INFO] text2sql.llm_engine [llm_engine.py:119]: [COLUMN] Completion generation completed in 1.12s
2025-04-07 21:13:59 - INFO - [llm_engine.py:119] - [COLUMN] Completion generation completed in 1.12s
2025-04-07 21:13:59,170 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-07 21:13:59 - INFO - [llm_engine.py:120] - **************************
2025-04-07 21:13:59,172 [INFO] text2sql.agents.column [column_agent.py:99]: Raw model response: '{
  "customers": [
    "customer_id"
  ],
  "orders": [
    "order_id",
    "customer_id",
    "order_date"
  ]
}'
2025-04-07 21:13:59,173 [INFO] text2sql.agents.column [column_agent.py:139]: Parsing column selection from model response
2025-04-07 21:13:59,174 [INFO] text2sql.agents.column [column_agent.py:149]: Parsed column selection JSON: {"customers": ["customer_id"], "orders": ["order_id", "customer_id", "order_date"]}
2025-04-07 21:13:59,174 [INFO] text2sql.agents.column [column_agent.py:111]: Table 'customers': Pruned 10 columns, kept 1/11
2025-04-07 21:13:59,175 [INFO] text2sql.agents.column [column_agent.py:111]: Table 'orders': Pruned 2 columns, kept 3/5
2025-04-07 21:13:59,176 [INFO] text2sql.agents.column [column_agent.py:197]: Building pruned schema
2025-04-07 21:13:59,176 [INFO] text2sql.agents.column [column_agent.py:226]: Built pruned schema (404 chars)
2025-04-07 21:13:59,177 [INFO] text2sql.agents.column [column_agent.py:120]: Column pruning completed in 1.13s
2025-04-07 21:13:59,178 [INFO] text2sql.sql_generator [sql_generator.py:237]: Found 1 join conditions for the relevant tables
2025-04-07 21:13:59,179 [INFO] text2sql.feedback [feedback_manager.py:260]: Stage 1: Vector search for 'get me count of customers by order month...'
2025-04-07 21:13:59 - INFO - [feedback_manager.py:260] - Stage 1: Vector search for 'get me count of customers by order month...'
2025-04-07 21:13:59,180 [INFO] text2sql.feedback [feedback_manager.py:74]: Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-07 21:13:59 - INFO - [feedback_manager.py:74] - Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-07 21:13:59,239 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:13:59] "GET /api/query/progress/3ee0bcb7-3fc3-4a28-b138-565c8fe01a9c HTTP/1.1" 200 -
2025-04-07 21:13:59,895 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:13:59] "GET /api/query/progress/3ee0bcb7-3fc3-4a28-b138-565c8fe01a9c HTTP/1.1" 200 -
2025-04-07 21:14:01,126 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:14:01] "GET /api/query/progress/3ee0bcb7-3fc3-4a28-b138-565c8fe01a9c HTTP/1.1" 200 -
2025-04-07 21:14:01,766 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:14:01] "GET /api/query/progress/3ee0bcb7-3fc3-4a28-b138-565c8fe01a9c HTTP/1.1" 200 -
2025-04-07 21:14:03,010 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:14:03] "GET /api/query/progress/3ee0bcb7-3fc3-4a28-b138-565c8fe01a9c HTTP/1.1" 200 -
2025-04-07 21:14:03,660 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:14:03] "GET /api/query/progress/3ee0bcb7-3fc3-4a28-b138-565c8fe01a9c HTTP/1.1" 200 -
2025-04-07 21:14:04,905 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:14:04] "GET /api/query/progress/3ee0bcb7-3fc3-4a28-b138-565c8fe01a9c HTTP/1.1" 200 -
2025-04-07 21:14:05,543 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:14:05] "GET /api/query/progress/3ee0bcb7-3fc3-4a28-b138-565c8fe01a9c HTTP/1.1" 200 -
2025-04-07 21:14:06,794 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:14:06] "GET /api/query/progress/3ee0bcb7-3fc3-4a28-b138-565c8fe01a9c HTTP/1.1" 200 -
2025-04-07 21:14:07,435 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:14:07] "GET /api/query/progress/3ee0bcb7-3fc3-4a28-b138-565c8fe01a9c HTTP/1.1" 200 -
2025-04-07 21:14:08,675 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:14:08] "GET /api/query/progress/3ee0bcb7-3fc3-4a28-b138-565c8fe01a9c HTTP/1.1" 200 -
2025-04-07 21:14:09,327 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:14:09] "GET /api/query/progress/3ee0bcb7-3fc3-4a28-b138-565c8fe01a9c HTTP/1.1" 200 -
2025-04-07 21:14:10,561 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:14:10] "GET /api/query/progress/3ee0bcb7-3fc3-4a28-b138-565c8fe01a9c HTTP/1.1" 200 -
2025-04-07 21:14:10,902 [INFO] text2sql.feedback [feedback_manager.py:77]: Embedding model loaded in 11.72s
2025-04-07 21:14:10 - INFO - [feedback_manager.py:77] - Embedding model loaded in 11.72s
2025-04-07 21:14:10,935 [INFO] text2sql.vector [vector_store.py:38]: Connecting to vector database at ./vector_store.db
2025-04-07 21:14:10 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-07 21:14:11,209 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:14:11] "GET /api/query/progress/3ee0bcb7-3fc3-4a28-b138-565c8fe01a9c HTTP/1.1" 200 -
2025-04-07 21:14:11,956 [DEBUG] pymilvus.milvus_client.milvus_client [milvus_client.py:728]: Created new connection using: 6bb3fe71274d4851b622112218edac72
2025-04-07 21:14:11,957 [INFO] text2sql.vector [vector_store.py:42]: Vector database connection established in 1.02s
2025-04-07 21:14:11 - INFO - [vector_store.py:42] - Vector database connection established in 1.02s
2025-04-07 21:14:11,961 [INFO] text2sql.vector [vector_store.py:75]: Collection 'query_embeddings' already exists
2025-04-07 21:14:11 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-07 21:14:12,030 [INFO] text2sql.feedback [feedback_manager.py:285]: Found 2 initial candidates from vector search
2025-04-07 21:14:12 - INFO - [feedback_manager.py:285] - Found 2 initial candidates from vector search
2025-04-07 21:14:12,031 [INFO] text2sql.feedback [feedback_manager.py:289]: Stage 2: Reranking 2 candidates
2025-04-07 21:14:12 - INFO - [feedback_manager.py:289] - Stage 2: Reranking 2 candidates
2025-04-07 21:14:12,033 [INFO] text2sql.feedback [feedback_manager.py:118]: Loading reranking model 'cross-encoder/ms-marco-MiniLM-L-6-v2'
2025-04-07 21:14:12 - INFO - [feedback_manager.py:118] - Loading reranking model 'cross-encoder/ms-marco-MiniLM-L-6-v2'
2025-04-07 21:14:12,440 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:14:12] "GET /api/query/progress/3ee0bcb7-3fc3-4a28-b138-565c8fe01a9c HTTP/1.1" 200 -
2025-04-07 21:14:13,089 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:14:13] "GET /api/query/progress/3ee0bcb7-3fc3-4a28-b138-565c8fe01a9c HTTP/1.1" 200 -
2025-04-07 21:14:13,294 [INFO] text2sql.feedback [feedback_manager.py:122]: Reranking model loaded in 1.26s
2025-04-07 21:14:13 - INFO - [feedback_manager.py:122] - Reranking model loaded in 1.26s
2025-04-07 21:14:13,295 [INFO] text2sql.feedback [feedback_manager.py:295]: [('get me count of customers by order month', ''), ('get me count of customers by order month', '')]
2025-04-07 21:14:13 - INFO - [feedback_manager.py:295] - [('get me count of customers by order month', ''), ('get me count of customers by order month', '')]
2025-04-07 21:14:13,309 [INFO] text2sql.feedback [feedback_manager.py:303]: [{'feedback_id': 2, 'query_text': '', 'sql_query': '', 'results_summary': '', 'workspace': '', 'feedback_rating': 1, 'created_at': '', 'tables_used': [], 'is_manual_sample': False, 'similarity': '', 'rerank_score': -10.036384582519531}, {'feedback_id': 1, 'query_text': '', 'sql_query': '', 'results_summary': '', 'workspace': '', 'feedback_rating': 1, 'created_at': '', 'tables_used': [], 'is_manual_sample': False, 'similarity': '', 'rerank_score': -10.036384582519531}]
2025-04-07 21:14:13 - INFO - [feedback_manager.py:303] - [{'feedback_id': 2, 'query_text': '', 'sql_query': '', 'results_summary': '', 'workspace': '', 'feedback_rating': 1, 'created_at': '', 'tables_used': [], 'is_manual_sample': False, 'similarity': '', 'rerank_score': -10.036384582519531}, {'feedback_id': 1, 'query_text': '', 'sql_query': '', 'results_summary': '', 'workspace': '', 'feedback_rating': 1, 'created_at': '', 'tables_used': [], 'is_manual_sample': False, 'similarity': '', 'rerank_score': -10.036384582519531}]
2025-04-07 21:14:13,310 [WARNING] text2sql.feedback [feedback_manager.py:315]: No candidates with positive reranking scores, returning vector search results
2025-04-07 21:14:13 - WARNING - [feedback_manager.py:315] - No candidates with positive reranking scores, returning vector search results
2025-04-07 21:14:13,311 [INFO] text2sql.sql_generator [sql_generator.py:280]: Found 1 similar queries with reranking
2025-04-07 21:14:13,311 [INFO] text2sql.sql_generator [sql_generator.py:302]: Added similar query #1 from feedback (score: -10.0364): ...
2025-04-07 21:14:13,312 [INFO] text2sql.azure [azure_client.py:35]: SQL generation started for query: 'get me count of customers by order month'
2025-04-07 21:14:13 - INFO - [azure_client.py:35] - SQL generation started for query: 'get me count of customers by order month'
2025-04-07 21:14:13,313 [INFO] text2sql.azure [azure_client.py:69]: Including schema information (404 chars)
2025-04-07 21:14:13 - INFO - [azure_client.py:69] - Including schema information (404 chars)
2025-04-07 21:14:13,314 [INFO] text2sql.azure [azure_client.py:76]: Including 1 join conditions
2025-04-07 21:14:13 - INFO - [azure_client.py:76] - Including 1 join conditions
2025-04-07 21:14:13,315 [INFO] text2sql.azure [azure_client.py:97]: Including 1 SQL examples from feedback similarity search
2025-04-07 21:14:13 - INFO - [azure_client.py:97] - Including 1 SQL examples from feedback similarity search
2025-04-07 21:14:13,317 [INFO] text2sql.azure [azure_client.py:114]: PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER): Unique customer identifier\nPrimary Key(s): customer_id\n\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER): Unique order identifier, customer_id (INTEGER): Reference to customer who placed the order, order_date (TEXT): Date when order was placed\nPrimary Key(s): order_id\n"}, {'role': 'user', 'content': 'Use the following pre-defined join conditions when joining these tables:\n- When joining customers with orders, use: INNER JOIN orders ON customers.customer_id = orders.customer_id\n'}, {'role': 'user', 'content': 'Here are some similar queries that were previously successful:\nQuestion: \nSQL: \n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me count of customers by order month'}]
2025-04-07 21:14:13 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER): Unique customer identifier\nPrimary Key(s): customer_id\n\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER): Unique order identifier, customer_id (INTEGER): Reference to customer who placed the order, order_date (TEXT): Date when order was placed\nPrimary Key(s): order_id\n"}, {'role': 'user', 'content': 'Use the following pre-defined join conditions when joining these tables:\n- When joining customers with orders, use: INNER JOIN orders ON customers.customer_id = orders.customer_id\n'}, {'role': 'user', 'content': 'Here are some similar queries that were previously successful:\nQuestion: \nSQL: \n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me count of customers by order month'}]
2025-04-07 21:14:13,318 [INFO] text2sql.llm_engine [llm_engine.py:56]: [SQL_GEN] Completion generation started
2025-04-07 21:14:13 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-07 21:14:14,313 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:14:14] "GET /api/query/progress/3ee0bcb7-3fc3-4a28-b138-565c8fe01a9c HTTP/1.1" 200 -
2025-04-07 21:14:14,972 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:14:14] "GET /api/query/progress/3ee0bcb7-3fc3-4a28-b138-565c8fe01a9c HTTP/1.1" 200 -
2025-04-07 21:14:16,218 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:14:16] "GET /api/query/progress/3ee0bcb7-3fc3-4a28-b138-565c8fe01a9c HTTP/1.1" 200 -
2025-04-07 21:14:16,321 [INFO] text2sql.llm_engine [llm_engine.py:119]: [SQL_GEN] Completion generation completed in 3.00s
2025-04-07 21:14:16 - INFO - [llm_engine.py:119] - [SQL_GEN] Completion generation completed in 3.00s
2025-04-07 21:14:16,322 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-07 21:14:16 - INFO - [llm_engine.py:120] - **************************
2025-04-07 21:14:16,324 [INFO] text2sql.azure [azure_client.py:150]: Parsing SQL from model response
2025-04-07 21:14:16 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-07 21:14:16,325 [INFO] text2sql.azure [azure_client.py:157]: Found SQL code block in response
2025-04-07 21:14:16 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-07 21:14:16,326 [INFO] text2sql.azure [azure_client.py:171]: Extracted SQL query (243 chars) and explanation (263 chars)
2025-04-07 21:14:16 - INFO - [azure_client.py:171] - Extracted SQL query (243 chars) and explanation (263 chars)
2025-04-07 21:14:16,327 [INFO] text2sql.azure [azure_client.py:124]: Generated SQL: SELECT 
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id
GROUP BY 
    order_month
ORDER BY
    order_month;
2025-04-07 21:14:16 - INFO - [azure_client.py:124] - Generated SQL: SELECT 
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id
GROUP BY 
    order_month
ORDER BY
    order_month;
2025-04-07 21:14:16,329 [INFO] text2sql.azure [azure_client.py:132]: SQL generation completed in 3.02s
2025-04-07 21:14:16 - INFO - [azure_client.py:132] - SQL generation completed in 3.02s
2025-04-07 21:14:16,330 [INFO] text2sql.database [database.py:65]: Executing SQL query: SELECT 
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id
GROUP BY 
    order_month
ORDER BY
    order_month;
2025-04-07 21:14:16 - INFO - [database.py:65] - Executing SQL query: SELECT 
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id
GROUP BY 
    order_month
ORDER BY
    order_month;
2025-04-07 21:14:16,333 [INFO] text2sql.database [database.py:86]: Query returned 2 rows with 2 columns
2025-04-07 21:14:16 - INFO - [database.py:86] - Query returned 2 rows with 2 columns
2025-04-07 21:14:16,337 [INFO] text2sql.database [database.py:95]: Query processing completed in 0.01s
2025-04-07 21:14:16 - INFO - [database.py:95] - Query processing completed in 0.01s
2025-04-07 21:14:16,339 [INFO] text2sql.sql_generator [sql_generator.py:376]: SQL generation completed in 20.23s
2025-04-07 21:14:16,339 [INFO] text2sql.sql_generator [sql_generator.py:125]: Query processing completed in 20.23s
2025-04-07 21:14:16,861 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 21:14:16] "GET /api/query/progress/3ee0bcb7-3fc3-4a28-b138-565c8fe01a9c HTTP/1.1" 200 -
2025-04-07 23:48:09,433 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:48:09] "[32mGET /samples HTTP/1.1[0m" 302 -
2025-04-07 23:48:09,661 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:48:09] "GET /login HTTP/1.1" 200 -
2025-04-07 23:48:17,606 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:48:17] "[32mPOST /login HTTP/1.1[0m" 302 -
2025-04-07 23:48:17,946 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:48:17] "GET / HTTP/1.1" 200 -
2025-04-07 23:48:18,144 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:48:18] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-07 23:48:22,019 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:48:22] "GET /samples HTTP/1.1" 200 -
2025-04-07 23:48:22,359 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:48:22] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-07 23:48:22,588 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:48:22] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-07 23:48:22,675 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:48:22] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-07 23:48:22,677 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:48:22] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-07 23:48:22,685 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 23:48:22 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 23:48:22,690 [INFO] text2sql.feedback [feedback_manager.py:49]: Attempting database connection
2025-04-07 23:48:22 - INFO - [feedback_manager.py:49] - Attempting database connection
2025-04-07 23:48:22,696 [INFO] text2sql.feedback [feedback_manager.py:53]: Database connection established in 0.01s
2025-04-07 23:48:22 - INFO - [feedback_manager.py:53] - Database connection established in 0.01s
2025-04-07 23:48:22,697 [INFO] text2sql.vector [vector_store.py:38]: Connecting to vector database at ./vector_store.db
2025-04-07 23:48:22 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-07 23:48:22,730 [DEBUG] pymilvus.milvus_client.milvus_client [milvus_client.py:728]: Created new connection using: a6cf259c1f42457ea3d5ef551594bece
2025-04-07 23:48:22,731 [INFO] text2sql.vector [vector_store.py:42]: Vector database connection established in 0.03s
2025-04-07 23:48:22 - INFO - [vector_store.py:42] - Vector database connection established in 0.03s
2025-04-07 23:48:22,733 [INFO] text2sql.vector [vector_store.py:75]: Collection 'query_embeddings' already exists
2025-04-07 23:48:22 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-07 23:48:22,740 [INFO] text2sql.feedback [feedback_manager.py:514]: Retrieved 2 samples (page 1, limit 10)
2025-04-07 23:48:22 - INFO - [feedback_manager.py:514] - Retrieved 2 samples (page 1, limit 10)
2025-04-07 23:48:22,742 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:48:22] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-07 23:49:07,549 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/utils/feedback_manager.py', reloading
2025-04-07 23:49:07,550 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/utils/feedback_manager.py', reloading
2025-04-07 23:49:07,551 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/utils/feedback_manager.py', reloading
2025-04-07 23:49:08,554 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-07 23:49:08,554 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-07 23:49:08,555 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-07 23:49:08,555 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-07 23:49:08,555 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-07 23:49:08 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-07 23:49:08,556 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-07 23:49:08 - INFO - [database.py:258] - Closing database connection
2025-04-07 23:49:08,558 [INFO] text2sql.feedback [feedback_manager.py:750]: Closing database connections
2025-04-07 23:49:08 - INFO - [feedback_manager.py:750] - Closing database connections
2025-04-07 23:49:08,559 [INFO] text2sql.vector [vector_store.py:288]: Closing vector database connection
2025-04-07 23:49:08 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-07 23:49:11,771 [INFO] werkzeug [_internal.py:224]:  * Restarting with watchdog (inotify)
2025-04-07 23:49:19,515 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 23:49:19,516 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 23:49:19,516 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 23:49:19,516 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 23:49:19,517 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-07 23:49:19,529 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 23:49:19,530 [INFO] text2sql [app.py:67]: Debug logging enabled for SQL generator and agents
2025-04-07 23:49:19 - INFO - [app.py:67] - Debug logging enabled for SQL generator and agents
2025-04-07 23:49:19,532 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 23:49:19 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 23:49:19,532 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 23:49:19 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 23:49:19,567 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 23:49:19 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 23:49:19,567 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 23:49:19,568 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 23:49:19,568 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 23:49:19,568 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 23:49:19,568 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 23:49:19 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 23:49:19,568 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 23:49:19 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 23:49:19,598 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 23:49:19 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 23:49:19,599 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 23:49:19,599 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 23:49:19,599 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 23:49:19,600 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 23:49:19,600 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 23:49:19 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 23:49:19,600 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 23:49:19 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 23:49:19,630 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 23:49:19 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 23:49:19,631 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 23:49:19,631 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 23:49:19,631 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 23:49:19,631 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 23:49:19,631 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-07 23:49:19 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-07 23:49:19,632 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 23:49:19 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 23:49:19,632 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 23:49:19 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 23:49:19,662 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 23:49:19 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 23:49:19,663 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-07 23:49:19 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-07 23:49:19,663 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-07 23:49:19 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-07 23:49:19,663 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 23:49:19,663 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 23:49:19,663 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 23:49:19,663 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 23:49:19,664 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 23:49:19 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 23:49:19,692 [WARNING] werkzeug [_internal.py:224]:  * Debugger is active!
2025-04-07 23:49:19,692 [INFO] werkzeug [_internal.py:224]:  * Debugger PIN: 774-546-021
2025-04-07 23:49:24,435 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:49:24] "GET / HTTP/1.1" 200 -
2025-04-07 23:49:24,503 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:49:24] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-07 23:49:27,124 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'get me count of customers by order month'
2025-04-07 23:49:27,125 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:49:27] "POST /api/query HTTP/1.1" 200 -
2025-04-07 23:49:27,126 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'get me count of customers by order month'
2025-04-07 23:49:27,127 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-07 23:49:27,128 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.00s
2025-04-07 23:49:27,129 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-07 23:49:27,129 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-07 23:49:27,130 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-07 23:49:27 - INFO - [database.py:44] - Attempting database connection
2025-04-07 23:49:27,133 [INFO] text2sql.database [database.py:48]: Database connection established in 0.00s
2025-04-07 23:49:27 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-07 23:49:27,134 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'get me count of customers by order month'
2025-04-07 23:49:27,135 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-07 23:49:27,136 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-07 23:49:27,136 [INFO] text2sql.llm_engine [llm_engine.py:56]: [TABLE] Completion generation started
2025-04-07 23:49:27 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-07 23:49:27,608 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:49:27] "GET /api/query/progress/d5a29fb5-5be7-494d-9493-a9e387ac5e36 HTTP/1.1" 200 -
2025-04-07 23:49:28,595 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:49:28] "GET /api/query/progress/d5a29fb5-5be7-494d-9493-a9e387ac5e36 HTTP/1.1" 200 -
2025-04-07 23:49:28,821 [INFO] text2sql.llm_engine [llm_engine.py:119]: [TABLE] Completion generation completed in 1.69s
2025-04-07 23:49:28 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 1.69s
2025-04-07 23:49:28,822 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-07 23:49:28 - INFO - [llm_engine.py:120] - **************************
2025-04-07 23:49:28,824 [INFO] text2sql.agents.table [table_agent.py:69]: Raw model response: 'customers, orders'
2025-04-07 23:49:28,825 [INFO] text2sql.agents.table [table_agent.py:90]: Table selection completed in 1.69s. Selected: customers, orders
2025-04-07 23:49:28,826 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'get me count of customers by order month'
2025-04-07 23:49:28,827 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: customers, orders
2025-04-07 23:49:28,828 [INFO] text2sql.agents.column [column_agent.py:94]: Sending request to AI model for column selection
2025-04-07 23:49:28,829 [INFO] text2sql.llm_engine [llm_engine.py:56]: [COLUMN] Completion generation started
2025-04-07 23:49:28 - INFO - [llm_engine.py:56] - [COLUMN] Completion generation started
2025-04-07 23:49:29,232 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:49:29] "GET /api/query/progress/d5a29fb5-5be7-494d-9493-a9e387ac5e36 HTTP/1.1" 200 -
2025-04-07 23:49:30,481 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:49:30] "GET /api/query/progress/d5a29fb5-5be7-494d-9493-a9e387ac5e36 HTTP/1.1" 200 -
2025-04-07 23:49:30,680 [INFO] text2sql.llm_engine [llm_engine.py:119]: [COLUMN] Completion generation completed in 1.85s
2025-04-07 23:49:30 - INFO - [llm_engine.py:119] - [COLUMN] Completion generation completed in 1.85s
2025-04-07 23:49:30,681 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-07 23:49:30 - INFO - [llm_engine.py:120] - **************************
2025-04-07 23:49:30,684 [INFO] text2sql.agents.column [column_agent.py:99]: Raw model response: '{
  "customers": [
    "customer_id"
  ],
  "orders": [
    "order_id",
    "customer_id",
    "order_date"
  ]
}'
2025-04-07 23:49:30,684 [INFO] text2sql.agents.column [column_agent.py:139]: Parsing column selection from model response
2025-04-07 23:49:30,685 [INFO] text2sql.agents.column [column_agent.py:149]: Parsed column selection JSON: {"customers": ["customer_id"], "orders": ["order_id", "customer_id", "order_date"]}
2025-04-07 23:49:30,685 [INFO] text2sql.agents.column [column_agent.py:111]: Table 'customers': Pruned 10 columns, kept 1/11
2025-04-07 23:49:30,686 [INFO] text2sql.agents.column [column_agent.py:111]: Table 'orders': Pruned 2 columns, kept 3/5
2025-04-07 23:49:30,686 [INFO] text2sql.agents.column [column_agent.py:197]: Building pruned schema
2025-04-07 23:49:30,687 [INFO] text2sql.agents.column [column_agent.py:226]: Built pruned schema (404 chars)
2025-04-07 23:49:30,688 [INFO] text2sql.agents.column [column_agent.py:120]: Column pruning completed in 1.86s
2025-04-07 23:49:30,688 [INFO] text2sql.sql_generator [sql_generator.py:237]: Found 1 join conditions for the relevant tables
2025-04-07 23:49:30,689 [INFO] text2sql.feedback [feedback_manager.py:260]: Stage 1: Vector search for 'get me count of customers by order month...'
2025-04-07 23:49:30 - INFO - [feedback_manager.py:260] - Stage 1: Vector search for 'get me count of customers by order month...'
2025-04-07 23:49:30,690 [INFO] text2sql.feedback [feedback_manager.py:74]: Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-07 23:49:30 - INFO - [feedback_manager.py:74] - Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-07 23:49:31,122 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:49:31] "GET /api/query/progress/d5a29fb5-5be7-494d-9493-a9e387ac5e36 HTTP/1.1" 200 -
2025-04-07 23:49:32,386 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:49:32] "GET /api/query/progress/d5a29fb5-5be7-494d-9493-a9e387ac5e36 HTTP/1.1" 200 -
2025-04-07 23:49:33,043 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:49:33] "GET /api/query/progress/d5a29fb5-5be7-494d-9493-a9e387ac5e36 HTTP/1.1" 200 -
2025-04-07 23:49:33,366 [INFO] text2sql.feedback [feedback_manager.py:77]: Embedding model loaded in 2.68s
2025-04-07 23:49:33 - INFO - [feedback_manager.py:77] - Embedding model loaded in 2.68s
2025-04-07 23:49:33,511 [INFO] text2sql.vector [vector_store.py:38]: Connecting to vector database at ./vector_store.db
2025-04-07 23:49:33 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-07 23:49:34,287 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:49:34] "GET /api/query/progress/d5a29fb5-5be7-494d-9493-a9e387ac5e36 HTTP/1.1" 200 -
2025-04-07 23:49:34,545 [DEBUG] pymilvus.milvus_client.milvus_client [milvus_client.py:728]: Created new connection using: b3b3e831fbab45639d6eeee9bee4fcd4
2025-04-07 23:49:34,545 [INFO] text2sql.vector [vector_store.py:42]: Vector database connection established in 1.03s
2025-04-07 23:49:34 - INFO - [vector_store.py:42] - Vector database connection established in 1.03s
2025-04-07 23:49:34,548 [INFO] text2sql.vector [vector_store.py:75]: Collection 'query_embeddings' already exists
2025-04-07 23:49:34 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-07 23:49:34,606 [INFO] text2sql.feedback [feedback_manager.py:280]: [{'feedback_id': 2, 'query_text': '', 'sql_query': '', 'results_summary': '', 'workspace': '', 'feedback_rating': 1, 'created_at': '', 'tables_used': [], 'is_manual_sample': False, 'similarity': ''}, {'feedback_id': 1, 'query_text': '', 'sql_query': '', 'results_summary': '', 'workspace': '', 'feedback_rating': 1, 'created_at': '', 'tables_used': [], 'is_manual_sample': False, 'similarity': ''}]
2025-04-07 23:49:34 - INFO - [feedback_manager.py:280] - [{'feedback_id': 2, 'query_text': '', 'sql_query': '', 'results_summary': '', 'workspace': '', 'feedback_rating': 1, 'created_at': '', 'tables_used': [], 'is_manual_sample': False, 'similarity': ''}, {'feedback_id': 1, 'query_text': '', 'sql_query': '', 'results_summary': '', 'workspace': '', 'feedback_rating': 1, 'created_at': '', 'tables_used': [], 'is_manual_sample': False, 'similarity': ''}]
2025-04-07 23:49:34,607 [INFO] text2sql.feedback [feedback_manager.py:286]: Found 2 initial candidates from vector search
2025-04-07 23:49:34 - INFO - [feedback_manager.py:286] - Found 2 initial candidates from vector search
2025-04-07 23:49:34,608 [INFO] text2sql.feedback [feedback_manager.py:290]: Stage 2: Reranking 2 candidates
2025-04-07 23:49:34 - INFO - [feedback_manager.py:290] - Stage 2: Reranking 2 candidates
2025-04-07 23:49:34,609 [INFO] text2sql.feedback [feedback_manager.py:118]: Loading reranking model 'cross-encoder/ms-marco-MiniLM-L-6-v2'
2025-04-07 23:49:34 - INFO - [feedback_manager.py:118] - Loading reranking model 'cross-encoder/ms-marco-MiniLM-L-6-v2'
2025-04-07 23:49:34,952 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:49:34] "GET /api/query/progress/d5a29fb5-5be7-494d-9493-a9e387ac5e36 HTTP/1.1" 200 -
2025-04-07 23:49:35,758 [INFO] text2sql.feedback [feedback_manager.py:122]: Reranking model loaded in 1.15s
2025-04-07 23:49:35 - INFO - [feedback_manager.py:122] - Reranking model loaded in 1.15s
2025-04-07 23:49:35,758 [INFO] text2sql.feedback [feedback_manager.py:296]: [('get me count of customers by order month', ''), ('get me count of customers by order month', '')]
2025-04-07 23:49:35 - INFO - [feedback_manager.py:296] - [('get me count of customers by order month', ''), ('get me count of customers by order month', '')]
2025-04-07 23:49:35,827 [INFO] text2sql.feedback [feedback_manager.py:304]: [{'feedback_id': 2, 'query_text': '', 'sql_query': '', 'results_summary': '', 'workspace': '', 'feedback_rating': 1, 'created_at': '', 'tables_used': [], 'is_manual_sample': False, 'similarity': '', 'rerank_score': -10.036384582519531}, {'feedback_id': 1, 'query_text': '', 'sql_query': '', 'results_summary': '', 'workspace': '', 'feedback_rating': 1, 'created_at': '', 'tables_used': [], 'is_manual_sample': False, 'similarity': '', 'rerank_score': -10.036384582519531}]
2025-04-07 23:49:35 - INFO - [feedback_manager.py:304] - [{'feedback_id': 2, 'query_text': '', 'sql_query': '', 'results_summary': '', 'workspace': '', 'feedback_rating': 1, 'created_at': '', 'tables_used': [], 'is_manual_sample': False, 'similarity': '', 'rerank_score': -10.036384582519531}, {'feedback_id': 1, 'query_text': '', 'sql_query': '', 'results_summary': '', 'workspace': '', 'feedback_rating': 1, 'created_at': '', 'tables_used': [], 'is_manual_sample': False, 'similarity': '', 'rerank_score': -10.036384582519531}]
2025-04-07 23:49:35,828 [WARNING] text2sql.feedback [feedback_manager.py:316]: No candidates with positive reranking scores, returning vector search results
2025-04-07 23:49:35 - WARNING - [feedback_manager.py:316] - No candidates with positive reranking scores, returning vector search results
2025-04-07 23:49:35,830 [INFO] text2sql.sql_generator [sql_generator.py:280]: Found 1 similar queries with reranking
2025-04-07 23:49:35,830 [INFO] text2sql.sql_generator [sql_generator.py:302]: Added similar query #1 from feedback (score: -10.0364): ...
2025-04-07 23:49:35,831 [INFO] text2sql.azure [azure_client.py:35]: SQL generation started for query: 'get me count of customers by order month'
2025-04-07 23:49:35 - INFO - [azure_client.py:35] - SQL generation started for query: 'get me count of customers by order month'
2025-04-07 23:49:35,831 [INFO] text2sql.azure [azure_client.py:69]: Including schema information (404 chars)
2025-04-07 23:49:35 - INFO - [azure_client.py:69] - Including schema information (404 chars)
2025-04-07 23:49:35,833 [INFO] text2sql.azure [azure_client.py:76]: Including 1 join conditions
2025-04-07 23:49:35 - INFO - [azure_client.py:76] - Including 1 join conditions
2025-04-07 23:49:35,834 [INFO] text2sql.azure [azure_client.py:97]: Including 1 SQL examples from feedback similarity search
2025-04-07 23:49:35 - INFO - [azure_client.py:97] - Including 1 SQL examples from feedback similarity search
2025-04-07 23:49:35,835 [INFO] text2sql.azure [azure_client.py:114]: PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER): Unique customer identifier\nPrimary Key(s): customer_id\n\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER): Unique order identifier, customer_id (INTEGER): Reference to customer who placed the order, order_date (TEXT): Date when order was placed\nPrimary Key(s): order_id\n"}, {'role': 'user', 'content': 'Use the following pre-defined join conditions when joining these tables:\n- When joining customers with orders, use: INNER JOIN orders ON customers.customer_id = orders.customer_id\n'}, {'role': 'user', 'content': 'Here are some similar queries that were previously successful:\nQuestion: \nSQL: \n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me count of customers by order month'}]
2025-04-07 23:49:35 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER): Unique customer identifier\nPrimary Key(s): customer_id\n\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER): Unique order identifier, customer_id (INTEGER): Reference to customer who placed the order, order_date (TEXT): Date when order was placed\nPrimary Key(s): order_id\n"}, {'role': 'user', 'content': 'Use the following pre-defined join conditions when joining these tables:\n- When joining customers with orders, use: INNER JOIN orders ON customers.customer_id = orders.customer_id\n'}, {'role': 'user', 'content': 'Here are some similar queries that were previously successful:\nQuestion: \nSQL: \n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me count of customers by order month'}]
2025-04-07 23:49:35,836 [INFO] text2sql.llm_engine [llm_engine.py:56]: [SQL_GEN] Completion generation started
2025-04-07 23:49:35 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-07 23:49:36,203 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:49:36] "GET /api/query/progress/d5a29fb5-5be7-494d-9493-a9e387ac5e36 HTTP/1.1" 200 -
2025-04-07 23:49:36,877 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:49:36] "GET /api/query/progress/d5a29fb5-5be7-494d-9493-a9e387ac5e36 HTTP/1.1" 200 -
2025-04-07 23:49:38,132 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:49:38] "GET /api/query/progress/d5a29fb5-5be7-494d-9493-a9e387ac5e36 HTTP/1.1" 200 -
2025-04-07 23:49:38,688 [INFO] text2sql.llm_engine [llm_engine.py:119]: [SQL_GEN] Completion generation completed in 2.85s
2025-04-07 23:49:38 - INFO - [llm_engine.py:119] - [SQL_GEN] Completion generation completed in 2.85s
2025-04-07 23:49:38,690 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-07 23:49:38 - INFO - [llm_engine.py:120] - **************************
2025-04-07 23:49:38,691 [INFO] text2sql.azure [azure_client.py:150]: Parsing SQL from model response
2025-04-07 23:49:38 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-07 23:49:38,692 [INFO] text2sql.azure [azure_client.py:157]: Found SQL code block in response
2025-04-07 23:49:38 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-07 23:49:38,694 [INFO] text2sql.azure [azure_client.py:171]: Extracted SQL query (224 chars) and explanation (85 chars)
2025-04-07 23:49:38 - INFO - [azure_client.py:171] - Extracted SQL query (224 chars) and explanation (85 chars)
2025-04-07 23:49:38,695 [INFO] text2sql.azure [azure_client.py:124]: Generated SQL: SELECT 
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM customers c
INNER JOIN orders o ON c.customer_id = o.customer_id
GROUP BY order_month
ORDER BY order_month;
2025-04-07 23:49:38 - INFO - [azure_client.py:124] - Generated SQL: SELECT 
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM customers c
INNER JOIN orders o ON c.customer_id = o.customer_id
GROUP BY order_month
ORDER BY order_month;
2025-04-07 23:49:38,697 [INFO] text2sql.azure [azure_client.py:132]: SQL generation completed in 2.87s
2025-04-07 23:49:38 - INFO - [azure_client.py:132] - SQL generation completed in 2.87s
2025-04-07 23:49:38,699 [INFO] text2sql.database [database.py:65]: Executing SQL query: SELECT 
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM customers c
INNER JOIN orders o ON c.customer_id = o.customer_id
GROUP BY order_month
ORDER BY order_month;
2025-04-07 23:49:38 - INFO - [database.py:65] - Executing SQL query: SELECT 
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM customers c
INNER JOIN orders o ON c.customer_id = o.customer_id
GROUP BY order_month
ORDER BY order_month;
2025-04-07 23:49:38,713 [INFO] text2sql.database [database.py:86]: Query returned 2 rows with 2 columns
2025-04-07 23:49:38 - INFO - [database.py:86] - Query returned 2 rows with 2 columns
2025-04-07 23:49:38,719 [INFO] text2sql.database [database.py:95]: Query processing completed in 0.02s
2025-04-07 23:49:38 - INFO - [database.py:95] - Query processing completed in 0.02s
2025-04-07 23:49:38,721 [INFO] text2sql.sql_generator [sql_generator.py:376]: SQL generation completed in 11.59s
2025-04-07 23:49:38,722 [INFO] text2sql.sql_generator [sql_generator.py:125]: Query processing completed in 11.60s
2025-04-07 23:49:38,836 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:49:38] "GET /api/query/progress/d5a29fb5-5be7-494d-9493-a9e387ac5e36 HTTP/1.1" 200 -
2025-04-07 23:50:39,604 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:50:39] "GET /samples HTTP/1.1" 200 -
2025-04-07 23:50:39,839 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:50:39] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-07 23:50:39,946 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:50:39] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-07 23:50:39,949 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:50:39] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-07 23:50:39,959 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 23:50:39 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 23:50:39,960 [INFO] text2sql.feedback [feedback_manager.py:49]: Attempting database connection
2025-04-07 23:50:39 - INFO - [feedback_manager.py:49] - Attempting database connection
2025-04-07 23:50:39,962 [INFO] text2sql.feedback [feedback_manager.py:53]: Database connection established in 0.00s
2025-04-07 23:50:39 - INFO - [feedback_manager.py:53] - Database connection established in 0.00s
2025-04-07 23:50:39,963 [INFO] text2sql.vector [vector_store.py:38]: Connecting to vector database at ./vector_store.db
2025-04-07 23:50:39 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-07 23:50:39,974 [DEBUG] pymilvus.milvus_client.milvus_client [milvus_client.py:728]: Created new connection using: 48bd908f52c0415a8ee42c4656ab7924
2025-04-07 23:50:39,974 [INFO] text2sql.vector [vector_store.py:42]: Vector database connection established in 0.01s
2025-04-07 23:50:39 - INFO - [vector_store.py:42] - Vector database connection established in 0.01s
2025-04-07 23:50:39,976 [INFO] text2sql.vector [vector_store.py:75]: Collection 'query_embeddings' already exists
2025-04-07 23:50:39 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-07 23:50:39,978 [INFO] text2sql.feedback [feedback_manager.py:515]: Retrieved 2 samples (page 1, limit 10)
2025-04-07 23:50:39 - INFO - [feedback_manager.py:515] - Retrieved 2 samples (page 1, limit 10)
2025-04-07 23:50:39,980 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:50:39] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-07 23:50:41,106 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 23:50:41 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 23:50:41,110 [INFO] text2sql.feedback [feedback_manager.py:49]: Attempting database connection
2025-04-07 23:50:41 - INFO - [feedback_manager.py:49] - Attempting database connection
2025-04-07 23:50:41,112 [INFO] text2sql.feedback [feedback_manager.py:53]: Database connection established in 0.00s
2025-04-07 23:50:41 - INFO - [feedback_manager.py:53] - Database connection established in 0.00s
2025-04-07 23:50:41,113 [INFO] text2sql.vector [vector_store.py:38]: Connecting to vector database at ./vector_store.db
2025-04-07 23:50:41 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-07 23:50:41,118 [DEBUG] pymilvus.milvus_client.milvus_client [milvus_client.py:728]: Created new connection using: f6a5c99753144eca8b55dcd6c24470a4
2025-04-07 23:50:41,118 [INFO] text2sql.vector [vector_store.py:42]: Vector database connection established in 0.01s
2025-04-07 23:50:41 - INFO - [vector_store.py:42] - Vector database connection established in 0.01s
2025-04-07 23:50:41,121 [INFO] text2sql.vector [vector_store.py:75]: Collection 'query_embeddings' already exists
2025-04-07 23:50:41 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-07 23:50:41,124 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:50:41] "GET /api/samples/2 HTTP/1.1" 200 -
2025-04-07 23:50:41,425 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:50:41] "GET /api/tables?workspace=dfd HTTP/1.1" 200 -
2025-04-07 23:50:42,981 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 23:50:42 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 23:50:42,985 [INFO] text2sql.feedback [feedback_manager.py:49]: Attempting database connection
2025-04-07 23:50:42 - INFO - [feedback_manager.py:49] - Attempting database connection
2025-04-07 23:50:42,986 [INFO] text2sql.feedback [feedback_manager.py:53]: Database connection established in 0.00s
2025-04-07 23:50:42 - INFO - [feedback_manager.py:53] - Database connection established in 0.00s
2025-04-07 23:50:42,988 [INFO] text2sql.vector [vector_store.py:38]: Connecting to vector database at ./vector_store.db
2025-04-07 23:50:42 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-07 23:50:42,993 [DEBUG] pymilvus.milvus_client.milvus_client [milvus_client.py:728]: Created new connection using: b7f66e240c1543d18de4001309dded78
2025-04-07 23:50:42,994 [INFO] text2sql.vector [vector_store.py:42]: Vector database connection established in 0.01s
2025-04-07 23:50:42 - INFO - [vector_store.py:42] - Vector database connection established in 0.01s
2025-04-07 23:50:42,996 [INFO] text2sql.vector [vector_store.py:75]: Collection 'query_embeddings' already exists
2025-04-07 23:50:42 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-07 23:50:43,014 [INFO] text2sql.feedback [feedback_manager.py:74]: Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-07 23:50:43 - INFO - [feedback_manager.py:74] - Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-07 23:50:45,354 [INFO] text2sql.feedback [feedback_manager.py:77]: Embedding model loaded in 2.34s
2025-04-07 23:50:45 - INFO - [feedback_manager.py:77] - Embedding model loaded in 2.34s
2025-04-07 23:50:45,404 [INFO] text2sql.feedback [feedback_manager.py:633]: Updated sample ID 2
2025-04-07 23:50:45 - INFO - [feedback_manager.py:633] - Updated sample ID 2
2025-04-07 23:50:45,411 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:50:45] "PUT /api/samples/2 HTTP/1.1" 200 -
2025-04-07 23:50:45,731 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 23:50:45 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 23:50:45,735 [INFO] text2sql.feedback [feedback_manager.py:49]: Attempting database connection
2025-04-07 23:50:45 - INFO - [feedback_manager.py:49] - Attempting database connection
2025-04-07 23:50:45,739 [INFO] text2sql.feedback [feedback_manager.py:53]: Database connection established in 0.00s
2025-04-07 23:50:45 - INFO - [feedback_manager.py:53] - Database connection established in 0.00s
2025-04-07 23:50:45,742 [INFO] text2sql.vector [vector_store.py:38]: Connecting to vector database at ./vector_store.db
2025-04-07 23:50:45 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-07 23:50:45,750 [DEBUG] pymilvus.milvus_client.milvus_client [milvus_client.py:728]: Created new connection using: 000ca8648d3d4262b520bb263e5e5946
2025-04-07 23:50:45,750 [INFO] text2sql.vector [vector_store.py:42]: Vector database connection established in 0.01s
2025-04-07 23:50:45 - INFO - [vector_store.py:42] - Vector database connection established in 0.01s
2025-04-07 23:50:45,755 [INFO] text2sql.vector [vector_store.py:75]: Collection 'query_embeddings' already exists
2025-04-07 23:50:45 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-07 23:50:45,758 [INFO] text2sql.feedback [feedback_manager.py:515]: Retrieved 2 samples (page 1, limit 10)
2025-04-07 23:50:45 - INFO - [feedback_manager.py:515] - Retrieved 2 samples (page 1, limit 10)
2025-04-07 23:50:45,761 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:50:45] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-07 23:50:57,833 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:50:57] "GET / HTTP/1.1" 200 -
2025-04-07 23:50:58,159 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:50:58] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-07 23:50:59,579 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'get me count of customers by order month'
2025-04-07 23:50:59,580 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:50:59] "POST /api/query HTTP/1.1" 200 -
2025-04-07 23:50:59,581 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'get me count of customers by order month'
2025-04-07 23:50:59,583 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-07 23:50:59,583 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.00s
2025-04-07 23:50:59,583 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-07 23:50:59,584 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-07 23:50:59,585 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-07 23:50:59 - INFO - [database.py:44] - Attempting database connection
2025-04-07 23:50:59,587 [INFO] text2sql.database [database.py:48]: Database connection established in 0.00s
2025-04-07 23:50:59 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-07 23:50:59,588 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'get me count of customers by order month'
2025-04-07 23:50:59,589 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-07 23:50:59,590 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-07 23:50:59,590 [INFO] text2sql.llm_engine [llm_engine.py:56]: [TABLE] Completion generation started
2025-04-07 23:50:59 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-07 23:51:00,323 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:51:00] "GET /api/query/progress/6c4f326b-aa31-493a-9094-58bc77b452db HTTP/1.1" 200 -
2025-04-07 23:51:00,553 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:51:00] "GET /api/query/progress/6c4f326b-aa31-493a-9094-58bc77b452db HTTP/1.1" 200 -
2025-04-07 23:51:00,943 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:51:00] "GET /api/query/progress/6c4f326b-aa31-493a-9094-58bc77b452db HTTP/1.1" 200 -
2025-04-07 23:51:01,319 [INFO] text2sql.llm_engine [llm_engine.py:119]: [TABLE] Completion generation completed in 1.73s
2025-04-07 23:51:01 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 1.73s
2025-04-07 23:51:01,325 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-07 23:51:01 - INFO - [llm_engine.py:120] - **************************
2025-04-07 23:51:01,327 [INFO] text2sql.agents.table [table_agent.py:69]: Raw model response: 'customers, orders'
2025-04-07 23:51:01,327 [INFO] text2sql.agents.table [table_agent.py:90]: Table selection completed in 1.74s. Selected: customers, orders
2025-04-07 23:51:01,328 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'get me count of customers by order month'
2025-04-07 23:51:01,328 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: customers, orders
2025-04-07 23:51:01,329 [INFO] text2sql.agents.column [column_agent.py:94]: Sending request to AI model for column selection
2025-04-07 23:51:01,329 [INFO] text2sql.llm_engine [llm_engine.py:56]: [COLUMN] Completion generation started
2025-04-07 23:51:01 - INFO - [llm_engine.py:56] - [COLUMN] Completion generation started
2025-04-07 23:51:01,676 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:51:01] "GET /api/query/progress/6c4f326b-aa31-493a-9094-58bc77b452db HTTP/1.1" 200 -
2025-04-07 23:51:01,905 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:51:01] "GET /api/query/progress/6c4f326b-aa31-493a-9094-58bc77b452db HTTP/1.1" 200 -
2025-04-07 23:51:02,300 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:51:02] "GET /api/query/progress/6c4f326b-aa31-493a-9094-58bc77b452db HTTP/1.1" 200 -
2025-04-07 23:51:03,931 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:51:03] "GET /api/query/progress/6c4f326b-aa31-493a-9094-58bc77b452db HTTP/1.1" 200 -
2025-04-07 23:51:04,574 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:51:04] "GET /api/query/progress/6c4f326b-aa31-493a-9094-58bc77b452db HTTP/1.1" 200 -
2025-04-07 23:51:05,807 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:51:05] "GET /api/query/progress/6c4f326b-aa31-493a-9094-58bc77b452db HTTP/1.1" 200 -
2025-04-07 23:51:06,284 [INFO] text2sql.llm_engine [llm_engine.py:119]: [COLUMN] Completion generation completed in 4.96s
2025-04-07 23:51:06 - INFO - [llm_engine.py:119] - [COLUMN] Completion generation completed in 4.96s
2025-04-07 23:51:06,286 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-07 23:51:06 - INFO - [llm_engine.py:120] - **************************
2025-04-07 23:51:06,287 [INFO] text2sql.agents.column [column_agent.py:99]: Raw model response: '{
  "customers": [
    "customer_id"
  ],
  "orders": [
    "order_id",
    "customer_id",
    "order_date"
  ]
}'
2025-04-07 23:51:06,288 [INFO] text2sql.agents.column [column_agent.py:139]: Parsing column selection from model response
2025-04-07 23:51:06,289 [INFO] text2sql.agents.column [column_agent.py:149]: Parsed column selection JSON: {"customers": ["customer_id"], "orders": ["order_id", "customer_id", "order_date"]}
2025-04-07 23:51:06,289 [INFO] text2sql.agents.column [column_agent.py:111]: Table 'customers': Pruned 10 columns, kept 1/11
2025-04-07 23:51:06,290 [INFO] text2sql.agents.column [column_agent.py:111]: Table 'orders': Pruned 2 columns, kept 3/5
2025-04-07 23:51:06,291 [INFO] text2sql.agents.column [column_agent.py:197]: Building pruned schema
2025-04-07 23:51:06,292 [INFO] text2sql.agents.column [column_agent.py:226]: Built pruned schema (404 chars)
2025-04-07 23:51:06,293 [INFO] text2sql.agents.column [column_agent.py:120]: Column pruning completed in 4.96s
2025-04-07 23:51:06,293 [INFO] text2sql.sql_generator [sql_generator.py:237]: Found 1 join conditions for the relevant tables
2025-04-07 23:51:06,294 [INFO] text2sql.feedback [feedback_manager.py:260]: Stage 1: Vector search for 'get me count of customers by order month...'
2025-04-07 23:51:06 - INFO - [feedback_manager.py:260] - Stage 1: Vector search for 'get me count of customers by order month...'
2025-04-07 23:51:06,316 [INFO] text2sql.feedback [feedback_manager.py:280]: [{'feedback_id': 2, 'query_text': '', 'sql_query': '', 'results_summary': '', 'workspace': '', 'feedback_rating': 1, 'created_at': '', 'tables_used': [], 'is_manual_sample': False, 'similarity': ''}, {'feedback_id': 1, 'query_text': '', 'sql_query': '', 'results_summary': '', 'workspace': '', 'feedback_rating': 1, 'created_at': '', 'tables_used': [], 'is_manual_sample': False, 'similarity': ''}]
2025-04-07 23:51:06 - INFO - [feedback_manager.py:280] - [{'feedback_id': 2, 'query_text': '', 'sql_query': '', 'results_summary': '', 'workspace': '', 'feedback_rating': 1, 'created_at': '', 'tables_used': [], 'is_manual_sample': False, 'similarity': ''}, {'feedback_id': 1, 'query_text': '', 'sql_query': '', 'results_summary': '', 'workspace': '', 'feedback_rating': 1, 'created_at': '', 'tables_used': [], 'is_manual_sample': False, 'similarity': ''}]
2025-04-07 23:51:06,317 [INFO] text2sql.feedback [feedback_manager.py:286]: Found 2 initial candidates from vector search
2025-04-07 23:51:06 - INFO - [feedback_manager.py:286] - Found 2 initial candidates from vector search
2025-04-07 23:51:06,318 [INFO] text2sql.feedback [feedback_manager.py:290]: Stage 2: Reranking 2 candidates
2025-04-07 23:51:06 - INFO - [feedback_manager.py:290] - Stage 2: Reranking 2 candidates
2025-04-07 23:51:06,319 [INFO] text2sql.feedback [feedback_manager.py:296]: [('get me count of customers by order month', ''), ('get me count of customers by order month', '')]
2025-04-07 23:51:06 - INFO - [feedback_manager.py:296] - [('get me count of customers by order month', ''), ('get me count of customers by order month', '')]
2025-04-07 23:51:06,334 [INFO] text2sql.feedback [feedback_manager.py:304]: [{'feedback_id': 2, 'query_text': '', 'sql_query': '', 'results_summary': '', 'workspace': '', 'feedback_rating': 1, 'created_at': '', 'tables_used': [], 'is_manual_sample': False, 'similarity': '', 'rerank_score': -10.036384582519531}, {'feedback_id': 1, 'query_text': '', 'sql_query': '', 'results_summary': '', 'workspace': '', 'feedback_rating': 1, 'created_at': '', 'tables_used': [], 'is_manual_sample': False, 'similarity': '', 'rerank_score': -10.036384582519531}]
2025-04-07 23:51:06 - INFO - [feedback_manager.py:304] - [{'feedback_id': 2, 'query_text': '', 'sql_query': '', 'results_summary': '', 'workspace': '', 'feedback_rating': 1, 'created_at': '', 'tables_used': [], 'is_manual_sample': False, 'similarity': '', 'rerank_score': -10.036384582519531}, {'feedback_id': 1, 'query_text': '', 'sql_query': '', 'results_summary': '', 'workspace': '', 'feedback_rating': 1, 'created_at': '', 'tables_used': [], 'is_manual_sample': False, 'similarity': '', 'rerank_score': -10.036384582519531}]
2025-04-07 23:51:06,335 [WARNING] text2sql.feedback [feedback_manager.py:316]: No candidates with positive reranking scores, returning vector search results
2025-04-07 23:51:06 - WARNING - [feedback_manager.py:316] - No candidates with positive reranking scores, returning vector search results
2025-04-07 23:51:06,336 [INFO] text2sql.sql_generator [sql_generator.py:280]: Found 1 similar queries with reranking
2025-04-07 23:51:06,336 [INFO] text2sql.sql_generator [sql_generator.py:302]: Added similar query #1 from feedback (score: -10.0364): ...
2025-04-07 23:51:06,337 [INFO] text2sql.azure [azure_client.py:35]: SQL generation started for query: 'get me count of customers by order month'
2025-04-07 23:51:06 - INFO - [azure_client.py:35] - SQL generation started for query: 'get me count of customers by order month'
2025-04-07 23:51:06,337 [INFO] text2sql.azure [azure_client.py:69]: Including schema information (404 chars)
2025-04-07 23:51:06 - INFO - [azure_client.py:69] - Including schema information (404 chars)
2025-04-07 23:51:06,338 [INFO] text2sql.azure [azure_client.py:76]: Including 1 join conditions
2025-04-07 23:51:06 - INFO - [azure_client.py:76] - Including 1 join conditions
2025-04-07 23:51:06,339 [INFO] text2sql.azure [azure_client.py:97]: Including 1 SQL examples from feedback similarity search
2025-04-07 23:51:06 - INFO - [azure_client.py:97] - Including 1 SQL examples from feedback similarity search
2025-04-07 23:51:06,340 [INFO] text2sql.azure [azure_client.py:114]: PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER): Unique customer identifier\nPrimary Key(s): customer_id\n\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER): Unique order identifier, customer_id (INTEGER): Reference to customer who placed the order, order_date (TEXT): Date when order was placed\nPrimary Key(s): order_id\n"}, {'role': 'user', 'content': 'Use the following pre-defined join conditions when joining these tables:\n- When joining customers with orders, use: INNER JOIN orders ON customers.customer_id = orders.customer_id\n'}, {'role': 'user', 'content': 'Here are some similar queries that were previously successful:\nQuestion: \nSQL: \n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me count of customers by order month'}]
2025-04-07 23:51:06 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER): Unique customer identifier\nPrimary Key(s): customer_id\n\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER): Unique order identifier, customer_id (INTEGER): Reference to customer who placed the order, order_date (TEXT): Date when order was placed\nPrimary Key(s): order_id\n"}, {'role': 'user', 'content': 'Use the following pre-defined join conditions when joining these tables:\n- When joining customers with orders, use: INNER JOIN orders ON customers.customer_id = orders.customer_id\n'}, {'role': 'user', 'content': 'Here are some similar queries that were previously successful:\nQuestion: \nSQL: \n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me count of customers by order month'}]
2025-04-07 23:51:06,341 [INFO] text2sql.llm_engine [llm_engine.py:56]: [SQL_GEN] Completion generation started
2025-04-07 23:51:06 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-07 23:51:06,449 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:51:06] "GET /api/query/progress/6c4f326b-aa31-493a-9094-58bc77b452db HTTP/1.1" 200 -
2025-04-07 23:51:07,686 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:51:07] "GET /api/query/progress/6c4f326b-aa31-493a-9094-58bc77b452db HTTP/1.1" 200 -
2025-04-07 23:51:08,331 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:51:08] "GET /api/query/progress/6c4f326b-aa31-493a-9094-58bc77b452db HTTP/1.1" 200 -
2025-04-07 23:51:08,621 [INFO] text2sql.llm_engine [llm_engine.py:119]: [SQL_GEN] Completion generation completed in 2.28s
2025-04-07 23:51:08 - INFO - [llm_engine.py:119] - [SQL_GEN] Completion generation completed in 2.28s
2025-04-07 23:51:08,623 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-07 23:51:08 - INFO - [llm_engine.py:120] - **************************
2025-04-07 23:51:08,625 [INFO] text2sql.azure [azure_client.py:150]: Parsing SQL from model response
2025-04-07 23:51:08 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-07 23:51:08,626 [INFO] text2sql.azure [azure_client.py:157]: Found SQL code block in response
2025-04-07 23:51:08 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-07 23:51:08,628 [INFO] text2sql.azure [azure_client.py:171]: Extracted SQL query (244 chars) and explanation (116 chars)
2025-04-07 23:51:08 - INFO - [azure_client.py:171] - Extracted SQL query (244 chars) and explanation (116 chars)
2025-04-07 23:51:08,630 [INFO] text2sql.azure [azure_client.py:124]: Generated SQL: SELECT 
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id
GROUP BY 
    order_month
ORDER BY 
    order_month;
2025-04-07 23:51:08 - INFO - [azure_client.py:124] - Generated SQL: SELECT 
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id
GROUP BY 
    order_month
ORDER BY 
    order_month;
2025-04-07 23:51:08,633 [INFO] text2sql.azure [azure_client.py:132]: SQL generation completed in 2.30s
2025-04-07 23:51:08 - INFO - [azure_client.py:132] - SQL generation completed in 2.30s
2025-04-07 23:51:08,634 [INFO] text2sql.database [database.py:65]: Executing SQL query: SELECT 
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id
GROUP BY 
    order_month
ORDER BY 
    order_month;
2025-04-07 23:51:08 - INFO - [database.py:65] - Executing SQL query: SELECT 
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id
GROUP BY 
    order_month
ORDER BY 
    order_month;
2025-04-07 23:51:08,638 [INFO] text2sql.database [database.py:86]: Query returned 2 rows with 2 columns
2025-04-07 23:51:08 - INFO - [database.py:86] - Query returned 2 rows with 2 columns
2025-04-07 23:51:08,640 [INFO] text2sql.database [database.py:95]: Query processing completed in 0.01s
2025-04-07 23:51:08 - INFO - [database.py:95] - Query processing completed in 0.01s
2025-04-07 23:51:08,642 [INFO] text2sql.sql_generator [sql_generator.py:376]: SQL generation completed in 9.06s
2025-04-07 23:51:08,643 [INFO] text2sql.sql_generator [sql_generator.py:125]: Query processing completed in 9.06s
2025-04-07 23:51:09,565 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:51:09] "GET /api/query/progress/6c4f326b-aa31-493a-9094-58bc77b452db HTTP/1.1" 200 -
2025-04-07 23:52:35,164 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/utils/vector_store.py', reloading
2025-04-07 23:52:35,166 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/utils/vector_store.py', reloading
2025-04-07 23:52:35,168 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/utils/vector_store.py', reloading
2025-04-07 23:52:35,435 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/utils/vector_store.py', reloading
2025-04-07 23:52:35,448 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/utils/vector_store.py', reloading
2025-04-07 23:52:36,449 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-07 23:52:36,449 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-07 23:52:36,450 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-07 23:52:36,450 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-07 23:52:36,450 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-07 23:52:36 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-07 23:52:36,450 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-07 23:52:36 - INFO - [database.py:258] - Closing database connection
2025-04-07 23:52:36,451 [INFO] text2sql.feedback [feedback_manager.py:751]: Closing database connections
2025-04-07 23:52:36 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-07 23:52:36,451 [INFO] text2sql.vector [vector_store.py:288]: Closing vector database connection
2025-04-07 23:52:36 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-07 23:52:37,462 [INFO] werkzeug [_internal.py:224]:  * Restarting with watchdog (inotify)
2025-04-07 23:52:42,938 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 23:52:42,938 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 23:52:42,938 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 23:52:42,939 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 23:52:42,939 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-07 23:52:42,948 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 23:52:42,949 [INFO] text2sql [app.py:67]: Debug logging enabled for SQL generator and agents
2025-04-07 23:52:42 - INFO - [app.py:67] - Debug logging enabled for SQL generator and agents
2025-04-07 23:52:42,951 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 23:52:42 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 23:52:42,952 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 23:52:42 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 23:52:43,000 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 23:52:43 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 23:52:43,001 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 23:52:43,001 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 23:52:43,001 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 23:52:43,001 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 23:52:43,001 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 23:52:43 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 23:52:43,002 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 23:52:43 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 23:52:43,046 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 23:52:43 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 23:52:43,046 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 23:52:43,047 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 23:52:43,047 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 23:52:43,047 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 23:52:43,047 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 23:52:43 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 23:52:43,048 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 23:52:43 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 23:52:43,094 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 23:52:43 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 23:52:43,094 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 23:52:43,095 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 23:52:43,095 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 23:52:43,095 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 23:52:43,095 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-07 23:52:43 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-07 23:52:43,096 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 23:52:43 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 23:52:43,096 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 23:52:43 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 23:52:43,141 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 23:52:43 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 23:52:43,141 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-07 23:52:43 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-07 23:52:43,141 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-07 23:52:43 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-07 23:52:43,141 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 23:52:43,142 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 23:52:43,142 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 23:52:43,142 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 23:52:43,142 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 23:52:43 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 23:52:43,182 [WARNING] werkzeug [_internal.py:224]:  * Debugger is active!
2025-04-07 23:52:43,183 [INFO] werkzeug [_internal.py:224]:  * Debugger PIN: 774-546-021
2025-04-07 23:52:52,980 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'get me count of customers by order month'
2025-04-07 23:52:52,981 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:52:52] "POST /api/query HTTP/1.1" 200 -
2025-04-07 23:52:52,981 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'get me count of customers by order month'
2025-04-07 23:52:52,983 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-07 23:52:52,984 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.00s
2025-04-07 23:52:52,985 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-07 23:52:52,987 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-07 23:52:52,987 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-07 23:52:52 - INFO - [database.py:44] - Attempting database connection
2025-04-07 23:52:52,989 [INFO] text2sql.database [database.py:48]: Database connection established in 0.00s
2025-04-07 23:52:52 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-07 23:52:52,990 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'get me count of customers by order month'
2025-04-07 23:52:52,990 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-07 23:52:52,991 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-07 23:52:52,991 [INFO] text2sql.llm_engine [llm_engine.py:56]: [TABLE] Completion generation started
2025-04-07 23:52:52 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-07 23:52:54,011 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:52:54] "GET /api/query/progress/a85b081e-8a14-4fb5-86b0-213d04cd7cdc HTTP/1.1" 200 -
2025-04-07 23:52:55,355 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:52:55] "GET /api/query/progress/a85b081e-8a14-4fb5-86b0-213d04cd7cdc HTTP/1.1" 200 -
2025-04-07 23:52:55,411 [INFO] text2sql.llm_engine [llm_engine.py:119]: [TABLE] Completion generation completed in 2.42s
2025-04-07 23:52:55 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 2.42s
2025-04-07 23:52:55,412 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-07 23:52:55 - INFO - [llm_engine.py:120] - **************************
2025-04-07 23:52:55,414 [INFO] text2sql.agents.table [table_agent.py:69]: Raw model response: 'customers, orders'
2025-04-07 23:52:55,415 [INFO] text2sql.agents.table [table_agent.py:90]: Table selection completed in 2.42s. Selected: customers, orders
2025-04-07 23:52:55,416 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'get me count of customers by order month'
2025-04-07 23:52:55,416 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: customers, orders
2025-04-07 23:52:55,417 [INFO] text2sql.agents.column [column_agent.py:94]: Sending request to AI model for column selection
2025-04-07 23:52:55,417 [INFO] text2sql.llm_engine [llm_engine.py:56]: [COLUMN] Completion generation started
2025-04-07 23:52:55 - INFO - [llm_engine.py:56] - [COLUMN] Completion generation started
2025-04-07 23:52:56,055 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:52:56] "GET /api/query/progress/a85b081e-8a14-4fb5-86b0-213d04cd7cdc HTTP/1.1" 200 -
2025-04-07 23:52:57,396 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:52:57] "GET /api/query/progress/a85b081e-8a14-4fb5-86b0-213d04cd7cdc HTTP/1.1" 200 -
2025-04-07 23:52:58,111 [INFO] text2sql.llm_engine [llm_engine.py:119]: [COLUMN] Completion generation completed in 2.69s
2025-04-07 23:52:58 - INFO - [llm_engine.py:119] - [COLUMN] Completion generation completed in 2.69s
2025-04-07 23:52:58,113 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-07 23:52:58 - INFO - [llm_engine.py:120] - **************************
2025-04-07 23:52:58,116 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:52:58] "GET /api/query/progress/a85b081e-8a14-4fb5-86b0-213d04cd7cdc HTTP/1.1" 200 -
2025-04-07 23:52:58,118 [INFO] text2sql.agents.column [column_agent.py:99]: Raw model response: '{
  "customers": ["customer_id"],
  "orders": ["order_id", "customer_id", "order_date"]
}'
2025-04-07 23:52:58,119 [INFO] text2sql.agents.column [column_agent.py:139]: Parsing column selection from model response
2025-04-07 23:52:58,121 [INFO] text2sql.agents.column [column_agent.py:149]: Parsed column selection JSON: {"customers": ["customer_id"], "orders": ["order_id", "customer_id", "order_date"]}
2025-04-07 23:52:58,122 [INFO] text2sql.agents.column [column_agent.py:111]: Table 'customers': Pruned 10 columns, kept 1/11
2025-04-07 23:52:58,122 [INFO] text2sql.agents.column [column_agent.py:111]: Table 'orders': Pruned 2 columns, kept 3/5
2025-04-07 23:52:58,123 [INFO] text2sql.agents.column [column_agent.py:197]: Building pruned schema
2025-04-07 23:52:58,124 [INFO] text2sql.agents.column [column_agent.py:226]: Built pruned schema (404 chars)
2025-04-07 23:52:58,125 [INFO] text2sql.agents.column [column_agent.py:120]: Column pruning completed in 2.71s
2025-04-07 23:52:58,126 [INFO] text2sql.sql_generator [sql_generator.py:237]: Found 1 join conditions for the relevant tables
2025-04-07 23:52:58,127 [INFO] text2sql.feedback [feedback_manager.py:260]: Stage 1: Vector search for 'get me count of customers by order month...'
2025-04-07 23:52:58 - INFO - [feedback_manager.py:260] - Stage 1: Vector search for 'get me count of customers by order month...'
2025-04-07 23:52:58,129 [INFO] text2sql.feedback [feedback_manager.py:74]: Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-07 23:52:58 - INFO - [feedback_manager.py:74] - Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-07 23:52:59,410 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:52:59] "GET /api/query/progress/a85b081e-8a14-4fb5-86b0-213d04cd7cdc HTTP/1.1" 200 -
2025-04-07 23:53:00,073 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:53:00] "GET /api/query/progress/a85b081e-8a14-4fb5-86b0-213d04cd7cdc HTTP/1.1" 200 -
2025-04-07 23:53:00,454 [INFO] text2sql.feedback [feedback_manager.py:77]: Embedding model loaded in 2.32s
2025-04-07 23:53:00 - INFO - [feedback_manager.py:77] - Embedding model loaded in 2.32s
2025-04-07 23:53:00,484 [INFO] text2sql.vector [vector_store.py:38]: Connecting to vector database at ./vector_store.db
2025-04-07 23:53:00 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-07 23:53:01,319 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:53:01] "GET /api/query/progress/a85b081e-8a14-4fb5-86b0-213d04cd7cdc HTTP/1.1" 200 -
2025-04-07 23:53:01,510 [DEBUG] pymilvus.milvus_client.milvus_client [milvus_client.py:728]: Created new connection using: 65ce52fae539433c8d528fd7676ceee5
2025-04-07 23:53:01,510 [INFO] text2sql.vector [vector_store.py:42]: Vector database connection established in 1.03s
2025-04-07 23:53:01 - INFO - [vector_store.py:42] - Vector database connection established in 1.03s
2025-04-07 23:53:01,515 [INFO] text2sql.vector [vector_store.py:75]: Collection 'query_embeddings' already exists
2025-04-07 23:53:01 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-07 23:53:01,559 [INFO] text2sql.vector [vector_store.py:163]: **************data: ['[{\'id\': 2, \'distance\': 1.0, \'entity\': {\'query_text\': \'get me count of customers by order month\', \'sql_query\': "SELECT \\n    strftime(\'%Y-%m\', o.order_date) AS order_month,\\n    COUNT(DISTINCT c.customer_id) AS customer_count\\nFROM \\n    customers c\\nINNER JOIN \\n    orders o ON c.customer_id = o.customer_id\\nGROUP BY \\n    order_month\\nORDER BY \\n    order_month;", \'results_summary\': \'Returned 2 rows with 2 columns\', \'workspace\': \'dfd\', \'feedback_rating\': 1, \'tables_used\': \'\', \'is_manual_sample\': True, \'created_at\': \'2025-04-07 23:50:45\', \'id\': 2}}, {\'id\': 1, \'distance\': 0.5187309980392456, \'entity\': {\'query_text\': \'get me all the customers\', \'sql_query\': \'SELECT * FROM customers;\', \'results_summary\': \'Returned 5 rows with 11 columns\', \'workspace\': \'dfd\', \'feedback_rating\': 1, \'tables_used\': \'\', \'is_manual_sample\': False, \'created_at\': \'2025-04-05 15:17:11\', \'id\': 1}}]'] 
2025-04-07 23:53:01 - INFO - [vector_store.py:163] - **************data: ['[{\'id\': 2, \'distance\': 1.0, \'entity\': {\'query_text\': \'get me count of customers by order month\', \'sql_query\': "SELECT \\n    strftime(\'%Y-%m\', o.order_date) AS order_month,\\n    COUNT(DISTINCT c.customer_id) AS customer_count\\nFROM \\n    customers c\\nINNER JOIN \\n    orders o ON c.customer_id = o.customer_id\\nGROUP BY \\n    order_month\\nORDER BY \\n    order_month;", \'results_summary\': \'Returned 2 rows with 2 columns\', \'workspace\': \'dfd\', \'feedback_rating\': 1, \'tables_used\': \'\', \'is_manual_sample\': True, \'created_at\': \'2025-04-07 23:50:45\', \'id\': 2}}, {\'id\': 1, \'distance\': 0.5187309980392456, \'entity\': {\'query_text\': \'get me all the customers\', \'sql_query\': \'SELECT * FROM customers;\', \'results_summary\': \'Returned 5 rows with 11 columns\', \'workspace\': \'dfd\', \'feedback_rating\': 1, \'tables_used\': \'\', \'is_manual_sample\': False, \'created_at\': \'2025-04-05 15:17:11\', \'id\': 1}}]'] 
2025-04-07 23:53:01,559 [INFO] text2sql.feedback [feedback_manager.py:280]: [{'feedback_id': 2, 'query_text': '', 'sql_query': '', 'results_summary': '', 'workspace': '', 'feedback_rating': 1, 'created_at': '', 'tables_used': [], 'is_manual_sample': False, 'similarity': ''}, {'feedback_id': 1, 'query_text': '', 'sql_query': '', 'results_summary': '', 'workspace': '', 'feedback_rating': 1, 'created_at': '', 'tables_used': [], 'is_manual_sample': False, 'similarity': ''}]
2025-04-07 23:53:01 - INFO - [feedback_manager.py:280] - [{'feedback_id': 2, 'query_text': '', 'sql_query': '', 'results_summary': '', 'workspace': '', 'feedback_rating': 1, 'created_at': '', 'tables_used': [], 'is_manual_sample': False, 'similarity': ''}, {'feedback_id': 1, 'query_text': '', 'sql_query': '', 'results_summary': '', 'workspace': '', 'feedback_rating': 1, 'created_at': '', 'tables_used': [], 'is_manual_sample': False, 'similarity': ''}]
2025-04-07 23:53:01,560 [INFO] text2sql.feedback [feedback_manager.py:286]: Found 2 initial candidates from vector search
2025-04-07 23:53:01 - INFO - [feedback_manager.py:286] - Found 2 initial candidates from vector search
2025-04-07 23:53:01,561 [INFO] text2sql.feedback [feedback_manager.py:290]: Stage 2: Reranking 2 candidates
2025-04-07 23:53:01 - INFO - [feedback_manager.py:290] - Stage 2: Reranking 2 candidates
2025-04-07 23:53:01,562 [INFO] text2sql.feedback [feedback_manager.py:118]: Loading reranking model 'cross-encoder/ms-marco-MiniLM-L-6-v2'
2025-04-07 23:53:01 - INFO - [feedback_manager.py:118] - Loading reranking model 'cross-encoder/ms-marco-MiniLM-L-6-v2'
2025-04-07 23:53:02,027 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:53:02] "GET /api/query/progress/a85b081e-8a14-4fb5-86b0-213d04cd7cdc HTTP/1.1" 200 -
2025-04-07 23:53:02,772 [INFO] text2sql.feedback [feedback_manager.py:122]: Reranking model loaded in 1.21s
2025-04-07 23:53:02 - INFO - [feedback_manager.py:122] - Reranking model loaded in 1.21s
2025-04-07 23:53:02,772 [INFO] text2sql.feedback [feedback_manager.py:296]: [('get me count of customers by order month', ''), ('get me count of customers by order month', '')]
2025-04-07 23:53:02 - INFO - [feedback_manager.py:296] - [('get me count of customers by order month', ''), ('get me count of customers by order month', '')]
2025-04-07 23:53:02,789 [INFO] text2sql.feedback [feedback_manager.py:304]: [{'feedback_id': 2, 'query_text': '', 'sql_query': '', 'results_summary': '', 'workspace': '', 'feedback_rating': 1, 'created_at': '', 'tables_used': [], 'is_manual_sample': False, 'similarity': '', 'rerank_score': -10.036384582519531}, {'feedback_id': 1, 'query_text': '', 'sql_query': '', 'results_summary': '', 'workspace': '', 'feedback_rating': 1, 'created_at': '', 'tables_used': [], 'is_manual_sample': False, 'similarity': '', 'rerank_score': -10.036384582519531}]
2025-04-07 23:53:02 - INFO - [feedback_manager.py:304] - [{'feedback_id': 2, 'query_text': '', 'sql_query': '', 'results_summary': '', 'workspace': '', 'feedback_rating': 1, 'created_at': '', 'tables_used': [], 'is_manual_sample': False, 'similarity': '', 'rerank_score': -10.036384582519531}, {'feedback_id': 1, 'query_text': '', 'sql_query': '', 'results_summary': '', 'workspace': '', 'feedback_rating': 1, 'created_at': '', 'tables_used': [], 'is_manual_sample': False, 'similarity': '', 'rerank_score': -10.036384582519531}]
2025-04-07 23:53:02,789 [WARNING] text2sql.feedback [feedback_manager.py:316]: No candidates with positive reranking scores, returning vector search results
2025-04-07 23:53:02 - WARNING - [feedback_manager.py:316] - No candidates with positive reranking scores, returning vector search results
2025-04-07 23:53:02,791 [INFO] text2sql.sql_generator [sql_generator.py:280]: Found 1 similar queries with reranking
2025-04-07 23:53:02,791 [INFO] text2sql.sql_generator [sql_generator.py:302]: Added similar query #1 from feedback (score: -10.0364): ...
2025-04-07 23:53:02,792 [INFO] text2sql.azure [azure_client.py:35]: SQL generation started for query: 'get me count of customers by order month'
2025-04-07 23:53:02 - INFO - [azure_client.py:35] - SQL generation started for query: 'get me count of customers by order month'
2025-04-07 23:53:02,793 [INFO] text2sql.azure [azure_client.py:69]: Including schema information (404 chars)
2025-04-07 23:53:02 - INFO - [azure_client.py:69] - Including schema information (404 chars)
2025-04-07 23:53:02,794 [INFO] text2sql.azure [azure_client.py:76]: Including 1 join conditions
2025-04-07 23:53:02 - INFO - [azure_client.py:76] - Including 1 join conditions
2025-04-07 23:53:02,794 [INFO] text2sql.azure [azure_client.py:97]: Including 1 SQL examples from feedback similarity search
2025-04-07 23:53:02 - INFO - [azure_client.py:97] - Including 1 SQL examples from feedback similarity search
2025-04-07 23:53:02,795 [INFO] text2sql.azure [azure_client.py:114]: PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER): Unique customer identifier\nPrimary Key(s): customer_id\n\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER): Unique order identifier, customer_id (INTEGER): Reference to customer who placed the order, order_date (TEXT): Date when order was placed\nPrimary Key(s): order_id\n"}, {'role': 'user', 'content': 'Use the following pre-defined join conditions when joining these tables:\n- When joining customers with orders, use: INNER JOIN orders ON customers.customer_id = orders.customer_id\n'}, {'role': 'user', 'content': 'Here are some similar queries that were previously successful:\nQuestion: \nSQL: \n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me count of customers by order month'}]
2025-04-07 23:53:02 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER): Unique customer identifier\nPrimary Key(s): customer_id\n\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER): Unique order identifier, customer_id (INTEGER): Reference to customer who placed the order, order_date (TEXT): Date when order was placed\nPrimary Key(s): order_id\n"}, {'role': 'user', 'content': 'Use the following pre-defined join conditions when joining these tables:\n- When joining customers with orders, use: INNER JOIN orders ON customers.customer_id = orders.customer_id\n'}, {'role': 'user', 'content': 'Here are some similar queries that were previously successful:\nQuestion: \nSQL: \n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me count of customers by order month'}]
2025-04-07 23:53:02,796 [INFO] text2sql.llm_engine [llm_engine.py:56]: [SQL_GEN] Completion generation started
2025-04-07 23:53:02 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-07 23:53:03,368 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:53:03] "GET /api/query/progress/a85b081e-8a14-4fb5-86b0-213d04cd7cdc HTTP/1.1" 200 -
2025-04-07 23:53:05,701 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:53:05] "GET /api/query/progress/a85b081e-8a14-4fb5-86b0-213d04cd7cdc HTTP/1.1" 200 -
2025-04-07 23:53:07,031 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:53:07] "GET /api/query/progress/a85b081e-8a14-4fb5-86b0-213d04cd7cdc HTTP/1.1" 200 -
2025-04-07 23:53:07,746 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:53:07] "GET /api/query/progress/a85b081e-8a14-4fb5-86b0-213d04cd7cdc HTTP/1.1" 200 -
2025-04-07 23:53:07,818 [INFO] text2sql.llm_engine [llm_engine.py:119]: [SQL_GEN] Completion generation completed in 5.02s
2025-04-07 23:53:07 - INFO - [llm_engine.py:119] - [SQL_GEN] Completion generation completed in 5.02s
2025-04-07 23:53:07,819 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-07 23:53:07 - INFO - [llm_engine.py:120] - **************************
2025-04-07 23:53:07,820 [INFO] text2sql.azure [azure_client.py:150]: Parsing SQL from model response
2025-04-07 23:53:07 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-07 23:53:07,821 [INFO] text2sql.azure [azure_client.py:157]: Found SQL code block in response
2025-04-07 23:53:07 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-07 23:53:07,822 [INFO] text2sql.azure [azure_client.py:171]: Extracted SQL query (244 chars) and explanation (122 chars)
2025-04-07 23:53:07 - INFO - [azure_client.py:171] - Extracted SQL query (244 chars) and explanation (122 chars)
2025-04-07 23:53:07,823 [INFO] text2sql.azure [azure_client.py:124]: Generated SQL: SELECT 
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id
GROUP BY 
    order_month
ORDER BY 
    order_month;
2025-04-07 23:53:07 - INFO - [azure_client.py:124] - Generated SQL: SELECT 
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id
GROUP BY 
    order_month
ORDER BY 
    order_month;
2025-04-07 23:53:07,825 [INFO] text2sql.azure [azure_client.py:132]: SQL generation completed in 5.03s
2025-04-07 23:53:07 - INFO - [azure_client.py:132] - SQL generation completed in 5.03s
2025-04-07 23:53:07,826 [INFO] text2sql.database [database.py:65]: Executing SQL query: SELECT 
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id
GROUP BY 
    order_month
ORDER BY 
    order_month;
2025-04-07 23:53:07 - INFO - [database.py:65] - Executing SQL query: SELECT 
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id
GROUP BY 
    order_month
ORDER BY 
    order_month;
2025-04-07 23:53:07,829 [INFO] text2sql.database [database.py:86]: Query returned 2 rows with 2 columns
2025-04-07 23:53:07 - INFO - [database.py:86] - Query returned 2 rows with 2 columns
2025-04-07 23:53:07,832 [INFO] text2sql.database [database.py:95]: Query processing completed in 0.01s
2025-04-07 23:53:07 - INFO - [database.py:95] - Query processing completed in 0.01s
2025-04-07 23:53:07,834 [INFO] text2sql.sql_generator [sql_generator.py:376]: SQL generation completed in 14.85s
2025-04-07 23:53:07,835 [INFO] text2sql.sql_generator [sql_generator.py:125]: Query processing completed in 14.85s
2025-04-07 23:53:09,048 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:53:09] "GET /api/query/progress/a85b081e-8a14-4fb5-86b0-213d04cd7cdc HTTP/1.1" 200 -
2025-04-07 23:54:38,981 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/utils/vector_store.py', reloading
2025-04-07 23:54:38,982 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/utils/vector_store.py', reloading
2025-04-07 23:54:38,993 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/utils/vector_store.py', reloading
2025-04-07 23:54:39,994 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-07 23:54:39,994 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-07 23:54:39,994 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-07 23:54:39,995 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-07 23:54:39,995 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-07 23:54:39 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-07 23:54:39,995 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-07 23:54:39 - INFO - [database.py:258] - Closing database connection
2025-04-07 23:54:39,996 [INFO] text2sql.feedback [feedback_manager.py:751]: Closing database connections
2025-04-07 23:54:39 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-07 23:54:39,996 [INFO] text2sql.vector [vector_store.py:288]: Closing vector database connection
2025-04-07 23:54:39 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-07 23:54:40,976 [INFO] werkzeug [_internal.py:224]:  * Restarting with watchdog (inotify)
2025-04-07 23:54:48,875 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 23:54:48,875 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 23:54:48,876 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 23:54:48,876 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 23:54:48,876 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-07 23:54:48,886 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 23:54:48,888 [INFO] text2sql [app.py:67]: Debug logging enabled for SQL generator and agents
2025-04-07 23:54:48 - INFO - [app.py:67] - Debug logging enabled for SQL generator and agents
2025-04-07 23:54:48,891 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 23:54:48 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 23:54:48,891 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 23:54:48 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 23:54:48,938 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 23:54:48 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 23:54:48,939 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 23:54:48,939 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 23:54:48,939 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 23:54:48,940 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 23:54:48,940 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 23:54:48 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 23:54:48,940 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 23:54:48 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 23:54:48,983 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 23:54:48 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 23:54:48,984 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 23:54:48,984 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 23:54:48,984 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 23:54:48,984 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 23:54:48,985 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 23:54:48 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 23:54:48,985 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 23:54:48 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 23:54:49,033 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 23:54:49 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 23:54:49,034 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 23:54:49,034 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 23:54:49,034 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 23:54:49,035 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 23:54:49,035 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-07 23:54:49 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-07 23:54:49,035 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 23:54:49 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-07 23:54:49,035 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-07 23:54:49 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-07 23:54:49,082 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-07 23:54:49 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-07 23:54:49,082 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-07 23:54:49 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-07 23:54:49,083 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-07 23:54:49 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-07 23:54:49,083 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-07 23:54:49,083 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-07 23:54:49,083 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-07 23:54:49,084 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-07 23:54:49,084 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 23:54:49 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-07 23:54:49,123 [WARNING] werkzeug [_internal.py:224]:  * Debugger is active!
2025-04-07 23:54:49,124 [INFO] werkzeug [_internal.py:224]:  * Debugger PIN: 774-546-021
2025-04-07 23:54:49,870 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'get me count of customers by order month'
2025-04-07 23:54:49,872 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:54:49] "POST /api/query HTTP/1.1" 200 -
2025-04-07 23:54:49,873 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'get me count of customers by order month'
2025-04-07 23:54:49,875 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-07 23:54:49,878 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.01s
2025-04-07 23:54:49,879 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-07 23:54:49,881 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-07 23:54:49,882 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-07 23:54:49 - INFO - [database.py:44] - Attempting database connection
2025-04-07 23:54:49,886 [INFO] text2sql.database [database.py:48]: Database connection established in 0.00s
2025-04-07 23:54:49 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-07 23:54:49,889 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'get me count of customers by order month'
2025-04-07 23:54:49,890 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-07 23:54:49,892 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-07 23:54:49,893 [INFO] text2sql.llm_engine [llm_engine.py:56]: [TABLE] Completion generation started
2025-04-07 23:54:49 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-07 23:54:50,542 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:54:50] "GET /api/query/progress/d739f4c4-49d2-4f8d-be8c-c2927fe206a2 HTTP/1.1" 200 -
2025-04-07 23:54:51,730 [INFO] text2sql.llm_engine [llm_engine.py:119]: [TABLE] Completion generation completed in 1.84s
2025-04-07 23:54:51 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 1.84s
2025-04-07 23:54:51,740 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-07 23:54:51 - INFO - [llm_engine.py:120] - **************************
2025-04-07 23:54:51,742 [INFO] text2sql.agents.table [table_agent.py:69]: Raw model response: 'customers, orders'
2025-04-07 23:54:51,742 [INFO] text2sql.agents.table [table_agent.py:90]: Table selection completed in 1.85s. Selected: customers, orders
2025-04-07 23:54:51,743 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'get me count of customers by order month'
2025-04-07 23:54:51,744 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: customers, orders
2025-04-07 23:54:51,744 [INFO] text2sql.agents.column [column_agent.py:94]: Sending request to AI model for column selection
2025-04-07 23:54:51,744 [INFO] text2sql.llm_engine [llm_engine.py:56]: [COLUMN] Completion generation started
2025-04-07 23:54:51 - INFO - [llm_engine.py:56] - [COLUMN] Completion generation started
2025-04-07 23:54:51,778 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:54:51] "GET /api/query/progress/d739f4c4-49d2-4f8d-be8c-c2927fe206a2 HTTP/1.1" 200 -
2025-04-07 23:54:52,427 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:54:52] "GET /api/query/progress/d739f4c4-49d2-4f8d-be8c-c2927fe206a2 HTTP/1.1" 200 -
2025-04-07 23:54:53,670 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:54:53] "GET /api/query/progress/d739f4c4-49d2-4f8d-be8c-c2927fe206a2 HTTP/1.1" 200 -
2025-04-07 23:54:53,689 [INFO] text2sql.llm_engine [llm_engine.py:119]: [COLUMN] Completion generation completed in 1.94s
2025-04-07 23:54:53 - INFO - [llm_engine.py:119] - [COLUMN] Completion generation completed in 1.94s
2025-04-07 23:54:53,689 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-07 23:54:53 - INFO - [llm_engine.py:120] - **************************
2025-04-07 23:54:53,690 [INFO] text2sql.agents.column [column_agent.py:99]: Raw model response: '{
  "customers": [
    "customer_id"
  ],
  "orders": [
    "order_id",
    "customer_id",
    "order_date"
  ]
}'
2025-04-07 23:54:53,691 [INFO] text2sql.agents.column [column_agent.py:139]: Parsing column selection from model response
2025-04-07 23:54:53,691 [INFO] text2sql.agents.column [column_agent.py:149]: Parsed column selection JSON: {"customers": ["customer_id"], "orders": ["order_id", "customer_id", "order_date"]}
2025-04-07 23:54:53,692 [INFO] text2sql.agents.column [column_agent.py:111]: Table 'customers': Pruned 10 columns, kept 1/11
2025-04-07 23:54:53,692 [INFO] text2sql.agents.column [column_agent.py:111]: Table 'orders': Pruned 2 columns, kept 3/5
2025-04-07 23:54:53,693 [INFO] text2sql.agents.column [column_agent.py:197]: Building pruned schema
2025-04-07 23:54:53,693 [INFO] text2sql.agents.column [column_agent.py:226]: Built pruned schema (404 chars)
2025-04-07 23:54:53,693 [INFO] text2sql.agents.column [column_agent.py:120]: Column pruning completed in 1.95s
2025-04-07 23:54:53,694 [INFO] text2sql.sql_generator [sql_generator.py:237]: Found 1 join conditions for the relevant tables
2025-04-07 23:54:53,695 [INFO] text2sql.feedback [feedback_manager.py:260]: Stage 1: Vector search for 'get me count of customers by order month...'
2025-04-07 23:54:53 - INFO - [feedback_manager.py:260] - Stage 1: Vector search for 'get me count of customers by order month...'
2025-04-07 23:54:53,696 [INFO] text2sql.feedback [feedback_manager.py:74]: Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-07 23:54:53 - INFO - [feedback_manager.py:74] - Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-07 23:54:54,326 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:54:54] "GET /api/query/progress/d739f4c4-49d2-4f8d-be8c-c2927fe206a2 HTTP/1.1" 200 -
2025-04-07 23:54:55,573 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:54:55] "GET /api/query/progress/d739f4c4-49d2-4f8d-be8c-c2927fe206a2 HTTP/1.1" 200 -
2025-04-07 23:54:56,214 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:54:56] "GET /api/query/progress/d739f4c4-49d2-4f8d-be8c-c2927fe206a2 HTTP/1.1" 200 -
2025-04-07 23:54:56,346 [INFO] text2sql.feedback [feedback_manager.py:77]: Embedding model loaded in 2.65s
2025-04-07 23:54:56 - INFO - [feedback_manager.py:77] - Embedding model loaded in 2.65s
2025-04-07 23:54:56,377 [INFO] text2sql.vector [vector_store.py:38]: Connecting to vector database at ./vector_store.db
2025-04-07 23:54:56 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-07 23:54:57,396 [DEBUG] pymilvus.milvus_client.milvus_client [milvus_client.py:728]: Created new connection using: 80c61cba6f9c4ee5bda28ab09513a0ff
2025-04-07 23:54:57,396 [INFO] text2sql.vector [vector_store.py:42]: Vector database connection established in 1.02s
2025-04-07 23:54:57 - INFO - [vector_store.py:42] - Vector database connection established in 1.02s
2025-04-07 23:54:57,399 [INFO] text2sql.vector [vector_store.py:75]: Collection 'query_embeddings' already exists
2025-04-07 23:54:57 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-07 23:54:57,442 [INFO] text2sql.vector [vector_store.py:163]: **************[{'id': 2, 'distance': 1.0, 'entity': {'query_text': 'get me count of customers by order month', 'sql_query': "SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;", 'results_summary': 'Returned 2 rows with 2 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'tables_used': '', 'is_manual_sample': True, 'created_at': '2025-04-07 23:50:45', 'id': 2}}, {'id': 1, 'distance': 0.5187309980392456, 'entity': {'query_text': 'get me all the customers', 'sql_query': 'SELECT * FROM customers;', 'results_summary': 'Returned 5 rows with 11 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'tables_used': '', 'is_manual_sample': False, 'created_at': '2025-04-05 15:17:11', 'id': 1}}]
2025-04-07 23:54:57 - INFO - [vector_store.py:163] - **************[{'id': 2, 'distance': 1.0, 'entity': {'query_text': 'get me count of customers by order month', 'sql_query': "SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;", 'results_summary': 'Returned 2 rows with 2 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'tables_used': '', 'is_manual_sample': True, 'created_at': '2025-04-07 23:50:45', 'id': 2}}, {'id': 1, 'distance': 0.5187309980392456, 'entity': {'query_text': 'get me all the customers', 'sql_query': 'SELECT * FROM customers;', 'results_summary': 'Returned 5 rows with 11 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'tables_used': '', 'is_manual_sample': False, 'created_at': '2025-04-05 15:17:11', 'id': 1}}]
2025-04-07 23:54:57,442 [INFO] text2sql.feedback [feedback_manager.py:280]: [{'feedback_id': 2, 'query_text': '', 'sql_query': '', 'results_summary': '', 'workspace': '', 'feedback_rating': 1, 'created_at': '', 'tables_used': [], 'is_manual_sample': False, 'similarity': ''}, {'feedback_id': 1, 'query_text': '', 'sql_query': '', 'results_summary': '', 'workspace': '', 'feedback_rating': 1, 'created_at': '', 'tables_used': [], 'is_manual_sample': False, 'similarity': ''}]
2025-04-07 23:54:57 - INFO - [feedback_manager.py:280] - [{'feedback_id': 2, 'query_text': '', 'sql_query': '', 'results_summary': '', 'workspace': '', 'feedback_rating': 1, 'created_at': '', 'tables_used': [], 'is_manual_sample': False, 'similarity': ''}, {'feedback_id': 1, 'query_text': '', 'sql_query': '', 'results_summary': '', 'workspace': '', 'feedback_rating': 1, 'created_at': '', 'tables_used': [], 'is_manual_sample': False, 'similarity': ''}]
2025-04-07 23:54:57,443 [INFO] text2sql.feedback [feedback_manager.py:286]: Found 2 initial candidates from vector search
2025-04-07 23:54:57 - INFO - [feedback_manager.py:286] - Found 2 initial candidates from vector search
2025-04-07 23:54:57,444 [INFO] text2sql.feedback [feedback_manager.py:290]: Stage 2: Reranking 2 candidates
2025-04-07 23:54:57 - INFO - [feedback_manager.py:290] - Stage 2: Reranking 2 candidates
2025-04-07 23:54:57,445 [INFO] text2sql.feedback [feedback_manager.py:118]: Loading reranking model 'cross-encoder/ms-marco-MiniLM-L-6-v2'
2025-04-07 23:54:57 - INFO - [feedback_manager.py:118] - Loading reranking model 'cross-encoder/ms-marco-MiniLM-L-6-v2'
2025-04-07 23:54:57,456 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:54:57] "GET /api/query/progress/d739f4c4-49d2-4f8d-be8c-c2927fe206a2 HTTP/1.1" 200 -
2025-04-07 23:54:58,105 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:54:58] "GET /api/query/progress/d739f4c4-49d2-4f8d-be8c-c2927fe206a2 HTTP/1.1" 200 -
2025-04-07 23:54:58,521 [INFO] text2sql.feedback [feedback_manager.py:122]: Reranking model loaded in 1.08s
2025-04-07 23:54:58 - INFO - [feedback_manager.py:122] - Reranking model loaded in 1.08s
2025-04-07 23:54:58,522 [INFO] text2sql.feedback [feedback_manager.py:296]: [('get me count of customers by order month', ''), ('get me count of customers by order month', '')]
2025-04-07 23:54:58 - INFO - [feedback_manager.py:296] - [('get me count of customers by order month', ''), ('get me count of customers by order month', '')]
2025-04-07 23:54:58,537 [INFO] text2sql.feedback [feedback_manager.py:304]: [{'feedback_id': 2, 'query_text': '', 'sql_query': '', 'results_summary': '', 'workspace': '', 'feedback_rating': 1, 'created_at': '', 'tables_used': [], 'is_manual_sample': False, 'similarity': '', 'rerank_score': -10.036384582519531}, {'feedback_id': 1, 'query_text': '', 'sql_query': '', 'results_summary': '', 'workspace': '', 'feedback_rating': 1, 'created_at': '', 'tables_used': [], 'is_manual_sample': False, 'similarity': '', 'rerank_score': -10.036384582519531}]
2025-04-07 23:54:58 - INFO - [feedback_manager.py:304] - [{'feedback_id': 2, 'query_text': '', 'sql_query': '', 'results_summary': '', 'workspace': '', 'feedback_rating': 1, 'created_at': '', 'tables_used': [], 'is_manual_sample': False, 'similarity': '', 'rerank_score': -10.036384582519531}, {'feedback_id': 1, 'query_text': '', 'sql_query': '', 'results_summary': '', 'workspace': '', 'feedback_rating': 1, 'created_at': '', 'tables_used': [], 'is_manual_sample': False, 'similarity': '', 'rerank_score': -10.036384582519531}]
2025-04-07 23:54:58,538 [WARNING] text2sql.feedback [feedback_manager.py:316]: No candidates with positive reranking scores, returning vector search results
2025-04-07 23:54:58 - WARNING - [feedback_manager.py:316] - No candidates with positive reranking scores, returning vector search results
2025-04-07 23:54:58,540 [INFO] text2sql.sql_generator [sql_generator.py:280]: Found 1 similar queries with reranking
2025-04-07 23:54:58,541 [INFO] text2sql.sql_generator [sql_generator.py:302]: Added similar query #1 from feedback (score: -10.0364): ...
2025-04-07 23:54:58,541 [INFO] text2sql.azure [azure_client.py:35]: SQL generation started for query: 'get me count of customers by order month'
2025-04-07 23:54:58 - INFO - [azure_client.py:35] - SQL generation started for query: 'get me count of customers by order month'
2025-04-07 23:54:58,542 [INFO] text2sql.azure [azure_client.py:69]: Including schema information (404 chars)
2025-04-07 23:54:58 - INFO - [azure_client.py:69] - Including schema information (404 chars)
2025-04-07 23:54:58,543 [INFO] text2sql.azure [azure_client.py:76]: Including 1 join conditions
2025-04-07 23:54:58 - INFO - [azure_client.py:76] - Including 1 join conditions
2025-04-07 23:54:58,544 [INFO] text2sql.azure [azure_client.py:97]: Including 1 SQL examples from feedback similarity search
2025-04-07 23:54:58 - INFO - [azure_client.py:97] - Including 1 SQL examples from feedback similarity search
2025-04-07 23:54:58,546 [INFO] text2sql.azure [azure_client.py:114]: PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER): Unique customer identifier\nPrimary Key(s): customer_id\n\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER): Unique order identifier, customer_id (INTEGER): Reference to customer who placed the order, order_date (TEXT): Date when order was placed\nPrimary Key(s): order_id\n"}, {'role': 'user', 'content': 'Use the following pre-defined join conditions when joining these tables:\n- When joining customers with orders, use: INNER JOIN orders ON customers.customer_id = orders.customer_id\n'}, {'role': 'user', 'content': 'Here are some similar queries that were previously successful:\nQuestion: \nSQL: \n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me count of customers by order month'}]
2025-04-07 23:54:58 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER): Unique customer identifier\nPrimary Key(s): customer_id\n\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER): Unique order identifier, customer_id (INTEGER): Reference to customer who placed the order, order_date (TEXT): Date when order was placed\nPrimary Key(s): order_id\n"}, {'role': 'user', 'content': 'Use the following pre-defined join conditions when joining these tables:\n- When joining customers with orders, use: INNER JOIN orders ON customers.customer_id = orders.customer_id\n'}, {'role': 'user', 'content': 'Here are some similar queries that were previously successful:\nQuestion: \nSQL: \n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me count of customers by order month'}]
2025-04-07 23:54:58,547 [INFO] text2sql.llm_engine [llm_engine.py:56]: [SQL_GEN] Completion generation started
2025-04-07 23:54:58 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-07 23:54:59,351 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:54:59] "GET /api/query/progress/d739f4c4-49d2-4f8d-be8c-c2927fe206a2 HTTP/1.1" 200 -
2025-04-07 23:55:00,001 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:55:00] "GET /api/query/progress/d739f4c4-49d2-4f8d-be8c-c2927fe206a2 HTTP/1.1" 200 -
2025-04-07 23:55:00,861 [INFO] text2sql.llm_engine [llm_engine.py:119]: [SQL_GEN] Completion generation completed in 2.31s
2025-04-07 23:55:00 - INFO - [llm_engine.py:119] - [SQL_GEN] Completion generation completed in 2.31s
2025-04-07 23:55:00,862 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-07 23:55:00 - INFO - [llm_engine.py:120] - **************************
2025-04-07 23:55:00,865 [INFO] text2sql.azure [azure_client.py:150]: Parsing SQL from model response
2025-04-07 23:55:00 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-07 23:55:00,866 [INFO] text2sql.azure [azure_client.py:157]: Found SQL code block in response
2025-04-07 23:55:00 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-07 23:55:00,867 [INFO] text2sql.azure [azure_client.py:171]: Extracted SQL query (244 chars) and explanation (104 chars)
2025-04-07 23:55:00 - INFO - [azure_client.py:171] - Extracted SQL query (244 chars) and explanation (104 chars)
2025-04-07 23:55:00,869 [INFO] text2sql.azure [azure_client.py:124]: Generated SQL: SELECT 
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id
GROUP BY 
    order_month
ORDER BY 
    order_month;
2025-04-07 23:55:00 - INFO - [azure_client.py:124] - Generated SQL: SELECT 
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id
GROUP BY 
    order_month
ORDER BY 
    order_month;
2025-04-07 23:55:00,871 [INFO] text2sql.azure [azure_client.py:132]: SQL generation completed in 2.33s
2025-04-07 23:55:00 - INFO - [azure_client.py:132] - SQL generation completed in 2.33s
2025-04-07 23:55:00,872 [INFO] text2sql.database [database.py:65]: Executing SQL query: SELECT 
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id
GROUP BY 
    order_month
ORDER BY 
    order_month;
2025-04-07 23:55:00 - INFO - [database.py:65] - Executing SQL query: SELECT 
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id
GROUP BY 
    order_month
ORDER BY 
    order_month;
2025-04-07 23:55:00,876 [INFO] text2sql.database [database.py:86]: Query returned 2 rows with 2 columns
2025-04-07 23:55:00 - INFO - [database.py:86] - Query returned 2 rows with 2 columns
2025-04-07 23:55:00,879 [INFO] text2sql.database [database.py:95]: Query processing completed in 0.01s
2025-04-07 23:55:00 - INFO - [database.py:95] - Query processing completed in 0.01s
2025-04-07 23:55:00,882 [INFO] text2sql.sql_generator [sql_generator.py:376]: SQL generation completed in 11.00s
2025-04-07 23:55:00,882 [INFO] text2sql.sql_generator [sql_generator.py:125]: Query processing completed in 11.01s
2025-04-07 23:55:01,239 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [07/Apr/2025 23:55:01] "GET /api/query/progress/d739f4c4-49d2-4f8d-be8c-c2927fe206a2 HTTP/1.1" 200 -
2025-04-07 23:59:18,300 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-07 23:59:18,301 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-07 23:59:18,301 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-07 23:59:18,301 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-07 23:59:18,301 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-07 23:59:18 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-07 23:59:18,302 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-07 23:59:18 - INFO - [database.py:258] - Closing database connection
2025-04-07 23:59:18,302 [INFO] text2sql.feedback [feedback_manager.py:751]: Closing database connections
2025-04-07 23:59:18 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-07 23:59:18,303 [INFO] text2sql.vector [vector_store.py:288]: Closing vector database connection
2025-04-07 23:59:18 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-07 23:59:18,495 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-07 23:59:18,496 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-07 23:59:18,497 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-07 23:59:18,498 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-07 23:59:18,498 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-07 23:59:18 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-07 23:59:18,500 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-07 23:59:18 - INFO - [database.py:258] - Closing database connection
2025-04-07 23:59:18,500 [INFO] text2sql.feedback [feedback_manager.py:750]: Closing database connections
2025-04-07 23:59:18 - INFO - [feedback_manager.py:750] - Closing database connections
2025-04-07 23:59:18,501 [INFO] text2sql.vector [vector_store.py:288]: Closing vector database connection
2025-04-07 23:59:18 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-08 00:01:52,283 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:01:52,285 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-08 00:01:52,286 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:01:52,286 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-08 00:01:52,287 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 00:01:52,318 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:01:52,321 [INFO] text2sql [app.py:67]: Debug logging enabled for SQL generator and agents
2025-04-08 00:01:52 - INFO - [app.py:67] - Debug logging enabled for SQL generator and agents
2025-04-08 00:01:52,331 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:01:52 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:01:52,332 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-08 00:01:52 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:01:52,497 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-08 00:01:52 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:01:52,498 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:01:52,499 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-08 00:01:52,499 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:01:52,500 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-08 00:01:52,500 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:01:52 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:01:52,501 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-08 00:01:52 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:01:52,610 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-08 00:01:52 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:01:52,611 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:01:52,611 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-08 00:01:52,611 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:01:52,612 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-08 00:01:52,612 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:01:52 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:01:52,613 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-08 00:01:52 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:01:52,730 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-08 00:01:52 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:01:52,731 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:01:52,732 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-08 00:01:52,732 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:01:52,732 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-08 00:01:52,733 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-08 00:01:52 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-08 00:01:52,733 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:01:52 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:01:52,734 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-08 00:01:52 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:01:52,826 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-08 00:01:52 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:01:52,827 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-08 00:01:52 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-08 00:01:52,827 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:01:52 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:01:52,828 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:01:52,829 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-08 00:01:52,829 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:01:52,829 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-08 00:01:52,830 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:01:52 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:01:52,927 [INFO] werkzeug [_internal.py:224]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.27.251.157:5000
2025-04-08 00:01:52,928 [INFO] werkzeug [_internal.py:224]: [33mPress CTRL+C to quit[0m
2025-04-08 00:01:52,952 [INFO] werkzeug [_internal.py:224]:  * Restarting with watchdog (inotify)
2025-04-08 00:02:18,914 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:02:18,915 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-08 00:02:18,916 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:02:18,926 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-08 00:02:18,927 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 00:02:19,004 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:02:19,018 [INFO] text2sql [app.py:67]: Debug logging enabled for SQL generator and agents
2025-04-08 00:02:19 - INFO - [app.py:67] - Debug logging enabled for SQL generator and agents
2025-04-08 00:02:19,034 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:02:19 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:02:19,046 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-08 00:02:19 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:02:19,611 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-08 00:02:19 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:02:19,612 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:02:19,623 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-08 00:02:19,623 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:02:19,624 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-08 00:02:19,624 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:02:19 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:02:19,625 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-08 00:02:19 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:02:20,122 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-08 00:02:20 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:02:20,123 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:02:20,124 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-08 00:02:20,135 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:02:20,136 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-08 00:02:20,136 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:02:20 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:02:20,137 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-08 00:02:20 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:02:20,653 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-08 00:02:20 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:02:20,654 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:02:20,666 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-08 00:02:20,667 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:02:20,667 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-08 00:02:20,667 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-08 00:02:20 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-08 00:02:20,668 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:02:20 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:02:20,668 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-08 00:02:20 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:02:21,197 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-08 00:02:21 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:02:21,197 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-08 00:02:21 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-08 00:02:21,198 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:02:21 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:02:21,198 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:02:21,199 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-08 00:02:21,199 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:02:21,200 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-08 00:02:21,200 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:02:21 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:02:21,532 [WARNING] werkzeug [_internal.py:224]:  * Debugger is active!
2025-04-08 00:02:21,538 [INFO] werkzeug [_internal.py:224]:  * Debugger PIN: 774-546-021
2025-04-08 00:02:40,292 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'get me count of customers by order month'
2025-04-08 00:02:40,297 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:02:40] "POST /api/query HTTP/1.1" 200 -
2025-04-08 00:02:40,298 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'get me count of customers by order month'
2025-04-08 00:02:40,315 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-08 00:02:40,347 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.05s
2025-04-08 00:02:40,366 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-08 00:02:40,370 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-08 00:02:40,388 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-08 00:02:40 - INFO - [database.py:44] - Attempting database connection
2025-04-08 00:02:40,399 [INFO] text2sql.database [database.py:48]: Database connection established in 0.01s
2025-04-08 00:02:40 - INFO - [database.py:48] - Database connection established in 0.01s
2025-04-08 00:02:40,414 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'get me count of customers by order month'
2025-04-08 00:02:40,421 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-08 00:02:40,426 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:02:40] "GET / HTTP/1.1" 200 -
2025-04-08 00:02:40,429 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-08 00:02:40,439 [INFO] text2sql.llm_engine [llm_engine.py:56]: [TABLE] Completion generation started
2025-04-08 00:02:40 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-08 00:02:41,043 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:02:41] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-08 00:02:42,342 [INFO] text2sql.llm_engine [llm_engine.py:119]: [TABLE] Completion generation completed in 1.90s
2025-04-08 00:02:42 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 1.90s
2025-04-08 00:02:42,344 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-08 00:02:42 - INFO - [llm_engine.py:120] - **************************
2025-04-08 00:02:42,345 [INFO] text2sql.agents.table [table_agent.py:69]: Raw model response: 'customers, orders'
2025-04-08 00:02:42,346 [INFO] text2sql.agents.table [table_agent.py:90]: Table selection completed in 1.93s. Selected: customers, orders
2025-04-08 00:02:42,348 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'get me count of customers by order month'
2025-04-08 00:02:42,349 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: customers, orders
2025-04-08 00:02:42,349 [INFO] text2sql.agents.column [column_agent.py:94]: Sending request to AI model for column selection
2025-04-08 00:02:42,351 [INFO] text2sql.llm_engine [llm_engine.py:56]: [COLUMN] Completion generation started
2025-04-08 00:02:42 - INFO - [llm_engine.py:56] - [COLUMN] Completion generation started
2025-04-08 00:02:43,587 [INFO] text2sql.llm_engine [llm_engine.py:119]: [COLUMN] Completion generation completed in 1.24s
2025-04-08 00:02:43 - INFO - [llm_engine.py:119] - [COLUMN] Completion generation completed in 1.24s
2025-04-08 00:02:43,588 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-08 00:02:43 - INFO - [llm_engine.py:120] - **************************
2025-04-08 00:02:43,590 [INFO] text2sql.agents.column [column_agent.py:99]: Raw model response: '{
  "customers": ["customer_id"],
  "orders": ["order_id", "customer_id", "order_date"]
}'
2025-04-08 00:02:43,591 [INFO] text2sql.agents.column [column_agent.py:139]: Parsing column selection from model response
2025-04-08 00:02:43,593 [INFO] text2sql.agents.column [column_agent.py:149]: Parsed column selection JSON: {"customers": ["customer_id"], "orders": ["order_id", "customer_id", "order_date"]}
2025-04-08 00:02:43,593 [INFO] text2sql.agents.column [column_agent.py:111]: Table 'customers': Pruned 10 columns, kept 1/11
2025-04-08 00:02:43,595 [INFO] text2sql.agents.column [column_agent.py:111]: Table 'orders': Pruned 2 columns, kept 3/5
2025-04-08 00:02:43,596 [INFO] text2sql.agents.column [column_agent.py:197]: Building pruned schema
2025-04-08 00:02:43,597 [INFO] text2sql.agents.column [column_agent.py:226]: Built pruned schema (404 chars)
2025-04-08 00:02:43,598 [INFO] text2sql.agents.column [column_agent.py:120]: Column pruning completed in 1.25s
2025-04-08 00:02:43,600 [INFO] text2sql.sql_generator [sql_generator.py:237]: Found 1 join conditions for the relevant tables
2025-04-08 00:02:43,601 [INFO] text2sql.feedback [feedback_manager.py:260]: Stage 1: Vector search for 'get me count of customers by order month...'
2025-04-08 00:02:43 - INFO - [feedback_manager.py:260] - Stage 1: Vector search for 'get me count of customers by order month...'
2025-04-08 00:02:43,604 [INFO] text2sql.feedback [feedback_manager.py:74]: Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-08 00:02:43 - INFO - [feedback_manager.py:74] - Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-08 00:02:46,436 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:02:46] "GET /samples HTTP/1.1" 200 -
2025-04-08 00:02:46,881 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:02:46] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-08 00:02:46,888 [INFO] text2sql.feedback [feedback_manager.py:77]: Embedding model loaded in 3.28s
2025-04-08 00:02:46 - INFO - [feedback_manager.py:77] - Embedding model loaded in 3.28s
2025-04-08 00:02:47,087 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:02:47] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-08 00:02:47,221 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:02:47] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-08 00:02:47,252 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:02:47] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-08 00:02:47,259 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:02:47 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:02:47,265 [INFO] text2sql.feedback [feedback_manager.py:49]: Attempting database connection
2025-04-08 00:02:47 - INFO - [feedback_manager.py:49] - Attempting database connection
2025-04-08 00:02:47,281 [INFO] text2sql.feedback [feedback_manager.py:53]: Database connection established in 0.02s
2025-04-08 00:02:47 - INFO - [feedback_manager.py:53] - Database connection established in 0.02s
2025-04-08 00:02:47,297 [INFO] text2sql.vector [vector_store.py:38]: Connecting to vector database at ./vector_store.db
2025-04-08 00:02:47 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-08 00:02:47,764 [INFO] text2sql.vector [vector_store.py:38]: Connecting to vector database at ./vector_store.db
2025-04-08 00:02:47 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-08 00:02:48,552 [DEBUG] pymilvus.milvus_client.milvus_client [milvus_client.py:728]: Created new connection using: 22c6c662d2e54140983a2e15acd4ded8
2025-04-08 00:02:48,552 [INFO] text2sql.vector [vector_store.py:42]: Vector database connection established in 0.79s
2025-04-08 00:02:48 - INFO - [vector_store.py:42] - Vector database connection established in 0.79s
2025-04-08 00:02:48,555 [DEBUG] pymilvus.milvus_client.milvus_client [milvus_client.py:728]: Created new connection using: 19ab30357521478dbeec137aaed06dcf
2025-04-08 00:02:48,556 [INFO] text2sql.vector [vector_store.py:42]: Vector database connection established in 1.26s
2025-04-08 00:02:48 - INFO - [vector_store.py:42] - Vector database connection established in 1.26s
2025-04-08 00:02:48,563 [INFO] text2sql.vector [vector_store.py:75]: Collection 'query_embeddings' already exists
2025-04-08 00:02:48 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-08 00:02:48,567 [INFO] text2sql.vector [vector_store.py:75]: Collection 'query_embeddings' already exists
2025-04-08 00:02:48 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-08 00:02:48,583 [INFO] text2sql.feedback [feedback_manager.py:515]: Retrieved 2 samples (page 1, limit 10)
2025-04-08 00:02:48 - INFO - [feedback_manager.py:515] - Retrieved 2 samples (page 1, limit 10)
2025-04-08 00:02:48,588 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:02:48] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-08 00:02:48,734 [INFO] text2sql.vector [vector_store.py:163]: **************[{'id': 2, 'distance': 1.0, 'entity': {'query_text': 'get me count of customers by order month', 'sql_query': "SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;", 'results_summary': 'Returned 2 rows with 2 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'tables_used': '', 'is_manual_sample': True, 'created_at': '2025-04-07 23:50:45', 'id': 2}}, {'id': 1, 'distance': 0.5187309980392456, 'entity': {'query_text': 'get me all the customers', 'sql_query': 'SELECT * FROM customers;', 'results_summary': 'Returned 5 rows with 11 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'tables_used': '', 'is_manual_sample': False, 'created_at': '2025-04-05 15:17:11', 'id': 1}}]
2025-04-08 00:02:48 - INFO - [vector_store.py:163] - **************[{'id': 2, 'distance': 1.0, 'entity': {'query_text': 'get me count of customers by order month', 'sql_query': "SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;", 'results_summary': 'Returned 2 rows with 2 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'tables_used': '', 'is_manual_sample': True, 'created_at': '2025-04-07 23:50:45', 'id': 2}}, {'id': 1, 'distance': 0.5187309980392456, 'entity': {'query_text': 'get me all the customers', 'sql_query': 'SELECT * FROM customers;', 'results_summary': 'Returned 5 rows with 11 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'tables_used': '', 'is_manual_sample': False, 'created_at': '2025-04-05 15:17:11', 'id': 1}}]
2025-04-08 00:02:48,737 [INFO] text2sql.feedback [feedback_manager.py:280]: [{'feedback_id': 2, 'query_text': 'get me count of customers by order month', 'sql_query': "SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;", 'results_summary': 'Returned 2 rows with 2 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'created_at': '2025-04-07 23:50:45', 'tables_used': [], 'is_manual_sample': True, 'similarity': 1.0}, {'feedback_id': 1, 'query_text': 'get me all the customers', 'sql_query': 'SELECT * FROM customers;', 'results_summary': 'Returned 5 rows with 11 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'created_at': '2025-04-05 15:17:11', 'tables_used': [], 'is_manual_sample': False, 'similarity': 0.5187309980392456}]
2025-04-08 00:02:48 - INFO - [feedback_manager.py:280] - [{'feedback_id': 2, 'query_text': 'get me count of customers by order month', 'sql_query': "SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;", 'results_summary': 'Returned 2 rows with 2 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'created_at': '2025-04-07 23:50:45', 'tables_used': [], 'is_manual_sample': True, 'similarity': 1.0}, {'feedback_id': 1, 'query_text': 'get me all the customers', 'sql_query': 'SELECT * FROM customers;', 'results_summary': 'Returned 5 rows with 11 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'created_at': '2025-04-05 15:17:11', 'tables_used': [], 'is_manual_sample': False, 'similarity': 0.5187309980392456}]
2025-04-08 00:02:48,741 [INFO] text2sql.feedback [feedback_manager.py:286]: Found 2 initial candidates from vector search
2025-04-08 00:02:48 - INFO - [feedback_manager.py:286] - Found 2 initial candidates from vector search
2025-04-08 00:02:48,745 [INFO] text2sql.feedback [feedback_manager.py:290]: Stage 2: Reranking 2 candidates
2025-04-08 00:02:48 - INFO - [feedback_manager.py:290] - Stage 2: Reranking 2 candidates
2025-04-08 00:02:48,748 [INFO] text2sql.feedback [feedback_manager.py:118]: Loading reranking model 'cross-encoder/ms-marco-MiniLM-L-6-v2'
2025-04-08 00:02:48 - INFO - [feedback_manager.py:118] - Loading reranking model 'cross-encoder/ms-marco-MiniLM-L-6-v2'
2025-04-08 00:02:50,133 [INFO] text2sql.feedback [feedback_manager.py:122]: Reranking model loaded in 1.38s
2025-04-08 00:02:50 - INFO - [feedback_manager.py:122] - Reranking model loaded in 1.38s
2025-04-08 00:02:50,134 [INFO] text2sql.feedback [feedback_manager.py:296]: [('get me count of customers by order month', 'get me count of customers by order month'), ('get me count of customers by order month', 'get me all the customers')]
2025-04-08 00:02:50 - INFO - [feedback_manager.py:296] - [('get me count of customers by order month', 'get me count of customers by order month'), ('get me count of customers by order month', 'get me all the customers')]
2025-04-08 00:02:50,235 [INFO] text2sql.feedback [feedback_manager.py:304]: [{'feedback_id': 2, 'query_text': 'get me count of customers by order month', 'sql_query': "SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;", 'results_summary': 'Returned 2 rows with 2 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'created_at': '2025-04-07 23:50:45', 'tables_used': [], 'is_manual_sample': True, 'similarity': 1.0, 'rerank_score': 8.964216232299805}, {'feedback_id': 1, 'query_text': 'get me all the customers', 'sql_query': 'SELECT * FROM customers;', 'results_summary': 'Returned 5 rows with 11 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'created_at': '2025-04-05 15:17:11', 'tables_used': [], 'is_manual_sample': False, 'similarity': 0.5187309980392456, 'rerank_score': -2.0921530723571777}]
2025-04-08 00:02:50 - INFO - [feedback_manager.py:304] - [{'feedback_id': 2, 'query_text': 'get me count of customers by order month', 'sql_query': "SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;", 'results_summary': 'Returned 2 rows with 2 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'created_at': '2025-04-07 23:50:45', 'tables_used': [], 'is_manual_sample': True, 'similarity': 1.0, 'rerank_score': 8.964216232299805}, {'feedback_id': 1, 'query_text': 'get me all the customers', 'sql_query': 'SELECT * FROM customers;', 'results_summary': 'Returned 5 rows with 11 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'created_at': '2025-04-05 15:17:11', 'tables_used': [], 'is_manual_sample': False, 'similarity': 0.5187309980392456, 'rerank_score': -2.0921530723571777}]
2025-04-08 00:02:50,237 [INFO] text2sql.feedback [feedback_manager.py:309]: Found 1 candidates with positive reranking scores
2025-04-08 00:02:50 - INFO - [feedback_manager.py:309] - Found 1 candidates with positive reranking scores
2025-04-08 00:02:50,239 [INFO] text2sql.feedback [feedback_manager.py:313]: Reranking successful, returning top 1 results
2025-04-08 00:02:50 - INFO - [feedback_manager.py:313] - Reranking successful, returning top 1 results
2025-04-08 00:02:50,241 [INFO] text2sql.sql_generator [sql_generator.py:280]: Found 1 similar queries with reranking
2025-04-08 00:02:50,242 [INFO] text2sql.sql_generator [sql_generator.py:302]: Added similar query #1 from manual (score: 8.9642): get me count of customers by order month...
2025-04-08 00:02:50,242 [INFO] text2sql.azure [azure_client.py:35]: SQL generation started for query: 'get me count of customers by order month'
2025-04-08 00:02:50 - INFO - [azure_client.py:35] - SQL generation started for query: 'get me count of customers by order month'
2025-04-08 00:02:50,244 [INFO] text2sql.azure [azure_client.py:69]: Including schema information (404 chars)
2025-04-08 00:02:50 - INFO - [azure_client.py:69] - Including schema information (404 chars)
2025-04-08 00:02:50,244 [INFO] text2sql.azure [azure_client.py:76]: Including 1 join conditions
2025-04-08 00:02:50 - INFO - [azure_client.py:76] - Including 1 join conditions
2025-04-08 00:02:50,244 [INFO] text2sql.azure [azure_client.py:97]: Including 1 SQL examples from manual similarity search
2025-04-08 00:02:50 - INFO - [azure_client.py:97] - Including 1 SQL examples from manual similarity search
2025-04-08 00:02:50,246 [INFO] text2sql.azure [azure_client.py:114]: PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER): Unique customer identifier\nPrimary Key(s): customer_id\n\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER): Unique order identifier, customer_id (INTEGER): Reference to customer who placed the order, order_date (TEXT): Date when order was placed\nPrimary Key(s): order_id\n"}, {'role': 'user', 'content': 'Use the following pre-defined join conditions when joining these tables:\n- When joining customers with orders, use: INNER JOIN orders ON customers.customer_id = orders.customer_id\n'}, {'role': 'user', 'content': "Here are some similar queries that were previously successful:\nQuestion: get me count of customers by order month\nSQL: SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;\n\n"}, {'role': 'user', 'content': 'Convert this question to SQL: get me count of customers by order month'}]
2025-04-08 00:02:50 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER): Unique customer identifier\nPrimary Key(s): customer_id\n\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER): Unique order identifier, customer_id (INTEGER): Reference to customer who placed the order, order_date (TEXT): Date when order was placed\nPrimary Key(s): order_id\n"}, {'role': 'user', 'content': 'Use the following pre-defined join conditions when joining these tables:\n- When joining customers with orders, use: INNER JOIN orders ON customers.customer_id = orders.customer_id\n'}, {'role': 'user', 'content': "Here are some similar queries that were previously successful:\nQuestion: get me count of customers by order month\nSQL: SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;\n\n"}, {'role': 'user', 'content': 'Convert this question to SQL: get me count of customers by order month'}]
2025-04-08 00:02:50,246 [INFO] text2sql.llm_engine [llm_engine.py:56]: [SQL_GEN] Completion generation started
2025-04-08 00:02:50 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-08 00:02:51,372 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:02:51] "GET / HTTP/1.1" 200 -
2025-04-08 00:02:51,826 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:02:51] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-08 00:02:52,971 [INFO] text2sql.llm_engine [llm_engine.py:119]: [SQL_GEN] Completion generation completed in 2.73s
2025-04-08 00:02:52 - INFO - [llm_engine.py:119] - [SQL_GEN] Completion generation completed in 2.73s
2025-04-08 00:02:52,973 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-08 00:02:52 - INFO - [llm_engine.py:120] - **************************
2025-04-08 00:02:52,975 [INFO] text2sql.azure [azure_client.py:150]: Parsing SQL from model response
2025-04-08 00:02:52 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-08 00:02:52,978 [INFO] text2sql.azure [azure_client.py:157]: Found SQL code block in response
2025-04-08 00:02:52 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-08 00:02:52,980 [INFO] text2sql.azure [azure_client.py:171]: Extracted SQL query (244 chars) and explanation (91 chars)
2025-04-08 00:02:52 - INFO - [azure_client.py:171] - Extracted SQL query (244 chars) and explanation (91 chars)
2025-04-08 00:02:52,982 [INFO] text2sql.azure [azure_client.py:124]: Generated SQL: SELECT 
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id
GROUP BY 
    order_month
ORDER BY 
    order_month;
2025-04-08 00:02:52 - INFO - [azure_client.py:124] - Generated SQL: SELECT 
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id
GROUP BY 
    order_month
ORDER BY 
    order_month;
2025-04-08 00:02:52,986 [INFO] text2sql.azure [azure_client.py:132]: SQL generation completed in 2.74s
2025-04-08 00:02:52 - INFO - [azure_client.py:132] - SQL generation completed in 2.74s
2025-04-08 00:02:52,988 [INFO] text2sql.database [database.py:65]: Executing SQL query: SELECT 
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id
GROUP BY 
    order_month
ORDER BY 
    order_month;
2025-04-08 00:02:52 - INFO - [database.py:65] - Executing SQL query: SELECT 
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id
GROUP BY 
    order_month
ORDER BY 
    order_month;
2025-04-08 00:02:52,997 [INFO] text2sql.database [database.py:86]: Query returned 2 rows with 2 columns
2025-04-08 00:02:52 - INFO - [database.py:86] - Query returned 2 rows with 2 columns
2025-04-08 00:02:53,006 [INFO] text2sql.database [database.py:95]: Query processing completed in 0.02s
2025-04-08 00:02:53 - INFO - [database.py:95] - Query processing completed in 0.02s
2025-04-08 00:02:53,010 [INFO] text2sql.sql_generator [sql_generator.py:376]: SQL generation completed in 12.64s
2025-04-08 00:02:53,012 [INFO] text2sql.sql_generator [sql_generator.py:125]: Query processing completed in 12.72s
2025-04-08 00:02:53,014 [ERROR] text2sql [background_tasks.py:62]: Exception while processing query: Method 'rollback()' can't be called here; method '_connection_for_bind()' is already in progress and this would cause an unexpected state change to <SessionTransactionState.CLOSED: 5>
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/user_manager.py", line 514, in log_audit_event
    self.session.commit()
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1903, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 121, in _go
    raise sa_exc.IllegalStateChangeError(
sqlalchemy.exc.IllegalStateChangeError: Method 'commit()' can't be called here; method '_connection_for_bind()' is already in progress and this would cause an unexpected state change to <SessionTransactionState.CLOSED: 5>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/background_tasks.py", line 51, in process_in_background
    self.user_manager.log_audit_event(
  File "/home/vijay/text2sql/src/utils/user_manager.py", line 518, in log_audit_event
    self.session.rollback()
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1865, in rollback
    self._transaction.rollback(_to_root=True)
  File "<string>", line 2, in rollback
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 121, in _go
    raise sa_exc.IllegalStateChangeError(
sqlalchemy.exc.IllegalStateChangeError: Method 'rollback()' can't be called here; method '_connection_for_bind()' is already in progress and this would cause an unexpected state change to <SessionTransactionState.CLOSED: 5>
2025-04-08 00:02:53 - ERROR - [background_tasks.py:62] - Exception while processing query: Method 'rollback()' can't be called here; method '_connection_for_bind()' is already in progress and this would cause an unexpected state change to <SessionTransactionState.CLOSED: 5>
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/user_manager.py", line 514, in log_audit_event
    self.session.commit()
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1903, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 121, in _go
    raise sa_exc.IllegalStateChangeError(
sqlalchemy.exc.IllegalStateChangeError: Method 'commit()' can't be called here; method '_connection_for_bind()' is already in progress and this would cause an unexpected state change to <SessionTransactionState.CLOSED: 5>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/background_tasks.py", line 51, in process_in_background
    self.user_manager.log_audit_event(
  File "/home/vijay/text2sql/src/utils/user_manager.py", line 518, in log_audit_event
    self.session.rollback()
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1865, in rollback
    self._transaction.rollback(_to_root=True)
  File "<string>", line 2, in rollback
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 121, in _go
    raise sa_exc.IllegalStateChangeError(
sqlalchemy.exc.IllegalStateChangeError: Method 'rollback()' can't be called here; method '_connection_for_bind()' is already in progress and this would cause an unexpected state change to <SessionTransactionState.CLOSED: 5>
2025-04-08 00:02:53,493 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'get me count of customers by order month'
2025-04-08 00:02:53,494 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:02:53] "POST /api/query HTTP/1.1" 200 -
2025-04-08 00:02:53,494 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'get me count of customers by order month'
2025-04-08 00:02:53,497 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-08 00:02:53,500 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.01s
2025-04-08 00:02:53,501 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-08 00:02:53,502 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-08 00:02:53,504 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-08 00:02:53 - INFO - [database.py:44] - Attempting database connection
2025-04-08 00:02:53,507 [INFO] text2sql.database [database.py:48]: Database connection established in 0.00s
2025-04-08 00:02:53 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-08 00:02:53,509 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'get me count of customers by order month'
2025-04-08 00:02:53,509 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-08 00:02:53,510 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-08 00:02:53,512 [INFO] text2sql.llm_engine [llm_engine.py:56]: [TABLE] Completion generation started
2025-04-08 00:02:53 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-08 00:02:54,274 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:02:54] "GET /api/query/progress/0b0bc2b5-f8ef-45e0-a25d-288f74f35888 HTTP/1.1" 200 -
2025-04-08 00:02:54,529 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:02:54] "GET /api/query/progress/0b0bc2b5-f8ef-45e0-a25d-288f74f35888 HTTP/1.1" 200 -
2025-04-08 00:02:55,133 [INFO] text2sql.llm_engine [llm_engine.py:119]: [TABLE] Completion generation completed in 1.62s
2025-04-08 00:02:55 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 1.62s
2025-04-08 00:02:55,134 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-08 00:02:55 - INFO - [llm_engine.py:120] - **************************
2025-04-08 00:02:55,137 [INFO] text2sql.agents.table [table_agent.py:69]: Raw model response: 'customers, orders'
2025-04-08 00:02:55,138 [INFO] text2sql.agents.table [table_agent.py:90]: Table selection completed in 1.63s. Selected: customers, orders
2025-04-08 00:02:55,140 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'get me count of customers by order month'
2025-04-08 00:02:55,142 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: customers, orders
2025-04-08 00:02:55,144 [INFO] text2sql.agents.column [column_agent.py:94]: Sending request to AI model for column selection
2025-04-08 00:02:55,145 [INFO] text2sql.llm_engine [llm_engine.py:56]: [COLUMN] Completion generation started
2025-04-08 00:02:55 - INFO - [llm_engine.py:56] - [COLUMN] Completion generation started
2025-04-08 00:02:55,431 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:02:55] "GET /api/query/progress/0b0bc2b5-f8ef-45e0-a25d-288f74f35888 HTTP/1.1" 200 -
2025-04-08 00:02:56,672 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:02:56] "GET /api/query/progress/0b0bc2b5-f8ef-45e0-a25d-288f74f35888 HTTP/1.1" 200 -
2025-04-08 00:02:56,703 [INFO] text2sql.llm_engine [llm_engine.py:119]: [COLUMN] Completion generation completed in 1.56s
2025-04-08 00:02:56 - INFO - [llm_engine.py:119] - [COLUMN] Completion generation completed in 1.56s
2025-04-08 00:02:56,704 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-08 00:02:56 - INFO - [llm_engine.py:120] - **************************
2025-04-08 00:02:56,705 [INFO] text2sql.agents.column [column_agent.py:99]: Raw model response: '{
  "customers": ["customer_id"],
  "orders": ["order_id", "customer_id", "order_date"]
}'
2025-04-08 00:02:56,707 [INFO] text2sql.agents.column [column_agent.py:139]: Parsing column selection from model response
2025-04-08 00:02:56,708 [INFO] text2sql.agents.column [column_agent.py:149]: Parsed column selection JSON: {"customers": ["customer_id"], "orders": ["order_id", "customer_id", "order_date"]}
2025-04-08 00:02:56,708 [INFO] text2sql.agents.column [column_agent.py:111]: Table 'customers': Pruned 10 columns, kept 1/11
2025-04-08 00:02:56,709 [INFO] text2sql.agents.column [column_agent.py:111]: Table 'orders': Pruned 2 columns, kept 3/5
2025-04-08 00:02:56,710 [INFO] text2sql.agents.column [column_agent.py:197]: Building pruned schema
2025-04-08 00:02:56,711 [INFO] text2sql.agents.column [column_agent.py:226]: Built pruned schema (404 chars)
2025-04-08 00:02:56,712 [INFO] text2sql.agents.column [column_agent.py:120]: Column pruning completed in 1.57s
2025-04-08 00:02:56,713 [INFO] text2sql.sql_generator [sql_generator.py:237]: Found 1 join conditions for the relevant tables
2025-04-08 00:02:56,714 [INFO] text2sql.feedback [feedback_manager.py:260]: Stage 1: Vector search for 'get me count of customers by order month...'
2025-04-08 00:02:56 - INFO - [feedback_manager.py:260] - Stage 1: Vector search for 'get me count of customers by order month...'
2025-04-08 00:02:56,770 [INFO] text2sql.vector [vector_store.py:163]: **************[{'id': 2, 'distance': 1.0, 'entity': {'query_text': 'get me count of customers by order month', 'sql_query': "SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;", 'results_summary': 'Returned 2 rows with 2 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'tables_used': '', 'is_manual_sample': True, 'created_at': '2025-04-07 23:50:45', 'id': 2}}, {'id': 1, 'distance': 0.5187309980392456, 'entity': {'query_text': 'get me all the customers', 'sql_query': 'SELECT * FROM customers;', 'results_summary': 'Returned 5 rows with 11 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'tables_used': '', 'is_manual_sample': False, 'created_at': '2025-04-05 15:17:11', 'id': 1}}]
2025-04-08 00:02:56 - INFO - [vector_store.py:163] - **************[{'id': 2, 'distance': 1.0, 'entity': {'query_text': 'get me count of customers by order month', 'sql_query': "SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;", 'results_summary': 'Returned 2 rows with 2 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'tables_used': '', 'is_manual_sample': True, 'created_at': '2025-04-07 23:50:45', 'id': 2}}, {'id': 1, 'distance': 0.5187309980392456, 'entity': {'query_text': 'get me all the customers', 'sql_query': 'SELECT * FROM customers;', 'results_summary': 'Returned 5 rows with 11 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'tables_used': '', 'is_manual_sample': False, 'created_at': '2025-04-05 15:17:11', 'id': 1}}]
2025-04-08 00:02:56,771 [INFO] text2sql.feedback [feedback_manager.py:280]: [{'feedback_id': 2, 'query_text': 'get me count of customers by order month', 'sql_query': "SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;", 'results_summary': 'Returned 2 rows with 2 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'created_at': '2025-04-07 23:50:45', 'tables_used': [], 'is_manual_sample': True, 'similarity': 1.0}, {'feedback_id': 1, 'query_text': 'get me all the customers', 'sql_query': 'SELECT * FROM customers;', 'results_summary': 'Returned 5 rows with 11 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'created_at': '2025-04-05 15:17:11', 'tables_used': [], 'is_manual_sample': False, 'similarity': 0.5187309980392456}]
2025-04-08 00:02:56 - INFO - [feedback_manager.py:280] - [{'feedback_id': 2, 'query_text': 'get me count of customers by order month', 'sql_query': "SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;", 'results_summary': 'Returned 2 rows with 2 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'created_at': '2025-04-07 23:50:45', 'tables_used': [], 'is_manual_sample': True, 'similarity': 1.0}, {'feedback_id': 1, 'query_text': 'get me all the customers', 'sql_query': 'SELECT * FROM customers;', 'results_summary': 'Returned 5 rows with 11 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'created_at': '2025-04-05 15:17:11', 'tables_used': [], 'is_manual_sample': False, 'similarity': 0.5187309980392456}]
2025-04-08 00:02:56,773 [INFO] text2sql.feedback [feedback_manager.py:286]: Found 2 initial candidates from vector search
2025-04-08 00:02:56 - INFO - [feedback_manager.py:286] - Found 2 initial candidates from vector search
2025-04-08 00:02:56,774 [INFO] text2sql.feedback [feedback_manager.py:290]: Stage 2: Reranking 2 candidates
2025-04-08 00:02:56 - INFO - [feedback_manager.py:290] - Stage 2: Reranking 2 candidates
2025-04-08 00:02:56,776 [INFO] text2sql.feedback [feedback_manager.py:296]: [('get me count of customers by order month', 'get me count of customers by order month'), ('get me count of customers by order month', 'get me all the customers')]
2025-04-08 00:02:56 - INFO - [feedback_manager.py:296] - [('get me count of customers by order month', 'get me count of customers by order month'), ('get me count of customers by order month', 'get me all the customers')]
2025-04-08 00:02:56,809 [INFO] text2sql.feedback [feedback_manager.py:304]: [{'feedback_id': 2, 'query_text': 'get me count of customers by order month', 'sql_query': "SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;", 'results_summary': 'Returned 2 rows with 2 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'created_at': '2025-04-07 23:50:45', 'tables_used': [], 'is_manual_sample': True, 'similarity': 1.0, 'rerank_score': 8.964216232299805}, {'feedback_id': 1, 'query_text': 'get me all the customers', 'sql_query': 'SELECT * FROM customers;', 'results_summary': 'Returned 5 rows with 11 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'created_at': '2025-04-05 15:17:11', 'tables_used': [], 'is_manual_sample': False, 'similarity': 0.5187309980392456, 'rerank_score': -2.0921530723571777}]
2025-04-08 00:02:56 - INFO - [feedback_manager.py:304] - [{'feedback_id': 2, 'query_text': 'get me count of customers by order month', 'sql_query': "SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;", 'results_summary': 'Returned 2 rows with 2 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'created_at': '2025-04-07 23:50:45', 'tables_used': [], 'is_manual_sample': True, 'similarity': 1.0, 'rerank_score': 8.964216232299805}, {'feedback_id': 1, 'query_text': 'get me all the customers', 'sql_query': 'SELECT * FROM customers;', 'results_summary': 'Returned 5 rows with 11 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'created_at': '2025-04-05 15:17:11', 'tables_used': [], 'is_manual_sample': False, 'similarity': 0.5187309980392456, 'rerank_score': -2.0921530723571777}]
2025-04-08 00:02:56,809 [INFO] text2sql.feedback [feedback_manager.py:309]: Found 1 candidates with positive reranking scores
2025-04-08 00:02:56 - INFO - [feedback_manager.py:309] - Found 1 candidates with positive reranking scores
2025-04-08 00:02:56,811 [INFO] text2sql.feedback [feedback_manager.py:313]: Reranking successful, returning top 1 results
2025-04-08 00:02:56 - INFO - [feedback_manager.py:313] - Reranking successful, returning top 1 results
2025-04-08 00:02:56,812 [INFO] text2sql.sql_generator [sql_generator.py:280]: Found 1 similar queries with reranking
2025-04-08 00:02:56,812 [INFO] text2sql.sql_generator [sql_generator.py:302]: Added similar query #1 from manual (score: 8.9642): get me count of customers by order month...
2025-04-08 00:02:56,813 [INFO] text2sql.azure [azure_client.py:35]: SQL generation started for query: 'get me count of customers by order month'
2025-04-08 00:02:56 - INFO - [azure_client.py:35] - SQL generation started for query: 'get me count of customers by order month'
2025-04-08 00:02:56,815 [INFO] text2sql.azure [azure_client.py:69]: Including schema information (404 chars)
2025-04-08 00:02:56 - INFO - [azure_client.py:69] - Including schema information (404 chars)
2025-04-08 00:02:56,817 [INFO] text2sql.azure [azure_client.py:76]: Including 1 join conditions
2025-04-08 00:02:56 - INFO - [azure_client.py:76] - Including 1 join conditions
2025-04-08 00:02:56,818 [INFO] text2sql.azure [azure_client.py:97]: Including 1 SQL examples from manual similarity search
2025-04-08 00:02:56 - INFO - [azure_client.py:97] - Including 1 SQL examples from manual similarity search
2025-04-08 00:02:56,820 [INFO] text2sql.azure [azure_client.py:114]: PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER): Unique customer identifier\nPrimary Key(s): customer_id\n\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER): Unique order identifier, customer_id (INTEGER): Reference to customer who placed the order, order_date (TEXT): Date when order was placed\nPrimary Key(s): order_id\n"}, {'role': 'user', 'content': 'Use the following pre-defined join conditions when joining these tables:\n- When joining customers with orders, use: INNER JOIN orders ON customers.customer_id = orders.customer_id\n'}, {'role': 'user', 'content': "Here are some similar queries that were previously successful:\nQuestion: get me count of customers by order month\nSQL: SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;\n\n"}, {'role': 'user', 'content': 'Convert this question to SQL: get me count of customers by order month'}]
2025-04-08 00:02:56 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER): Unique customer identifier\nPrimary Key(s): customer_id\n\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER): Unique order identifier, customer_id (INTEGER): Reference to customer who placed the order, order_date (TEXT): Date when order was placed\nPrimary Key(s): order_id\n"}, {'role': 'user', 'content': 'Use the following pre-defined join conditions when joining these tables:\n- When joining customers with orders, use: INNER JOIN orders ON customers.customer_id = orders.customer_id\n'}, {'role': 'user', 'content': "Here are some similar queries that were previously successful:\nQuestion: get me count of customers by order month\nSQL: SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;\n\n"}, {'role': 'user', 'content': 'Convert this question to SQL: get me count of customers by order month'}]
2025-04-08 00:02:56,822 [INFO] text2sql.llm_engine [llm_engine.py:56]: [SQL_GEN] Completion generation started
2025-04-08 00:02:56 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-08 00:02:57,317 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:02:57] "GET /api/query/progress/0b0bc2b5-f8ef-45e0-a25d-288f74f35888 HTTP/1.1" 200 -
2025-04-08 00:02:58,556 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:02:58] "GET /api/query/progress/0b0bc2b5-f8ef-45e0-a25d-288f74f35888 HTTP/1.1" 200 -
2025-04-08 00:02:58,701 [INFO] text2sql.llm_engine [llm_engine.py:119]: [SQL_GEN] Completion generation completed in 1.88s
2025-04-08 00:02:58 - INFO - [llm_engine.py:119] - [SQL_GEN] Completion generation completed in 1.88s
2025-04-08 00:02:58,702 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-08 00:02:58 - INFO - [llm_engine.py:120] - **************************
2025-04-08 00:02:58,702 [INFO] text2sql.azure [azure_client.py:150]: Parsing SQL from model response
2025-04-08 00:02:58 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-08 00:02:58,705 [INFO] text2sql.azure [azure_client.py:157]: Found SQL code block in response
2025-04-08 00:02:58 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-08 00:02:58,706 [INFO] text2sql.azure [azure_client.py:171]: Extracted SQL query (244 chars) and explanation (104 chars)
2025-04-08 00:02:58 - INFO - [azure_client.py:171] - Extracted SQL query (244 chars) and explanation (104 chars)
2025-04-08 00:02:58,707 [INFO] text2sql.azure [azure_client.py:124]: Generated SQL: SELECT 
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id
GROUP BY 
    order_month
ORDER BY 
    order_month;
2025-04-08 00:02:58 - INFO - [azure_client.py:124] - Generated SQL: SELECT 
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id
GROUP BY 
    order_month
ORDER BY 
    order_month;
2025-04-08 00:02:58,710 [INFO] text2sql.azure [azure_client.py:132]: SQL generation completed in 1.90s
2025-04-08 00:02:58 - INFO - [azure_client.py:132] - SQL generation completed in 1.90s
2025-04-08 00:02:58,712 [INFO] text2sql.database [database.py:65]: Executing SQL query: SELECT 
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id
GROUP BY 
    order_month
ORDER BY 
    order_month;
2025-04-08 00:02:58 - INFO - [database.py:65] - Executing SQL query: SELECT 
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id
GROUP BY 
    order_month
ORDER BY 
    order_month;
2025-04-08 00:02:58,715 [INFO] text2sql.database [database.py:86]: Query returned 2 rows with 2 columns
2025-04-08 00:02:58 - INFO - [database.py:86] - Query returned 2 rows with 2 columns
2025-04-08 00:02:58,718 [INFO] text2sql.database [database.py:95]: Query processing completed in 0.01s
2025-04-08 00:02:58 - INFO - [database.py:95] - Query processing completed in 0.01s
2025-04-08 00:02:58,721 [INFO] text2sql.sql_generator [sql_generator.py:376]: SQL generation completed in 5.22s
2025-04-08 00:02:58,722 [INFO] text2sql.sql_generator [sql_generator.py:125]: Query processing completed in 5.23s
2025-04-08 00:02:58,723 [ERROR] text2sql [background_tasks.py:62]: Exception while processing query: Method 'rollback()' can't be called here; method '_connection_for_bind()' is already in progress and this would cause an unexpected state change to <SessionTransactionState.CLOSED: 5>
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/user_manager.py", line 514, in log_audit_event
    self.session.commit()
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1903, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 121, in _go
    raise sa_exc.IllegalStateChangeError(
sqlalchemy.exc.IllegalStateChangeError: Method 'commit()' can't be called here; method '_connection_for_bind()' is already in progress and this would cause an unexpected state change to <SessionTransactionState.CLOSED: 5>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/background_tasks.py", line 51, in process_in_background
    self.user_manager.log_audit_event(
  File "/home/vijay/text2sql/src/utils/user_manager.py", line 518, in log_audit_event
    self.session.rollback()
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1865, in rollback
    self._transaction.rollback(_to_root=True)
  File "<string>", line 2, in rollback
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 121, in _go
    raise sa_exc.IllegalStateChangeError(
sqlalchemy.exc.IllegalStateChangeError: Method 'rollback()' can't be called here; method '_connection_for_bind()' is already in progress and this would cause an unexpected state change to <SessionTransactionState.CLOSED: 5>
2025-04-08 00:02:58 - ERROR - [background_tasks.py:62] - Exception while processing query: Method 'rollback()' can't be called here; method '_connection_for_bind()' is already in progress and this would cause an unexpected state change to <SessionTransactionState.CLOSED: 5>
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/user_manager.py", line 514, in log_audit_event
    self.session.commit()
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1903, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 121, in _go
    raise sa_exc.IllegalStateChangeError(
sqlalchemy.exc.IllegalStateChangeError: Method 'commit()' can't be called here; method '_connection_for_bind()' is already in progress and this would cause an unexpected state change to <SessionTransactionState.CLOSED: 5>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/background_tasks.py", line 51, in process_in_background
    self.user_manager.log_audit_event(
  File "/home/vijay/text2sql/src/utils/user_manager.py", line 518, in log_audit_event
    self.session.rollback()
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1865, in rollback
    self._transaction.rollback(_to_root=True)
  File "<string>", line 2, in rollback
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 121, in _go
    raise sa_exc.IllegalStateChangeError(
sqlalchemy.exc.IllegalStateChangeError: Method 'rollback()' can't be called here; method '_connection_for_bind()' is already in progress and this would cause an unexpected state change to <SessionTransactionState.CLOSED: 5>
2025-04-08 00:02:59,217 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:02:59] "GET /api/query/progress/0b0bc2b5-f8ef-45e0-a25d-288f74f35888 HTTP/1.1" 200 -
2025-04-08 00:04:12,384 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/utils/feedback_manager.py', reloading
2025-04-08 00:04:12,386 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/utils/feedback_manager.py', reloading
2025-04-08 00:04:12,397 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/utils/feedback_manager.py', reloading
2025-04-08 00:04:13,399 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-08 00:04:13,399 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-08 00:04:13,399 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-08 00:04:13,399 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-08 00:04:13,400 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-08 00:04:13 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-08 00:04:13,400 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-08 00:04:13 - INFO - [database.py:258] - Closing database connection
2025-04-08 00:04:13,401 [INFO] text2sql.feedback [feedback_manager.py:751]: Closing database connections
2025-04-08 00:04:13 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-08 00:04:13,401 [INFO] text2sql.vector [vector_store.py:288]: Closing vector database connection
2025-04-08 00:04:13 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-08 00:04:17,076 [INFO] werkzeug [_internal.py:224]:  * Restarting with watchdog (inotify)
2025-04-08 00:04:26,444 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:04:26,445 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-08 00:04:26,445 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:04:26,445 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-08 00:04:26,446 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 00:04:26,457 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:04:26,458 [INFO] text2sql [app.py:67]: Debug logging enabled for SQL generator and agents
2025-04-08 00:04:26 - INFO - [app.py:67] - Debug logging enabled for SQL generator and agents
2025-04-08 00:04:26,460 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:04:26 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:04:26,461 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-08 00:04:26 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:04:26,508 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-08 00:04:26 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:04:26,509 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:04:26,509 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-08 00:04:26,509 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:04:26,510 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-08 00:04:26,510 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:04:26 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:04:26,510 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-08 00:04:26 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:04:26,561 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-08 00:04:26 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:04:26,561 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:04:26,562 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-08 00:04:26,562 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:04:26,562 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-08 00:04:26,562 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:04:26 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:04:26,563 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-08 00:04:26 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:04:26,608 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-08 00:04:26 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:04:26,609 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:04:26,609 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-08 00:04:26,609 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:04:26,610 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-08 00:04:26,610 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-08 00:04:26 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-08 00:04:26,610 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:04:26 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:04:26,610 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-08 00:04:26 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:04:26,661 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-08 00:04:26 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:04:26,661 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-08 00:04:26 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-08 00:04:26,662 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:04:26 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:04:26,662 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:04:26,662 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-08 00:04:26,662 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:04:26,662 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-08 00:04:26,663 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:04:26 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:04:26,700 [WARNING] werkzeug [_internal.py:224]:  * Debugger is active!
2025-04-08 00:04:26,700 [INFO] werkzeug [_internal.py:224]:  * Debugger PIN: 774-546-021
2025-04-08 00:05:29,376 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/utils/feedback_manager.py', reloading
2025-04-08 00:05:29,377 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/utils/feedback_manager.py', reloading
2025-04-08 00:05:29,377 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/utils/feedback_manager.py', reloading
2025-04-08 00:05:30,379 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-08 00:05:30,380 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-08 00:05:30,380 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-08 00:05:30,381 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-08 00:05:30,382 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-08 00:05:30 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-08 00:05:30,383 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-08 00:05:30 - INFO - [database.py:258] - Closing database connection
2025-04-08 00:05:30,384 [INFO] text2sql.feedback [feedback_manager.py:751]: Closing database connections
2025-04-08 00:05:30 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-08 00:05:30,384 [INFO] text2sql.vector [vector_store.py:288]: Closing vector database connection
2025-04-08 00:05:30 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-08 00:05:31,294 [INFO] werkzeug [_internal.py:224]:  * Restarting with watchdog (inotify)
2025-04-08 00:05:35,095 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:05:35,095 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-08 00:05:35,095 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:05:35,096 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-08 00:05:35,096 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 00:05:35,103 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:05:35,104 [INFO] text2sql [app.py:67]: Debug logging enabled for SQL generator and agents
2025-04-08 00:05:35 - INFO - [app.py:67] - Debug logging enabled for SQL generator and agents
2025-04-08 00:05:35,106 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:05:35 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:05:35,107 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-08 00:05:35 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:05:35,144 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-08 00:05:35 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:05:35,144 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:05:35,145 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-08 00:05:35,145 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:05:35,145 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-08 00:05:35,145 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:05:35 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:05:35,146 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-08 00:05:35 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:05:35,177 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-08 00:05:35 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:05:35,189 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:05:35,189 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-08 00:05:35,190 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:05:35,190 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-08 00:05:35,190 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:05:35 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:05:35,190 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-08 00:05:35 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:05:35,236 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-08 00:05:35 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:05:35,236 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:05:35,237 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-08 00:05:35,237 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:05:35,237 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-08 00:05:35,237 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-08 00:05:35 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-08 00:05:35,237 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:05:35 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:05:35,238 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-08 00:05:35 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:05:35,266 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-08 00:05:35 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:05:35,267 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-08 00:05:35 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-08 00:05:35,267 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:05:35 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:05:35,267 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:05:35,267 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-08 00:05:35,267 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:05:35,267 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-08 00:05:35,268 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:05:35 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:05:35,293 [WARNING] werkzeug [_internal.py:224]:  * Debugger is active!
2025-04-08 00:05:35,294 [INFO] werkzeug [_internal.py:224]:  * Debugger PIN: 774-546-021
2025-04-08 00:05:43,736 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'get me count of customers by order month'
2025-04-08 00:05:43,737 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:05:43] "POST /api/query HTTP/1.1" 200 -
2025-04-08 00:05:43,737 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'get me count of customers by order month'
2025-04-08 00:05:43,743 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-08 00:05:43,744 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.01s
2025-04-08 00:05:43,745 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-08 00:05:43,745 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-08 00:05:43,746 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-08 00:05:43 - INFO - [database.py:44] - Attempting database connection
2025-04-08 00:05:43,748 [INFO] text2sql.database [database.py:48]: Database connection established in 0.00s
2025-04-08 00:05:43 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-08 00:05:43,749 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'get me count of customers by order month'
2025-04-08 00:05:43,749 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-08 00:05:43,751 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-08 00:05:43,752 [INFO] text2sql.llm_engine [llm_engine.py:56]: [TABLE] Completion generation started
2025-04-08 00:05:43 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-08 00:05:44,225 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:05:44] "GET /api/query/progress/369c41fa-e507-4a0c-b21c-fc4364e4cecc HTTP/1.1" 200 -
2025-04-08 00:05:44,995 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:05:44] "GET /api/query/progress/369c41fa-e507-4a0c-b21c-fc4364e4cecc HTTP/1.1" 200 -
2025-04-08 00:05:45,234 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:05:45] "GET /api/query/progress/369c41fa-e507-4a0c-b21c-fc4364e4cecc HTTP/1.1" 200 -
2025-04-08 00:05:45,524 [INFO] text2sql.llm_engine [llm_engine.py:119]: [TABLE] Completion generation completed in 1.77s
2025-04-08 00:05:45 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 1.77s
2025-04-08 00:05:45,525 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-08 00:05:45 - INFO - [llm_engine.py:120] - **************************
2025-04-08 00:05:45,526 [INFO] text2sql.agents.table [table_agent.py:69]: Raw model response: 'customers, orders'
2025-04-08 00:05:45,526 [INFO] text2sql.agents.table [table_agent.py:90]: Table selection completed in 1.78s. Selected: customers, orders
2025-04-08 00:05:45,527 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'get me count of customers by order month'
2025-04-08 00:05:45,527 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: customers, orders
2025-04-08 00:05:45,528 [INFO] text2sql.agents.column [column_agent.py:94]: Sending request to AI model for column selection
2025-04-08 00:05:45,529 [INFO] text2sql.llm_engine [llm_engine.py:56]: [COLUMN] Completion generation started
2025-04-08 00:05:45 - INFO - [llm_engine.py:56] - [COLUMN] Completion generation started
2025-04-08 00:05:45,649 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:05:45] "GET /api/query/progress/369c41fa-e507-4a0c-b21c-fc4364e4cecc HTTP/1.1" 200 -
2025-04-08 00:05:46,411 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:05:46] "GET /api/query/progress/369c41fa-e507-4a0c-b21c-fc4364e4cecc HTTP/1.1" 200 -
2025-04-08 00:05:46,658 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:05:46] "GET /api/query/progress/369c41fa-e507-4a0c-b21c-fc4364e4cecc HTTP/1.1" 200 -
2025-04-08 00:05:47,030 [INFO] text2sql.llm_engine [llm_engine.py:119]: [COLUMN] Completion generation completed in 1.50s
2025-04-08 00:05:47 - INFO - [llm_engine.py:119] - [COLUMN] Completion generation completed in 1.50s
2025-04-08 00:05:47,032 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-08 00:05:47 - INFO - [llm_engine.py:120] - **************************
2025-04-08 00:05:47,034 [INFO] text2sql.agents.column [column_agent.py:99]: Raw model response: '{
  "customers": [
    "customer_id"
  ],
  "orders": [
    "order_id",
    "customer_id",
    "order_date"
  ]
}'
2025-04-08 00:05:47,035 [INFO] text2sql.agents.column [column_agent.py:139]: Parsing column selection from model response
2025-04-08 00:05:47,035 [INFO] text2sql.agents.column [column_agent.py:149]: Parsed column selection JSON: {"customers": ["customer_id"], "orders": ["order_id", "customer_id", "order_date"]}
2025-04-08 00:05:47,035 [INFO] text2sql.agents.column [column_agent.py:111]: Table 'customers': Pruned 10 columns, kept 1/11
2025-04-08 00:05:47,036 [INFO] text2sql.agents.column [column_agent.py:111]: Table 'orders': Pruned 2 columns, kept 3/5
2025-04-08 00:05:47,037 [INFO] text2sql.agents.column [column_agent.py:197]: Building pruned schema
2025-04-08 00:05:47,038 [INFO] text2sql.agents.column [column_agent.py:226]: Built pruned schema (404 chars)
2025-04-08 00:05:47,038 [INFO] text2sql.agents.column [column_agent.py:120]: Column pruning completed in 1.51s
2025-04-08 00:05:47,039 [INFO] text2sql.sql_generator [sql_generator.py:237]: Found 1 join conditions for the relevant tables
2025-04-08 00:05:47,039 [INFO] text2sql.feedback [feedback_manager.py:260]: Stage 1: Vector search for 'get me count of customers by order month...'
2025-04-08 00:05:47 - INFO - [feedback_manager.py:260] - Stage 1: Vector search for 'get me count of customers by order month...'
2025-04-08 00:05:47,041 [INFO] text2sql.feedback [feedback_manager.py:74]: Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-08 00:05:47 - INFO - [feedback_manager.py:74] - Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-08 00:05:47,059 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:05:47] "GET /api/query/progress/369c41fa-e507-4a0c-b21c-fc4364e4cecc HTTP/1.1" 200 -
2025-04-08 00:05:47,834 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:05:47] "GET /api/query/progress/369c41fa-e507-4a0c-b21c-fc4364e4cecc HTTP/1.1" 200 -
2025-04-08 00:05:48,070 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:05:48] "GET /api/query/progress/369c41fa-e507-4a0c-b21c-fc4364e4cecc HTTP/1.1" 200 -
2025-04-08 00:05:48,479 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:05:48] "GET /api/query/progress/369c41fa-e507-4a0c-b21c-fc4364e4cecc HTTP/1.1" 200 -
2025-04-08 00:05:49,252 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:05:49] "GET /api/query/progress/369c41fa-e507-4a0c-b21c-fc4364e4cecc HTTP/1.1" 200 -
2025-04-08 00:05:49,398 [INFO] text2sql.feedback [feedback_manager.py:77]: Embedding model loaded in 2.36s
2025-04-08 00:05:49 - INFO - [feedback_manager.py:77] - Embedding model loaded in 2.36s
2025-04-08 00:05:49,452 [INFO] text2sql.vector [vector_store.py:38]: Connecting to vector database at ./vector_store.db
2025-04-08 00:05:49 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-08 00:05:49,476 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:05:49] "GET /api/query/progress/369c41fa-e507-4a0c-b21c-fc4364e4cecc HTTP/1.1" 200 -
2025-04-08 00:05:49,897 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:05:49] "GET /api/query/progress/369c41fa-e507-4a0c-b21c-fc4364e4cecc HTTP/1.1" 200 -
2025-04-08 00:05:50,477 [DEBUG] pymilvus.milvus_client.milvus_client [milvus_client.py:728]: Created new connection using: a3ce9c93ca74475abe22c3e1381ac972
2025-04-08 00:05:50,477 [INFO] text2sql.vector [vector_store.py:42]: Vector database connection established in 1.03s
2025-04-08 00:05:50 - INFO - [vector_store.py:42] - Vector database connection established in 1.03s
2025-04-08 00:05:50,480 [INFO] text2sql.vector [vector_store.py:75]: Collection 'query_embeddings' already exists
2025-04-08 00:05:50 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-08 00:05:50,525 [INFO] text2sql.feedback [feedback_manager.py:286]: Found 2 initial candidates from vector search
2025-04-08 00:05:50 - INFO - [feedback_manager.py:286] - Found 2 initial candidates from vector search
2025-04-08 00:05:50,525 [INFO] text2sql.feedback [feedback_manager.py:290]: Stage 2: Reranking 2 candidates
2025-04-08 00:05:50 - INFO - [feedback_manager.py:290] - Stage 2: Reranking 2 candidates
2025-04-08 00:05:50,526 [INFO] text2sql.feedback [feedback_manager.py:118]: Loading reranking model 'cross-encoder/ms-marco-MiniLM-L-6-v2'
2025-04-08 00:05:50 - INFO - [feedback_manager.py:118] - Loading reranking model 'cross-encoder/ms-marco-MiniLM-L-6-v2'
2025-04-08 00:05:50,662 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:05:50] "GET /api/query/progress/369c41fa-e507-4a0c-b21c-fc4364e4cecc HTTP/1.1" 200 -
2025-04-08 00:05:50,900 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:05:50] "GET /api/query/progress/369c41fa-e507-4a0c-b21c-fc4364e4cecc HTTP/1.1" 200 -
2025-04-08 00:05:51,312 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:05:51] "GET /api/query/progress/369c41fa-e507-4a0c-b21c-fc4364e4cecc HTTP/1.1" 200 -
2025-04-08 00:05:51,689 [INFO] text2sql.feedback [feedback_manager.py:122]: Reranking model loaded in 1.16s
2025-04-08 00:05:51 - INFO - [feedback_manager.py:122] - Reranking model loaded in 1.16s
2025-04-08 00:05:51,689 [INFO] text2sql.feedback [feedback_manager.py:296]: [('get me count of customers by order month', 'get me count of customers by order month'), ('get me count of customers by order month', 'get me all the customers')]
2025-04-08 00:05:51 - INFO - [feedback_manager.py:296] - [('get me count of customers by order month', 'get me count of customers by order month'), ('get me count of customers by order month', 'get me all the customers')]
2025-04-08 00:05:51,714 [INFO] text2sql.feedback [feedback_manager.py:304]: [{'feedback_id': 2, 'query_text': 'get me count of customers by order month', 'sql_query': "SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;", 'results_summary': 'Returned 2 rows with 2 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'created_at': '2025-04-07 23:50:45', 'tables_used': [], 'is_manual_sample': True, 'similarity': 1.0, 'rerank_score': 8.964216232299805}, {'feedback_id': 1, 'query_text': 'get me all the customers', 'sql_query': 'SELECT * FROM customers;', 'results_summary': 'Returned 5 rows with 11 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'created_at': '2025-04-05 15:17:11', 'tables_used': [], 'is_manual_sample': False, 'similarity': 0.5187309980392456, 'rerank_score': -2.0921530723571777}]
2025-04-08 00:05:51 - INFO - [feedback_manager.py:304] - [{'feedback_id': 2, 'query_text': 'get me count of customers by order month', 'sql_query': "SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;", 'results_summary': 'Returned 2 rows with 2 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'created_at': '2025-04-07 23:50:45', 'tables_used': [], 'is_manual_sample': True, 'similarity': 1.0, 'rerank_score': 8.964216232299805}, {'feedback_id': 1, 'query_text': 'get me all the customers', 'sql_query': 'SELECT * FROM customers;', 'results_summary': 'Returned 5 rows with 11 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'created_at': '2025-04-05 15:17:11', 'tables_used': [], 'is_manual_sample': False, 'similarity': 0.5187309980392456, 'rerank_score': -2.0921530723571777}]
2025-04-08 00:05:51,715 [INFO] text2sql.feedback [feedback_manager.py:309]: Found 1 candidates with positive reranking scores
2025-04-08 00:05:51 - INFO - [feedback_manager.py:309] - Found 1 candidates with positive reranking scores
2025-04-08 00:05:51,716 [INFO] text2sql.feedback [feedback_manager.py:313]: Reranking successful, returning top 1 results
2025-04-08 00:05:51 - INFO - [feedback_manager.py:313] - Reranking successful, returning top 1 results
2025-04-08 00:05:51,717 [INFO] text2sql.sql_generator [sql_generator.py:280]: Found 1 similar queries with reranking
2025-04-08 00:05:51,717 [INFO] text2sql.sql_generator [sql_generator.py:302]: Added similar query #1 from manual (score: 8.9642): get me count of customers by order month...
2025-04-08 00:05:51,718 [INFO] text2sql.azure [azure_client.py:35]: SQL generation started for query: 'get me count of customers by order month'
2025-04-08 00:05:51 - INFO - [azure_client.py:35] - SQL generation started for query: 'get me count of customers by order month'
2025-04-08 00:05:51,719 [INFO] text2sql.azure [azure_client.py:69]: Including schema information (404 chars)
2025-04-08 00:05:51 - INFO - [azure_client.py:69] - Including schema information (404 chars)
2025-04-08 00:05:51,720 [INFO] text2sql.azure [azure_client.py:76]: Including 1 join conditions
2025-04-08 00:05:51 - INFO - [azure_client.py:76] - Including 1 join conditions
2025-04-08 00:05:51,721 [INFO] text2sql.azure [azure_client.py:97]: Including 1 SQL examples from manual similarity search
2025-04-08 00:05:51 - INFO - [azure_client.py:97] - Including 1 SQL examples from manual similarity search
2025-04-08 00:05:51,722 [INFO] text2sql.azure [azure_client.py:114]: PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER): Unique customer identifier\nPrimary Key(s): customer_id\n\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER): Unique order identifier, customer_id (INTEGER): Reference to customer who placed the order, order_date (TEXT): Date when order was placed\nPrimary Key(s): order_id\n"}, {'role': 'user', 'content': 'Use the following pre-defined join conditions when joining these tables:\n- When joining customers with orders, use: INNER JOIN orders ON customers.customer_id = orders.customer_id\n'}, {'role': 'user', 'content': "Here are some similar queries that were previously successful:\nQuestion: get me count of customers by order month\nSQL: SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;\n\n"}, {'role': 'user', 'content': 'Convert this question to SQL: get me count of customers by order month'}]
2025-04-08 00:05:51 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER): Unique customer identifier\nPrimary Key(s): customer_id\n\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER): Unique order identifier, customer_id (INTEGER): Reference to customer who placed the order, order_date (TEXT): Date when order was placed\nPrimary Key(s): order_id\n"}, {'role': 'user', 'content': 'Use the following pre-defined join conditions when joining these tables:\n- When joining customers with orders, use: INNER JOIN orders ON customers.customer_id = orders.customer_id\n'}, {'role': 'user', 'content': "Here are some similar queries that were previously successful:\nQuestion: get me count of customers by order month\nSQL: SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;\n\n"}, {'role': 'user', 'content': 'Convert this question to SQL: get me count of customers by order month'}]
2025-04-08 00:05:51,723 [INFO] text2sql.llm_engine [llm_engine.py:56]: [SQL_GEN] Completion generation started
2025-04-08 00:05:51 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-08 00:05:52,075 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:05:52] "GET /api/query/progress/369c41fa-e507-4a0c-b21c-fc4364e4cecc HTTP/1.1" 200 -
2025-04-08 00:05:52,318 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:05:52] "GET /api/query/progress/369c41fa-e507-4a0c-b21c-fc4364e4cecc HTTP/1.1" 200 -
2025-04-08 00:05:52,729 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:05:52] "GET /api/query/progress/369c41fa-e507-4a0c-b21c-fc4364e4cecc HTTP/1.1" 200 -
2025-04-08 00:05:53,502 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:05:53] "GET /api/query/progress/369c41fa-e507-4a0c-b21c-fc4364e4cecc HTTP/1.1" 200 -
2025-04-08 00:05:53,730 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:05:53] "GET /api/query/progress/369c41fa-e507-4a0c-b21c-fc4364e4cecc HTTP/1.1" 200 -
2025-04-08 00:05:54,155 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:05:54] "GET /api/query/progress/369c41fa-e507-4a0c-b21c-fc4364e4cecc HTTP/1.1" 200 -
2025-04-08 00:05:54,574 [INFO] text2sql.llm_engine [llm_engine.py:119]: [SQL_GEN] Completion generation completed in 2.85s
2025-04-08 00:05:54 - INFO - [llm_engine.py:119] - [SQL_GEN] Completion generation completed in 2.85s
2025-04-08 00:05:54,574 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-08 00:05:54 - INFO - [llm_engine.py:120] - **************************
2025-04-08 00:05:54,577 [INFO] text2sql.azure [azure_client.py:150]: Parsing SQL from model response
2025-04-08 00:05:54 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-08 00:05:54,578 [INFO] text2sql.azure [azure_client.py:157]: Found SQL code block in response
2025-04-08 00:05:54 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-08 00:05:54,580 [INFO] text2sql.azure [azure_client.py:171]: Extracted SQL query (244 chars) and explanation (115 chars)
2025-04-08 00:05:54 - INFO - [azure_client.py:171] - Extracted SQL query (244 chars) and explanation (115 chars)
2025-04-08 00:05:54,583 [INFO] text2sql.azure [azure_client.py:124]: Generated SQL: SELECT 
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id
GROUP BY 
    order_month
ORDER BY 
    order_month;
2025-04-08 00:05:54 - INFO - [azure_client.py:124] - Generated SQL: SELECT 
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id
GROUP BY 
    order_month
ORDER BY 
    order_month;
2025-04-08 00:05:54,586 [INFO] text2sql.azure [azure_client.py:132]: SQL generation completed in 2.87s
2025-04-08 00:05:54 - INFO - [azure_client.py:132] - SQL generation completed in 2.87s
2025-04-08 00:05:54,587 [INFO] text2sql.database [database.py:65]: Executing SQL query: SELECT 
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id
GROUP BY 
    order_month
ORDER BY 
    order_month;
2025-04-08 00:05:54 - INFO - [database.py:65] - Executing SQL query: SELECT 
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id
GROUP BY 
    order_month
ORDER BY 
    order_month;
2025-04-08 00:05:54,593 [INFO] text2sql.database [database.py:86]: Query returned 2 rows with 2 columns
2025-04-08 00:05:54 - INFO - [database.py:86] - Query returned 2 rows with 2 columns
2025-04-08 00:05:54,598 [INFO] text2sql.database [database.py:95]: Query processing completed in 0.01s
2025-04-08 00:05:54 - INFO - [database.py:95] - Query processing completed in 0.01s
2025-04-08 00:05:54,601 [INFO] text2sql.sql_generator [sql_generator.py:376]: SQL generation completed in 10.86s
2025-04-08 00:05:54,601 [INFO] text2sql.sql_generator [sql_generator.py:125]: Query processing completed in 10.87s
2025-04-08 00:05:54,925 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:05:54] "GET /api/query/progress/369c41fa-e507-4a0c-b21c-fc4364e4cecc HTTP/1.1" 200 -
2025-04-08 00:06:17,888 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/utils/feedback_manager.py', reloading
2025-04-08 00:06:17,889 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/utils/feedback_manager.py', reloading
2025-04-08 00:06:17,898 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/utils/feedback_manager.py', reloading
2025-04-08 00:06:18,899 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-08 00:06:18,899 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-08 00:06:18,900 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-08 00:06:18,900 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-08 00:06:18,900 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-08 00:06:18 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-08 00:06:18,900 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-08 00:06:18 - INFO - [database.py:258] - Closing database connection
2025-04-08 00:06:18,900 [INFO] text2sql.feedback [feedback_manager.py:751]: Closing database connections
2025-04-08 00:06:18 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-08 00:06:18,901 [INFO] text2sql.vector [vector_store.py:288]: Closing vector database connection
2025-04-08 00:06:18 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-08 00:06:19,876 [INFO] werkzeug [_internal.py:224]:  * Restarting with watchdog (inotify)
2025-04-08 00:06:25,360 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:06:25,361 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-08 00:06:25,361 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:06:25,361 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-08 00:06:25,362 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 00:06:25,371 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:06:25,372 [INFO] text2sql [app.py:67]: Debug logging enabled for SQL generator and agents
2025-04-08 00:06:25 - INFO - [app.py:67] - Debug logging enabled for SQL generator and agents
2025-04-08 00:06:25,375 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:06:25 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:06:25,376 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-08 00:06:25 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:06:25,421 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-08 00:06:25 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:06:25,422 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:06:25,422 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-08 00:06:25,422 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:06:25,422 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-08 00:06:25,422 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:06:25 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:06:25,423 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-08 00:06:25 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:06:25,466 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-08 00:06:25 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:06:25,467 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:06:25,467 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-08 00:06:25,467 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:06:25,467 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-08 00:06:25,468 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:06:25 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:06:25,468 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-08 00:06:25 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:06:25,508 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-08 00:06:25 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:06:25,509 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:06:25,509 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-08 00:06:25,509 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:06:25,509 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-08 00:06:25,509 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-08 00:06:25 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-08 00:06:25,510 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:06:25 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:06:25,510 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-08 00:06:25 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:06:25,549 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-08 00:06:25 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:06:25,550 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-08 00:06:25 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-08 00:06:25,550 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:06:25 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:06:25,550 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:06:25,551 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-08 00:06:25,551 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:06:25,551 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-08 00:06:25,551 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:06:25 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:06:25,585 [WARNING] werkzeug [_internal.py:224]:  * Debugger is active!
2025-04-08 00:06:25,585 [INFO] werkzeug [_internal.py:224]:  * Debugger PIN: 774-546-021
2025-04-08 00:08:35,778 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/utils/vector_store.py', reloading
2025-04-08 00:08:35,780 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/utils/vector_store.py', reloading
2025-04-08 00:08:35,805 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/utils/vector_store.py', reloading
2025-04-08 00:08:36,808 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-08 00:08:36,808 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-08 00:08:36,809 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-08 00:08:36,809 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-08 00:08:36,810 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-08 00:08:36 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-08 00:08:36,811 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-08 00:08:36 - INFO - [database.py:258] - Closing database connection
2025-04-08 00:08:36,812 [INFO] text2sql.feedback [feedback_manager.py:751]: Closing database connections
2025-04-08 00:08:36 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-08 00:08:36,813 [INFO] text2sql.vector [vector_store.py:288]: Closing vector database connection
2025-04-08 00:08:36 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-08 00:08:38,315 [INFO] werkzeug [_internal.py:224]:  * Restarting with watchdog (inotify)
2025-04-08 00:08:45,836 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:08:45,837 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-08 00:08:45,837 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:08:45,837 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-08 00:08:45,838 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 00:08:45,852 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:08:45,855 [INFO] text2sql [app.py:67]: Debug logging enabled for SQL generator and agents
2025-04-08 00:08:45 - INFO - [app.py:67] - Debug logging enabled for SQL generator and agents
2025-04-08 00:08:45,858 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:08:45 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:08:45,859 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-08 00:08:45 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:08:45,922 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-08 00:08:45 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:08:45,923 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:08:45,923 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-08 00:08:45,923 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:08:45,924 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-08 00:08:45,924 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:08:45 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:08:45,924 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-08 00:08:45 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:08:45,985 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-08 00:08:45 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:08:45,985 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:08:45,985 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-08 00:08:45,986 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:08:45,986 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-08 00:08:45,986 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:08:45 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:08:45,987 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-08 00:08:45 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:08:46,052 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-08 00:08:46 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:08:46,052 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:08:46,053 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-08 00:08:46,053 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:08:46,053 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-08 00:08:46,054 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-08 00:08:46 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-08 00:08:46,054 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:08:46 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:08:46,054 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-08 00:08:46 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:08:46,124 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-08 00:08:46 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:08:46,124 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-08 00:08:46 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-08 00:08:46,125 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:08:46 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:08:46,125 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:08:46,126 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-08 00:08:46,126 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:08:46,126 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-08 00:08:46,127 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:08:46 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:08:46,186 [WARNING] werkzeug [_internal.py:224]:  * Debugger is active!
2025-04-08 00:08:46,187 [INFO] werkzeug [_internal.py:224]:  * Debugger PIN: 774-546-021
2025-04-08 00:09:00,902 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/utils/vector_store.py', reloading
2025-04-08 00:09:00,903 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/utils/vector_store.py', reloading
2025-04-08 00:09:00,914 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/src/utils/vector_store.py', reloading
2025-04-08 00:09:01,915 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-08 00:09:01,915 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-08 00:09:01,916 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-08 00:09:01,916 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-08 00:09:01,916 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-08 00:09:01 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-08 00:09:01,916 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-08 00:09:01 - INFO - [database.py:258] - Closing database connection
2025-04-08 00:09:01,917 [INFO] text2sql.feedback [feedback_manager.py:751]: Closing database connections
2025-04-08 00:09:01 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-08 00:09:01,917 [INFO] text2sql.vector [vector_store.py:305]: Closing vector database connection
2025-04-08 00:09:01 - INFO - [vector_store.py:305] - Closing vector database connection
2025-04-08 00:09:02,863 [INFO] werkzeug [_internal.py:224]:  * Restarting with watchdog (inotify)
2025-04-08 00:09:08,525 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:09:08,526 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-08 00:09:08,526 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:09:08,526 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-08 00:09:08,527 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 00:09:08,537 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:09:08,538 [INFO] text2sql [app.py:67]: Debug logging enabled for SQL generator and agents
2025-04-08 00:09:08 - INFO - [app.py:67] - Debug logging enabled for SQL generator and agents
2025-04-08 00:09:08,540 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:09:08 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:09:08,540 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-08 00:09:08 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:09:08,595 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-08 00:09:08 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:09:08,596 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:09:08,596 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-08 00:09:08,596 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:09:08,596 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-08 00:09:08,597 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:09:08 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:09:08,597 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-08 00:09:08 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:09:08,645 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-08 00:09:08 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:09:08,645 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:09:08,645 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-08 00:09:08,645 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:09:08,646 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-08 00:09:08,646 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:09:08 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:09:08,646 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-08 00:09:08 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:09:08,708 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-08 00:09:08 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:09:08,708 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:09:08,708 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-08 00:09:08,709 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:09:08,709 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-08 00:09:08,709 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-08 00:09:08 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-08 00:09:08,709 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:09:08 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:09:08,710 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-08 00:09:08 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:09:08,764 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-08 00:09:08 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:09:08,764 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-08 00:09:08 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-08 00:09:08,765 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:09:08 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:09:08,765 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:09:08,766 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-08 00:09:08,766 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:09:08,766 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-08 00:09:08,767 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:09:08 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:09:08,827 [WARNING] werkzeug [_internal.py:224]:  * Debugger is active!
2025-04-08 00:09:08,828 [INFO] werkzeug [_internal.py:224]:  * Debugger PIN: 774-546-021
2025-04-08 00:11:41,857 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/app.py', reloading
2025-04-08 00:11:41,859 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/app.py', reloading
2025-04-08 00:11:41,891 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/app.py', reloading
2025-04-08 00:11:42,893 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-08 00:11:42,894 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-08 00:11:42,894 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-08 00:11:42,895 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-08 00:11:42,895 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-08 00:11:42 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-08 00:11:42,896 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-08 00:11:42 - INFO - [database.py:258] - Closing database connection
2025-04-08 00:11:42,896 [INFO] text2sql.feedback [feedback_manager.py:751]: Closing database connections
2025-04-08 00:11:42 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-08 00:11:42,896 [INFO] text2sql.vector [vector_store.py:288]: Closing vector database connection
2025-04-08 00:11:42 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-08 00:11:44,969 [INFO] werkzeug [_internal.py:224]:  * Restarting with watchdog (inotify)
2025-04-08 00:11:54,759 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:11:54,760 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-08 00:11:54,760 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:11:54,760 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-08 00:11:54,761 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 00:11:54,769 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:11:54,772 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:11:54,772 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-08 00:11:54,824 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-08 00:11:54,825 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:11:54,825 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-08 00:11:54,825 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:11:54,825 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-08 00:11:54,826 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:11:54,826 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-08 00:11:54,879 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-08 00:11:54,879 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:11:54,880 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-08 00:11:54,880 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:11:54,880 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-08 00:11:54,880 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:11:54,881 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-08 00:11:54,941 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-08 00:11:54,942 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:11:54,942 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-08 00:11:54,942 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:11:54,943 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-08 00:11:54,943 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-08 00:11:54,943 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:11:54,943 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-08 00:11:55,007 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-08 00:11:55,008 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-08 00:11:55,008 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:11:55,009 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:11:55,009 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-08 00:11:55,009 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:11:55,009 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-08 00:11:55,010 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:11:55,056 [WARNING] werkzeug [_internal.py:224]:  * Debugger is active!
2025-04-08 00:11:55,057 [INFO] werkzeug [_internal.py:224]:  * Debugger PIN: 774-546-021
2025-04-08 00:12:04,348 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/app.py', reloading
2025-04-08 00:12:04,348 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/app.py', reloading
2025-04-08 00:12:04,351 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/app.py', reloading
2025-04-08 00:12:05,352 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-08 00:12:05,353 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-08 00:12:05,353 [DEBUG] text2sql.llm_engine [llm_engine.py:130]: Closing LLM Engine client connection
2025-04-08 00:12:05,353 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-08 00:12:05,353 [DEBUG] text2sql.llm_engine [llm_engine.py:130]: Closing LLM Engine client connection
2025-04-08 00:12:05,354 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-08 00:12:05,354 [DEBUG] text2sql.llm_engine [llm_engine.py:130]: Closing LLM Engine client connection
2025-04-08 00:12:05,354 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-08 00:12:05,354 [DEBUG] text2sql.llm_engine [llm_engine.py:130]: Closing LLM Engine client connection
2025-04-08 00:12:05,354 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-08 00:12:05,354 [INFO] text2sql.feedback [feedback_manager.py:751]: Closing database connections
2025-04-08 00:12:05,355 [INFO] text2sql.vector [vector_store.py:288]: Closing vector database connection
2025-04-08 00:12:06,250 [INFO] werkzeug [_internal.py:224]:  * Restarting with watchdog (inotify)
2025-04-08 00:12:11,830 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:12:11,831 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-08 00:12:11,831 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:12:11,831 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-08 00:12:11,832 [INFO] text2sql.database [database.py:23]: Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 00:12:11,846 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:12:11,849 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:12:11,850 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-08 00:12:11,913 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-08 00:12:11,913 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:12:11,914 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-08 00:12:11,914 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:12:11,915 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-08 00:12:11,915 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:12:11,915 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-08 00:12:11,978 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-08 00:12:11,978 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:12:11,978 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-08 00:12:11,978 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:12:11,979 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-08 00:12:11,979 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:12:11,979 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-08 00:12:12,044 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-08 00:12:12,045 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:12:12,045 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-08 00:12:12,045 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:12:12,045 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-08 00:12:12,046 [INFO] text2sql.azure [azure_client.py:11]: Initializing Azure AI Client using LLM Engine
2025-04-08 00:12:12,046 [INFO] text2sql.llm_engine [llm_engine.py:28]: Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:12:12,046 [INFO] text2sql.llm_engine [llm_engine.py:29]: Using model: openrouter/quasar-alpha
2025-04-08 00:12:12,106 [INFO] text2sql.llm_engine [llm_engine.py:37]: LLM Engine initialized successfully
2025-04-08 00:12:12,106 [INFO] text2sql.azure [azure_client.py:17]: Azure AI Client initialized successfully
2025-04-08 00:12:12,106 [INFO] text2sql.database [database.py:38]: Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:12:12,107 [INFO] text2sql.schema_manager [schema_manager.py:48]: Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:12:12,107 [INFO] text2sql.schema_manager [schema_manager.py:55]: Loaded 2 workspaces from schema file
2025-04-08 00:12:12,107 [INFO] text2sql.schema_manager [schema_manager.py:274]: Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:12:12,108 [INFO] text2sql.schema_manager [schema_manager.py:281]: Loaded 3 join conditions from condition file
2025-04-08 00:12:12,108 [INFO] text2sql.feedback [feedback_manager.py:35]: Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:12:12,157 [WARNING] werkzeug [_internal.py:224]:  * Debugger is active!
2025-04-08 00:12:12,158 [INFO] werkzeug [_internal.py:224]:  * Debugger PIN: 774-546-021
2025-04-08 00:12:18,009 [INFO] text2sql.sql_generator [sql_generator.py:37]: Processing query: 'get me count of customers by order month'
2025-04-08 00:12:18,010 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:12:18] "POST /api/query HTTP/1.1" 200 -
2025-04-08 00:12:18,010 [INFO] text2sql.agents.intent [intent_agent.py:27]: Intent detection started for query: 'get me count of customers by order month'
2025-04-08 00:12:18,012 [INFO] text2sql.agents.intent [intent_agent.py:38]: Using default intent 'data_retrieval' without calling LLM
2025-04-08 00:12:18,013 [INFO] text2sql.agents.intent [intent_agent.py:41]: Intent detection completed in 0.00s
2025-04-08 00:12:18,013 [INFO] text2sql.sql_generator [sql_generator.py:45]: Detected intent: data_retrieval
2025-04-08 00:12:18,014 [INFO] text2sql.sql_generator [sql_generator.py:141]: Starting SQL generation process
2025-04-08 00:12:18,014 [INFO] text2sql.database [database.py:44]: Attempting database connection
2025-04-08 00:12:18,015 [INFO] text2sql.database [database.py:48]: Database connection established in 0.00s
2025-04-08 00:12:18,016 [INFO] text2sql.agents.table [table_agent.py:28]: Table selection started for query: 'get me count of customers by order month'
2025-04-08 00:12:18,017 [INFO] text2sql.agents.table [table_agent.py:34]: Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-08 00:12:18,018 [INFO] text2sql.agents.table [table_agent.py:64]: Sending request to AI model for table selection
2025-04-08 00:12:18,019 [INFO] text2sql.llm_engine [llm_engine.py:56]: [TABLE] Completion generation started
2025-04-08 00:12:18,020 [DEBUG] text2sql.llm_engine [llm_engine.py:87]: [TABLE] Prompt: [{'role': 'system', 'content': "You are a table selection agent for a Text-to-SQL system.\nYour job is to identify which database tables are most relevant to a user query.\nYou will be provided with table names and their descriptions.\nReturn ONLY the names of relevant tables, separated by commas. Be selective and choose\nonly the tables that are directly needed to answer the query. If you're unsure,\ninclude tables that might be related. Return only table names in your response."}, {'role': 'us... (truncated)
2025-04-08 00:12:18,020 [DEBUG] text2sql.llm_engine [llm_engine.py:96]: [TABLE] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-08 00:12:18,508 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:12:18] "GET /api/query/progress/ba5813e1-b7c9-4dee-9745-0d93bb9b4f9e HTTP/1.1" 200 -
2025-04-08 00:12:19,641 [DEBUG] text2sql.llm_engine [llm_engine.py:107]: [TABLE] Model response received in 1.62s
2025-04-08 00:12:19,641 [DEBUG] text2sql.llm_engine [llm_engine.py:116]: [TABLE] Raw model response: 'customers, orders'
2025-04-08 00:12:19,642 [INFO] text2sql.llm_engine [llm_engine.py:119]: [TABLE] Completion generation completed in 1.62s
2025-04-08 00:12:19,643 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-08 00:12:19,644 [INFO] text2sql.agents.table [table_agent.py:69]: Raw model response: 'customers, orders'
2025-04-08 00:12:19,645 [INFO] text2sql.agents.table [table_agent.py:90]: Table selection completed in 1.63s. Selected: customers, orders
2025-04-08 00:12:19,647 [INFO] text2sql.agents.column [column_agent.py:29]: Column pruning started for query: 'get me count of customers by order month'
2025-04-08 00:12:19,647 [INFO] text2sql.agents.column [column_agent.py:30]: Processing tables: customers, orders
2025-04-08 00:12:19,648 [INFO] text2sql.agents.column [column_agent.py:94]: Sending request to AI model for column selection
2025-04-08 00:12:19,649 [INFO] text2sql.llm_engine [llm_engine.py:56]: [COLUMN] Completion generation started
2025-04-08 00:12:19,650 [DEBUG] text2sql.llm_engine [llm_engine.py:87]: [COLUMN] Prompt: [{'role': 'system', 'content': 'You are a column selection agent for a Text-to-SQL system.\nYour job is to identify which columns from the provided tables are most relevant to a user query.\nFor each table, select only the columns that will be needed to answer the query.\nReturn your answer as a JSON object with table names as keys and arrays of column names as values.\nAlways include primary key columns even if not directly mentioned in the query.\nConsider columns that might be needed for:\n1.... (truncated)
2025-04-08 00:12:19,650 [DEBUG] text2sql.llm_engine [llm_engine.py:96]: [COLUMN] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-08 00:12:20,248 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:12:20] "GET /api/query/progress/ba5813e1-b7c9-4dee-9745-0d93bb9b4f9e HTTP/1.1" 200 -
2025-04-08 00:12:20,905 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:12:20] "GET /api/query/progress/ba5813e1-b7c9-4dee-9745-0d93bb9b4f9e HTTP/1.1" 200 -
2025-04-08 00:12:22,226 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:12:22] "GET /api/query/progress/ba5813e1-b7c9-4dee-9745-0d93bb9b4f9e HTTP/1.1" 200 -
2025-04-08 00:12:22,910 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:12:22] "GET /api/query/progress/ba5813e1-b7c9-4dee-9745-0d93bb9b4f9e HTTP/1.1" 200 -
2025-04-08 00:12:24,247 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:12:24] "GET /api/query/progress/ba5813e1-b7c9-4dee-9745-0d93bb9b4f9e HTTP/1.1" 200 -
2025-04-08 00:12:24,775 [DEBUG] text2sql.llm_engine [llm_engine.py:107]: [COLUMN] Model response received in 5.12s
2025-04-08 00:12:24,775 [DEBUG] text2sql.llm_engine [llm_engine.py:116]: [COLUMN] Raw model response: '{
  "customers": [
    "customer_id"
  ],
  "orders": [
    "order_id",
    "customer_id",
    "order_date"
  ]
}'
2025-04-08 00:12:24,776 [INFO] text2sql.llm_engine [llm_engine.py:119]: [COLUMN] Completion generation completed in 5.13s
2025-04-08 00:12:24,777 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-08 00:12:24,779 [INFO] text2sql.agents.column [column_agent.py:99]: Raw model response: '{
  "customers": [
    "customer_id"
  ],
  "orders": [
    "order_id",
    "customer_id",
    "order_date"
  ]
}'
2025-04-08 00:12:24,780 [INFO] text2sql.agents.column [column_agent.py:139]: Parsing column selection from model response
2025-04-08 00:12:24,780 [INFO] text2sql.agents.column [column_agent.py:149]: Parsed column selection JSON: {"customers": ["customer_id"], "orders": ["order_id", "customer_id", "order_date"]}
2025-04-08 00:12:24,782 [INFO] text2sql.agents.column [column_agent.py:111]: Table 'customers': Pruned 10 columns, kept 1/11
2025-04-08 00:12:24,782 [INFO] text2sql.agents.column [column_agent.py:111]: Table 'orders': Pruned 2 columns, kept 3/5
2025-04-08 00:12:24,783 [INFO] text2sql.agents.column [column_agent.py:197]: Building pruned schema
2025-04-08 00:12:24,784 [INFO] text2sql.agents.column [column_agent.py:226]: Built pruned schema (404 chars)
2025-04-08 00:12:24,786 [INFO] text2sql.agents.column [column_agent.py:120]: Column pruning completed in 5.14s
2025-04-08 00:12:24,787 [INFO] text2sql.sql_generator [sql_generator.py:237]: Found 1 join conditions for the relevant tables
2025-04-08 00:12:24,788 [INFO] text2sql.feedback [feedback_manager.py:260]: Stage 1: Vector search for 'get me count of customers by order month...'
2025-04-08 00:12:24,789 [INFO] text2sql.feedback [feedback_manager.py:74]: Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-08 00:12:24,944 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:12:24] "GET /api/query/progress/ba5813e1-b7c9-4dee-9745-0d93bb9b4f9e HTTP/1.1" 200 -
2025-04-08 00:12:27,978 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:12:27] "GET /api/query/progress/ba5813e1-b7c9-4dee-9745-0d93bb9b4f9e HTTP/1.1" 200 -
2025-04-08 00:12:28,628 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:12:28] "GET /api/query/progress/ba5813e1-b7c9-4dee-9745-0d93bb9b4f9e HTTP/1.1" 200 -
2025-04-08 00:12:28,933 [INFO] text2sql.feedback [feedback_manager.py:77]: Embedding model loaded in 4.14s
2025-04-08 00:12:28,965 [DEBUG] text2sql.feedback [feedback_manager.py:102]: Generated embedding in 0.03s with shape (384,)
2025-04-08 00:12:28,965 [INFO] text2sql.vector [vector_store.py:38]: Connecting to vector database at ./vector_store.db
2025-04-08 00:12:29,863 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:12:29] "GET /api/query/progress/ba5813e1-b7c9-4dee-9745-0d93bb9b4f9e HTTP/1.1" 200 -
2025-04-08 00:12:29,989 [DEBUG] pymilvus.milvus_client.milvus_client [milvus_client.py:728]: Created new connection using: a765be8488134cc4a476f710d069bc11
2025-04-08 00:12:29,989 [INFO] text2sql.vector [vector_store.py:42]: Vector database connection established in 1.02s
2025-04-08 00:12:29,993 [INFO] text2sql.vector [vector_store.py:75]: Collection 'query_embeddings' already exists
2025-04-08 00:12:30,028 [INFO] text2sql.feedback [feedback_manager.py:286]: Found 2 initial candidates from vector search
2025-04-08 00:12:30,028 [INFO] text2sql.feedback [feedback_manager.py:290]: Stage 2: Reranking 2 candidates
2025-04-08 00:12:30,028 [INFO] text2sql.feedback [feedback_manager.py:118]: Loading reranking model 'cross-encoder/ms-marco-MiniLM-L-6-v2'
2025-04-08 00:12:30,507 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:12:30] "GET /api/query/progress/ba5813e1-b7c9-4dee-9745-0d93bb9b4f9e HTTP/1.1" 200 -
2025-04-08 00:12:31,139 [INFO] text2sql.feedback [feedback_manager.py:122]: Reranking model loaded in 1.11s
2025-04-08 00:12:31,139 [INFO] text2sql.feedback [feedback_manager.py:296]: [('get me count of customers by order month', 'get me count of customers by order month'), ('get me count of customers by order month', 'get me all the customers')]
2025-04-08 00:12:31,157 [INFO] text2sql.feedback [feedback_manager.py:309]: Found 1 candidates with positive reranking scores
2025-04-08 00:12:31,158 [INFO] text2sql.feedback [feedback_manager.py:313]: Reranking successful, returning top 1 results
2025-04-08 00:12:31,158 [INFO] text2sql.sql_generator [sql_generator.py:280]: Found 1 similar queries with reranking
2025-04-08 00:12:31,159 [INFO] text2sql.sql_generator [sql_generator.py:302]: Added similar query #1 from manual (score: 8.9642): get me count of customers by order month...
2025-04-08 00:12:31,160 [INFO] text2sql.azure [azure_client.py:35]: SQL generation started for query: 'get me count of customers by order month'
2025-04-08 00:12:31,160 [INFO] text2sql.azure [azure_client.py:69]: Including schema information (404 chars)
2025-04-08 00:12:31,160 [INFO] text2sql.azure [azure_client.py:76]: Including 1 join conditions
2025-04-08 00:12:31,161 [INFO] text2sql.azure [azure_client.py:97]: Including 1 SQL examples from manual similarity search
2025-04-08 00:12:31,162 [INFO] text2sql.azure [azure_client.py:114]: PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER): Unique customer identifier\nPrimary Key(s): customer_id\n\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER): Unique order identifier, customer_id (INTEGER): Reference to customer who placed the order, order_date (TEXT): Date when order was placed\nPrimary Key(s): order_id\n"}, {'role': 'user', 'content': 'Use the following pre-defined join conditions when joining these tables:\n- When joining customers with orders, use: INNER JOIN orders ON customers.customer_id = orders.customer_id\n'}, {'role': 'user', 'content': "Here are some similar queries that were previously successful:\nQuestion: get me count of customers by order month\nSQL: SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;\n\n"}, {'role': 'user', 'content': 'Convert this question to SQL: get me count of customers by order month'}]
2025-04-08 00:12:31,162 [INFO] text2sql.llm_engine [llm_engine.py:56]: [SQL_GEN] Completion generation started
2025-04-08 00:12:31,162 [DEBUG] text2sql.llm_engine [llm_engine.py:87]: [SQL_GEN] Prompt: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief ... (truncated)
2025-04-08 00:12:31,163 [DEBUG] text2sql.llm_engine [llm_engine.py:96]: [SQL_GEN] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-08 00:12:31,729 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:12:31] "GET /api/query/progress/ba5813e1-b7c9-4dee-9745-0d93bb9b4f9e HTTP/1.1" 200 -
2025-04-08 00:12:32,363 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:12:32] "GET /api/query/progress/ba5813e1-b7c9-4dee-9745-0d93bb9b4f9e HTTP/1.1" 200 -
2025-04-08 00:12:33,568 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:12:33] "GET /api/query/progress/ba5813e1-b7c9-4dee-9745-0d93bb9b4f9e HTTP/1.1" 200 -
2025-04-08 00:12:34,210 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:12:34] "GET /api/query/progress/ba5813e1-b7c9-4dee-9745-0d93bb9b4f9e HTTP/1.1" 200 -
2025-04-08 00:12:35,412 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:12:35] "GET /api/query/progress/ba5813e1-b7c9-4dee-9745-0d93bb9b4f9e HTTP/1.1" 200 -
2025-04-08 00:12:36,046 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:12:36] "GET /api/query/progress/ba5813e1-b7c9-4dee-9745-0d93bb9b4f9e HTTP/1.1" 200 -
2025-04-08 00:12:36,817 [DEBUG] text2sql.llm_engine [llm_engine.py:107]: [SQL_GEN] Model response received in 5.65s
2025-04-08 00:12:36,817 [DEBUG] text2sql.llm_engine [llm_engine.py:116]: [SQL_GEN] Raw model response: 'Here's a query that will retrieve the number of unique customers grouped by each order month:

```sql
SELECT 
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id
GROUP BY 
    order_month
ORDER BY 
    order_month;
```'
2025-04-08 00:12:36,818 [INFO] text2sql.llm_engine [llm_engine.py:119]: [SQL_GEN] Completion generation completed in 5.66s
2025-04-08 00:12:36,819 [INFO] text2sql.llm_engine [llm_engine.py:120]: **************************
2025-04-08 00:12:36,819 [INFO] text2sql.azure [azure_client.py:150]: Parsing SQL from model response
2025-04-08 00:12:36,820 [INFO] text2sql.azure [azure_client.py:157]: Found SQL code block in response
2025-04-08 00:12:36,820 [INFO] text2sql.azure [azure_client.py:171]: Extracted SQL query (244 chars) and explanation (93 chars)
2025-04-08 00:12:36,822 [INFO] text2sql.azure [azure_client.py:124]: Generated SQL: SELECT 
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id
GROUP BY 
    order_month
ORDER BY 
    order_month;
2025-04-08 00:12:36,823 [INFO] text2sql.azure [azure_client.py:132]: SQL generation completed in 5.66s
2025-04-08 00:12:36,823 [INFO] text2sql.database [database.py:65]: Executing SQL query: SELECT 
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id
GROUP BY 
    order_month
ORDER BY 
    order_month;
2025-04-08 00:12:36,825 [DEBUG] text2sql.database [database.py:76]: Query execution started
2025-04-08 00:12:36,826 [DEBUG] text2sql.database [database.py:81]: Query execution completed in 0.00s
2025-04-08 00:12:36,828 [INFO] text2sql.database [database.py:86]: Query returned 2 rows with 2 columns
2025-04-08 00:12:36,830 [DEBUG] text2sql.database [database.py:92]: Sample data (first 2 rows):
  order_month  customer_count
0     2023-04               5
1     2023-05               3
2025-04-08 00:12:36,831 [INFO] text2sql.database [database.py:95]: Query processing completed in 0.01s
2025-04-08 00:12:36,832 [INFO] text2sql.sql_generator [sql_generator.py:376]: SQL generation completed in 18.82s
2025-04-08 00:12:36,833 [INFO] text2sql.sql_generator [sql_generator.py:125]: Query processing completed in 18.82s
2025-04-08 00:12:37,263 [INFO] werkzeug [_internal.py:224]: 127.0.0.1 - - [08/Apr/2025 00:12:37] "GET /api/query/progress/ba5813e1-b7c9-4dee-9745-0d93bb9b4f9e HTTP/1.1" 200 -
2025-04-08 00:13:48,491 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/config/config.py', reloading
2025-04-08 00:13:48,493 [INFO] werkzeug [_internal.py:224]:  * Detected change in '/home/vijay/text2sql/config/config.py', reloading
2025-04-08 00:13:49,495 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-08 00:13:49,496 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-08 00:13:49,496 [DEBUG] text2sql.llm_engine [llm_engine.py:130]: Closing LLM Engine client connection
2025-04-08 00:13:49,496 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-08 00:13:49,496 [DEBUG] text2sql.llm_engine [llm_engine.py:130]: Closing LLM Engine client connection
2025-04-08 00:13:49,497 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-08 00:13:49,497 [DEBUG] text2sql.llm_engine [llm_engine.py:130]: Closing LLM Engine client connection
2025-04-08 00:13:49,497 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-08 00:13:49,497 [DEBUG] text2sql.llm_engine [llm_engine.py:130]: Closing LLM Engine client connection
2025-04-08 00:13:49,498 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-08 00:13:49,499 [DEBUG] text2sql.database [database.py:261]: Database engine disposed
2025-04-08 00:13:49,500 [INFO] text2sql.feedback [feedback_manager.py:751]: Closing database connections
2025-04-08 00:13:49,500 [INFO] text2sql.vector [vector_store.py:288]: Closing vector database connection
2025-04-08 00:13:51,789 [INFO] werkzeug [_internal.py:224]:  * Restarting with watchdog (inotify)
2025-04-08 00:13:59,826 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:13:59,826 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:13:59,827 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:13:59,827 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:13:59,827 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 00:13:59,836 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:13:59,838 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:13:59,838 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:13:59,878 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:13:59,879 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:13:59,879 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:13:59,879 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:13:59,879 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:13:59,879 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:13:59,879 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:13:59,925 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:13:59,925 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:13:59,926 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:13:59,926 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:13:59,926 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:13:59,926 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:13:59,926 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:13:59,969 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:13:59,969 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:13:59,970 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:13:59,970 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:13:59,970 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:13:59,970 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-08 00:13:59,970 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:13:59,971 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:14:00,016 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:14:00,016 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-08 00:14:00,016 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:14:00,017 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:14:00,017 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:14:00,017 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:14:00,017 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:14:00,017 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:14:00,055 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-08 00:14:00,056 - INFO - [_internal.py:224] -  * Debugger PIN: 774-546-021
2025-04-08 00:14:22,924 - INFO - [sql_generator.py:37] - Processing query: 'get me count of customers by order month'
2025-04-08 00:14:22,926 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:14:22] "POST /api/query HTTP/1.1" 200 -
2025-04-08 00:14:22,926 - INFO - [intent_agent.py:27] - Intent detection started for query: 'get me count of customers by order month'
2025-04-08 00:14:22,927 - INFO - [intent_agent.py:38] - Using default intent 'data_retrieval' without calling LLM
2025-04-08 00:14:22,928 - INFO - [intent_agent.py:41] - Intent detection completed in 0.00s
2025-04-08 00:14:22,929 - INFO - [sql_generator.py:45] - Detected intent: data_retrieval
2025-04-08 00:14:22,929 - INFO - [sql_generator.py:141] - Starting SQL generation process
2025-04-08 00:14:22,930 - INFO - [database.py:44] - Attempting database connection
2025-04-08 00:14:22,930 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-08 00:14:22,931 - INFO - [table_agent.py:28] - Table selection started for query: 'get me count of customers by order month'
2025-04-08 00:14:22,931 - INFO - [table_agent.py:34] - Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-08 00:14:22,932 - INFO - [table_agent.py:64] - Sending request to AI model for table selection
2025-04-08 00:14:22,933 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-08 00:14:22,934 - DEBUG - [llm_engine.py:87] - [TABLE] Prompt: [{'role': 'system', 'content': "You are a table selection agent for a Text-to-SQL system.\nYour job is to identify which database tables are most relevant to a user query.\nYou will be provided with table names and their descriptions.\nReturn ONLY the names of relevant tables, separated by commas. Be selective and choose\nonly the tables that are directly needed to answer the query. If you're unsure,\ninclude tables that might be related. Return only table names in your response."}, {'role': 'us... (truncated)
2025-04-08 00:14:22,934 - DEBUG - [llm_engine.py:96] - [TABLE] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-08 00:14:23,421 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:14:23] "GET /api/query/progress/e5227a35-9abe-4059-8935-dd3fe432bb58 HTTP/1.1" 200 -
2025-04-08 00:14:24,234 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:14:24] "GET /api/query/progress/e5227a35-9abe-4059-8935-dd3fe432bb58 HTTP/1.1" 200 -
2025-04-08 00:14:24,875 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:14:24] "GET /api/query/progress/e5227a35-9abe-4059-8935-dd3fe432bb58 HTTP/1.1" 200 -
2025-04-08 00:14:24,987 - DEBUG - [llm_engine.py:107] - [TABLE] Model response received in 2.05s
2025-04-08 00:14:24,987 - DEBUG - [llm_engine.py:116] - [TABLE] Raw model response: 'customers, orders'
2025-04-08 00:14:24,988 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 2.05s
2025-04-08 00:14:24,988 - INFO - [llm_engine.py:120] - **************************
2025-04-08 00:14:24,989 - INFO - [table_agent.py:69] - Raw model response: 'customers, orders'
2025-04-08 00:14:24,990 - INFO - [table_agent.py:90] - Table selection completed in 2.06s. Selected: customers, orders
2025-04-08 00:14:24,991 - INFO - [column_agent.py:29] - Column pruning started for query: 'get me count of customers by order month'
2025-04-08 00:14:24,991 - INFO - [column_agent.py:30] - Processing tables: customers, orders
2025-04-08 00:14:24,993 - INFO - [column_agent.py:94] - Sending request to AI model for column selection
2025-04-08 00:14:24,993 - INFO - [llm_engine.py:56] - [COLUMN] Completion generation started
2025-04-08 00:14:24,994 - DEBUG - [llm_engine.py:87] - [COLUMN] Prompt: [{'role': 'system', 'content': 'You are a column selection agent for a Text-to-SQL system.\nYour job is to identify which columns from the provided tables are most relevant to a user query.\nFor each table, select only the columns that will be needed to answer the query.\nReturn your answer as a JSON object with table names as keys and arrays of column names as values.\nAlways include primary key columns even if not directly mentioned in the query.\nConsider columns that might be needed for:\n1.... (truncated)
2025-04-08 00:14:24,995 - DEBUG - [llm_engine.py:96] - [COLUMN] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-08 00:14:26,139 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:14:26] "GET /api/query/progress/e5227a35-9abe-4059-8935-dd3fe432bb58 HTTP/1.1" 200 -
2025-04-08 00:14:26,797 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:14:26] "GET /api/query/progress/e5227a35-9abe-4059-8935-dd3fe432bb58 HTTP/1.1" 200 -
2025-04-08 00:14:26,993 - DEBUG - [llm_engine.py:107] - [COLUMN] Model response received in 2.00s
2025-04-08 00:14:26,993 - DEBUG - [llm_engine.py:116] - [COLUMN] Raw model response: '{
  "customers": [
    "customer_id"
  ],
  "orders": [
    "order_id",
    "customer_id",
    "order_date"
  ]
}'
2025-04-08 00:14:26,994 - INFO - [llm_engine.py:119] - [COLUMN] Completion generation completed in 2.00s
2025-04-08 00:14:26,995 - INFO - [llm_engine.py:120] - **************************
2025-04-08 00:14:26,995 - INFO - [column_agent.py:99] - Raw model response: '{
  "customers": [
    "customer_id"
  ],
  "orders": [
    "order_id",
    "customer_id",
    "order_date"
  ]
}'
2025-04-08 00:14:26,995 - INFO - [column_agent.py:139] - Parsing column selection from model response
2025-04-08 00:14:26,996 - INFO - [column_agent.py:149] - Parsed column selection JSON: {"customers": ["customer_id"], "orders": ["order_id", "customer_id", "order_date"]}
2025-04-08 00:14:26,996 - INFO - [column_agent.py:111] - Table 'customers': Pruned 10 columns, kept 1/11
2025-04-08 00:14:26,997 - INFO - [column_agent.py:111] - Table 'orders': Pruned 2 columns, kept 3/5
2025-04-08 00:14:26,997 - INFO - [column_agent.py:197] - Building pruned schema
2025-04-08 00:14:26,998 - INFO - [column_agent.py:226] - Built pruned schema (404 chars)
2025-04-08 00:14:26,998 - INFO - [column_agent.py:120] - Column pruning completed in 2.01s
2025-04-08 00:14:26,999 - INFO - [sql_generator.py:237] - Found 1 join conditions for the relevant tables
2025-04-08 00:14:26,999 - INFO - [feedback_manager.py:260] - Stage 1: Vector search for 'get me count of customers by order month...'
2025-04-08 00:14:26,999 - INFO - [feedback_manager.py:74] - Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-08 00:14:28,047 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:14:28] "GET /api/query/progress/e5227a35-9abe-4059-8935-dd3fe432bb58 HTTP/1.1" 200 -
2025-04-08 00:14:28,694 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:14:28] "GET /api/query/progress/e5227a35-9abe-4059-8935-dd3fe432bb58 HTTP/1.1" 200 -
2025-04-08 00:14:29,412 - INFO - [feedback_manager.py:77] - Embedding model loaded in 2.41s
2025-04-08 00:14:29,438 - DEBUG - [feedback_manager.py:102] - Generated embedding in 0.03s with shape (384,)
2025-04-08 00:14:29,438 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-08 00:14:29,954 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:14:29] "GET /api/query/progress/e5227a35-9abe-4059-8935-dd3fe432bb58 HTTP/1.1" 200 -
2025-04-08 00:14:30,460 - DEBUG - [milvus_client.py:728] - Created new connection using: 51221e38a2e84eb09c8f428571a235c8
2025-04-08 00:14:30,461 - INFO - [vector_store.py:42] - Vector database connection established in 1.02s
2025-04-08 00:14:30,465 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-08 00:14:30,504 - INFO - [feedback_manager.py:286] - Found 2 initial candidates from vector search
2025-04-08 00:14:30,504 - INFO - [feedback_manager.py:290] - Stage 2: Reranking 2 candidates
2025-04-08 00:14:30,504 - INFO - [feedback_manager.py:118] - Loading reranking model 'cross-encoder/ms-marco-MiniLM-L-6-v2'
2025-04-08 00:14:30,606 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:14:30] "GET /api/query/progress/e5227a35-9abe-4059-8935-dd3fe432bb58 HTTP/1.1" 200 -
2025-04-08 00:14:31,841 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:14:31] "GET /api/query/progress/e5227a35-9abe-4059-8935-dd3fe432bb58 HTTP/1.1" 200 -
2025-04-08 00:14:32,119 - INFO - [feedback_manager.py:122] - Reranking model loaded in 1.61s
2025-04-08 00:14:32,119 - INFO - [feedback_manager.py:296] - [('get me count of customers by order month', 'get me count of customers by order month'), ('get me count of customers by order month', 'get me all the customers')]
2025-04-08 00:14:32,139 - INFO - [feedback_manager.py:309] - Found 1 candidates with positive reranking scores
2025-04-08 00:14:32,140 - INFO - [feedback_manager.py:313] - Reranking successful, returning top 1 results
2025-04-08 00:14:32,140 - INFO - [sql_generator.py:280] - Found 1 similar queries with reranking
2025-04-08 00:14:32,141 - INFO - [sql_generator.py:302] - Added similar query #1 from manual (score: 8.9642): get me count of customers by order month...
2025-04-08 00:14:32,141 - INFO - [azure_client.py:35] - SQL generation started for query: 'get me count of customers by order month'
2025-04-08 00:14:32,142 - INFO - [azure_client.py:69] - Including schema information (404 chars)
2025-04-08 00:14:32,142 - INFO - [azure_client.py:76] - Including 1 join conditions
2025-04-08 00:14:32,143 - INFO - [azure_client.py:97] - Including 1 SQL examples from manual similarity search
2025-04-08 00:14:32,143 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER): Unique customer identifier\nPrimary Key(s): customer_id\n\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER): Unique order identifier, customer_id (INTEGER): Reference to customer who placed the order, order_date (TEXT): Date when order was placed\nPrimary Key(s): order_id\n"}, {'role': 'user', 'content': 'Use the following pre-defined join conditions when joining these tables:\n- When joining customers with orders, use: INNER JOIN orders ON customers.customer_id = orders.customer_id\n'}, {'role': 'user', 'content': "Here are some similar queries that were previously successful:\nQuestion: get me count of customers by order month\nSQL: SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;\n\n"}, {'role': 'user', 'content': 'Convert this question to SQL: get me count of customers by order month'}]
2025-04-08 00:14:32,144 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-08 00:14:32,144 - DEBUG - [llm_engine.py:87] - [SQL_GEN] Prompt: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief ... (truncated)
2025-04-08 00:14:32,144 - DEBUG - [llm_engine.py:96] - [SQL_GEN] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-08 00:14:32,507 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:14:32] "GET /api/query/progress/e5227a35-9abe-4059-8935-dd3fe432bb58 HTTP/1.1" 200 -
2025-04-08 00:14:33,769 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:14:33] "GET /api/query/progress/e5227a35-9abe-4059-8935-dd3fe432bb58 HTTP/1.1" 200 -
2025-04-08 00:14:34,345 - DEBUG - [llm_engine.py:107] - [SQL_GEN] Model response received in 2.20s
2025-04-08 00:14:34,345 - DEBUG - [llm_engine.py:116] - [SQL_GEN] Raw model response: 'Here's a query that will retrieve the number of unique customers grouped by the month of their orders:

```sql
SELECT 
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id
GROUP BY 
    order_month
ORDER BY 
    order_month;
```'
2025-04-08 00:14:34,346 - INFO - [llm_engine.py:119] - [SQL_GEN] Completion generation completed in 2.20s
2025-04-08 00:14:34,346 - INFO - [llm_engine.py:120] - **************************
2025-04-08 00:14:34,347 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-08 00:14:34,347 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-08 00:14:34,347 - INFO - [azure_client.py:171] - Extracted SQL query (244 chars) and explanation (102 chars)
2025-04-08 00:14:34,348 - INFO - [azure_client.py:124] - Generated SQL: SELECT 
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id
GROUP BY 
    order_month
ORDER BY 
    order_month;
2025-04-08 00:14:34,349 - INFO - [azure_client.py:132] - SQL generation completed in 2.21s
2025-04-08 00:14:34,350 - INFO - [database.py:65] - Executing SQL query: SELECT 
    strftime('%Y-%m', o.order_date) AS order_month,
    COUNT(DISTINCT c.customer_id) AS customer_count
FROM 
    customers c
INNER JOIN 
    orders o ON c.customer_id = o.customer_id
GROUP BY 
    order_month
ORDER BY 
    order_month;
2025-04-08 00:14:34,350 - DEBUG - [database.py:76] - Query execution started
2025-04-08 00:14:34,352 - DEBUG - [database.py:81] - Query execution completed in 0.00s
2025-04-08 00:14:34,353 - INFO - [database.py:86] - Query returned 2 rows with 2 columns
2025-04-08 00:14:34,355 - DEBUG - [database.py:92] - Sample data (first 2 rows):
  order_month  customer_count
0     2023-04               5
1     2023-05               3
2025-04-08 00:14:34,356 - INFO - [database.py:95] - Query processing completed in 0.01s
2025-04-08 00:14:34,357 - INFO - [sql_generator.py:376] - SQL generation completed in 11.43s
2025-04-08 00:14:34,357 - INFO - [sql_generator.py:125] - Query processing completed in 11.43s
2025-04-08 00:14:34,405 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:14:34] "GET /api/query/progress/e5227a35-9abe-4059-8935-dd3fe432bb58 HTTP/1.1" 200 -
2025-04-08 00:14:35,304 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/config/config.py', reloading
2025-04-08 00:14:35,305 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/config/config.py', reloading
2025-04-08 00:14:35,306 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/config/config.py', reloading
2025-04-08 00:14:36,307 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-08 00:14:36,308 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-08 00:14:36,308 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 00:14:36,308 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-08 00:14:36,308 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 00:14:36,308 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-08 00:14:36,309 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 00:14:36,309 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-08 00:14:36,309 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 00:14:36,309 - INFO - [database.py:258] - Closing database connection
2025-04-08 00:14:36,310 - DEBUG - [database.py:261] - Database engine disposed
2025-04-08 00:14:36,310 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-08 00:14:36,310 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-08 00:14:37,268 [INFO] werkzeug [_internal.py:224]:  * Restarting with watchdog (inotify)
2025-04-08 00:14:40,902 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:14:40,902 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:14:40,903 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:14:40,903 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:14:40,903 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 00:14:40,911 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:14:40,912 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:14:40,913 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:14:40,954 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:14:40,955 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:14:40,955 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:14:40,955 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:14:40,955 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:14:40,955 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:14:40,956 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:14:40,995 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:14:40,995 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:14:40,996 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:14:40,996 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:14:40,996 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:14:40,997 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:14:40,997 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:14:41,035 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:14:41,036 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:14:41,036 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:14:41,036 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:14:41,037 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:14:41,037 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-08 00:14:41,037 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:14:41,037 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:14:41,075 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:14:41,075 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-08 00:14:41,077 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:14:41,077 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:14:41,078 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:14:41,078 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:14:41,078 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:14:41,079 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:14:41,114 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-08 00:14:41,115 - INFO - [_internal.py:224] -  * Debugger PIN: 774-546-021
2025-04-08 00:15:14,556 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/agents/column_agent.py', reloading
2025-04-08 00:15:14,568 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/agents/column_agent.py', reloading
2025-04-08 00:15:15,570 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-08 00:15:15,570 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-08 00:15:15,570 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 00:15:15,570 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-08 00:15:15,570 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 00:15:15,570 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-08 00:15:15,571 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 00:15:15,571 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-08 00:15:15,571 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 00:15:15,571 - INFO - [database.py:258] - Closing database connection
2025-04-08 00:15:15,571 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-08 00:15:15,571 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-08 00:15:18,132 [INFO] werkzeug [_internal.py:224]:  * Restarting with watchdog (inotify)
2025-04-08 00:15:23,150 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:15:23,150 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:15:23,150 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:15:23,150 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:15:23,151 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 00:15:23,160 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:15:23,162 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:15:23,163 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:15:23,257 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:15:23,257 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:15:23,258 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:15:23,258 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:15:23,258 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:15:23,259 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:15:23,259 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:15:23,324 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:15:23,324 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:15:23,325 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:15:23,325 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:15:23,325 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:15:23,326 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:15:23,326 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:15:23,377 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:15:23,377 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:15:23,378 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:15:23,378 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:15:23,378 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:15:23,378 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-08 00:15:23,379 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:15:23,379 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:15:23,430 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:15:23,430 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-08 00:15:23,430 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:15:23,430 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:15:23,431 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:15:23,431 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:15:23,431 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:15:23,431 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:15:23,476 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-08 00:15:23,476 - INFO - [_internal.py:224] -  * Debugger PIN: 774-546-021
2025-04-08 00:15:57,428 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/utils/feedback_manager.py', reloading
2025-04-08 00:15:57,438 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/utils/feedback_manager.py', reloading
2025-04-08 00:15:58,439 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-08 00:15:58,439 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-08 00:15:58,440 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 00:15:58,440 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-08 00:15:58,440 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 00:15:58,440 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-08 00:15:58,440 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 00:15:58,440 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-08 00:15:58,440 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 00:15:58,440 - INFO - [database.py:258] - Closing database connection
2025-04-08 00:15:58,440 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-08 00:15:58,441 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-08 00:15:59,406 [INFO] werkzeug [_internal.py:224]:  * Restarting with watchdog (inotify)
2025-04-08 00:16:03,090 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:16:03,091 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:16:03,091 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:16:03,091 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:16:03,092 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 00:16:03,099 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:16:03,101 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:16:03,101 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:16:03,144 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:16:03,144 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:16:03,145 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:16:03,145 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:16:03,145 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:16:03,145 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:16:03,145 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:16:03,183 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:16:03,183 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:16:03,184 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:16:03,184 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:16:03,184 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:16:03,184 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:16:03,184 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:16:03,222 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:16:03,222 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:16:03,222 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:16:03,223 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:16:03,223 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:16:03,223 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-08 00:16:03,223 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:16:03,223 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:16:03,264 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:16:03,265 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-08 00:16:03,265 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:16:03,265 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:16:03,265 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:16:03,265 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:16:03,265 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:16:03,266 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:16:03,299 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-08 00:16:03,299 - INFO - [_internal.py:224] -  * Debugger PIN: 774-546-021
2025-04-08 00:16:54,430 [INFO] text2sql.sql_generator [sql_generator.py:422]: Closing all agent connections
2025-04-08 00:16:54,430 [INFO] text2sql.agents.intent [intent_agent.py:135]: Closing intent agent's LLM engine connection
2025-04-08 00:16:54,431 [INFO] text2sql.agents.table [table_agent.py:121]: Closing table agent's LLM engine connection
2025-04-08 00:16:54,431 [INFO] text2sql.agents.column [column_agent.py:231]: Closing column agent's LLM engine connection
2025-04-08 00:16:54,431 [INFO] text2sql.azure [azure_client.py:186]: Closing Azure AI client connection
2025-04-08 00:16:54 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-08 00:16:54,431 [INFO] text2sql.database [database.py:258]: Closing database connection
2025-04-08 00:16:54 - INFO - [database.py:258] - Closing database connection
2025-04-08 00:16:54,431 [INFO] text2sql.feedback [feedback_manager.py:751]: Closing database connections
2025-04-08 00:16:54 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-08 00:16:54,432 [INFO] text2sql.vector [vector_store.py:288]: Closing vector database connection
2025-04-08 00:16:54 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-08 00:17:16,654 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:17:16,654 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:17:16,655 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:17:16,655 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:17:16,656 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 00:17:16,665 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:17:16,667 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:17:16,667 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:17:16,723 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:17:16,724 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:17:16,724 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:17:16,724 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:17:16,725 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:17:16,725 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:17:16,725 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:17:16,798 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:17:16,798 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:17:16,799 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:17:16,799 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:17:16,800 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:17:16,800 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:17:16,800 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:17:16,889 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:17:16,889 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:17:16,890 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:17:16,890 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:17:16,891 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:17:16,891 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-08 00:17:16,892 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:17:16,892 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:17:17,074 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:17:17,075 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-08 00:17:17,075 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:17:17,077 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:17:17,078 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:17:17,078 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:17:17,079 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:17:17,079 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:17:17,178 - INFO - [_internal.py:224] - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.27.251.157:5000
2025-04-08 00:17:17,179 - INFO - [_internal.py:224] - [33mPress CTRL+C to quit[0m
2025-04-08 00:17:17,188 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-08 00:17:22,962 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:17:22,963 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:17:22,963 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:17:22,963 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:17:22,964 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 00:17:22,976 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:17:22,979 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:17:22,979 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:17:23,043 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:17:23,043 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:17:23,043 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:17:23,044 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:17:23,044 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:17:23,044 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:17:23,045 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:17:23,092 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:17:23,093 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:17:23,094 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:17:23,094 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:17:23,094 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:17:23,094 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:17:23,095 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:17:23,143 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:17:23,144 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:17:23,144 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:17:23,144 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:17:23,144 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:17:23,145 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-08 00:17:23,145 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:17:23,145 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:17:23,189 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:17:23,190 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-08 00:17:23,190 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:17:23,190 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:17:23,191 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:17:23,191 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:17:23,191 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:17:23,191 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:17:23,230 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-08 00:17:23,231 - INFO - [_internal.py:224] -  * Debugger PIN: 774-546-021
2025-04-08 00:22:43,951 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 00:22:43,970 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 00:22:44,971 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-08 00:22:44,971 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-08 00:22:44,971 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 00:22:44,971 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-08 00:22:44,971 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 00:22:44,971 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-08 00:22:44,971 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 00:22:44,971 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-08 00:22:44,971 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 00:22:44,971 - INFO - [database.py:258] - Closing database connection
2025-04-08 00:22:44,972 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-08 00:22:44,972 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-08 00:22:45,911 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-08 00:22:50,009 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:22:50,009 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:22:50,010 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:22:50,010 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:22:50,010 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 00:22:50,017 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:22:50,018 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:22:50,019 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:22:50,050 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:22:50,050 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:22:50,050 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:22:50,051 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:22:50,051 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:22:50,051 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:22:50,051 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:22:50,080 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:22:50,081 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:22:50,081 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:22:50,081 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:22:50,081 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:22:50,081 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:22:50,081 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:22:50,109 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:22:50,109 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:22:50,110 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:22:50,110 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:22:50,110 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:22:50,110 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-08 00:22:50,110 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:22:50,110 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:22:50,136 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:22:50,137 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-08 00:22:50,137 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:22:50,137 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:22:50,137 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:22:50,137 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:22:50,137 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:22:50,138 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:22:50,160 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-08 00:22:50,161 - INFO - [_internal.py:224] -  * Debugger PIN: 774-546-021
2025-04-08 00:23:18,863 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/app.py', reloading
2025-04-08 00:23:18,864 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/app.py', reloading
2025-04-08 00:23:18,880 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/app.py', reloading
2025-04-08 00:23:19,881 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-08 00:23:19,881 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-08 00:23:19,881 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 00:23:19,881 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-08 00:23:19,881 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 00:23:19,881 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-08 00:23:19,881 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 00:23:19,881 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-08 00:23:19,881 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 00:23:19,881 - INFO - [database.py:258] - Closing database connection
2025-04-08 00:23:19,882 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-08 00:23:19,882 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-08 00:23:20,769 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-08 00:23:24,377 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:23:24,377 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:23:24,377 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:23:24,377 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:23:24,378 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 00:23:24,385 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:23:24,389 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:23:24,389 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:23:24,418 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:23:24,419 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:23:24,419 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:23:24,419 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:23:24,419 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:23:24,419 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:23:24,420 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:23:24,447 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:23:24,448 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:23:24,448 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:23:24,448 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:23:24,448 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:23:24,448 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:23:24,448 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:23:24,475 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:23:24,475 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:23:24,475 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:23:24,475 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:23:24,475 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:23:24,476 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-08 00:23:24,476 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:23:24,476 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:23:24,502 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:23:24,503 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-08 00:23:24,503 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:23:24,503 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:23:24,504 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:23:24,504 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:23:24,504 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:23:24,504 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:23:24,532 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-08 00:23:24,532 - INFO - [_internal.py:224] -  * Debugger PIN: 774-546-021
2025-04-08 00:32:11,356 - DEBUG - [app.py:84] - Main page requested
2025-04-08 00:32:11,368 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:32:11] "GET / HTTP/1.1" 200 -
2025-04-08 00:32:11,579 - DEBUG - [app.py:152] - Table suggestions requested for workspace: dfd, query: ''
2025-04-08 00:32:11,580 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:32:11] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-08 00:32:16,612 - DEBUG - [vector_db_routes.py:36] - Vector database management page requested
2025-04-08 00:32:16,620 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:32:16] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 00:32:16,967 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:32:16] "GET /static/js/admin/vector_db.js HTTP/1.1" 200 -
2025-04-08 00:32:17,208 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-08 00:32:18,237 - DEBUG - [milvus_client.py:728] - Created new connection using: f3279cbf903f4bb395f270e8d9f63085
2025-04-08 00:32:18,237 - INFO - [vector_store.py:42] - Vector database connection established in 1.03s
2025-04-08 00:32:18,240 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-08 00:32:18,242 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:32:18] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 00:32:18,256 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:32:18] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 00:32:24,009 - ERROR - [vector_db_routes.py:256] - Error retrieving collection data: Object of type float32 is not JSON serializable
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/routes/vector_db_routes.py", line 248, in get_collection_data
    return jsonify({
           ^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/flask/json/__init__.py", line 342, in jsonify
    return current_app.json.response(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/flask/json/provider.py", line 309, in response
    f"{self.dumps(obj, **dump_args)}\n", mimetype=mimetype
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/flask/json/provider.py", line 230, in dumps
    return json.dumps(obj, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/json/__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/json/encoder.py", line 202, in encode
    chunks = list(chunks)
             ^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/json/encoder.py", line 432, in _iterencode
    yield from _iterencode_dict(o, _current_indent_level)
  File "/home/vijay/anaconda3/lib/python3.11/json/encoder.py", line 406, in _iterencode_dict
    yield from chunks
  File "/home/vijay/anaconda3/lib/python3.11/json/encoder.py", line 326, in _iterencode_list
    yield from chunks
  File "/home/vijay/anaconda3/lib/python3.11/json/encoder.py", line 406, in _iterencode_dict
    yield from chunks
  File "/home/vijay/anaconda3/lib/python3.11/json/encoder.py", line 326, in _iterencode_list
    yield from chunks
  File "/home/vijay/anaconda3/lib/python3.11/json/encoder.py", line 439, in _iterencode
    o = _default(o)
        ^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/flask/json/provider.py", line 122, in _default
    raise TypeError(f"Object of type {type(o).__name__} is not JSON serializable")
TypeError: Object of type float32 is not JSON serializable
2025-04-08 00:32:24,011 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:32:24] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 00:32:24,013 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:32:24] "[35m[1mGET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1[0m" 500 -
2025-04-08 00:32:37,794 - DEBUG - [app.py:84] - Main page requested
2025-04-08 00:32:37,798 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:32:37] "GET / HTTP/1.1" 200 -
2025-04-08 00:32:38,142 - DEBUG - [app.py:152] - Table suggestions requested for workspace: dfd, query: ''
2025-04-08 00:32:38,144 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:32:38] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-08 00:32:58,288 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 00:32:58,289 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/app.py', reloading
2025-04-08 00:32:58,289 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/app.py', reloading
2025-04-08 00:32:58,289 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 00:32:58,301 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/app.py', reloading
2025-04-08 00:32:58,302 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 00:32:59,303 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-08 00:32:59,303 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-08 00:32:59,303 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 00:32:59,304 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-08 00:32:59,304 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 00:32:59,304 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-08 00:32:59,304 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 00:32:59,304 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-08 00:32:59,304 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 00:32:59,304 - INFO - [database.py:258] - Closing database connection
2025-04-08 00:32:59,304 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-08 00:32:59,305 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-08 00:33:00,136 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-08 00:33:06,267 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:33:06,268 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:33:06,268 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:33:06,268 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:33:06,269 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 00:33:06,283 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:33:06,294 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:33:06,294 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:33:06,361 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:33:06,361 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:33:06,362 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:33:06,362 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:33:06,362 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:33:06,363 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:33:06,363 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:33:06,428 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:33:06,429 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:33:06,429 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:33:06,430 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:33:06,430 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:33:06,430 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:33:06,431 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:33:06,490 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:33:06,491 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:33:06,492 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:33:06,492 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:33:06,492 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:33:06,492 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-08 00:33:06,493 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:33:06,493 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:33:06,559 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:33:06,560 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-08 00:33:06,560 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:33:06,560 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:33:06,560 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:33:06,561 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:33:06,561 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:33:06,561 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:33:06,622 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-08 00:33:06,622 - INFO - [_internal.py:224] -  * Debugger PIN: 774-546-021
2025-04-08 00:33:21,092 - DEBUG - [app.py:84] - Main page requested
2025-04-08 00:33:21,106 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:33:21] "GET / HTTP/1.1" 200 -
2025-04-08 00:33:21,326 - DEBUG - [app.py:152] - Table suggestions requested for workspace: dfd, query: ''
2025-04-08 00:33:21,328 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:33:21] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-08 00:33:24,902 - DEBUG - [vector_db_routes.py:36] - Vector database management page requested
2025-04-08 00:33:24,909 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:33:24] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 00:33:25,246 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-08 00:33:26,269 - DEBUG - [milvus_client.py:728] - Created new connection using: d2351dbce9864faf97eab00d1795ddc0
2025-04-08 00:33:26,269 - INFO - [vector_store.py:42] - Vector database connection established in 1.02s
2025-04-08 00:33:26,271 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-08 00:33:26,273 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:33:26] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 00:33:26,286 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:33:26] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 00:33:34,909 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:33:34] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 00:33:34,910 - ERROR - [vector_db_routes.py:256] - Error retrieving collection data: Object of type float32 is not JSON serializable
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/routes/vector_db_routes.py", line 248, in get_collection_data
    return jsonify({
           ^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/flask/json/__init__.py", line 342, in jsonify
    return current_app.json.response(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/flask/json/provider.py", line 309, in response
    f"{self.dumps(obj, **dump_args)}\n", mimetype=mimetype
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/flask/json/provider.py", line 230, in dumps
    return json.dumps(obj, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/json/__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/json/encoder.py", line 202, in encode
    chunks = list(chunks)
             ^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/json/encoder.py", line 432, in _iterencode
    yield from _iterencode_dict(o, _current_indent_level)
  File "/home/vijay/anaconda3/lib/python3.11/json/encoder.py", line 406, in _iterencode_dict
    yield from chunks
  File "/home/vijay/anaconda3/lib/python3.11/json/encoder.py", line 326, in _iterencode_list
    yield from chunks
  File "/home/vijay/anaconda3/lib/python3.11/json/encoder.py", line 406, in _iterencode_dict
    yield from chunks
  File "/home/vijay/anaconda3/lib/python3.11/json/encoder.py", line 326, in _iterencode_list
    yield from chunks
  File "/home/vijay/anaconda3/lib/python3.11/json/encoder.py", line 439, in _iterencode
    o = _default(o)
        ^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/flask/json/provider.py", line 122, in _default
    raise TypeError(f"Object of type {type(o).__name__} is not JSON serializable")
TypeError: Object of type float32 is not JSON serializable
2025-04-08 00:33:34,914 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:33:34] "[35m[1mGET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1[0m" 500 -
2025-04-08 00:34:58,182 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 00:34:58,184 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 00:34:58,197 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 00:34:59,201 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-08 00:34:59,201 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-08 00:34:59,201 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 00:34:59,201 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-08 00:34:59,202 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 00:34:59,202 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-08 00:34:59,202 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 00:34:59,202 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-08 00:34:59,202 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 00:34:59,203 - INFO - [database.py:258] - Closing database connection
2025-04-08 00:34:59,203 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-08 00:34:59,203 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-08 00:35:00,766 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-08 00:35:07,842 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:35:07,843 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:35:07,843 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:35:07,843 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:35:07,844 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 00:35:07,853 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:35:07,859 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:35:07,860 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:35:07,913 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:35:07,913 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:35:07,913 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:35:07,913 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:35:07,914 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:35:07,914 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:35:07,914 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:35:07,965 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:35:07,965 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:35:07,966 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:35:07,966 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:35:07,966 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:35:07,966 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:35:07,967 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:35:08,018 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:35:08,019 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:35:08,019 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:35:08,019 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:35:08,019 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:35:08,020 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-08 00:35:08,020 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:35:08,020 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:35:08,111 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:35:08,111 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-08 00:35:08,111 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:35:08,111 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:35:08,112 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:35:08,112 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:35:08,112 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:35:08,113 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:35:08,189 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-08 00:35:08,189 - INFO - [_internal.py:224] -  * Debugger PIN: 774-546-021
2025-04-08 00:35:13,953 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 00:35:13,963 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 00:35:14,964 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-08 00:35:14,964 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-08 00:35:14,964 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 00:35:14,964 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-08 00:35:14,964 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 00:35:14,965 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-08 00:35:14,965 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 00:35:14,965 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-08 00:35:14,965 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 00:35:14,965 - INFO - [database.py:258] - Closing database connection
2025-04-08 00:35:14,965 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-08 00:35:14,965 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-08 00:35:15,853 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-08 00:35:22,075 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:35:22,076 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:35:22,076 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:35:22,076 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:35:22,077 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 00:35:22,085 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:35:22,091 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:35:22,091 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:35:22,136 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:35:22,136 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:35:22,136 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:35:22,136 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:35:22,137 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:35:22,137 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:35:22,137 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:35:22,209 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:35:22,210 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:35:22,210 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:35:22,210 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:35:22,211 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:35:22,211 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:35:22,211 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:35:22,332 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:35:22,333 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:35:22,334 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:35:22,334 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:35:22,336 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:35:22,337 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-08 00:35:22,338 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:35:22,339 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:35:22,427 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:35:22,428 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-08 00:35:22,428 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:35:22,429 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:35:22,431 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:35:22,431 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:35:22,431 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:35:22,432 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:35:22,502 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-08 00:35:22,502 - INFO - [_internal.py:224] -  * Debugger PIN: 774-546-021
2025-04-08 00:35:28,327 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 00:35:28,345 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:35:28] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 00:35:28,557 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:35:28] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-08 00:35:28,675 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:35:28] "GET /static/js/admin/vector_db.js HTTP/1.1" 200 -
2025-04-08 00:35:28,711 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-08 00:35:29,735 - DEBUG - [milvus_client.py:728] - Created new connection using: dc162c8840c945a48dd7146e9873c36f
2025-04-08 00:35:29,735 - INFO - [vector_store.py:42] - Vector database connection established in 1.02s
2025-04-08 00:35:29,737 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-08 00:35:29,739 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:35:29] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 00:35:30,051 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:35:30] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 00:35:30,914 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:35:30] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 00:35:31,246 - ERROR - [vector_db_routes.py:272] - Error retrieving collection data: Object of type float32 is not JSON serializable
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/routes/vector_db_routes.py", line 264, in get_collection_data
    return jsonify({
           ^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/flask/json/__init__.py", line 342, in jsonify
    return current_app.json.response(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/flask/json/provider.py", line 309, in response
    f"{self.dumps(obj, **dump_args)}\n", mimetype=mimetype
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/flask/json/provider.py", line 230, in dumps
    return json.dumps(obj, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/json/__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/json/encoder.py", line 202, in encode
    chunks = list(chunks)
             ^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/json/encoder.py", line 432, in _iterencode
    yield from _iterencode_dict(o, _current_indent_level)
  File "/home/vijay/anaconda3/lib/python3.11/json/encoder.py", line 406, in _iterencode_dict
    yield from chunks
  File "/home/vijay/anaconda3/lib/python3.11/json/encoder.py", line 326, in _iterencode_list
    yield from chunks
  File "/home/vijay/anaconda3/lib/python3.11/json/encoder.py", line 406, in _iterencode_dict
    yield from chunks
  File "/home/vijay/anaconda3/lib/python3.11/json/encoder.py", line 326, in _iterencode_list
    yield from chunks
  File "/home/vijay/anaconda3/lib/python3.11/json/encoder.py", line 439, in _iterencode
    o = _default(o)
        ^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/flask/json/provider.py", line 122, in _default
    raise TypeError(f"Object of type {type(o).__name__} is not JSON serializable")
TypeError: Object of type float32 is not JSON serializable
2025-04-08 00:35:31,250 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:35:31] "[35m[1mGET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1[0m" 500 -
2025-04-08 00:35:41,085 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 00:35:41,086 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 00:35:41,093 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 00:35:42,096 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-08 00:35:42,096 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-08 00:35:42,097 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 00:35:42,097 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-08 00:35:42,097 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 00:35:42,098 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-08 00:35:42,098 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 00:35:42,098 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-08 00:35:42,098 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 00:35:42,098 - INFO - [database.py:258] - Closing database connection
2025-04-08 00:35:42,099 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-08 00:35:42,099 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-08 00:35:43,831 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-08 00:35:50,722 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:35:50,723 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:35:50,723 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:35:50,723 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:35:50,724 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 00:35:50,735 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:35:50,744 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:35:50,744 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:35:50,805 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:35:50,806 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:35:50,806 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:35:50,807 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:35:50,807 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:35:50,807 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:35:50,808 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:35:50,873 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:35:50,873 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:35:50,874 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:35:50,874 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:35:50,874 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:35:50,874 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:35:50,874 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:35:50,935 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:35:50,936 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:35:50,936 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:35:50,937 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:35:50,937 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:35:50,938 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-08 00:35:50,938 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:35:50,938 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:35:51,013 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:35:51,014 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-08 00:35:51,014 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:35:51,014 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:35:51,015 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:35:51,015 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:35:51,015 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:35:51,015 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:35:51,069 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-08 00:35:51,070 - INFO - [_internal.py:224] -  * Debugger PIN: 774-546-021
2025-04-08 00:35:51,880 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 00:35:51,904 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:35:51] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 00:35:52,006 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-08 00:35:53,057 - DEBUG - [milvus_client.py:728] - Created new connection using: c3c58fed5f2b4fa98ad3bd794213b989
2025-04-08 00:35:53,057 - INFO - [vector_store.py:42] - Vector database connection established in 1.05s
2025-04-08 00:35:53,060 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-08 00:35:53,063 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:35:53] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 00:35:53,372 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:35:53] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 00:35:54,252 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:35:54] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 00:35:54,579 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:35:54] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 00:36:30,771 - ERROR - [decorators.py:140] - RPC error: [query], <MilvusException: (code=2000, message= => unsupported expr proto node: column_expr {
  info {
    field_id: 102
    data_type: JSON
    nested_path: "get"
  }
}
: segcore error)>, <Time:{'RPC start': '2025-04-08 00:36:30.748438', 'RPC error': '2025-04-08 00:36:30.771917'}>
2025-04-08 00:36:30,772 - ERROR - [milvus_client.py:479] - Failed to query collection: query_embeddings
2025-04-08 00:36:30,772 - ERROR - [vector_db_routes.py:275] - Error retrieving collection data: <MilvusException: (code=2000, message= => unsupported expr proto node: column_expr {
  info {
    field_id: 102
    data_type: JSON
    nested_path: "get"
  }
}
: segcore error)>
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/routes/vector_db_routes.py", line 250, in get_collection_data
    results = vector_store.client.query(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/pymilvus/milvus_client/milvus_client.py", line 480, in query
    raise ex from ex
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/pymilvus/milvus_client/milvus_client.py", line 469, in query
    res = conn.query(
          ^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/pymilvus/decorators.py", line 141, in handler
    raise e from e
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/pymilvus/decorators.py", line 137, in handler
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/pymilvus/decorators.py", line 176, in handler
    return func(self, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/pymilvus/decorators.py", line 116, in handler
    raise e from e
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/pymilvus/decorators.py", line 86, in handler
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/pymilvus/client/grpc_handler.py", line 1541, in query
    check_status(response.status)
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/pymilvus/client/utils.py", line 63, in check_status
    raise MilvusException(status.code, status.reason, status.error_code)
pymilvus.exceptions.MilvusException: <MilvusException: (code=2000, message= => unsupported expr proto node: column_expr {
  info {
    field_id: 102
    data_type: JSON
    nested_path: "get"
  }
}
: segcore error)>
2025-04-08 00:36:30,776 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:36:30] "[35m[1mGET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0&filter=get%20me%20all%20the%20customers HTTP/1.1[0m" 500 -
2025-04-08 00:37:05,984 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:37:05] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 00:37:13,747 - INFO - [vector_db_routes.py:361] - Loading embedding model...
2025-04-08 00:37:16,221 - INFO - [vector_db_routes.py:363] - Embedding model loaded in 2.47s
2025-04-08 00:37:16,290 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:37:16] "POST /admin/api/vector-db/collections/query_embeddings/search HTTP/1.1" 200 -
2025-04-08 00:37:31,757 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:37:31] "POST /admin/api/vector-db/collections/query_embeddings/search HTTP/1.1" 200 -
2025-04-08 00:38:01,160 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 00:38:01,163 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:38:01] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 00:38:01,399 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:38:01] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 00:38:01,515 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:38:01] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 00:39:24,736 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:39:24] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 00:39:24,737 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:39:24] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 00:40:09,402 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 00:40:09,407 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:40:09] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 00:40:09,754 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:40:09] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 00:40:10,005 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:40:10] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 00:40:12,703 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 00:40:12,706 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:40:12] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 00:40:13,040 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:40:13] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 00:40:13,283 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:40:13] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 00:40:13,671 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 00:40:13,675 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:40:13] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 00:40:14,020 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:40:14] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 00:40:14,254 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:40:14] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 00:40:15,840 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:40:15] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 00:40:16,138 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:40:16] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 00:40:25,529 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:40:25] "POST /admin/api/vector-db/collections/query_embeddings/search HTTP/1.1" 200 -
2025-04-08 00:40:47,605 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:40:47] "POST /admin/api/vector-db/collections/query_embeddings/search HTTP/1.1" 200 -
2025-04-08 00:42:31,498 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:42:31] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 00:42:31,500 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:42:31] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 00:42:46,274 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 00:42:46,278 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:42:46] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 00:42:46,620 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:42:46] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 00:42:46,850 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:42:46] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 00:43:06,929 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:43:06] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 00:43:07,241 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:43:07] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 00:43:29,942 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 00:43:29,945 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:43:29] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 00:43:30,197 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:43:30] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 00:43:30,294 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:43:30] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 00:43:31,794 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:43:31] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 00:43:32,093 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:43:32] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 00:44:47,006 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 00:44:47,013 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:44:47] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 00:44:47,267 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:44:47] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 00:44:47,418 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:44:47] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 00:44:56,389 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 00:44:56,394 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:44:56] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 00:44:56,720 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:44:56] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 00:44:56,961 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:44:56] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 00:46:09,801 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 00:46:09,804 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:46:09] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 00:46:10,025 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:46:10] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 00:46:10,129 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:46:10] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 00:46:10,996 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:46:10] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 00:46:11,288 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:46:11] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 00:47:56,969 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 00:47:56,973 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:47:56] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 00:47:57,217 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:47:57] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 00:47:57,319 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:47:57] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 00:47:58,327 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:47:58] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 00:47:58,617 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:47:58] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 00:49:36,633 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:49:36] "POST /admin/api/vector-db/collections/query_embeddings/search HTTP/1.1" 200 -
2025-04-08 00:51:14,414 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 00:51:14,418 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:51:14] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 00:51:14,673 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:51:14] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 00:51:14,758 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:51:14] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 00:51:16,240 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:51:16] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 00:51:16,540 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:51:16] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 00:52:35,889 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 00:52:35,893 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:52:35] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 00:52:36,137 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:52:36] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 00:52:36,372 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:52:36] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 00:52:37,334 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:52:37] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 00:52:37,640 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:52:37] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 00:52:47,148 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 00:52:47,152 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:52:47] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 00:52:47,390 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:52:47] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 00:52:47,502 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:52:47] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 00:52:48,647 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:52:48] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 00:52:48,939 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:52:48] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 00:53:42,330 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 00:53:42,333 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:53:42] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 00:53:42,566 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:53:42] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-08 00:53:42,668 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:53:42] "GET /static/js/admin/vector_db.js HTTP/1.1" 200 -
2025-04-08 00:53:42,683 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:53:42] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 00:53:43,000 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:53:43] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-04-08 00:53:43,003 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:53:43] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 00:53:44,189 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:53:44] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 00:53:44,492 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:53:44] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 00:54:11,501 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 00:54:11,505 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:54:11] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 00:54:11,742 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:54:11] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 00:54:11,853 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:54:11] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 00:54:13,283 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:54:13] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 00:54:13,570 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:54:13] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 00:54:21,031 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-08 00:54:21,032 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-08 00:54:21,032 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 00:54:21,033 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-08 00:54:21,033 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 00:54:21,033 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-08 00:54:21,034 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 00:54:21,034 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-08 00:54:21,034 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 00:54:21,035 - INFO - [database.py:258] - Closing database connection
2025-04-08 00:54:21,035 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-08 00:54:21,035 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-08 00:54:35,054 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:54:35,055 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:54:35,055 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:54:35,056 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:54:35,056 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 00:54:35,068 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:54:35,071 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:54:35,071 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:54:35,144 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:54:35,145 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:54:35,145 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:54:35,145 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:54:35,146 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:54:35,146 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:54:35,146 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:54:35,212 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:54:35,213 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:54:35,213 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:54:35,213 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:54:35,214 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:54:35,214 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:54:35,214 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:54:35,307 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:54:35,308 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:54:35,308 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:54:35,309 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:54:35,309 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:54:35,309 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-08 00:54:35,310 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:54:35,310 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:54:35,434 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:54:35,435 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-08 00:54:35,435 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:54:35,435 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:54:35,436 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:54:35,436 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:54:35,436 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:54:35,437 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:54:35,502 - INFO - [_internal.py:224] - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.27.251.157:5000
2025-04-08 00:54:35,503 - INFO - [_internal.py:224] - [33mPress CTRL+C to quit[0m
2025-04-08 00:54:35,513 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-08 00:54:43,174 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:54:43,175 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:54:43,175 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:54:43,176 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:54:43,176 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 00:54:43,196 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:54:43,201 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:54:43,202 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:54:43,268 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:54:43,268 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:54:43,269 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:54:43,269 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:54:43,269 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:54:43,270 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:54:43,270 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:54:43,333 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:54:43,334 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:54:43,335 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:54:43,335 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:54:43,336 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:54:43,336 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:54:43,336 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:54:43,401 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:54:43,401 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:54:43,401 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:54:43,402 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:54:43,402 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:54:43,402 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-08 00:54:43,403 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:54:43,403 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:54:43,461 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:54:43,462 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-08 00:54:43,462 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:54:43,462 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:54:43,463 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:54:43,463 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:54:43,463 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:54:43,463 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:54:43,521 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-08 00:54:43,522 - INFO - [_internal.py:224] -  * Debugger PIN: 774-546-021
2025-04-08 00:54:44,741 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:54:44] "[32mGET /admin/vector-db HTTP/1.1[0m" 302 -
2025-04-08 00:54:44,790 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:54:44] "GET /login?next=http%3A%2F%2Flocalhost%3A5000%2Fadmin%2Fvector-db HTTP/1.1" 200 -
2025-04-08 00:54:45,163 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:54:45] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-08 00:54:45,396 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:54:45] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-04-08 00:54:50,898 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:54:50] "[32mPOST /login HTTP/1.1[0m" 302 -
2025-04-08 00:54:51,198 - DEBUG - [app.py:84] - Main page requested
2025-04-08 00:54:51,211 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:54:51] "GET / HTTP/1.1" 200 -
2025-04-08 00:54:51,447 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:54:51] "GET /static/js/ui-utils.js HTTP/1.1" 200 -
2025-04-08 00:54:51,542 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:54:51] "GET /static/js/table-mentions.js HTTP/1.1" 200 -
2025-04-08 00:54:51,544 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:54:51] "GET /static/js/schema-manager.js HTTP/1.1" 200 -
2025-04-08 00:54:51,545 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:54:51] "GET /static/js/core.js HTTP/1.1" 200 -
2025-04-08 00:54:51,546 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:54:51] "GET /static/js/results-display.js HTTP/1.1" 200 -
2025-04-08 00:54:51,553 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:54:51] "GET /static/js/feedback.js HTTP/1.1" 200 -
2025-04-08 00:54:51,741 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:54:51] "GET /static/js/dashboard.js HTTP/1.1" 200 -
2025-04-08 00:54:51,855 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:54:51] "GET /static/js/query-handler.js HTTP/1.1" 200 -
2025-04-08 00:54:52,208 - DEBUG - [app.py:152] - Table suggestions requested for workspace: dfd, query: ''
2025-04-08 00:54:52,210 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:54:52] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-08 00:54:55,946 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 00:54:55,958 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:54:55] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 00:54:58,090 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:54:58] "GET /static/js/admin/vector_db.js HTTP/1.1" 200 -
2025-04-08 00:54:58,334 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-08 00:54:59,369 - DEBUG - [milvus_client.py:728] - Created new connection using: 790864dfcc2f4f55b21d12ee9e8dedab
2025-04-08 00:54:59,370 - INFO - [vector_store.py:42] - Vector database connection established in 1.04s
2025-04-08 00:54:59,372 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-08 00:54:59,374 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:54:59] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 00:54:59,392 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:54:59] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 00:55:01,381 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:55:01] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 00:55:01,389 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:55:01] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 00:57:45,986 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 00:57:45,992 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:57:45] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 00:57:46,241 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:57:46] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 00:57:46,342 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:57:46] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 00:57:49,536 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:57:49] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 00:57:49,840 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:57:49] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 00:58:03,820 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 00:58:03,824 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:58:03] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 00:58:04,061 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:58:04] "[36mGET /static/js/admin/vector_db.js HTTP/1.1[0m" 304 -
2025-04-08 00:58:04,189 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:58:04] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 00:58:04,373 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:58:04] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 00:58:05,280 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:58:05] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 00:58:05,577 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:58:05] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 00:58:17,060 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-08 00:58:17,060 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-08 00:58:17,061 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 00:58:17,061 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-08 00:58:17,061 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 00:58:17,061 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-08 00:58:17,061 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 00:58:17,061 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-08 00:58:17,061 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 00:58:17,061 - INFO - [database.py:258] - Closing database connection
2025-04-08 00:58:17,061 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-08 00:58:17,061 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-08 00:58:17,299 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-08 00:58:17,299 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-08 00:58:17,299 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 00:58:17,300 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-08 00:58:17,300 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 00:58:17,300 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-08 00:58:17,300 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 00:58:17,300 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-08 00:58:17,300 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 00:58:17,300 - INFO - [database.py:258] - Closing database connection
2025-04-08 00:58:17,301 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-08 00:58:17,301 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-08 00:58:25,838 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:58:25,838 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:58:25,839 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:58:25,839 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:58:25,840 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 00:58:25,851 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:58:25,854 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:58:25,854 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:58:25,918 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:58:25,919 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:58:25,919 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:58:25,920 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:58:25,920 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:58:25,920 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:58:25,921 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:58:25,976 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:58:25,977 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:58:25,977 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:58:25,977 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:58:25,978 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:58:25,979 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:58:25,979 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:58:26,039 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:58:26,040 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:58:26,040 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:58:26,040 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:58:26,040 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:58:26,041 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-08 00:58:26,041 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:58:26,041 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:58:26,100 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:58:26,100 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-08 00:58:26,100 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:58:26,101 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:58:26,101 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:58:26,101 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:58:26,102 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:58:26,102 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:58:26,157 - INFO - [_internal.py:224] - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.27.251.157:5000
2025-04-08 00:58:26,158 - INFO - [_internal.py:224] - [33mPress CTRL+C to quit[0m
2025-04-08 00:58:26,165 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-08 00:58:32,763 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:58:32,763 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:58:32,764 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:58:32,764 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:58:32,765 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 00:58:32,776 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:58:32,782 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:58:32,782 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:58:32,839 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:58:32,839 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:58:32,839 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:58:32,840 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:58:32,840 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:58:32,840 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:58:32,840 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:58:32,902 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:58:32,902 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:58:32,902 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:58:32,903 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:58:32,903 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:58:32,904 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:58:32,904 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:58:32,992 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:58:32,992 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:58:32,993 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:58:32,993 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:58:32,994 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:58:32,994 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-08 00:58:32,994 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 00:58:32,994 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 00:58:33,072 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 00:58:33,073 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-08 00:58:33,073 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:58:33,073 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 00:58:33,074 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 00:58:33,074 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 00:58:33,074 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 00:58:33,075 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 00:58:33,148 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-08 00:58:33,148 - INFO - [_internal.py:224] -  * Debugger PIN: 774-546-021
2025-04-08 00:58:34,073 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 00:58:34,099 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:58:34] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 00:58:34,204 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-08 00:58:35,231 - DEBUG - [milvus_client.py:728] - Created new connection using: b2236fb684334ab9be0d7933bba8e1e3
2025-04-08 00:58:35,231 - INFO - [vector_store.py:42] - Vector database connection established in 1.03s
2025-04-08 00:58:35,233 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-08 00:58:35,234 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:58:35] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 00:58:35,539 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:58:35] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 00:58:36,389 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:58:36] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 00:58:36,716 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:58:36] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 00:58:45,615 - ERROR - [vector_db_routes.py:275] - Error retrieving collection data: 'MilvusClient' object has no attribute 'count'
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/routes/vector_db_routes.py", line 262, in get_collection_data
    total_count = vector_store.client.count(collection_name, filter_expr)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'MilvusClient' object has no attribute 'count'
2025-04-08 00:58:45,616 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 00:58:45] "[35m[1mGET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0&filter=id%3E1 HTTP/1.1[0m" 500 -
2025-04-08 01:00:13,089 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:00:13] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 01:00:28,817 - INFO - [vector_db_routes.py:361] - Loading embedding model...
2025-04-08 01:00:31,432 - INFO - [vector_db_routes.py:361] - Loading embedding model...
2025-04-08 01:00:31,542 - INFO - [vector_db_routes.py:363] - Embedding model loaded in 2.72s
2025-04-08 01:00:31,603 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:00:31] "POST /admin/api/vector-db/collections/query_embeddings/search HTTP/1.1" 200 -
2025-04-08 01:00:34,040 - INFO - [vector_db_routes.py:363] - Embedding model loaded in 2.61s
2025-04-08 01:00:34,072 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:00:34] "POST /admin/api/vector-db/collections/query_embeddings/search HTTP/1.1" 200 -
2025-04-08 01:00:38,765 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 01:00:38,767 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 01:00:38,778 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 01:00:39,779 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-08 01:00:39,780 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-08 01:00:39,780 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 01:00:39,781 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-08 01:00:39,781 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 01:00:39,781 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-08 01:00:39,782 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 01:00:39,782 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-08 01:00:39,782 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 01:00:39,783 - INFO - [database.py:258] - Closing database connection
2025-04-08 01:00:39,783 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-08 01:00:39,783 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-08 01:00:41,903 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-08 01:00:50,298 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:00:50,298 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:00:50,298 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:00:50,299 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:00:50,299 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 01:00:50,308 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 01:00:50,314 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 01:00:50,315 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 01:00:50,360 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 01:00:50,360 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:00:50,361 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:00:50,361 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:00:50,361 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:00:50,361 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 01:00:50,361 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 01:00:50,403 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 01:00:50,404 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:00:50,404 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:00:50,404 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:00:50,404 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:00:50,404 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 01:00:50,405 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 01:00:50,448 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 01:00:50,448 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:00:50,448 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:00:50,448 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:00:50,449 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:00:50,449 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-08 01:00:50,449 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 01:00:50,449 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 01:00:50,494 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 01:00:50,495 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-08 01:00:50,495 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 01:00:50,495 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:00:50,496 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:00:50,496 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:00:50,496 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:00:50,496 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 01:00:50,542 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-08 01:00:50,543 - INFO - [_internal.py:224] -  * Debugger PIN: 774-546-021
2025-04-08 01:01:00,217 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 01:01:00,218 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 01:01:00,219 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 01:01:01,220 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-08 01:01:01,220 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-08 01:01:01,221 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 01:01:01,221 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-08 01:01:01,221 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 01:01:01,221 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-08 01:01:01,222 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 01:01:01,222 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-08 01:01:01,222 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 01:01:01,222 - INFO - [database.py:258] - Closing database connection
2025-04-08 01:01:01,222 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-08 01:01:01,223 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-08 01:01:02,114 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-08 01:01:09,027 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:01:09,027 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:01:09,027 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:01:09,028 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:01:09,028 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 01:01:09,041 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 01:01:09,050 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 01:01:09,050 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 01:01:09,102 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 01:01:09,102 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:01:09,102 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:01:09,102 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:01:09,102 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:01:09,103 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 01:01:09,103 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 01:01:09,149 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 01:01:09,150 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:01:09,150 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:01:09,150 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:01:09,150 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:01:09,151 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 01:01:09,151 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 01:01:09,193 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 01:01:09,193 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:01:09,193 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:01:09,193 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:01:09,194 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:01:09,194 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-08 01:01:09,194 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 01:01:09,194 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 01:01:09,239 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 01:01:09,240 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-08 01:01:09,240 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 01:01:09,240 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:01:09,240 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:01:09,240 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:01:09,241 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:01:09,241 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 01:01:09,283 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-08 01:01:09,283 - INFO - [_internal.py:224] -  * Debugger PIN: 774-546-021
2025-04-08 01:01:09,949 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 01:01:09,973 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:01:09] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 01:01:10,068 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-08 01:01:12,922 - DEBUG - [milvus_client.py:728] - Created new connection using: ff3d5768586d45aa97d299c0e6f15dc5
2025-04-08 01:01:12,922 - INFO - [vector_store.py:42] - Vector database connection established in 2.85s
2025-04-08 01:01:12,927 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-08 01:01:12,930 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:01:12] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 01:01:13,244 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:01:13] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 01:01:15,330 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:01:15] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 01:01:15,665 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:01:15] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 01:01:25,884 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:01:25] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0&filter=id%3E1 HTTP/1.1" 200 -
2025-04-08 01:02:12,430 - INFO - [vector_db_routes.py:378] - Loading embedding model...
2025-04-08 01:02:14,776 - INFO - [vector_db_routes.py:380] - Embedding model loaded in 2.35s
2025-04-08 01:02:14,812 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:02:14] "POST /admin/api/vector-db/collections/query_embeddings/search HTTP/1.1" 200 -
2025-04-08 01:06:35,107 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 01:06:35,111 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:06:35] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 01:06:35,342 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:06:35] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 01:06:35,451 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:06:35] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 01:06:36,940 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:06:36] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 01:06:37,230 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:06:37] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 01:06:51,421 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 01:06:51,423 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 01:06:51,434 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 01:06:54,316 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-08 01:06:54,317 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-08 01:06:54,318 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 01:06:54,318 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-08 01:06:54,319 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 01:06:54,319 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-08 01:06:54,320 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 01:06:54,320 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-08 01:06:54,320 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 01:06:54,321 - INFO - [database.py:258] - Closing database connection
2025-04-08 01:06:54,321 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-08 01:06:54,322 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-08 01:06:57,383 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-08 01:07:08,002 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:07:08,002 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:07:08,003 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:07:08,003 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:07:08,004 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 01:07:08,014 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 01:07:08,021 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 01:07:08,021 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 01:07:08,082 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 01:07:08,082 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:07:08,083 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:07:08,083 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:07:08,083 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:07:08,084 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 01:07:08,084 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 01:07:08,214 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 01:07:08,215 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:07:08,216 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:07:08,216 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:07:08,216 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:07:08,216 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 01:07:08,216 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 01:07:08,353 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 01:07:08,354 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:07:08,354 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:07:08,355 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:07:08,355 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:07:08,356 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-08 01:07:08,356 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 01:07:08,356 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 01:07:08,489 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 01:07:08,490 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-08 01:07:08,490 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 01:07:08,490 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:07:08,491 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:07:08,492 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:07:08,492 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:07:08,493 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 01:07:08,859 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-08 01:07:08,860 - INFO - [_internal.py:224] -  * Debugger PIN: 774-546-021
2025-04-08 01:07:23,417 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 01:07:23,418 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 01:07:23,429 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 01:07:24,431 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-08 01:07:24,431 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-08 01:07:24,431 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 01:07:24,431 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-08 01:07:24,431 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 01:07:24,432 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-08 01:07:24,432 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 01:07:24,432 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-08 01:07:24,432 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 01:07:24,432 - INFO - [database.py:258] - Closing database connection
2025-04-08 01:07:24,432 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-08 01:07:24,432 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-08 01:07:25,533 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-08 01:07:34,338 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:07:34,339 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:07:34,339 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:07:34,339 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:07:34,340 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 01:07:34,351 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 01:07:34,359 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 01:07:34,360 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 01:07:34,415 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 01:07:34,416 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:07:34,416 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:07:34,416 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:07:34,417 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:07:34,417 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 01:07:34,417 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 01:07:34,475 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 01:07:34,476 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:07:34,476 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:07:34,476 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:07:34,476 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:07:34,477 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 01:07:34,477 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 01:07:34,530 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 01:07:34,531 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:07:34,531 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:07:34,531 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:07:34,532 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:07:34,532 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-08 01:07:34,532 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 01:07:34,532 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 01:07:34,586 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 01:07:34,586 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-08 01:07:34,587 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 01:07:34,587 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:07:34,587 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:07:34,588 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:07:34,588 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:07:34,588 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 01:07:34,660 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-08 01:07:34,660 - INFO - [_internal.py:224] -  * Debugger PIN: 774-546-021
2025-04-08 01:07:35,444 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 01:07:35,467 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:07:35] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 01:07:35,546 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-08 01:07:36,576 - DEBUG - [milvus_client.py:728] - Created new connection using: 29efeb3db85c4e3cb32b58e69ff498bb
2025-04-08 01:07:36,576 - INFO - [vector_store.py:42] - Vector database connection established in 1.03s
2025-04-08 01:07:36,578 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-08 01:07:36,580 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:07:36] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 01:07:36,882 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:07:36] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 01:07:38,267 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:07:38] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 01:07:38,586 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:07:38] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 01:07:46,709 - INFO - [vector_db_routes.py:378] - Loading embedding model...
2025-04-08 01:07:48,917 - INFO - [vector_db_routes.py:380] - Embedding model loaded in 2.21s
2025-04-08 01:07:48,949 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:07:48] "POST /admin/api/vector-db/collections/query_embeddings/search HTTP/1.1" 200 -
2025-04-08 01:08:03,359 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:08:03] "POST /admin/api/vector-db/collections/query_embeddings/search HTTP/1.1" 200 -
2025-04-08 01:10:37,912 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 01:10:37,918 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:10:37] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 01:10:38,165 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:10:38] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 01:10:38,397 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:10:38] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 01:10:39,741 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 01:10:39,749 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:10:39] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 01:10:40,303 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:10:40] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 01:10:40,536 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:10:40] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 01:10:49,821 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 01:10:49,825 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:10:49] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 01:10:50,249 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:10:50] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-08 01:10:50,252 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:10:50] "GET /static/js/admin/vector_db.js HTTP/1.1" 200 -
2025-04-08 01:10:52,425 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:10:52] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 01:10:52,553 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:10:52] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-04-08 01:10:52,634 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:10:52] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 01:10:56,035 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:10:56] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 01:10:56,339 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:10:56] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 01:11:04,712 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:11:04] "POST /admin/api/vector-db/collections/query_embeddings/search HTTP/1.1" 200 -
2025-04-08 01:15:05,650 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 01:15:05,653 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:15:05] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 01:15:05,883 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:15:05] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-08 01:15:05,965 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:15:05] "GET /static/js/admin/vector_db.js HTTP/1.1" 200 -
2025-04-08 01:15:05,982 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:15:05] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 01:15:06,283 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:15:06] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-04-08 01:15:06,295 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:15:06] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 01:15:08,082 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:15:08] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 01:15:08,084 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:15:08] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 01:15:17,053 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:15:17] "POST /admin/api/vector-db/collections/query_embeddings/search HTTP/1.1" 200 -
2025-04-08 01:15:34,315 - ERROR - [decorators.py:140] - RPC error: [query], <MilvusException: (code=2000, message= => unsupported expr proto node: column_expr {
  info {
    field_id: 102
    data_type: JSON
    nested_path: "Search"
  }
}
: segcore error)>, <Time:{'RPC start': '2025-04-08 01:15:34.297501', 'RPC error': '2025-04-08 01:15:34.315863'}>
2025-04-08 01:15:34,316 - ERROR - [milvus_client.py:479] - Failed to query collection: query_embeddings
2025-04-08 01:15:34,317 - ERROR - [vector_db_routes.py:292] - Error retrieving collection data: <MilvusException: (code=2000, message= => unsupported expr proto node: column_expr {
  info {
    field_id: 102
    data_type: JSON
    nested_path: "Search"
  }
}
: segcore error)>
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/routes/vector_db_routes.py", line 250, in get_collection_data
    results = vector_store.client.query(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/pymilvus/milvus_client/milvus_client.py", line 480, in query
    raise ex from ex
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/pymilvus/milvus_client/milvus_client.py", line 469, in query
    res = conn.query(
          ^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/pymilvus/decorators.py", line 141, in handler
    raise e from e
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/pymilvus/decorators.py", line 137, in handler
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/pymilvus/decorators.py", line 176, in handler
    return func(self, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/pymilvus/decorators.py", line 116, in handler
    raise e from e
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/pymilvus/decorators.py", line 86, in handler
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/pymilvus/client/grpc_handler.py", line 1541, in query
    check_status(response.status)
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/pymilvus/client/utils.py", line 63, in check_status
    raise MilvusException(status.code, status.reason, status.error_code)
pymilvus.exceptions.MilvusException: <MilvusException: (code=2000, message= => unsupported expr proto node: column_expr {
  info {
    field_id: 102
    data_type: JSON
    nested_path: "Search"
  }
}
: segcore error)>
2025-04-08 01:15:34,321 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:15:34] "[35m[1mGET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0&filter=Search%3A%20%22SELECT%20*%20FROM%20customers%20c,%20order_items%20oi;%22%20(sorted%20by%20similarity) HTTP/1.1[0m" 500 -
2025-04-08 01:15:45,964 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 01:15:45,969 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:15:45] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 01:15:46,318 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:15:46] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 01:15:46,559 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:15:46] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 01:15:48,053 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:15:48] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 01:15:48,354 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:15:48] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 01:15:52,549 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:15:52] "POST /admin/api/vector-db/collections/query_embeddings/search HTTP/1.1" 200 -
2025-04-08 01:16:27,284 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 01:16:27,293 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:16:27] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 01:16:27,668 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:16:27] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-08 01:16:27,671 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:16:27] "GET /static/js/admin/vector_db.js HTTP/1.1" 200 -
2025-04-08 01:16:27,936 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:16:27] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 01:16:28,040 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:16:28] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-04-08 01:16:28,087 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:16:28] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 01:16:30,212 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:16:30] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 01:16:30,528 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:16:30] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 01:16:48,072 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:16:48] "POST /admin/api/vector-db/collections/query_embeddings/search HTTP/1.1" 200 -
2025-04-08 01:19:08,626 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 01:19:08,628 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 01:19:08,645 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 01:19:09,647 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-08 01:19:09,648 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-08 01:19:09,648 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 01:19:09,648 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-08 01:19:09,649 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 01:19:09,649 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-08 01:19:09,649 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 01:19:09,650 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-08 01:19:09,650 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 01:19:09,650 - INFO - [database.py:258] - Closing database connection
2025-04-08 01:19:09,651 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-08 01:19:09,651 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-08 01:19:11,793 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-08 01:19:18,956 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:19:18,957 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:19:18,957 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:19:18,958 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:19:18,959 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 01:19:18,973 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 01:19:18,984 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 01:19:18,985 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 01:19:19,056 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 01:19:19,057 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:19:19,057 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:19:19,058 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:19:19,058 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:19:19,058 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 01:19:19,059 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 01:19:19,130 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 01:19:19,130 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:19:19,130 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:19:19,131 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:19:19,131 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:19:19,131 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 01:19:19,131 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 01:19:19,201 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 01:19:19,202 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:19:19,202 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:19:19,202 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:19:19,203 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:19:19,203 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-08 01:19:19,204 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 01:19:19,204 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 01:19:19,271 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 01:19:19,272 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-08 01:19:19,272 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 01:19:19,272 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:19:19,273 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:19:19,273 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:19:19,273 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:19:19,273 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 01:19:19,335 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-08 01:19:19,336 - INFO - [_internal.py:224] -  * Debugger PIN: 774-546-021
2025-04-08 01:20:46,696 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 01:20:46,697 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 01:20:46,708 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 01:20:47,710 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-08 01:20:47,711 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-08 01:20:47,712 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 01:20:47,712 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-08 01:20:47,712 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 01:20:47,713 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-08 01:20:47,713 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 01:20:47,713 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-08 01:20:47,714 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 01:20:47,714 - INFO - [database.py:258] - Closing database connection
2025-04-08 01:20:47,715 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-08 01:20:47,715 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-08 01:20:48,676 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-08 01:20:56,377 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:20:56,378 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:20:56,378 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:20:56,378 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:20:56,379 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 01:20:56,388 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 01:20:56,395 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 01:20:56,395 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 01:20:56,443 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 01:20:56,443 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:20:56,443 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:20:56,443 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:20:56,444 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:20:56,444 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 01:20:56,444 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 01:20:56,490 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 01:20:56,491 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:20:56,491 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:20:56,491 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:20:56,492 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:20:56,492 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 01:20:56,492 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 01:20:56,539 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 01:20:56,540 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:20:56,540 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:20:56,540 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:20:56,540 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:20:56,541 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-08 01:20:56,541 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 01:20:56,541 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 01:20:56,588 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 01:20:56,589 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-08 01:20:56,589 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 01:20:56,589 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:20:56,590 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:20:56,590 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:20:56,590 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:20:56,590 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 01:20:56,635 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-08 01:20:56,635 - INFO - [_internal.py:224] -  * Debugger PIN: 774-546-021
2025-04-08 01:20:57,452 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 01:20:57,484 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:20:57] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 01:20:57,546 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:20:57] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-08 01:20:57,855 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:20:57] "GET /static/js/admin/vector_db.js HTTP/1.1" 200 -
2025-04-08 01:20:58,225 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-08 01:20:58,228 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:20:58] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-04-08 01:20:59,274 - DEBUG - [milvus_client.py:728] - Created new connection using: 1333e3d87b004739b9443c61d374c648
2025-04-08 01:20:59,275 - INFO - [vector_store.py:42] - Vector database connection established in 1.05s
2025-04-08 01:20:59,282 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-08 01:20:59,285 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:20:59] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 01:20:59,309 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:20:59] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 01:21:01,023 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:21:01] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 01:21:01,032 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:21:01] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 01:21:08,551 - INFO - [vector_db_routes.py:378] - Loading embedding model...
2025-04-08 01:21:10,891 - INFO - [vector_db_routes.py:380] - Embedding model loaded in 2.34s
2025-04-08 01:21:10,922 - DEBUG - [vector_db_routes.py:408] - Search output fields: ['id']
2025-04-08 01:21:10,929 - DEBUG - [vector_db_routes.py:433] - Search result fields (2): ['id', 'similarity']
2025-04-08 01:21:10,931 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:21:10] "POST /admin/api/vector-db/collections/query_embeddings/search HTTP/1.1" 200 -
2025-04-08 01:24:36,176 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 01:24:36,178 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 01:24:36,190 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 01:24:37,191 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-08 01:24:37,192 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-08 01:24:37,192 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 01:24:37,192 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-08 01:24:37,192 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 01:24:37,192 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-08 01:24:37,193 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 01:24:37,193 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-08 01:24:37,193 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 01:24:37,193 - INFO - [database.py:258] - Closing database connection
2025-04-08 01:24:37,193 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-08 01:24:37,193 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-08 01:24:38,885 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-08 01:24:46,839 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:24:46,840 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:24:46,840 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:24:46,840 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:24:46,841 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 01:24:46,856 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 01:24:46,868 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 01:24:46,869 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 01:24:46,952 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 01:24:46,952 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:24:46,953 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:24:46,953 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:24:46,953 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:24:46,954 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 01:24:46,954 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 01:24:47,036 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 01:24:47,037 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:24:47,037 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:24:47,038 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:24:47,038 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:24:47,039 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 01:24:47,039 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 01:24:47,112 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 01:24:47,112 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:24:47,112 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:24:47,113 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:24:47,113 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:24:47,114 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-08 01:24:47,114 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 01:24:47,114 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 01:24:47,195 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 01:24:47,195 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-08 01:24:47,195 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 01:24:47,196 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:24:47,196 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:24:47,197 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:24:47,197 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:24:47,197 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 01:24:47,271 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-08 01:24:47,272 - INFO - [_internal.py:224] -  * Debugger PIN: 774-546-021
2025-04-08 01:25:16,792 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 01:25:16,810 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:25:16] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 01:25:17,014 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:25:17] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-08 01:25:17,147 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:25:17] "GET /static/js/admin/vector_db.js HTTP/1.1" 200 -
2025-04-08 01:25:17,161 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-08 01:25:17,477 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:25:17] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-04-08 01:25:18,191 - DEBUG - [milvus_client.py:728] - Created new connection using: d3f5fadd1a9c4edc861a86a1b22c7067
2025-04-08 01:25:18,192 - INFO - [vector_store.py:42] - Vector database connection established in 1.03s
2025-04-08 01:25:18,194 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-08 01:25:18,197 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:25:18] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 01:25:18,500 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:25:18] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 01:25:19,556 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:25:19] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 01:25:19,893 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:25:19] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 01:25:24,155 - INFO - [vector_db_routes.py:378] - Loading embedding model...
2025-04-08 01:25:26,997 - INFO - [vector_db_routes.py:380] - Embedding model loaded in 2.84s
2025-04-08 01:25:27,022 - DEBUG - [vector_db_routes.py:417] - Search output fields for query_embeddings: ['id']
2025-04-08 01:25:27,022 - DEBUG - [vector_db_routes.py:418] - Vector fields excluded: []
2025-04-08 01:25:27,031 - DEBUG - [vector_db_routes.py:454] - Search result fields in query_embeddings (2): ['id', 'similarity']
2025-04-08 01:25:27,032 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:25:27] "POST /admin/api/vector-db/collections/query_embeddings/search HTTP/1.1" 200 -
2025-04-08 01:27:31,365 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 01:27:31,369 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:27:31] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 01:27:31,605 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:27:31] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-08 01:27:31,702 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:27:31] "GET /static/js/admin/vector_db.js HTTP/1.1" 200 -
2025-04-08 01:27:31,726 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:27:31] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 01:27:32,053 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:27:32] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-04-08 01:27:32,066 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:27:32] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 01:27:32,973 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:27:32] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 01:27:33,266 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:27:33] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 01:27:37,184 - DEBUG - [vector_db_routes.py:417] - Search output fields for query_embeddings: ['id']
2025-04-08 01:27:37,185 - DEBUG - [vector_db_routes.py:418] - Vector fields excluded: []
2025-04-08 01:27:37,188 - DEBUG - [vector_db_routes.py:454] - Search result fields in query_embeddings (2): ['id', 'similarity']
2025-04-08 01:27:37,189 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:27:37] "POST /admin/api/vector-db/collections/query_embeddings/search HTTP/1.1" 200 -
2025-04-08 01:28:34,594 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 01:28:34,601 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:28:34] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 01:28:34,825 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:28:34] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 01:28:34,981 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:28:34] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 01:28:35,871 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:28:35] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 01:28:36,167 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:28:36] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 01:28:49,299 - DEBUG - [vector_db_routes.py:417] - Search output fields for query_embeddings: ['id']
2025-04-08 01:28:49,300 - DEBUG - [vector_db_routes.py:418] - Vector fields excluded: []
2025-04-08 01:28:49,302 - DEBUG - [vector_db_routes.py:454] - Search result fields in query_embeddings (2): ['id', 'similarity']
2025-04-08 01:28:49,304 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:28:49] "POST /admin/api/vector-db/collections/query_embeddings/search HTTP/1.1" 200 -
2025-04-08 01:29:36,051 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 01:29:36,052 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 01:29:36,073 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 01:29:37,073 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-08 01:29:37,074 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-08 01:29:37,074 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 01:29:37,074 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-08 01:29:37,074 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 01:29:37,074 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-08 01:29:37,074 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 01:29:37,074 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-08 01:29:37,075 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 01:29:37,075 - INFO - [database.py:258] - Closing database connection
2025-04-08 01:29:37,075 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-08 01:29:37,075 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-08 01:29:38,092 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-08 01:29:38,095 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-08 01:29:38,095 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-08 01:29:38,095 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 01:29:38,096 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-08 01:29:38,096 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 01:29:38,096 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-08 01:29:38,096 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 01:29:38,096 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-08 01:29:38,096 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 01:29:38,096 - INFO - [database.py:258] - Closing database connection
2025-04-08 01:29:38,096 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-08 01:29:38,096 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-08 01:29:46,841 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:29:46,841 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:29:46,842 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:29:46,842 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:29:46,843 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 01:29:46,854 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 01:29:46,862 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 01:29:46,862 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 01:29:46,926 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 01:29:46,926 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:29:46,927 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:29:46,927 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:29:46,927 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:29:46,927 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 01:29:46,927 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 01:29:46,989 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 01:29:46,990 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:29:46,990 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:29:46,990 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:29:46,990 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:29:46,991 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 01:29:46,991 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 01:29:47,042 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 01:29:47,042 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:29:47,042 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:29:47,043 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:29:47,043 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:29:47,043 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-08 01:29:47,043 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 01:29:47,044 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 01:29:47,096 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 01:29:47,096 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-08 01:29:47,096 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 01:29:47,097 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:29:47,097 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:29:47,097 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:29:47,097 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:29:47,098 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 01:29:47,145 - INFO - [_internal.py:224] - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.27.251.157:5000
2025-04-08 01:29:47,145 - INFO - [_internal.py:224] - [33mPress CTRL+C to quit[0m
2025-04-08 01:29:47,153 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-08 01:29:53,953 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:29:53,953 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:29:53,953 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:29:53,954 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:29:53,954 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 01:29:53,966 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 01:29:53,971 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 01:29:53,971 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 01:29:54,031 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 01:29:54,033 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:29:54,033 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:29:54,034 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:29:54,034 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:29:54,034 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 01:29:54,035 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 01:29:54,089 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 01:29:54,090 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:29:54,090 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:29:54,091 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:29:54,091 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:29:54,092 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 01:29:54,092 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 01:29:54,147 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 01:29:54,147 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:29:54,148 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:29:54,148 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:29:54,148 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:29:54,148 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-08 01:29:54,149 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 01:29:54,149 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 01:29:54,211 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 01:29:54,211 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-08 01:29:54,211 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 01:29:54,211 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:29:54,212 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:29:54,212 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:29:54,212 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:29:54,212 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 01:29:54,261 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-08 01:29:54,261 - INFO - [_internal.py:224] -  * Debugger PIN: 774-546-021
2025-04-08 01:29:54,900 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 01:29:54,919 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:29:54] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 01:29:54,956 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:29:54] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-08 01:29:55,250 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:29:55] "GET /static/js/admin/vector_db.js HTTP/1.1" 200 -
2025-04-08 01:29:55,564 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-08 01:29:55,568 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:29:55] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-04-08 01:29:56,598 - DEBUG - [milvus_client.py:728] - Created new connection using: 7e9a7932ec9d4e28b18e8a8db58d9f17
2025-04-08 01:29:56,599 - INFO - [vector_store.py:42] - Vector database connection established in 1.03s
2025-04-08 01:29:56,600 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-08 01:29:56,606 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:29:56] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 01:29:56,624 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:29:56] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 01:29:58,260 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:29:58] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 01:29:58,263 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:29:58] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 01:30:03,930 - INFO - [vector_db_routes.py:378] - Loading embedding model...
2025-04-08 01:30:06,425 - INFO - [vector_db_routes.py:380] - Embedding model loaded in 2.50s
2025-04-08 01:30:06,452 - DEBUG - [vector_db_routes.py:417] - Search output fields for query_embeddings: ['id']
2025-04-08 01:30:06,453 - DEBUG - [vector_db_routes.py:418] - Vector fields excluded: []
2025-04-08 01:30:06,460 - DEBUG - [vector_db_routes.py:454] - Search result fields in query_embeddings (2): ['id', 'similarity']
2025-04-08 01:30:06,461 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:30:06] "POST /admin/api/vector-db/collections/query_embeddings/search HTTP/1.1" 200 -
2025-04-08 01:31:47,535 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 01:31:47,538 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:31:47] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 01:31:47,785 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:31:47] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-08 01:31:47,863 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:31:47] "GET /static/js/admin/vector_db.js HTTP/1.1" 200 -
2025-04-08 01:31:47,876 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:31:47] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 01:31:48,172 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:31:48] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-04-08 01:31:48,188 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:31:48] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 01:31:49,670 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:31:49] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 01:31:49,675 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:31:49] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 01:31:56,594 - DEBUG - [vector_db_routes.py:417] - Search output fields for query_embeddings: ['id']
2025-04-08 01:31:56,594 - DEBUG - [vector_db_routes.py:418] - Vector fields excluded: []
2025-04-08 01:31:56,598 - DEBUG - [vector_db_routes.py:454] - Search result fields in query_embeddings (2): ['id', 'similarity']
2025-04-08 01:31:56,599 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:31:56] "POST /admin/api/vector-db/collections/query_embeddings/search HTTP/1.1" 200 -
2025-04-08 01:34:55,916 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 01:34:55,919 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:34:55] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 01:34:56,153 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:34:56] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-08 01:34:56,221 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:34:56] "GET /static/js/admin/vector_db.js HTTP/1.1" 200 -
2025-04-08 01:34:56,241 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:34:56] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 01:34:56,543 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:34:56] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-04-08 01:34:56,558 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:34:56] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 01:34:57,801 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:34:57] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 01:34:57,806 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:34:57] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 01:35:01,828 - DEBUG - [vector_db_routes.py:417] - Search output fields for query_embeddings: ['id']
2025-04-08 01:35:01,828 - DEBUG - [vector_db_routes.py:418] - Vector fields excluded: []
2025-04-08 01:35:01,830 - DEBUG - [vector_db_routes.py:454] - Search result fields in query_embeddings (2): ['id', 'similarity']
2025-04-08 01:35:01,831 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:35:01] "POST /admin/api/vector-db/collections/query_embeddings/search HTTP/1.1" 200 -
2025-04-08 01:36:51,305 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 01:36:51,306 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 01:36:51,308 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 01:36:52,310 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-08 01:36:52,311 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-08 01:36:52,311 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 01:36:52,311 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-08 01:36:52,312 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 01:36:52,312 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-08 01:36:52,312 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 01:36:52,312 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-08 01:36:52,313 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 01:36:52,313 - INFO - [database.py:258] - Closing database connection
2025-04-08 01:36:52,313 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-08 01:36:52,314 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-08 01:36:53,798 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-08 01:37:06,115 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:37:06,115 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:37:06,116 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:37:06,116 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:37:06,117 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 01:37:06,126 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 01:37:06,135 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 01:37:06,135 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 01:37:06,194 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 01:37:06,194 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:37:06,195 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:37:06,195 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:37:06,195 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:37:06,195 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 01:37:06,196 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 01:37:06,248 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 01:37:06,249 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:37:06,249 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:37:06,249 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:37:06,249 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:37:06,250 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 01:37:06,250 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 01:37:06,307 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 01:37:06,308 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:37:06,308 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:37:06,308 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:37:06,308 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:37:06,309 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-08 01:37:06,309 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 01:37:06,309 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 01:37:06,365 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 01:37:06,365 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-08 01:37:06,366 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 01:37:06,366 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:37:06,367 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:37:06,368 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:37:06,368 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:37:06,368 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 01:37:06,423 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-08 01:37:06,423 - INFO - [_internal.py:224] -  * Debugger PIN: 774-546-021
2025-04-08 01:37:16,327 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 01:37:16,345 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:37:16] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 01:37:16,552 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:37:16] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-08 01:37:16,670 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:37:16] "GET /static/js/admin/vector_db.js HTTP/1.1" 200 -
2025-04-08 01:37:16,686 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-08 01:37:16,974 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:37:16] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-04-08 01:37:17,712 - DEBUG - [milvus_client.py:728] - Created new connection using: 772279fdf8884ebdaec08b81b8243690
2025-04-08 01:37:17,713 - INFO - [vector_store.py:42] - Vector database connection established in 1.03s
2025-04-08 01:37:17,719 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-08 01:37:17,723 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:37:17] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 01:37:18,031 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:37:18] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 01:37:18,914 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:37:18] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 01:37:19,241 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:37:19] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 01:37:22,639 - INFO - [vector_db_routes.py:378] - Loading embedding model...
2025-04-08 01:37:25,576 - INFO - [vector_db_routes.py:380] - Embedding model loaded in 2.94s
2025-04-08 01:37:25,617 - DEBUG - [vector_db_routes.py:417] - Search output fields for query_embeddings: ['id']
2025-04-08 01:37:25,617 - DEBUG - [vector_db_routes.py:418] - Vector fields excluded: []
2025-04-08 01:37:25,625 - DEBUG - [vector_db_routes.py:454] - Search result fields in query_embeddings (2): ['id', 'similarity']
2025-04-08 01:37:25,626 - INFO - [vector_db_routes.py:458] - Search results for ***** 'SELECT * FROM customers;' in query_embeddings: [{'id': 1, 'similarity': 0.4673008620738983}, {'id': 2, 'similarity': 0.34153589606285095}, {'id': 3, 'similarity': 0.29747265577316284}]
2025-04-08 01:37:25,628 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:37:25] "POST /admin/api/vector-db/collections/query_embeddings/search HTTP/1.1" 200 -
2025-04-08 01:41:17,173 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 01:41:17,179 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 01:41:17,192 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 01:41:18,195 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-08 01:41:18,196 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-08 01:41:18,196 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 01:41:18,196 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-08 01:41:18,197 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 01:41:18,197 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-08 01:41:18,197 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 01:41:18,198 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-08 01:41:18,198 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 01:41:18,199 - INFO - [database.py:258] - Closing database connection
2025-04-08 01:41:18,199 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-08 01:41:18,200 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-08 01:41:20,001 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-08 01:41:27,778 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:41:27,780 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:41:27,781 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:41:27,781 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:41:27,783 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 01:41:27,801 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 01:41:27,817 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 01:41:27,818 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 01:41:27,978 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 01:41:27,978 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:41:27,979 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:41:27,979 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:41:27,980 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:41:27,980 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 01:41:27,980 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 01:41:28,056 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 01:41:28,057 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:41:28,057 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:41:28,058 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:41:28,058 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:41:28,058 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 01:41:28,058 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 01:41:28,128 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 01:41:28,128 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:41:28,129 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:41:28,129 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:41:28,130 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:41:28,130 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-08 01:41:28,130 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 01:41:28,131 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 01:41:28,210 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 01:41:28,210 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-08 01:41:28,211 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 01:41:28,211 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:41:28,212 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:41:28,212 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:41:28,212 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:41:28,212 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 01:41:28,289 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-08 01:41:28,289 - INFO - [_internal.py:224] -  * Debugger PIN: 774-546-021
2025-04-08 01:41:42,489 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 01:41:42,490 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 01:41:42,500 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 01:41:43,501 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-08 01:41:43,502 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-08 01:41:43,502 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 01:41:43,502 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-08 01:41:43,502 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 01:41:43,502 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-08 01:41:43,503 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 01:41:43,503 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-08 01:41:43,503 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 01:41:43,503 - INFO - [database.py:258] - Closing database connection
2025-04-08 01:41:43,503 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-08 01:41:43,504 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-08 01:41:44,455 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-08 01:41:50,025 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:41:50,026 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:41:50,026 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:41:50,027 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:41:50,027 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 01:41:50,038 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 01:41:50,047 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 01:41:50,048 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 01:41:50,100 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 01:41:50,101 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:41:50,101 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:41:50,101 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:41:50,102 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:41:50,102 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 01:41:50,102 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 01:41:50,150 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 01:41:50,150 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:41:50,151 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:41:50,151 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:41:50,151 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:41:50,151 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 01:41:50,152 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 01:41:50,199 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 01:41:50,199 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:41:50,199 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:41:50,200 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:41:50,200 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:41:50,200 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-08 01:41:50,200 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 01:41:50,200 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 01:41:50,249 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 01:41:50,249 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-08 01:41:50,249 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 01:41:50,250 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:41:50,250 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:41:50,250 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:41:50,250 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:41:50,250 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 01:41:50,292 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-08 01:41:50,292 - INFO - [_internal.py:224] -  * Debugger PIN: 774-546-021
2025-04-08 01:41:51,398 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-08 01:41:52,424 - DEBUG - [milvus_client.py:728] - Created new connection using: 3eec0c7ac9b74acab7ccdf318573b870
2025-04-08 01:41:52,424 - INFO - [vector_store.py:42] - Vector database connection established in 1.03s
2025-04-08 01:41:52,429 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-08 01:41:52,431 - INFO - [vector_db_routes.py:378] - Loading embedding model...
2025-04-08 01:41:54,795 - INFO - [vector_db_routes.py:380] - Embedding model loaded in 2.36s
2025-04-08 01:41:54,818 - DEBUG - [vector_db_routes.py:417] - Search output fields for query_embeddings: ['id']
2025-04-08 01:41:54,845 - DEBUG - [vector_db_routes.py:460] - First search result: {'id': 1, 'similarity': 0.4673008620738983}
2025-04-08 01:41:54,846 - DEBUG - [vector_db_routes.py:461] - Fields in first result: ['id', 'similarity']
2025-04-08 01:41:54,846 - INFO - [vector_db_routes.py:463] - Search results for 'SELECT * FROM customers;' in query_embeddings: 3 records found
2025-04-08 01:41:54,847 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:41:54] "POST /admin/api/vector-db/collections/query_embeddings/search HTTP/1.1" 200 -
2025-04-08 01:42:42,780 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 01:42:42,781 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 01:42:42,782 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 01:42:43,782 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-08 01:42:43,782 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-08 01:42:43,783 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 01:42:43,783 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-08 01:42:43,783 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 01:42:43,783 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-08 01:42:43,783 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 01:42:43,783 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-08 01:42:43,783 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 01:42:43,783 - INFO - [database.py:258] - Closing database connection
2025-04-08 01:42:43,783 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-08 01:42:43,784 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-08 01:42:44,725 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-08 01:42:50,918 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:42:50,919 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:42:50,919 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:42:50,919 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:42:50,920 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 01:42:50,930 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 01:42:50,938 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 01:42:50,939 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 01:42:50,987 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 01:42:50,987 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:42:50,987 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:42:50,988 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:42:50,988 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:42:50,988 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 01:42:50,988 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 01:42:51,037 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 01:42:51,037 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:42:51,037 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:42:51,038 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:42:51,038 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:42:51,038 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 01:42:51,038 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 01:42:51,094 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 01:42:51,094 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:42:51,094 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:42:51,094 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:42:51,095 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:42:51,095 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-08 01:42:51,095 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 01:42:51,095 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 01:42:51,147 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 01:42:51,147 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-08 01:42:51,148 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 01:42:51,148 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 01:42:51,148 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 01:42:51,148 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 01:42:51,148 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 01:42:51,149 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 01:42:51,193 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-08 01:42:51,194 - INFO - [_internal.py:224] -  * Debugger PIN: 774-546-021
2025-04-08 01:42:51,775 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-08 01:42:52,803 - DEBUG - [milvus_client.py:728] - Created new connection using: ad4c8d103fc24bdf968229ed09beb38b
2025-04-08 01:42:52,803 - INFO - [vector_store.py:42] - Vector database connection established in 1.03s
2025-04-08 01:42:52,806 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-08 01:42:52,808 - INFO - [vector_db_routes.py:378] - Loading embedding model...
2025-04-08 01:42:55,477 - INFO - [vector_db_routes.py:380] - Embedding model loaded in 2.67s
2025-04-08 01:42:55,491 - DEBUG - [vector_db_routes.py:417] - Search output fields for query_embeddings: ['id']
2025-04-08 01:42:55,520 - DEBUG - [vector_db_routes.py:460] - First search result: {'id': 1, 'similarity': 0.4673008620738983}
2025-04-08 01:42:55,520 - DEBUG - [vector_db_routes.py:461] - Fields in first result: ['id', 'similarity']
2025-04-08 01:42:55,520 - INFO - [vector_db_routes.py:463] - Search results for ***** 'SELECT * FROM customers;' in query_embeddings: [{'id': 1, 'similarity': 0.4673008620738983}, {'id': 2, 'similarity': 0.34153589606285095}, {'id': 3, 'similarity': 0.29747265577316284}]
2025-04-08 01:42:55,521 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 01:42:55] "POST /admin/api/vector-db/collections/query_embeddings/search HTTP/1.1" 200 -
2025-04-08 20:13:34,108 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 20:13:34,111 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 20:13:34,111 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 20:13:34,112 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 20:13:34,115 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 20:13:34,212 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 20:13:34,279 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 20:13:34,279 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 20:13:34,670 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 20:13:34,670 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 20:13:34,671 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 20:13:34,675 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 20:13:34,675 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 20:13:34,677 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 20:13:34,677 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 20:13:34,940 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 20:13:34,941 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 20:13:34,942 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 20:13:34,942 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 20:13:34,943 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 20:13:34,943 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 20:13:34,944 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 20:13:35,603 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 20:13:35,604 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 20:13:35,605 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 20:13:35,617 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 20:13:35,618 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 20:13:35,619 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-08 20:13:35,620 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 20:13:35,635 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 20:13:36,219 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 20:13:36,220 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-08 20:13:36,220 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 20:13:36,221 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 20:13:36,222 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 20:13:36,222 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 20:13:36,233 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 20:13:36,233 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 20:13:36,766 - INFO - [_internal.py:224] - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.27.251.157:5000
2025-04-08 20:13:36,778 - INFO - [_internal.py:224] - [33mPress CTRL+C to quit[0m
2025-04-08 20:13:36,944 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-08 20:14:02,978 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 20:14:02,980 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 20:14:02,981 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 20:14:02,981 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 20:14:02,983 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 20:14:03,009 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 20:14:03,039 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 20:14:03,039 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 20:14:03,307 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 20:14:03,308 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 20:14:03,309 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 20:14:03,309 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 20:14:03,310 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 20:14:03,311 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 20:14:03,311 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 20:14:03,681 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 20:14:03,682 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 20:14:03,683 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 20:14:03,683 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 20:14:03,693 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 20:14:03,693 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 20:14:03,694 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 20:14:03,981 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 20:14:03,982 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 20:14:03,983 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 20:14:03,983 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 20:14:03,984 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 20:14:03,984 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-08 20:14:03,985 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 20:14:03,985 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 20:14:04,320 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 20:14:04,322 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-08 20:14:04,322 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 20:14:04,324 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 20:14:04,325 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 20:14:04,329 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 20:14:04,330 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 20:14:04,330 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 20:14:04,604 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-08 20:14:04,614 - INFO - [_internal.py:224] -  * Debugger PIN: 105-107-878
2025-04-08 20:14:08,964 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 20:14:08] "[32mGET /admin/vector-db HTTP/1.1[0m" 302 -
2025-04-08 20:14:09,006 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 20:14:09] "GET /login HTTP/1.1" 200 -
2025-04-08 20:14:09,407 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 20:14:09] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-08 20:14:16,574 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 20:14:16] "[32mPOST /login HTTP/1.1[0m" 302 -
2025-04-08 20:14:16,913 - DEBUG - [app.py:84] - Main page requested
2025-04-08 20:14:16,932 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 20:14:16] "GET / HTTP/1.1" 200 -
2025-04-08 20:14:17,148 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 20:14:17] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-08 20:14:17,286 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 20:14:17] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-08 20:14:17,288 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 20:14:17] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-08 20:14:17,294 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 20:14:17] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-08 20:14:17,297 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 20:14:17] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-08 20:14:17,299 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 20:14:17] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-08 20:14:17,458 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 20:14:17] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-08 20:14:17,613 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 20:14:17] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-08 20:14:17,969 - DEBUG - [app.py:152] - Table suggestions requested for workspace: dfd, query: ''
2025-04-08 20:14:17,970 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 20:14:17] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-08 20:14:20,624 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 20:14:20,630 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 20:14:20] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 20:14:20,987 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 20:14:20] "GET /static/js/admin/vector_db.js HTTP/1.1" 200 -
2025-04-08 20:14:21,240 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-08 20:14:22,297 - DEBUG - [milvus_client.py:728] - Created new connection using: cc99c46439c24c0787bf8f787246fab2
2025-04-08 20:14:22,297 - INFO - [vector_store.py:42] - Vector database connection established in 1.06s
2025-04-08 20:14:22,300 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-08 20:14:22,302 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 20:14:22] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 20:14:22,317 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 20:14:22] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 20:14:32,855 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 20:14:32] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 20:14:32,898 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 20:14:32] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 20:14:44,811 - INFO - [vector_db_routes.py:378] - Loading embedding model...
2025-04-08 20:14:47,596 - INFO - [vector_db_routes.py:380] - Embedding model loaded in 2.79s
2025-04-08 20:14:47,732 - DEBUG - [vector_db_routes.py:417] - Search output fields for query_embeddings: ['id']
2025-04-08 20:14:47,743 - INFO - [vector_db_routes.py:427] - data: ["[{'id': 1, 'distance': 0.4673008620738983, 'entity': {'id': 1}}, {'id': 2, 'distance': 0.34153589606285095, 'entity': {'id': 2}}, {'id': 3, 'distance': 0.29747265577316284, 'entity': {'id': 3}}]"] 
2025-04-08 20:14:47,743 - DEBUG - [vector_db_routes.py:461] - First search result: {'id': 1, 'similarity': 0.4673008620738983}
2025-04-08 20:14:47,743 - DEBUG - [vector_db_routes.py:462] - Fields in first result: ['id', 'similarity']
2025-04-08 20:14:47,744 - INFO - [vector_db_routes.py:464] - Search results for ***** 'SELECT * FROM customers;' in query_embeddings: [{'id': 1, 'similarity': 0.4673008620738983}, {'id': 2, 'similarity': 0.34153589606285095}, {'id': 3, 'similarity': 0.29747265577316284}]
2025-04-08 20:14:47,745 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 20:14:47] "POST /admin/api/vector-db/collections/query_embeddings/search HTTP/1.1" 200 -
2025-04-08 20:17:04,141 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 20:17:04,142 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 20:17:04,144 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 20:17:05,146 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-08 20:17:05,147 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-08 20:17:05,147 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 20:17:05,148 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-08 20:17:05,148 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 20:17:05,148 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-08 20:17:05,149 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 20:17:05,149 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-08 20:17:05,149 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 20:17:05,150 - INFO - [database.py:258] - Closing database connection
2025-04-08 20:17:05,150 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-08 20:17:05,151 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-08 20:17:06,326 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-08 20:17:10,868 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 20:17:10,868 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 20:17:10,868 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 20:17:10,868 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 20:17:10,869 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 20:17:10,876 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 20:17:10,883 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 20:17:10,883 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 20:17:10,915 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 20:17:10,916 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 20:17:10,916 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 20:17:10,916 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 20:17:10,916 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 20:17:10,916 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 20:17:10,916 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 20:17:10,946 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 20:17:10,946 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 20:17:10,946 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 20:17:10,946 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 20:17:10,947 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 20:17:10,947 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 20:17:10,947 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 20:17:10,977 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 20:17:10,977 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 20:17:10,977 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 20:17:10,977 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 20:17:10,978 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 20:17:10,978 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-08 20:17:10,978 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 20:17:10,978 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 20:17:11,006 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 20:17:11,006 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-08 20:17:11,006 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 20:17:11,006 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 20:17:11,006 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 20:17:11,006 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 20:17:11,006 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 20:17:11,007 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 20:17:11,035 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-08 20:17:11,035 - INFO - [_internal.py:224] -  * Debugger PIN: 105-107-878
2025-04-08 20:17:11,516 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 20:17:11,532 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 20:17:11] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 20:17:11,579 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-08 20:17:12,608 - DEBUG - [milvus_client.py:728] - Created new connection using: 1f0a1904d34a4310b9e5845ecad1aa77
2025-04-08 20:17:12,608 - INFO - [vector_store.py:42] - Vector database connection established in 1.03s
2025-04-08 20:17:12,611 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-08 20:17:12,615 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 20:17:12] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 20:17:12,937 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 20:17:12] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 20:17:13,685 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 20:17:13] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 20:17:14,028 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 20:17:14] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 20:17:17,745 - INFO - [vector_db_routes.py:378] - Loading embedding model...
2025-04-08 20:17:20,433 - INFO - [vector_db_routes.py:380] - Embedding model loaded in 2.69s
2025-04-08 20:17:20,467 - DEBUG - [vector_db_routes.py:417] - Search output fields for query_embeddings: ['id']
2025-04-08 20:17:20,473 - INFO - [vector_db_routes.py:426] - data: ["[{'id': 1, 'distance': 0.4673008620738983, 'entity': {}}, {'id': 2, 'distance': 0.34153589606285095, 'entity': {}}, {'id': 3, 'distance': 0.29747265577316284, 'entity': {}}]"] 
2025-04-08 20:17:20,473 - DEBUG - [vector_db_routes.py:460] - First search result: {'similarity': 0.4673008620738983}
2025-04-08 20:17:20,473 - DEBUG - [vector_db_routes.py:461] - Fields in first result: ['similarity']
2025-04-08 20:17:20,473 - INFO - [vector_db_routes.py:463] - Search results for ***** 'SELECT * FROM customers;' in query_embeddings: [{'similarity': 0.4673008620738983}, {'similarity': 0.34153589606285095}, {'similarity': 0.29747265577316284}]
2025-04-08 20:17:20,475 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 20:17:20] "POST /admin/api/vector-db/collections/query_embeddings/search HTTP/1.1" 200 -
2025-04-08 20:18:23,422 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 20:18:23,423 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 20:18:23,435 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 20:18:24,436 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-08 20:18:24,436 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-08 20:18:24,436 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 20:18:24,436 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-08 20:18:24,436 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 20:18:24,436 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-08 20:18:24,437 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 20:18:24,437 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-08 20:18:24,437 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 20:18:24,437 - INFO - [database.py:258] - Closing database connection
2025-04-08 20:18:24,437 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-08 20:18:24,437 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-08 20:18:25,716 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-08 20:18:33,376 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 20:18:33,376 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 20:18:33,377 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 20:18:33,377 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 20:18:33,378 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 20:18:33,388 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 20:18:33,396 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 20:18:33,396 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 20:18:33,454 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 20:18:33,454 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 20:18:33,455 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 20:18:33,455 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 20:18:33,456 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 20:18:33,456 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 20:18:33,456 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 20:18:33,507 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 20:18:33,507 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 20:18:33,507 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 20:18:33,508 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 20:18:33,508 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 20:18:33,508 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 20:18:33,509 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 20:18:33,562 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 20:18:33,562 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 20:18:33,563 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 20:18:33,563 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 20:18:33,563 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 20:18:33,564 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-08 20:18:33,564 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 20:18:33,564 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 20:18:33,619 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 20:18:33,619 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-08 20:18:33,619 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 20:18:33,620 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 20:18:33,620 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 20:18:33,620 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 20:18:33,620 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 20:18:33,621 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 20:18:33,670 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-08 20:18:33,671 - INFO - [_internal.py:224] -  * Debugger PIN: 105-107-878
2025-04-08 20:18:34,442 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 20:18:34,474 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 20:18:34] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 20:18:34,564 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-08 20:18:35,603 - DEBUG - [milvus_client.py:728] - Created new connection using: deace4142c3d4e9db991f1526614819f
2025-04-08 20:18:35,604 - INFO - [vector_store.py:42] - Vector database connection established in 1.04s
2025-04-08 20:18:35,605 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-08 20:18:35,607 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 20:18:35] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 20:18:35,951 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 20:18:35] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 20:18:37,273 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 20:18:37] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 20:18:37,614 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 20:18:37] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 20:18:40,465 - INFO - [vector_db_routes.py:378] - Loading embedding model...
2025-04-08 20:18:42,943 - INFO - [vector_db_routes.py:380] - Embedding model loaded in 2.48s
2025-04-08 20:18:42,971 - DEBUG - [vector_db_routes.py:417] - Search output fields for query_embeddings: ['id']
2025-04-08 20:18:42,985 - INFO - [vector_db_routes.py:430] - data: ['[{\'id\': 1, \'distance\': 0.4673008620738983, \'entity\': {\'query_text\': \'get me all the customers\', \'sql_query\': \'SELECT * FROM customers;\', \'results_summary\': \'Returned 5 rows with 11 columns\', \'workspace\': \'dfd\', \'feedback_rating\': 1, \'tables_used\': \'\', \'is_manual_sample\': False, \'created_at\': \'2025-04-05 15:17:11\', \'id\': 1}}, {\'id\': 2, \'distance\': 0.34153589606285095, \'entity\': {\'query_text\': \'get me count of customers by order month\', \'sql_query\': "SELECT \\n    strftime(\'%Y-%m\', o.order_date) AS order_month,\\n    COUNT(DISTINCT c.customer_id) AS customer_count\\nFROM \\n    customers c\\nINNER JOIN \\n    orders o ON c.customer_id = o.customer_id\\nGROUP BY \\n    order_month\\nORDER BY \\n    order_month;", \'results_summary\': \'Returned 2 rows with 2 columns\', \'workspace\': \'dfd\', \'feedback_rating\': 1, \'tables_used\': \'\', \'is_manual_sample\': True, \'created_at\': \'2025-04-07 23:50:45\', \'id\': 2}}, {\'id\': 3, \'distance\': 0.29747265577316284, \'entity\': {\'query_text\': \'@customers @order_items \', \'sql_query\': \'SELECT \\n    *\\nFROM \\n    customers c,\\n    order_items oi;\', \'results_summary\': \'Returned 55 rows with 16 columns\', \'workspace\': \'dfd\', \'feedback_rating\': 0, \'tables_used\': \'customers,order_items\', \'is_manual_sample\': False, \'created_at\': \'2025-04-06 11:33:46\', \'id\': 3}}]'] 
2025-04-08 20:18:42,985 - DEBUG - [vector_db_routes.py:464] - First search result: {'query_text': 'get me all the customers', 'sql_query': 'SELECT * FROM customers;', 'results_summary': 'Returned 5 rows with 11 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'tables_used': '', 'is_manual_sample': False, 'created_at': '2025-04-05 15:17:11', 'id': 1, 'similarity': 0.4673008620738983}
2025-04-08 20:18:42,986 - DEBUG - [vector_db_routes.py:465] - Fields in first result: ['query_text', 'sql_query', 'results_summary', 'workspace', 'feedback_rating', 'tables_used', 'is_manual_sample', 'created_at', 'id', 'similarity']
2025-04-08 20:18:42,986 - INFO - [vector_db_routes.py:467] - Search results for ***** 'SELECT * FROM customers;' in query_embeddings: [{'query_text': 'get me all the customers', 'sql_query': 'SELECT * FROM customers;', 'results_summary': 'Returned 5 rows with 11 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'tables_used': '', 'is_manual_sample': False, 'created_at': '2025-04-05 15:17:11', 'id': 1, 'similarity': 0.4673008620738983}, {'query_text': 'get me count of customers by order month', 'sql_query': "SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;", 'results_summary': 'Returned 2 rows with 2 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'tables_used': '', 'is_manual_sample': True, 'created_at': '2025-04-07 23:50:45', 'id': 2, 'similarity': 0.34153589606285095}, {'query_text': '@customers @order_items ', 'sql_query': 'SELECT \n    *\nFROM \n    customers c,\n    order_items oi;', 'results_summary': 'Returned 55 rows with 16 columns', 'workspace': 'dfd', 'feedback_rating': 0, 'tables_used': 'customers,order_items', 'is_manual_sample': False, 'created_at': '2025-04-06 11:33:46', 'id': 3, 'similarity': 0.29747265577316284}]
2025-04-08 20:18:42,987 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 20:18:42] "POST /admin/api/vector-db/collections/query_embeddings/search HTTP/1.1" 200 -
2025-04-08 20:18:54,299 - DEBUG - [vector_db_routes.py:417] - Search output fields for query_embeddings: ['id']
2025-04-08 20:18:54,302 - INFO - [vector_db_routes.py:430] - data: ['[{\'id\': 1, \'distance\': 0.06163729354739189, \'entity\': {\'query_text\': \'get me all the customers\', \'sql_query\': \'SELECT * FROM customers;\', \'results_summary\': \'Returned 5 rows with 11 columns\', \'workspace\': \'dfd\', \'feedback_rating\': 1, \'tables_used\': \'\', \'is_manual_sample\': False, \'created_at\': \'2025-04-05 15:17:11\', \'id\': 1}}, {\'id\': 2, \'distance\': 0.0614800751209259, \'entity\': {\'query_text\': \'get me count of customers by order month\', \'sql_query\': "SELECT \\n    strftime(\'%Y-%m\', o.order_date) AS order_month,\\n    COUNT(DISTINCT c.customer_id) AS customer_count\\nFROM \\n    customers c\\nINNER JOIN \\n    orders o ON c.customer_id = o.customer_id\\nGROUP BY \\n    order_month\\nORDER BY \\n    order_month;", \'results_summary\': \'Returned 2 rows with 2 columns\', \'workspace\': \'dfd\', \'feedback_rating\': 1, \'tables_used\': \'\', \'is_manual_sample\': True, \'created_at\': \'2025-04-07 23:50:45\', \'id\': 2}}, {\'id\': 3, \'distance\': 0.0214073546230793, \'entity\': {\'query_text\': \'@customers @order_items \', \'sql_query\': \'SELECT \\n    *\\nFROM \\n    customers c,\\n    order_items oi;\', \'results_summary\': \'Returned 55 rows with 16 columns\', \'workspace\': \'dfd\', \'feedback_rating\': 0, \'tables_used\': \'customers,order_items\', \'is_manual_sample\': False, \'created_at\': \'2025-04-06 11:33:46\', \'id\': 3}}]'] 
2025-04-08 20:18:54,302 - DEBUG - [vector_db_routes.py:464] - First search result: {'query_text': 'get me all the customers', 'sql_query': 'SELECT * FROM customers;', 'results_summary': 'Returned 5 rows with 11 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'tables_used': '', 'is_manual_sample': False, 'created_at': '2025-04-05 15:17:11', 'id': 1, 'similarity': 0.06163729354739189}
2025-04-08 20:18:54,302 - DEBUG - [vector_db_routes.py:465] - Fields in first result: ['query_text', 'sql_query', 'results_summary', 'workspace', 'feedback_rating', 'tables_used', 'is_manual_sample', 'created_at', 'id', 'similarity']
2025-04-08 20:18:54,302 - INFO - [vector_db_routes.py:467] - Search results for ***** 'strftime' in query_embeddings: [{'query_text': 'get me all the customers', 'sql_query': 'SELECT * FROM customers;', 'results_summary': 'Returned 5 rows with 11 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'tables_used': '', 'is_manual_sample': False, 'created_at': '2025-04-05 15:17:11', 'id': 1, 'similarity': 0.06163729354739189}, {'query_text': 'get me count of customers by order month', 'sql_query': "SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;", 'results_summary': 'Returned 2 rows with 2 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'tables_used': '', 'is_manual_sample': True, 'created_at': '2025-04-07 23:50:45', 'id': 2, 'similarity': 0.0614800751209259}, {'query_text': '@customers @order_items ', 'sql_query': 'SELECT \n    *\nFROM \n    customers c,\n    order_items oi;', 'results_summary': 'Returned 55 rows with 16 columns', 'workspace': 'dfd', 'feedback_rating': 0, 'tables_used': 'customers,order_items', 'is_manual_sample': False, 'created_at': '2025-04-06 11:33:46', 'id': 3, 'similarity': 0.0214073546230793}]
2025-04-08 20:18:54,304 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 20:18:54] "POST /admin/api/vector-db/collections/query_embeddings/search HTTP/1.1" 200 -
2025-04-08 20:19:06,795 - DEBUG - [vector_db_routes.py:417] - Search output fields for query_embeddings: ['id']
2025-04-08 20:19:06,797 - INFO - [vector_db_routes.py:430] - data: ['[{\'id\': 1, \'distance\': 0.06163729354739189, \'entity\': {\'query_text\': \'get me all the customers\', \'sql_query\': \'SELECT * FROM customers;\', \'results_summary\': \'Returned 5 rows with 11 columns\', \'workspace\': \'dfd\', \'feedback_rating\': 1, \'tables_used\': \'\', \'is_manual_sample\': False, \'created_at\': \'2025-04-05 15:17:11\', \'id\': 1}}, {\'id\': 2, \'distance\': 0.0614800751209259, \'entity\': {\'query_text\': \'get me count of customers by order month\', \'sql_query\': "SELECT \\n    strftime(\'%Y-%m\', o.order_date) AS order_month,\\n    COUNT(DISTINCT c.customer_id) AS customer_count\\nFROM \\n    customers c\\nINNER JOIN \\n    orders o ON c.customer_id = o.customer_id\\nGROUP BY \\n    order_month\\nORDER BY \\n    order_month;", \'results_summary\': \'Returned 2 rows with 2 columns\', \'workspace\': \'dfd\', \'feedback_rating\': 1, \'tables_used\': \'\', \'is_manual_sample\': True, \'created_at\': \'2025-04-07 23:50:45\', \'id\': 2}}, {\'id\': 3, \'distance\': 0.0214073546230793, \'entity\': {\'query_text\': \'@customers @order_items \', \'sql_query\': \'SELECT \\n    *\\nFROM \\n    customers c,\\n    order_items oi;\', \'results_summary\': \'Returned 55 rows with 16 columns\', \'workspace\': \'dfd\', \'feedback_rating\': 0, \'tables_used\': \'customers,order_items\', \'is_manual_sample\': False, \'created_at\': \'2025-04-06 11:33:46\', \'id\': 3}}]'] 
2025-04-08 20:19:06,798 - DEBUG - [vector_db_routes.py:464] - First search result: {'query_text': 'get me all the customers', 'sql_query': 'SELECT * FROM customers;', 'results_summary': 'Returned 5 rows with 11 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'tables_used': '', 'is_manual_sample': False, 'created_at': '2025-04-05 15:17:11', 'id': 1, 'similarity': 0.06163729354739189}
2025-04-08 20:19:06,798 - DEBUG - [vector_db_routes.py:465] - Fields in first result: ['query_text', 'sql_query', 'results_summary', 'workspace', 'feedback_rating', 'tables_used', 'is_manual_sample', 'created_at', 'id', 'similarity']
2025-04-08 20:19:06,798 - INFO - [vector_db_routes.py:467] - Search results for ***** 'strftime' in query_embeddings: [{'query_text': 'get me all the customers', 'sql_query': 'SELECT * FROM customers;', 'results_summary': 'Returned 5 rows with 11 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'tables_used': '', 'is_manual_sample': False, 'created_at': '2025-04-05 15:17:11', 'id': 1, 'similarity': 0.06163729354739189}, {'query_text': 'get me count of customers by order month', 'sql_query': "SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;", 'results_summary': 'Returned 2 rows with 2 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'tables_used': '', 'is_manual_sample': True, 'created_at': '2025-04-07 23:50:45', 'id': 2, 'similarity': 0.0614800751209259}, {'query_text': '@customers @order_items ', 'sql_query': 'SELECT \n    *\nFROM \n    customers c,\n    order_items oi;', 'results_summary': 'Returned 55 rows with 16 columns', 'workspace': 'dfd', 'feedback_rating': 0, 'tables_used': 'customers,order_items', 'is_manual_sample': False, 'created_at': '2025-04-06 11:33:46', 'id': 3, 'similarity': 0.0214073546230793}]
2025-04-08 20:19:06,800 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 20:19:06] "POST /admin/api/vector-db/collections/query_embeddings/search HTTP/1.1" 200 -
2025-04-08 20:19:17,216 - DEBUG - [vector_db_routes.py:417] - Search output fields for query_embeddings: ['id']
2025-04-08 20:19:17,220 - INFO - [vector_db_routes.py:430] - data: ['[{\'id\': 1, \'distance\': 0.12803004682064056, \'entity\': {\'query_text\': \'get me all the customers\', \'sql_query\': \'SELECT * FROM customers;\', \'results_summary\': \'Returned 5 rows with 11 columns\', \'workspace\': \'dfd\', \'feedback_rating\': 1, \'tables_used\': \'\', \'is_manual_sample\': False, \'created_at\': \'2025-04-05 15:17:11\', \'id\': 1}}, {\'id\': 2, \'distance\': 0.09646803140640259, \'entity\': {\'query_text\': \'get me count of customers by order month\', \'sql_query\': "SELECT \\n    strftime(\'%Y-%m\', o.order_date) AS order_month,\\n    COUNT(DISTINCT c.customer_id) AS customer_count\\nFROM \\n    customers c\\nINNER JOIN \\n    orders o ON c.customer_id = o.customer_id\\nGROUP BY \\n    order_month\\nORDER BY \\n    order_month;", \'results_summary\': \'Returned 2 rows with 2 columns\', \'workspace\': \'dfd\', \'feedback_rating\': 1, \'tables_used\': \'\', \'is_manual_sample\': True, \'created_at\': \'2025-04-07 23:50:45\', \'id\': 2}}, {\'id\': 3, \'distance\': 0.07201781868934631, \'entity\': {\'query_text\': \'@customers @order_items \', \'sql_query\': \'SELECT \\n    *\\nFROM \\n    customers c,\\n    order_items oi;\', \'results_summary\': \'Returned 55 rows with 16 columns\', \'workspace\': \'dfd\', \'feedback_rating\': 0, \'tables_used\': \'customers,order_items\', \'is_manual_sample\': False, \'created_at\': \'2025-04-06 11:33:46\', \'id\': 3}}]'] 
2025-04-08 20:19:17,221 - DEBUG - [vector_db_routes.py:464] - First search result: {'query_text': 'get me all the customers', 'sql_query': 'SELECT * FROM customers;', 'results_summary': 'Returned 5 rows with 11 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'tables_used': '', 'is_manual_sample': False, 'created_at': '2025-04-05 15:17:11', 'id': 1, 'similarity': 0.12803004682064056}
2025-04-08 20:19:17,221 - DEBUG - [vector_db_routes.py:465] - Fields in first result: ['query_text', 'sql_query', 'results_summary', 'workspace', 'feedback_rating', 'tables_used', 'is_manual_sample', 'created_at', 'id', 'similarity']
2025-04-08 20:19:17,221 - INFO - [vector_db_routes.py:467] - Search results for ***** 'Returned 5 rows with 11 columns' in query_embeddings: [{'query_text': 'get me all the customers', 'sql_query': 'SELECT * FROM customers;', 'results_summary': 'Returned 5 rows with 11 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'tables_used': '', 'is_manual_sample': False, 'created_at': '2025-04-05 15:17:11', 'id': 1, 'similarity': 0.12803004682064056}, {'query_text': 'get me count of customers by order month', 'sql_query': "SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;", 'results_summary': 'Returned 2 rows with 2 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'tables_used': '', 'is_manual_sample': True, 'created_at': '2025-04-07 23:50:45', 'id': 2, 'similarity': 0.09646803140640259}, {'query_text': '@customers @order_items ', 'sql_query': 'SELECT \n    *\nFROM \n    customers c,\n    order_items oi;', 'results_summary': 'Returned 55 rows with 16 columns', 'workspace': 'dfd', 'feedback_rating': 0, 'tables_used': 'customers,order_items', 'is_manual_sample': False, 'created_at': '2025-04-06 11:33:46', 'id': 3, 'similarity': 0.07201781868934631}]
2025-04-08 20:19:17,223 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 20:19:17] "POST /admin/api/vector-db/collections/query_embeddings/search HTTP/1.1" 200 -
2025-04-08 20:19:24,562 - DEBUG - [vector_db_routes.py:417] - Search output fields for query_embeddings: ['id']
2025-04-08 20:19:24,564 - INFO - [vector_db_routes.py:430] - data: ['[{\'id\': 1, \'distance\': 0.09624870866537094, \'entity\': {\'query_text\': \'get me all the customers\', \'sql_query\': \'SELECT * FROM customers;\', \'results_summary\': \'Returned 5 rows with 11 columns\', \'workspace\': \'dfd\', \'feedback_rating\': 1, \'tables_used\': \'\', \'is_manual_sample\': False, \'created_at\': \'2025-04-05 15:17:11\', \'id\': 1}}, {\'id\': 2, \'distance\': 0.0838136076927185, \'entity\': {\'query_text\': \'get me count of customers by order month\', \'sql_query\': "SELECT \\n    strftime(\'%Y-%m\', o.order_date) AS order_month,\\n    COUNT(DISTINCT c.customer_id) AS customer_count\\nFROM \\n    customers c\\nINNER JOIN \\n    orders o ON c.customer_id = o.customer_id\\nGROUP BY \\n    order_month\\nORDER BY \\n    order_month;", \'results_summary\': \'Returned 2 rows with 2 columns\', \'workspace\': \'dfd\', \'feedback_rating\': 1, \'tables_used\': \'\', \'is_manual_sample\': True, \'created_at\': \'2025-04-07 23:50:45\', \'id\': 2}}, {\'id\': 3, \'distance\': 0.03809225186705589, \'entity\': {\'query_text\': \'@customers @order_items \', \'sql_query\': \'SELECT \\n    *\\nFROM \\n    customers c,\\n    order_items oi;\', \'results_summary\': \'Returned 55 rows with 16 columns\', \'workspace\': \'dfd\', \'feedback_rating\': 0, \'tables_used\': \'customers,order_items\', \'is_manual_sample\': False, \'created_at\': \'2025-04-06 11:33:46\', \'id\': 3}}]'] 
2025-04-08 20:19:24,564 - DEBUG - [vector_db_routes.py:464] - First search result: {'query_text': 'get me all the customers', 'sql_query': 'SELECT * FROM customers;', 'results_summary': 'Returned 5 rows with 11 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'tables_used': '', 'is_manual_sample': False, 'created_at': '2025-04-05 15:17:11', 'id': 1, 'similarity': 0.09624870866537094}
2025-04-08 20:19:24,565 - DEBUG - [vector_db_routes.py:465] - Fields in first result: ['query_text', 'sql_query', 'results_summary', 'workspace', 'feedback_rating', 'tables_used', 'is_manual_sample', 'created_at', 'id', 'similarity']
2025-04-08 20:19:24,565 - INFO - [vector_db_routes.py:467] - Search results for ***** 'Returned 55 rows with 16 columns' in query_embeddings: [{'query_text': 'get me all the customers', 'sql_query': 'SELECT * FROM customers;', 'results_summary': 'Returned 5 rows with 11 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'tables_used': '', 'is_manual_sample': False, 'created_at': '2025-04-05 15:17:11', 'id': 1, 'similarity': 0.09624870866537094}, {'query_text': 'get me count of customers by order month', 'sql_query': "SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;", 'results_summary': 'Returned 2 rows with 2 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'tables_used': '', 'is_manual_sample': True, 'created_at': '2025-04-07 23:50:45', 'id': 2, 'similarity': 0.0838136076927185}, {'query_text': '@customers @order_items ', 'sql_query': 'SELECT \n    *\nFROM \n    customers c,\n    order_items oi;', 'results_summary': 'Returned 55 rows with 16 columns', 'workspace': 'dfd', 'feedback_rating': 0, 'tables_used': 'customers,order_items', 'is_manual_sample': False, 'created_at': '2025-04-06 11:33:46', 'id': 3, 'similarity': 0.03809225186705589}]
2025-04-08 20:19:24,566 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 20:19:24] "POST /admin/api/vector-db/collections/query_embeddings/search HTTP/1.1" 200 -
2025-04-08 20:19:33,611 - DEBUG - [vector_db_routes.py:417] - Search output fields for query_embeddings: ['id']
2025-04-08 20:19:33,613 - INFO - [vector_db_routes.py:430] - data: ['[{\'id\': 1, \'distance\': 0.3578149974346161, \'entity\': {\'query_text\': \'get me all the customers\', \'sql_query\': \'SELECT * FROM customers;\', \'results_summary\': \'Returned 5 rows with 11 columns\', \'workspace\': \'dfd\', \'feedback_rating\': 1, \'tables_used\': \'\', \'is_manual_sample\': False, \'created_at\': \'2025-04-05 15:17:11\', \'id\': 1}}, {\'id\': 3, \'distance\': 0.3416977822780609, \'entity\': {\'query_text\': \'@customers @order_items \', \'sql_query\': \'SELECT \\n    *\\nFROM \\n    customers c,\\n    order_items oi;\', \'results_summary\': \'Returned 55 rows with 16 columns\', \'workspace\': \'dfd\', \'feedback_rating\': 0, \'tables_used\': \'customers,order_items\', \'is_manual_sample\': False, \'created_at\': \'2025-04-06 11:33:46\', \'id\': 3}}, {\'id\': 2, \'distance\': 0.28615254163742065, \'entity\': {\'query_text\': \'get me count of customers by order month\', \'sql_query\': "SELECT \\n    strftime(\'%Y-%m\', o.order_date) AS order_month,\\n    COUNT(DISTINCT c.customer_id) AS customer_count\\nFROM \\n    customers c\\nINNER JOIN \\n    orders o ON c.customer_id = o.customer_id\\nGROUP BY \\n    order_month\\nORDER BY \\n    order_month;", \'results_summary\': \'Returned 2 rows with 2 columns\', \'workspace\': \'dfd\', \'feedback_rating\': 1, \'tables_used\': \'\', \'is_manual_sample\': True, \'created_at\': \'2025-04-07 23:50:45\', \'id\': 2}}]'] 
2025-04-08 20:19:33,614 - DEBUG - [vector_db_routes.py:464] - First search result: {'query_text': 'get me all the customers', 'sql_query': 'SELECT * FROM customers;', 'results_summary': 'Returned 5 rows with 11 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'tables_used': '', 'is_manual_sample': False, 'created_at': '2025-04-05 15:17:11', 'id': 1, 'similarity': 0.3578149974346161}
2025-04-08 20:19:33,614 - DEBUG - [vector_db_routes.py:465] - Fields in first result: ['query_text', 'sql_query', 'results_summary', 'workspace', 'feedback_rating', 'tables_used', 'is_manual_sample', 'created_at', 'id', 'similarity']
2025-04-08 20:19:33,615 - INFO - [vector_db_routes.py:467] - Search results for ***** 'SELECT * FROM customers c, order_items oi;' in query_embeddings: [{'query_text': 'get me all the customers', 'sql_query': 'SELECT * FROM customers;', 'results_summary': 'Returned 5 rows with 11 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'tables_used': '', 'is_manual_sample': False, 'created_at': '2025-04-05 15:17:11', 'id': 1, 'similarity': 0.3578149974346161}, {'query_text': '@customers @order_items ', 'sql_query': 'SELECT \n    *\nFROM \n    customers c,\n    order_items oi;', 'results_summary': 'Returned 55 rows with 16 columns', 'workspace': 'dfd', 'feedback_rating': 0, 'tables_used': 'customers,order_items', 'is_manual_sample': False, 'created_at': '2025-04-06 11:33:46', 'id': 3, 'similarity': 0.3416977822780609}, {'query_text': 'get me count of customers by order month', 'sql_query': "SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;", 'results_summary': 'Returned 2 rows with 2 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'tables_used': '', 'is_manual_sample': True, 'created_at': '2025-04-07 23:50:45', 'id': 2, 'similarity': 0.28615254163742065}]
2025-04-08 20:19:33,616 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 20:19:33] "POST /admin/api/vector-db/collections/query_embeddings/search HTTP/1.1" 200 -
2025-04-08 20:19:37,522 - DEBUG - [vector_db_routes.py:417] - Search output fields for query_embeddings: ['id']
2025-04-08 20:19:37,524 - INFO - [vector_db_routes.py:430] - data: ['[{\'id\': 1, \'distance\': 0.3578149974346161, \'entity\': {\'query_text\': \'get me all the customers\', \'sql_query\': \'SELECT * FROM customers;\', \'results_summary\': \'Returned 5 rows with 11 columns\', \'workspace\': \'dfd\', \'feedback_rating\': 1, \'tables_used\': \'\', \'is_manual_sample\': False, \'created_at\': \'2025-04-05 15:17:11\', \'id\': 1}}, {\'id\': 3, \'distance\': 0.3416977822780609, \'entity\': {\'query_text\': \'@customers @order_items \', \'sql_query\': \'SELECT \\n    *\\nFROM \\n    customers c,\\n    order_items oi;\', \'results_summary\': \'Returned 55 rows with 16 columns\', \'workspace\': \'dfd\', \'feedback_rating\': 0, \'tables_used\': \'customers,order_items\', \'is_manual_sample\': False, \'created_at\': \'2025-04-06 11:33:46\', \'id\': 3}}, {\'id\': 2, \'distance\': 0.28615254163742065, \'entity\': {\'query_text\': \'get me count of customers by order month\', \'sql_query\': "SELECT \\n    strftime(\'%Y-%m\', o.order_date) AS order_month,\\n    COUNT(DISTINCT c.customer_id) AS customer_count\\nFROM \\n    customers c\\nINNER JOIN \\n    orders o ON c.customer_id = o.customer_id\\nGROUP BY \\n    order_month\\nORDER BY \\n    order_month;", \'results_summary\': \'Returned 2 rows with 2 columns\', \'workspace\': \'dfd\', \'feedback_rating\': 1, \'tables_used\': \'\', \'is_manual_sample\': True, \'created_at\': \'2025-04-07 23:50:45\', \'id\': 2}}]'] 
2025-04-08 20:19:37,524 - DEBUG - [vector_db_routes.py:464] - First search result: {'query_text': 'get me all the customers', 'sql_query': 'SELECT * FROM customers;', 'results_summary': 'Returned 5 rows with 11 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'tables_used': '', 'is_manual_sample': False, 'created_at': '2025-04-05 15:17:11', 'id': 1, 'similarity': 0.3578149974346161}
2025-04-08 20:19:37,525 - DEBUG - [vector_db_routes.py:465] - Fields in first result: ['query_text', 'sql_query', 'results_summary', 'workspace', 'feedback_rating', 'tables_used', 'is_manual_sample', 'created_at', 'id', 'similarity']
2025-04-08 20:19:37,525 - INFO - [vector_db_routes.py:467] - Search results for ***** 'SELECT * FROM customers c, order_items oi;' in query_embeddings: [{'query_text': 'get me all the customers', 'sql_query': 'SELECT * FROM customers;', 'results_summary': 'Returned 5 rows with 11 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'tables_used': '', 'is_manual_sample': False, 'created_at': '2025-04-05 15:17:11', 'id': 1, 'similarity': 0.3578149974346161}, {'query_text': '@customers @order_items ', 'sql_query': 'SELECT \n    *\nFROM \n    customers c,\n    order_items oi;', 'results_summary': 'Returned 55 rows with 16 columns', 'workspace': 'dfd', 'feedback_rating': 0, 'tables_used': 'customers,order_items', 'is_manual_sample': False, 'created_at': '2025-04-06 11:33:46', 'id': 3, 'similarity': 0.3416977822780609}, {'query_text': 'get me count of customers by order month', 'sql_query': "SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;", 'results_summary': 'Returned 2 rows with 2 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'tables_used': '', 'is_manual_sample': True, 'created_at': '2025-04-07 23:50:45', 'id': 2, 'similarity': 0.28615254163742065}]
2025-04-08 20:19:37,526 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 20:19:37] "POST /admin/api/vector-db/collections/query_embeddings/search HTTP/1.1" 200 -
2025-04-08 20:20:31,615 - DEBUG - [vector_db_routes.py:417] - Search output fields for query_embeddings: ['id']
2025-04-08 20:20:31,617 - INFO - [vector_db_routes.py:430] - data: ['[{\'id\': 2, \'distance\': 0.5162020325660706, \'entity\': {\'query_text\': \'get me count of customers by order month\', \'sql_query\': "SELECT \\n    strftime(\'%Y-%m\', o.order_date) AS order_month,\\n    COUNT(DISTINCT c.customer_id) AS customer_count\\nFROM \\n    customers c\\nINNER JOIN \\n    orders o ON c.customer_id = o.customer_id\\nGROUP BY \\n    order_month\\nORDER BY \\n    order_month;", \'results_summary\': \'Returned 2 rows with 2 columns\', \'workspace\': \'dfd\', \'feedback_rating\': 1, \'tables_used\': \'\', \'is_manual_sample\': True, \'created_at\': \'2025-04-07 23:50:45\', \'id\': 2}}, {\'id\': 1, \'distance\': 0.3639949858188629, \'entity\': {\'query_text\': \'get me all the customers\', \'sql_query\': \'SELECT * FROM customers;\', \'results_summary\': \'Returned 5 rows with 11 columns\', \'workspace\': \'dfd\', \'feedback_rating\': 1, \'tables_used\': \'\', \'is_manual_sample\': False, \'created_at\': \'2025-04-05 15:17:11\', \'id\': 1}}, {\'id\': 3, \'distance\': 0.2634793221950531, \'entity\': {\'query_text\': \'@customers @order_items \', \'sql_query\': \'SELECT \\n    *\\nFROM \\n    customers c,\\n    order_items oi;\', \'results_summary\': \'Returned 55 rows with 16 columns\', \'workspace\': \'dfd\', \'feedback_rating\': 0, \'tables_used\': \'customers,order_items\', \'is_manual_sample\': False, \'created_at\': \'2025-04-06 11:33:46\', \'id\': 3}}]'] 
2025-04-08 20:20:31,617 - DEBUG - [vector_db_routes.py:464] - First search result: {'query_text': 'get me count of customers by order month', 'sql_query': "SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;", 'results_summary': 'Returned 2 rows with 2 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'tables_used': '', 'is_manual_sample': True, 'created_at': '2025-04-07 23:50:45', 'id': 2, 'similarity': 0.5162020325660706}
2025-04-08 20:20:31,617 - DEBUG - [vector_db_routes.py:465] - Fields in first result: ['query_text', 'sql_query', 'results_summary', 'workspace', 'feedback_rating', 'tables_used', 'is_manual_sample', 'created_at', 'id', 'similarity']
2025-04-08 20:20:31,618 - INFO - [vector_db_routes.py:467] - Search results for ***** 'get me count of customers by order month' in query_embeddings: [{'query_text': 'get me count of customers by order month', 'sql_query': "SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;", 'results_summary': 'Returned 2 rows with 2 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'tables_used': '', 'is_manual_sample': True, 'created_at': '2025-04-07 23:50:45', 'id': 2, 'similarity': 0.5162020325660706}, {'query_text': 'get me all the customers', 'sql_query': 'SELECT * FROM customers;', 'results_summary': 'Returned 5 rows with 11 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'tables_used': '', 'is_manual_sample': False, 'created_at': '2025-04-05 15:17:11', 'id': 1, 'similarity': 0.3639949858188629}, {'query_text': '@customers @order_items ', 'sql_query': 'SELECT \n    *\nFROM \n    customers c,\n    order_items oi;', 'results_summary': 'Returned 55 rows with 16 columns', 'workspace': 'dfd', 'feedback_rating': 0, 'tables_used': 'customers,order_items', 'is_manual_sample': False, 'created_at': '2025-04-06 11:33:46', 'id': 3, 'similarity': 0.2634793221950531}]
2025-04-08 20:20:31,619 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 20:20:31] "POST /admin/api/vector-db/collections/query_embeddings/search HTTP/1.1" 200 -
2025-04-08 20:20:56,528 - DEBUG - [milvus_client.py:137] - Successfully created collection: test
2025-04-08 20:20:57,036 - DEBUG - [milvus_client.py:174] - Successfully created an index on collection: test
2025-04-08 20:20:57,057 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 20:20:57] "POST /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 20:20:57,069 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 20:20:57] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 20:20:57,411 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 20:20:57] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 20:20:57,412 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 20:20:57] "GET /admin/api/vector-db/collections/test HTTP/1.1" 200 -
2025-04-08 20:21:02,869 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 20:21:02] "GET /admin/api/vector-db/collections/test HTTP/1.1" 200 -
2025-04-08 20:21:03,182 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 20:21:03] "GET /admin/api/vector-db/collections/test/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 20:21:10,880 - DEBUG - [vector_db_routes.py:417] - Search output fields for test: ['id']
2025-04-08 20:21:10,882 - INFO - [vector_db_routes.py:430] - data: ['[]'] 
2025-04-08 20:21:10,883 - INFO - [vector_db_routes.py:467] - Search results for ***** 'get me count of customers by order month' in test: []
2025-04-08 20:21:10,884 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 20:21:10] "POST /admin/api/vector-db/collections/test/search HTTP/1.1" 200 -
2025-04-08 20:21:16,562 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 20:21:16] "DELETE /admin/api/vector-db/collections/test HTTP/1.1" 200 -
2025-04-08 20:21:16,887 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 20:21:16] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 20:21:17,129 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 20:21:17] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 20:21:17,715 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 20:21:17] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 20:21:18,033 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 20:21:18] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 20:21:41,922 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 20:21:41,923 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 20:21:41,935 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 20:21:42,936 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-08 20:21:42,936 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-08 20:21:42,936 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 20:21:42,936 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-08 20:21:42,936 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 20:21:42,937 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-08 20:21:42,937 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 20:21:42,937 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-08 20:21:42,937 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 20:21:42,937 - INFO - [database.py:258] - Closing database connection
2025-04-08 20:21:42,937 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-08 20:21:42,937 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-08 20:21:43,921 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-08 20:21:48,814 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 20:21:48,815 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 20:21:48,815 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 20:21:48,816 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 20:21:48,816 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 20:21:48,825 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 20:21:48,832 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 20:21:48,833 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 20:21:48,886 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 20:21:48,886 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 20:21:48,887 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 20:21:48,887 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 20:21:48,887 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 20:21:48,887 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 20:21:48,888 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 20:21:48,935 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 20:21:48,935 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 20:21:48,936 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 20:21:48,936 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 20:21:48,936 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 20:21:48,936 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 20:21:48,937 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 20:21:48,986 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 20:21:48,987 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 20:21:48,987 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 20:21:48,987 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 20:21:48,988 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 20:21:48,988 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-08 20:21:48,988 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 20:21:48,988 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 20:21:49,034 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 20:21:49,034 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-08 20:21:49,034 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 20:21:49,035 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 20:21:49,035 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 20:21:49,035 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 20:21:49,035 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 20:21:49,035 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 20:21:49,081 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-08 20:21:49,082 - INFO - [_internal.py:224] -  * Debugger PIN: 105-107-878
2025-04-08 20:21:52,618 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-08 20:21:53,644 - DEBUG - [milvus_client.py:728] - Created new connection using: 8f39d19d57514f0fa409c703674d3b4c
2025-04-08 20:21:53,645 - INFO - [vector_store.py:42] - Vector database connection established in 1.03s
2025-04-08 20:21:53,647 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-08 20:21:53,649 - INFO - [vector_db_routes.py:378] - Loading embedding model...
2025-04-08 20:21:56,104 - INFO - [vector_db_routes.py:380] - Embedding model loaded in 2.46s
2025-04-08 20:21:56,151 - DEBUG - [vector_db_routes.py:417] - Search output fields for query_embeddings: ['id']
2025-04-08 20:21:56,182 - DEBUG - [vector_db_routes.py:464] - First search result: {'query_text': 'get me count of customers by order month', 'sql_query': "SELECT \n    strftime('%Y-%m', o.order_date) AS order_month,\n    COUNT(DISTINCT c.customer_id) AS customer_count\nFROM \n    customers c\nINNER JOIN \n    orders o ON c.customer_id = o.customer_id\nGROUP BY \n    order_month\nORDER BY \n    order_month;", 'results_summary': 'Returned 2 rows with 2 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'tables_used': '', 'is_manual_sample': True, 'created_at': '2025-04-07 23:50:45', 'id': 2, 'similarity': 0.5162020325660706}
2025-04-08 20:21:56,182 - DEBUG - [vector_db_routes.py:465] - Fields in first result: ['query_text', 'sql_query', 'results_summary', 'workspace', 'feedback_rating', 'tables_used', 'is_manual_sample', 'created_at', 'id', 'similarity']
2025-04-08 20:21:56,183 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 20:21:56] "POST /admin/api/vector-db/collections/query_embeddings/search HTTP/1.1" 200 -
2025-04-08 21:10:12,067 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 21:10:12,068 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 21:10:12,070 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 21:10:12,071 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 21:10:12,074 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 21:10:12,122 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 21:10:12,140 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 21:10:12,141 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 21:10:12,351 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 21:10:12,352 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 21:10:12,352 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 21:10:12,353 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 21:10:12,353 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 21:10:12,354 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 21:10:12,354 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 21:10:12,510 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 21:10:12,511 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 21:10:12,512 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 21:10:12,512 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 21:10:12,512 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 21:10:12,513 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 21:10:12,513 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 21:10:12,653 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 21:10:12,654 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 21:10:12,655 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 21:10:12,655 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 21:10:12,656 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 21:10:12,656 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-08 21:10:12,657 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 21:10:12,657 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 21:10:12,802 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 21:10:12,803 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-08 21:10:12,804 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 21:10:12,804 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 21:10:12,805 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 21:10:12,805 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 21:10:12,806 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 21:10:12,807 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 21:10:12,962 - INFO - [_internal.py:224] - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.27.251.157:5000
2025-04-08 21:10:12,962 - INFO - [_internal.py:224] - [33mPress CTRL+C to quit[0m
2025-04-08 21:10:12,988 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-08 21:10:22,620 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 21:10:22,621 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 21:10:22,621 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 21:10:22,621 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 21:10:22,622 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 21:10:22,636 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 21:10:22,640 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 21:10:22,640 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 21:10:22,736 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 21:10:22,737 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 21:10:22,738 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 21:10:22,739 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 21:10:22,739 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 21:10:22,740 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 21:10:22,740 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 21:10:22,820 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 21:10:22,820 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 21:10:22,821 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 21:10:22,821 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 21:10:22,821 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 21:10:22,821 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 21:10:22,822 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 21:10:22,899 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 21:10:22,900 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 21:10:22,900 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 21:10:22,900 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 21:10:22,901 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 21:10:22,901 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-08 21:10:22,901 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 21:10:22,901 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 21:10:22,978 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 21:10:22,979 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-08 21:10:22,979 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 21:10:22,979 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 21:10:22,980 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 21:10:22,980 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 21:10:22,980 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 21:10:22,980 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 21:10:23,046 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-08 21:10:23,057 - INFO - [_internal.py:224] -  * Debugger PIN: 789-365-814
2025-04-08 21:11:41,290 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:11:41] "[32mGET /admin/vector-db HTTP/1.1[0m" 302 -
2025-04-08 21:11:41,561 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:11:41] "GET /login HTTP/1.1" 200 -
2025-04-08 21:11:41,646 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:11:41] "GET /login HTTP/1.1" 200 -
2025-04-08 21:11:46,363 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:11:46] "POST /login HTTP/1.1" 200 -
2025-04-08 21:11:50,885 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:11:50] "[32mPOST /login HTTP/1.1[0m" 302 -
2025-04-08 21:11:51,202 - DEBUG - [app.py:84] - Main page requested
2025-04-08 21:11:51,214 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:11:51] "GET / HTTP/1.1" 200 -
2025-04-08 21:11:51,458 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:11:51] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-08 21:11:51,565 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:11:51] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-08 21:11:51,567 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:11:51] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-08 21:11:51,568 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:11:51] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-08 21:11:51,572 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:11:51] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-08 21:11:51,574 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:11:51] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-08 21:11:51,766 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:11:51] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-08 21:11:51,881 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:11:51] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-08 21:11:52,212 - DEBUG - [app.py:152] - Table suggestions requested for workspace: dfd, query: ''
2025-04-08 21:11:52,213 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:11:52] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-08 21:11:55,369 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 21:11:55,377 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:11:55] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 21:11:55,725 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:11:55] "[36mGET /static/js/admin/vector_db.js HTTP/1.1[0m" 304 -
2025-04-08 21:11:55,981 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-08 21:11:57,032 - DEBUG - [milvus_client.py:728] - Created new connection using: 4214c4dd33d14348a9d1e0126c1d28ab
2025-04-08 21:11:57,033 - INFO - [vector_store.py:42] - Vector database connection established in 1.05s
2025-04-08 21:11:57,034 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-08 21:11:57,036 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:11:57] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 21:11:57,051 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:11:57] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 21:11:59,541 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:11:59] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 21:11:59,546 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:11:59] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 21:14:53,485 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 21:14:53,488 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:14:53] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 21:14:53,739 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:14:53] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 21:14:53,847 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:14:53] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 21:14:55,335 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:14:55] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 21:14:55,646 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:14:55] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 21:17:42,566 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 21:17:42,569 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:17:42] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 21:17:42,834 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:17:42] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-08 21:17:42,920 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:17:42] "GET /static/js/admin/vector_db.js HTTP/1.1" 200 -
2025-04-08 21:17:42,938 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:17:42] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 21:17:43,261 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:17:43] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-04-08 21:17:43,270 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:17:43] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 21:17:45,057 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:17:45] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 21:17:45,382 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:17:45] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 21:17:55,723 - ERROR - [decorators.py:140] - RPC error: [delete], <MilvusException: (code=1100, message=Invalid expr: id in [id == 3]: invalid parameter)>, <Time:{'RPC start': '2025-04-08 21:17:55.703368', 'RPC error': '2025-04-08 21:17:55.723575'}>
2025-04-08 21:17:55,723 - ERROR - [milvus_client.py:626] - Failed to delete primary keys in collection: query_embeddings
2025-04-08 21:17:55,724 - ERROR - [vector_db_routes.py:335] - Error deleting record: <MilvusException: (code=1100, message=Invalid expr: id in [id == 3]: invalid parameter)>
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/routes/vector_db_routes.py", line 320, in delete_collection_data
    vector_store.client.delete(collection_name, f"id == {id}")
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/pymilvus/milvus_client/milvus_client.py", line 627, in delete
    raise ex from ex
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/pymilvus/milvus_client/milvus_client.py", line 615, in delete
    res = conn.delete(
          ^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/pymilvus/decorators.py", line 141, in handler
    raise e from e
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/pymilvus/decorators.py", line 137, in handler
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/pymilvus/decorators.py", line 176, in handler
    return func(self, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/pymilvus/decorators.py", line 116, in handler
    raise e from e
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/pymilvus/decorators.py", line 86, in handler
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/pymilvus/client/grpc_handler.py", line 620, in delete
    raise err from err
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/pymilvus/client/grpc_handler.py", line 614, in delete
    check_status(response.status)
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/pymilvus/client/utils.py", line 63, in check_status
    raise MilvusException(status.code, status.reason, status.error_code)
pymilvus.exceptions.MilvusException: <MilvusException: (code=1100, message=Invalid expr: id in [id == 3]: invalid parameter)>
2025-04-08 21:17:55,728 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:17:55] "[35m[1mDELETE /admin/api/vector-db/collections/query_embeddings/data/3 HTTP/1.1[0m" 500 -
2025-04-08 21:23:18,543 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 21:23:18,546 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:23:18] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 21:23:18,807 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:23:18] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-08 21:23:18,902 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:23:18] "GET /static/js/admin/vector_db.js HTTP/1.1" 200 -
2025-04-08 21:23:18,915 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:23:18] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 21:23:19,242 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:23:19] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-04-08 21:23:19,249 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:23:19] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 21:23:21,854 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:23:21] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 21:23:22,176 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:23:22] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 21:24:07,597 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 21:24:07,600 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:24:07] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 21:24:07,778 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 21:24:07,781 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:24:07] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 21:24:07,907 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:24:07] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-08 21:24:08,066 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 21:24:08,069 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:24:08] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 21:24:08,141 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:24:08] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-08 21:24:08,144 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:24:08] "GET /static/js/admin/vector_db.js HTTP/1.1" 200 -
2025-04-08 21:24:08,217 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:24:08] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 21:24:08,369 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:24:08] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 21:24:08,424 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:24:08] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-04-08 21:24:10,255 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:24:10] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 21:24:10,263 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:24:10] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 21:24:22,260 - DEBUG - [app.py:84] - Main page requested
2025-04-08 21:24:22,264 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:24:22] "GET / HTTP/1.1" 200 -
2025-04-08 21:24:22,621 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:24:22] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-08 21:24:22,624 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:24:22] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-08 21:24:22,626 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:24:22] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-08 21:24:22,629 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:24:22] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-08 21:24:22,633 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:24:22] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-08 21:24:22,635 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:24:22] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-08 21:24:22,956 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:24:22] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-08 21:24:22,959 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:24:22] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-08 21:24:23,318 - DEBUG - [app.py:152] - Table suggestions requested for workspace: dfd, query: ''
2025-04-08 21:24:23,319 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:24:23] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-08 21:24:43,923 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 21:24:43,927 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:24:43] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 21:24:44,288 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:24:44] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 21:24:44,546 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:24:44] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 21:25:07,073 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 21:25:07,076 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:25:07] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 21:25:07,450 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:25:07] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-08 21:25:07,463 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 21:25:07,471 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:25:07] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 21:25:07,592 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 21:25:07,596 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:25:07] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 21:25:07,700 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 21:25:07,704 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:25:07] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 21:25:07,785 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:25:07] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-08 21:25:07,930 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 21:25:07,942 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:25:07] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 21:25:08,098 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:25:08] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-08 21:25:08,167 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:25:08] "GET /static/js/admin/vector_db.js HTTP/1.1" 200 -
2025-04-08 21:25:08,337 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:25:08] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 21:25:08,358 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:25:08] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-04-08 21:25:08,678 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:25:08] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 21:25:20,683 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-08 21:25:20,683 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-08 21:25:20,683 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 21:25:20,683 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-08 21:25:20,683 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 21:25:20,684 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-08 21:25:20,684 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 21:25:20,684 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-08 21:25:20,684 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 21:25:20,685 - INFO - [database.py:258] - Closing database connection
2025-04-08 21:25:20,685 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-08 21:25:20,685 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-08 21:25:20,752 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-08 21:25:20,752 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-08 21:25:20,752 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 21:25:20,752 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-08 21:25:20,753 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 21:25:20,753 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-08 21:25:20,753 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 21:25:20,753 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-08 21:25:20,753 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 21:25:20,753 - INFO - [database.py:258] - Closing database connection
2025-04-08 21:25:20,753 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-08 21:25:20,754 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-08 21:25:28,756 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 21:25:28,757 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 21:25:28,757 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 21:25:28,757 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 21:25:28,758 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 21:25:28,765 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 21:25:28,769 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 21:25:28,769 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 21:25:28,819 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 21:25:28,820 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 21:25:28,820 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 21:25:28,820 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 21:25:28,820 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 21:25:28,820 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 21:25:28,821 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 21:25:28,869 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 21:25:28,870 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 21:25:28,870 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 21:25:28,870 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 21:25:28,870 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 21:25:28,870 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 21:25:28,871 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 21:25:28,938 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 21:25:28,938 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 21:25:28,939 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 21:25:28,939 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 21:25:28,939 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 21:25:28,940 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-08 21:25:28,940 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 21:25:28,940 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 21:25:28,996 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 21:25:28,996 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-08 21:25:28,996 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 21:25:28,997 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 21:25:28,997 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 21:25:28,997 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 21:25:28,997 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 21:25:28,998 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 21:25:29,047 - INFO - [_internal.py:224] - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.27.251.157:5000
2025-04-08 21:25:29,047 - INFO - [_internal.py:224] - [33mPress CTRL+C to quit[0m
2025-04-08 21:25:29,054 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-08 21:25:36,453 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 21:25:36,453 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 21:25:36,453 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 21:25:36,453 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 21:25:36,454 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 21:25:36,462 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 21:25:36,465 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 21:25:36,465 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 21:25:36,507 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 21:25:36,507 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 21:25:36,507 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 21:25:36,507 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 21:25:36,508 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 21:25:36,508 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 21:25:36,508 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 21:25:36,549 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 21:25:36,550 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 21:25:36,550 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 21:25:36,550 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 21:25:36,550 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 21:25:36,551 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 21:25:36,551 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 21:25:36,592 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 21:25:36,592 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 21:25:36,593 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 21:25:36,593 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 21:25:36,593 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 21:25:36,594 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-08 21:25:36,594 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 21:25:36,594 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 21:25:36,636 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 21:25:36,636 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-08 21:25:36,636 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 21:25:36,636 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 21:25:36,637 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 21:25:36,637 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 21:25:36,637 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 21:25:36,637 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 21:25:36,679 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-08 21:25:36,679 - INFO - [_internal.py:224] -  * Debugger PIN: 789-365-814
2025-04-08 21:25:37,407 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 21:25:37,433 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:25:37] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 21:25:37,781 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-08 21:25:38,864 - DEBUG - [milvus_client.py:728] - Created new connection using: 57d1021f2d704a4d84e1248466e47e46
2025-04-08 21:25:38,864 - INFO - [vector_store.py:42] - Vector database connection established in 1.08s
2025-04-08 21:25:38,868 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-08 21:25:38,873 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:25:38] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 21:25:39,215 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:25:39] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 21:26:31,699 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 21:26:31,703 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:26:31] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 21:26:32,105 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:26:32] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-08 21:26:32,108 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:26:32] "GET /static/js/admin/vector_db.js HTTP/1.1" 200 -
2025-04-08 21:26:32,322 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:26:32] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 21:26:32,493 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:26:32] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-04-08 21:26:32,506 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:26:32] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 21:26:32,884 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 21:26:32,887 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:26:32] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 21:26:33,257 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:26:33] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-08 21:26:33,268 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:26:33] "GET /static/js/admin/vector_db.js HTTP/1.1" 200 -
2025-04-08 21:26:33,543 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:26:33] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 21:26:33,705 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:26:33] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-04-08 21:26:33,742 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:26:33] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 21:26:34,013 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 21:26:34,028 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:26:34] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 21:26:34,444 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:26:34] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-08 21:26:34,462 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:26:34] "GET /static/js/admin/vector_db.js HTTP/1.1" 200 -
2025-04-08 21:26:34,770 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:26:34] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 21:26:35,147 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:26:35] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-04-08 21:26:35,210 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:26:35] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 21:26:37,569 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:26:37] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 21:26:37,926 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:26:37] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 21:27:21,458 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 21:27:21,463 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:27:21] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 21:27:21,713 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:27:21] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-08 21:27:21,841 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:27:21] "GET /static/js/admin/vector_db.js HTTP/1.1" 200 -
2025-04-08 21:27:22,101 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:27:22] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 21:27:22,443 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:27:22] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-04-08 21:27:22,478 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:27:22] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 21:27:22,698 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 21:27:22,706 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:27:22] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 21:27:22,818 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:27:22] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-08 21:27:23,141 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:27:23] "GET /static/js/admin/vector_db.js HTTP/1.1" 200 -
2025-04-08 21:27:23,146 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 21:27:23,159 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:27:23] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 21:27:23,298 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:27:23] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-08 21:27:23,640 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:27:23] "GET /static/js/admin/vector_db.js HTTP/1.1" 200 -
2025-04-08 21:27:23,919 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:27:23] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 21:27:24,179 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:27:24] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-04-08 21:27:24,237 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:27:24] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 21:27:24,878 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:27:24] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 21:27:25,220 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:27:25] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 21:27:29,223 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-08 21:27:29,224 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-08 21:27:29,224 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 21:27:29,224 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-08 21:27:29,224 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 21:27:29,224 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-08 21:27:29,225 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 21:27:29,225 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-08 21:27:29,225 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 21:27:29,225 - INFO - [database.py:258] - Closing database connection
2025-04-08 21:27:29,225 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-08 21:27:29,225 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-08 21:27:29,364 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-08 21:27:29,365 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-08 21:27:29,365 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 21:27:29,365 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-08 21:27:29,365 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 21:27:29,366 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-08 21:27:29,366 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 21:27:29,366 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-08 21:27:29,366 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 21:27:29,366 - INFO - [database.py:258] - Closing database connection
2025-04-08 21:27:29,367 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-08 21:27:29,367 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-08 21:27:39,828 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 21:27:39,828 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 21:27:39,828 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 21:27:39,829 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 21:27:39,829 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 21:27:39,837 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 21:27:39,840 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 21:27:39,840 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 21:27:39,888 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 21:27:39,888 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 21:27:39,888 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 21:27:39,888 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 21:27:39,889 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 21:27:39,889 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 21:27:39,889 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 21:27:39,930 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 21:27:39,931 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 21:27:39,931 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 21:27:39,931 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 21:27:39,931 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 21:27:39,931 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 21:27:39,932 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 21:27:39,975 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 21:27:39,976 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 21:27:39,976 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 21:27:39,976 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 21:27:39,976 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 21:27:39,976 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-08 21:27:39,976 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 21:27:39,977 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 21:27:40,022 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 21:27:40,022 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-08 21:27:40,022 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 21:27:40,022 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 21:27:40,023 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 21:27:40,023 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 21:27:40,023 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 21:27:40,023 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 21:27:40,066 - INFO - [_internal.py:224] - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.27.251.157:5000
2025-04-08 21:27:40,066 - INFO - [_internal.py:224] - [33mPress CTRL+C to quit[0m
2025-04-08 21:27:40,070 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-08 21:27:46,853 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 21:27:46,854 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 21:27:46,854 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 21:27:46,855 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 21:27:46,856 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 21:27:46,867 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 21:27:46,871 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 21:27:46,872 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 21:27:46,942 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 21:27:46,942 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 21:27:46,943 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 21:27:46,943 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 21:27:46,943 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 21:27:46,944 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 21:27:46,944 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 21:27:47,007 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 21:27:47,008 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 21:27:47,008 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 21:27:47,008 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 21:27:47,009 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 21:27:47,009 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 21:27:47,009 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 21:27:47,076 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 21:27:47,076 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 21:27:47,077 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 21:27:47,077 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 21:27:47,078 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 21:27:47,078 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-08 21:27:47,078 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 21:27:47,079 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 21:27:47,146 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 21:27:47,147 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-08 21:27:47,147 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 21:27:47,147 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 21:27:47,148 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 21:27:47,148 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 21:27:47,148 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 21:27:47,149 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 21:27:47,211 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-08 21:27:47,212 - INFO - [_internal.py:224] -  * Debugger PIN: 789-365-814
2025-04-08 21:27:48,089 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 21:27:48,090 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 21:27:48,100 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 21:27:48,157 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:27:48] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 21:27:48,159 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:27:48] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 21:27:48,163 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:27:48] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 21:27:48,245 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:27:48] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-08 21:27:48,550 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:27:48] "GET /static/js/admin/vector_db.js HTTP/1.1" 200 -
2025-04-08 21:27:48,881 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-08 21:27:48,916 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:27:48] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-04-08 21:27:49,933 - DEBUG - [milvus_client.py:728] - Created new connection using: 4c51578205164b17a342ec2a18fbca23
2025-04-08 21:27:49,933 - INFO - [vector_store.py:42] - Vector database connection established in 1.05s
2025-04-08 21:27:49,937 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-08 21:27:49,940 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:27:49] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 21:27:49,962 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:27:49] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 21:27:53,524 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:27:53] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 21:27:53,529 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:27:53] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 21:29:41,215 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 21:29:41,219 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:29:41] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 21:29:41,470 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:29:41] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 21:29:41,681 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:29:41] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 21:29:42,434 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:29:42] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 21:29:42,751 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:29:42] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 21:29:47,573 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:29:47] "GET /admin/ HTTP/1.1" 200 -
2025-04-08 21:29:47,822 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:29:47] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-08 21:29:47,931 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:29:47] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-08 21:29:48,151 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:29:48] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-08 21:29:49,867 - DEBUG - [app.py:84] - Main page requested
2025-04-08 21:29:49,873 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:29:49] "GET / HTTP/1.1" 200 -
2025-04-08 21:29:50,267 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:29:50] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-08 21:29:50,269 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:29:50] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-08 21:29:50,277 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:29:50] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-08 21:29:50,279 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:29:50] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-08 21:29:50,285 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:29:50] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-08 21:29:50,289 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:29:50] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-08 21:29:50,582 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:29:50] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-08 21:29:50,588 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:29:50] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-08 21:29:50,943 - DEBUG - [app.py:152] - Table suggestions requested for workspace: dfd, query: ''
2025-04-08 21:29:50,945 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:29:50] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-08 21:30:08,062 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 21:30:08,065 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:30:08] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 21:30:08,429 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:30:08] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 21:30:08,684 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:30:08] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 21:30:10,274 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:30:10] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 21:30:10,588 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 21:30:10] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 23:20:14,940 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 23:20:14,943 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 23:20:14,944 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 23:20:14,944 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 23:20:14,947 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 23:20:14,981 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 23:20:15,008 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 23:20:15,009 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 23:20:15,150 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 23:20:15,151 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 23:20:15,151 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 23:20:15,152 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 23:20:15,153 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 23:20:15,153 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 23:20:15,154 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 23:20:15,277 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 23:20:15,278 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 23:20:15,279 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 23:20:15,279 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 23:20:15,280 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 23:20:15,280 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 23:20:15,281 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 23:20:15,401 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 23:20:15,402 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 23:20:15,403 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 23:20:15,403 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 23:20:15,404 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 23:20:15,404 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-08 23:20:15,405 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 23:20:15,405 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 23:20:15,525 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 23:20:15,526 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-08 23:20:15,526 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 23:20:15,527 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 23:20:15,528 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 23:20:15,528 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 23:20:15,529 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 23:20:15,529 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 23:20:15,663 - INFO - [_internal.py:224] - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.27.251.157:5000
2025-04-08 23:20:15,663 - INFO - [_internal.py:224] - [33mPress CTRL+C to quit[0m
2025-04-08 23:20:15,688 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-08 23:20:22,786 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 23:20:22,787 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 23:20:22,787 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 23:20:22,788 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 23:20:22,791 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 23:20:22,820 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 23:20:22,825 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 23:20:22,826 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 23:20:23,003 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 23:20:23,004 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 23:20:23,005 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 23:20:23,005 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 23:20:23,006 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 23:20:23,006 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 23:20:23,006 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 23:20:23,187 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 23:20:23,188 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 23:20:23,188 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 23:20:23,189 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 23:20:23,190 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 23:20:23,190 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 23:20:23,190 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 23:20:23,360 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 23:20:23,361 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 23:20:23,362 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 23:20:23,362 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 23:20:23,363 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 23:20:23,364 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-08 23:20:23,364 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 23:20:23,364 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 23:20:23,471 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 23:20:23,472 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-08 23:20:23,472 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 23:20:23,474 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 23:20:23,476 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 23:20:23,477 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 23:20:23,478 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 23:20:23,478 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 23:20:23,580 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-08 23:20:23,582 - INFO - [_internal.py:224] -  * Debugger PIN: 501-040-382
2025-04-08 23:20:24,773 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:20:24] "[32mGET / HTTP/1.1[0m" 302 -
2025-04-08 23:20:24,809 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:20:24] "GET /login HTTP/1.1" 200 -
2025-04-08 23:20:25,165 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:20:25] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-08 23:20:32,922 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:20:32] "[32mPOST /login HTTP/1.1[0m" 302 -
2025-04-08 23:20:33,247 - DEBUG - [app.py:84] - Main page requested
2025-04-08 23:20:33,258 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:20:33] "GET / HTTP/1.1" 200 -
2025-04-08 23:20:33,502 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:20:33] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-08 23:20:33,608 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:20:33] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-08 23:20:33,613 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:20:33] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-08 23:20:33,618 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:20:33] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-08 23:20:33,619 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:20:33] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-08 23:20:33,620 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:20:33] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-08 23:20:33,825 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:20:33] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-08 23:20:33,931 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:20:33] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-08 23:20:34,271 - DEBUG - [app.py:152] - Table suggestions requested for workspace: dfd, query: ''
2025-04-08 23:20:34,272 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:20:34] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-08 23:20:37,307 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 23:20:37,314 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:20:37] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 23:20:37,660 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:20:37] "GET /static/js/admin/vector_db.js HTTP/1.1" 200 -
2025-04-08 23:20:37,917 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-08 23:20:38,984 - DEBUG - [milvus_client.py:728] - Created new connection using: ac399f85bde045c5af9690cc9d3036b2
2025-04-08 23:20:38,984 - INFO - [vector_store.py:42] - Vector database connection established in 1.07s
2025-04-08 23:20:38,986 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-08 23:20:38,988 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:20:38] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 23:20:39,003 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:20:39] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 23:20:41,067 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:20:41] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 23:20:41,119 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:20:41] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 23:22:05,607 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 23:22:05,614 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:22:05] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 23:22:05,859 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:22:05] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-08 23:22:05,956 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:22:05] "GET /static/js/admin/vector_db.js HTTP/1.1" 200 -
2025-04-08 23:22:05,973 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:22:05] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 23:22:06,298 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:22:06] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-04-08 23:22:06,312 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:22:06] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 23:22:07,731 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:22:07] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 23:22:08,041 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:22:08] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 23:22:13,320 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-08 23:22:13,320 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-08 23:22:13,320 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 23:22:13,320 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-08 23:22:13,320 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 23:22:13,320 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-08 23:22:13,321 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 23:22:13,321 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-08 23:22:13,321 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 23:22:13,321 - INFO - [database.py:258] - Closing database connection
2025-04-08 23:22:13,321 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-08 23:22:13,321 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-08 23:22:13,557 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-08 23:22:13,557 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-08 23:22:13,558 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 23:22:13,558 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-08 23:22:13,558 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 23:22:13,558 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-08 23:22:13,558 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 23:22:13,558 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-08 23:22:13,558 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 23:22:13,558 - INFO - [database.py:258] - Closing database connection
2025-04-08 23:22:13,559 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-08 23:22:13,559 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-08 23:22:23,268 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 23:22:23,268 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 23:22:23,269 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 23:22:23,269 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 23:22:23,270 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 23:22:23,285 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 23:22:23,290 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 23:22:23,290 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 23:22:23,379 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 23:22:23,379 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 23:22:23,380 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 23:22:23,380 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 23:22:23,380 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 23:22:23,381 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 23:22:23,381 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 23:22:23,453 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 23:22:23,453 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 23:22:23,454 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 23:22:23,454 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 23:22:23,454 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 23:22:23,455 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 23:22:23,455 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 23:22:23,536 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 23:22:23,536 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 23:22:23,537 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 23:22:23,537 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 23:22:23,538 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 23:22:23,538 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-08 23:22:23,538 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 23:22:23,539 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 23:22:23,616 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 23:22:23,616 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-08 23:22:23,616 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 23:22:23,617 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 23:22:23,617 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 23:22:23,617 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 23:22:23,618 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 23:22:23,618 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 23:22:23,684 - INFO - [_internal.py:224] - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.27.251.157:5000
2025-04-08 23:22:23,685 - INFO - [_internal.py:224] - [33mPress CTRL+C to quit[0m
2025-04-08 23:22:23,694 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-08 23:22:30,362 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 23:22:30,363 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 23:22:30,364 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 23:22:30,364 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 23:22:30,365 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 23:22:30,377 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 23:22:30,382 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 23:22:30,382 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 23:22:30,464 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 23:22:30,465 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 23:22:30,465 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 23:22:30,465 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 23:22:30,466 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 23:22:30,466 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 23:22:30,466 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 23:22:30,544 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 23:22:30,544 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 23:22:30,545 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 23:22:30,545 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 23:22:30,545 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 23:22:30,546 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 23:22:30,546 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 23:22:30,628 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 23:22:30,628 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 23:22:30,629 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 23:22:30,629 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 23:22:30,629 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 23:22:30,630 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-08 23:22:30,630 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 23:22:30,630 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 23:22:30,707 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 23:22:30,707 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-08 23:22:30,707 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 23:22:30,707 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 23:22:30,708 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 23:22:30,708 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 23:22:30,708 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 23:22:30,709 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 23:22:30,782 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-08 23:22:30,782 - INFO - [_internal.py:224] -  * Debugger PIN: 501-040-382
2025-04-08 23:22:41,842 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 23:22:41,864 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:22:41] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 23:22:42,065 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-08 23:22:43,089 - DEBUG - [milvus_client.py:728] - Created new connection using: a84b6d989dca411d8c3f1e80bf23c887
2025-04-08 23:22:43,089 - INFO - [vector_store.py:42] - Vector database connection established in 1.02s
2025-04-08 23:22:43,091 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-08 23:22:43,093 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:22:43] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 23:22:43,107 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:22:43] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 23:22:44,377 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:22:44] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 23:22:44,383 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:22:44] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 23:23:42,317 - INFO - [vector_db_routes.py:534] - Loading embedding model...
2025-04-08 23:23:45,064 - INFO - [vector_db_routes.py:536] - Embedding model loaded in 2.75s
2025-04-08 23:23:45,066 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:23:45] "[31m[1mPOST /admin/api/vector-db/collections/query_embeddings/upload HTTP/1.1[0m" 400 -
2025-04-08 23:27:35,854 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-08 23:27:35,855 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-08 23:27:35,855 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 23:27:35,855 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-08 23:27:35,855 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 23:27:35,855 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-08 23:27:35,856 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 23:27:35,856 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-08 23:27:35,856 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 23:27:35,856 - INFO - [database.py:258] - Closing database connection
2025-04-08 23:27:35,856 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-08 23:27:35,856 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-08 23:27:35,998 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-08 23:27:35,999 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-08 23:27:35,999 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 23:27:35,999 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-08 23:27:36,000 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 23:27:36,000 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-08 23:27:36,000 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 23:27:36,000 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-08 23:27:36,000 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 23:27:36,001 - INFO - [database.py:258] - Closing database connection
2025-04-08 23:27:36,001 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-08 23:27:36,001 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-08 23:27:44,501 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 23:27:44,502 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 23:27:44,502 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 23:27:44,503 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 23:27:44,504 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 23:27:44,519 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 23:27:44,523 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 23:27:44,523 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 23:27:44,603 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 23:27:44,604 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 23:27:44,604 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 23:27:44,605 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 23:27:44,605 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 23:27:44,606 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 23:27:44,606 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 23:27:44,682 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 23:27:44,683 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 23:27:44,683 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 23:27:44,683 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 23:27:44,684 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 23:27:44,684 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 23:27:44,684 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 23:27:44,757 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 23:27:44,757 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 23:27:44,758 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 23:27:44,758 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 23:27:44,759 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 23:27:44,759 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-08 23:27:44,759 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 23:27:44,760 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 23:27:44,831 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 23:27:44,832 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-08 23:27:44,832 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 23:27:44,832 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 23:27:44,833 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 23:27:44,833 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 23:27:44,833 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 23:27:44,834 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 23:27:44,899 - INFO - [_internal.py:224] - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.27.251.157:5000
2025-04-08 23:27:44,899 - INFO - [_internal.py:224] - [33mPress CTRL+C to quit[0m
2025-04-08 23:27:44,907 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-08 23:27:52,148 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 23:27:52,149 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 23:27:52,149 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 23:27:52,149 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 23:27:52,150 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 23:27:52,163 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 23:27:52,167 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 23:27:52,167 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 23:27:52,231 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 23:27:52,231 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 23:27:52,232 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 23:27:52,232 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 23:27:52,232 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 23:27:52,233 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 23:27:52,233 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 23:27:52,368 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 23:27:52,368 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 23:27:52,369 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 23:27:52,369 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 23:27:52,370 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 23:27:52,370 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 23:27:52,371 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 23:27:52,481 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 23:27:52,482 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 23:27:52,483 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 23:27:52,483 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 23:27:52,484 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 23:27:52,484 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-08 23:27:52,484 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 23:27:52,484 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 23:27:52,573 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 23:27:52,573 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-08 23:27:52,574 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 23:27:52,574 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 23:27:52,575 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 23:27:52,575 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 23:27:52,575 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 23:27:52,575 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 23:27:52,660 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-08 23:27:52,661 - INFO - [_internal.py:224] -  * Debugger PIN: 501-040-382
2025-04-08 23:27:53,720 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 23:27:53,755 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:27:53] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 23:27:53,854 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-08 23:27:54,907 - DEBUG - [milvus_client.py:728] - Created new connection using: 832ad311d78547d0b3373a9bf93173ab
2025-04-08 23:27:54,908 - INFO - [vector_store.py:42] - Vector database connection established in 1.05s
2025-04-08 23:27:54,909 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-08 23:27:54,911 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:27:54] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 23:27:55,233 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:27:55] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 23:27:55,954 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:27:55] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 23:27:56,314 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:27:56] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 23:28:03,114 - INFO - [vector_db_routes.py:534] - Loading embedding model...
2025-04-08 23:28:05,626 - INFO - [vector_db_routes.py:536] - Embedding model loaded in 2.51s
2025-04-08 23:28:05,628 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:28:05] "[31m[1mPOST /admin/api/vector-db/collections/query_embeddings/upload HTTP/1.1[0m" 400 -
2025-04-08 23:28:30,751 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 23:28:30,755 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:28:30] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 23:28:31,131 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:28:31] "GET /static/js/admin/vector_db.js HTTP/1.1" 200 -
2025-04-08 23:28:31,132 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:28:31] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-08 23:28:31,374 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:28:31] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 23:28:31,488 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:28:31] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-04-08 23:28:31,496 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:28:31] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 23:28:32,938 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:28:32] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 23:28:33,248 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:28:33] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 23:28:39,501 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:28:39] "[31m[1mPOST /admin/api/vector-db/collections/query_embeddings/upload HTTP/1.1[0m" 400 -
2025-04-08 23:28:49,756 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:28:49] "[31m[1mPOST /admin/api/vector-db/collections/query_embeddings/upload HTTP/1.1[0m" 400 -
2025-04-08 23:28:56,943 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 23:28:56,949 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:28:56] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 23:28:57,191 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:28:57] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 23:28:57,308 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:28:57] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 23:28:59,106 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:28:59] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 23:28:59,421 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:28:59] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 23:29:04,780 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:29:04] "[31m[1mPOST /admin/api/vector-db/collections/query_embeddings/upload HTTP/1.1[0m" 400 -
2025-04-08 23:29:39,607 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:29:39] "[31m[1mGET /admin/api/vector-db/collections/query_embeddings/upload HTTP/1.1[0m" 405 -
2025-04-08 23:30:39,108 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 23:30:39,112 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:30:39] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 23:30:39,374 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:30:39] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-08 23:30:39,469 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:30:39] "GET /static/js/admin/vector_db.js HTTP/1.1" 200 -
2025-04-08 23:30:39,496 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:30:39] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 23:30:39,837 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:30:39] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-04-08 23:30:39,848 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:30:39] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 23:30:49,155 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:30:49] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 23:30:49,473 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:30:49] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 23:30:56,907 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:30:56] "[31m[1mPOST /admin/api/vector-db/collections/query_embeddings/upload HTTP/1.1[0m" 400 -
2025-04-08 23:31:09,914 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:31:09] "[31m[1mPOST /admin/api/vector-db/collections/query_embeddings/upload HTTP/1.1[0m" 400 -
2025-04-08 23:32:35,161 - DEBUG - [vector_db_routes.py:52] - Vector database management page requested
2025-04-08 23:32:35,165 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:32:35] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 23:32:35,408 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:32:35] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-08 23:32:35,516 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:32:35] "GET /static/js/admin/vector_db.js HTTP/1.1" 200 -
2025-04-08 23:32:35,546 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:32:35] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 23:32:35,860 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:32:35] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-04-08 23:32:35,876 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:32:35] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 23:32:38,991 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:32:38] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 23:32:38,995 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:32:38] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 23:32:45,934 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:32:45] "[31m[1mPOST /admin/api/vector-db/collections/query_embeddings/upload HTTP/1.1[0m" 400 -
2025-04-08 23:35:52,607 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 23:35:52,619 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 23:35:53,631 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-08 23:35:53,632 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-08 23:35:53,632 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 23:35:53,632 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-08 23:35:53,632 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 23:35:53,632 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-08 23:35:53,633 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 23:35:53,633 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-08 23:35:53,633 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 23:35:53,633 - INFO - [database.py:258] - Closing database connection
2025-04-08 23:35:53,633 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-08 23:35:53,633 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-08 23:35:54,774 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-08 23:36:08,781 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 23:36:08,782 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 23:36:08,782 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 23:36:08,783 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 23:36:08,784 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 23:36:08,799 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 23:36:08,810 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 23:36:08,811 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 23:36:08,888 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 23:36:08,889 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 23:36:08,889 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 23:36:08,890 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 23:36:08,890 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 23:36:08,890 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 23:36:08,891 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 23:36:08,955 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 23:36:08,955 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 23:36:08,956 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 23:36:08,956 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 23:36:08,957 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 23:36:08,957 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 23:36:08,957 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 23:36:09,035 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 23:36:09,035 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 23:36:09,036 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 23:36:09,036 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 23:36:09,036 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 23:36:09,037 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-08 23:36:09,037 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 23:36:09,037 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 23:36:09,104 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 23:36:09,104 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-08 23:36:09,104 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 23:36:09,105 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 23:36:09,105 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 23:36:09,105 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 23:36:09,106 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 23:36:09,106 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 23:36:09,177 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-08 23:36:09,178 - INFO - [_internal.py:224] -  * Debugger PIN: 501-040-382
2025-04-08 23:36:11,417 - INFO - [vector_db_routes.py:487] - Upload attempt to collection: query_embeddings
2025-04-08 23:36:11,422 - INFO - [vector_db_routes.py:488] - Form data: ImmutableMultiDict([('text_field_name', 'query_text')])
2025-04-08 23:36:11,425 - INFO - [vector_db_routes.py:489] - Files: dict_keys(['file'])
2025-04-08 23:36:11,426 - INFO - [vector_db_routes.py:507] - Processing file: file_json.json for collection: query_embeddings
2025-04-08 23:36:11,429 - ERROR - [vector_db_routes.py:528] - Vector store client not initialized for collection: query_embeddings
2025-04-08 23:36:11,433 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-08 23:36:12,496 - DEBUG - [milvus_client.py:728] - Created new connection using: df7808c59de1466e8b5c2108dffa4fc7
2025-04-08 23:36:12,497 - INFO - [vector_store.py:42] - Vector database connection established in 1.06s
2025-04-08 23:36:12,500 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-08 23:36:12,503 - INFO - [vector_db_routes.py:538] - Available collections: ['query_embeddings']
2025-04-08 23:36:12,504 - INFO - [vector_db_routes.py:550] - Loading embedding model...
2025-04-08 23:36:15,608 - INFO - [vector_db_routes.py:552] - Embedding model loaded in 3.10s
2025-04-08 23:36:15,609 - INFO - [vector_db_routes.py:556] - Processing file with extension: json
2025-04-08 23:36:15,609 - INFO - [vector_db_routes.py:592] - Processing JSON file
2025-04-08 23:36:15,611 - INFO - [vector_db_routes.py:603] - Extracted 1 record from JSON object
2025-04-08 23:36:15,613 - DEBUG - [vector_db_routes.py:608] - Sample record keys: ['status', 'data']
2025-04-08 23:36:15,616 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:36:15] "[31m[1mPOST /admin/api/vector-db/collections/query_embeddings/upload HTTP/1.1[0m" 400 -
2025-04-08 23:38:45,330 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 23:38:45,331 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 23:38:45,346 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-08 23:38:45,346 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-08 23:38:45,346 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 23:38:45,346 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-08 23:38:45,346 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 23:38:45,346 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-08 23:38:45,346 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 23:38:45,347 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-08 23:38:45,347 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 23:38:45,347 - INFO - [database.py:258] - Closing database connection
2025-04-08 23:38:45,347 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-08 23:38:45,347 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-08 23:38:46,411 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-08 23:38:52,029 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 23:38:52,030 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 23:38:52,031 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 23:38:52,033 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 23:38:52,035 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 23:38:52,078 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 23:38:52,119 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 23:38:52,120 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 23:38:52,301 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 23:38:52,302 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 23:38:52,302 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 23:38:52,303 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 23:38:52,303 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 23:38:52,304 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 23:38:52,304 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 23:38:52,424 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 23:38:52,424 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 23:38:52,425 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 23:38:52,426 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 23:38:52,426 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 23:38:52,427 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 23:38:52,427 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 23:38:52,538 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 23:38:52,538 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 23:38:52,539 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 23:38:52,539 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 23:38:52,540 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 23:38:52,540 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-08 23:38:52,540 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 23:38:52,541 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 23:38:52,650 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 23:38:52,650 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-08 23:38:52,651 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 23:38:52,651 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 23:38:52,652 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 23:38:52,652 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 23:38:52,653 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 23:38:52,653 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 23:38:52,768 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-08 23:38:52,769 - INFO - [_internal.py:224] -  * Debugger PIN: 501-040-382
2025-04-08 23:38:53,916 - INFO - [vector_db_routes.py:487] - Upload attempt to collection: query_embeddings
2025-04-08 23:38:53,918 - INFO - [vector_db_routes.py:488] - Form data: ImmutableMultiDict([('text_field_name', 'query_text')])
2025-04-08 23:38:53,919 - INFO - [vector_db_routes.py:489] - Files: dict_keys(['file'])
2025-04-08 23:38:53,920 - INFO - [vector_db_routes.py:507] - Processing file: file_json.json for collection: query_embeddings
2025-04-08 23:38:53,921 - ERROR - [vector_db_routes.py:528] - Vector store client not initialized for collection: query_embeddings
2025-04-08 23:38:53,923 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-08 23:38:54,966 - DEBUG - [milvus_client.py:728] - Created new connection using: b54934e937fa4374a8734274f1768f3d
2025-04-08 23:38:54,967 - INFO - [vector_store.py:42] - Vector database connection established in 1.04s
2025-04-08 23:38:54,969 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-08 23:38:54,971 - INFO - [vector_db_routes.py:538] - Available collections: ['query_embeddings']
2025-04-08 23:38:54,972 - INFO - [vector_db_routes.py:550] - Loading embedding model...
2025-04-08 23:38:58,630 - INFO - [vector_db_routes.py:552] - Embedding model loaded in 3.66s
2025-04-08 23:38:58,630 - INFO - [vector_db_routes.py:556] - Processing file with extension: json
2025-04-08 23:38:58,631 - INFO - [vector_db_routes.py:592] - Processing JSON file
2025-04-08 23:38:58,632 - INFO - [vector_db_routes.py:603] - Extracted 1 record from JSON object
2025-04-08 23:38:58,632 - DEBUG - [vector_db_routes.py:608] - Sample record keys: ['status', 'data']
2025-04-08 23:38:58,633 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:38:58] "[31m[1mPOST /admin/api/vector-db/collections/query_embeddings/upload HTTP/1.1[0m" 400 -
2025-04-08 23:41:37,504 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 23:41:37,504 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 23:41:37,516 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 23:41:38,518 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-08 23:41:38,518 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-08 23:41:38,519 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 23:41:38,519 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-08 23:41:38,519 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 23:41:38,519 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-08 23:41:38,519 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 23:41:38,519 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-08 23:41:38,519 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 23:41:38,519 - INFO - [database.py:258] - Closing database connection
2025-04-08 23:41:38,520 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-08 23:41:38,520 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-08 23:41:39,514 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-08 23:41:45,369 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 23:41:45,369 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 23:41:45,370 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 23:41:45,370 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 23:41:45,372 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 23:41:45,389 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 23:41:45,410 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 23:41:45,411 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 23:41:45,570 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 23:41:45,571 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 23:41:45,571 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 23:41:45,572 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 23:41:45,572 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 23:41:45,573 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 23:41:45,573 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 23:41:45,643 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 23:41:45,643 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 23:41:45,643 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 23:41:45,644 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 23:41:45,644 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 23:41:45,644 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 23:41:45,645 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 23:41:45,719 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 23:41:45,720 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 23:41:45,720 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 23:41:45,720 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 23:41:45,721 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 23:41:45,721 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-08 23:41:45,721 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 23:41:45,721 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 23:41:45,791 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 23:41:45,792 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-08 23:41:45,792 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 23:41:45,792 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 23:41:45,793 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 23:41:45,793 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 23:41:45,793 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 23:41:45,794 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 23:41:45,862 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-08 23:41:45,863 - INFO - [_internal.py:224] -  * Debugger PIN: 501-040-382
2025-04-08 23:41:50,317 - INFO - [vector_db_routes.py:488] - Upload attempt to collection: query_embeddings
2025-04-08 23:41:50,319 - INFO - [vector_db_routes.py:489] - Form data: ImmutableMultiDict([('text_field_name', 'query_text')])
2025-04-08 23:41:50,321 - INFO - [vector_db_routes.py:490] - Files: dict_keys(['file'])
2025-04-08 23:41:50,322 - INFO - [vector_db_routes.py:508] - Processing file: file_json.json for collection: query_embeddings
2025-04-08 23:41:50,323 - ERROR - [vector_db_routes.py:529] - Vector store client not initialized for collection: query_embeddings
2025-04-08 23:41:50,324 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-08 23:41:51,371 - DEBUG - [milvus_client.py:728] - Created new connection using: 820f966d2f7049e7b9e757f1ebb0f0c1
2025-04-08 23:41:51,371 - INFO - [vector_store.py:42] - Vector database connection established in 1.05s
2025-04-08 23:41:51,374 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-08 23:41:51,377 - INFO - [vector_db_routes.py:539] - Available collections: ['query_embeddings']
2025-04-08 23:41:51,377 - INFO - [vector_db_routes.py:551] - Loading embedding model...
2025-04-08 23:41:54,146 - INFO - [vector_db_routes.py:553] - Embedding model loaded in 2.77s
2025-04-08 23:41:54,147 - INFO - [vector_db_routes.py:557] - Processing file with extension: json
2025-04-08 23:41:54,148 - INFO - [vector_db_routes.py:592] - Processing JSON file
2025-04-08 23:41:54,149 - DEBUG - [vector_db_routes.py:596] - JSON content length: 83086 characters
2025-04-08 23:41:54,151 - DEBUG - [vector_db_routes.py:600] - JSON content preview: {
    "status": "success",
    "data": {
        "candles": [
            [
                "2022-04-13T09:15:00+0530",
                198.45,
                218.95,
                191.95,...
2025-04-08 23:41:54,152 - INFO - [vector_db_routes.py:622] - Extracted 1 record from JSON object
2025-04-08 23:41:54,153 - DEBUG - [vector_db_routes.py:628] - Sample record keys: ['status', 'data']
2025-04-08 23:41:54,153 - DEBUG - [vector_db_routes.py:632] - Field 'status': str = success
2025-04-08 23:41:54,155 - DEBUG - [vector_db_routes.py:632] - Field 'data': dict = {'candles': [['2022-04-13T09:15:00+0530', 198.45, 218.95, 191.95, 218.5, 125500, 662100], ['2022-04-13T09:16:00+0530', 218.1, 219.5, 213.75, 214.65, 76500, 662100], ['2022-04-13T09:17:00+0530', 214.1, 219.8, 213.5, 217.3, 49950, 593650], ['2022-04-13T09:18:00+0530', 218.15, 224.2, 217.85, 222.05, 59150, 593650], ['2022-04-13T09:19:00+0530', 222.05, 225.05, 220.25, 224.3, 39450, 593650], ['2022-04-13T09:20:00+0530', 228, 231.05, 223.75, 229.3, 57600, 568550], ['2022-04-13T09:21:00+0530', 230.7, 233, 227.05, 230.1, 36550, 568550], ['2022-04-13T09:22:00+0530', 230.2, 236.95, 229.75, 236.65, 70950, 568550], ['2022-04-13T09:23:00+0530', 236.45, 238.9, 234.65, 234.95, 40900, 550450], ['2022-04-13T09:24:00+0530', 235.6, 236.15, 230.3, 230.3, 24000, 550450], ['2022-04-13T09:25:00+0530', 230.65, 235.95, 230.05, 234.4, 22650, 550450], ['2022-04-13T09:26:00+0530', 234.5, 239.5, 233, 236.95, 28450, 519500], ['2022-04-13T09:27:00+0530', 237, 239.75, 235.35, 238.25, 13750, 519500], ['2022-04-13T09:28:00+0530', 239.2, 239.2, 236.75, 237.65, 11450, 519500], ['2022-04-13T09:29:00+0530', 237, 238.45, 235.25, 236.25, 26550, 512600], ['2022-04-13T09:30:00+0530', 237.55, 238.85, 235.3, 237.05, 18400, 512600], ['2022-04-13T09:31:00+0530', 237.05, 242.45, 234.95, 242.1, 37900, 512600], ['2022-04-13T09:32:00+0530', 242.85, 244, 240, 240, 20200, 507750], ['2022-04-13T09:33:00+0530', 241.05, 241.25, 237.1, 237.6, 21900, 507750], ['2022-04-13T09:34:00+0530', 237.95, 238.95, 230.55, 231.1, 14050, 507750], ['2022-04-13T09:35:00+0530', 231.15, 236, 229.8, 235.35, 36300, 496750], ['2022-04-13T09:36:00+0530', 236.05, 238.75, 235.05, 237.85, 6700, 496750], ['2022-04-13T09:37:00+0530', 238, 239.7, 237, 239, 9450, 496750], ['2022-04-13T09:38:00+0530', 239, 240.7, 237.55, 237.85, 8750, 519550], ['2022-04-13T09:39:00+0530', 237.4, 239.1, 233.05, 233.7, 21850, 519550], ['2022-04-13T09:40:00+0530', 233.05, 234, 231.75, 233, 10000, 519550], ['2022-04-13T09:41:00+0530', 233, 233, 225.8, 225.8, 23450, 521750], ['2022-04-13T09:42:00+0530', 226.9, 227.9, 222.2, 227.45, 16950, 521750], ['2022-04-13T09:43:00+0530', 227.45, 227.45, 223.6, 227, 11750, 521750], ['2022-04-13T09:44:00+0530', 227, 227.1, 224.35, 224.55, 6950, 519850], ['2022-04-13T09:45:00+0530', 224.1, 227, 221.3, 223, 7600, 519850], ['2022-04-13T09:46:00+0530', 223.6, 227.8, 222.95, 225.7, 8550, 519850], ['2022-04-13T09:47:00+0530', 225, 225.7, 217.4, 218.95, 11800, 521400], ['2022-04-13T09:48:00+0530', 218.95, 221.9, 217.35, 217.8, 10150, 521400], ['2022-04-13T09:49:00+0530', 217.95, 221.9, 216.95, 221.55, 6500, 521400], ['2022-04-13T09:50:00+0530', 221.05, 225.85, 221.05, 223, 8600, 526900], ['2022-04-13T09:51:00+0530', 223, 224.4, 218.15, 218.7, 9400, 526900], ['2022-04-13T09:52:00+0530', 218.7, 220.85, 217.95, 218.35, 10050, 526900], ['2022-04-13T09:53:00+0530', 218.35, 220.05, 216.5, 218.9, 10350, 529850], ['2022-04-13T09:54:00+0530', 218.9, 219.95, 216.7, 218.25, 8600, 529850], ['2022-04-13T09:55:00+0530', 218.25, 218.25, 213.25, 215.95, 15150, 529850], ['2022-04-13T09:56:00+0530', 215.95, 216.65, 212.4, 213.15, 12150, 534950], ['2022-04-13T09:57:00+0530', 213.35, 213.35, 207.2, 210.2, 17950, 534950], ['2022-04-13T09:58:00+0530', 211.2, 211.2, 205, 206.8, 9900, 534950], ['2022-04-13T09:59:00+0530', 205.65, 211.8, 205.3, 211.8, 13850, 549250], ['2022-04-13T10:00:00+0530', 210.7, 212.35, 205.9, 207.9, 23000, 549250], ['2022-04-13T10:01:00+0530', 207.8, 208.65, 196.4, 201.75, 34450, 549250], ['2022-04-13T10:02:00+0530', 202.2, 202.2, 197.25, 199.6, 22900, 575300], ['2022-04-13T10:03:00+0530', 198.6, 199.6, 192, 192, 17250, 575300], ['2022-04-13T10:04:00+0530', 191.55, 198.45, 191.55, 198.2, 20050, 575300], ['2022-04-13T10:05:00+0530', 197.25, 198.55, 193, 194.3, 24550, 592650], ['2022-04-13T10:06:00+0530', 194.3, 196.55, 191.55, 196, 9800, 592650], ['2022-04-13T10:07:00+0530', 196, 198, 195, 197.05, 10150, 592650], ['2022-04-13T10:08:00+0530', 197.05, 198.05, 195.65, 196.75, 10250, 600800], ['2022-04-13T10:09:00+0530', 196.75, 196.75, 190, 190.75, 17650, 600800], ['2022-04-13T10:10:00+0530', 190.75, 191.15, 183.55, 188, 30050, 600800], ['2022-04-13T10:11:00+0530', 187.6, 189.35, 186.35, 188, 25850, 621050], ['2022-04-13T10:12:00+0530', 188.7, 191.8, 187.3, 190.45, 27900, 621050], ['2022-04-13T10:13:00+0530', 190.05, 190.7, 183.95, 185.35, 35850, 621050], ['2022-04-13T10:14:00+0530', 185.35, 186.85, 181.35, 181.95, 29900, 662000], ['2022-04-13T10:15:00+0530', 181.2, 185.2, 178.85, 185.15, 33850, 662000], ['2022-04-13T10:16:00+0530', 185.75, 191.85, 183.6, 191.75, 27000, 662000], ['2022-04-13T10:17:00+0530', 191.2, 192, 189.95, 192, 32150, 689900], ['2022-04-13T10:18:00+0530', 191.1, 192, 186.6, 186.6, 21900, 689900], ['2022-04-13T10:19:00+0530', 186.6, 187.7, 183, 183.4, 15200, 689900], ['2022-04-13T10:20:00+0530', 183.4, 188.5, 182.8, 187.95, 14950, 707100], ['2022-04-13T10:21:00+0530', 187.35, 187.95, 183.05, 184.45, 29550, 707100], ['2022-04-13T10:22:00+0530', 184.2, 186, 184, 185.9, 14600, 707100], ['2022-04-13T10:23:00+0530', 185.9, 186.8, 184.2, 185.05, 12200, 728250], ['2022-04-13T10:24:00+0530', 185, 185.3, 182.15, 183.15, 22750, 728250], ['2022-04-13T10:25:00+0530', 183.15, 185.5, 181, 181.95, 19900, 728250], ['2022-04-13T10:26:00+0530', 181.95, 181.95, 172.85, 173.5, 78250, 746700], ['2022-04-13T10:27:00+0530', 173.25, 173.95, 169.05, 171.6, 60400, 746700], ['2022-04-13T10:28:00+0530', 172.45, 178.15, 172, 178.05, 72450, 746700], ['2022-04-13T10:29:00+0530', 178.35, 178.35, 174.2, 175.1, 28750, 808700], ['2022-04-13T10:30:00+0530', 175.1, 176.75, 171.85, 176.1, 21500, 808700], ['2022-04-13T10:31:00+0530', 175.7, 175.7, 172, 174.75, 21650, 808700], ['2022-04-13T10:32:00+0530', 175.1, 180.7, 174.65, 179.2, 30900, 825600], ['2022-04-13T10:33:00+0530', 178, 180.05, 177.65, 178.65, 19250, 825600], ['2022-04-13T10:34:00+0530', 178.65, 181.4, 176.9, 180.75, 32850, 825600], ['2022-04-13T10:35:00+0530', 180.75, 184.95, 179.7, 184.85, 48200, 834350], ['2022-04-13T10:36:00+0530', 184.55, 188.5, 184, 186, 42550, 834350], ['2022-04-13T10:37:00+0530', 186.65, 187.15, 183.8, 185.2, 17950, 834350], ['2022-04-13T10:38:00+0530', 184.9, 185.1, 181.1, 182.1, 10450, 837600], ['2022-04-13T10:39:00+0530', 182.25, 182.8, 180.6, 182, 9250, 837600], ['2022-04-13T10:40:00+0530', 182, 184.45, 180.5, 183.4, 18700, 837600], ['2022-04-13T10:41:00+0530', 183.7, 185.3, 183, 183, 14450, 845650], ['2022-04-13T10:42:00+0530', 183.55, 184.35, 181, 181.6, 7700, 845650], ['2022-04-13T10:43:00+0530', 181.3, 181.6, 175.5, 175.6, 27750, 845650], ['2022-04-13T10:44:00+0530', 176.2, 176.65, 173.05, 175.15, 10750, 853550], ['2022-04-13T10:45:00+0530', 175.4, 175.4, 172, 174.7, 35150, 853550], ['2022-04-13T10:46:00+0530', 175.35, 181.95, 175.15, 181.45, 20750, 853550], ['2022-04-13T10:47:00+0530', 180.95, 181.85, 179, 180.65, 34900, 891450], ['2022-04-13T10:48:00+0530', 180.65, 181.2, 176.5, 177.15, 18000, 891450], ['2022-04-13T10:49:00+0530', 177.15, 177.15, 173.6, 173.95, 24350, 891450], ['2022-04-13T10:50:00+0530', 173.95, 180.05, 173, 179.45, 13900, 914350], ['2022-04-13T10:51:00+0530', 179.45, 180.85, 177.55, 180.55, 11700, 914350], ['2022-04-13T10:52:00+0530', 181, 183.9, 179.5, 181.3, 21100, 914350], ['2022-04-13T10:53:00+0530', 181.3, 181.75, 177.85, 178.8, 11550, 918700], ['2022-04-13T10:54:00+0530', 178.8, 180.15, 177.7, 179.6, 18350, 918700], ['2022-04-13T10:55:00+0530', 179.55, 180.15, 173.85, 174.25, 30950, 918700], ['2022-04-13T10:56:00+0530', 174.6, 176.75, 173.1, 176.25, 14200, 941500], ['2022-04-13T10:57:00+0530', 176.5, 177.75, 171.35, 172.9, 30800, 941500], ['2022-04-13T10:58:00+0530', 173.5, 177.8, 172.8, 176.55, 27000, 941500], ['2022-04-13T10:59:00+0530', 176.55, 180.95, 175.45, 177.85, 15100, 954950], ['2022-04-13T11:00:00+0530', 179, 180, 176.55, 176.55, 13950, 954950], ['2022-04-13T11:01:00+0530', 177.05, 177.05, 173.95, 174.8, 27250, 954950], ['2022-04-13T11:02:00+0530', 175.35, 175.75, 174.05, 174.15, 4450, 970300], ['2022-04-13T11:03:00+0530', 174.15, 175.85, 172.25, 174.35, 10900, 970300], ['2022-04-13T11:04:00+0530', 174, 181.5, 172.55, 179.5, 28750, 970300], ['2022-04-13T11:05:00+0530', 179.25, 182.7, 177.3, 182, 22600, 967250], ['2022-04-13T11:06:00+0530', 181.75, 184.55, 180, 182.6, 19950, 967250], ['2022-04-13T11:07:00+0530', 182.5, 182.95, 178.85, 179.8, 12800, 967250], ['2022-04-13T11:08:00+0530', 179.8, 179.8, 176.7, 178.45, 8800, 970600], ['2022-04-13T11:09:00+0530', 178, 178.45, 174.9, 177, 10950, 970600], ['2022-04-13T11:10:00+0530', 176.85, 179.9, 176.2, 178.35, 15550, 970600], ['2022-04-13T11:11:00+0530', 178.35, 179.15, 176.4, 179, 9850, 990050], ['2022-04-13T11:12:00+0530', 179, 182.8, 179, 179.15, 8650, 990050], ['2022-04-13T11:13:00+0530', 178.95, 179.1, 176, 176.9, 9700, 990050], ['2022-04-13T11:14:00+0530', 176.9, 178.15, 175.5, 177.15, 9400, 996700], ['2022-04-13T11:15:00+0530', 177.65, 178, 176.05, 176.45, 7700, 996700], ['2022-04-13T11:16:00+0530', 176, 180.8, 175.4, 179.6, 11750, 996700], ['2022-04-13T11:17:00+0530', 180, 180, 176.4, 177.65, 17550, 1008250], ['2022-04-13T11:18:00+0530', 177.45, 181.2, 177, 179.4, 6150, 1008250], ['2022-04-13T11:19:00+0530', 179.4, 181.1, 179, 179.8, 5700, 1008250], ['2022-04-13T11:20:00+0530', 180, 180.5, 177.2, 177.95, 8250, 1010300], ['2022-04-13T11:21:00+0530', 178.6, 183.45, 177, 182, 16250, 1010300], ['2022-04-13T11:22:00+0530', 182, 183.15, 179.1, 181, 7900, 1010300], ['2022-04-13T11:23:00+0530', 181, 181.1, 178.45, 180, 11550, 1012650], ['2022-04-13T11:24:00+0530', 180, 182.35, 178.7, 178.9, 6700, 1012650], ['2022-04-13T11:25:00+0530', 178.9, 180.3, 178.5, 180.3, 7250, 1012650], ['2022-04-13T11:26:00+0530', 180.3, 181.65, 178.75, 179.65, 7200, 1012200], ['2022-04-13T11:27:00+0530', 179.65, 181.95, 179.15, 180.4, 3950, 1012200], ['2022-04-13T11:28:00+0530', 180.4, 183.2, 180.4, 181.35, 12850, 1012200], ['2022-04-13T11:29:00+0530', 180.95, 185, 180.15, 182.9, 35250, 1015350], ['2022-04-13T11:30:00+0530', 183, 184.45, 181.7, 182.75, 12450, 1015350], ['2022-04-13T11:31:00+0530', 181.75, 183.15, 180.3, 181.9, 13300, 1015350], ['2022-04-13T11:32:00+0530', 181.9, 182.45, 179.95, 181.65, 9850, 1024350], ['2022-04-13T11:33:00+0530', 182, 185.65, 181.15, 185.3, 7650, 1024350], ['2022-04-13T11:34:00+0530', 185, 188.4, 185, 185.7, 33200, 1024350], ['2022-04-13T11:35:00+0530', 186, 188, 184.2, 185, 24900, 1038000], ['2022-04-13T11:36:00+0530', 185, 185.15, 178.5, 179.85, 40400, 1038000], ['2022-04-13T11:37:00+0530', 180.65, 180.65, 175.15, 178.8, 26200, 1038000], ['2022-04-13T11:38:00+0530', 179.3, 180, 175.9, 176.2, 23600, 1044700], ['2022-04-13T11:39:00+0530', 176.25, 176.6, 171, 174, 43950, 1044700], ['2022-04-13T11:40:00+0530', 174.85, 177.1, 170.7, 172.9, 20650, 1044700], ['2022-04-13T11:41:00+0530', 172.65, 174.5, 169.85, 173.55, 43850, 1071300], ['2022-04-13T11:42:00+0530', 173.55, 175.6, 172.4, 173.05, 18050, 1071300], ['2022-04-13T11:43:00+0530', 173.2, 173.55, 168.85, 170, 34450, 1071300], ['2022-04-13T11:44:00+0530', 171, 171, 165.4, 165.45, 37100, 1095750], ['2022-04-13T11:45:00+0530', 163.15, 165.5, 155.05, 165.15, 89450, 1095750], ['2022-04-13T11:46:00+0530', 164.2, 169.25, 163.55, 166.1, 48000, 1095750], ['2022-04-13T11:47:00+0530', 165.5, 168.9, 165.45, 166.8, 29000, 1121950], ['2022-04-13T11:48:00+0530', 167.1, 167.3, 164.65, 167.3, 20100, 1121950], ['2022-04-13T11:49:00+0530', 167.45, 171.5, 167, 169.8, 39650, 1121950], ['2022-04-13T11:50:00+0530', 169.8, 173, 168.4, 168.8, 26800, 1129450], ['2022-04-13T11:51:00+0530', 169, 175.35, 167.95, 175.05, 34000, 1129450], ['2022-04-13T11:52:00+0530', 174.95, 175.95, 171.15, 173.6, 21450, 1129450], ['2022-04-13T11:53:00+0530', 173.65, 173.75, 169.8, 171.3, 20400, 1123950], ['2022-04-13T11:54:00+0530', 171, 171.3, 167.55, 170.5, 11350, 1123950], ['2022-04-13T11:55:00+0530', 170.55, 172.4, 168, 168.05, 23300, 1123950], ['2022-04-13T11:56:00+0530', 168.7, 170.05, 168.05, 170, 26250, 1134950], ['2022-04-13T11:57:00+0530', 170.2, 172.5, 169.5, 171.2, 19450, 1134950], ['2022-04-13T11:58:00+0530', 171.85, 172.9, 169.45, 169.45, 17800, 1134950], ['2022-04-13T11:59:00+0530', 169.8, 170.55, 167.55, 168.6, 41550, 1149550], ['2022-04-13T12:00:00+0530', 168.6, 172.85, 167.15, 170.45, 24550, 1149550], ['2022-04-13T12:01:00+0530', 169.7, 171, 168.75, 169, 33250, 1149550], ['2022-04-13T12:02:00+0530', 169.15, 169.4, 164.1, 167.2, 39900, 1159950], ['2022-04-13T12:03:00+0530', 167.2, 168.25, 163.1, 163.2, 26300, 1159950], ['2022-04-13T12:04:00+0530', 164.6, 164.6, 159, 161.6, 67350, 1159950], ['2022-04-13T12:05:00+0530', 161.55, 161.95, 157.1, 160.6, 43950, 1166250], ['2022-04-13T12:06:00+0530', 160.3, 160.3, 157.3, 158.35, 58650, 1166250], ['2022-04-13T12:07:00+0530', 158, 161.95, 157.95, 161.7, 52450, 1166250], ['2022-04-13T12:08:00+0530', 161.9, 162, 158.9, 161.35, 23500, 1187300], ['2022-04-13T12:09:00+0530', 161.25, 162.4, 159.55, 161.25, 27450, 1187300], ['2022-04-13T12:10:00+0530', 161.5, 164.95, 161.2, 164.9, 39750, 1187300], ['2022-04-13T12:11:00+0530', 164.95, 165.15, 160, 163.45, 34400, 1206550], ['2022-04-13T12:12:00+0530', 163.45, 163.45, 158.75, 158.75, 27900, 1206550], ['2022-04-13T12:13:00+0530', 159.45, 160.95, 157.05, 158.4, 34700, 1206550], ['2022-04-13T12:14:00+0530', 159.2, 159.4, 150.6, 150.6, 97150, 1228250], ['2022-04-13T12:15:00+0530', 150.95, 157.4, 150.4, 156.55, 82800, 1228250], ['2022-04-13T12:16:00+0530', 156.05, 157.55, 154.15, 154.15, 63750, 1228250], ['2022-04-13T12:17:00+0530', 154.45, 154.75, 152, 153.1, 58000, 1262800], ['2022-04-13T12:18:00+0530', 153, 153.1, 148.1, 150.9, 67800, 1262800], ['2022-04-13T12:19:00+0530', 150.95, 155, 150.05, 153.4, 85300, 1262800], ['2022-04-13T12:20:00+0530', 154.6, 157.95, 154, 155, 71550, 1300150], ['2022-04-13T12:21:00+0530', 155, 156.15, 152.3, 155.75, 42850, 1300150], ['2022-04-13T12:22:00+0530', 156, 157.8, 155.05, 156.75, 41000, 1300150], ['2022-04-13T12:23:00+0530', 156.45, 158, 156.3, 157.85, 38850, 1288250], ['2022-04-13T12:24:00+0530', 157.5, 158.8, 156.1, 158, 42600, 1288250], ['2022-04-13T12:25:00+0530', 157.6, 157.75, 154.15, 155.85, 30750, 1288250], ['2022-04-13T12:26:00+0530', 156.5, 156.5, 153.05, 153.15, 31350, 1303450], ['2022-04-13T12:27:00+0530', 153.3, 153.3, 149, 152.1, 67650, 1303450], ['2022-04-13T12:28:00+0530', 151.65, 153.2, 150.2, 152.2, 56050, 1303450], ['2022-04-13T12:29:00+0530', 151.7, 152.25, 150.15, 151, 42550, 1322250], ['2022-04-13T12:30:00+0530', 150.6, 151, 144.75, 149.15, 119950, 1322250], ['2022-04-13T12:31:00+0530', 149.15, 154.25, 148.85, 154.05, 85800, 1322250], ['2022-04-13T12:32:00+0530', 154.35, 158.8, 154.1, 157.4, 89400, 1342450], ['2022-04-13T12:33:00+0530', 157.35, 165, 157.35, 164.6, 150850, 1342450], ['2022-04-13T12:34:00+0530', 164.95, 165, 159.05, 159.35, 83150, 1342450], ['2022-04-13T12:35:00+0530', 159.2, 161, 157, 160.4, 47300, 1343900], ['2022-04-13T12:36:00+0530', 160, 161.8, 157.3, 161.8, 50700, 1343900], ['2022-04-13T12:37:00+0530', 162, 162.4, 157.35, 157.9, 98750, 1343900], ['2022-04-13T12:38:00+0530', 157.9, 162.75, 155.7, 162.05, 70850, 1367700], ['2022-04-13T12:39:00+0530', 162.2, 163, 159, 159.6, 64250, 1367700], ['2022-04-13T12:40:00+0530', 159.6, 162.05, 158.4, 161.65, 30750, 1367700], ['2022-04-13T12:41:00+0530', 161.5, 162.5, 158.6, 158.6, 43850, 1382500], ['2022-04-13T12:42:00+0530', 158.55, 160.3, 157, 158.65, 30500, 1382500], ['2022-04-13T12:43:00+0530', 158.6, 159.4, 156.8, 157.35, 26250, 1382500], ['2022-04-13T12:44:00+0530', 157.5, 161.25, 157.35, 161.05, 27550, 1400150], ['2022-04-13T12:45:00+0530', 161.15, 161.3, 157.15, 157.65, 25800, 1400150], ['2022-04-13T12:46:00+0530', 157.65, 161.45, 156.75, 160.3, 21300, 1400150], ['2022-04-13T12:47:00+0530', 160.55, 161.95, 159.25, 160.55, 33450, 1406500], ['2022-04-13T12:48:00+0530', 160.4, 161.5, 159.4, 161.45, 31800, 1406500], ['2022-04-13T12:49:00+0530', 161.25, 161.45, 157.2, 157.6, 25000, 1406500], ['2022-04-13T12:50:00+0530', 157.9, 158.15, 154.2, 157.35, 46250, 1406500], ['2022-04-13T12:51:00+0530', 157.45, 158.1, 156.85, 157, 28200, 1430500], ['2022-04-13T12:52:00+0530', 156.65, 157.85, 152.95, 153.1, 30950, 1430500], ['2022-04-13T12:53:00+0530', 152.5, 153.2, 150.05, 150.65, 40500, 1430500], ['2022-04-13T12:54:00+0530', 150.65, 151.7, 149.8, 150.6, 47150, 1433350], ['2022-04-13T12:55:00+0530', 150.95, 151, 148, 148.3, 39150, 1433350], ['2022-04-13T12:56:00+0530', 148.65, 153.1, 147.15, 152.85, 55700, 1433350], ['2022-04-13T12:57:00+0530', 152.85, 154, 151.5, 153.3, 36100, 1460200], ['2022-04-13T12:58:00+0530', 153.45, 157.5, 152.9, 152.9, 39950, 1460200], ['2022-04-13T12:59:00+0530', 152.4, 154, 150.8, 154, 25650, 1460200], ['2022-04-13T13:00:00+0530', 154.45, 155, 152.05, 154.15, 36100, 1475500], ['2022-04-13T13:01:00+0530', 154.35, 154.45, 150.95, 151.45, 55650, 1475500], ['2022-04-13T13:02:00+0530', 151.75, 153.2, 149.2, 153.1, 41450, 1475500], ['2022-04-13T13:03:00+0530', 152.5, 153.1, 149.3, 150.1, 37200, 1484750], ['2022-04-13T13:04:00+0530', 149.85, 150.2, 147.1, 149.55, 64950, 1484750], ['2022-04-13T13:05:00+0530', 149.55, 151.95, 147.1, 150.4, 59350, 1484750], ['2022-04-13T13:06:00+0530', 150.95, 153.8, 150.25, 153.8, 60700, 1508750], ['2022-04-13T13:07:00+0530', 153.25, 154.7, 152.25, 153.55, 53800, 1508750], ['2022-04-13T13:08:00+0530', 153.4, 155.35, 152.9, 155.35, 26150, 1508750], ['2022-04-13T13:09:00+0530', 154.35, 157.55, 154, 155.6, 48100, 1502650], ['2022-04-13T13:10:00+0530', 155.05, 159, 154.5, 159, 63750, 1502650], ['2022-04-13T13:11:00+0530', 159.45, 162.95, 158, 162.45, 97450, 1502650], ['2022-04-13T13:12:00+0530', 162.55, 167.05, 162.35, 165.65, 165950, 1478050], ['2022-04-13T13:13:00+0530', 165.45, 165.8, 162.75, 164.95, 65050, 1478050], ['2022-04-13T13:14:00+0530', 165, 166.6, 162.2, 166.6, 52300, 1478050], ['2022-04-13T13:15:00+0530', 166.65, 170.5, 166.15, 168.6, 123000, 1501900], ['2022-04-13T13:16:00+0530', 168.1, 169.15, 165.75, 168.65, 51150, 1501900], ['2022-04-13T13:17:00+0530', 168.55, 169, 166.6, 168.6, 49500, 1501900], ['2022-04-13T13:18:00+0530', 168.6, 168.65, 163.5, 163.7, 49900, 1500300], ['2022-04-13T13:19:00+0530', 164.05, 167.95, 163.65, 167.45, 40950, 1500300], ['2022-04-13T13:20:00+0530', 168, 169.8, 165.45, 167.3, 78100, 1500300], ['2022-04-13T13:21:00+0530', 167.3, 169.65, 167.05, 168.6, 30950, 1515250], ['2022-04-13T13:22:00+0530', 168.95, 168.95, 159.8, 161.2, 70500, 1515250], ['2022-04-13T13:23:00+0530', 161.2, 162.15, 159.7, 161.55, 35250, 1515250], ['2022-04-13T13:24:00+0530', 162.65, 163.25, 160.75, 163.25, 20850, 1522000], ['2022-04-13T13:25:00+0530', 163.3, 163.6, 157.95, 158.05, 61550, 1522000], ['2022-04-13T13:26:00+0530', 157.9, 159.35, 154.45, 156.5, 81200, 1522000], ['2022-04-13T13:27:00+0530', 157.6, 158.85, 156.55, 158.85, 32250, 1551450], ['2022-04-13T13:28:00+0530', 158.6, 160, 156.7, 157, 39850, 1551450], ['2022-04-13T13:29:00+0530', 157.6, 158.4, 154.55, 157.25, 33300, 1551450], ['2022-04-13T13:30:00+0530', 157.45, 157.45, 155.25, 156.45, 21800, 1572900], ['2022-04-13T13:31:00+0530', 156.2, 159.3, 156.2, 157.05, 35850, 1572900], ['2022-04-13T13:32:00+0530', 157, 161, 157, 160, 47800, 1572900], ['2022-04-13T13:33:00+0530', 160.8, 163.95, 159.95, 162.4, 46450, 1586550], ['2022-04-13T13:34:00+0530', 161.85, 162.45, 157.5, 157.7, 28300, 1586550], ['2022-04-13T13:35:00+0530', 157.65, 161.5, 157.6, 161.5, 26400, 1586550], ['2022-04-13T13:36:00+0530', 161.4, 162, 160.25, 160.8, 13800, 1597350], ['2022-04-13T13:37:00+0530', 160.8, 161, 158.75, 159.65, 20550, 1597350], ['2022-04-13T13:38:00+0530', 160.35, 162, 159.9, 162, 32650, 1597350], ['2022-04-13T13:39:00+0530', 162, 162, 155.5, 157.5, 35700, 1608150], ['2022-04-13T13:40:00+0530', 158, 158.45, 156, 158.15, 42900, 1608150], ['2022-04-13T13:41:00+0530', 158.2, 158.4, 150.15, 151.2, 54350, 1608150], ['2022-04-13T13:42:00+0530', 152.1, 155.45, 151.2, 154.2, 45100, 1626550], ['2022-04-13T13:43:00+0530', 154.15, 155.9, 153.4, 154.55, 21450, 1626550], ['2022-04-13T13:44:00+0530', 154.55, 155.4, 153.65, 154.95, 24900, 1626550], ['2022-04-13T13:45:00+0530', 155, 157.4, 154.7, 155.8, 27900, 1643500], ['2022-04-13T13:46:00+0530', 155.95, 156.15, 152.05, 154.2, 25250, 1643500], ['2022-04-13T13:47:00+0530', 155, 155.65, 152.95, 153.5, 31100, 1643500], ['2022-04-13T13:48:00+0530', 153.8, 154.15, 151.35, 151.35, 18950, 1631550], ['2022-04-13T13:49:00+0530', 151.5, 151.75, 148, 149.05, 68150, 1631550], ['2022-04-13T13:50:00+0530', 148.75, 150.9, 147.1, 148.7, 50400, 1631550], ['2022-04-13T13:51:00+0530', 148.8, 151.8, 148.75, 150.8, 24750, 1649300], ['2022-04-13T13:52:00+0530', 151, 151.5, 149.9, 151.5, 22050, 1649300], ['2022-04-13T13:53:00+0530', 151.6, 152.95, 150.85, 152.1, 37250, 1649300], ['2022-04-13T13:54:00+0530', 152.2, 156.95, 149.8, 156.25, 63050, 1658350], ['2022-04-13T13:55:00+0530', 156.1, 156.9, 153.3, 154.85, 27450, 1658350], ['2022-04-13T13:56:00+0530', 154.3, 154.9, 151.3, 152.95, 30050, 1658350], ['2022-04-13T13:57:00+0530', 153.05, 153.7, 151.15, 152.65, 16150, 1660900], ['2022-04-13T13:58:00+0530', 153.2, 153.3, 151.8, 152.55, 12550, 1660900], ['2022-04-13T13:59:00+0530', 153, 154.3, 150.1, 153.25, 20100, 1660900], ['2022-04-13T14:00:00+0530', 153.3, 153.9, 149.35, 149.6, 30650, 1664400], ['2022-04-13T14:01:00+0530', 149.4, 160.85, 148, 160.85, 88300, 1664400], ['2022-04-13T14:02:00+0530', 161.65, 162, 154.75, 157.4, 76200, 1664400], ['2022-04-13T14:03:00+0530', 157.9, 160, 156.8, 157.95, 67500, 1673750], ['2022-04-13T14:04:00+0530', 158.6, 159, 155.8, 155.8, 27500, 1673750], ['2022-04-13T14:05:00+0530', 156.1, 157.45, 153.3, 154.75, 50000, 1673750], ['2022-04-13T14:06:00+0530', 154.05, 156.3, 153.65, 155.25, 44000, 1711400], ['2022-04-13T14:07:00+0530', 155.4, 157.95, 154.75, 157.95, 33400, 1711400], ['2022-04-13T14:08:00+0530', 157.35, 159, 156.3, 157.2, 29650, 1711400], ['2022-04-13T14:09:00+0530', 156.8, 160.8, 156.05, 156.8, 50850, 1734250], ['2022-04-13T14:10:00+0530', 156, 156.8, 154.2, 155.65, 38600, 1734250], ['2022-04-13T14:11:00+0530', 155.2, 159.8, 154.6, 157.4, 40850, 1734250], ['2022-04-13T14:12:00+0530', 158.1, 162, 157.75, 159.7, 63300, 1743200], ['2022-04-13T14:13:00+0530', 160.95, 161.65, 159.1, 160.35, 41400, 1743200], ['2022-04-13T14:14:00+0530', 160.1, 162.85, 160, 162.2, 43150, 1743200], ['2022-04-13T14:15:00+0530', 162.35, 163.95, 161.15, 162.75, 49150, 1733500], ['2022-04-13T14:16:00+0530', 162.05, 169, 161.7, 165.95, 125450, 1733500], ['2022-04-13T14:17:00+0530', 165.05, 169.6, 164, 168.25, 113700, 1733500], ['2022-04-13T14:18:00+0530', 168.4, 170.9, 166.6, 167, 108100, 1713800], ['2022-04-13T14:19:00+0530', 166.7, 167.8, 163.55, 165, 48400, 1713800], ['2022-04-13T14:20:00+0530', 165.4, 166, 156.85, 156.95, 63600, 1713800], ['2022-04-13T14:21:00+0530', 157.55, 164.65, 157.2, 163.1, 54400, 1699200], ['2022-04-13T14:22:00+0530', 163.1, 163.45, 159.35, 159.4, 51600, 1699200], ['2022-04-13T14:23:00+0530', 159.6, 163.1, 159.45, 162.6, 31900, 1699200], ['2022-04-13T14:24:00+0530', 161.9, 162.6, 156.45, 158.05, 68250, 1714850], ['2022-04-13T14:25:00+0530', 158.75, 159.65, 151.1, 152.55, 86050, 1714850], ['2022-04-13T14:26:00+0530', 152.1, 154.45, 149.2, 154.45, 125600, 1714850], ['2022-04-13T14:27:00+0530', 153.85, 158, 153.35, 155.95, 57350, 1744650], ['2022-04-13T14:28:00+0530', 155.75, 160.55, 155.7, 159.2, 51950, 1744650], ['2022-04-13T14:29:00+0530', 158.65, 161, 157.35, 158.75, 52100, 1744650], ['2022-04-13T14:30:00+0530', 159.15, 163, 158.65, 159.6, 83150, 1736650], ['2022-04-13T14:31:00+0530', 159.95, 161, 157.7, 160, 32300, 1736650], ['2022-04-13T14:32:00+0530', 160.05, 161, 158.1, 158.8, 51450, 1736650], ['2022-04-13T14:33:00+0530', 158.65, 159, 155.2, 156.7, 28550, 1751950], ['2022-04-13T14:34:00+0530', 156.7, 157.5, 152.05, 156.1, 41200, 1751950], ['2022-04-13T14:35:00+0530', 155.7, 156.5, 153.5, 156, 28750, 1751950], ['2022-04-13T14:36:00+0530', 156.5, 162, 155.25, 157.3, 29200, 1751200], ['2022-04-13T14:37:00+0530', 157.3, 161, 156.3, 156.6, 41450, 1751200], ['2022-04-13T14:38:00+0530', 156.65, 158.7, 155.8, 157.7, 61550, 1751200], ['2022-04-13T14:39:00+0530', 157.55, 159, 156.95, 157.45, 36100, 1772800], ['2022-04-13T14:40:00+0530', 158.25, 161.2, 156.6, 160.95, 59900, 1772800], ['2022-04-13T14:41:00+0530', 161, 163.1, 159.9, 161.55, 47100, 1772800], ['2022-04-13T14:42:00+0530', 161.5, 167, 159.7, 166.2, 84500, 1772550], ['2022-04-13T14:43:00+0530', 165.45, 166.2, 162.75, 164.45, 87200, 1772550], ['2022-04-13T14:44:00+0530', 164.95, 166.85, 163, 163.7, 46700, 1772550], ['2022-04-13T14:45:00+0530', 165, 165.9, 161.05, 163.45, 48450, 1759800], ['2022-04-13T14:46:00+0530', 163.1, 164.15, 158, 159.3, 59750, 1759800], ['2022-04-13T14:47:00+0530', 159.2, 160.95, 158.15, 159.45, 29900, 1759800], ['2022-04-13T14:48:00+0530', 158.95, 160.2, 155.9, 158.55, 42850, 1760150], ['2022-04-13T14:49:00+0530', 158.9, 158.95, 156.8, 158.05, 27750, 1760150], ['2022-04-13T14:50:00+0530', 158.05, 160.5, 157.2, 158.55, 27350, 1760150], ['2022-04-13T14:51:00+0530', 158.55, 159.9, 157, 158.85, 24700, 1763550], ['2022-04-13T14:52:00+0530', 158.8, 161.6, 157.55, 157.55, 42800, 1763550], ['2022-04-13T14:53:00+0530', 158, 159.5, 157.1, 157.45, 26300, 1763550], ['2022-04-13T14:54:00+0530', 157.4, 158.95, 156, 157.55, 40500, 1761100], ['2022-04-13T14:55:00+0530', 158.4, 160.9, 157.55, 160.75, 59400, 1761100], ['2022-04-13T14:56:00+0530', 160.75, 162.95, 159.3, 162.95, 61450, 1761100], ['2022-04-13T14:57:00+0530', 162.3, 163.55, 160.85, 162.95, 42250, 1777750], ['2022-04-13T14:58:00+0530', 162.9, 162.95, 156.45, 156.95, 51500, 1777750], ['2022-04-13T14:59:00+0530', 156.95, 157.05, 150.4, 151.05, 91850, 1777750], ['2022-04-13T15:00:00+0530', 150.65, 155, 146.05, 146.3, 131150, 1792050], ['2022-04-13T15:01:00+0530', 148.6, 148.85, 142, 146.45, 206550, 1792050], ['2022-04-13T15:02:00+0530', 147.4, 147.85, 144, 144.95, 109400, 1792050], ['2022-04-13T15:03:00+0530', 145, 145, 136.7, 139.45, 177400, 1812650], ['2022-04-13T15:04:00+0530', 139.6, 142, 138.35, 142, 75350, 1812650], ['2022-04-13T15:05:00+0530', 142.65, 144.9, 141.95, 144.9, 175850, 1812650], ['2022-04-13T15:06:00+0530', 144.15, 146.75, 144.15, 146.75, 129400, 1818250], ['2022-04-13T15:07:00+0530', 146.3, 147.85, 145.8, 146.45, 86550, 1818250], ['2022-04-13T15:08:00+0530', 146.2, 147, 139.2, 139.3, 193350, 1818250], ['2022-04-13T15:09:00+0530', 139.85, 139.95, 135.65, 139.15, 116400, 1902150], ['2022-04-13T15:10:00+0530', 140.95, 143, 138, 139.05, 99400, 1902150], ['2022-04-13T15:11:00+0530', 138.7, 141.25, 137, 139.65, 85150, 1902150], ['2022-04-13T15:12:00+0530', 140.15, 140.8, 138.1, 138.6, 64100, 1924900], ['2022-04-13T15:13:00+0530', 138.3, 139.6, 133.45, 135.15, 172850, 1924900], ['2022-04-13T15:14:00+0530', 135, 136, 134.25, 134.45, 78300, 1924900], ['2022-04-13T15:15:00+0530', 134.8, 136.25, 132.35, 133.2, 116000, 1901600], ['2022-04-13T15:16:00+0530', 133.65, 137.5, 133.15, 136.45, 126250, 1901600], ['2022-04-13T15:17:00+0530', 136.4, 139.65, 135.1, 139, 124800, 1901600], ['2022-04-13T15:18:00+0530', 139, 141, 138.1, 140.8, 177350, 1910550], ['2022-04-13T15:19:00+0530', 140.65, 142.3, 137.5, 138.1, 165150, 1910550], ['2022-04-13T15:20:00+0530', 138.45, 138.65, 135, 135.9, 172200, 1910550], ['2022-04-13T15:21:00+0530', 135.45, 136.8, 133.2, 136.4, 144950, 1945650], ['2022-04-13T15:22:00+0530', 136.55, 138.6, 136.2, 137.75, 115100, 1945650], ['2022-04-13T15:23:00+0530', 137.8, 139.45, 137.25, 137.75, 68950, 1945650], ['2022-04-13T15:24:00+0530', 137.4, 138.3, 136.2, 136.55, 115650, 1980750], ['2022-04-13T15:25:00+0530', 136.45, 137.8, 136.05, 137.1, 176700, 1980750], ['2022-04-13T15:26:00+0530', 136.55, 137.15, 133.35, 133.95, 95250, 1980750], ['2022-04-13T15:27:00+0530', 133.65, 138, 132.05, 136.45, 421850, 2028950], ['2022-04-13T15:28:00+0530', 136.5, 137.5, 135.1, 137.15, 155200, 2028950], ['2022-04-13T15:29:00+0530', 136.85, 137.15, 134.4, 136, 206200, 2028950]]}
2025-04-08 23:41:54,157 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:41:54] "[31m[1mPOST /admin/api/vector-db/collections/query_embeddings/upload HTTP/1.1[0m" 400 -
2025-04-08 23:42:39,707 - DEBUG - [vector_db_routes.py:53] - Vector database management page requested
2025-04-08 23:42:39,729 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:42:39] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 23:42:40,082 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:42:40] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-08 23:42:40,339 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:42:40] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 23:42:40,449 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:42:40] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 23:42:42,068 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:42:42] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 23:42:42,429 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:42:42] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 23:47:42,154 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 23:47:42,157 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 23:47:42,168 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 23:47:43,172 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-08 23:47:43,173 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-08 23:47:43,173 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 23:47:43,174 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-08 23:47:43,174 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 23:47:43,174 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-08 23:47:43,175 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 23:47:43,175 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-08 23:47:43,175 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 23:47:43,175 - INFO - [database.py:258] - Closing database connection
2025-04-08 23:47:43,176 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-08 23:47:43,176 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-08 23:47:44,516 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-08 23:47:52,738 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 23:47:52,739 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 23:47:52,740 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 23:47:52,740 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 23:47:52,742 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 23:47:52,764 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 23:47:52,791 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 23:47:52,791 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 23:47:52,887 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 23:47:52,888 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 23:47:52,888 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 23:47:52,889 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 23:47:52,889 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 23:47:52,890 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 23:47:52,890 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 23:47:52,960 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 23:47:52,960 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 23:47:52,961 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 23:47:52,961 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 23:47:52,961 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 23:47:52,961 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 23:47:52,962 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 23:47:53,037 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 23:47:53,038 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 23:47:53,048 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 23:47:53,049 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 23:47:53,049 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 23:47:53,049 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-08 23:47:53,050 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 23:47:53,050 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 23:47:53,129 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 23:47:53,130 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-08 23:47:53,130 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 23:47:53,130 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 23:47:53,131 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 23:47:53,132 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 23:47:53,133 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 23:47:53,133 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 23:47:53,214 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-08 23:47:53,215 - INFO - [_internal.py:224] -  * Debugger PIN: 501-040-382
2025-04-08 23:47:54,405 - DEBUG - [vector_db_routes.py:53] - Vector database management page requested
2025-04-08 23:47:54,447 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:47:54] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 23:47:54,582 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-08 23:47:55,650 - DEBUG - [milvus_client.py:728] - Created new connection using: 9c834d5ec175473abede3325023fceb5
2025-04-08 23:47:55,650 - INFO - [vector_store.py:42] - Vector database connection established in 1.07s
2025-04-08 23:47:55,654 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-08 23:47:55,657 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:47:55] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 23:47:55,993 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:47:55] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 23:47:57,041 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:47:57] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 23:47:57,399 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:47:57] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 23:48:02,100 - INFO - [vector_db_routes.py:379] - Loading embedding model...
2025-04-08 23:48:04,593 - INFO - [vector_db_routes.py:381] - Embedding model loaded in 2.49s
2025-04-08 23:48:04,739 - DEBUG - [vector_db_routes.py:418] - Search output fields for query_embeddings: ['id']
2025-04-08 23:48:04,754 - INFO - [vector_db_routes.py:432] - data: ['[{\'id\': 1, \'distance\': 0.5864652991294861, \'entity\': {\'query_text\': \'get me all the customers\', \'sql_query\': \'SELECT * FROM customers;\', \'results_summary\': \'Returned 5 rows with 11 columns\', \'workspace\': \'dfd\', \'feedback_rating\': 1, \'tables_used\': \'\', \'is_manual_sample\': False, \'created_at\': \'2025-04-05 15:17:11\', \'id\': 1}}, {\'id\': 2, \'distance\': 0.32053738832473755, \'entity\': {\'query_text\': \'get me count of customers by order month\', \'sql_query\': "SELECT \\n    strftime(\'%Y-%m\', o.order_date) AS order_month,\\n    COUNT(DISTINCT c.customer_id) AS customer_count\\nFROM \\n    customers c\\nINNER JOIN \\n    orders o ON c.customer_id = o.customer_id\\nGROUP BY \\n    order_month\\nORDER BY \\n    order_month;", \'results_summary\': \'Returned 2 rows with 2 columns\', \'workspace\': \'dfd\', \'feedback_rating\': 1, \'tables_used\': \'\', \'is_manual_sample\': True, \'created_at\': \'2025-04-07 23:50:45\', \'id\': 2}}, {\'id\': 3, \'distance\': 0.258071631193161, \'entity\': {\'query_text\': \'@customers @order_items \', \'sql_query\': \'SELECT \\n    *\\nFROM \\n    customers c,\\n    order_items oi;\', \'results_summary\': \'Returned 55 rows with 16 columns\', \'workspace\': \'dfd\', \'feedback_rating\': 0, \'tables_used\': \'customers,order_items\', \'is_manual_sample\': False, \'created_at\': \'2025-04-06 11:33:46\', \'id\': 3}}]'] 
2025-04-08 23:48:04,754 - DEBUG - [vector_db_routes.py:465] - First search result: {'query_text': 'get me all the customers', 'sql_query': 'SELECT * FROM customers;', 'results_summary': 'Returned 5 rows with 11 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'tables_used': '', 'is_manual_sample': False, 'created_at': '2025-04-05 15:17:11', 'id': 1, 'similarity': 0.5864652991294861}
2025-04-08 23:48:04,754 - DEBUG - [vector_db_routes.py:466] - Fields in first result: ['query_text', 'sql_query', 'results_summary', 'workspace', 'feedback_rating', 'tables_used', 'is_manual_sample', 'created_at', 'id', 'similarity']
2025-04-08 23:48:04,755 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:48:04] "POST /admin/api/vector-db/collections/query_embeddings/search HTTP/1.1" 200 -
2025-04-08 23:49:36,094 - INFO - [vector_db_routes.py:488] - Upload attempt to collection: query_embeddings
2025-04-08 23:49:36,095 - INFO - [vector_db_routes.py:489] - Form data: ImmutableMultiDict([('text_field_name', 'query_text')])
2025-04-08 23:49:36,096 - INFO - [vector_db_routes.py:490] - Files: dict_keys(['file'])
2025-04-08 23:49:36,096 - INFO - [vector_db_routes.py:508] - Processing file: file_json.json for collection: query_embeddings
2025-04-08 23:49:36,099 - INFO - [vector_db_routes.py:539] - Available collections: ['query_embeddings']
2025-04-08 23:49:36,099 - INFO - [vector_db_routes.py:557] - Processing file with extension: json
2025-04-08 23:49:36,100 - INFO - [vector_db_routes.py:592] - Processing JSON file
2025-04-08 23:49:36,100 - DEBUG - [vector_db_routes.py:596] - JSON content length: 271 characters
2025-04-08 23:49:36,100 - DEBUG - [vector_db_routes.py:600] - JSON content preview: {"query_text": "get me all the customers", "sql_query": "SELECT * FROM customers;", "results_summary": "Returned 5 rows with 11 columns", "workspace": "dfd", "feedback_rating": 1, "tables_used": "", "...
2025-04-08 23:49:36,101 - ERROR - [vector_db_routes.py:606] - JSON parsing error: Expecting value: line 1 column 220 (char 219)
2025-04-08 23:49:36,102 - ERROR - [vector_db_routes.py:607] - Error at line 1, column 220
2025-04-08 23:49:36,103 - ERROR - [vector_db_routes.py:608] - Error document position: 219
2025-04-08 23:49:36,103 - ERROR - [vector_db_routes.py:613] - Context around error: '...ating": 1, "tables_used": "", "is_manual_sample": False, "created_at": "2025-04-05 15:17:11", "id": ...'
2025-04-08 23:49:36,104 - ERROR - [vector_db_routes.py:636] - Error processing JSON file: Expecting value: line 1 column 220 (char 219)
2025-04-08 23:49:36,104 - ERROR - [vector_db_routes.py:640] - Fatal error processing file file_json.json: cannot access local variable 'traceback' where it is not associated with a value
2025-04-08 23:49:36,106 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:49:36] "[31m[1mPOST /admin/api/vector-db/collections/query_embeddings/upload HTTP/1.1[0m" 400 -
2025-04-08 23:50:30,732 - INFO - [vector_db_routes.py:488] - Upload attempt to collection: query_embeddings
2025-04-08 23:50:30,733 - INFO - [vector_db_routes.py:489] - Form data: ImmutableMultiDict([('text_field_name', 'query_text')])
2025-04-08 23:50:30,733 - INFO - [vector_db_routes.py:490] - Files: dict_keys(['file'])
2025-04-08 23:50:30,733 - INFO - [vector_db_routes.py:508] - Processing file: file_json.json for collection: query_embeddings
2025-04-08 23:50:30,735 - INFO - [vector_db_routes.py:539] - Available collections: ['query_embeddings']
2025-04-08 23:50:30,736 - INFO - [vector_db_routes.py:557] - Processing file with extension: json
2025-04-08 23:50:30,736 - INFO - [vector_db_routes.py:592] - Processing JSON file
2025-04-08 23:50:30,736 - DEBUG - [vector_db_routes.py:596] - JSON content length: 273 characters
2025-04-08 23:50:30,737 - DEBUG - [vector_db_routes.py:600] - JSON content preview: {"query_text": "get me all the customers", "sql_query": "SELECT * FROM customers;", "results_summary": "Returned 5 rows with 11 columns", "workspace": "dfd", "feedback_rating": 1, "tables_used": "", "...
2025-04-08 23:50:30,737 - INFO - [vector_db_routes.py:622] - Extracted 1 record from JSON object
2025-04-08 23:50:30,737 - DEBUG - [vector_db_routes.py:628] - Sample record keys: ['query_text', 'sql_query', 'results_summary', 'workspace', 'feedback_rating', 'tables_used', 'is_manual_sample', 'created_at', 'id']
2025-04-08 23:50:30,738 - DEBUG - [vector_db_routes.py:632] - Field 'query_text': str = get me all the customers
2025-04-08 23:50:30,738 - DEBUG - [vector_db_routes.py:632] - Field 'sql_query': str = SELECT * FROM customers;
2025-04-08 23:50:30,739 - DEBUG - [vector_db_routes.py:632] - Field 'results_summary': str = Returned 5 rows with 11 columns
2025-04-08 23:50:30,739 - DEBUG - [vector_db_routes.py:632] - Field 'workspace': str = dfd
2025-04-08 23:50:30,739 - DEBUG - [vector_db_routes.py:632] - Field 'feedback_rating': int = 1
2025-04-08 23:50:30,739 - DEBUG - [vector_db_routes.py:632] - Field 'tables_used': str = 
2025-04-08 23:50:30,740 - DEBUG - [vector_db_routes.py:632] - Field 'is_manual_sample': str = False
2025-04-08 23:50:30,740 - DEBUG - [vector_db_routes.py:632] - Field 'created_at': str = 2025-04-05 15:17:11
2025-04-08 23:50:30,740 - DEBUG - [vector_db_routes.py:632] - Field 'id': int = 1
2025-04-08 23:50:30,743 - DEBUG - [vector_db_routes.py:686] - First record structure: {'query_text': 'get me all the customers', 'sql_query': 'SELECT * FROM customers;', 'results_summary': 'Returned 5 rows with 11 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'tables_used': '', 'is_manual_sample': 'False', 'created_at': '2025-04-05 15:17:11', 'id': 1}
2025-04-08 23:50:30,743 - DEBUG - [vector_db_routes.py:687] - First record keys: ['query_text', 'sql_query', 'results_summary', 'workspace', 'feedback_rating', 'tables_used', 'is_manual_sample', 'created_at', 'id']
2025-04-08 23:50:30,743 - DEBUG - [vector_db_routes.py:688] - Looking for text field: 'query_text'
2025-04-08 23:50:30,745 - DEBUG - [vector_db_routes.py:694] - Collection schema fields: []
2025-04-08 23:50:30,745 - DEBUG - [vector_db_routes.py:717] - Generating embedding for text: 'get me all the customers...' (truncated)
2025-04-08 23:50:30,775 - DEBUG - [vector_db_routes.py:726] - Inserting data with fields: ['vector', 'query_text', 'sql_query', 'results_summary', 'workspace', 'feedback_rating', 'tables_used', 'is_manual_sample', 'created_at', 'id']
2025-04-08 23:50:30,785 - DEBUG - [vector_db_routes.py:731] - Insert result: {'insert_count': 1, 'ids': [1]}
2025-04-08 23:50:30,799 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:50:30] "POST /admin/api/vector-db/collections/query_embeddings/upload HTTP/1.1" 200 -
2025-04-08 23:50:31,147 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:50:31] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 23:50:31,150 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:50:31] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 23:50:43,120 - DEBUG - [vector_db_routes.py:53] - Vector database management page requested
2025-04-08 23:50:43,124 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:50:43] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 23:50:43,472 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:50:43] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 23:50:43,720 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:50:43] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 23:50:44,772 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:50:44] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 23:50:45,072 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:50:45] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 23:50:54,603 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:50:54] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 23:50:55,194 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:50:55] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 23:50:55,708 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:50:55] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 23:51:02,347 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:51:02] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0&filter=id%20%20%3E%201 HTTP/1.1" 200 -
2025-04-08 23:51:08,246 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:51:08] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 23:51:49,246 - DEBUG - [vector_db_routes.py:418] - Search output fields for query_embeddings: ['id']
2025-04-08 23:51:49,249 - INFO - [vector_db_routes.py:432] - data: ['[{\'id\': 1, \'distance\': 0.5589979887008667, \'entity\': {\'query_text\': \'get me all the customers\', \'sql_query\': \'SELECT * FROM customers;\', \'results_summary\': \'Returned 5 rows with 11 columns\', \'workspace\': \'dfd\', \'feedback_rating\': 1, \'tables_used\': \'\', \'is_manual_sample\': \'False\', \'created_at\': \'2025-04-05 15:17:11\', \'id\': 1}}, {\'id\': 2, \'distance\': 0.3433128595352173, \'entity\': {\'query_text\': \'get me count of customers by order month\', \'sql_query\': "SELECT \\n    strftime(\'%Y-%m\', o.order_date) AS order_month,\\n    COUNT(DISTINCT c.customer_id) AS customer_count\\nFROM \\n    customers c\\nINNER JOIN \\n    orders o ON c.customer_id = o.customer_id\\nGROUP BY \\n    order_month\\nORDER BY \\n    order_month;", \'results_summary\': \'Returned 2 rows with 2 columns\', \'workspace\': \'dfd\', \'feedback_rating\': 1, \'tables_used\': \'\', \'is_manual_sample\': True, \'created_at\': \'2025-04-07 23:50:45\', \'id\': 2}}, {\'id\': 3, \'distance\': 0.2955668866634369, \'entity\': {\'query_text\': \'@customers @order_items \', \'sql_query\': \'SELECT \\n    *\\nFROM \\n    customers c,\\n    order_items oi;\', \'results_summary\': \'Returned 55 rows with 16 columns\', \'workspace\': \'dfd\', \'feedback_rating\': 0, \'tables_used\': \'customers,order_items\', \'is_manual_sample\': False, \'created_at\': \'2025-04-06 11:33:46\', \'id\': 3}}]'] 
2025-04-08 23:51:49,249 - DEBUG - [vector_db_routes.py:465] - First search result: {'query_text': 'get me all the customers', 'sql_query': 'SELECT * FROM customers;', 'results_summary': 'Returned 5 rows with 11 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'tables_used': '', 'is_manual_sample': 'False', 'created_at': '2025-04-05 15:17:11', 'id': 1, 'similarity': 0.5589979887008667}
2025-04-08 23:51:49,250 - DEBUG - [vector_db_routes.py:466] - Fields in first result: ['query_text', 'sql_query', 'results_summary', 'workspace', 'feedback_rating', 'tables_used', 'is_manual_sample', 'created_at', 'id', 'similarity']
2025-04-08 23:51:49,251 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:51:49] "POST /admin/api/vector-db/collections/query_embeddings/search HTTP/1.1" 200 -
2025-04-08 23:52:08,223 - DEBUG - [vector_db_routes.py:53] - Vector database management page requested
2025-04-08 23:52:08,226 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:52:08] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 23:52:08,489 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:52:08] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 23:52:08,587 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:52:08] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 23:52:10,119 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:52:10] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 23:52:10,437 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:52:10] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 23:52:15,673 - DEBUG - [vector_db_routes.py:53] - Vector database management page requested
2025-04-08 23:52:15,677 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:52:15] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 23:52:15,939 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:52:15] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 23:52:16,049 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:52:16] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 23:52:17,906 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:52:17] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 23:52:18,218 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:52:18] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 23:55:18,593 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 23:55:18,606 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-08 23:55:19,608 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-08 23:55:19,608 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-08 23:55:19,608 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 23:55:19,608 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-08 23:55:19,609 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 23:55:19,609 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-08 23:55:19,609 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 23:55:19,609 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-08 23:55:19,609 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-08 23:55:19,609 - INFO - [database.py:258] - Closing database connection
2025-04-08 23:55:19,609 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-08 23:55:19,609 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-08 23:55:20,748 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-08 23:55:29,693 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 23:55:29,694 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 23:55:29,695 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 23:55:29,695 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 23:55:29,696 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-08 23:55:29,719 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 23:55:29,742 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 23:55:29,743 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 23:55:29,838 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 23:55:29,839 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 23:55:29,840 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 23:55:29,840 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 23:55:29,840 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 23:55:29,841 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 23:55:29,841 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 23:55:29,936 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 23:55:29,937 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 23:55:29,937 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 23:55:29,938 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 23:55:29,938 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 23:55:29,939 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 23:55:29,939 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 23:55:30,033 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 23:55:30,034 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 23:55:30,034 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 23:55:30,035 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 23:55:30,035 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 23:55:30,035 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-08 23:55:30,036 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-08 23:55:30,036 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-08 23:55:30,164 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-08 23:55:30,165 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-08 23:55:30,166 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-08 23:55:30,166 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-08 23:55:30,167 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-08 23:55:30,168 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-08 23:55:30,168 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-08 23:55:30,169 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-08 23:55:30,262 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-08 23:55:30,263 - INFO - [_internal.py:224] -  * Debugger PIN: 501-040-382
2025-04-08 23:55:31,886 - INFO - [vector_db_routes.py:489] - Upload attempt to collection: query_embeddings
2025-04-08 23:55:31,888 - INFO - [vector_db_routes.py:490] - Form data: ImmutableMultiDict([('text_field_name', 'query_text')])
2025-04-08 23:55:31,889 - INFO - [vector_db_routes.py:491] - Files: dict_keys(['file'])
2025-04-08 23:55:31,890 - INFO - [vector_db_routes.py:509] - Processing file: input.csv for collection: query_embeddings
2025-04-08 23:55:31,890 - ERROR - [vector_db_routes.py:530] - Vector store client not initialized for collection: query_embeddings
2025-04-08 23:55:31,892 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-08 23:55:32,939 - DEBUG - [milvus_client.py:728] - Created new connection using: 41d0af02e2844c79b86bf532446885e0
2025-04-08 23:55:32,939 - INFO - [vector_store.py:42] - Vector database connection established in 1.05s
2025-04-08 23:55:32,942 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-08 23:55:32,944 - INFO - [vector_db_routes.py:540] - Available collections: ['query_embeddings']
2025-04-08 23:55:32,944 - INFO - [vector_db_routes.py:552] - Loading embedding model...
2025-04-08 23:55:35,735 - INFO - [vector_db_routes.py:554] - Embedding model loaded in 2.79s
2025-04-08 23:55:35,736 - INFO - [vector_db_routes.py:558] - Processing file with extension: csv
2025-04-08 23:55:35,736 - INFO - [vector_db_routes.py:570] - Processing CSV file
2025-04-08 23:55:35,752 - DEBUG - [vector_db_routes.py:577] - CSV columns: ['name', 'age', 'income', 'Health']
2025-04-08 23:55:35,753 - DEBUG - [vector_db_routes.py:578] - CSV shape: (5, 4)
2025-04-08 23:55:35,757 - INFO - [vector_db_routes.py:580] - Extracted 5 records from CSV
2025-04-08 23:55:35,760 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:55:35] "[31m[1mPOST /admin/api/vector-db/collections/query_embeddings/upload HTTP/1.1[0m" 400 -
2025-04-08 23:55:45,377 - INFO - [vector_db_routes.py:489] - Upload attempt to collection: query_embeddings
2025-04-08 23:55:45,380 - INFO - [vector_db_routes.py:490] - Form data: ImmutableMultiDict([('text_field_name', 'query_text')])
2025-04-08 23:55:45,382 - INFO - [vector_db_routes.py:491] - Files: dict_keys(['file'])
2025-04-08 23:55:45,383 - INFO - [vector_db_routes.py:509] - Processing file: file_json.json for collection: query_embeddings
2025-04-08 23:55:45,387 - INFO - [vector_db_routes.py:540] - Available collections: ['query_embeddings']
2025-04-08 23:55:45,388 - INFO - [vector_db_routes.py:558] - Processing file with extension: json
2025-04-08 23:55:45,389 - INFO - [vector_db_routes.py:593] - Processing JSON file
2025-04-08 23:55:45,390 - DEBUG - [vector_db_routes.py:597] - JSON content length: 273 characters
2025-04-08 23:55:45,391 - DEBUG - [vector_db_routes.py:601] - JSON content preview: {"query_text": "get me all the customers", "sql_query": "SELECT * FROM customers;", "results_summary": "Returned 5 rows with 11 columns", "workspace": "dfd", "feedback_rating": 1, "tables_used": "", "...
2025-04-08 23:55:45,392 - INFO - [vector_db_routes.py:623] - Extracted 1 record from JSON object
2025-04-08 23:55:45,393 - DEBUG - [vector_db_routes.py:629] - Sample record keys: ['query_text', 'sql_query', 'results_summary', 'workspace', 'feedback_rating', 'tables_used', 'is_manual_sample', 'created_at', 'id']
2025-04-08 23:55:45,394 - DEBUG - [vector_db_routes.py:633] - Field 'query_text': str = get me all the customers
2025-04-08 23:55:45,395 - DEBUG - [vector_db_routes.py:633] - Field 'sql_query': str = SELECT * FROM customers;
2025-04-08 23:55:45,396 - DEBUG - [vector_db_routes.py:633] - Field 'results_summary': str = Returned 5 rows with 11 columns
2025-04-08 23:55:45,397 - DEBUG - [vector_db_routes.py:633] - Field 'workspace': str = dfd
2025-04-08 23:55:45,398 - DEBUG - [vector_db_routes.py:633] - Field 'feedback_rating': int = 1
2025-04-08 23:55:45,399 - DEBUG - [vector_db_routes.py:633] - Field 'tables_used': str = 
2025-04-08 23:55:45,399 - DEBUG - [vector_db_routes.py:633] - Field 'is_manual_sample': str = False
2025-04-08 23:55:45,400 - DEBUG - [vector_db_routes.py:633] - Field 'created_at': str = 2025-04-05 15:17:11
2025-04-08 23:55:45,400 - DEBUG - [vector_db_routes.py:633] - Field 'id': int = 1
2025-04-08 23:55:45,403 - DEBUG - [vector_db_routes.py:687] - First record structure: {'query_text': 'get me all the customers', 'sql_query': 'SELECT * FROM customers;', 'results_summary': 'Returned 5 rows with 11 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'tables_used': '', 'is_manual_sample': 'False', 'created_at': '2025-04-05 15:17:11', 'id': 1}
2025-04-08 23:55:45,403 - DEBUG - [vector_db_routes.py:688] - First record keys: ['query_text', 'sql_query', 'results_summary', 'workspace', 'feedback_rating', 'tables_used', 'is_manual_sample', 'created_at', 'id']
2025-04-08 23:55:45,403 - DEBUG - [vector_db_routes.py:689] - Looking for text field: 'query_text'
2025-04-08 23:55:45,406 - DEBUG - [vector_db_routes.py:695] - Collection schema fields: []
2025-04-08 23:55:45,406 - DEBUG - [vector_db_routes.py:718] - Generating embedding for text: 'get me all the customers...' (truncated)
2025-04-08 23:55:45,428 - DEBUG - [vector_db_routes.py:727] - Inserting data with fields: ['vector', 'query_text', 'sql_query', 'results_summary', 'workspace', 'feedback_rating', 'tables_used', 'is_manual_sample', 'created_at', 'id']
2025-04-08 23:55:45,476 - DEBUG - [vector_db_routes.py:732] - Insert result: {'insert_count': 1, 'ids': [1]}
2025-04-08 23:55:45,476 - INFO - [vector_db_routes.py:753] - Flushing changes to collection query_embeddings
2025-04-08 23:55:45,478 - INFO - [vector_db_routes.py:757] - Flushed collection query_embeddings
2025-04-08 23:55:45,480 - INFO - [vector_db_routes.py:762] - Loaded collection query_embeddings
2025-04-08 23:55:45,481 - INFO - [vector_db_routes.py:766] - Running validation query on query_embeddings to ensure visibility
2025-04-08 23:55:45,483 - DEBUG - [vector_db_routes.py:773] - Validation query returned 1 records
2025-04-08 23:55:45,495 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:55:45] "POST /admin/api/vector-db/collections/query_embeddings/upload HTTP/1.1" 200 -
2025-04-08 23:55:45,830 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:55:45] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 23:55:45,835 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:55:45] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 23:55:59,640 - DEBUG - [vector_db_routes.py:53] - Vector database management page requested
2025-04-08 23:55:59,659 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:55:59] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 23:56:00,046 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:56:00] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 23:56:00,297 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:56:00] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 23:56:01,542 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:56:01] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 23:56:01,852 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:56:01] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-08 23:59:28,574 - DEBUG - [vector_db_routes.py:53] - Vector database management page requested
2025-04-08 23:59:28,579 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:59:28] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-08 23:59:28,834 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:59:28] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-08 23:59:28,956 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:59:28] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 23:59:30,287 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:59:30] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-08 23:59:30,594 - INFO - [_internal.py:224] - 127.0.0.1 - - [08/Apr/2025 23:59:30] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-09 00:01:06,190 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-09 00:01:06,191 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-09 00:01:06,201 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-09 00:01:07,203 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-09 00:01:07,203 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-09 00:01:07,203 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-09 00:01:07,203 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-09 00:01:07,204 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-09 00:01:07,204 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-09 00:01:07,204 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-09 00:01:07,204 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-09 00:01:07,204 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-09 00:01:07,205 - INFO - [database.py:258] - Closing database connection
2025-04-09 00:01:07,205 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-09 00:01:07,205 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-09 00:01:08,295 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-09 00:01:16,147 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 00:01:16,147 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 00:01:16,148 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 00:01:16,148 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 00:01:16,149 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-09 00:01:16,160 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-09 00:01:16,174 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-09 00:01:16,174 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-09 00:01:16,237 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-09 00:01:16,237 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 00:01:16,237 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 00:01:16,238 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 00:01:16,238 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 00:01:16,238 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-09 00:01:16,238 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-09 00:01:16,297 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-09 00:01:16,298 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 00:01:16,298 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 00:01:16,298 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 00:01:16,299 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 00:01:16,299 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-09 00:01:16,299 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-09 00:01:16,362 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-09 00:01:16,362 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 00:01:16,363 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 00:01:16,363 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 00:01:16,363 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 00:01:16,364 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-09 00:01:16,364 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-09 00:01:16,364 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-09 00:01:16,421 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-09 00:01:16,422 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-09 00:01:16,422 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-09 00:01:16,422 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 00:01:16,423 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 00:01:16,423 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 00:01:16,424 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 00:01:16,424 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-09 00:01:16,482 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-09 00:01:16,483 - INFO - [_internal.py:224] -  * Debugger PIN: 501-040-382
2025-04-09 00:01:17,384 - DEBUG - [vector_db_routes.py:53] - Vector database management page requested
2025-04-09 00:01:17,409 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:01:17] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-09 00:01:17,499 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-09 00:01:18,541 - DEBUG - [milvus_client.py:728] - Created new connection using: 612cf5e271fa4c8d863ca674df2bca57
2025-04-09 00:01:18,542 - INFO - [vector_store.py:42] - Vector database connection established in 1.04s
2025-04-09 00:01:18,545 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-09 00:01:18,548 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:01:18] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-09 00:01:18,880 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:01:18] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-09 00:01:19,774 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:01:19] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-09 00:01:20,138 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:01:20] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-09 00:01:28,357 - INFO - [vector_db_routes.py:489] - Upload attempt to collection: query_embeddings
2025-04-09 00:01:28,361 - INFO - [vector_db_routes.py:490] - Form data: ImmutableMultiDict([('text_field_name', 'query_text')])
2025-04-09 00:01:28,363 - INFO - [vector_db_routes.py:491] - Files: dict_keys(['file'])
2025-04-09 00:01:28,364 - INFO - [vector_db_routes.py:509] - Processing file: file_json.json for collection: query_embeddings
2025-04-09 00:01:28,367 - INFO - [vector_db_routes.py:540] - Available collections: ['query_embeddings']
2025-04-09 00:01:28,367 - INFO - [vector_db_routes.py:552] - Loading embedding model...
2025-04-09 00:01:31,046 - INFO - [vector_db_routes.py:554] - Embedding model loaded in 2.68s
2025-04-09 00:01:31,047 - INFO - [vector_db_routes.py:558] - Processing file with extension: json
2025-04-09 00:01:31,047 - INFO - [vector_db_routes.py:593] - Processing JSON file
2025-04-09 00:01:31,047 - DEBUG - [vector_db_routes.py:597] - JSON content length: 273 characters
2025-04-09 00:01:31,047 - DEBUG - [vector_db_routes.py:601] - JSON content preview: {"query_text": "get me all the customers", "sql_query": "SELECT * FROM customers;", "results_summary": "Returned 5 rows with 11 columns", "workspace": "dfd", "feedback_rating": 1, "tables_used": "", "...
2025-04-09 00:01:31,048 - INFO - [vector_db_routes.py:623] - Extracted 1 record from JSON object
2025-04-09 00:01:31,050 - DEBUG - [vector_db_routes.py:629] - Sample record keys: ['query_text', 'sql_query', 'results_summary', 'workspace', 'feedback_rating', 'tables_used', 'is_manual_sample', 'created_at', 'id']
2025-04-09 00:01:31,050 - DEBUG - [vector_db_routes.py:633] - Field 'query_text': str = get me all the customers
2025-04-09 00:01:31,051 - DEBUG - [vector_db_routes.py:633] - Field 'sql_query': str = SELECT * FROM customers;
2025-04-09 00:01:31,051 - DEBUG - [vector_db_routes.py:633] - Field 'results_summary': str = Returned 5 rows with 11 columns
2025-04-09 00:01:31,051 - DEBUG - [vector_db_routes.py:633] - Field 'workspace': str = dfd
2025-04-09 00:01:31,052 - DEBUG - [vector_db_routes.py:633] - Field 'feedback_rating': int = 1
2025-04-09 00:01:31,052 - DEBUG - [vector_db_routes.py:633] - Field 'tables_used': str = 
2025-04-09 00:01:31,052 - DEBUG - [vector_db_routes.py:633] - Field 'is_manual_sample': str = False
2025-04-09 00:01:31,053 - DEBUG - [vector_db_routes.py:633] - Field 'created_at': str = 2025-04-05 15:17:11
2025-04-09 00:01:31,053 - DEBUG - [vector_db_routes.py:633] - Field 'id': int = 1
2025-04-09 00:01:31,055 - DEBUG - [vector_db_routes.py:687] - First record structure: {'query_text': 'get me all the customers', 'sql_query': 'SELECT * FROM customers;', 'results_summary': 'Returned 5 rows with 11 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'tables_used': '', 'is_manual_sample': 'False', 'created_at': '2025-04-05 15:17:11', 'id': 1}
2025-04-09 00:01:31,055 - DEBUG - [vector_db_routes.py:688] - First record keys: ['query_text', 'sql_query', 'results_summary', 'workspace', 'feedback_rating', 'tables_used', 'is_manual_sample', 'created_at', 'id']
2025-04-09 00:01:31,056 - DEBUG - [vector_db_routes.py:689] - Looking for text field: 'query_text'
2025-04-09 00:01:31,058 - DEBUG - [vector_db_routes.py:695] - Collection schema fields: []
2025-04-09 00:01:31,058 - DEBUG - [vector_db_routes.py:718] - Generating embedding for text: 'get me all the customers...' (truncated)
2025-04-09 00:01:31,081 - DEBUG - [vector_db_routes.py:727] - Inserting data with fields: ['vector', 'query_text', 'sql_query', 'results_summary', 'workspace', 'feedback_rating', 'tables_used', 'is_manual_sample', 'created_at', 'id']
2025-04-09 00:01:31,097 - DEBUG - [vector_db_routes.py:732] - Insert result: {'insert_count': 1, 'ids': [1]}
2025-04-09 00:01:31,098 - INFO - [vector_db_routes.py:756] - Flushing changes to collection query_embeddings
2025-04-09 00:01:31,100 - INFO - [vector_db_routes.py:760] - Flushed collection query_embeddings
2025-04-09 00:01:31,102 - INFO - [vector_db_routes.py:765] - Loaded collection query_embeddings
2025-04-09 00:01:31,102 - INFO - [vector_db_routes.py:769] - Running validation query on query_embeddings to ensure visibility
2025-04-09 00:01:31,105 - DEBUG - [vector_db_routes.py:776] - Validation query returned 1 records
2025-04-09 00:01:31,118 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:01:31] "POST /admin/api/vector-db/collections/query_embeddings/upload HTTP/1.1" 200 -
2025-04-09 00:01:31,136 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:01:31] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-09 00:01:31,458 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:01:31] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-09 00:01:56,163 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-09 00:01:56,163 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-09 00:01:56,163 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-09 00:01:56,163 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-09 00:01:56,163 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-09 00:01:56,163 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-09 00:01:56,163 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-09 00:01:56,163 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-09 00:01:56,164 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-09 00:01:56,164 - INFO - [database.py:258] - Closing database connection
2025-04-09 00:01:56,164 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-09 00:01:56,164 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-09 00:01:56,386 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-09 00:01:56,387 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-09 00:01:56,387 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-09 00:01:56,387 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-09 00:01:56,388 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-09 00:01:56,388 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-09 00:01:56,388 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-09 00:01:56,388 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-09 00:01:56,389 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-09 00:01:56,389 - INFO - [database.py:258] - Closing database connection
2025-04-09 00:01:56,389 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-09 00:01:56,390 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-09 00:02:03,445 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 00:02:03,445 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 00:02:03,445 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 00:02:03,445 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 00:02:03,446 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-09 00:02:03,451 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-09 00:02:03,454 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-09 00:02:03,454 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-09 00:02:03,488 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-09 00:02:03,488 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 00:02:03,488 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 00:02:03,488 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 00:02:03,489 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 00:02:03,489 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-09 00:02:03,489 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-09 00:02:03,518 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-09 00:02:03,518 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 00:02:03,518 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 00:02:03,518 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 00:02:03,519 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 00:02:03,519 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-09 00:02:03,519 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-09 00:02:03,550 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-09 00:02:03,550 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 00:02:03,550 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 00:02:03,550 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 00:02:03,551 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 00:02:03,551 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-09 00:02:03,551 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-09 00:02:03,551 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-09 00:02:03,580 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-09 00:02:03,580 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-09 00:02:03,580 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-09 00:02:03,581 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 00:02:03,581 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 00:02:03,581 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 00:02:03,581 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 00:02:03,581 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-09 00:02:03,614 - INFO - [_internal.py:224] - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.27.251.157:5000
2025-04-09 00:02:03,614 - INFO - [_internal.py:224] - [33mPress CTRL+C to quit[0m
2025-04-09 00:02:03,617 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-09 00:02:09,929 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 00:02:09,930 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 00:02:09,930 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 00:02:09,930 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 00:02:09,931 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-09 00:02:09,940 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-09 00:02:09,945 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-09 00:02:09,946 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-09 00:02:10,001 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-09 00:02:10,002 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 00:02:10,002 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 00:02:10,002 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 00:02:10,002 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 00:02:10,003 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-09 00:02:10,003 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-09 00:02:10,053 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-09 00:02:10,053 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 00:02:10,054 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 00:02:10,054 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 00:02:10,054 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 00:02:10,054 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-09 00:02:10,054 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-09 00:02:10,105 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-09 00:02:10,106 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 00:02:10,106 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 00:02:10,106 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 00:02:10,106 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 00:02:10,107 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-09 00:02:10,107 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-09 00:02:10,107 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-09 00:02:10,156 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-09 00:02:10,156 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-09 00:02:10,157 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-09 00:02:10,157 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 00:02:10,157 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 00:02:10,157 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 00:02:10,158 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 00:02:10,158 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-09 00:02:10,207 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-09 00:02:10,207 - INFO - [_internal.py:224] -  * Debugger PIN: 501-040-382
2025-04-09 00:02:11,195 - DEBUG - [vector_db_routes.py:53] - Vector database management page requested
2025-04-09 00:02:11,224 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:02:11] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-09 00:02:11,302 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:02:11] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-09 00:02:11,620 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:02:11] "GET /static/js/admin/vector_db.js HTTP/1.1" 200 -
2025-04-09 00:02:11,949 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-09 00:02:11,984 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:02:11] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-04-09 00:02:12,987 - DEBUG - [milvus_client.py:728] - Created new connection using: 5f32074217564b06abeecbf18da5f169
2025-04-09 00:02:12,987 - INFO - [vector_store.py:42] - Vector database connection established in 1.04s
2025-04-09 00:02:12,990 - INFO - [vector_store.py:75] - Collection 'query_embeddings' already exists
2025-04-09 00:02:12,996 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:02:12] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-09 00:02:13,013 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:02:13] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-09 00:02:14,179 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:02:14] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-09 00:02:14,218 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:02:14] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-09 00:07:35,372 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/utils/vector_store.py', reloading
2025-04-09 00:07:35,377 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/utils/vector_store.py', reloading
2025-04-09 00:07:35,399 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/utils/vector_store.py', reloading
2025-04-09 00:07:36,401 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-09 00:07:36,401 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-09 00:07:36,402 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-09 00:07:36,402 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-09 00:07:36,402 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-09 00:07:36,403 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-09 00:07:36,403 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-09 00:07:36,403 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-09 00:07:36,404 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-09 00:07:36,404 - INFO - [database.py:258] - Closing database connection
2025-04-09 00:07:36,404 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-09 00:07:36,404 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-09 00:07:37,714 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-09 00:07:46,707 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 00:07:46,708 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 00:07:46,718 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 00:07:46,718 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 00:07:46,720 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-09 00:07:46,732 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-09 00:07:46,735 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-09 00:07:46,736 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-09 00:07:46,795 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-09 00:07:46,795 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 00:07:46,796 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 00:07:46,797 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 00:07:46,797 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 00:07:46,797 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-09 00:07:46,798 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-09 00:07:46,856 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-09 00:07:46,856 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 00:07:46,857 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 00:07:46,857 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 00:07:46,857 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 00:07:46,858 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-09 00:07:46,858 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-09 00:07:46,921 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-09 00:07:46,921 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 00:07:46,921 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 00:07:46,922 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 00:07:46,922 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 00:07:46,922 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-09 00:07:46,922 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-09 00:07:46,923 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-09 00:07:47,001 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-09 00:07:47,002 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-09 00:07:47,002 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-09 00:07:47,002 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 00:07:47,002 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 00:07:47,003 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 00:07:47,003 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 00:07:47,003 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-09 00:07:47,077 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-09 00:07:47,079 - INFO - [_internal.py:224] -  * Debugger PIN: 501-040-382
2025-04-09 00:08:34,451 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/utils/vector_store.py', reloading
2025-04-09 00:08:34,453 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/utils/vector_store.py', reloading
2025-04-09 00:08:34,499 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/utils/vector_store.py', reloading
2025-04-09 00:08:35,507 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-09 00:08:35,507 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-09 00:08:35,508 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-09 00:08:35,508 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-09 00:08:35,509 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-09 00:08:35,509 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-09 00:08:35,509 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-09 00:08:35,510 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-09 00:08:35,510 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-09 00:08:35,510 - INFO - [database.py:258] - Closing database connection
2025-04-09 00:08:35,511 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-09 00:08:35,511 - INFO - [vector_store.py:296] - Closing vector database connection
2025-04-09 00:08:36,896 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-09 00:08:42,230 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 00:08:42,231 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 00:08:42,231 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 00:08:42,231 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 00:08:42,232 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-09 00:08:42,242 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-09 00:08:42,245 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-09 00:08:42,245 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-09 00:08:42,294 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-09 00:08:42,295 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 00:08:42,295 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 00:08:42,295 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 00:08:42,295 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 00:08:42,296 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-09 00:08:42,296 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-09 00:08:42,342 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-09 00:08:42,342 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 00:08:42,343 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 00:08:42,343 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 00:08:42,343 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 00:08:42,343 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-09 00:08:42,343 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-09 00:08:42,391 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-09 00:08:42,391 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 00:08:42,392 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 00:08:42,392 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 00:08:42,392 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 00:08:42,392 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-09 00:08:42,393 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-09 00:08:42,393 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-09 00:08:42,454 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-09 00:08:42,454 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-09 00:08:42,454 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-09 00:08:42,454 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 00:08:42,455 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 00:08:42,455 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 00:08:42,455 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 00:08:42,455 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-09 00:08:42,502 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-09 00:08:42,502 - INFO - [_internal.py:224] -  * Debugger PIN: 501-040-382
2025-04-09 00:09:28,160 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/utils/vector_store.py', reloading
2025-04-09 00:09:28,161 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/utils/vector_store.py', reloading
2025-04-09 00:09:28,173 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/utils/vector_store.py', reloading
2025-04-09 00:09:29,175 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-09 00:09:29,175 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-09 00:09:29,176 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-09 00:09:29,176 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-09 00:09:29,176 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-09 00:09:29,176 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-09 00:09:29,177 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-09 00:09:29,177 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-09 00:09:29,177 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-09 00:09:29,177 - INFO - [database.py:258] - Closing database connection
2025-04-09 00:09:29,177 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-09 00:09:29,178 - INFO - [vector_store.py:323] - Closing vector database connection
2025-04-09 00:09:30,372 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-09 00:09:36,790 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 00:09:36,790 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 00:09:36,790 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 00:09:36,790 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 00:09:36,791 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-09 00:09:36,801 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-09 00:09:36,805 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-09 00:09:36,805 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-09 00:09:36,859 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-09 00:09:36,859 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 00:09:36,860 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 00:09:36,860 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 00:09:36,861 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 00:09:36,862 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-09 00:09:36,862 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-09 00:09:36,917 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-09 00:09:36,918 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 00:09:36,918 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 00:09:36,918 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 00:09:36,918 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 00:09:36,919 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-09 00:09:36,919 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-09 00:09:36,972 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-09 00:09:36,973 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 00:09:36,973 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 00:09:36,973 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 00:09:36,974 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 00:09:36,974 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-09 00:09:36,974 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-09 00:09:36,975 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-09 00:09:37,035 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-09 00:09:37,036 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-09 00:09:37,036 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-09 00:09:37,036 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 00:09:37,037 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 00:09:37,037 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 00:09:37,038 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 00:09:37,038 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-09 00:09:37,090 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-09 00:09:37,091 - INFO - [_internal.py:224] -  * Debugger PIN: 501-040-382
2025-04-09 00:11:18,453 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-09 00:11:18,454 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-09 00:11:18,529 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-09 00:11:19,530 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-09 00:11:19,531 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-09 00:11:19,531 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-09 00:11:19,531 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-09 00:11:19,532 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-09 00:11:19,532 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-09 00:11:19,532 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-09 00:11:19,533 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-09 00:11:19,533 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-09 00:11:19,533 - INFO - [database.py:258] - Closing database connection
2025-04-09 00:11:19,534 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-09 00:11:19,534 - INFO - [vector_store.py:340] - Closing vector database connection
2025-04-09 00:11:21,895 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-09 00:11:29,745 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 00:11:29,745 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 00:11:29,746 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 00:11:29,746 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 00:11:29,747 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-09 00:11:29,757 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-09 00:11:29,771 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-09 00:11:29,772 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-09 00:11:29,829 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-09 00:11:29,830 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 00:11:29,830 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 00:11:29,830 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 00:11:29,831 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 00:11:29,831 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-09 00:11:29,831 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-09 00:11:29,879 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-09 00:11:29,880 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 00:11:29,880 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 00:11:29,880 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 00:11:29,881 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 00:11:29,881 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-09 00:11:29,881 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-09 00:11:29,934 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-09 00:11:29,935 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 00:11:29,935 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 00:11:29,935 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 00:11:29,935 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 00:11:29,936 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-09 00:11:29,936 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-09 00:11:29,936 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-09 00:11:29,988 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-09 00:11:29,988 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-09 00:11:29,989 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-09 00:11:29,989 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 00:11:29,989 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 00:11:29,990 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 00:11:29,990 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 00:11:29,990 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-09 00:11:30,041 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-09 00:11:30,041 - INFO - [_internal.py:224] -  * Debugger PIN: 501-040-382
2025-04-09 00:11:40,285 - DEBUG - [vector_db_routes.py:53] - Vector database management page requested
2025-04-09 00:11:40,304 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:11:40] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-09 00:11:40,532 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:11:40] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-09 00:11:40,644 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-09 00:11:41,670 - DEBUG - [milvus_client.py:728] - Created new connection using: 8255c001e07047808a1798b5e25db6b4
2025-04-09 00:11:41,671 - INFO - [vector_store.py:42] - Vector database connection established in 1.03s
2025-04-09 00:11:41,673 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:11:41] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-09 00:11:41,692 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:11:41] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-09 00:11:43,809 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:11:43] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-09 00:11:43,811 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:11:43] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-09 00:11:49,227 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:11:49] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-09 00:12:28,892 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-09 00:12:28,894 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-09 00:12:28,907 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-09 00:12:29,909 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-09 00:12:29,910 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-09 00:12:29,910 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-09 00:12:29,910 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-09 00:12:29,910 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-09 00:12:29,911 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-09 00:12:29,911 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-09 00:12:29,911 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-09 00:12:29,912 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-09 00:12:29,912 - INFO - [database.py:258] - Closing database connection
2025-04-09 00:12:29,913 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-09 00:12:29,913 - INFO - [vector_store.py:340] - Closing vector database connection
2025-04-09 00:12:32,287 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-09 00:12:40,797 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 00:12:40,797 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 00:12:40,798 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 00:12:40,798 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 00:12:40,798 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-09 00:12:40,807 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-09 00:12:40,818 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-09 00:12:40,819 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-09 00:12:40,864 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-09 00:12:40,865 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 00:12:40,865 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 00:12:40,865 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 00:12:40,865 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 00:12:40,865 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-09 00:12:40,866 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-09 00:12:40,912 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-09 00:12:40,912 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 00:12:40,912 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 00:12:40,913 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 00:12:40,913 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 00:12:40,913 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-09 00:12:40,913 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-09 00:12:40,959 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-09 00:12:40,959 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 00:12:40,960 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 00:12:40,960 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 00:12:40,960 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 00:12:40,961 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-09 00:12:40,961 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-09 00:12:40,961 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-09 00:12:41,011 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-09 00:12:41,011 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-09 00:12:41,011 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-09 00:12:41,011 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 00:12:41,012 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 00:12:41,012 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 00:12:41,012 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 00:12:41,012 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-09 00:12:41,055 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-09 00:12:41,056 - INFO - [_internal.py:224] -  * Debugger PIN: 501-040-382
2025-04-09 00:12:56,715 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/utils/vector_store.py', reloading
2025-04-09 00:12:56,716 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-09 00:12:56,716 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/utils/vector_store.py', reloading
2025-04-09 00:12:56,717 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-09 00:12:56,727 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/routes/vector_db_routes.py', reloading
2025-04-09 00:12:56,728 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/utils/vector_store.py', reloading
2025-04-09 00:12:57,730 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-09 00:12:57,730 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-09 00:12:57,730 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-09 00:12:57,730 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-09 00:12:57,730 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-09 00:12:57,730 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-09 00:12:57,730 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-09 00:12:57,731 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-09 00:12:57,731 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-09 00:12:57,731 - INFO - [database.py:258] - Closing database connection
2025-04-09 00:12:57,731 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-09 00:12:57,731 - INFO - [vector_store.py:340] - Closing vector database connection
2025-04-09 00:12:58,782 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-09 00:13:05,895 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 00:13:05,896 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 00:13:05,896 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 00:13:05,896 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 00:13:05,897 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-09 00:13:05,915 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-09 00:13:05,933 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-09 00:13:05,933 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-09 00:13:06,002 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-09 00:13:06,002 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 00:13:06,003 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 00:13:06,003 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 00:13:06,003 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 00:13:06,003 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-09 00:13:06,003 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-09 00:13:06,072 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-09 00:13:06,073 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 00:13:06,073 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 00:13:06,073 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 00:13:06,074 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 00:13:06,074 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-09 00:13:06,074 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-09 00:13:06,140 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-09 00:13:06,141 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 00:13:06,141 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 00:13:06,142 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 00:13:06,142 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 00:13:06,143 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-09 00:13:06,143 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-09 00:13:06,143 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-09 00:13:06,227 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-09 00:13:06,228 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-09 00:13:06,228 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-09 00:13:06,230 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 00:13:06,231 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 00:13:06,232 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 00:13:06,233 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 00:13:06,234 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-09 00:13:06,458 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-09 00:13:06,459 - INFO - [_internal.py:224] -  * Debugger PIN: 501-040-382
2025-04-09 00:13:07,595 - DEBUG - [vector_db_routes.py:53] - Vector database management page requested
2025-04-09 00:13:07,627 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:13:07] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-09 00:13:07,746 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-09 00:13:08,811 - DEBUG - [milvus_client.py:728] - Created new connection using: 5a158ca5430841a89826ff1f0b5c5e25
2025-04-09 00:13:08,811 - INFO - [vector_store.py:42] - Vector database connection established in 1.07s
2025-04-09 00:13:08,817 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:13:08] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-09 00:13:09,165 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:13:09] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-09 00:13:10,558 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:13:10] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-09 00:13:10,913 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:13:10] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-09 00:13:17,001 - INFO - [vector_db_routes.py:381] - Loading embedding model...
2025-04-09 00:13:19,377 - INFO - [vector_db_routes.py:383] - Embedding model loaded in 2.38s
2025-04-09 00:13:19,416 - DEBUG - [vector_store.py:179] - Searching collection query_embeddings with fields: ['id']
2025-04-09 00:13:19,423 - DEBUG - [vector_db_routes.py:422] - First search result: {'id': 1, 'similarity': 0.5550318956375122}
2025-04-09 00:13:19,423 - DEBUG - [vector_db_routes.py:423] - Fields in first result: ['id', 'similarity']
2025-04-09 00:13:19,424 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:13:19] "POST /admin/api/vector-db/collections/query_embeddings/search HTTP/1.1" 200 -
2025-04-09 00:13:29,623 - DEBUG - [app.py:84] - Main page requested
2025-04-09 00:13:29,627 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:13:29] "GET / HTTP/1.1" 200 -
2025-04-09 00:13:30,005 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:13:30] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-09 00:13:30,012 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:13:30] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-09 00:13:30,023 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:13:30] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-09 00:13:30,024 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:13:30] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-09 00:13:30,027 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:13:30] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-09 00:13:30,031 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:13:30] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-09 00:13:30,331 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:13:30] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-09 00:13:30,344 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:13:30] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-09 00:13:30,708 - DEBUG - [app.py:152] - Table suggestions requested for workspace: dfd, query: ''
2025-04-09 00:13:30,709 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:13:30] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-09 00:13:34,689 - DEBUG - [app.py:520] - Samples management page requested
2025-04-09 00:13:34,697 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:13:34] "GET /samples HTTP/1.1" 200 -
2025-04-09 00:13:35,070 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:13:35] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-09 00:13:35,312 - DEBUG - [app.py:152] - Table suggestions requested for workspace: dfd, query: ''
2025-04-09 00:13:35,315 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:13:35] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-09 00:13:35,393 - DEBUG - [app.py:528] - Workspaces list requested
2025-04-09 00:13:35,398 - DEBUG - [app.py:537] - Tables list requested for workspace: 
2025-04-09 00:13:35,396 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:13:35] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-09 00:13:35,401 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:13:35] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-09 00:13:35,413 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-09 00:13:35,413 - INFO - [feedback_manager.py:49] - Attempting database connection
2025-04-09 00:13:35,415 - INFO - [feedback_manager.py:53] - Database connection established in 0.00s
2025-04-09 00:13:35,416 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-09 00:13:35,422 - DEBUG - [milvus_client.py:728] - Created new connection using: 16ebed9b502244cdbc4f00be61f67b02
2025-04-09 00:13:35,423 - INFO - [vector_store.py:42] - Vector database connection established in 0.01s
2025-04-09 00:13:35,437 - INFO - [feedback_manager.py:515] - Retrieved 2 samples (page 1, limit 10)
2025-04-09 00:13:35,439 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:13:35] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-09 00:13:50,913 - DEBUG - [vector_db_routes.py:53] - Vector database management page requested
2025-04-09 00:13:50,916 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:13:50] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-09 00:13:51,292 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:13:51] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-09 00:13:51,544 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:13:51] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-09 00:13:53,117 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:13:53] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-09 00:13:53,441 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:13:53] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-09 00:14:03,238 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:14:03] "DELETE /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-09 00:14:03,448 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:14:03] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-09 00:14:06,263 - DEBUG - [app.py:84] - Main page requested
2025-04-09 00:14:06,268 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:14:06] "GET / HTTP/1.1" 200 -
2025-04-09 00:14:06,623 - DEBUG - [app.py:152] - Table suggestions requested for workspace: dfd, query: ''
2025-04-09 00:14:06,624 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:14:06] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-09 00:14:07,479 - INFO - [app.py:222] - Schema requested for workspace: dfd
2025-04-09 00:14:07,479 - DEBUG - [app.py:249] - Schema retrieval completed in 0.000s
2025-04-09 00:14:07,481 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:14:07] "GET /api/schema?workspace=dfd HTTP/1.1" 200 -
2025-04-09 00:14:14,161 - DEBUG - [app.py:520] - Samples management page requested
2025-04-09 00:14:14,165 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:14:14] "GET /samples HTTP/1.1" 200 -
2025-04-09 00:14:14,411 - DEBUG - [app.py:152] - Table suggestions requested for workspace: dfd, query: ''
2025-04-09 00:14:14,413 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:14:14] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-09 00:14:14,533 - DEBUG - [app.py:528] - Workspaces list requested
2025-04-09 00:14:14,534 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:14:14] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-09 00:14:14,537 - DEBUG - [app.py:537] - Tables list requested for workspace: 
2025-04-09 00:14:14,547 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:14:14] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-09 00:14:14,551 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-09 00:14:14,551 - INFO - [feedback_manager.py:49] - Attempting database connection
2025-04-09 00:14:14,552 - INFO - [feedback_manager.py:53] - Database connection established in 0.00s
2025-04-09 00:14:14,553 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-09 00:14:14,704 - DEBUG - [milvus_client.py:728] - Created new connection using: ae9eaf5bc1404053bd2a1c0ac6fd6f9a
2025-04-09 00:14:14,704 - INFO - [vector_store.py:42] - Vector database connection established in 0.15s
2025-04-09 00:14:14,707 - INFO - [feedback_manager.py:515] - Retrieved 2 samples (page 1, limit 10)
2025-04-09 00:14:14,708 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:14:14] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-09 00:14:16,765 - DEBUG - [app.py:520] - Samples management page requested
2025-04-09 00:14:16,771 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:14:16] "GET /samples HTTP/1.1" 200 -
2025-04-09 00:14:17,144 - DEBUG - [app.py:152] - Table suggestions requested for workspace: dfd, query: ''
2025-04-09 00:14:17,146 - DEBUG - [app.py:528] - Workspaces list requested
2025-04-09 00:14:17,150 - DEBUG - [app.py:537] - Tables list requested for workspace: 
2025-04-09 00:14:17,148 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:14:17] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-09 00:14:17,157 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:14:17] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-09 00:14:17,160 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:14:17] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-09 00:14:17,162 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-09 00:14:17,167 - INFO - [feedback_manager.py:49] - Attempting database connection
2025-04-09 00:14:17,169 - INFO - [feedback_manager.py:53] - Database connection established in 0.00s
2025-04-09 00:14:17,170 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-09 00:14:17,175 - DEBUG - [milvus_client.py:728] - Created new connection using: 7e5c544d25684897a04b518903a85e55
2025-04-09 00:14:17,176 - INFO - [vector_store.py:42] - Vector database connection established in 0.01s
2025-04-09 00:14:17,179 - INFO - [feedback_manager.py:515] - Retrieved 2 samples (page 1, limit 10)
2025-04-09 00:14:17,180 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:14:17] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-09 00:14:19,358 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-09 00:14:19,362 - INFO - [feedback_manager.py:49] - Attempting database connection
2025-04-09 00:14:19,363 - INFO - [feedback_manager.py:53] - Database connection established in 0.00s
2025-04-09 00:14:19,364 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-09 00:14:19,369 - DEBUG - [milvus_client.py:728] - Created new connection using: fff83b65272b4c3899c88c8f06565dd4
2025-04-09 00:14:19,370 - INFO - [vector_store.py:42] - Vector database connection established in 0.01s
2025-04-09 00:14:19,373 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:14:19] "GET /api/samples/2 HTTP/1.1" 200 -
2025-04-09 00:14:19,687 - DEBUG - [app.py:537] - Tables list requested for workspace: dfd
2025-04-09 00:14:19,688 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:14:19] "GET /api/tables?workspace=dfd HTTP/1.1" 200 -
2025-04-09 00:14:21,597 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-09 00:14:21,601 - INFO - [feedback_manager.py:49] - Attempting database connection
2025-04-09 00:14:21,602 - INFO - [feedback_manager.py:53] - Database connection established in 0.00s
2025-04-09 00:14:21,602 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-09 00:14:21,608 - DEBUG - [milvus_client.py:728] - Created new connection using: b3a3d60e660748febcd3481f9e15f4ba
2025-04-09 00:14:21,608 - INFO - [vector_store.py:42] - Vector database connection established in 0.01s
2025-04-09 00:14:21,620 - ERROR - [app.py:496] - Error deleting sample 2: VectorStore.delete_embedding() missing 1 required positional argument: 'collection_name'
Traceback (most recent call last):
  File "/home/vijay/text2sql/app.py", line 477, in manage_sample
    success = feedback_mgr.delete_sample(sample_id)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/text2sql/src/utils/feedback_manager.py", line 661, in delete_sample
    self.vector_store.delete_embedding(feedback_id=sample_id)
TypeError: VectorStore.delete_embedding() missing 1 required positional argument: 'collection_name'
2025-04-09 00:14:21,624 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:14:21] "[35m[1mDELETE /api/samples/2 HTTP/1.1[0m" 500 -
2025-04-09 00:14:25,996 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-09 00:14:26,007 - INFO - [feedback_manager.py:49] - Attempting database connection
2025-04-09 00:14:26,007 - INFO - [feedback_manager.py:53] - Database connection established in 0.00s
2025-04-09 00:14:26,008 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-09 00:14:26,013 - DEBUG - [milvus_client.py:728] - Created new connection using: a3b70f34a6534660874d4a360d93a0f8
2025-04-09 00:14:26,013 - INFO - [vector_store.py:42] - Vector database connection established in 0.01s
2025-04-09 00:14:26,016 - ERROR - [app.py:496] - Error deleting sample 2: VectorStore.delete_embedding() missing 1 required positional argument: 'collection_name'
Traceback (most recent call last):
  File "/home/vijay/text2sql/app.py", line 477, in manage_sample
    success = feedback_mgr.delete_sample(sample_id)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/text2sql/src/utils/feedback_manager.py", line 661, in delete_sample
    self.vector_store.delete_embedding(feedback_id=sample_id)
TypeError: VectorStore.delete_embedding() missing 1 required positional argument: 'collection_name'
2025-04-09 00:14:26,019 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 00:14:26] "[35m[1mDELETE /api/samples/2 HTTP/1.1[0m" 500 -
2025-04-09 09:46:26,794 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 09:46:26] "[32mGET /api/samples/2 HTTP/1.1[0m" 302 -
2025-04-09 09:46:27,103 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 09:46:27] "GET /login HTTP/1.1" 200 -
2025-04-09 09:46:29,373 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 09:46:29] "[32mGET /api/samples/2 HTTP/1.1[0m" 302 -
2025-04-09 09:46:29,702 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 09:46:29] "GET /login?next=http%3A%2F%2Flocalhost%3A5000%2Fapi%2Fsamples%2F2 HTTP/1.1" 200 -
2025-04-09 09:46:36,018 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 09:46:36] "[32mGET /samples HTTP/1.1[0m" 302 -
2025-04-09 09:46:36,356 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 09:46:36] "GET /login?next=http%3A%2F%2Flocalhost%3A5000%2Fsamples HTTP/1.1" 200 -
2025-04-09 09:46:36,595 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 09:46:36] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-09 09:47:00,993 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 09:47:00] "[32mPOST /login HTTP/1.1[0m" 302 -
2025-04-09 09:47:01,316 - DEBUG - [app.py:84] - Main page requested
2025-04-09 09:47:01,321 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 09:47:01] "GET / HTTP/1.1" 200 -
2025-04-09 09:47:01,572 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 09:47:01] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-09 09:47:01,686 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 09:47:01] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-09 09:47:01,698 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 09:47:01] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-09 09:47:01,705 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 09:47:01] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-09 09:47:01,711 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 09:47:01] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-09 09:47:01,719 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 09:47:01] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-09 09:47:01,895 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 09:47:01] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-09 09:47:02,014 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 09:47:02] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-09 09:47:02,371 - DEBUG - [app.py:152] - Table suggestions requested for workspace: dfd, query: ''
2025-04-09 09:47:02,377 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 09:47:02] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-09 09:47:08,174 - DEBUG - [app.py:520] - Samples management page requested
2025-04-09 09:47:08,179 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 09:47:08] "GET /samples HTTP/1.1" 200 -
2025-04-09 09:47:08,563 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 09:47:08] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-09 09:47:08,816 - DEBUG - [app.py:152] - Table suggestions requested for workspace: dfd, query: ''
2025-04-09 09:47:08,819 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 09:47:08] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-09 09:47:08,909 - DEBUG - [app.py:528] - Workspaces list requested
2025-04-09 09:47:08,912 - DEBUG - [app.py:537] - Tables list requested for workspace: 
2025-04-09 09:47:08,916 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 09:47:08] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-09 09:47:08,925 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 09:47:08] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-09 09:47:08,942 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-09 09:47:08,944 - INFO - [feedback_manager.py:49] - Attempting database connection
2025-04-09 09:47:08,948 - INFO - [feedback_manager.py:53] - Database connection established in 0.00s
2025-04-09 09:47:08,949 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-09 09:47:08,972 - DEBUG - [milvus_client.py:728] - Created new connection using: bcd3f9b488e7472d8689f6575f302043
2025-04-09 09:47:08,973 - INFO - [vector_store.py:42] - Vector database connection established in 0.02s
2025-04-09 09:47:09,017 - INFO - [feedback_manager.py:515] - Retrieved 1 samples (page 1, limit 10)
2025-04-09 09:47:09,019 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 09:47:09] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-09 09:47:11,084 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-09 09:47:11,093 - INFO - [feedback_manager.py:49] - Attempting database connection
2025-04-09 09:47:11,096 - INFO - [feedback_manager.py:53] - Database connection established in 0.00s
2025-04-09 09:47:11,098 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-09 09:47:11,106 - DEBUG - [milvus_client.py:728] - Created new connection using: 69066755e50a4ef8a9d6e0d8763e82eb
2025-04-09 09:47:11,107 - INFO - [vector_store.py:42] - Vector database connection established in 0.01s
2025-04-09 09:47:11,110 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 09:47:11] "GET /api/samples/1 HTTP/1.1" 200 -
2025-04-09 09:47:11,431 - DEBUG - [app.py:537] - Tables list requested for workspace: dfd
2025-04-09 09:47:11,432 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 09:47:11] "GET /api/tables?workspace=dfd HTTP/1.1" 200 -
2025-04-09 09:47:15,608 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-09 09:47:15,612 - INFO - [feedback_manager.py:49] - Attempting database connection
2025-04-09 09:47:15,613 - INFO - [feedback_manager.py:53] - Database connection established in 0.00s
2025-04-09 09:47:15,614 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-09 09:47:15,621 - DEBUG - [milvus_client.py:728] - Created new connection using: 4edc0b4b3dad4323b81cc39f8fdaf36d
2025-04-09 09:47:15,621 - INFO - [vector_store.py:42] - Vector database connection established in 0.01s
2025-04-09 09:47:15,630 - ERROR - [app.py:496] - Error deleting sample 1: VectorStore.delete_embedding() missing 1 required positional argument: 'collection_name'
Traceback (most recent call last):
  File "/home/vijay/text2sql/app.py", line 477, in manage_sample
    success = feedback_mgr.delete_sample(sample_id)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/text2sql/src/utils/feedback_manager.py", line 661, in delete_sample
    self.vector_store.delete_embedding(feedback_id=sample_id)
TypeError: VectorStore.delete_embedding() missing 1 required positional argument: 'collection_name'
2025-04-09 09:47:15,634 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 09:47:15] "[35m[1mDELETE /api/samples/1 HTTP/1.1[0m" 500 -
2025-04-09 09:47:18,573 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-09 09:47:18,617 - INFO - [feedback_manager.py:49] - Attempting database connection
2025-04-09 09:47:18,619 - INFO - [feedback_manager.py:53] - Database connection established in 0.00s
2025-04-09 09:47:18,620 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-09 09:47:18,628 - DEBUG - [milvus_client.py:728] - Created new connection using: 0099046ea5be40bb83e702c4ff46163b
2025-04-09 09:47:18,628 - INFO - [vector_store.py:42] - Vector database connection established in 0.01s
2025-04-09 09:47:18,630 - INFO - [feedback_manager.py:74] - Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-09 09:47:19,728 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-09 09:47:19,730 - INFO - [feedback_manager.py:49] - Attempting database connection
2025-04-09 09:47:19,732 - INFO - [feedback_manager.py:53] - Database connection established in 0.00s
2025-04-09 09:47:19,732 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-09 09:47:19,737 - DEBUG - [milvus_client.py:728] - Created new connection using: 08e04c68f94b41549e346acf4d80f257
2025-04-09 09:47:19,738 - INFO - [vector_store.py:42] - Vector database connection established in 0.01s
2025-04-09 09:47:19,739 - INFO - [feedback_manager.py:74] - Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-09 09:47:21,459 - INFO - [feedback_manager.py:77] - Embedding model loaded in 2.83s
2025-04-09 09:47:21,697 - DEBUG - [feedback_manager.py:102] - Generated embedding in 0.24s with shape (384,)
2025-04-09 09:47:21,697 - ERROR - [app.py:466] - Error updating sample 1: VectorStore.update_embedding() missing 1 required positional argument: 'collection_name'
Traceback (most recent call last):
  File "/home/vijay/text2sql/app.py", line 447, in manage_sample
    success = feedback_mgr.update_sample(sample_id, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/text2sql/src/utils/feedback_manager.py", line 626, in update_sample
    self.vector_store.update_embedding(
TypeError: VectorStore.update_embedding() missing 1 required positional argument: 'collection_name'
2025-04-09 09:47:21,701 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 09:47:21] "[35m[1mPUT /api/samples/1 HTTP/1.1[0m" 500 -
2025-04-09 09:47:22,324 - INFO - [feedback_manager.py:77] - Embedding model loaded in 2.58s
2025-04-09 09:47:22,371 - DEBUG - [feedback_manager.py:102] - Generated embedding in 0.04s with shape (384,)
2025-04-09 09:47:22,372 - ERROR - [app.py:466] - Error updating sample 1: VectorStore.update_embedding() missing 1 required positional argument: 'collection_name'
Traceback (most recent call last):
  File "/home/vijay/text2sql/app.py", line 447, in manage_sample
    success = feedback_mgr.update_sample(sample_id, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/text2sql/src/utils/feedback_manager.py", line 626, in update_sample
    self.vector_store.update_embedding(
TypeError: VectorStore.update_embedding() missing 1 required positional argument: 'collection_name'
2025-04-09 09:47:22,374 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 09:47:22] "[35m[1mPUT /api/samples/1 HTTP/1.1[0m" 500 -
2025-04-09 09:47:24,688 - DEBUG - [app.py:520] - Samples management page requested
2025-04-09 09:47:24,695 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 09:47:24] "GET /samples HTTP/1.1" 200 -
2025-04-09 09:47:24,949 - DEBUG - [app.py:152] - Table suggestions requested for workspace: dfd, query: ''
2025-04-09 09:47:24,952 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 09:47:24] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-09 09:47:25,057 - DEBUG - [app.py:528] - Workspaces list requested
2025-04-09 09:47:25,059 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 09:47:25] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-09 09:47:25,062 - DEBUG - [app.py:537] - Tables list requested for workspace: 
2025-04-09 09:47:25,077 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 09:47:25] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-09 09:47:25,083 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-09 09:47:25,085 - INFO - [feedback_manager.py:49] - Attempting database connection
2025-04-09 09:47:25,087 - INFO - [feedback_manager.py:53] - Database connection established in 0.00s
2025-04-09 09:47:25,089 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-09 09:47:25,099 - DEBUG - [milvus_client.py:728] - Created new connection using: 6859beb1e5974218ab6cfa47eef60eb9
2025-04-09 09:47:25,099 - INFO - [vector_store.py:42] - Vector database connection established in 0.01s
2025-04-09 09:47:25,103 - INFO - [feedback_manager.py:515] - Retrieved 0 samples (page 1, limit 10)
2025-04-09 09:47:25,105 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 09:47:25] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-09 10:27:47,140 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:27:47] "[32mPOST /api/samples HTTP/1.1[0m" 302 -
2025-04-09 10:27:47,394 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:27:47] "GET /login HTTP/1.1" 200 -
2025-04-09 10:27:53,194 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:27:53] "[32mGET /samples HTTP/1.1[0m" 302 -
2025-04-09 10:27:53,531 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:27:53] "GET /login?next=http%3A%2F%2Flocalhost%3A5000%2Fsamples HTTP/1.1" 200 -
2025-04-09 10:27:59,246 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:27:59] "[32mPOST /login HTTP/1.1[0m" 302 -
2025-04-09 10:27:59,576 - DEBUG - [app.py:84] - Main page requested
2025-04-09 10:27:59,580 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:27:59] "GET / HTTP/1.1" 200 -
2025-04-09 10:27:59,812 - DEBUG - [app.py:152] - Table suggestions requested for workspace: dfd, query: ''
2025-04-09 10:27:59,815 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:27:59] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-09 10:28:04,791 - DEBUG - [app.py:520] - Samples management page requested
2025-04-09 10:28:04,796 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:28:04] "GET /samples HTTP/1.1" 200 -
2025-04-09 10:28:05,181 - DEBUG - [app.py:152] - Table suggestions requested for workspace: dfd, query: ''
2025-04-09 10:28:05,184 - DEBUG - [app.py:528] - Workspaces list requested
2025-04-09 10:28:05,187 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:28:05] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-09 10:28:05,189 - DEBUG - [app.py:537] - Tables list requested for workspace: 
2025-04-09 10:28:05,192 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:28:05] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-09 10:28:05,203 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:28:05] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-09 10:28:05,208 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-09 10:28:05,212 - INFO - [feedback_manager.py:49] - Attempting database connection
2025-04-09 10:28:05,213 - INFO - [feedback_manager.py:53] - Database connection established in 0.00s
2025-04-09 10:28:05,214 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-09 10:28:05,221 - DEBUG - [milvus_client.py:728] - Created new connection using: d18ac4fa34da488588607a00f6c64b91
2025-04-09 10:28:05,222 - INFO - [vector_store.py:42] - Vector database connection established in 0.01s
2025-04-09 10:28:05,241 - INFO - [feedback_manager.py:515] - Retrieved 0 samples (page 1, limit 10)
2025-04-09 10:28:05,242 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:28:05] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-09 10:28:12,485 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-09 10:28:12,485 - INFO - [feedback_manager.py:49] - Attempting database connection
2025-04-09 10:28:12,487 - INFO - [feedback_manager.py:53] - Database connection established in 0.00s
2025-04-09 10:28:12,487 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-09 10:28:12,491 - DEBUG - [milvus_client.py:728] - Created new connection using: abe79b20562f414b9137d74aece47e21
2025-04-09 10:28:12,491 - INFO - [vector_store.py:42] - Vector database connection established in 0.00s
2025-04-09 10:28:12,492 - INFO - [feedback_manager.py:74] - Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-09 10:28:15,056 - INFO - [feedback_manager.py:77] - Embedding model loaded in 2.56s
2025-04-09 10:28:15,122 - DEBUG - [feedback_manager.py:102] - Generated embedding in 0.07s with shape (384,)
2025-04-09 10:28:15,130 - ERROR - [app.py:378] - Error saving sample: VectorStore.insert_embedding() missing 1 required positional argument: 'collection_name'
Traceback (most recent call last):
  File "/home/vijay/text2sql/app.py", line 350, in manage_samples
    success = feedback_mgr.save_feedback(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/text2sql/src/utils/feedback_manager.py", line 189, in save_feedback
    self.vector_store.insert_embedding(
TypeError: VectorStore.insert_embedding() missing 1 required positional argument: 'collection_name'
2025-04-09 10:28:15,133 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:28:15] "[35m[1mPOST /api/samples HTTP/1.1[0m" 500 -
2025-04-09 10:29:57,157 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/utils/feedback_manager.py', reloading
2025-04-09 10:29:57,158 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/utils/feedback_manager.py', reloading
2025-04-09 10:29:57,159 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/utils/feedback_manager.py', reloading
2025-04-09 10:29:58,160 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-09 10:29:58,161 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-09 10:29:58,161 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-09 10:29:58,161 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-09 10:29:58,161 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-09 10:29:58,161 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-09 10:29:58,162 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-09 10:29:58,162 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-09 10:29:58,162 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-09 10:29:58,162 - INFO - [database.py:258] - Closing database connection
2025-04-09 10:29:58,162 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-09 10:29:58,162 - INFO - [vector_store.py:340] - Closing vector database connection
2025-04-09 10:30:00,101 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-09 10:30:11,149 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 10:30:11,150 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 10:30:11,150 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 10:30:11,151 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 10:30:11,152 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-09 10:30:11,166 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-09 10:30:11,170 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-09 10:30:11,170 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-09 10:30:11,207 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-09 10:30:11,207 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 10:30:11,207 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 10:30:11,207 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 10:30:11,208 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 10:30:11,208 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-09 10:30:11,208 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-09 10:30:11,245 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-09 10:30:11,246 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 10:30:11,246 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 10:30:11,246 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 10:30:11,246 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 10:30:11,247 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-09 10:30:11,247 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-09 10:30:11,283 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-09 10:30:11,283 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 10:30:11,283 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 10:30:11,284 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 10:30:11,284 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 10:30:11,284 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-09 10:30:11,284 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-09 10:30:11,284 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-09 10:30:11,318 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-09 10:30:11,318 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-09 10:30:11,318 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-09 10:30:11,318 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 10:30:11,319 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 10:30:11,319 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 10:30:11,319 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 10:30:11,319 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-09 10:30:11,396 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-09 10:30:11,399 - INFO - [_internal.py:224] -  * Debugger PIN: 501-040-382
2025-04-09 10:30:31,592 - DEBUG - [app.py:520] - Samples management page requested
2025-04-09 10:30:31,643 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:30:31] "GET /samples HTTP/1.1" 200 -
2025-04-09 10:30:31,781 - DEBUG - [app.py:152] - Table suggestions requested for workspace: dfd, query: ''
2025-04-09 10:30:31,783 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:30:31] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-09 10:30:32,061 - DEBUG - [app.py:528] - Workspaces list requested
2025-04-09 10:30:32,066 - DEBUG - [app.py:537] - Tables list requested for workspace: 
2025-04-09 10:30:32,071 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:30:32] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-09 10:30:32,083 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:30:32] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-09 10:30:32,108 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-09 10:30:32,109 - INFO - [feedback_manager.py:52] - Attempting database connection
2025-04-09 10:30:32,113 - INFO - [feedback_manager.py:56] - Database connection established in 0.00s
2025-04-09 10:30:32,115 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-09 10:30:33,216 - DEBUG - [milvus_client.py:728] - Created new connection using: fb9e2a827d5345818b8eb20397ff287d
2025-04-09 10:30:33,217 - INFO - [vector_store.py:42] - Vector database connection established in 1.10s
2025-04-09 10:30:33,222 - INFO - [feedback_manager.py:519] - Retrieved 1 samples (page 1, limit 10)
2025-04-09 10:30:33,225 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:30:33] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-09 10:30:38,566 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-09 10:30:38,572 - INFO - [feedback_manager.py:52] - Attempting database connection
2025-04-09 10:30:38,574 - INFO - [feedback_manager.py:56] - Database connection established in 0.00s
2025-04-09 10:30:38,609 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-09 10:30:38,618 - DEBUG - [milvus_client.py:728] - Created new connection using: d827965bc5ca4dcd85ac35024fab659b
2025-04-09 10:30:38,618 - INFO - [vector_store.py:42] - Vector database connection established in 0.01s
2025-04-09 10:30:38,624 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:30:38] "GET /api/samples/4 HTTP/1.1" 200 -
2025-04-09 10:30:38,950 - DEBUG - [app.py:537] - Tables list requested for workspace: dfd
2025-04-09 10:30:38,952 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:30:38] "GET /api/tables?workspace=dfd HTTP/1.1" 200 -
2025-04-09 10:30:42,399 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-09 10:30:42,413 - INFO - [feedback_manager.py:52] - Attempting database connection
2025-04-09 10:30:42,416 - INFO - [feedback_manager.py:56] - Database connection established in 0.00s
2025-04-09 10:30:42,419 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-09 10:30:42,442 - DEBUG - [milvus_client.py:728] - Created new connection using: 8cc5a27ce8614b5ba52d349833057eec
2025-04-09 10:30:42,443 - INFO - [vector_store.py:42] - Vector database connection established in 0.02s
2025-04-09 10:30:42,498 - ERROR - [app.py:496] - Error deleting sample 4: VectorStore.delete_embedding() missing 1 required positional argument: 'collection_name'
Traceback (most recent call last):
  File "/home/vijay/text2sql/app.py", line 477, in manage_sample
    success = feedback_mgr.delete_sample(sample_id)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/text2sql/src/utils/feedback_manager.py", line 665, in delete_sample
    self.vector_store.delete_embedding(feedback_id=sample_id)
TypeError: VectorStore.delete_embedding() missing 1 required positional argument: 'collection_name'
2025-04-09 10:30:42,502 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:30:42] "[35m[1mDELETE /api/samples/4 HTTP/1.1[0m" 500 -
2025-04-09 10:31:04,816 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-09 10:31:04,816 - INFO - [feedback_manager.py:52] - Attempting database connection
2025-04-09 10:31:04,819 - INFO - [feedback_manager.py:56] - Database connection established in 0.00s
2025-04-09 10:31:04,821 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-09 10:31:04,829 - DEBUG - [milvus_client.py:728] - Created new connection using: 4bae52144f994677b2a16dd25df04920
2025-04-09 10:31:04,830 - INFO - [vector_store.py:42] - Vector database connection established in 0.01s
2025-04-09 10:31:04,831 - INFO - [feedback_manager.py:77] - Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-09 10:31:05,406 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/utils/feedback_manager.py', reloading
2025-04-09 10:31:05,406 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/utils/feedback_manager.py', reloading
2025-04-09 10:31:05,444 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/utils/feedback_manager.py', reloading
2025-04-09 10:31:06,445 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-09 10:31:06,447 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-09 10:31:06,448 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-09 10:31:06,448 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-09 10:31:06,449 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-09 10:31:06,449 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-09 10:31:06,450 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-09 10:31:06,450 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-09 10:31:06,450 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-09 10:31:06,451 - INFO - [database.py:258] - Closing database connection
2025-04-09 10:31:06,451 - INFO - [feedback_manager.py:755] - Closing database connections
2025-04-09 10:31:06,452 - INFO - [vector_store.py:340] - Closing vector database connection
2025-04-09 10:31:07,547 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-09 10:31:12,096 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 10:31:12,096 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 10:31:12,096 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 10:31:12,097 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 10:31:12,097 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-09 10:31:12,104 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-09 10:31:12,106 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-09 10:31:12,107 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-09 10:31:12,140 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-09 10:31:12,141 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 10:31:12,141 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 10:31:12,141 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 10:31:12,141 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 10:31:12,141 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-09 10:31:12,141 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-09 10:31:12,175 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-09 10:31:12,175 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 10:31:12,176 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 10:31:12,176 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 10:31:12,176 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 10:31:12,176 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-09 10:31:12,176 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-09 10:31:12,210 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-09 10:31:12,211 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 10:31:12,211 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 10:31:12,211 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 10:31:12,211 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 10:31:12,211 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-09 10:31:12,211 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-09 10:31:12,211 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-09 10:31:12,244 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-09 10:31:12,244 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-09 10:31:12,244 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-09 10:31:12,244 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 10:31:12,244 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 10:31:12,245 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 10:31:12,245 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 10:31:12,245 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-09 10:31:12,277 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-09 10:31:12,278 - INFO - [_internal.py:224] -  * Debugger PIN: 501-040-382
2025-04-09 10:32:13,630 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/utils/feedback_manager.py', reloading
2025-04-09 10:32:13,632 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/utils/feedback_manager.py', reloading
2025-04-09 10:32:13,668 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/utils/feedback_manager.py', reloading
2025-04-09 10:32:14,669 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-09 10:32:14,670 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-09 10:32:14,670 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-09 10:32:14,670 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-09 10:32:14,670 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-09 10:32:14,670 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-09 10:32:14,670 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-09 10:32:14,671 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-09 10:32:14,671 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-09 10:32:14,671 - INFO - [database.py:258] - Closing database connection
2025-04-09 10:32:14,671 - INFO - [feedback_manager.py:756] - Closing database connections
2025-04-09 10:32:14,671 - INFO - [vector_store.py:340] - Closing vector database connection
2025-04-09 10:32:16,075 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-09 10:32:21,497 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 10:32:21,498 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 10:32:21,498 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 10:32:21,498 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 10:32:21,498 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-09 10:32:21,507 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-09 10:32:21,510 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-09 10:32:21,510 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-09 10:32:21,549 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-09 10:32:21,550 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 10:32:21,550 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 10:32:21,550 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 10:32:21,550 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 10:32:21,550 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-09 10:32:21,550 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-09 10:32:21,591 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-09 10:32:21,592 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 10:32:21,592 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 10:32:21,592 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 10:32:21,592 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 10:32:21,592 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-09 10:32:21,592 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-09 10:32:21,631 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-09 10:32:21,631 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 10:32:21,631 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 10:32:21,631 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 10:32:21,631 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 10:32:21,632 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-09 10:32:21,632 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-09 10:32:21,632 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-09 10:32:21,669 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-09 10:32:21,669 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-09 10:32:21,670 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-09 10:32:21,670 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 10:32:21,670 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 10:32:21,670 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 10:32:21,671 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 10:32:21,671 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-09 10:32:21,708 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-09 10:32:21,709 - INFO - [_internal.py:224] -  * Debugger PIN: 501-040-382
2025-04-09 10:32:29,981 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-09 10:32:29,981 - INFO - [feedback_manager.py:52] - Attempting database connection
2025-04-09 10:32:29,984 - INFO - [feedback_manager.py:56] - Database connection established in 0.00s
2025-04-09 10:32:29,985 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-09 10:32:31,032 - DEBUG - [milvus_client.py:728] - Created new connection using: ed557e23328a485dbad6c7456867a2a2
2025-04-09 10:32:31,033 - INFO - [vector_store.py:42] - Vector database connection established in 1.05s
2025-04-09 10:32:31,035 - INFO - [feedback_manager.py:77] - Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-09 10:32:33,826 - INFO - [feedback_manager.py:80] - Embedding model loaded in 2.79s
2025-04-09 10:32:33,911 - DEBUG - [feedback_manager.py:105] - Generated embedding in 0.08s with shape (384,)
2025-04-09 10:32:33,953 - ERROR - [decorators.py:140] - RPC error: [describe_collection], <DescribeCollectionException: (code=100, message=: collection not found)>, <Time:{'RPC start': '2025-04-09 10:32:33.952697', 'RPC error': '2025-04-09 10:32:33.953886'}>
2025-04-09 10:32:33,954 - ERROR - [decorators.py:140] - RPC error: [insert_rows], <DescribeCollectionException: (code=100, message=: collection not found)>, <Time:{'RPC start': '2025-04-09 10:32:33.952671', 'RPC error': '2025-04-09 10:32:33.954274'}>
2025-04-09 10:32:33,954 - ERROR - [vector_store.py:134] - Error inserting embedding into collection query_embeddings: <DescribeCollectionException: (code=100, message=: collection not found)>
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/vector_store.py", line 126, in insert_embedding
    result = self.client.insert(
             ^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/pymilvus/milvus_client/milvus_client.py", line 225, in insert
    raise ex from ex
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/pymilvus/milvus_client/milvus_client.py", line 221, in insert
    res = conn.insert_rows(
          ^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/pymilvus/decorators.py", line 141, in handler
    raise e from e
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/pymilvus/decorators.py", line 137, in handler
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/pymilvus/decorators.py", line 176, in handler
    return func(self, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/pymilvus/decorators.py", line 116, in handler
    raise e from e
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/pymilvus/decorators.py", line 86, in handler
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/pymilvus/client/grpc_handler.py", line 494, in insert_rows
    request = self._prepare_row_insert_request(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/pymilvus/client/grpc_handler.py", line 515, in _prepare_row_insert_request
    schema = self.describe_collection(collection_name, timeout=timeout)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/pymilvus/decorators.py", line 141, in handler
    raise e from e
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/pymilvus/decorators.py", line 137, in handler
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/pymilvus/decorators.py", line 176, in handler
    return func(self, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/pymilvus/decorators.py", line 116, in handler
    raise e from e
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/pymilvus/decorators.py", line 86, in handler
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/vijay/anaconda3/lib/python3.11/site-packages/pymilvus/client/grpc_handler.py", line 368, in describe_collection
    raise DescribeCollectionException(status.code, status.reason, status.error_code)
pymilvus.exceptions.DescribeCollectionException: <DescribeCollectionException: (code=100, message=: collection not found)>
2025-04-09 10:32:33,960 - INFO - [feedback_manager.py:201] - Saved manual sample for query: 'test...'
2025-04-09 10:32:33,971 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:32:33] "POST /api/samples HTTP/1.1" 200 -
2025-04-09 10:32:33,983 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-09 10:32:33,983 - INFO - [feedback_manager.py:52] - Attempting database connection
2025-04-09 10:32:33,985 - INFO - [feedback_manager.py:56] - Database connection established in 0.00s
2025-04-09 10:32:33,985 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-09 10:32:33,989 - DEBUG - [milvus_client.py:728] - Created new connection using: 1779e45ebe714a2393ba42bd3a5a5c22
2025-04-09 10:32:33,990 - INFO - [vector_store.py:42] - Vector database connection established in 0.00s
2025-04-09 10:32:33,992 - INFO - [feedback_manager.py:520] - Retrieved 1 samples (page 1, limit 10)
2025-04-09 10:32:33,993 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:32:33] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-09 10:33:05,678 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/utils/feedback_manager.py', reloading
2025-04-09 10:33:05,679 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/utils/feedback_manager.py', reloading
2025-04-09 10:33:05,715 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/utils/feedback_manager.py', reloading
2025-04-09 10:33:06,716 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-09 10:33:06,716 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-09 10:33:06,716 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-09 10:33:06,716 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-09 10:33:06,716 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-09 10:33:06,716 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-09 10:33:06,717 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-09 10:33:06,717 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-09 10:33:06,717 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-09 10:33:06,717 - INFO - [database.py:258] - Closing database connection
2025-04-09 10:33:06,717 - INFO - [feedback_manager.py:756] - Closing database connections
2025-04-09 10:33:06,717 - INFO - [vector_store.py:340] - Closing vector database connection
2025-04-09 10:33:08,006 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-09 10:33:13,674 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 10:33:13,675 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 10:33:13,675 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 10:33:13,675 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 10:33:13,676 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-09 10:33:13,686 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-09 10:33:13,688 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-09 10:33:13,688 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-09 10:33:13,736 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-09 10:33:13,736 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 10:33:13,736 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 10:33:13,736 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 10:33:13,737 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 10:33:13,737 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-09 10:33:13,737 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-09 10:33:13,779 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-09 10:33:13,780 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 10:33:13,780 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 10:33:13,780 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 10:33:13,780 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 10:33:13,780 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-09 10:33:13,780 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-09 10:33:13,820 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-09 10:33:13,821 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 10:33:13,821 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 10:33:13,821 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 10:33:13,821 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 10:33:13,822 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-09 10:33:13,822 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-09 10:33:13,822 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-09 10:33:13,862 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-09 10:33:13,862 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-09 10:33:13,862 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-09 10:33:13,862 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 10:33:13,862 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 10:33:13,863 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 10:33:13,863 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 10:33:13,863 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-09 10:33:13,905 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-09 10:33:13,906 - INFO - [_internal.py:224] -  * Debugger PIN: 501-040-382
2025-04-09 10:33:14,902 - DEBUG - [vector_db_routes.py:53] - Vector database management page requested
2025-04-09 10:33:14,980 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:33:14] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-09 10:33:15,114 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:33:15] "GET /static/js/admin/vector_db.js HTTP/1.1" 200 -
2025-04-09 10:33:15,410 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-09 10:33:16,501 - DEBUG - [milvus_client.py:728] - Created new connection using: bc0785b42e2241598f5bd501b8b7ea71
2025-04-09 10:33:16,503 - INFO - [vector_store.py:42] - Vector database connection established in 1.09s
2025-04-09 10:33:16,512 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:33:16] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-09 10:33:34,242 - INFO - [vector_store.py:66] - Creating collection 'query_embeddings'
2025-04-09 10:33:34,256 - DEBUG - [milvus_client.py:137] - Successfully created collection: query_embeddings
2025-04-09 10:33:34,772 - DEBUG - [milvus_client.py:174] - Successfully created an index on collection: query_embeddings
2025-04-09 10:33:34,784 - INFO - [vector_store.py:76] - Collection 'query_embeddings' created successfully with dimension 384
2025-04-09 10:33:34,830 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:33:34] "POST /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-09 10:33:35,180 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:33:35] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-09 10:33:35,418 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:33:35] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-09 10:33:41,578 - DEBUG - [app.py:520] - Samples management page requested
2025-04-09 10:33:41,585 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:33:41] "GET /samples HTTP/1.1" 200 -
2025-04-09 10:33:41,968 - DEBUG - [app.py:152] - Table suggestions requested for workspace: dfd, query: ''
2025-04-09 10:33:41,974 - DEBUG - [app.py:528] - Workspaces list requested
2025-04-09 10:33:41,979 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:33:41] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-09 10:33:41,985 - DEBUG - [app.py:537] - Tables list requested for workspace: 
2025-04-09 10:33:41,988 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:33:41] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-09 10:33:42,016 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:33:42] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-09 10:33:42,031 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-09 10:33:42,037 - INFO - [feedback_manager.py:52] - Attempting database connection
2025-04-09 10:33:42,041 - INFO - [feedback_manager.py:56] - Database connection established in 0.00s
2025-04-09 10:33:42,045 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-09 10:33:42,058 - DEBUG - [milvus_client.py:728] - Created new connection using: 7d384d74220842b9baa6447112947957
2025-04-09 10:33:42,059 - INFO - [vector_store.py:42] - Vector database connection established in 0.01s
2025-04-09 10:33:42,066 - INFO - [feedback_manager.py:521] - Retrieved 1 samples (page 1, limit 10)
2025-04-09 10:33:42,068 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:33:42] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-09 10:33:49,758 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-09 10:33:49,759 - INFO - [feedback_manager.py:52] - Attempting database connection
2025-04-09 10:33:49,762 - INFO - [feedback_manager.py:56] - Database connection established in 0.00s
2025-04-09 10:33:49,762 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-09 10:33:49,771 - DEBUG - [milvus_client.py:728] - Created new connection using: afde30dcdfb144f1887cdcdcb8af651c
2025-04-09 10:33:49,772 - INFO - [vector_store.py:42] - Vector database connection established in 0.01s
2025-04-09 10:33:49,774 - INFO - [feedback_manager.py:77] - Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-09 10:33:52,376 - INFO - [feedback_manager.py:80] - Embedding model loaded in 2.60s
2025-04-09 10:33:52,428 - DEBUG - [feedback_manager.py:105] - Generated embedding in 0.05s with shape (384,)
2025-04-09 10:33:52,487 - DEBUG - [vector_store.py:131] - Inserted embedding for feedback_id 5 into collection query_embeddings
2025-04-09 10:33:52,488 - INFO - [feedback_manager.py:201] - Saved manual sample for query: 'test...'
2025-04-09 10:33:52,498 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:33:52] "POST /api/samples HTTP/1.1" 200 -
2025-04-09 10:33:52,834 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-09 10:33:52,835 - INFO - [feedback_manager.py:52] - Attempting database connection
2025-04-09 10:33:52,838 - INFO - [feedback_manager.py:56] - Database connection established in 0.00s
2025-04-09 10:33:52,839 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-09 10:33:52,858 - DEBUG - [milvus_client.py:728] - Created new connection using: c1269e9ccf624e5ca3ee07a515924069
2025-04-09 10:33:52,859 - INFO - [vector_store.py:42] - Vector database connection established in 0.02s
2025-04-09 10:33:52,865 - INFO - [feedback_manager.py:521] - Retrieved 2 samples (page 1, limit 10)
2025-04-09 10:33:52,869 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:33:52] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-09 10:33:57,374 - DEBUG - [vector_db_routes.py:53] - Vector database management page requested
2025-04-09 10:33:57,379 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:33:57] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-09 10:33:57,754 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:33:57] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-09 10:33:58,009 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:33:58] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-09 10:33:59,810 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:33:59] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-09 10:34:00,118 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:34:00] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-09 10:34:40,294 - INFO - [vector_db_routes.py:443] - Upload attempt to collection: query_embeddings
2025-04-09 10:34:40,297 - INFO - [vector_db_routes.py:444] - Form data: ImmutableMultiDict([('text_field_name', 'query_text')])
2025-04-09 10:34:40,298 - INFO - [vector_db_routes.py:445] - Files: dict_keys(['file'])
2025-04-09 10:34:40,300 - INFO - [vector_db_routes.py:463] - Processing file: file_json.json for collection: query_embeddings
2025-04-09 10:34:40,304 - INFO - [vector_db_routes.py:494] - Available collections: ['query_embeddings']
2025-04-09 10:34:40,305 - INFO - [vector_db_routes.py:506] - Loading embedding model...
2025-04-09 10:34:42,958 - INFO - [vector_db_routes.py:508] - Embedding model loaded in 2.65s
2025-04-09 10:34:42,958 - INFO - [vector_db_routes.py:512] - Processing file with extension: json
2025-04-09 10:34:42,959 - INFO - [vector_db_routes.py:547] - Processing JSON file
2025-04-09 10:34:42,961 - DEBUG - [vector_db_routes.py:551] - JSON content length: 273 characters
2025-04-09 10:34:42,961 - DEBUG - [vector_db_routes.py:555] - JSON content preview: {"query_text": "get me all the customers", "sql_query": "SELECT * FROM customers;", "results_summary": "Returned 5 rows with 11 columns", "workspace": "dfd", "feedback_rating": 1, "tables_used": "", "...
2025-04-09 10:34:42,962 - INFO - [vector_db_routes.py:577] - Extracted 1 record from JSON object
2025-04-09 10:34:42,963 - DEBUG - [vector_db_routes.py:583] - Sample record keys: ['query_text', 'sql_query', 'results_summary', 'workspace', 'feedback_rating', 'tables_used', 'is_manual_sample', 'created_at', 'id']
2025-04-09 10:34:42,964 - DEBUG - [vector_db_routes.py:587] - Field 'query_text': str = get me all the customers
2025-04-09 10:34:42,965 - DEBUG - [vector_db_routes.py:587] - Field 'sql_query': str = SELECT * FROM customers;
2025-04-09 10:34:42,966 - DEBUG - [vector_db_routes.py:587] - Field 'results_summary': str = Returned 5 rows with 11 columns
2025-04-09 10:34:42,966 - DEBUG - [vector_db_routes.py:587] - Field 'workspace': str = dfd
2025-04-09 10:34:42,968 - DEBUG - [vector_db_routes.py:587] - Field 'feedback_rating': int = 1
2025-04-09 10:34:42,968 - DEBUG - [vector_db_routes.py:587] - Field 'tables_used': str = 
2025-04-09 10:34:42,970 - DEBUG - [vector_db_routes.py:587] - Field 'is_manual_sample': str = False
2025-04-09 10:34:42,971 - DEBUG - [vector_db_routes.py:587] - Field 'created_at': str = 2025-04-05 15:17:11
2025-04-09 10:34:42,972 - DEBUG - [vector_db_routes.py:587] - Field 'id': int = 1
2025-04-09 10:34:42,975 - DEBUG - [vector_db_routes.py:641] - First record structure: {'query_text': 'get me all the customers', 'sql_query': 'SELECT * FROM customers;', 'results_summary': 'Returned 5 rows with 11 columns', 'workspace': 'dfd', 'feedback_rating': 1, 'tables_used': '', 'is_manual_sample': 'False', 'created_at': '2025-04-05 15:17:11', 'id': 1}
2025-04-09 10:34:42,976 - DEBUG - [vector_db_routes.py:642] - First record keys: ['query_text', 'sql_query', 'results_summary', 'workspace', 'feedback_rating', 'tables_used', 'is_manual_sample', 'created_at', 'id']
2025-04-09 10:34:42,977 - DEBUG - [vector_db_routes.py:643] - Looking for text field: 'query_text'
2025-04-09 10:34:42,980 - DEBUG - [vector_db_routes.py:649] - Collection schema fields: []
2025-04-09 10:34:42,980 - DEBUG - [vector_db_routes.py:672] - Generating embedding for text: 'get me all the customers...' (truncated)
2025-04-09 10:34:43,080 - DEBUG - [vector_db_routes.py:681] - Inserting data with fields: ['vector', 'query_text', 'sql_query', 'results_summary', 'workspace', 'feedback_rating', 'tables_used', 'is_manual_sample', 'created_at', 'id']
2025-04-09 10:34:43,095 - DEBUG - [vector_db_routes.py:686] - Insert result: {'insert_count': 1, 'ids': [1]}
2025-04-09 10:34:43,100 - INFO - [vector_db_routes.py:710] - Flushing changes to collection query_embeddings
2025-04-09 10:34:43,103 - INFO - [vector_db_routes.py:714] - Flushed collection query_embeddings
2025-04-09 10:34:43,106 - INFO - [vector_db_routes.py:719] - Loaded collection query_embeddings
2025-04-09 10:34:43,107 - INFO - [vector_db_routes.py:723] - Running validation query on query_embeddings to ensure visibility
2025-04-09 10:34:43,110 - DEBUG - [vector_db_routes.py:730] - Validation query returned 1 records
2025-04-09 10:34:43,122 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:34:43] "POST /admin/api/vector-db/collections/query_embeddings/upload HTTP/1.1" 200 -
2025-04-09 10:34:44,573 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:34:44] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-09 10:34:44,900 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:34:44] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0&_t=1744166084612 HTTP/1.1" 200 -
2025-04-09 10:35:21,803 - DEBUG - [app.py:520] - Samples management page requested
2025-04-09 10:35:21,809 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:35:21] "GET /samples HTTP/1.1" 200 -
2025-04-09 10:35:22,056 - DEBUG - [app.py:152] - Table suggestions requested for workspace: dfd, query: ''
2025-04-09 10:35:22,069 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:35:22] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-09 10:35:22,781 - DEBUG - [app.py:528] - Workspaces list requested
2025-04-09 10:35:22,784 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:35:22] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-09 10:35:22,788 - DEBUG - [app.py:537] - Tables list requested for workspace: 
2025-04-09 10:35:22,801 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:35:22] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-09 10:35:22,807 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-09 10:35:22,808 - INFO - [feedback_manager.py:52] - Attempting database connection
2025-04-09 10:35:22,810 - INFO - [feedback_manager.py:56] - Database connection established in 0.00s
2025-04-09 10:35:22,810 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-09 10:35:22,818 - DEBUG - [milvus_client.py:728] - Created new connection using: 442ff864e90e45998435957ba0743d69
2025-04-09 10:35:22,818 - INFO - [vector_store.py:42] - Vector database connection established in 0.01s
2025-04-09 10:35:22,821 - INFO - [feedback_manager.py:521] - Retrieved 2 samples (page 1, limit 10)
2025-04-09 10:35:22,822 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:35:22] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-09 10:35:31,029 - DEBUG - [app.py:520] - Samples management page requested
2025-04-09 10:35:31,035 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:35:31] "GET /samples HTTP/1.1" 200 -
2025-04-09 10:35:31,389 - DEBUG - [app.py:152] - Table suggestions requested for workspace: dfd, query: ''
2025-04-09 10:35:31,392 - DEBUG - [app.py:528] - Workspaces list requested
2025-04-09 10:35:31,394 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:35:31] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-09 10:35:31,398 - DEBUG - [app.py:537] - Tables list requested for workspace: 
2025-04-09 10:35:31,399 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:35:31] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-09 10:35:31,403 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:35:31] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-09 10:35:31,412 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-09 10:35:31,412 - INFO - [feedback_manager.py:52] - Attempting database connection
2025-04-09 10:35:31,414 - INFO - [feedback_manager.py:56] - Database connection established in 0.00s
2025-04-09 10:35:31,415 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-09 10:35:31,423 - DEBUG - [milvus_client.py:728] - Created new connection using: cd7e88d5ae7644fdb45d6772e5e0d41a
2025-04-09 10:35:31,423 - INFO - [vector_store.py:42] - Vector database connection established in 0.01s
2025-04-09 10:35:31,425 - INFO - [feedback_manager.py:521] - Retrieved 2 samples (page 1, limit 10)
2025-04-09 10:35:31,426 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:35:31] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-09 10:35:37,417 - DEBUG - [vector_db_routes.py:53] - Vector database management page requested
2025-04-09 10:35:37,422 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:35:37] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-09 10:35:37,811 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:35:37] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-09 10:35:38,067 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:35:38] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-09 10:35:40,107 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:35:40] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-09 10:35:40,410 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:35:40] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-09 10:35:57,017 - DEBUG - [app.py:84] - Main page requested
2025-04-09 10:35:57,021 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:35:57] "GET / HTTP/1.1" 200 -
2025-04-09 10:35:57,271 - DEBUG - [app.py:152] - Table suggestions requested for workspace: dfd, query: ''
2025-04-09 10:35:57,274 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:35:57] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-09 10:37:19,943 - INFO - [app.py:222] - Schema requested for workspace: dfd
2025-04-09 10:37:19,944 - DEBUG - [app.py:249] - Schema retrieval completed in 0.001s
2025-04-09 10:37:19,947 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:37:19] "GET /api/schema?workspace=dfd HTTP/1.1" 200 -
2025-04-09 10:37:25,067 - DEBUG - [app.py:520] - Samples management page requested
2025-04-09 10:37:25,072 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:37:25] "GET /samples HTTP/1.1" 200 -
2025-04-09 10:37:25,452 - DEBUG - [app.py:152] - Table suggestions requested for workspace: dfd, query: ''
2025-04-09 10:37:25,455 - DEBUG - [app.py:528] - Workspaces list requested
2025-04-09 10:37:25,461 - DEBUG - [app.py:537] - Tables list requested for workspace: 
2025-04-09 10:37:25,463 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:37:25] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-09 10:37:25,466 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:37:25] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-09 10:37:25,477 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:37:25] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-09 10:37:25,495 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-09 10:37:25,498 - INFO - [feedback_manager.py:52] - Attempting database connection
2025-04-09 10:37:25,505 - INFO - [feedback_manager.py:56] - Database connection established in 0.01s
2025-04-09 10:37:25,507 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-09 10:37:25,524 - DEBUG - [milvus_client.py:728] - Created new connection using: cfb78939e57244cfae82e43eda230f55
2025-04-09 10:37:25,524 - INFO - [vector_store.py:42] - Vector database connection established in 0.02s
2025-04-09 10:37:25,528 - INFO - [feedback_manager.py:521] - Retrieved 2 samples (page 1, limit 10)
2025-04-09 10:37:25,529 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:37:25] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-09 10:37:28,757 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:37:28] "GET /admin/ HTTP/1.1" 200 -
2025-04-09 10:37:29,109 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:37:29] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-09 10:37:29,428 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:37:29] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-09 10:37:29,503 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 10:37:29] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-09 17:21:50,798 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 17:21:50] "[32mGET /admin/audit-logs HTTP/1.1[0m" 302 -
2025-04-09 17:21:51,104 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 17:21:51] "GET /login HTTP/1.1" 200 -
2025-04-09 17:22:02,350 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 17:22:02] "POST /login HTTP/1.1" 200 -
2025-04-09 17:22:12,339 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 17:22:12] "[32mPOST /login HTTP/1.1[0m" 302 -
2025-04-09 17:22:12,350 - DEBUG - [app.py:84] - Main page requested
2025-04-09 17:22:12,357 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 17:22:12] "GET / HTTP/1.1" 200 -
2025-04-09 17:22:12,732 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 17:22:12] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-09 17:22:12,733 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 17:22:12] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-09 17:22:12,739 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 17:22:12] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-09 17:22:12,735 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 17:22:12] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-09 17:22:12,745 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 17:22:12] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-09 17:22:12,747 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 17:22:12] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-09 17:22:13,046 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 17:22:13] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-09 17:22:13,054 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 17:22:13] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-09 17:22:13,395 - DEBUG - [app.py:152] - Table suggestions requested for workspace: dfd, query: ''
2025-04-09 17:22:13,396 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 17:22:13] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-09 17:22:18,373 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 17:22:18] "GET /admin/audit-logs HTTP/1.1" 200 -
2025-04-09 17:22:18,726 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 17:22:18] "[36mGET /static/js/admin/audit-logs.js HTTP/1.1[0m" 304 -
2025-04-09 17:23:01,290 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 17:23:01] "GET /admin/audit-logs HTTP/1.1" 200 -
2025-04-09 17:23:03,574 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 17:23:03] "GET /admin/audit-logs HTTP/1.1" 200 -
2025-04-09 17:23:13,659 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 17:23:13] "GET /admin/api/audit-logs/97 HTTP/1.1" 200 -
2025-04-09 17:23:19,897 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 17:23:19] "GET /admin/api/audit-logs/95 HTTP/1.1" 200 -
2025-04-09 17:23:25,600 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 17:23:25] "GET /admin/api/audit-logs/81 HTTP/1.1" 200 -
2025-04-09 20:38:46,286 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 20:38:46] "[32mGET / HTTP/1.1[0m" 302 -
2025-04-09 20:38:46,499 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 20:38:46] "GET /login HTTP/1.1" 200 -
2025-04-09 20:38:52,333 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 20:38:52] "[32mPOST /login HTTP/1.1[0m" 302 -
2025-04-09 20:38:52,646 - DEBUG - [app.py:84] - Main page requested
2025-04-09 20:38:52,651 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 20:38:52] "GET / HTTP/1.1" 200 -
2025-04-09 20:38:52,905 - DEBUG - [app.py:152] - Table suggestions requested for workspace: dfd, query: ''
2025-04-09 20:38:52,910 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 20:38:52] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-09 20:39:06,248 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 20:39:06] "GET /admin/ HTTP/1.1" 200 -
2025-04-09 20:39:06,604 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 20:39:06] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-09 20:39:06,860 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 20:39:06] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-09 20:39:06,950 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 20:39:06] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-09 20:39:09,538 - DEBUG - [app.py:520] - Samples management page requested
2025-04-09 20:39:09,544 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 20:39:09] "GET /samples HTTP/1.1" 200 -
2025-04-09 20:39:09,896 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 20:39:09] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-09 20:39:10,133 - DEBUG - [app.py:152] - Table suggestions requested for workspace: dfd, query: ''
2025-04-09 20:39:10,136 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 20:39:10] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-09 20:39:10,258 - DEBUG - [app.py:528] - Workspaces list requested
2025-04-09 20:39:10,261 - DEBUG - [app.py:537] - Tables list requested for workspace: 
2025-04-09 20:39:10,264 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 20:39:10] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-09 20:39:10,289 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 20:39:10] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-09 20:39:10,300 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-09 20:39:10,305 - INFO - [feedback_manager.py:52] - Attempting database connection
2025-04-09 20:39:10,325 - INFO - [feedback_manager.py:56] - Database connection established in 0.02s
2025-04-09 20:39:10,325 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-09 20:39:10,378 - DEBUG - [milvus_client.py:728] - Created new connection using: aa93222d90804610b34756f2386522c4
2025-04-09 20:39:10,378 - INFO - [vector_store.py:42] - Vector database connection established in 0.05s
2025-04-09 20:39:10,427 - INFO - [feedback_manager.py:521] - Retrieved 2 samples (page 1, limit 10)
2025-04-09 20:39:10,429 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 20:39:10] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-09 20:39:15,434 - DEBUG - [app.py:520] - Samples management page requested
2025-04-09 20:39:15,442 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 20:39:15] "GET /samples HTTP/1.1" 200 -
2025-04-09 20:39:15,777 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 20:39:15] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-09 20:39:15,803 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 20:39:15] "GET /static/js/schema-manager.js HTTP/1.1" 200 -
2025-04-09 20:39:15,804 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 20:39:15] "GET /static/js/core.js HTTP/1.1" 200 -
2025-04-09 20:39:15,807 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 20:39:15] "GET /static/js/ui-utils.js HTTP/1.1" 200 -
2025-04-09 20:39:15,808 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 20:39:15] "GET /static/js/table-mentions.js HTTP/1.1" 200 -
2025-04-09 20:39:15,813 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 20:39:15] "GET /static/js/results-display.js HTTP/1.1" 200 -
2025-04-09 20:39:16,137 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 20:39:16] "GET /static/js/dashboard.js HTTP/1.1" 200 -
2025-04-09 20:39:16,138 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 20:39:16] "GET /static/js/query-handler.js HTTP/1.1" 200 -
2025-04-09 20:39:16,139 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 20:39:16] "GET /static/js/feedback.js HTTP/1.1" 200 -
2025-04-09 20:39:16,146 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 20:39:16] "GET /static/js/samples.js HTTP/1.1" 200 -
2025-04-09 20:39:16,287 - DEBUG - [app.py:152] - Table suggestions requested for workspace: dfd, query: ''
2025-04-09 20:39:16,290 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 20:39:16] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-09 20:39:16,481 - DEBUG - [app.py:528] - Workspaces list requested
2025-04-09 20:39:16,484 - DEBUG - [app.py:537] - Tables list requested for workspace: 
2025-04-09 20:39:16,493 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 20:39:16] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-09 20:39:16,509 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 20:39:16] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-09 20:39:16,524 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-09 20:39:16,525 - INFO - [feedback_manager.py:52] - Attempting database connection
2025-04-09 20:39:16,528 - INFO - [feedback_manager.py:56] - Database connection established in 0.00s
2025-04-09 20:39:16,531 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-09 20:39:16,555 - DEBUG - [milvus_client.py:728] - Created new connection using: 5865e76684b04ab681af00552cc63a30
2025-04-09 20:39:16,561 - INFO - [vector_store.py:42] - Vector database connection established in 0.03s
2025-04-09 20:39:16,579 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 20:39:16] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-04-09 20:39:16,583 - INFO - [feedback_manager.py:521] - Retrieved 2 samples (page 1, limit 10)
2025-04-09 20:39:16,587 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 20:39:16] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-09 20:39:23,879 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 20:39:23] "GET /admin/roles HTTP/1.1" 200 -
2025-04-09 20:39:24,258 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 20:39:24] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-09 20:39:29,849 - DEBUG - [schema_routes.py:20] - Schema management page requested
2025-04-09 20:39:29,896 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 20:39:29] "GET /admin/schema HTTP/1.1" 200 -
2025-04-09 20:39:30,245 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 20:39:30] "[36mGET /static/css/admin-schema.css HTTP/1.1[0m" 304 -
2025-04-09 20:39:30,255 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 20:39:30] "[36mGET /static/js/admin/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-09 20:39:30,486 - DEBUG - [app.py:152] - Table suggestions requested for workspace: dfd, query: ''
2025-04-09 20:39:30,487 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 20:39:30] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-09 20:39:30,598 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 20:39:30] "GET /admin/api/schema/workspaces HTTP/1.1" 200 -
2025-04-09 20:39:30,604 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 20:39:30] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-09 20:39:30,609 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 20:39:30] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-09 20:39:34,577 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 20:39:34] "GET /admin/api/schema/workspaces/dfd HTTP/1.1" 200 -
2025-04-09 20:39:45,920 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 20:39:45] "GET /admin/audit-logs HTTP/1.1" 200 -
2025-04-09 20:39:46,115 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 20:39:46] "[36mGET /static/js/admin/audit-logs.js HTTP/1.1[0m" 304 -
2025-04-09 20:39:52,931 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 20:39:52] "GET /admin/audit-logs?page=2 HTTP/1.1" 200 -
2025-04-09 20:39:57,039 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 20:39:57] "GET /admin/api/audit-logs/31 HTTP/1.1" 200 -
2025-04-09 20:46:05,725 - DEBUG - [app.py:84] - Main page requested
2025-04-09 20:46:05,732 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 20:46:05] "GET / HTTP/1.1" 200 -
2025-04-09 20:46:05,949 - DEBUG - [app.py:152] - Table suggestions requested for workspace: dfd, query: ''
2025-04-09 20:46:05,951 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 20:46:05] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-09 20:47:04,252 - DEBUG - [app.py:84] - Main page requested
2025-04-09 20:47:04,260 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 20:47:04] "GET / HTTP/1.1" 200 -
2025-04-09 20:47:04,692 - DEBUG - [app.py:152] - Table suggestions requested for workspace: dfd, query: ''
2025-04-09 20:47:04,694 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 20:47:04] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-09 20:47:09,008 - DEBUG - [app.py:84] - Main page requested
2025-04-09 20:47:09,011 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 20:47:09] "GET / HTTP/1.1" 200 -
2025-04-09 20:47:09,376 - DEBUG - [app.py:152] - Table suggestions requested for workspace: dfd, query: ''
2025-04-09 20:47:09,378 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 20:47:09] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-09 20:47:10,062 - DEBUG - [app.py:84] - Main page requested
2025-04-09 20:47:10,066 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 20:47:10] "GET / HTTP/1.1" 200 -
2025-04-09 20:47:10,430 - DEBUG - [app.py:152] - Table suggestions requested for workspace: dfd, query: ''
2025-04-09 20:47:10,433 - INFO - [_internal.py:224] - 127.0.0.1 - - [09/Apr/2025 20:47:10] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-09 20:47:54,320 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/utils/feedback_manager.py', reloading
2025-04-09 20:47:54,322 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/utils/feedback_manager.py', reloading
2025-04-09 20:47:54,323 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/utils/feedback_manager.py', reloading
2025-04-09 20:47:55,327 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-09 20:47:55,328 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-09 20:47:55,328 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-09 20:47:55,329 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-09 20:47:55,330 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-09 20:47:55,330 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-09 20:47:55,331 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-09 20:47:55,331 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-09 20:47:55,331 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-09 20:47:55,332 - INFO - [database.py:258] - Closing database connection
2025-04-09 20:47:55,332 - INFO - [feedback_manager.py:757] - Closing database connections
2025-04-09 20:47:55,333 - INFO - [vector_store.py:340] - Closing vector database connection
2025-04-09 20:47:59,884 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-09 20:48:14,047 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 20:48:14,048 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 20:48:14,048 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 20:48:14,049 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 20:48:14,050 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-09 20:48:14,075 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-09 20:48:14,081 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-09 20:48:14,081 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-09 20:48:14,158 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-09 20:48:14,158 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 20:48:14,159 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 20:48:14,159 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 20:48:14,159 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 20:48:14,160 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-09 20:48:14,160 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-09 20:48:14,209 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-09 20:48:14,209 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 20:48:14,210 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 20:48:14,210 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 20:48:14,211 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 20:48:14,211 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-09 20:48:14,211 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-09 20:48:14,262 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-09 20:48:14,262 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 20:48:14,262 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 20:48:14,263 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 20:48:14,263 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 20:48:14,263 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-09 20:48:14,263 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-09 20:48:14,264 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-09 20:48:14,316 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-09 20:48:14,316 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-09 20:48:14,316 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-09 20:48:14,316 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-09 20:48:14,317 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-09 20:48:14,317 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-09 20:48:14,317 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-09 20:48:14,317 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-09 20:48:14,412 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-09 20:48:14,415 - INFO - [_internal.py:224] -  * Debugger PIN: 501-040-382
2025-04-10 00:11:28,011 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:11:28] "[32mGET / HTTP/1.1[0m" 302 -
2025-04-10 00:11:28,244 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:11:28] "GET /login HTTP/1.1" 200 -
2025-04-10 00:11:28,360 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:11:28] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-04-10 00:11:34,922 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:11:34] "[32mPOST /login HTTP/1.1[0m" 302 -
2025-04-10 00:11:35,252 - DEBUG - [app.py:84] - Main page requested
2025-04-10 00:11:35,270 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:11:35] "GET / HTTP/1.1" 200 -
2025-04-10 00:11:35,498 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:11:35] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-10 00:11:35,656 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:11:35] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-10 00:11:35,667 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:11:35] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-10 00:11:35,676 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:11:35] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-10 00:11:35,681 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:11:35] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-10 00:11:35,682 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:11:35] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-10 00:11:35,815 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:11:35] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-10 00:11:35,970 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:11:35] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-10 00:11:36,313 - DEBUG - [app.py:152] - Table suggestions requested for workspace: dfd, query: ''
2025-04-10 00:11:36,314 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:11:36] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-10 00:12:22,542 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:12:22] "[32mGET /logout HTTP/1.1[0m" 302 -
2025-04-10 00:12:22,835 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:12:22] "GET /login HTTP/1.1" 200 -
2025-04-10 00:12:26,269 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:12:26] "GET /login HTTP/1.1" 200 -
2025-04-10 00:12:29,784 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:12:29] "POST /login HTTP/1.1" 200 -
2025-04-10 00:12:35,427 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:12:35] "POST /login HTTP/1.1" 200 -
2025-04-10 00:12:35,804 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:12:35] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-10 00:12:36,053 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:12:36] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-04-10 00:13:02,519 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:13:02] "POST /login HTTP/1.1" 200 -
2025-04-10 00:13:07,573 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-10 00:13:07,573 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-10 00:13:07,574 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-10 00:13:07,574 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-10 00:13:07,574 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-10 00:13:07,574 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-10 00:13:07,575 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-10 00:13:07,575 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-10 00:13:07,575 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-10 00:13:07,576 - INFO - [database.py:258] - Closing database connection
2025-04-10 00:13:07,576 - INFO - [feedback_manager.py:762] - Closing database connections
2025-04-10 00:13:07,576 - INFO - [vector_store.py:340] - Closing vector database connection
2025-04-10 00:13:07,764 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-10 00:13:07,770 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-10 00:13:07,771 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-10 00:13:07,772 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-10 00:13:07,772 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-10 00:13:07,773 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-10 00:13:07,773 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-10 00:13:07,774 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-10 00:13:07,774 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-10 00:13:07,775 - INFO - [database.py:258] - Closing database connection
2025-04-10 00:13:07,776 - INFO - [feedback_manager.py:751] - Closing database connections
2025-04-10 00:13:07,777 - INFO - [vector_store.py:288] - Closing vector database connection
2025-04-10 00:13:35,691 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-10 00:13:35,693 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-10 00:13:35,694 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-10 00:13:35,696 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-10 00:13:35,699 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-10 00:13:35,776 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-10 00:13:35,795 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-10 00:13:35,796 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-10 00:13:35,982 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-10 00:13:35,982 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-10 00:13:35,983 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-10 00:13:35,984 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-10 00:13:35,984 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-10 00:13:35,985 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-10 00:13:35,985 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-10 00:13:36,129 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-10 00:13:36,130 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-10 00:13:36,131 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-10 00:13:36,131 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-10 00:13:36,132 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-10 00:13:36,132 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-10 00:13:36,132 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-10 00:13:36,327 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-10 00:13:36,337 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-10 00:13:36,359 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-10 00:13:36,360 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-10 00:13:36,360 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-10 00:13:36,361 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-10 00:13:36,361 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-10 00:13:36,362 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-10 00:13:36,511 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-10 00:13:36,512 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-10 00:13:36,512 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-10 00:13:36,513 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-10 00:13:36,514 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-10 00:13:36,514 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-10 00:13:36,515 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-10 00:13:36,516 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-10 00:13:36,658 - INFO - [_internal.py:224] - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.27.251.157:5000
2025-04-10 00:13:36,659 - INFO - [_internal.py:224] - [33mPress CTRL+C to quit[0m
2025-04-10 00:13:36,682 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-10 00:13:46,103 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-10 00:13:46,103 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-10 00:13:46,104 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-10 00:13:46,104 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-10 00:13:46,105 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-10 00:13:46,116 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-10 00:13:46,120 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-10 00:13:46,120 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-10 00:13:46,214 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-10 00:13:46,215 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-10 00:13:46,215 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-10 00:13:46,216 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-10 00:13:46,216 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-10 00:13:46,217 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-10 00:13:46,217 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-10 00:13:46,303 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-10 00:13:46,303 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-10 00:13:46,304 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-10 00:13:46,304 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-10 00:13:46,305 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-10 00:13:46,306 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-10 00:13:46,306 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-10 00:13:46,390 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-10 00:13:46,390 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-10 00:13:46,391 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-10 00:13:46,392 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-10 00:13:46,392 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-10 00:13:46,392 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-10 00:13:46,392 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-10 00:13:46,393 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-10 00:13:46,493 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-10 00:13:46,494 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-10 00:13:46,494 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-10 00:13:46,495 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-10 00:13:46,496 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-10 00:13:46,497 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-10 00:13:46,497 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-10 00:13:46,498 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-10 00:13:46,603 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-10 00:13:46,614 - INFO - [_internal.py:224] -  * Debugger PIN: 501-040-382
2025-04-10 00:13:56,112 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:13:56] "[32mGET / HTTP/1.1[0m" 302 -
2025-04-10 00:13:56,145 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:13:56] "GET /login?next=http%3A%2F%2Flocalhost%3A5000%2F HTTP/1.1" 200 -
2025-04-10 00:14:03,349 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:14:03] "POST /login HTTP/1.1" 200 -
2025-04-10 00:18:02,071 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:18:02] "GET /login HTTP/1.1" 200 -
2025-04-10 00:18:09,000 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:18:09] "GET /login HTTP/1.1" 200 -
2025-04-10 00:18:09,388 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:18:09] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-10 00:18:09,625 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:18:09] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-04-10 00:18:18,207 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-10 00:18:18,208 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-10 00:18:18,208 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-10 00:18:18,208 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-10 00:18:18,208 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-10 00:18:18,208 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-10 00:18:18,208 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-10 00:18:18,208 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-10 00:18:18,209 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-10 00:18:18,209 - INFO - [database.py:258] - Closing database connection
2025-04-10 00:18:18,209 - INFO - [feedback_manager.py:762] - Closing database connections
2025-04-10 00:18:18,209 - INFO - [vector_store.py:340] - Closing vector database connection
2025-04-10 00:18:33,963 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-10 00:18:33,963 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-10 00:18:33,964 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-10 00:18:33,964 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-10 00:18:33,965 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-10 00:18:33,976 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-10 00:18:33,980 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-10 00:18:33,981 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-10 00:18:34,047 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-10 00:18:34,047 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-10 00:18:34,047 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-10 00:18:34,048 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-10 00:18:34,048 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-10 00:18:34,048 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-10 00:18:34,048 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-10 00:18:34,104 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-10 00:18:34,104 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-10 00:18:34,105 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-10 00:18:34,105 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-10 00:18:34,105 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-10 00:18:34,106 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-10 00:18:34,106 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-10 00:18:34,170 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-10 00:18:34,171 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-10 00:18:34,171 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-10 00:18:34,171 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-10 00:18:34,172 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-10 00:18:34,172 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-10 00:18:34,172 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-10 00:18:34,173 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-10 00:18:34,242 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-10 00:18:34,243 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-10 00:18:34,243 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-10 00:18:34,243 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-10 00:18:34,244 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-10 00:18:34,245 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-10 00:18:34,245 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-10 00:18:34,245 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-10 00:18:34,316 - INFO - [_internal.py:224] - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.27.251.157:5000
2025-04-10 00:18:34,317 - INFO - [_internal.py:224] - [33mPress CTRL+C to quit[0m
2025-04-10 00:18:34,324 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-10 00:18:41,698 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-10 00:18:41,698 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-10 00:18:41,699 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-10 00:18:41,699 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-10 00:18:41,700 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-10 00:18:41,711 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-10 00:18:41,715 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-10 00:18:41,715 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-10 00:18:41,931 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-10 00:18:41,932 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-10 00:18:41,933 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-10 00:18:41,933 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-10 00:18:41,934 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-10 00:18:41,934 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-10 00:18:41,934 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-10 00:18:42,053 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-10 00:18:42,054 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-10 00:18:42,055 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-10 00:18:42,055 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-10 00:18:42,056 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-10 00:18:42,057 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-10 00:18:42,057 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-10 00:18:42,153 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-10 00:18:42,154 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-10 00:18:42,154 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-10 00:18:42,155 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-10 00:18:42,155 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-10 00:18:42,156 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-10 00:18:42,156 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-10 00:18:42,156 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-10 00:18:42,259 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-10 00:18:42,260 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-10 00:18:42,260 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-10 00:18:42,260 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-10 00:18:42,261 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-10 00:18:42,261 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-10 00:18:42,262 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-10 00:18:42,262 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-10 00:18:42,430 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-10 00:18:42,431 - INFO - [_internal.py:224] -  * Debugger PIN: 501-040-382
2025-04-10 00:18:44,006 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:18:44] "GET /login HTTP/1.1" 200 -
2025-04-10 00:18:55,855 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:18:55] "[32mPOST /login HTTP/1.1[0m" 302 -
2025-04-10 00:18:56,163 - DEBUG - [app.py:84] - Main page requested
2025-04-10 00:18:56,176 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:18:56] "GET / HTTP/1.1" 200 -
2025-04-10 00:18:56,416 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:18:56] "[36mGET /static/js/ui-utils.js HTTP/1.1[0m" 304 -
2025-04-10 00:18:56,548 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:18:56] "[36mGET /static/js/table-mentions.js HTTP/1.1[0m" 304 -
2025-04-10 00:18:56,552 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:18:56] "[36mGET /static/js/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-10 00:18:56,553 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:18:56] "[36mGET /static/js/core.js HTTP/1.1[0m" 304 -
2025-04-10 00:18:56,561 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:18:56] "[36mGET /static/js/results-display.js HTTP/1.1[0m" 304 -
2025-04-10 00:18:56,565 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:18:56] "[36mGET /static/js/feedback.js HTTP/1.1[0m" 304 -
2025-04-10 00:18:56,723 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:18:56] "[36mGET /static/js/dashboard.js HTTP/1.1[0m" 304 -
2025-04-10 00:18:56,872 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:18:56] "[36mGET /static/js/query-handler.js HTTP/1.1[0m" 304 -
2025-04-10 00:18:57,201 - DEBUG - [app.py:152] - Table suggestions requested for workspace: dfd, query: ''
2025-04-10 00:18:57,202 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:18:57] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-10 00:19:03,363 - DEBUG - [app.py:84] - Main page requested
2025-04-10 00:19:03,366 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:19:03] "GET / HTTP/1.1" 200 -
2025-04-10 00:19:03,725 - DEBUG - [app.py:152] - Table suggestions requested for workspace: dfd, query: ''
2025-04-10 00:19:03,726 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:19:03] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-10 00:19:05,108 - INFO - [app.py:222] - Schema requested for workspace: dfd
2025-04-10 00:19:05,108 - DEBUG - [app.py:249] - Schema retrieval completed in 0.001s
2025-04-10 00:19:05,110 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:19:05] "GET /api/schema?workspace=dfd HTTP/1.1" 200 -
2025-04-10 00:19:07,832 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:19:07] "GET /admin/ HTTP/1.1" 200 -
2025-04-10 00:19:08,064 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:19:08] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-10 00:19:08,190 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:19:08] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-10 00:19:08,380 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:19:08] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-10 00:19:15,749 - DEBUG - [app.py:520] - Samples management page requested
2025-04-10 00:19:15,754 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:19:15] "GET /samples HTTP/1.1" 200 -
2025-04-10 00:19:16,005 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:19:16] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-10 00:19:16,091 - DEBUG - [app.py:152] - Table suggestions requested for workspace: dfd, query: ''
2025-04-10 00:19:16,092 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:19:16] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-10 00:19:16,312 - DEBUG - [app.py:528] - Workspaces list requested
2025-04-10 00:19:16,313 - DEBUG - [app.py:537] - Tables list requested for workspace: 
2025-04-10 00:19:16,317 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:19:16] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-10 00:19:16,319 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:19:16] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-10 00:19:16,320 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-10 00:19:16,322 - INFO - [feedback_manager.py:52] - Attempting database connection
2025-04-10 00:19:16,324 - INFO - [feedback_manager.py:56] - Database connection established in 0.00s
2025-04-10 00:19:16,324 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-10 00:19:17,387 - DEBUG - [milvus_client.py:728] - Created new connection using: dd008cf857d1431e8de2f901f5bde9cf
2025-04-10 00:19:17,387 - INFO - [vector_store.py:42] - Vector database connection established in 1.06s
2025-04-10 00:19:17,390 - INFO - [feedback_manager.py:521] - Retrieved 2 samples (page 1, limit 10)
2025-04-10 00:19:17,391 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:19:17] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-10 00:19:19,217 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:19:19] "GET /admin/users HTTP/1.1" 200 -
2025-04-10 00:19:19,559 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:19:19] "[36mGET /static/js/admin/users.js HTTP/1.1[0m" 304 -
2025-04-10 00:19:23,926 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:19:23] "GET /admin/users HTTP/1.1" 200 -
2025-04-10 00:19:25,092 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:19:25] "GET /admin/users HTTP/1.1" 200 -
2025-04-10 00:19:28,098 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:19:28] "GET /admin/users HTTP/1.1" 200 -
2025-04-10 00:19:31,405 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:19:31] "GET /admin/roles HTTP/1.1" 200 -
2025-04-10 00:19:31,639 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:19:31] "[36mGET /static/js/admin/roles.js HTTP/1.1[0m" 304 -
2025-04-10 00:19:37,328 - DEBUG - [schema_routes.py:20] - Schema management page requested
2025-04-10 00:19:37,334 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:19:37] "GET /admin/schema HTTP/1.1" 200 -
2025-04-10 00:19:37,683 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:19:37] "[36mGET /static/css/admin-schema.css HTTP/1.1[0m" 304 -
2025-04-10 00:19:37,685 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:19:37] "[36mGET /static/js/admin/schema-manager.js HTTP/1.1[0m" 304 -
2025-04-10 00:19:37,920 - DEBUG - [app.py:152] - Table suggestions requested for workspace: dfd, query: ''
2025-04-10 00:19:37,921 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:19:37] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-10 00:19:38,000 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:19:38] "GET /admin/api/schema/workspaces HTTP/1.1" 200 -
2025-04-10 00:19:38,005 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:19:38] "GET /admin/api/schema/joins HTTP/1.1" 200 -
2025-04-10 00:19:38,008 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:19:38] "GET /admin/api/schema/tables HTTP/1.1" 200 -
2025-04-10 00:19:41,043 - DEBUG - [vector_db_routes.py:53] - Vector database management page requested
2025-04-10 00:19:41,052 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:19:41] "GET /admin/vector-db HTTP/1.1" 200 -
2025-04-10 00:19:41,408 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:19:41] "[36mGET /static/js/admin/vector_db.js HTTP/1.1[0m" 304 -
2025-04-10 00:19:41,652 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-10 00:19:41,656 - DEBUG - [milvus_client.py:728] - Created new connection using: 7c1745e7b4804d31bf49f2a8380894dc
2025-04-10 00:19:41,656 - INFO - [vector_store.py:42] - Vector database connection established in 0.00s
2025-04-10 00:19:41,669 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:19:41] "GET /admin/api/vector-db/collections HTTP/1.1" 200 -
2025-04-10 00:19:41,740 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:19:41] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-10 00:19:43,516 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:19:43] "GET /admin/api/vector-db/collections/query_embeddings HTTP/1.1" 200 -
2025-04-10 00:19:43,856 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:19:43] "GET /admin/api/vector-db/collections/query_embeddings/data?limit=20&offset=0 HTTP/1.1" 200 -
2025-04-10 00:19:48,289 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:19:48] "GET /admin/audit-logs HTTP/1.1" 200 -
2025-04-10 00:19:48,499 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:19:48] "[36mGET /static/js/admin/audit-logs.js HTTP/1.1[0m" 304 -
2025-04-10 00:19:53,991 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:19:53] "GET /admin/api/audit-logs/97 HTTP/1.1" 200 -
2025-04-10 00:19:56,822 - DEBUG - [app.py:84] - Main page requested
2025-04-10 00:19:56,825 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:19:56] "GET / HTTP/1.1" 200 -
2025-04-10 00:19:57,065 - DEBUG - [app.py:152] - Table suggestions requested for workspace: dfd, query: ''
2025-04-10 00:19:57,066 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:19:57] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-10 00:37:06,046 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/utils/azure_client.py', reloading
2025-04-10 00:37:06,048 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/utils/azure_client.py', reloading
2025-04-10 00:37:06,073 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/utils/azure_client.py', reloading
2025-04-10 00:37:08,763 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-10 00:37:08,764 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-10 00:37:08,765 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-10 00:37:08,765 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-10 00:37:08,765 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-10 00:37:08,765 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-10 00:37:08,766 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-10 00:37:08,766 - INFO - [azure_client.py:186] - Closing Azure AI client connection
2025-04-10 00:37:08,767 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-10 00:37:08,767 - INFO - [database.py:258] - Closing database connection
2025-04-10 00:37:08,767 - INFO - [feedback_manager.py:762] - Closing database connections
2025-04-10 00:37:08,768 - INFO - [vector_store.py:340] - Closing vector database connection
2025-04-10 00:37:11,683 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-10 00:37:19,672 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-10 00:37:19,673 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-10 00:37:19,674 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-10 00:37:19,674 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-10 00:37:19,675 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-10 00:37:19,692 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-10 00:37:19,700 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-10 00:37:19,701 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-10 00:37:19,800 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-10 00:37:19,801 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-10 00:37:19,802 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-10 00:37:19,802 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-10 00:37:19,802 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-10 00:37:19,803 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-10 00:37:19,803 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-10 00:37:19,886 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-10 00:37:19,886 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-10 00:37:19,887 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-10 00:37:19,887 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-10 00:37:19,888 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-10 00:37:19,888 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-10 00:37:19,889 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-10 00:37:20,066 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-10 00:37:20,067 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-10 00:37:20,068 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-10 00:37:20,068 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-10 00:37:20,069 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-10 00:37:20,069 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-10 00:37:20,070 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-10 00:37:20,070 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-10 00:37:20,230 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-10 00:37:20,231 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-10 00:37:20,231 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-10 00:37:20,231 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-10 00:37:20,232 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-10 00:37:20,232 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-10 00:37:20,233 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-10 00:37:20,233 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-10 00:37:20,325 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-10 00:37:20,326 - INFO - [_internal.py:224] -  * Debugger PIN: 501-040-382
2025-04-10 00:42:41,757 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/utils/azure_client.py', reloading
2025-04-10 00:42:41,758 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/utils/azure_client.py', reloading
2025-04-10 00:42:41,765 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/models/sql_generator.py', reloading
2025-04-10 00:42:41,766 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/models/sql_generator.py', reloading
2025-04-10 00:42:41,769 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/utils/azure_client.py', reloading
2025-04-10 00:42:41,771 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/models/sql_generator.py', reloading
2025-04-10 00:42:42,772 - INFO - [sql_generator.py:422] - Closing all agent connections
2025-04-10 00:42:42,772 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-10 00:42:42,773 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-10 00:42:42,773 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-10 00:42:42,773 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-10 00:42:42,773 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-10 00:42:42,773 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-10 00:42:42,773 - INFO - [azure_client.py:302] - Closing Azure AI client connection
2025-04-10 00:42:42,774 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-10 00:42:42,774 - INFO - [database.py:258] - Closing database connection
2025-04-10 00:42:42,774 - INFO - [feedback_manager.py:762] - Closing database connections
2025-04-10 00:42:42,774 - INFO - [vector_store.py:340] - Closing vector database connection
2025-04-10 00:42:43,973 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-10 00:42:57,254 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-10 00:42:57,255 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-10 00:42:57,255 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-10 00:42:57,256 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-10 00:42:57,257 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-10 00:42:57,286 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-10 00:42:57,293 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-10 00:42:57,294 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-10 00:42:57,412 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-10 00:42:57,413 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-10 00:42:57,414 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-10 00:42:57,414 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-10 00:42:57,414 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-10 00:42:57,415 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-10 00:42:57,415 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-10 00:42:57,514 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-10 00:42:57,515 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-10 00:42:57,515 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-10 00:42:57,516 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-10 00:42:57,516 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-10 00:42:57,516 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-10 00:42:57,517 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-10 00:42:57,615 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-10 00:42:57,616 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-10 00:42:57,617 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-10 00:42:57,617 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-10 00:42:57,618 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-10 00:42:57,618 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-10 00:42:57,619 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-10 00:42:57,619 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-10 00:42:57,707 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-10 00:42:57,707 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-10 00:42:57,708 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-10 00:42:57,708 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-10 00:42:57,708 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-10 00:42:57,709 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-10 00:42:57,709 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-10 00:42:57,709 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-10 00:42:57,794 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-10 00:42:57,795 - INFO - [_internal.py:224] -  * Debugger PIN: 501-040-382
2025-04-10 00:42:58,841 - DEBUG - [app.py:84] - Main page requested
2025-04-10 00:42:58,868 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:42:58] "GET / HTTP/1.1" 200 -
2025-04-10 00:42:59,062 - DEBUG - [app.py:152] - Table suggestions requested for workspace: dfd, query: ''
2025-04-10 00:42:59,065 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:42:59] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-10 00:43:10,139 - INFO - [sql_generator.py:37] - Processing query: 'get me count of customers by state'
2025-04-10 00:43:10,140 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:43:10] "POST /api/query HTTP/1.1" 200 -
2025-04-10 00:43:10,140 - INFO - [intent_agent.py:27] - Intent detection started for query: 'get me count of customers by state'
2025-04-10 00:43:10,142 - INFO - [intent_agent.py:38] - Using default intent 'data_retrieval' without calling LLM
2025-04-10 00:43:10,143 - INFO - [intent_agent.py:41] - Intent detection completed in 0.00s
2025-04-10 00:43:10,144 - INFO - [sql_generator.py:45] - Detected intent: data_retrieval
2025-04-10 00:43:10,145 - INFO - [sql_generator.py:141] - Starting SQL generation process
2025-04-10 00:43:10,145 - INFO - [database.py:44] - Attempting database connection
2025-04-10 00:43:10,147 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-10 00:43:10,147 - INFO - [table_agent.py:28] - Table selection started for query: 'get me count of customers by state'
2025-04-10 00:43:10,148 - INFO - [table_agent.py:34] - Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-10 00:43:10,148 - INFO - [table_agent.py:64] - Sending request to AI model for table selection
2025-04-10 00:43:10,149 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-10 00:43:10,149 - DEBUG - [llm_engine.py:87] - [TABLE] Prompt: [{'role': 'system', 'content': "You are a table selection agent for a Text-to-SQL system.\nYour job is to identify which database tables are most relevant to a user query.\nYou will be provided with table names and their descriptions.\nReturn ONLY the names of relevant tables, separated by commas. Be selective and choose\nonly the tables that are directly needed to answer the query. If you're unsure,\ninclude tables that might be related. Return only table names in your response."}, {'role': 'us... (truncated)
2025-04-10 00:43:10,149 - DEBUG - [llm_engine.py:96] - [TABLE] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 00:43:10,632 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:43:10] "GET /api/query/progress/f26b90fb-8f24-48d4-9ec7-76cd8e1c3820 HTTP/1.1" 200 -
2025-04-10 00:43:11,413 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:43:11] "GET /api/query/progress/f26b90fb-8f24-48d4-9ec7-76cd8e1c3820 HTTP/1.1" 200 -
2025-04-10 00:43:11,682 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:43:11] "GET /api/query/progress/f26b90fb-8f24-48d4-9ec7-76cd8e1c3820 HTTP/1.1" 200 -
2025-04-10 00:43:11,974 - DEBUG - [llm_engine.py:107] - [TABLE] Model response received in 1.82s
2025-04-10 00:43:11,974 - DEBUG - [llm_engine.py:116] - [TABLE] Raw model response: 'customers'
2025-04-10 00:43:11,976 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 1.83s
2025-04-10 00:43:11,976 - INFO - [llm_engine.py:120] - **************************
2025-04-10 00:43:11,977 - INFO - [table_agent.py:69] - Raw model response: 'customers'
2025-04-10 00:43:11,979 - INFO - [table_agent.py:90] - Table selection completed in 1.83s. Selected: customers
2025-04-10 00:43:11,980 - INFO - [column_agent.py:29] - Column pruning started for query: 'get me count of customers by state'
2025-04-10 00:43:11,981 - INFO - [column_agent.py:30] - Processing tables: customers
2025-04-10 00:43:11,982 - INFO - [column_agent.py:38] - Only one table involved (customers). Skipping LLM call and including all columns.
2025-04-10 00:43:11,984 - INFO - [feedback_manager.py:265] - Stage 1: Vector search for 'get me count of customers by state...'
2025-04-10 00:43:11,984 - INFO - [feedback_manager.py:77] - Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-10 00:43:12,071 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:43:12] "GET /api/query/progress/f26b90fb-8f24-48d4-9ec7-76cd8e1c3820 HTTP/1.1" 200 -
2025-04-10 00:43:12,838 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:43:12] "GET /api/query/progress/f26b90fb-8f24-48d4-9ec7-76cd8e1c3820 HTTP/1.1" 200 -
2025-04-10 00:43:13,081 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:43:13] "GET /api/query/progress/f26b90fb-8f24-48d4-9ec7-76cd8e1c3820 HTTP/1.1" 200 -
2025-04-10 00:43:13,657 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:43:13] "GET /api/query/progress/f26b90fb-8f24-48d4-9ec7-76cd8e1c3820 HTTP/1.1" 200 -
2025-04-10 00:43:14,885 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:43:14] "GET /api/query/progress/f26b90fb-8f24-48d4-9ec7-76cd8e1c3820 HTTP/1.1" 200 -
2025-04-10 00:43:15,205 - INFO - [feedback_manager.py:80] - Embedding model loaded in 3.22s
2025-04-10 00:43:15,436 - DEBUG - [feedback_manager.py:105] - Generated embedding in 0.23s with shape (384,)
2025-04-10 00:43:15,436 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-10 00:43:15,547 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:43:15] "GET /api/query/progress/f26b90fb-8f24-48d4-9ec7-76cd8e1c3820 HTTP/1.1" 200 -
2025-04-10 00:43:16,471 - DEBUG - [milvus_client.py:728] - Created new connection using: c4b5c781e9f1497ca1607f47b433834e
2025-04-10 00:43:16,471 - INFO - [vector_store.py:42] - Vector database connection established in 1.04s
2025-04-10 00:43:16,475 - ERROR - [vector_store.py:215] - Error searching similar vectors in collection query_embeddings: argument of type 'NoneType' is not iterable
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/vector_store.py", line 176, in search_similar
    if "id" not in output_fields and not any(f.lower() == 'id' for f in output_fields):
       ^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: argument of type 'NoneType' is not iterable
2025-04-10 00:43:16,477 - WARNING - [feedback_manager.py:288] - No candidates found from vector search, falling back to text-based search
2025-04-10 00:43:16,477 - INFO - [feedback_manager.py:52] - Attempting database connection
2025-04-10 00:43:16,479 - INFO - [feedback_manager.py:56] - Database connection established in 0.00s
2025-04-10 00:43:16,480 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-10 00:43:16,490 - DEBUG - [milvus_client.py:728] - Created new connection using: c3cd06df2d194b6f88c773096214c52b
2025-04-10 00:43:16,491 - INFO - [vector_store.py:42] - Vector database connection established in 0.01s
2025-04-10 00:43:16,495 - INFO - [feedback_manager.py:402] - Found 0 similar queries using text-based search for 'get me count of customers by state...'
2025-04-10 00:43:16,495 - INFO - [azure_client.py:35] - SQL generation started for query: 'get me count of customers by state'
2025-04-10 00:43:16,497 - INFO - [azure_client.py:69] - Including schema information (587 chars)
2025-04-10 00:43:16,497 - INFO - [azure_client.py:104] - Including 3 SQL examples (no similarity examples found)
2025-04-10 00:43:16,499 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some example queries and their SQL:\nQuestion: How many records are in the customers table?\nSQL: SELECT COUNT(*) AS record_count FROM customers\n\nQuestion: Get all columns from customers\nSQL: SELECT * FROM customers LIMIT 5\n\nQuestion: Get record from customers by customer_id\nSQL: SELECT * FROM customers WHERE customer_id = 1\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me count of customers by state'}]
2025-04-10 00:43:16,500 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-10 00:43:16,501 - DEBUG - [llm_engine.py:87] - [SQL_GEN] Prompt: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief ... (truncated)
2025-04-10 00:43:16,502 - DEBUG - [llm_engine.py:96] - [SQL_GEN] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 00:43:16,806 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:43:16] "GET /api/query/progress/f26b90fb-8f24-48d4-9ec7-76cd8e1c3820 HTTP/1.1" 200 -
2025-04-10 00:43:17,718 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:43:17] "GET /api/query/progress/f26b90fb-8f24-48d4-9ec7-76cd8e1c3820 HTTP/1.1" 200 -
2025-04-10 00:43:19,974 - DEBUG - [llm_engine.py:107] - [SQL_GEN] Model response received in 3.47s
2025-04-10 00:43:19,974 - DEBUG - [llm_engine.py:116] - [SQL_GEN] Raw model response: 'Here's a query that will return the number of customers grouped by their state:

```sql
SELECT 
    state, 
    COUNT(*) AS customer_count
FROM 
    customers
GROUP BY 
    state
```'
2025-04-10 00:43:19,975 - INFO - [llm_engine.py:119] - [SQL_GEN] Completion generation completed in 3.48s
2025-04-10 00:43:19,976 - INFO - [llm_engine.py:120] - **************************
2025-04-10 00:43:19,977 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-10 00:43:19,977 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-10 00:43:19,978 - INFO - [azure_client.py:171] - Extracted SQL query (90 chars) and explanation (79 chars)
2025-04-10 00:43:19,979 - INFO - [azure_client.py:124] - Generated SQL: SELECT 
    state, 
    COUNT(*) AS customer_count
FROM 
    customers
GROUP BY 
    state
2025-04-10 00:43:19,980 - INFO - [azure_client.py:132] - SQL generation completed in 3.48s
2025-04-10 00:43:19,981 - INFO - [database.py:65] - Executing SQL query: SELECT 
    state, 
    COUNT(*) AS customer_count
FROM 
    customers
GROUP BY 
    state
2025-04-10 00:43:19,983 - DEBUG - [database.py:76] - Query execution started
2025-04-10 00:43:19,985 - DEBUG - [database.py:81] - Query execution completed in 0.00s
2025-04-10 00:43:20,000 - INFO - [database.py:86] - Query returned 5 rows with 2 columns
2025-04-10 00:43:20,013 - DEBUG - [database.py:92] - Sample data (first 3 rows):
  state  customer_count
0    CA               1
1    FL               1
2    IL               1
2025-04-10 00:43:20,013 - INFO - [database.py:95] - Query processing completed in 0.03s
2025-04-10 00:43:20,017 - INFO - [sql_generator.py:336] - Analyzing query results for dashboard potential
2025-04-10 00:43:20,018 - INFO - [azure_client.py:197] - Dashboard analysis started for query: 'get me count of customers by state'
2025-04-10 00:43:20,019 - INFO - [llm_engine.py:56] - [DASHBOARD_ANALYSIS] Completion generation started
2025-04-10 00:43:20,020 - DEBUG - [llm_engine.py:87] - [DASHBOARD_ANALYSIS] Prompt: [{'role': 'system', 'content': 'You are a data visualization expert. Analyze the given query results and determine if they\'re suitable for a dashboard visualization.\n\nYour task is to:\n1. Analyze the columns and data\n2. Determine if the data is suitable for visualization (has numeric values and categorical data)\n3. If suitable, recommend the best chart type (bar, line, pie, etc.)\n4. Identify the best columns for X and Y axes (or equivalent based on chart type)\n5. Suggest meaningful labels... (truncated)
2025-04-10 00:43:20,020 - DEBUG - [llm_engine.py:96] - [DASHBOARD_ANALYSIS] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 00:43:20,342 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:43:20] "GET /api/query/progress/f26b90fb-8f24-48d4-9ec7-76cd8e1c3820 HTTP/1.1" 200 -
2025-04-10 00:43:21,002 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:43:21] "GET /api/query/progress/f26b90fb-8f24-48d4-9ec7-76cd8e1c3820 HTTP/1.1" 200 -
2025-04-10 00:43:21,614 - DEBUG - [llm_engine.py:107] - [DASHBOARD_ANALYSIS] Model response received in 1.59s
2025-04-10 00:43:21,614 - DEBUG - [llm_engine.py:116] - [DASHBOARD_ANALYSIS] Raw model response: '{
  "is_suitable": true,
  "reason": "The data contains categorical states and a numeric customer count, making it suitable for comparing customer counts across states.",
  "chart_type": "bar",
  "x_axis": {
    "column": "state",
    "label": "State"
  },
  "y_axis": {
    "column": "customer_count",
    "label": "Number of Customers"
  },
  "title": "Customer Count by State"
}'
2025-04-10 00:43:21,614 - INFO - [llm_engine.py:119] - [DASHBOARD_ANALYSIS] Completion generation completed in 1.60s
2025-04-10 00:43:21,615 - INFO - [llm_engine.py:120] - **************************
2025-04-10 00:43:21,616 - INFO - [azure_client.py:255] - Dashboard analysis results: suitable=True
2025-04-10 00:43:21,616 - INFO - [azure_client.py:264] - Dashboard analysis completed in 1.60s
2025-04-10 00:43:21,616 - INFO - [sql_generator.py:351] - Dashboard analysis completed: suitable=True
2025-04-10 00:43:21,617 - INFO - [sql_generator.py:403] - SQL generation completed in 11.47s
2025-04-10 00:43:21,628 - INFO - [sql_generator.py:125] - Query processing completed in 11.49s
2025-04-10 00:43:22,279 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:43:22] "GET /api/query/progress/f26b90fb-8f24-48d4-9ec7-76cd8e1c3820 HTTP/1.1" 200 -
2025-04-10 00:49:03,978 - INFO - [sql_generator.py:37] - Processing query: 'get me count of customers by state'
2025-04-10 00:49:03,980 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:49:03] "POST /api/query HTTP/1.1" 200 -
2025-04-10 00:49:03,981 - INFO - [intent_agent.py:27] - Intent detection started for query: 'get me count of customers by state'
2025-04-10 00:49:03,985 - INFO - [intent_agent.py:38] - Using default intent 'data_retrieval' without calling LLM
2025-04-10 00:49:03,987 - INFO - [intent_agent.py:41] - Intent detection completed in 0.01s
2025-04-10 00:49:03,988 - INFO - [sql_generator.py:45] - Detected intent: data_retrieval
2025-04-10 00:49:03,989 - INFO - [sql_generator.py:141] - Starting SQL generation process
2025-04-10 00:49:03,990 - INFO - [database.py:44] - Attempting database connection
2025-04-10 00:49:03,993 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-10 00:49:03,994 - INFO - [table_agent.py:28] - Table selection started for query: 'get me count of customers by state'
2025-04-10 00:49:03,995 - INFO - [table_agent.py:34] - Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-10 00:49:03,997 - INFO - [table_agent.py:64] - Sending request to AI model for table selection
2025-04-10 00:49:03,998 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-10 00:49:03,999 - DEBUG - [llm_engine.py:87] - [TABLE] Prompt: [{'role': 'system', 'content': "You are a table selection agent for a Text-to-SQL system.\nYour job is to identify which database tables are most relevant to a user query.\nYou will be provided with table names and their descriptions.\nReturn ONLY the names of relevant tables, separated by commas. Be selective and choose\nonly the tables that are directly needed to answer the query. If you're unsure,\ninclude tables that might be related. Return only table names in your response."}, {'role': 'us... (truncated)
2025-04-10 00:49:04,000 - DEBUG - [llm_engine.py:96] - [TABLE] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 00:49:04,492 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:49:04] "GET /api/query/progress/6a249d65-0a52-4ab2-9f20-7adef9f68401 HTTP/1.1" 200 -
2025-04-10 00:49:05,268 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:49:05] "GET /api/query/progress/6a249d65-0a52-4ab2-9f20-7adef9f68401 HTTP/1.1" 200 -
2025-04-10 00:49:05,523 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:49:05] "GET /api/query/progress/6a249d65-0a52-4ab2-9f20-7adef9f68401 HTTP/1.1" 200 -
2025-04-10 00:49:05,911 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:49:05] "GET /api/query/progress/6a249d65-0a52-4ab2-9f20-7adef9f68401 HTTP/1.1" 200 -
2025-04-10 00:49:06,028 - DEBUG - [llm_engine.py:107] - [TABLE] Model response received in 2.03s
2025-04-10 00:49:06,028 - DEBUG - [llm_engine.py:116] - [TABLE] Raw model response: 'customers'
2025-04-10 00:49:06,029 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 2.03s
2025-04-10 00:49:06,030 - INFO - [llm_engine.py:120] - **************************
2025-04-10 00:49:06,032 - INFO - [table_agent.py:69] - Raw model response: 'customers'
2025-04-10 00:49:06,033 - INFO - [table_agent.py:90] - Table selection completed in 2.04s. Selected: customers
2025-04-10 00:49:06,035 - INFO - [column_agent.py:29] - Column pruning started for query: 'get me count of customers by state'
2025-04-10 00:49:06,036 - INFO - [column_agent.py:30] - Processing tables: customers
2025-04-10 00:49:06,038 - INFO - [column_agent.py:38] - Only one table involved (customers). Skipping LLM call and including all columns.
2025-04-10 00:49:06,039 - INFO - [feedback_manager.py:265] - Stage 1: Vector search for 'get me count of customers by state...'
2025-04-10 00:49:06,319 - DEBUG - [feedback_manager.py:105] - Generated embedding in 0.28s with shape (384,)
2025-04-10 00:49:06,332 - ERROR - [vector_store.py:215] - Error searching similar vectors in collection query_embeddings: argument of type 'NoneType' is not iterable
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/vector_store.py", line 176, in search_similar
    if "id" not in output_fields and not any(f.lower() == 'id' for f in output_fields):
       ^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: argument of type 'NoneType' is not iterable
2025-04-10 00:49:06,335 - WARNING - [feedback_manager.py:288] - No candidates found from vector search, falling back to text-based search
2025-04-10 00:49:06,338 - INFO - [feedback_manager.py:402] - Found 0 similar queries using text-based search for 'get me count of customers by state...'
2025-04-10 00:49:06,340 - INFO - [azure_client.py:35] - SQL generation started for query: 'get me count of customers by state'
2025-04-10 00:49:06,342 - INFO - [azure_client.py:69] - Including schema information (587 chars)
2025-04-10 00:49:06,343 - INFO - [azure_client.py:104] - Including 3 SQL examples (no similarity examples found)
2025-04-10 00:49:06,345 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some example queries and their SQL:\nQuestion: How many records are in the customers table?\nSQL: SELECT COUNT(*) AS record_count FROM customers\n\nQuestion: Get all columns from customers\nSQL: SELECT * FROM customers LIMIT 5\n\nQuestion: Get record from customers by customer_id\nSQL: SELECT * FROM customers WHERE customer_id = 1\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me count of customers by state'}]
2025-04-10 00:49:06,349 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-10 00:49:06,352 - DEBUG - [llm_engine.py:87] - [SQL_GEN] Prompt: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief ... (truncated)
2025-04-10 00:49:06,353 - DEBUG - [llm_engine.py:96] - [SQL_GEN] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 00:49:06,714 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:49:06] "GET /api/query/progress/6a249d65-0a52-4ab2-9f20-7adef9f68401 HTTP/1.1" 200 -
2025-04-10 00:49:06,948 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:49:06] "GET /api/query/progress/6a249d65-0a52-4ab2-9f20-7adef9f68401 HTTP/1.1" 200 -
2025-04-10 00:49:07,339 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:49:07] "GET /api/query/progress/6a249d65-0a52-4ab2-9f20-7adef9f68401 HTTP/1.1" 200 -
2025-04-10 00:49:08,113 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:49:08] "GET /api/query/progress/6a249d65-0a52-4ab2-9f20-7adef9f68401 HTTP/1.1" 200 -
2025-04-10 00:49:08,359 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:49:08] "GET /api/query/progress/6a249d65-0a52-4ab2-9f20-7adef9f68401 HTTP/1.1" 200 -
2025-04-10 00:49:08,685 - DEBUG - [llm_engine.py:107] - [SQL_GEN] Model response received in 2.33s
2025-04-10 00:49:08,685 - DEBUG - [llm_engine.py:116] - [SQL_GEN] Raw model response: 'Here's a query that will return the number of customers grouped by their state:

```sql
SELECT 
    state, 
    COUNT(*) AS customer_count
FROM 
    customers
GROUP BY 
    state
```'
2025-04-10 00:49:08,686 - INFO - [llm_engine.py:119] - [SQL_GEN] Completion generation completed in 2.34s
2025-04-10 00:49:08,687 - INFO - [llm_engine.py:120] - **************************
2025-04-10 00:49:08,687 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-10 00:49:08,688 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-10 00:49:08,690 - INFO - [azure_client.py:171] - Extracted SQL query (90 chars) and explanation (79 chars)
2025-04-10 00:49:08,692 - INFO - [azure_client.py:124] - Generated SQL: SELECT 
    state, 
    COUNT(*) AS customer_count
FROM 
    customers
GROUP BY 
    state
2025-04-10 00:49:08,695 - INFO - [azure_client.py:132] - SQL generation completed in 2.35s
2025-04-10 00:49:08,696 - INFO - [database.py:65] - Executing SQL query: SELECT 
    state, 
    COUNT(*) AS customer_count
FROM 
    customers
GROUP BY 
    state
2025-04-10 00:49:08,698 - DEBUG - [database.py:76] - Query execution started
2025-04-10 00:49:08,700 - DEBUG - [database.py:81] - Query execution completed in 0.00s
2025-04-10 00:49:08,702 - INFO - [database.py:86] - Query returned 5 rows with 2 columns
2025-04-10 00:49:08,707 - DEBUG - [database.py:92] - Sample data (first 3 rows):
  state  customer_count
0    CA               1
1    FL               1
2    IL               1
2025-04-10 00:49:08,708 - INFO - [database.py:95] - Query processing completed in 0.01s
2025-04-10 00:49:08,711 - INFO - [sql_generator.py:336] - Analyzing query results for dashboard potential
2025-04-10 00:49:08,712 - INFO - [azure_client.py:197] - Dashboard analysis started for query: 'get me count of customers by state'
2025-04-10 00:49:08,713 - INFO - [llm_engine.py:56] - [DASHBOARD_ANALYSIS] Completion generation started
2025-04-10 00:49:08,714 - DEBUG - [llm_engine.py:87] - [DASHBOARD_ANALYSIS] Prompt: [{'role': 'system', 'content': 'You are a data visualization expert. Analyze the given query results and determine if they\'re suitable for a dashboard visualization.\n\nYour task is to:\n1. Analyze the columns and data\n2. Determine if the data is suitable for visualization (has numeric values and categorical data)\n3. If suitable, recommend the best chart type (bar, line, pie, etc.)\n4. Identify the best columns for X and Y axes (or equivalent based on chart type)\n5. Suggest meaningful labels... (truncated)
2025-04-10 00:49:08,715 - DEBUG - [llm_engine.py:96] - [DASHBOARD_ANALYSIS] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 00:49:08,759 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:49:08] "GET /api/query/progress/6a249d65-0a52-4ab2-9f20-7adef9f68401 HTTP/1.1" 200 -
2025-04-10 00:49:09,526 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:49:09] "GET /api/query/progress/6a249d65-0a52-4ab2-9f20-7adef9f68401 HTTP/1.1" 200 -
2025-04-10 00:49:09,764 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:49:09] "GET /api/query/progress/6a249d65-0a52-4ab2-9f20-7adef9f68401 HTTP/1.1" 200 -
2025-04-10 00:49:10,164 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:49:10] "GET /api/query/progress/6a249d65-0a52-4ab2-9f20-7adef9f68401 HTTP/1.1" 200 -
2025-04-10 00:49:10,431 - DEBUG - [llm_engine.py:107] - [DASHBOARD_ANALYSIS] Model response received in 1.72s
2025-04-10 00:49:10,433 - DEBUG - [llm_engine.py:116] - [DASHBOARD_ANALYSIS] Raw model response: '{
  "is_suitable": true,
  "reason": "The data contains categorical states and numeric customer counts, which is suitable for comparing customer distribution across states.",
  "chart_type": "bar",
  "x_axis": {
    "column": "state",
    "label": "State"
  },
  "y_axis": {
    "column": "customer_count",
    "label": "Number of Customers"
  },
  "title": "Number of Customers by State"
}'
2025-04-10 00:49:10,436 - INFO - [llm_engine.py:119] - [DASHBOARD_ANALYSIS] Completion generation completed in 1.72s
2025-04-10 00:49:10,439 - INFO - [llm_engine.py:120] - **************************
2025-04-10 00:49:10,441 - INFO - [azure_client.py:255] - Dashboard analysis results: suitable=True
2025-04-10 00:49:10,443 - INFO - [azure_client.py:264] - Dashboard analysis completed in 1.73s
2025-04-10 00:49:10,444 - INFO - [sql_generator.py:351] - Dashboard analysis completed: suitable=True
2025-04-10 00:49:10,446 - INFO - [sql_generator.py:403] - SQL generation completed in 6.46s
2025-04-10 00:49:10,448 - INFO - [sql_generator.py:125] - Query processing completed in 6.47s
2025-04-10 00:49:10,936 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:49:10] "GET /api/query/progress/6a249d65-0a52-4ab2-9f20-7adef9f68401 HTTP/1.1" 200 -
2025-04-10 00:50:42,314 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/models/sql_generator.py', reloading
2025-04-10 00:50:42,315 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/models/sql_generator.py', reloading
2025-04-10 00:50:42,325 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/models/sql_generator.py', reloading
2025-04-10 00:50:43,326 - INFO - [sql_generator.py:449] - Closing all agent connections
2025-04-10 00:50:43,326 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-10 00:50:43,326 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-10 00:50:43,327 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-10 00:50:43,327 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-10 00:50:43,327 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-10 00:50:43,327 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-10 00:50:43,327 - INFO - [azure_client.py:302] - Closing Azure AI client connection
2025-04-10 00:50:43,327 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-10 00:50:43,327 - INFO - [database.py:258] - Closing database connection
2025-04-10 00:50:43,328 - DEBUG - [database.py:261] - Database engine disposed
2025-04-10 00:50:43,328 - INFO - [feedback_manager.py:762] - Closing database connections
2025-04-10 00:50:43,329 - DEBUG - [feedback_manager.py:765] - SQLite database engine disposed
2025-04-10 00:50:43,329 - INFO - [vector_store.py:340] - Closing vector database connection
2025-04-10 00:50:44,513 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-10 00:50:52,895 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-10 00:50:52,896 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-10 00:50:52,896 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-10 00:50:52,897 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-10 00:50:52,898 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-10 00:50:52,918 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-10 00:50:52,922 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-10 00:50:52,923 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-10 00:50:53,009 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-10 00:50:53,009 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-10 00:50:53,010 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-10 00:50:53,010 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-10 00:50:53,010 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-10 00:50:53,010 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-10 00:50:53,011 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-10 00:50:53,088 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-10 00:50:53,089 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-10 00:50:53,089 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-10 00:50:53,089 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-10 00:50:53,090 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-10 00:50:53,090 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-10 00:50:53,090 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-10 00:50:53,164 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-10 00:50:53,164 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-10 00:50:53,165 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-10 00:50:53,165 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-10 00:50:53,165 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-10 00:50:53,166 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-10 00:50:53,166 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-10 00:50:53,166 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-10 00:50:53,238 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-10 00:50:53,239 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-10 00:50:53,239 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-10 00:50:53,239 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-10 00:50:53,240 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-10 00:50:53,240 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-10 00:50:53,240 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-10 00:50:53,240 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-10 00:50:53,310 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-10 00:50:53,311 - INFO - [_internal.py:224] -  * Debugger PIN: 501-040-382
2025-04-10 00:50:54,220 - INFO - [sql_generator.py:37] - Processing query: 'get me count of customers by state'
2025-04-10 00:50:54,222 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:50:54] "POST /api/query HTTP/1.1" 200 -
2025-04-10 00:50:54,222 - INFO - [intent_agent.py:27] - Intent detection started for query: 'get me count of customers by state'
2025-04-10 00:50:54,224 - INFO - [intent_agent.py:38] - Using default intent 'data_retrieval' without calling LLM
2025-04-10 00:50:54,226 - INFO - [intent_agent.py:41] - Intent detection completed in 0.00s
2025-04-10 00:50:54,227 - INFO - [sql_generator.py:45] - Detected intent: data_retrieval
2025-04-10 00:50:54,228 - INFO - [sql_generator.py:141] - Starting SQL generation process
2025-04-10 00:50:54,229 - INFO - [database.py:44] - Attempting database connection
2025-04-10 00:50:54,232 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-10 00:50:54,233 - INFO - [table_agent.py:28] - Table selection started for query: 'get me count of customers by state'
2025-04-10 00:50:54,233 - INFO - [table_agent.py:34] - Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-10 00:50:54,235 - INFO - [table_agent.py:64] - Sending request to AI model for table selection
2025-04-10 00:50:54,236 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-10 00:50:54,238 - DEBUG - [llm_engine.py:87] - [TABLE] Prompt: [{'role': 'system', 'content': "You are a table selection agent for a Text-to-SQL system.\nYour job is to identify which database tables are most relevant to a user query.\nYou will be provided with table names and their descriptions.\nReturn ONLY the names of relevant tables, separated by commas. Be selective and choose\nonly the tables that are directly needed to answer the query. If you're unsure,\ninclude tables that might be related. Return only table names in your response."}, {'role': 'us... (truncated)
2025-04-10 00:50:54,239 - DEBUG - [llm_engine.py:96] - [TABLE] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 00:50:54,715 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:50:54] "GET /api/query/progress/1c8ad4c1-88f9-4aec-817c-34a7ff85fd7d HTTP/1.1" 200 -
2025-04-10 00:50:55,489 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:50:55] "GET /api/query/progress/1c8ad4c1-88f9-4aec-817c-34a7ff85fd7d HTTP/1.1" 200 -
2025-04-10 00:50:55,733 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:50:55] "GET /api/query/progress/1c8ad4c1-88f9-4aec-817c-34a7ff85fd7d HTTP/1.1" 200 -
2025-04-10 00:50:56,159 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:50:56] "GET /api/query/progress/1c8ad4c1-88f9-4aec-817c-34a7ff85fd7d HTTP/1.1" 200 -
2025-04-10 00:50:56,183 - DEBUG - [llm_engine.py:107] - [TABLE] Model response received in 1.94s
2025-04-10 00:50:56,183 - DEBUG - [llm_engine.py:116] - [TABLE] Raw model response: 'customers'
2025-04-10 00:50:56,184 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 1.95s
2025-04-10 00:50:56,185 - INFO - [llm_engine.py:120] - **************************
2025-04-10 00:50:56,186 - INFO - [table_agent.py:69] - Raw model response: 'customers'
2025-04-10 00:50:56,187 - INFO - [table_agent.py:90] - Table selection completed in 1.95s. Selected: customers
2025-04-10 00:50:56,187 - INFO - [column_agent.py:29] - Column pruning started for query: 'get me count of customers by state'
2025-04-10 00:50:56,188 - INFO - [column_agent.py:30] - Processing tables: customers
2025-04-10 00:50:56,189 - INFO - [column_agent.py:38] - Only one table involved (customers). Skipping LLM call and including all columns.
2025-04-10 00:50:56,190 - INFO - [feedback_manager.py:265] - Stage 1: Vector search for 'get me count of customers by state...'
2025-04-10 00:50:56,192 - INFO - [feedback_manager.py:77] - Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-10 00:50:56,926 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:50:56] "GET /api/query/progress/1c8ad4c1-88f9-4aec-817c-34a7ff85fd7d HTTP/1.1" 200 -
2025-04-10 00:50:57,166 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:50:57] "GET /api/query/progress/1c8ad4c1-88f9-4aec-817c-34a7ff85fd7d HTTP/1.1" 200 -
2025-04-10 00:50:57,561 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:50:57] "GET /api/query/progress/1c8ad4c1-88f9-4aec-817c-34a7ff85fd7d HTTP/1.1" 200 -
2025-04-10 00:50:58,315 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:50:58] "GET /api/query/progress/1c8ad4c1-88f9-4aec-817c-34a7ff85fd7d HTTP/1.1" 200 -
2025-04-10 00:50:58,552 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:50:58] "GET /api/query/progress/1c8ad4c1-88f9-4aec-817c-34a7ff85fd7d HTTP/1.1" 200 -
2025-04-10 00:50:58,953 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:50:58] "GET /api/query/progress/1c8ad4c1-88f9-4aec-817c-34a7ff85fd7d HTTP/1.1" 200 -
2025-04-10 00:50:59,008 - INFO - [feedback_manager.py:80] - Embedding model loaded in 2.82s
2025-04-10 00:50:59,059 - DEBUG - [feedback_manager.py:105] - Generated embedding in 0.05s with shape (384,)
2025-04-10 00:50:59,059 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-10 00:50:59,718 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:50:59] "GET /api/query/progress/1c8ad4c1-88f9-4aec-817c-34a7ff85fd7d HTTP/1.1" 200 -
2025-04-10 00:50:59,966 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:50:59] "GET /api/query/progress/1c8ad4c1-88f9-4aec-817c-34a7ff85fd7d HTTP/1.1" 200 -
2025-04-10 00:51:00,123 - DEBUG - [milvus_client.py:728] - Created new connection using: 6c2acbb2face43448236ab6b180e4884
2025-04-10 00:51:00,124 - INFO - [vector_store.py:42] - Vector database connection established in 1.06s
2025-04-10 00:51:00,129 - ERROR - [vector_store.py:215] - Error searching similar vectors in collection query_embeddings: argument of type 'NoneType' is not iterable
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/vector_store.py", line 176, in search_similar
    if "id" not in output_fields and not any(f.lower() == 'id' for f in output_fields):
       ^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: argument of type 'NoneType' is not iterable
2025-04-10 00:51:00,132 - WARNING - [feedback_manager.py:288] - No candidates found from vector search, falling back to text-based search
2025-04-10 00:51:00,135 - INFO - [feedback_manager.py:52] - Attempting database connection
2025-04-10 00:51:00,138 - INFO - [feedback_manager.py:56] - Database connection established in 0.00s
2025-04-10 00:51:00,144 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-10 00:51:00,159 - DEBUG - [milvus_client.py:728] - Created new connection using: e7fa1557b23c4009bed40c3c7b1ff22f
2025-04-10 00:51:00,160 - INFO - [vector_store.py:42] - Vector database connection established in 0.02s
2025-04-10 00:51:00,166 - INFO - [feedback_manager.py:402] - Found 0 similar queries using text-based search for 'get me count of customers by state...'
2025-04-10 00:51:00,174 - INFO - [azure_client.py:35] - SQL generation started for query: 'get me count of customers by state'
2025-04-10 00:51:00,175 - INFO - [azure_client.py:69] - Including schema information (587 chars)
2025-04-10 00:51:00,178 - INFO - [azure_client.py:104] - Including 3 SQL examples (no similarity examples found)
2025-04-10 00:51:00,180 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some example queries and their SQL:\nQuestion: How many records are in the customers table?\nSQL: SELECT COUNT(*) AS record_count FROM customers\n\nQuestion: Get all columns from customers\nSQL: SELECT * FROM customers LIMIT 5\n\nQuestion: Get record from customers by customer_id\nSQL: SELECT * FROM customers WHERE customer_id = 1\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me count of customers by state'}]
2025-04-10 00:51:00,181 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-10 00:51:00,183 - DEBUG - [llm_engine.py:87] - [SQL_GEN] Prompt: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief ... (truncated)
2025-04-10 00:51:00,185 - DEBUG - [llm_engine.py:96] - [SQL_GEN] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 00:51:00,348 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:51:00] "GET /api/query/progress/1c8ad4c1-88f9-4aec-817c-34a7ff85fd7d HTTP/1.1" 200 -
2025-04-10 00:51:01,113 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:51:01] "GET /api/query/progress/1c8ad4c1-88f9-4aec-817c-34a7ff85fd7d HTTP/1.1" 200 -
2025-04-10 00:51:01,332 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:51:01] "GET /api/query/progress/1c8ad4c1-88f9-4aec-817c-34a7ff85fd7d HTTP/1.1" 200 -
2025-04-10 00:51:01,739 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:51:01] "GET /api/query/progress/1c8ad4c1-88f9-4aec-817c-34a7ff85fd7d HTTP/1.1" 200 -
2025-04-10 00:51:02,488 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:51:02] "GET /api/query/progress/1c8ad4c1-88f9-4aec-817c-34a7ff85fd7d HTTP/1.1" 200 -
2025-04-10 00:51:02,610 - DEBUG - [llm_engine.py:107] - [SQL_GEN] Model response received in 2.42s
2025-04-10 00:51:02,611 - DEBUG - [llm_engine.py:116] - [SQL_GEN] Raw model response: 'Here's a query that will count the number of customers grouped by their state:

```sql
SELECT 
    state, 
    COUNT(*) AS customer_count
FROM 
    customers
GROUP BY 
    state
```'
2025-04-10 00:51:02,611 - INFO - [llm_engine.py:119] - [SQL_GEN] Completion generation completed in 2.43s
2025-04-10 00:51:02,612 - INFO - [llm_engine.py:120] - **************************
2025-04-10 00:51:02,613 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-10 00:51:02,615 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-10 00:51:02,616 - INFO - [azure_client.py:171] - Extracted SQL query (90 chars) and explanation (78 chars)
2025-04-10 00:51:02,617 - INFO - [azure_client.py:124] - Generated SQL: SELECT 
    state, 
    COUNT(*) AS customer_count
FROM 
    customers
GROUP BY 
    state
2025-04-10 00:51:02,619 - INFO - [azure_client.py:132] - SQL generation completed in 2.45s
2025-04-10 00:51:02,620 - INFO - [database.py:65] - Executing SQL query: SELECT 
    state, 
    COUNT(*) AS customer_count
FROM 
    customers
GROUP BY 
    state
2025-04-10 00:51:02,622 - DEBUG - [database.py:76] - Query execution started
2025-04-10 00:51:02,624 - DEBUG - [database.py:81] - Query execution completed in 0.00s
2025-04-10 00:51:02,626 - INFO - [database.py:86] - Query returned 5 rows with 2 columns
2025-04-10 00:51:02,633 - DEBUG - [database.py:92] - Sample data (first 3 rows):
  state  customer_count
0    CA               1
1    FL               1
2    IL               1
2025-04-10 00:51:02,633 - INFO - [database.py:95] - Query processing completed in 0.01s
2025-04-10 00:51:02,638 - INFO - [sql_generator.py:348] - Analyzing query results for dashboard potential
2025-04-10 00:51:02,639 - INFO - [azure_client.py:197] - Dashboard analysis started for query: 'get me count of customers by state'
2025-04-10 00:51:02,640 - INFO - [llm_engine.py:56] - [DASHBOARD_ANALYSIS] Completion generation started
2025-04-10 00:51:02,642 - DEBUG - [llm_engine.py:87] - [DASHBOARD_ANALYSIS] Prompt: [{'role': 'system', 'content': 'You are a data visualization expert. Analyze the given query results and determine if they\'re suitable for a dashboard visualization.\n\nYour task is to:\n1. Analyze the columns and data\n2. Determine if the data is suitable for visualization (has numeric values and categorical data)\n3. If suitable, recommend the best chart type (bar, line, pie, etc.)\n4. Identify the best columns for X and Y axes (or equivalent based on chart type)\n5. Suggest meaningful labels... (truncated)
2025-04-10 00:51:02,643 - DEBUG - [llm_engine.py:96] - [DASHBOARD_ANALYSIS] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 00:51:02,874 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:51:02] "GET /api/query/progress/1c8ad4c1-88f9-4aec-817c-34a7ff85fd7d HTTP/1.1" 200 -
2025-04-10 00:51:03,141 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:51:03] "GET /api/query/progress/1c8ad4c1-88f9-4aec-817c-34a7ff85fd7d HTTP/1.1" 200 -
2025-04-10 00:51:03,916 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:51:03] "GET /api/query/progress/1c8ad4c1-88f9-4aec-817c-34a7ff85fd7d HTTP/1.1" 200 -
2025-04-10 00:51:04,170 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:51:04] "GET /api/query/progress/1c8ad4c1-88f9-4aec-817c-34a7ff85fd7d HTTP/1.1" 200 -
2025-04-10 00:51:04,576 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:51:04] "GET /api/query/progress/1c8ad4c1-88f9-4aec-817c-34a7ff85fd7d HTTP/1.1" 200 -
2025-04-10 00:51:05,339 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:51:05] "GET /api/query/progress/1c8ad4c1-88f9-4aec-817c-34a7ff85fd7d HTTP/1.1" 200 -
2025-04-10 00:51:05,581 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:51:05] "GET /api/query/progress/1c8ad4c1-88f9-4aec-817c-34a7ff85fd7d HTTP/1.1" 200 -
2025-04-10 00:51:05,782 - DEBUG - [llm_engine.py:107] - [DASHBOARD_ANALYSIS] Model response received in 3.14s
2025-04-10 00:51:05,783 - DEBUG - [llm_engine.py:116] - [DASHBOARD_ANALYSIS] Raw model response: '{
  "is_suitable": true,
  "reason": "The data contains categorical values (states) and a numeric count of customers, making it suitable for visualization to compare customer distribution across states.",
  "chart_type": "bar",
  "x_axis": {
    "column": "state",
    "label": "State"
  },
  "y_axis": {
    "column": "customer_count",
    "label": "Number of Customers"
  },
  "title": "Number of Customers by State"
}'
2025-04-10 00:51:05,784 - INFO - [llm_engine.py:119] - [DASHBOARD_ANALYSIS] Completion generation completed in 3.14s
2025-04-10 00:51:05,785 - INFO - [llm_engine.py:120] - **************************
2025-04-10 00:51:05,787 - INFO - [azure_client.py:255] - Dashboard analysis results: suitable=True
2025-04-10 00:51:05,788 - INFO - [azure_client.py:264] - Dashboard analysis completed in 3.15s
2025-04-10 00:51:05,790 - INFO - [sql_generator.py:366] - Dashboard analysis completed: suitable=True
2025-04-10 00:51:05,791 - INFO - [sql_generator.py:442] - SQL generation completed in 11.56s
2025-04-10 00:51:05,793 - INFO - [sql_generator.py:125] - Query processing completed in 11.57s
2025-04-10 00:51:06,005 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:51:06] "GET /api/query/progress/1c8ad4c1-88f9-4aec-817c-34a7ff85fd7d HTTP/1.1" 200 -
2025-04-10 00:51:27,262 - INFO - [sql_generator.py:37] - Processing query: 'get me count of customers by state'
2025-04-10 00:51:27,263 - INFO - [intent_agent.py:27] - Intent detection started for query: 'get me count of customers by state'
2025-04-10 00:51:27,264 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:51:27] "POST /api/query HTTP/1.1" 200 -
2025-04-10 00:51:27,264 - INFO - [intent_agent.py:38] - Using default intent 'data_retrieval' without calling LLM
2025-04-10 00:51:27,267 - INFO - [intent_agent.py:41] - Intent detection completed in 0.00s
2025-04-10 00:51:27,267 - INFO - [sql_generator.py:45] - Detected intent: data_retrieval
2025-04-10 00:51:27,269 - INFO - [sql_generator.py:141] - Starting SQL generation process
2025-04-10 00:51:27,270 - INFO - [database.py:44] - Attempting database connection
2025-04-10 00:51:27,271 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-10 00:51:27,272 - INFO - [table_agent.py:28] - Table selection started for query: 'get me count of customers by state'
2025-04-10 00:51:27,273 - INFO - [table_agent.py:34] - Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-10 00:51:27,274 - INFO - [table_agent.py:64] - Sending request to AI model for table selection
2025-04-10 00:51:27,275 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-10 00:51:27,276 - DEBUG - [llm_engine.py:87] - [TABLE] Prompt: [{'role': 'system', 'content': "You are a table selection agent for a Text-to-SQL system.\nYour job is to identify which database tables are most relevant to a user query.\nYou will be provided with table names and their descriptions.\nReturn ONLY the names of relevant tables, separated by commas. Be selective and choose\nonly the tables that are directly needed to answer the query. If you're unsure,\ninclude tables that might be related. Return only table names in your response."}, {'role': 'us... (truncated)
2025-04-10 00:51:27,277 - DEBUG - [llm_engine.py:96] - [TABLE] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 00:51:27,756 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:51:27] "GET /api/query/progress/edc9d812-ddbf-4bd0-bf9a-2ab73bc49ae8 HTTP/1.1" 200 -
2025-04-10 00:51:28,533 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:51:28] "GET /api/query/progress/edc9d812-ddbf-4bd0-bf9a-2ab73bc49ae8 HTTP/1.1" 200 -
2025-04-10 00:51:28,789 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:51:28] "GET /api/query/progress/edc9d812-ddbf-4bd0-bf9a-2ab73bc49ae8 HTTP/1.1" 200 -
2025-04-10 00:51:28,876 - DEBUG - [llm_engine.py:107] - [TABLE] Model response received in 1.60s
2025-04-10 00:51:28,876 - DEBUG - [llm_engine.py:116] - [TABLE] Raw model response: 'customers'
2025-04-10 00:51:28,877 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 1.60s
2025-04-10 00:51:28,878 - INFO - [llm_engine.py:120] - **************************
2025-04-10 00:51:28,880 - INFO - [table_agent.py:69] - Raw model response: 'customers'
2025-04-10 00:51:28,882 - INFO - [table_agent.py:90] - Table selection completed in 1.61s. Selected: customers
2025-04-10 00:51:28,883 - INFO - [column_agent.py:29] - Column pruning started for query: 'get me count of customers by state'
2025-04-10 00:51:28,885 - INFO - [column_agent.py:30] - Processing tables: customers
2025-04-10 00:51:28,886 - INFO - [column_agent.py:38] - Only one table involved (customers). Skipping LLM call and including all columns.
2025-04-10 00:51:28,888 - INFO - [feedback_manager.py:265] - Stage 1: Vector search for 'get me count of customers by state...'
2025-04-10 00:51:29,086 - DEBUG - [feedback_manager.py:105] - Generated embedding in 0.20s with shape (384,)
2025-04-10 00:51:29,091 - ERROR - [vector_store.py:215] - Error searching similar vectors in collection query_embeddings: argument of type 'NoneType' is not iterable
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/vector_store.py", line 176, in search_similar
    if "id" not in output_fields and not any(f.lower() == 'id' for f in output_fields):
       ^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: argument of type 'NoneType' is not iterable
2025-04-10 00:51:29,092 - WARNING - [feedback_manager.py:288] - No candidates found from vector search, falling back to text-based search
2025-04-10 00:51:29,094 - INFO - [feedback_manager.py:402] - Found 0 similar queries using text-based search for 'get me count of customers by state...'
2025-04-10 00:51:29,095 - INFO - [azure_client.py:35] - SQL generation started for query: 'get me count of customers by state'
2025-04-10 00:51:29,112 - INFO - [azure_client.py:69] - Including schema information (587 chars)
2025-04-10 00:51:29,113 - INFO - [azure_client.py:104] - Including 3 SQL examples (no similarity examples found)
2025-04-10 00:51:29,115 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some example queries and their SQL:\nQuestion: How many records are in the customers table?\nSQL: SELECT COUNT(*) AS record_count FROM customers\n\nQuestion: Get all columns from customers\nSQL: SELECT * FROM customers LIMIT 5\n\nQuestion: Get record from customers by customer_id\nSQL: SELECT * FROM customers WHERE customer_id = 1\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me count of customers by state'}]
2025-04-10 00:51:29,117 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-10 00:51:29,126 - DEBUG - [llm_engine.py:87] - [SQL_GEN] Prompt: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief ... (truncated)
2025-04-10 00:51:29,128 - DEBUG - [llm_engine.py:96] - [SQL_GEN] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 00:51:29,198 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:51:29] "GET /api/query/progress/edc9d812-ddbf-4bd0-bf9a-2ab73bc49ae8 HTTP/1.1" 200 -
2025-04-10 00:51:29,971 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:51:29] "GET /api/query/progress/edc9d812-ddbf-4bd0-bf9a-2ab73bc49ae8 HTTP/1.1" 200 -
2025-04-10 00:51:30,210 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:51:30] "GET /api/query/progress/edc9d812-ddbf-4bd0-bf9a-2ab73bc49ae8 HTTP/1.1" 200 -
2025-04-10 00:51:30,621 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:51:30] "GET /api/query/progress/edc9d812-ddbf-4bd0-bf9a-2ab73bc49ae8 HTTP/1.1" 200 -
2025-04-10 00:51:31,371 - DEBUG - [llm_engine.py:107] - [SQL_GEN] Model response received in 2.24s
2025-04-10 00:51:31,371 - DEBUG - [llm_engine.py:116] - [SQL_GEN] Raw model response: 'Here's a query that will return the number of customers grouped by their state:

```sql
SELECT 
    state, 
    COUNT(*) AS customer_count
FROM 
    customers
GROUP BY 
    state
```'
2025-04-10 00:51:31,372 - INFO - [llm_engine.py:119] - [SQL_GEN] Completion generation completed in 2.26s
2025-04-10 00:51:31,374 - INFO - [llm_engine.py:120] - **************************
2025-04-10 00:51:31,375 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-10 00:51:31,376 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-10 00:51:31,377 - INFO - [azure_client.py:171] - Extracted SQL query (90 chars) and explanation (79 chars)
2025-04-10 00:51:31,379 - INFO - [azure_client.py:124] - Generated SQL: SELECT 
    state, 
    COUNT(*) AS customer_count
FROM 
    customers
GROUP BY 
    state
2025-04-10 00:51:31,382 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:51:31] "GET /api/query/progress/edc9d812-ddbf-4bd0-bf9a-2ab73bc49ae8 HTTP/1.1" 200 -
2025-04-10 00:51:31,383 - INFO - [azure_client.py:132] - SQL generation completed in 2.29s
2025-04-10 00:51:31,386 - INFO - [database.py:65] - Executing SQL query: SELECT 
    state, 
    COUNT(*) AS customer_count
FROM 
    customers
GROUP BY 
    state
2025-04-10 00:51:31,390 - DEBUG - [database.py:76] - Query execution started
2025-04-10 00:51:31,392 - DEBUG - [database.py:81] - Query execution completed in 0.00s
2025-04-10 00:51:31,393 - INFO - [database.py:86] - Query returned 5 rows with 2 columns
2025-04-10 00:51:31,397 - DEBUG - [database.py:92] - Sample data (first 3 rows):
  state  customer_count
0    CA               1
1    FL               1
2    IL               1
2025-04-10 00:51:31,398 - INFO - [database.py:95] - Query processing completed in 0.01s
2025-04-10 00:51:31,402 - INFO - [sql_generator.py:348] - Analyzing query results for dashboard potential
2025-04-10 00:51:31,403 - INFO - [azure_client.py:197] - Dashboard analysis started for query: 'get me count of customers by state'
2025-04-10 00:51:31,405 - INFO - [llm_engine.py:56] - [DASHBOARD_ANALYSIS] Completion generation started
2025-04-10 00:51:31,406 - DEBUG - [llm_engine.py:87] - [DASHBOARD_ANALYSIS] Prompt: [{'role': 'system', 'content': 'You are a data visualization expert. Analyze the given query results and determine if they\'re suitable for a dashboard visualization.\n\nYour task is to:\n1. Analyze the columns and data\n2. Determine if the data is suitable for visualization (has numeric values and categorical data)\n3. If suitable, recommend the best chart type (bar, line, pie, etc.)\n4. Identify the best columns for X and Y axes (or equivalent based on chart type)\n5. Suggest meaningful labels... (truncated)
2025-04-10 00:51:31,407 - DEBUG - [llm_engine.py:96] - [DASHBOARD_ANALYSIS] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 00:51:31,601 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:51:31] "GET /api/query/progress/edc9d812-ddbf-4bd0-bf9a-2ab73bc49ae8 HTTP/1.1" 200 -
2025-04-10 00:51:32,008 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:51:32] "GET /api/query/progress/edc9d812-ddbf-4bd0-bf9a-2ab73bc49ae8 HTTP/1.1" 200 -
2025-04-10 00:51:32,754 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:51:32] "GET /api/query/progress/edc9d812-ddbf-4bd0-bf9a-2ab73bc49ae8 HTTP/1.1" 200 -
2025-04-10 00:51:32,947 - DEBUG - [llm_engine.py:107] - [DASHBOARD_ANALYSIS] Model response received in 1.54s
2025-04-10 00:51:32,947 - DEBUG - [llm_engine.py:116] - [DASHBOARD_ANALYSIS] Raw model response: '{
  "is_suitable": true,
  "reason": "The data contains categorical values (state) and a numeric count (customer_count), making it appropriate for visualizing customer distribution across states.",
  "chart_type": "bar",
  "x_axis": {
    "column": "state",
    "label": "State"
  },
  "y_axis": {
    "column": "customer_count",
    "label": "Number of Customers"
  },
  "title": "Number of Customers by State"
}'
2025-04-10 00:51:32,948 - INFO - [llm_engine.py:119] - [DASHBOARD_ANALYSIS] Completion generation completed in 1.54s
2025-04-10 00:51:32,949 - INFO - [llm_engine.py:120] - **************************
2025-04-10 00:51:32,950 - INFO - [azure_client.py:255] - Dashboard analysis results: suitable=True
2025-04-10 00:51:32,951 - INFO - [azure_client.py:264] - Dashboard analysis completed in 1.55s
2025-04-10 00:51:32,952 - INFO - [sql_generator.py:366] - Dashboard analysis completed: suitable=True
2025-04-10 00:51:32,952 - INFO - [sql_generator.py:442] - SQL generation completed in 5.68s
2025-04-10 00:51:32,953 - INFO - [sql_generator.py:125] - Query processing completed in 5.69s
2025-04-10 00:51:32,987 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:51:32] "GET /api/query/progress/edc9d812-ddbf-4bd0-bf9a-2ab73bc49ae8 HTTP/1.1" 200 -
2025-04-10 00:57:17,237 - DEBUG - [app.py:84] - Main page requested
2025-04-10 00:57:17,252 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:57:17] "GET / HTTP/1.1" 200 -
2025-04-10 00:57:17,473 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:57:17] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-10 00:57:17,611 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:57:17] "GET /static/js/ui-utils.js HTTP/1.1" 200 -
2025-04-10 00:57:17,614 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:57:17] "GET /static/js/core.js HTTP/1.1" 200 -
2025-04-10 00:57:17,639 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:57:17] "GET /static/js/results-display.js HTTP/1.1" 200 -
2025-04-10 00:57:17,639 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:57:17] "GET /static/js/schema-manager.js HTTP/1.1" 200 -
2025-04-10 00:57:17,641 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:57:17] "GET /static/js/table-mentions.js HTTP/1.1" 200 -
2025-04-10 00:57:17,780 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:57:17] "GET /static/js/feedback.js HTTP/1.1" 200 -
2025-04-10 00:57:17,921 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:57:17] "GET /static/js/dashboard.js HTTP/1.1" 200 -
2025-04-10 00:57:17,926 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:57:17] "GET /static/js/query-handler.js HTTP/1.1" 200 -
2025-04-10 00:57:18,275 - DEBUG - [app.py:152] - Table suggestions requested for workspace: dfd, query: ''
2025-04-10 00:57:18,277 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:57:18] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-10 00:57:18,329 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:57:18] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-04-10 00:57:46,972 - INFO - [sql_generator.py:37] - Processing query: 'Get me count of customers by state'
2025-04-10 00:57:46,973 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:57:46] "POST /api/query HTTP/1.1" 200 -
2025-04-10 00:57:46,973 - INFO - [intent_agent.py:27] - Intent detection started for query: 'Get me count of customers by state'
2025-04-10 00:57:46,975 - INFO - [intent_agent.py:38] - Using default intent 'data_retrieval' without calling LLM
2025-04-10 00:57:46,976 - INFO - [intent_agent.py:41] - Intent detection completed in 0.00s
2025-04-10 00:57:46,976 - INFO - [sql_generator.py:45] - Detected intent: data_retrieval
2025-04-10 00:57:46,977 - INFO - [sql_generator.py:141] - Starting SQL generation process
2025-04-10 00:57:46,977 - INFO - [database.py:44] - Attempting database connection
2025-04-10 00:57:46,981 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-10 00:57:46,981 - INFO - [table_agent.py:28] - Table selection started for query: 'Get me count of customers by state'
2025-04-10 00:57:46,982 - INFO - [table_agent.py:34] - Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-10 00:57:46,984 - INFO - [table_agent.py:64] - Sending request to AI model for table selection
2025-04-10 00:57:46,985 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-10 00:57:46,986 - DEBUG - [llm_engine.py:87] - [TABLE] Prompt: [{'role': 'system', 'content': "You are a table selection agent for a Text-to-SQL system.\nYour job is to identify which database tables are most relevant to a user query.\nYou will be provided with table names and their descriptions.\nReturn ONLY the names of relevant tables, separated by commas. Be selective and choose\nonly the tables that are directly needed to answer the query. If you're unsure,\ninclude tables that might be related. Return only table names in your response."}, {'role': 'us... (truncated)
2025-04-10 00:57:46,986 - DEBUG - [llm_engine.py:96] - [TABLE] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 00:57:47,732 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:57:47] "GET /api/query/progress/99adff6b-974c-445a-b58f-59a794c23063 HTTP/1.1" 200 -
2025-04-10 00:57:47,972 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:57:47] "GET /api/query/progress/99adff6b-974c-445a-b58f-59a794c23063 HTTP/1.1" 200 -
2025-04-10 00:57:48,392 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:57:48] "GET /api/query/progress/99adff6b-974c-445a-b58f-59a794c23063 HTTP/1.1" 200 -
2025-04-10 00:57:49,148 - DEBUG - [llm_engine.py:107] - [TABLE] Model response received in 2.16s
2025-04-10 00:57:49,148 - DEBUG - [llm_engine.py:116] - [TABLE] Raw model response: 'customers'
2025-04-10 00:57:49,148 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 2.16s
2025-04-10 00:57:49,149 - INFO - [llm_engine.py:120] - **************************
2025-04-10 00:57:49,149 - INFO - [table_agent.py:69] - Raw model response: 'customers'
2025-04-10 00:57:49,150 - INFO - [table_agent.py:90] - Table selection completed in 2.17s. Selected: customers
2025-04-10 00:57:49,151 - INFO - [column_agent.py:29] - Column pruning started for query: 'Get me count of customers by state'
2025-04-10 00:57:49,151 - INFO - [column_agent.py:30] - Processing tables: customers
2025-04-10 00:57:49,152 - INFO - [column_agent.py:38] - Only one table involved (customers). Skipping LLM call and including all columns.
2025-04-10 00:57:49,153 - INFO - [feedback_manager.py:265] - Stage 1: Vector search for 'Get me count of customers by state...'
2025-04-10 00:57:49,157 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:57:49] "GET /api/query/progress/99adff6b-974c-445a-b58f-59a794c23063 HTTP/1.1" 200 -
2025-04-10 00:57:49,271 - DEBUG - [feedback_manager.py:105] - Generated embedding in 0.12s with shape (384,)
2025-04-10 00:57:49,276 - ERROR - [vector_store.py:215] - Error searching similar vectors in collection query_embeddings: argument of type 'NoneType' is not iterable
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/vector_store.py", line 176, in search_similar
    if "id" not in output_fields and not any(f.lower() == 'id' for f in output_fields):
       ^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: argument of type 'NoneType' is not iterable
2025-04-10 00:57:49,277 - WARNING - [feedback_manager.py:288] - No candidates found from vector search, falling back to text-based search
2025-04-10 00:57:49,281 - INFO - [feedback_manager.py:402] - Found 0 similar queries using text-based search for 'Get me count of customers by state...'
2025-04-10 00:57:49,282 - INFO - [azure_client.py:35] - SQL generation started for query: 'Get me count of customers by state'
2025-04-10 00:57:49,282 - INFO - [azure_client.py:69] - Including schema information (587 chars)
2025-04-10 00:57:49,283 - INFO - [azure_client.py:104] - Including 3 SQL examples (no similarity examples found)
2025-04-10 00:57:49,284 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some example queries and their SQL:\nQuestion: How many records are in the customers table?\nSQL: SELECT COUNT(*) AS record_count FROM customers\n\nQuestion: Get all columns from customers\nSQL: SELECT * FROM customers LIMIT 5\n\nQuestion: Get record from customers by customer_id\nSQL: SELECT * FROM customers WHERE customer_id = 1\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: Get me count of customers by state'}]
2025-04-10 00:57:49,285 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-10 00:57:49,285 - DEBUG - [llm_engine.py:87] - [SQL_GEN] Prompt: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief ... (truncated)
2025-04-10 00:57:49,286 - DEBUG - [llm_engine.py:96] - [SQL_GEN] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 00:57:49,411 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:57:49] "GET /api/query/progress/99adff6b-974c-445a-b58f-59a794c23063 HTTP/1.1" 200 -
2025-04-10 00:57:49,823 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:57:49] "GET /api/query/progress/99adff6b-974c-445a-b58f-59a794c23063 HTTP/1.1" 200 -
2025-04-10 00:57:50,581 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:57:50] "GET /api/query/progress/99adff6b-974c-445a-b58f-59a794c23063 HTTP/1.1" 200 -
2025-04-10 00:57:50,836 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:57:50] "GET /api/query/progress/99adff6b-974c-445a-b58f-59a794c23063 HTTP/1.1" 200 -
2025-04-10 00:57:51,241 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:57:51] "GET /api/query/progress/99adff6b-974c-445a-b58f-59a794c23063 HTTP/1.1" 200 -
2025-04-10 00:57:51,436 - DEBUG - [llm_engine.py:107] - [SQL_GEN] Model response received in 2.15s
2025-04-10 00:57:51,436 - DEBUG - [llm_engine.py:116] - [SQL_GEN] Raw model response: 'Here's a query that will count the number of customers grouped by their state:

```sql
SELECT 
    state, 
    COUNT(*) AS customer_count
FROM 
    customers
GROUP BY 
    state
```
'
2025-04-10 00:57:51,436 - INFO - [llm_engine.py:119] - [SQL_GEN] Completion generation completed in 2.15s
2025-04-10 00:57:51,437 - INFO - [llm_engine.py:120] - **************************
2025-04-10 00:57:51,438 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-10 00:57:51,438 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-10 00:57:51,439 - INFO - [azure_client.py:171] - Extracted SQL query (90 chars) and explanation (78 chars)
2025-04-10 00:57:51,440 - INFO - [azure_client.py:124] - Generated SQL: SELECT 
    state, 
    COUNT(*) AS customer_count
FROM 
    customers
GROUP BY 
    state
2025-04-10 00:57:51,441 - INFO - [azure_client.py:132] - SQL generation completed in 2.16s
2025-04-10 00:57:51,442 - INFO - [database.py:65] - Executing SQL query: SELECT 
    state, 
    COUNT(*) AS customer_count
FROM 
    customers
GROUP BY 
    state
2025-04-10 00:57:51,443 - DEBUG - [database.py:76] - Query execution started
2025-04-10 00:57:51,445 - DEBUG - [database.py:81] - Query execution completed in 0.00s
2025-04-10 00:57:51,447 - INFO - [database.py:86] - Query returned 5 rows with 2 columns
2025-04-10 00:57:51,451 - DEBUG - [database.py:92] - Sample data (first 3 rows):
  state  customer_count
0    CA               1
1    FL               1
2    IL               1
2025-04-10 00:57:51,451 - INFO - [database.py:95] - Query processing completed in 0.01s
2025-04-10 00:57:51,455 - INFO - [sql_generator.py:348] - Analyzing query results for dashboard potential
2025-04-10 00:57:51,456 - INFO - [azure_client.py:197] - Dashboard analysis started for query: 'Get me count of customers by state'
2025-04-10 00:57:51,457 - INFO - [llm_engine.py:56] - [DASHBOARD_ANALYSIS] Completion generation started
2025-04-10 00:57:51,457 - DEBUG - [llm_engine.py:87] - [DASHBOARD_ANALYSIS] Prompt: [{'role': 'system', 'content': 'You are a data visualization expert. Analyze the given query results and determine if they\'re suitable for a dashboard visualization.\n\nYour task is to:\n1. Analyze the columns and data\n2. Determine if the data is suitable for visualization (has numeric values and categorical data)\n3. If suitable, recommend the best chart type (bar, line, pie, etc.)\n4. Identify the best columns for X and Y axes (or equivalent based on chart type)\n5. Suggest meaningful labels... (truncated)
2025-04-10 00:57:51,458 - DEBUG - [llm_engine.py:96] - [DASHBOARD_ANALYSIS] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 00:57:52,018 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:57:52] "GET /api/query/progress/99adff6b-974c-445a-b58f-59a794c23063 HTTP/1.1" 200 -
2025-04-10 00:57:52,278 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:57:52] "GET /api/query/progress/99adff6b-974c-445a-b58f-59a794c23063 HTTP/1.1" 200 -
2025-04-10 00:57:52,678 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:57:52] "GET /api/query/progress/99adff6b-974c-445a-b58f-59a794c23063 HTTP/1.1" 200 -
2025-04-10 00:57:53,442 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:57:53] "GET /api/query/progress/99adff6b-974c-445a-b58f-59a794c23063 HTTP/1.1" 200 -
2025-04-10 00:57:53,683 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:57:53] "GET /api/query/progress/99adff6b-974c-445a-b58f-59a794c23063 HTTP/1.1" 200 -
2025-04-10 00:57:53,885 - DEBUG - [llm_engine.py:107] - [DASHBOARD_ANALYSIS] Model response received in 2.43s
2025-04-10 00:57:53,885 - DEBUG - [llm_engine.py:116] - [DASHBOARD_ANALYSIS] Raw model response: '{
  "is_suitable": true,
  "reason": "The data contains categorical values (state) and numeric values (customer_count), making it suitable for visualizing customer distribution across states.",
  "chart_type": "bar",
  "x_axis": {
    "column": "state",
    "label": "State"
  },
  "y_axis": {
    "column": "customer_count",
    "label": "Number of Customers"
  },
  "title": "Customer Count by State"
}'
2025-04-10 00:57:53,886 - INFO - [llm_engine.py:119] - [DASHBOARD_ANALYSIS] Completion generation completed in 2.43s
2025-04-10 00:57:53,886 - INFO - [llm_engine.py:120] - **************************
2025-04-10 00:57:53,886 - INFO - [azure_client.py:255] - Dashboard analysis results: suitable=True
2025-04-10 00:57:53,887 - INFO - [azure_client.py:264] - Dashboard analysis completed in 2.43s
2025-04-10 00:57:53,887 - INFO - [sql_generator.py:366] - Dashboard analysis completed: suitable=True
2025-04-10 00:57:53,888 - INFO - [sql_generator.py:442] - SQL generation completed in 6.91s
2025-04-10 00:57:53,889 - INFO - [sql_generator.py:125] - Query processing completed in 6.92s
2025-04-10 00:57:54,101 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:57:54] "GET /api/query/progress/99adff6b-974c-445a-b58f-59a794c23063 HTTP/1.1" 200 -
2025-04-10 00:58:26,409 - INFO - [sql_generator.py:37] - Processing query: 'Get me count of customers by state'
2025-04-10 00:58:26,410 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:58:26] "POST /api/query HTTP/1.1" 200 -
2025-04-10 00:58:26,410 - INFO - [intent_agent.py:27] - Intent detection started for query: 'Get me count of customers by state'
2025-04-10 00:58:26,412 - INFO - [intent_agent.py:38] - Using default intent 'data_retrieval' without calling LLM
2025-04-10 00:58:26,413 - INFO - [intent_agent.py:41] - Intent detection completed in 0.00s
2025-04-10 00:58:26,413 - INFO - [sql_generator.py:45] - Detected intent: data_retrieval
2025-04-10 00:58:26,414 - INFO - [sql_generator.py:141] - Starting SQL generation process
2025-04-10 00:58:26,414 - INFO - [database.py:44] - Attempting database connection
2025-04-10 00:58:26,415 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-10 00:58:26,416 - INFO - [table_agent.py:28] - Table selection started for query: 'Get me count of customers by state'
2025-04-10 00:58:26,417 - INFO - [table_agent.py:34] - Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-10 00:58:26,418 - INFO - [table_agent.py:64] - Sending request to AI model for table selection
2025-04-10 00:58:26,418 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-10 00:58:26,419 - DEBUG - [llm_engine.py:87] - [TABLE] Prompt: [{'role': 'system', 'content': "You are a table selection agent for a Text-to-SQL system.\nYour job is to identify which database tables are most relevant to a user query.\nYou will be provided with table names and their descriptions.\nReturn ONLY the names of relevant tables, separated by commas. Be selective and choose\nonly the tables that are directly needed to answer the query. If you're unsure,\ninclude tables that might be related. Return only table names in your response."}, {'role': 'us... (truncated)
2025-04-10 00:58:26,419 - DEBUG - [llm_engine.py:96] - [TABLE] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 00:58:26,902 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:58:26] "GET /api/query/progress/a7bf91e0-50c5-4fc3-be40-5da201d89381 HTTP/1.1" 200 -
2025-04-10 00:58:27,679 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:58:27] "GET /api/query/progress/a7bf91e0-50c5-4fc3-be40-5da201d89381 HTTP/1.1" 200 -
2025-04-10 00:58:27,922 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:58:27] "GET /api/query/progress/a7bf91e0-50c5-4fc3-be40-5da201d89381 HTTP/1.1" 200 -
2025-04-10 00:58:28,119 - DEBUG - [llm_engine.py:107] - [TABLE] Model response received in 1.70s
2025-04-10 00:58:28,119 - DEBUG - [llm_engine.py:116] - [TABLE] Raw model response: 'customers'
2025-04-10 00:58:28,119 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 1.70s
2025-04-10 00:58:28,120 - INFO - [llm_engine.py:120] - **************************
2025-04-10 00:58:28,121 - INFO - [table_agent.py:69] - Raw model response: 'customers'
2025-04-10 00:58:28,121 - INFO - [table_agent.py:90] - Table selection completed in 1.71s. Selected: customers
2025-04-10 00:58:28,122 - INFO - [column_agent.py:29] - Column pruning started for query: 'Get me count of customers by state'
2025-04-10 00:58:28,122 - INFO - [column_agent.py:30] - Processing tables: customers
2025-04-10 00:58:28,123 - INFO - [column_agent.py:38] - Only one table involved (customers). Skipping LLM call and including all columns.
2025-04-10 00:58:28,123 - INFO - [feedback_manager.py:265] - Stage 1: Vector search for 'Get me count of customers by state...'
2025-04-10 00:58:28,202 - DEBUG - [feedback_manager.py:105] - Generated embedding in 0.08s with shape (384,)
2025-04-10 00:58:28,203 - ERROR - [vector_store.py:215] - Error searching similar vectors in collection query_embeddings: argument of type 'NoneType' is not iterable
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/vector_store.py", line 176, in search_similar
    if "id" not in output_fields and not any(f.lower() == 'id' for f in output_fields):
       ^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: argument of type 'NoneType' is not iterable
2025-04-10 00:58:28,204 - WARNING - [feedback_manager.py:288] - No candidates found from vector search, falling back to text-based search
2025-04-10 00:58:28,205 - INFO - [feedback_manager.py:402] - Found 0 similar queries using text-based search for 'Get me count of customers by state...'
2025-04-10 00:58:28,206 - INFO - [azure_client.py:35] - SQL generation started for query: 'Get me count of customers by state'
2025-04-10 00:58:28,206 - INFO - [azure_client.py:69] - Including schema information (587 chars)
2025-04-10 00:58:28,206 - INFO - [azure_client.py:104] - Including 3 SQL examples (no similarity examples found)
2025-04-10 00:58:28,207 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some example queries and their SQL:\nQuestion: How many records are in the customers table?\nSQL: SELECT COUNT(*) AS record_count FROM customers\n\nQuestion: Get all columns from customers\nSQL: SELECT * FROM customers LIMIT 5\n\nQuestion: Get record from customers by customer_id\nSQL: SELECT * FROM customers WHERE customer_id = 1\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: Get me count of customers by state'}]
2025-04-10 00:58:28,207 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-10 00:58:28,208 - DEBUG - [llm_engine.py:87] - [SQL_GEN] Prompt: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief ... (truncated)
2025-04-10 00:58:28,208 - DEBUG - [llm_engine.py:96] - [SQL_GEN] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 00:58:28,343 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:58:28] "GET /api/query/progress/a7bf91e0-50c5-4fc3-be40-5da201d89381 HTTP/1.1" 200 -
2025-04-10 00:58:29,110 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:58:29] "GET /api/query/progress/a7bf91e0-50c5-4fc3-be40-5da201d89381 HTTP/1.1" 200 -
2025-04-10 00:58:29,362 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:58:29] "GET /api/query/progress/a7bf91e0-50c5-4fc3-be40-5da201d89381 HTTP/1.1" 200 -
2025-04-10 00:58:29,766 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:58:29] "GET /api/query/progress/a7bf91e0-50c5-4fc3-be40-5da201d89381 HTTP/1.1" 200 -
2025-04-10 00:58:29,779 - DEBUG - [llm_engine.py:107] - [SQL_GEN] Model response received in 1.57s
2025-04-10 00:58:29,779 - DEBUG - [llm_engine.py:116] - [SQL_GEN] Raw model response: 'Here's a query that will return the number of customers grouped by their state:

```sql
SELECT 
    state, 
    COUNT(*) AS customer_count
FROM 
    customers
GROUP BY 
    state
```'
2025-04-10 00:58:29,780 - INFO - [llm_engine.py:119] - [SQL_GEN] Completion generation completed in 1.57s
2025-04-10 00:58:29,781 - INFO - [llm_engine.py:120] - **************************
2025-04-10 00:58:29,782 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-10 00:58:29,783 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-10 00:58:29,784 - INFO - [azure_client.py:171] - Extracted SQL query (90 chars) and explanation (79 chars)
2025-04-10 00:58:29,785 - INFO - [azure_client.py:124] - Generated SQL: SELECT 
    state, 
    COUNT(*) AS customer_count
FROM 
    customers
GROUP BY 
    state
2025-04-10 00:58:29,787 - INFO - [azure_client.py:132] - SQL generation completed in 1.58s
2025-04-10 00:58:29,788 - INFO - [database.py:65] - Executing SQL query: SELECT 
    state, 
    COUNT(*) AS customer_count
FROM 
    customers
GROUP BY 
    state
2025-04-10 00:58:29,790 - DEBUG - [database.py:76] - Query execution started
2025-04-10 00:58:29,792 - DEBUG - [database.py:81] - Query execution completed in 0.00s
2025-04-10 00:58:29,794 - INFO - [database.py:86] - Query returned 5 rows with 2 columns
2025-04-10 00:58:29,797 - DEBUG - [database.py:92] - Sample data (first 3 rows):
  state  customer_count
0    CA               1
1    FL               1
2    IL               1
2025-04-10 00:58:29,798 - INFO - [database.py:95] - Query processing completed in 0.01s
2025-04-10 00:58:29,800 - INFO - [sql_generator.py:348] - Analyzing query results for dashboard potential
2025-04-10 00:58:29,801 - INFO - [azure_client.py:197] - Dashboard analysis started for query: 'Get me count of customers by state'
2025-04-10 00:58:29,803 - INFO - [llm_engine.py:56] - [DASHBOARD_ANALYSIS] Completion generation started
2025-04-10 00:58:29,805 - DEBUG - [llm_engine.py:87] - [DASHBOARD_ANALYSIS] Prompt: [{'role': 'system', 'content': 'You are a data visualization expert. Analyze the given query results and determine if they\'re suitable for a dashboard visualization.\n\nYour task is to:\n1. Analyze the columns and data\n2. Determine if the data is suitable for visualization (has numeric values and categorical data)\n3. If suitable, recommend the best chart type (bar, line, pie, etc.)\n4. Identify the best columns for X and Y axes (or equivalent based on chart type)\n5. Suggest meaningful labels... (truncated)
2025-04-10 00:58:29,806 - DEBUG - [llm_engine.py:96] - [DASHBOARD_ANALYSIS] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 00:58:30,530 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:58:30] "GET /api/query/progress/a7bf91e0-50c5-4fc3-be40-5da201d89381 HTTP/1.1" 200 -
2025-04-10 00:58:30,786 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:58:30] "GET /api/query/progress/a7bf91e0-50c5-4fc3-be40-5da201d89381 HTTP/1.1" 200 -
2025-04-10 00:58:31,191 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:58:31] "GET /api/query/progress/a7bf91e0-50c5-4fc3-be40-5da201d89381 HTTP/1.1" 200 -
2025-04-10 00:58:31,511 - DEBUG - [llm_engine.py:107] - [DASHBOARD_ANALYSIS] Model response received in 1.70s
2025-04-10 00:58:31,511 - DEBUG - [llm_engine.py:116] - [DASHBOARD_ANALYSIS] Raw model response: '{
  "is_suitable": true,
  "reason": "The data contains categorical values (state) and numeric counts (customer_count), which are ideal for comparing customer distribution across states.",
  "chart_type": "bar",
  "x_axis": {
    "column": "state",
    "label": "State"
  },
  "y_axis": {
    "column": "customer_count",
    "label": "Number of Customers"
  },
  "title": "Customer Count by State"
}'
2025-04-10 00:58:31,511 - INFO - [llm_engine.py:119] - [DASHBOARD_ANALYSIS] Completion generation completed in 1.71s
2025-04-10 00:58:31,511 - INFO - [llm_engine.py:120] - **************************
2025-04-10 00:58:31,512 - INFO - [azure_client.py:255] - Dashboard analysis results: suitable=True
2025-04-10 00:58:31,513 - INFO - [azure_client.py:264] - Dashboard analysis completed in 1.71s
2025-04-10 00:58:31,513 - INFO - [sql_generator.py:366] - Dashboard analysis completed: suitable=True
2025-04-10 00:58:31,514 - INFO - [sql_generator.py:442] - SQL generation completed in 5.10s
2025-04-10 00:58:31,514 - INFO - [sql_generator.py:125] - Query processing completed in 5.11s
2025-04-10 00:58:31,967 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:58:31] "GET /api/query/progress/a7bf91e0-50c5-4fc3-be40-5da201d89381 HTTP/1.1" 200 -
2025-04-10 00:58:47,692 - INFO - [sql_generator.py:37] - Processing query: 'Get me count of customers by state'
2025-04-10 00:58:47,693 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:58:47] "POST /api/query HTTP/1.1" 200 -
2025-04-10 00:58:47,693 - INFO - [intent_agent.py:27] - Intent detection started for query: 'Get me count of customers by state'
2025-04-10 00:58:47,695 - INFO - [intent_agent.py:38] - Using default intent 'data_retrieval' without calling LLM
2025-04-10 00:58:47,696 - INFO - [intent_agent.py:41] - Intent detection completed in 0.00s
2025-04-10 00:58:47,697 - INFO - [sql_generator.py:45] - Detected intent: data_retrieval
2025-04-10 00:58:47,698 - INFO - [sql_generator.py:141] - Starting SQL generation process
2025-04-10 00:58:47,699 - INFO - [database.py:44] - Attempting database connection
2025-04-10 00:58:47,700 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-10 00:58:47,701 - INFO - [table_agent.py:28] - Table selection started for query: 'Get me count of customers by state'
2025-04-10 00:58:47,702 - INFO - [table_agent.py:34] - Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-10 00:58:47,703 - INFO - [table_agent.py:64] - Sending request to AI model for table selection
2025-04-10 00:58:47,704 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-10 00:58:47,705 - DEBUG - [llm_engine.py:87] - [TABLE] Prompt: [{'role': 'system', 'content': "You are a table selection agent for a Text-to-SQL system.\nYour job is to identify which database tables are most relevant to a user query.\nYou will be provided with table names and their descriptions.\nReturn ONLY the names of relevant tables, separated by commas. Be selective and choose\nonly the tables that are directly needed to answer the query. If you're unsure,\ninclude tables that might be related. Return only table names in your response."}, {'role': 'us... (truncated)
2025-04-10 00:58:47,705 - DEBUG - [llm_engine.py:96] - [TABLE] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 00:58:48,457 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:58:48] "GET /api/query/progress/8dc7baef-9562-46a9-b3f2-be779450951d HTTP/1.1" 200 -
2025-04-10 00:58:48,693 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:58:48] "GET /api/query/progress/8dc7baef-9562-46a9-b3f2-be779450951d HTTP/1.1" 200 -
2025-04-10 00:58:49,100 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:58:49] "GET /api/query/progress/8dc7baef-9562-46a9-b3f2-be779450951d HTTP/1.1" 200 -
2025-04-10 00:58:49,650 - DEBUG - [llm_engine.py:107] - [TABLE] Model response received in 1.94s
2025-04-10 00:58:49,650 - DEBUG - [llm_engine.py:116] - [TABLE] Raw model response: 'customers'
2025-04-10 00:58:49,650 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 1.95s
2025-04-10 00:58:49,651 - INFO - [llm_engine.py:120] - **************************
2025-04-10 00:58:49,651 - INFO - [table_agent.py:69] - Raw model response: 'customers'
2025-04-10 00:58:49,651 - INFO - [table_agent.py:90] - Table selection completed in 1.95s. Selected: customers
2025-04-10 00:58:49,652 - INFO - [column_agent.py:29] - Column pruning started for query: 'Get me count of customers by state'
2025-04-10 00:58:49,653 - INFO - [column_agent.py:30] - Processing tables: customers
2025-04-10 00:58:49,653 - INFO - [column_agent.py:38] - Only one table involved (customers). Skipping LLM call and including all columns.
2025-04-10 00:58:49,654 - INFO - [feedback_manager.py:265] - Stage 1: Vector search for 'Get me count of customers by state...'
2025-04-10 00:58:49,681 - DEBUG - [feedback_manager.py:105] - Generated embedding in 0.03s with shape (384,)
2025-04-10 00:58:49,683 - ERROR - [vector_store.py:215] - Error searching similar vectors in collection query_embeddings: argument of type 'NoneType' is not iterable
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/vector_store.py", line 176, in search_similar
    if "id" not in output_fields and not any(f.lower() == 'id' for f in output_fields):
       ^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: argument of type 'NoneType' is not iterable
2025-04-10 00:58:49,684 - WARNING - [feedback_manager.py:288] - No candidates found from vector search, falling back to text-based search
2025-04-10 00:58:49,686 - INFO - [feedback_manager.py:402] - Found 0 similar queries using text-based search for 'Get me count of customers by state...'
2025-04-10 00:58:49,686 - INFO - [azure_client.py:35] - SQL generation started for query: 'Get me count of customers by state'
2025-04-10 00:58:49,687 - INFO - [azure_client.py:69] - Including schema information (587 chars)
2025-04-10 00:58:49,687 - INFO - [azure_client.py:104] - Including 3 SQL examples (no similarity examples found)
2025-04-10 00:58:49,688 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some example queries and their SQL:\nQuestion: How many records are in the customers table?\nSQL: SELECT COUNT(*) AS record_count FROM customers\n\nQuestion: Get all columns from customers\nSQL: SELECT * FROM customers LIMIT 5\n\nQuestion: Get record from customers by customer_id\nSQL: SELECT * FROM customers WHERE customer_id = 1\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: Get me count of customers by state'}]
2025-04-10 00:58:49,688 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-10 00:58:49,689 - DEBUG - [llm_engine.py:87] - [SQL_GEN] Prompt: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief ... (truncated)
2025-04-10 00:58:49,690 - DEBUG - [llm_engine.py:96] - [SQL_GEN] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 00:58:49,849 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:58:49] "GET /api/query/progress/8dc7baef-9562-46a9-b3f2-be779450951d HTTP/1.1" 200 -
2025-04-10 00:58:50,093 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:58:50] "GET /api/query/progress/8dc7baef-9562-46a9-b3f2-be779450951d HTTP/1.1" 200 -
2025-04-10 00:58:50,490 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:58:50] "GET /api/query/progress/8dc7baef-9562-46a9-b3f2-be779450951d HTTP/1.1" 200 -
2025-04-10 00:58:51,189 - DEBUG - [llm_engine.py:107] - [SQL_GEN] Model response received in 1.50s
2025-04-10 00:58:51,189 - DEBUG - [llm_engine.py:116] - [SQL_GEN] Raw model response: 'Here's a query that will return the count of customers grouped by their state:

```sql
SELECT 
    state, 
    COUNT(*) AS customer_count
FROM 
    customers
GROUP BY 
    state
```'
2025-04-10 00:58:51,189 - INFO - [llm_engine.py:119] - [SQL_GEN] Completion generation completed in 1.50s
2025-04-10 00:58:51,190 - INFO - [llm_engine.py:120] - **************************
2025-04-10 00:58:51,191 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-10 00:58:51,191 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-10 00:58:51,192 - INFO - [azure_client.py:171] - Extracted SQL query (90 chars) and explanation (78 chars)
2025-04-10 00:58:51,192 - INFO - [azure_client.py:124] - Generated SQL: SELECT 
    state, 
    COUNT(*) AS customer_count
FROM 
    customers
GROUP BY 
    state
2025-04-10 00:58:51,194 - INFO - [azure_client.py:132] - SQL generation completed in 1.51s
2025-04-10 00:58:51,194 - INFO - [database.py:65] - Executing SQL query: SELECT 
    state, 
    COUNT(*) AS customer_count
FROM 
    customers
GROUP BY 
    state
2025-04-10 00:58:51,195 - DEBUG - [database.py:76] - Query execution started
2025-04-10 00:58:51,197 - DEBUG - [database.py:81] - Query execution completed in 0.00s
2025-04-10 00:58:51,198 - INFO - [database.py:86] - Query returned 5 rows with 2 columns
2025-04-10 00:58:51,200 - DEBUG - [database.py:92] - Sample data (first 3 rows):
  state  customer_count
0    CA               1
1    FL               1
2    IL               1
2025-04-10 00:58:51,201 - INFO - [database.py:95] - Query processing completed in 0.01s
2025-04-10 00:58:51,202 - INFO - [sql_generator.py:348] - Analyzing query results for dashboard potential
2025-04-10 00:58:51,203 - INFO - [azure_client.py:197] - Dashboard analysis started for query: 'Get me count of customers by state'
2025-04-10 00:58:51,204 - INFO - [llm_engine.py:56] - [DASHBOARD_ANALYSIS] Completion generation started
2025-04-10 00:58:51,204 - DEBUG - [llm_engine.py:87] - [DASHBOARD_ANALYSIS] Prompt: [{'role': 'system', 'content': 'You are a data visualization expert. Analyze the given query results and determine if they\'re suitable for a dashboard visualization.\n\nYour task is to:\n1. Analyze the columns and data\n2. Determine if the data is suitable for visualization (has numeric values and categorical data)\n3. If suitable, recommend the best chart type (bar, line, pie, etc.)\n4. Identify the best columns for X and Y axes (or equivalent based on chart type)\n5. Suggest meaningful labels... (truncated)
2025-04-10 00:58:51,205 - DEBUG - [llm_engine.py:96] - [DASHBOARD_ANALYSIS] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 00:58:51,240 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:58:51] "GET /api/query/progress/8dc7baef-9562-46a9-b3f2-be779450951d HTTP/1.1" 200 -
2025-04-10 00:58:51,472 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:58:51] "GET /api/query/progress/8dc7baef-9562-46a9-b3f2-be779450951d HTTP/1.1" 200 -
2025-04-10 00:58:51,879 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:58:51] "GET /api/query/progress/8dc7baef-9562-46a9-b3f2-be779450951d HTTP/1.1" 200 -
2025-04-10 00:58:52,634 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:58:52] "GET /api/query/progress/8dc7baef-9562-46a9-b3f2-be779450951d HTTP/1.1" 200 -
2025-04-10 00:58:52,866 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:58:52] "GET /api/query/progress/8dc7baef-9562-46a9-b3f2-be779450951d HTTP/1.1" 200 -
2025-04-10 00:58:53,261 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:58:53] "GET /api/query/progress/8dc7baef-9562-46a9-b3f2-be779450951d HTTP/1.1" 200 -
2025-04-10 00:58:53,274 - DEBUG - [llm_engine.py:107] - [DASHBOARD_ANALYSIS] Model response received in 2.07s
2025-04-10 00:58:53,275 - DEBUG - [llm_engine.py:116] - [DASHBOARD_ANALYSIS] Raw model response: '{
  "is_suitable": true,
  "reason": "The data contains categorical variables (state) and numeric values (customer_count), making it suitable for visualization, particularly for comparing customer counts across states.",
  "chart_type": "bar",
  "x_axis": {
    "column": "state",
    "label": "State"
  },
  "y_axis": {
    "column": "customer_count",
    "label": "Number of Customers"
  },
  "title": "Customer Count by State"
}'
2025-04-10 00:58:53,275 - INFO - [llm_engine.py:119] - [DASHBOARD_ANALYSIS] Completion generation completed in 2.07s
2025-04-10 00:58:53,276 - INFO - [llm_engine.py:120] - **************************
2025-04-10 00:58:53,276 - INFO - [azure_client.py:255] - Dashboard analysis results: suitable=True
2025-04-10 00:58:53,277 - INFO - [azure_client.py:264] - Dashboard analysis completed in 2.07s
2025-04-10 00:58:53,277 - INFO - [sql_generator.py:366] - Dashboard analysis completed: suitable=True
2025-04-10 00:58:53,277 - INFO - [sql_generator.py:442] - SQL generation completed in 5.58s
2025-04-10 00:58:53,278 - INFO - [sql_generator.py:125] - Query processing completed in 5.59s
2025-04-10 00:58:54,014 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:58:54] "GET /api/query/progress/8dc7baef-9562-46a9-b3f2-be779450951d HTTP/1.1" 200 -
2025-04-10 00:59:19,428 - INFO - [sql_generator.py:37] - Processing query: 'Get me count of orders by customers'
2025-04-10 00:59:19,428 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:59:19] "POST /api/query HTTP/1.1" 200 -
2025-04-10 00:59:19,429 - INFO - [intent_agent.py:27] - Intent detection started for query: 'Get me count of orders by customers'
2025-04-10 00:59:19,430 - INFO - [intent_agent.py:38] - Using default intent 'data_retrieval' without calling LLM
2025-04-10 00:59:19,431 - INFO - [intent_agent.py:41] - Intent detection completed in 0.00s
2025-04-10 00:59:19,432 - INFO - [sql_generator.py:45] - Detected intent: data_retrieval
2025-04-10 00:59:19,433 - INFO - [sql_generator.py:141] - Starting SQL generation process
2025-04-10 00:59:19,433 - INFO - [database.py:44] - Attempting database connection
2025-04-10 00:59:19,435 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-10 00:59:19,435 - INFO - [table_agent.py:28] - Table selection started for query: 'Get me count of orders by customers'
2025-04-10 00:59:19,436 - INFO - [table_agent.py:34] - Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-10 00:59:19,437 - INFO - [table_agent.py:64] - Sending request to AI model for table selection
2025-04-10 00:59:19,438 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-10 00:59:19,439 - DEBUG - [llm_engine.py:87] - [TABLE] Prompt: [{'role': 'system', 'content': "You are a table selection agent for a Text-to-SQL system.\nYour job is to identify which database tables are most relevant to a user query.\nYou will be provided with table names and their descriptions.\nReturn ONLY the names of relevant tables, separated by commas. Be selective and choose\nonly the tables that are directly needed to answer the query. If you're unsure,\ninclude tables that might be related. Return only table names in your response."}, {'role': 'us... (truncated)
2025-04-10 00:59:19,440 - DEBUG - [llm_engine.py:96] - [TABLE] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 00:59:20,183 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:59:20] "GET /api/query/progress/67a9858e-ab38-4e32-8c78-8f50fc140fe8 HTTP/1.1" 200 -
2025-04-10 00:59:20,415 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:59:20] "GET /api/query/progress/67a9858e-ab38-4e32-8c78-8f50fc140fe8 HTTP/1.1" 200 -
2025-04-10 00:59:20,819 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:59:20] "GET /api/query/progress/67a9858e-ab38-4e32-8c78-8f50fc140fe8 HTTP/1.1" 200 -
2025-04-10 00:59:21,505 - DEBUG - [llm_engine.py:107] - [TABLE] Model response received in 2.06s
2025-04-10 00:59:21,505 - DEBUG - [llm_engine.py:116] - [TABLE] Raw model response: 'customers, orders'
2025-04-10 00:59:21,506 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 2.07s
2025-04-10 00:59:21,507 - INFO - [llm_engine.py:120] - **************************
2025-04-10 00:59:21,507 - INFO - [table_agent.py:69] - Raw model response: 'customers, orders'
2025-04-10 00:59:21,508 - INFO - [table_agent.py:90] - Table selection completed in 2.07s. Selected: customers, orders
2025-04-10 00:59:21,509 - INFO - [column_agent.py:29] - Column pruning started for query: 'Get me count of orders by customers'
2025-04-10 00:59:21,509 - INFO - [column_agent.py:30] - Processing tables: customers, orders
2025-04-10 00:59:21,510 - INFO - [column_agent.py:94] - Sending request to AI model for column selection
2025-04-10 00:59:21,510 - INFO - [llm_engine.py:56] - [COLUMN] Completion generation started
2025-04-10 00:59:21,511 - DEBUG - [llm_engine.py:87] - [COLUMN] Prompt: [{'role': 'system', 'content': 'You are a column selection agent for a Text-to-SQL system.\nYour job is to identify which columns from the provided tables are most relevant to a user query.\nFor each table, select only the columns that will be needed to answer the query.\nReturn your answer as a JSON object with table names as keys and arrays of column names as values.\nAlways include primary key columns even if not directly mentioned in the query.\nConsider columns that might be needed for:\n1.... (truncated)
2025-04-10 00:59:21,512 - DEBUG - [llm_engine.py:96] - [COLUMN] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 00:59:21,552 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:59:21] "GET /api/query/progress/67a9858e-ab38-4e32-8c78-8f50fc140fe8 HTTP/1.1" 200 -
2025-04-10 00:59:21,797 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:59:21] "GET /api/query/progress/67a9858e-ab38-4e32-8c78-8f50fc140fe8 HTTP/1.1" 200 -
2025-04-10 00:59:22,189 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:59:22] "GET /api/query/progress/67a9858e-ab38-4e32-8c78-8f50fc140fe8 HTTP/1.1" 200 -
2025-04-10 00:59:22,803 - DEBUG - [llm_engine.py:107] - [COLUMN] Model response received in 1.29s
2025-04-10 00:59:22,804 - DEBUG - [llm_engine.py:116] - [COLUMN] Raw model response: '{
  "customers": ["customer_id", "first_name", "last_name"],
  "orders": ["order_id", "customer_id"]
}'
2025-04-10 00:59:22,804 - INFO - [llm_engine.py:119] - [COLUMN] Completion generation completed in 1.29s
2025-04-10 00:59:22,804 - INFO - [llm_engine.py:120] - **************************
2025-04-10 00:59:22,806 - INFO - [column_agent.py:139] - Parsing column selection from model response
2025-04-10 00:59:22,807 - INFO - [column_agent.py:149] - Parsed column selection JSON: {"customers": ["customer_id", "first_name", "last_name"], "orders": ["order_id", "customer_id"]}
2025-04-10 00:59:22,808 - INFO - [column_agent.py:111] - Table 'customers': Pruned 8 columns, kept 3/11
2025-04-10 00:59:22,809 - INFO - [column_agent.py:111] - Table 'orders': Pruned 3 columns, kept 2/5
2025-04-10 00:59:22,809 - INFO - [column_agent.py:197] - Building pruned schema
2025-04-10 00:59:22,810 - INFO - [column_agent.py:226] - Built pruned schema (439 chars)
2025-04-10 00:59:22,811 - INFO - [column_agent.py:120] - Column pruning completed in 1.30s
2025-04-10 00:59:22,812 - INFO - [sql_generator.py:237] - Found 1 join conditions for the relevant tables
2025-04-10 00:59:22,813 - INFO - [feedback_manager.py:265] - Stage 1: Vector search for 'Get me count of orders by customers...'
2025-04-10 00:59:22,842 - DEBUG - [feedback_manager.py:105] - Generated embedding in 0.03s with shape (384,)
2025-04-10 00:59:22,844 - ERROR - [vector_store.py:215] - Error searching similar vectors in collection query_embeddings: argument of type 'NoneType' is not iterable
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/vector_store.py", line 176, in search_similar
    if "id" not in output_fields and not any(f.lower() == 'id' for f in output_fields):
       ^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: argument of type 'NoneType' is not iterable
2025-04-10 00:59:22,845 - WARNING - [feedback_manager.py:288] - No candidates found from vector search, falling back to text-based search
2025-04-10 00:59:22,846 - INFO - [feedback_manager.py:402] - Found 0 similar queries using text-based search for 'Get me count of orders by customers...'
2025-04-10 00:59:22,846 - INFO - [azure_client.py:35] - SQL generation started for query: 'Get me count of orders by customers'
2025-04-10 00:59:22,847 - INFO - [azure_client.py:69] - Including schema information (439 chars)
2025-04-10 00:59:22,847 - INFO - [azure_client.py:76] - Including 1 join conditions
2025-04-10 00:59:22,848 - INFO - [azure_client.py:104] - Including 4 SQL examples (no similarity examples found)
2025-04-10 00:59:22,848 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER): Unique customer identifier, first_name (TEXT): Customer's first name, last_name (TEXT): Customer's last name\nPrimary Key(s): customer_id\n\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER): Unique order identifier, customer_id (INTEGER): Reference to customer who placed the order\nPrimary Key(s): order_id\n"}, {'role': 'user', 'content': 'Use the following pre-defined join conditions when joining these tables:\n- When joining customers with orders, use: INNER JOIN orders ON customers.customer_id = orders.customer_id\n'}, {'role': 'user', 'content': 'Here are some example queries and their SQL:\nQuestion: How many records are in the customers table?\nSQL: SELECT COUNT(*) AS record_count FROM customers\n\nQuestion: Get all columns from customers\nSQL: SELECT * FROM customers LIMIT 5\n\nQuestion: Get record from customers by customer_id\nSQL: SELECT * FROM customers WHERE customer_id = 1\n\nQuestion: Show some data from customers and orders\nSQL: SELECT customers.first_name, orders.customer_id\nFROM customers\nINNER JOIN orders ON customers.customer_id = orders.customer_id\nLIMIT 5\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: Get me count of orders by customers'}]
2025-04-10 00:59:22,849 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-10 00:59:22,849 - DEBUG - [llm_engine.py:87] - [SQL_GEN] Prompt: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief ... (truncated)
2025-04-10 00:59:22,850 - DEBUG - [llm_engine.py:96] - [SQL_GEN] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 00:59:22,960 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:59:22] "GET /api/query/progress/67a9858e-ab38-4e32-8c78-8f50fc140fe8 HTTP/1.1" 200 -
2025-04-10 00:59:23,217 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:59:23] "GET /api/query/progress/67a9858e-ab38-4e32-8c78-8f50fc140fe8 HTTP/1.1" 200 -
2025-04-10 00:59:23,628 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:59:23] "GET /api/query/progress/67a9858e-ab38-4e32-8c78-8f50fc140fe8 HTTP/1.1" 200 -
2025-04-10 00:59:24,397 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:59:24] "GET /api/query/progress/67a9858e-ab38-4e32-8c78-8f50fc140fe8 HTTP/1.1" 200 -
2025-04-10 00:59:24,544 - DEBUG - [llm_engine.py:107] - [SQL_GEN] Model response received in 1.69s
2025-04-10 00:59:24,544 - DEBUG - [llm_engine.py:116] - [SQL_GEN] Raw model response: 'Here's a query that will return the count of orders placed by each customer, showing the customer's ID along with the number of orders they have made.

```sql
SELECT 
    customers.customer_id, 
    COUNT(orders.order_id) AS order_count
FROM customers
INNER JOIN orders ON customers.customer_id = orders.customer_id
GROUP BY customers.customer_id
```
'
2025-04-10 00:59:24,544 - INFO - [llm_engine.py:119] - [SQL_GEN] Completion generation completed in 1.70s
2025-04-10 00:59:24,545 - INFO - [llm_engine.py:120] - **************************
2025-04-10 00:59:24,546 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-10 00:59:24,547 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-10 00:59:24,547 - INFO - [azure_client.py:171] - Extracted SQL query (187 chars) and explanation (150 chars)
2025-04-10 00:59:24,549 - INFO - [azure_client.py:124] - Generated SQL: SELECT 
    customers.customer_id, 
    COUNT(orders.order_id) AS order_count
FROM customers
INNER JOIN orders ON customers.customer_id = orders.customer_id
GROUP BY customers.customer_id
2025-04-10 00:59:24,549 - INFO - [azure_client.py:132] - SQL generation completed in 1.70s
2025-04-10 00:59:24,550 - INFO - [database.py:65] - Executing SQL query: SELECT 
    customers.customer_id, 
    COUNT(orders.order_id) AS order_count
FROM customers
INNER JOIN orders ON customers.customer_id = orders.customer_id
GROUP BY customers.customer_id
2025-04-10 00:59:24,552 - DEBUG - [database.py:76] - Query execution started
2025-04-10 00:59:24,553 - DEBUG - [database.py:81] - Query execution completed in 0.00s
2025-04-10 00:59:24,553 - INFO - [database.py:86] - Query returned 5 rows with 2 columns
2025-04-10 00:59:24,555 - DEBUG - [database.py:92] - Sample data (first 3 rows):
   customer_id  order_count
0            1            2
1            2            2
2            3            2
2025-04-10 00:59:24,556 - INFO - [database.py:95] - Query processing completed in 0.01s
2025-04-10 00:59:24,558 - INFO - [sql_generator.py:348] - Analyzing query results for dashboard potential
2025-04-10 00:59:24,559 - INFO - [azure_client.py:197] - Dashboard analysis started for query: 'Get me count of orders by customers'
2025-04-10 00:59:24,560 - INFO - [llm_engine.py:56] - [DASHBOARD_ANALYSIS] Completion generation started
2025-04-10 00:59:24,561 - DEBUG - [llm_engine.py:87] - [DASHBOARD_ANALYSIS] Prompt: [{'role': 'system', 'content': 'You are a data visualization expert. Analyze the given query results and determine if they\'re suitable for a dashboard visualization.\n\nYour task is to:\n1. Analyze the columns and data\n2. Determine if the data is suitable for visualization (has numeric values and categorical data)\n3. If suitable, recommend the best chart type (bar, line, pie, etc.)\n4. Identify the best columns for X and Y axes (or equivalent based on chart type)\n5. Suggest meaningful labels... (truncated)
2025-04-10 00:59:24,561 - DEBUG - [llm_engine.py:96] - [DASHBOARD_ANALYSIS] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 00:59:24,639 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:59:24] "GET /api/query/progress/67a9858e-ab38-4e32-8c78-8f50fc140fe8 HTTP/1.1" 200 -
2025-04-10 00:59:25,045 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:59:25] "GET /api/query/progress/67a9858e-ab38-4e32-8c78-8f50fc140fe8 HTTP/1.1" 200 -
2025-04-10 00:59:25,820 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:59:25] "GET /api/query/progress/67a9858e-ab38-4e32-8c78-8f50fc140fe8 HTTP/1.1" 200 -
2025-04-10 00:59:26,058 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:59:26] "GET /api/query/progress/67a9858e-ab38-4e32-8c78-8f50fc140fe8 HTTP/1.1" 200 -
2025-04-10 00:59:26,477 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:59:26] "GET /api/query/progress/67a9858e-ab38-4e32-8c78-8f50fc140fe8 HTTP/1.1" 200 -
2025-04-10 00:59:26,655 - DEBUG - [llm_engine.py:107] - [DASHBOARD_ANALYSIS] Model response received in 2.09s
2025-04-10 00:59:26,656 - DEBUG - [llm_engine.py:116] - [DASHBOARD_ANALYSIS] Raw model response: '{
  "is_suitable": true,
  "reason": "The data contains a categorical identifier (customer_id) and a numeric value (order_count), making it suitable for visualizing the number of orders per customer.",
  "chart_type": "bar",
  "x_axis": {
    "column": "customer_id",
    "label": "Customer ID"
  },
  "y_axis": {
    "column": "order_count",
    "label": "Number of Orders"
  },
  "title": "Number of Orders by Customer"
}'
2025-04-10 00:59:26,656 - INFO - [llm_engine.py:119] - [DASHBOARD_ANALYSIS] Completion generation completed in 2.10s
2025-04-10 00:59:26,656 - INFO - [llm_engine.py:120] - **************************
2025-04-10 00:59:26,657 - INFO - [azure_client.py:255] - Dashboard analysis results: suitable=True
2025-04-10 00:59:26,657 - INFO - [azure_client.py:264] - Dashboard analysis completed in 2.10s
2025-04-10 00:59:26,657 - INFO - [sql_generator.py:366] - Dashboard analysis completed: suitable=True
2025-04-10 00:59:26,658 - INFO - [sql_generator.py:442] - SQL generation completed in 7.23s
2025-04-10 00:59:26,659 - INFO - [sql_generator.py:125] - Query processing completed in 7.23s
2025-04-10 00:59:27,241 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 00:59:27] "GET /api/query/progress/67a9858e-ab38-4e32-8c78-8f50fc140fe8 HTTP/1.1" 200 -
2025-04-10 01:02:08,451 - DEBUG - [app.py:84] - Main page requested
2025-04-10 01:02:08,455 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:02:08] "GET / HTTP/1.1" 200 -
2025-04-10 01:02:08,691 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:02:08] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-10 01:02:08,794 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:02:08] "GET /static/js/table-mentions.js HTTP/1.1" 200 -
2025-04-10 01:02:08,797 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:02:08] "GET /static/js/ui-utils.js HTTP/1.1" 200 -
2025-04-10 01:02:08,805 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:02:08] "GET /static/js/schema-manager.js HTTP/1.1" 200 -
2025-04-10 01:02:08,810 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:02:08] "GET /static/js/core.js HTTP/1.1" 200 -
2025-04-10 01:02:08,811 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:02:08] "GET /static/js/results-display.js HTTP/1.1" 200 -
2025-04-10 01:02:08,999 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:02:08] "GET /static/js/feedback.js HTTP/1.1" 200 -
2025-04-10 01:02:09,099 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:02:09] "GET /static/js/dashboard.js HTTP/1.1" 200 -
2025-04-10 01:02:09,103 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:02:09] "GET /static/js/query-handler.js HTTP/1.1" 200 -
2025-04-10 01:02:09,438 - DEBUG - [app.py:152] - Table suggestions requested for workspace: dfd, query: ''
2025-04-10 01:02:09,439 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:02:09] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-10 01:02:09,458 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:02:09] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-04-10 01:02:13,197 - INFO - [sql_generator.py:37] - Processing query: 'Get me count of orders by customers'
2025-04-10 01:02:13,198 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:02:13] "POST /api/query HTTP/1.1" 200 -
2025-04-10 01:02:13,199 - INFO - [intent_agent.py:27] - Intent detection started for query: 'Get me count of orders by customers'
2025-04-10 01:02:13,201 - INFO - [intent_agent.py:38] - Using default intent 'data_retrieval' without calling LLM
2025-04-10 01:02:13,202 - INFO - [intent_agent.py:41] - Intent detection completed in 0.00s
2025-04-10 01:02:13,203 - INFO - [sql_generator.py:45] - Detected intent: data_retrieval
2025-04-10 01:02:13,203 - INFO - [sql_generator.py:141] - Starting SQL generation process
2025-04-10 01:02:13,204 - INFO - [database.py:44] - Attempting database connection
2025-04-10 01:02:13,205 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-10 01:02:13,206 - INFO - [table_agent.py:28] - Table selection started for query: 'Get me count of orders by customers'
2025-04-10 01:02:13,207 - INFO - [table_agent.py:34] - Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-10 01:02:13,208 - INFO - [table_agent.py:64] - Sending request to AI model for table selection
2025-04-10 01:02:13,209 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-10 01:02:13,210 - DEBUG - [llm_engine.py:87] - [TABLE] Prompt: [{'role': 'system', 'content': "You are a table selection agent for a Text-to-SQL system.\nYour job is to identify which database tables are most relevant to a user query.\nYou will be provided with table names and their descriptions.\nReturn ONLY the names of relevant tables, separated by commas. Be selective and choose\nonly the tables that are directly needed to answer the query. If you're unsure,\ninclude tables that might be related. Return only table names in your response."}, {'role': 'us... (truncated)
2025-04-10 01:02:13,210 - DEBUG - [llm_engine.py:96] - [TABLE] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:02:13,982 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:02:13] "GET /api/query/progress/97557224-3747-4fc3-aa81-f3c245ca6885 HTTP/1.1" 200 -
2025-04-10 01:02:14,222 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:02:14] "GET /api/query/progress/97557224-3747-4fc3-aa81-f3c245ca6885 HTTP/1.1" 200 -
2025-04-10 01:02:14,639 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:02:14] "GET /api/query/progress/97557224-3747-4fc3-aa81-f3c245ca6885 HTTP/1.1" 200 -
2025-04-10 01:02:15,139 - DEBUG - [llm_engine.py:107] - [TABLE] Model response received in 1.93s
2025-04-10 01:02:15,139 - DEBUG - [llm_engine.py:116] - [TABLE] Raw model response: 'orders'
2025-04-10 01:02:15,140 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 1.93s
2025-04-10 01:02:15,140 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:02:15,141 - INFO - [table_agent.py:69] - Raw model response: 'orders'
2025-04-10 01:02:15,142 - INFO - [table_agent.py:90] - Table selection completed in 1.94s. Selected: orders
2025-04-10 01:02:15,143 - INFO - [column_agent.py:29] - Column pruning started for query: 'Get me count of orders by customers'
2025-04-10 01:02:15,144 - INFO - [column_agent.py:30] - Processing tables: orders
2025-04-10 01:02:15,145 - INFO - [column_agent.py:38] - Only one table involved (orders). Skipping LLM call and including all columns.
2025-04-10 01:02:15,146 - INFO - [feedback_manager.py:265] - Stage 1: Vector search for 'Get me count of orders by customers...'
2025-04-10 01:02:15,189 - DEBUG - [feedback_manager.py:105] - Generated embedding in 0.04s with shape (384,)
2025-04-10 01:02:15,196 - ERROR - [vector_store.py:215] - Error searching similar vectors in collection query_embeddings: argument of type 'NoneType' is not iterable
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/vector_store.py", line 176, in search_similar
    if "id" not in output_fields and not any(f.lower() == 'id' for f in output_fields):
       ^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: argument of type 'NoneType' is not iterable
2025-04-10 01:02:15,197 - WARNING - [feedback_manager.py:288] - No candidates found from vector search, falling back to text-based search
2025-04-10 01:02:15,200 - INFO - [feedback_manager.py:402] - Found 0 similar queries using text-based search for 'Get me count of orders by customers...'
2025-04-10 01:02:15,201 - INFO - [azure_client.py:35] - SQL generation started for query: 'Get me count of orders by customers'
2025-04-10 01:02:15,201 - INFO - [azure_client.py:69] - Including schema information (363 chars)
2025-04-10 01:02:15,202 - INFO - [azure_client.py:104] - Including 3 SQL examples (no similarity examples found)
2025-04-10 01:02:15,203 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER) - Unique order identifier, customer_id (INTEGER) - Reference to customer who placed the order, order_date (TEXT) - Date when order was placed, status (TEXT) - Order status (pending, shipped, completed, etc.), total_amount (REAL) - Total order amount\nPrimary Key(s): order_id\n"}, {'role': 'user', 'content': 'Here are some example queries and their SQL:\nQuestion: How many records are in the orders table?\nSQL: SELECT COUNT(*) AS record_count FROM orders\n\nQuestion: Get all columns from orders\nSQL: SELECT * FROM orders LIMIT 5\n\nQuestion: Get record from orders by order_id\nSQL: SELECT * FROM orders WHERE order_id = 1\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: Get me count of orders by customers'}]
2025-04-10 01:02:15,204 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-10 01:02:15,205 - DEBUG - [llm_engine.py:87] - [SQL_GEN] Prompt: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief ... (truncated)
2025-04-10 01:02:15,205 - DEBUG - [llm_engine.py:96] - [SQL_GEN] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:02:15,404 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:02:15] "GET /api/query/progress/97557224-3747-4fc3-aa81-f3c245ca6885 HTTP/1.1" 200 -
2025-04-10 01:02:15,654 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:02:15] "GET /api/query/progress/97557224-3747-4fc3-aa81-f3c245ca6885 HTTP/1.1" 200 -
2025-04-10 01:02:16,058 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:02:16] "GET /api/query/progress/97557224-3747-4fc3-aa81-f3c245ca6885 HTTP/1.1" 200 -
2025-04-10 01:02:16,673 - DEBUG - [llm_engine.py:107] - [SQL_GEN] Model response received in 1.47s
2025-04-10 01:02:16,673 - DEBUG - [llm_engine.py:116] - [SQL_GEN] Raw model response: 'Here's a query that will return the count of orders placed by each customer from the `orders` table, grouped by the `customer_id`:

```sql
SELECT 
    customer_id, 
    COUNT(*) AS order_count
FROM 
    orders
GROUP BY 
    customer_id
```'
2025-04-10 01:02:16,674 - INFO - [llm_engine.py:119] - [SQL_GEN] Completion generation completed in 1.47s
2025-04-10 01:02:16,675 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:02:16,675 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-10 01:02:16,676 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-10 01:02:16,676 - INFO - [azure_client.py:171] - Extracted SQL query (96 chars) and explanation (130 chars)
2025-04-10 01:02:16,677 - INFO - [azure_client.py:124] - Generated SQL: SELECT 
    customer_id, 
    COUNT(*) AS order_count
FROM 
    orders
GROUP BY 
    customer_id
2025-04-10 01:02:16,678 - INFO - [azure_client.py:132] - SQL generation completed in 1.48s
2025-04-10 01:02:16,679 - INFO - [database.py:65] - Executing SQL query: SELECT 
    customer_id, 
    COUNT(*) AS order_count
FROM 
    orders
GROUP BY 
    customer_id
2025-04-10 01:02:16,680 - DEBUG - [database.py:76] - Query execution started
2025-04-10 01:02:16,682 - DEBUG - [database.py:81] - Query execution completed in 0.00s
2025-04-10 01:02:16,683 - INFO - [database.py:86] - Query returned 5 rows with 2 columns
2025-04-10 01:02:16,685 - DEBUG - [database.py:92] - Sample data (first 3 rows):
   customer_id  order_count
0            1            2
1            2            2
2            3            2
2025-04-10 01:02:16,686 - INFO - [database.py:95] - Query processing completed in 0.01s
2025-04-10 01:02:16,687 - INFO - [sql_generator.py:348] - Analyzing query results for dashboard potential
2025-04-10 01:02:16,688 - INFO - [azure_client.py:197] - Dashboard analysis started for query: 'Get me count of orders by customers'
2025-04-10 01:02:16,689 - INFO - [llm_engine.py:56] - [DASHBOARD_ANALYSIS] Completion generation started
2025-04-10 01:02:16,690 - DEBUG - [llm_engine.py:87] - [DASHBOARD_ANALYSIS] Prompt: [{'role': 'system', 'content': 'You are a data visualization expert. Analyze the given query results and determine if they\'re suitable for a dashboard visualization.\n\nYour task is to:\n1. Analyze the columns and data\n2. Determine if the data is suitable for visualization (has numeric values and categorical data)\n3. If suitable, recommend the best chart type (bar, line, pie, etc.)\n4. Identify the best columns for X and Y axes (or equivalent based on chart type)\n5. Suggest meaningful labels... (truncated)
2025-04-10 01:02:16,691 - DEBUG - [llm_engine.py:96] - [DASHBOARD_ANALYSIS] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:02:16,828 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:02:16] "GET /api/query/progress/97557224-3747-4fc3-aa81-f3c245ca6885 HTTP/1.1" 200 -
2025-04-10 01:02:17,068 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:02:17] "GET /api/query/progress/97557224-3747-4fc3-aa81-f3c245ca6885 HTTP/1.1" 200 -
2025-04-10 01:02:17,484 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:02:17] "GET /api/query/progress/97557224-3747-4fc3-aa81-f3c245ca6885 HTTP/1.1" 200 -
2025-04-10 01:02:18,241 - DEBUG - [llm_engine.py:107] - [DASHBOARD_ANALYSIS] Model response received in 1.55s
2025-04-10 01:02:18,242 - DEBUG - [llm_engine.py:116] - [DASHBOARD_ANALYSIS] Raw model response: '{
  "is_suitable": true,
  "reason": "The data contains a categorical identifier (customer_id) and a numeric value (order_count), making it suitable for visualizing order counts per customer.",
  "chart_type": "bar",
  "x_axis": {
    "column": "customer_id",
    "label": "Customer ID"
  },
  "y_axis": {
    "column": "order_count",
    "label": "Number of Orders"
  },
  "title": "Number of Orders per Customer"
}'
2025-04-10 01:02:18,242 - INFO - [llm_engine.py:119] - [DASHBOARD_ANALYSIS] Completion generation completed in 1.55s
2025-04-10 01:02:18,243 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:02:18,245 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:02:18] "GET /api/query/progress/97557224-3747-4fc3-aa81-f3c245ca6885 HTTP/1.1" 200 -
2025-04-10 01:02:18,246 - INFO - [azure_client.py:255] - Dashboard analysis results: suitable=True
2025-04-10 01:02:18,248 - INFO - [azure_client.py:264] - Dashboard analysis completed in 1.56s
2025-04-10 01:02:18,248 - INFO - [sql_generator.py:366] - Dashboard analysis completed: suitable=True
2025-04-10 01:02:18,248 - INFO - [sql_generator.py:442] - SQL generation completed in 5.05s
2025-04-10 01:02:18,249 - INFO - [sql_generator.py:125] - Query processing completed in 5.05s
2025-04-10 01:02:18,484 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:02:18] "GET /api/query/progress/97557224-3747-4fc3-aa81-f3c245ca6885 HTTP/1.1" 200 -
2025-04-10 01:02:47,795 - INFO - [sql_generator.py:37] - Processing query: 'Get me all the customers records'
2025-04-10 01:02:47,796 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:02:47] "POST /api/query HTTP/1.1" 200 -
2025-04-10 01:02:47,797 - INFO - [intent_agent.py:27] - Intent detection started for query: 'Get me all the customers records'
2025-04-10 01:02:47,798 - INFO - [intent_agent.py:38] - Using default intent 'data_retrieval' without calling LLM
2025-04-10 01:02:47,799 - INFO - [intent_agent.py:41] - Intent detection completed in 0.00s
2025-04-10 01:02:47,800 - INFO - [sql_generator.py:45] - Detected intent: data_retrieval
2025-04-10 01:02:47,800 - INFO - [sql_generator.py:141] - Starting SQL generation process
2025-04-10 01:02:47,802 - INFO - [database.py:44] - Attempting database connection
2025-04-10 01:02:47,803 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-10 01:02:47,804 - INFO - [table_agent.py:28] - Table selection started for query: 'Get me all the customers records'
2025-04-10 01:02:47,804 - INFO - [table_agent.py:34] - Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-10 01:02:47,805 - INFO - [table_agent.py:64] - Sending request to AI model for table selection
2025-04-10 01:02:47,806 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-10 01:02:47,807 - DEBUG - [llm_engine.py:87] - [TABLE] Prompt: [{'role': 'system', 'content': "You are a table selection agent for a Text-to-SQL system.\nYour job is to identify which database tables are most relevant to a user query.\nYou will be provided with table names and their descriptions.\nReturn ONLY the names of relevant tables, separated by commas. Be selective and choose\nonly the tables that are directly needed to answer the query. If you're unsure,\ninclude tables that might be related. Return only table names in your response."}, {'role': 'us... (truncated)
2025-04-10 01:02:47,807 - DEBUG - [llm_engine.py:96] - [TABLE] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:02:48,599 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:02:48] "GET /api/query/progress/a2bdb10c-8aea-4537-963c-694f0456fc70 HTTP/1.1" 200 -
2025-04-10 01:02:48,838 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:02:48] "GET /api/query/progress/a2bdb10c-8aea-4537-963c-694f0456fc70 HTTP/1.1" 200 -
2025-04-10 01:02:49,244 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:02:49] "GET /api/query/progress/a2bdb10c-8aea-4537-963c-694f0456fc70 HTTP/1.1" 200 -
2025-04-10 01:02:50,003 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:02:50] "GET /api/query/progress/a2bdb10c-8aea-4537-963c-694f0456fc70 HTTP/1.1" 200 -
2025-04-10 01:02:50,256 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:02:50] "GET /api/query/progress/a2bdb10c-8aea-4537-963c-694f0456fc70 HTTP/1.1" 200 -
2025-04-10 01:02:50,381 - DEBUG - [llm_engine.py:107] - [TABLE] Model response received in 2.57s
2025-04-10 01:02:50,381 - DEBUG - [llm_engine.py:116] - [TABLE] Raw model response: 'customers'
2025-04-10 01:02:50,381 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 2.58s
2025-04-10 01:02:50,382 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:02:50,382 - INFO - [table_agent.py:69] - Raw model response: 'customers'
2025-04-10 01:02:50,383 - INFO - [table_agent.py:90] - Table selection completed in 2.58s. Selected: customers
2025-04-10 01:02:50,384 - INFO - [column_agent.py:29] - Column pruning started for query: 'Get me all the customers records'
2025-04-10 01:02:50,384 - INFO - [column_agent.py:30] - Processing tables: customers
2025-04-10 01:02:50,385 - INFO - [column_agent.py:38] - Only one table involved (customers). Skipping LLM call and including all columns.
2025-04-10 01:02:50,385 - INFO - [feedback_manager.py:265] - Stage 1: Vector search for 'Get me all the customers records...'
2025-04-10 01:02:50,420 - DEBUG - [feedback_manager.py:105] - Generated embedding in 0.03s with shape (384,)
2025-04-10 01:02:50,421 - ERROR - [vector_store.py:215] - Error searching similar vectors in collection query_embeddings: argument of type 'NoneType' is not iterable
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/vector_store.py", line 176, in search_similar
    if "id" not in output_fields and not any(f.lower() == 'id' for f in output_fields):
       ^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: argument of type 'NoneType' is not iterable
2025-04-10 01:02:50,422 - WARNING - [feedback_manager.py:288] - No candidates found from vector search, falling back to text-based search
2025-04-10 01:02:50,423 - INFO - [feedback_manager.py:402] - Found 0 similar queries using text-based search for 'Get me all the customers records...'
2025-04-10 01:02:50,423 - INFO - [azure_client.py:35] - SQL generation started for query: 'Get me all the customers records'
2025-04-10 01:02:50,423 - INFO - [azure_client.py:69] - Including schema information (587 chars)
2025-04-10 01:02:50,424 - INFO - [azure_client.py:104] - Including 3 SQL examples (no similarity examples found)
2025-04-10 01:02:50,424 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some example queries and their SQL:\nQuestion: How many records are in the customers table?\nSQL: SELECT COUNT(*) AS record_count FROM customers\n\nQuestion: Get all columns from customers\nSQL: SELECT * FROM customers LIMIT 5\n\nQuestion: Get record from customers by customer_id\nSQL: SELECT * FROM customers WHERE customer_id = 1\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: Get me all the customers records'}]
2025-04-10 01:02:50,424 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-10 01:02:50,424 - DEBUG - [llm_engine.py:87] - [SQL_GEN] Prompt: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief ... (truncated)
2025-04-10 01:02:50,425 - DEBUG - [llm_engine.py:96] - [SQL_GEN] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:02:50,667 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:02:50] "GET /api/query/progress/a2bdb10c-8aea-4537-963c-694f0456fc70 HTTP/1.1" 200 -
2025-04-10 01:02:51,428 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:02:51] "GET /api/query/progress/a2bdb10c-8aea-4537-963c-694f0456fc70 HTTP/1.1" 200 -
2025-04-10 01:02:51,671 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:02:51] "GET /api/query/progress/a2bdb10c-8aea-4537-963c-694f0456fc70 HTTP/1.1" 200 -
2025-04-10 01:02:51,782 - DEBUG - [llm_engine.py:107] - [SQL_GEN] Model response received in 1.36s
2025-04-10 01:02:51,783 - DEBUG - [llm_engine.py:116] - [SQL_GEN] Raw model response: 'Here's a query that will retrieve all the customer records from the customers table:

```sql
SELECT *
FROM customers
```'
2025-04-10 01:02:51,783 - INFO - [llm_engine.py:119] - [SQL_GEN] Completion generation completed in 1.36s
2025-04-10 01:02:51,784 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:02:51,784 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-10 01:02:51,785 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-10 01:02:51,785 - INFO - [azure_client.py:171] - Extracted SQL query (23 chars) and explanation (84 chars)
2025-04-10 01:02:51,786 - INFO - [azure_client.py:124] - Generated SQL: SELECT *
FROM customers
2025-04-10 01:02:51,786 - INFO - [azure_client.py:132] - SQL generation completed in 1.36s
2025-04-10 01:02:51,787 - INFO - [database.py:65] - Executing SQL query: SELECT *
FROM customers
2025-04-10 01:02:51,788 - DEBUG - [database.py:76] - Query execution started
2025-04-10 01:02:51,789 - DEBUG - [database.py:81] - Query execution completed in 0.00s
2025-04-10 01:02:51,789 - INFO - [database.py:86] - Query returned 5 rows with 11 columns
2025-04-10 01:02:51,793 - DEBUG - [database.py:92] - Sample data (first 3 rows):
   customer_id first_name last_name                   email         phone      address         city state country postal_code registration_date
0            1       John       Doe    john.doe@example.com  123-456-7890  123 Main St     New York    NY     USA       10001        2023-01-15
1            2       Jane     Smith  jane.smith@example.com  987-654-3210  456 Oak Ave  Los Angeles    CA     USA       90001        2023-02-20
2            3      Alice   Johnson       alice@example.com  555-123-4567  789 Pine St      Chicago    IL     USA       60007        2023-03-10
2025-04-10 01:02:51,793 - INFO - [database.py:95] - Query processing completed in 0.01s
2025-04-10 01:02:51,795 - INFO - [sql_generator.py:348] - Analyzing query results for dashboard potential
2025-04-10 01:02:51,796 - INFO - [azure_client.py:197] - Dashboard analysis started for query: 'Get me all the customers records'
2025-04-10 01:02:51,796 - INFO - [llm_engine.py:56] - [DASHBOARD_ANALYSIS] Completion generation started
2025-04-10 01:02:51,797 - DEBUG - [llm_engine.py:87] - [DASHBOARD_ANALYSIS] Prompt: [{'role': 'system', 'content': 'You are a data visualization expert. Analyze the given query results and determine if they\'re suitable for a dashboard visualization.\n\nYour task is to:\n1. Analyze the columns and data\n2. Determine if the data is suitable for visualization (has numeric values and categorical data)\n3. If suitable, recommend the best chart type (bar, line, pie, etc.)\n4. Identify the best columns for X and Y axes (or equivalent based on chart type)\n5. Suggest meaningful labels... (truncated)
2025-04-10 01:02:51,798 - DEBUG - [llm_engine.py:96] - [DASHBOARD_ANALYSIS] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:02:52,078 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:02:52] "GET /api/query/progress/a2bdb10c-8aea-4537-963c-694f0456fc70 HTTP/1.1" 200 -
2025-04-10 01:02:52,848 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:02:52] "GET /api/query/progress/a2bdb10c-8aea-4537-963c-694f0456fc70 HTTP/1.1" 200 -
2025-04-10 01:02:53,102 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:02:53] "GET /api/query/progress/a2bdb10c-8aea-4537-963c-694f0456fc70 HTTP/1.1" 200 -
2025-04-10 01:02:53,505 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:02:53] "GET /api/query/progress/a2bdb10c-8aea-4537-963c-694f0456fc70 HTTP/1.1" 200 -
2025-04-10 01:02:53,860 - DEBUG - [llm_engine.py:107] - [DASHBOARD_ANALYSIS] Model response received in 2.06s
2025-04-10 01:02:53,861 - DEBUG - [llm_engine.py:116] - [DASHBOARD_ANALYSIS] Raw model response: '{
  "is_suitable": false,
  "reason": "The data contains mostly categorical and textual information without any meaningful numeric values to aggregate or compare. It is a raw customer list rather than summarized or quantitative data suitable for visualization.",
  "chart_type": null,
  "x_axis": {
    "column": null,
    "label": null
  },
  "y_axis": {
    "column": null,
    "label": null
  },
  "title": null
}'
2025-04-10 01:02:53,861 - INFO - [llm_engine.py:119] - [DASHBOARD_ANALYSIS] Completion generation completed in 2.06s
2025-04-10 01:02:53,862 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:02:53,862 - INFO - [azure_client.py:255] - Dashboard analysis results: suitable=False
2025-04-10 01:02:53,863 - INFO - [azure_client.py:264] - Dashboard analysis completed in 2.07s
2025-04-10 01:02:53,864 - INFO - [sql_generator.py:366] - Dashboard analysis completed: suitable=False
2025-04-10 01:02:53,865 - INFO - [sql_generator.py:442] - SQL generation completed in 6.06s
2025-04-10 01:02:53,865 - INFO - [sql_generator.py:125] - Query processing completed in 6.07s
2025-04-10 01:02:54,279 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:02:54] "GET /api/query/progress/a2bdb10c-8aea-4537-963c-694f0456fc70 HTTP/1.1" 200 -
2025-04-10 01:03:28,452 - INFO - [sql_generator.py:37] - Processing query: 'Get me count of orders by customers'
2025-04-10 01:03:28,453 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:03:28] "POST /api/query HTTP/1.1" 200 -
2025-04-10 01:03:28,453 - INFO - [intent_agent.py:27] - Intent detection started for query: 'Get me count of orders by customers'
2025-04-10 01:03:28,455 - INFO - [intent_agent.py:38] - Using default intent 'data_retrieval' without calling LLM
2025-04-10 01:03:28,456 - INFO - [intent_agent.py:41] - Intent detection completed in 0.00s
2025-04-10 01:03:28,457 - INFO - [sql_generator.py:45] - Detected intent: data_retrieval
2025-04-10 01:03:28,458 - INFO - [sql_generator.py:141] - Starting SQL generation process
2025-04-10 01:03:28,458 - INFO - [database.py:44] - Attempting database connection
2025-04-10 01:03:28,459 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-10 01:03:28,460 - INFO - [table_agent.py:28] - Table selection started for query: 'Get me count of orders by customers'
2025-04-10 01:03:28,460 - INFO - [table_agent.py:34] - Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-10 01:03:28,461 - INFO - [table_agent.py:64] - Sending request to AI model for table selection
2025-04-10 01:03:28,461 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-10 01:03:28,461 - DEBUG - [llm_engine.py:87] - [TABLE] Prompt: [{'role': 'system', 'content': "You are a table selection agent for a Text-to-SQL system.\nYour job is to identify which database tables are most relevant to a user query.\nYou will be provided with table names and their descriptions.\nReturn ONLY the names of relevant tables, separated by commas. Be selective and choose\nonly the tables that are directly needed to answer the query. If you're unsure,\ninclude tables that might be related. Return only table names in your response."}, {'role': 'us... (truncated)
2025-04-10 01:03:28,461 - DEBUG - [llm_engine.py:96] - [TABLE] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:03:29,239 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:03:29] "GET /api/query/progress/621cc0f8-74c4-445c-a157-94a69c27847e HTTP/1.1" 200 -
2025-04-10 01:03:29,477 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:03:29] "GET /api/query/progress/621cc0f8-74c4-445c-a157-94a69c27847e HTTP/1.1" 200 -
2025-04-10 01:03:29,894 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:03:29] "GET /api/query/progress/621cc0f8-74c4-445c-a157-94a69c27847e HTTP/1.1" 200 -
2025-04-10 01:03:30,313 - DEBUG - [llm_engine.py:107] - [TABLE] Model response received in 1.85s
2025-04-10 01:03:30,313 - DEBUG - [llm_engine.py:116] - [TABLE] Raw model response: 'orders, customers'
2025-04-10 01:03:30,314 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 1.85s
2025-04-10 01:03:30,314 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:03:30,315 - INFO - [table_agent.py:69] - Raw model response: 'orders, customers'
2025-04-10 01:03:30,316 - INFO - [table_agent.py:90] - Table selection completed in 1.86s. Selected: orders, customers
2025-04-10 01:03:30,316 - INFO - [column_agent.py:29] - Column pruning started for query: 'Get me count of orders by customers'
2025-04-10 01:03:30,317 - INFO - [column_agent.py:30] - Processing tables: orders, customers
2025-04-10 01:03:30,317 - INFO - [column_agent.py:94] - Sending request to AI model for column selection
2025-04-10 01:03:30,317 - INFO - [llm_engine.py:56] - [COLUMN] Completion generation started
2025-04-10 01:03:30,318 - DEBUG - [llm_engine.py:87] - [COLUMN] Prompt: [{'role': 'system', 'content': 'You are a column selection agent for a Text-to-SQL system.\nYour job is to identify which columns from the provided tables are most relevant to a user query.\nFor each table, select only the columns that will be needed to answer the query.\nReturn your answer as a JSON object with table names as keys and arrays of column names as values.\nAlways include primary key columns even if not directly mentioned in the query.\nConsider columns that might be needed for:\n1.... (truncated)
2025-04-10 01:03:30,318 - DEBUG - [llm_engine.py:96] - [COLUMN] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:03:30,654 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:03:30] "GET /api/query/progress/621cc0f8-74c4-445c-a157-94a69c27847e HTTP/1.1" 200 -
2025-04-10 01:03:30,895 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:03:30] "GET /api/query/progress/621cc0f8-74c4-445c-a157-94a69c27847e HTTP/1.1" 200 -
2025-04-10 01:03:31,310 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:03:31] "GET /api/query/progress/621cc0f8-74c4-445c-a157-94a69c27847e HTTP/1.1" 200 -
2025-04-10 01:03:31,753 - DEBUG - [llm_engine.py:107] - [COLUMN] Model response received in 1.43s
2025-04-10 01:03:31,753 - DEBUG - [llm_engine.py:116] - [COLUMN] Raw model response: '{
  "orders": ["order_id", "customer_id"],
  "customers": ["customer_id", "first_name", "last_name"]
}'
2025-04-10 01:03:31,754 - INFO - [llm_engine.py:119] - [COLUMN] Completion generation completed in 1.44s
2025-04-10 01:03:31,754 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:03:31,755 - INFO - [column_agent.py:139] - Parsing column selection from model response
2025-04-10 01:03:31,755 - INFO - [column_agent.py:149] - Parsed column selection JSON: {"orders": ["order_id", "customer_id"], "customers": ["customer_id", "first_name", "last_name"]}
2025-04-10 01:03:31,756 - INFO - [column_agent.py:111] - Table 'orders': Pruned 3 columns, kept 2/5
2025-04-10 01:03:31,756 - INFO - [column_agent.py:111] - Table 'customers': Pruned 8 columns, kept 3/11
2025-04-10 01:03:31,757 - INFO - [column_agent.py:197] - Building pruned schema
2025-04-10 01:03:31,757 - INFO - [column_agent.py:226] - Built pruned schema (439 chars)
2025-04-10 01:03:31,758 - INFO - [column_agent.py:120] - Column pruning completed in 1.44s
2025-04-10 01:03:31,758 - INFO - [sql_generator.py:237] - Found 1 join conditions for the relevant tables
2025-04-10 01:03:31,759 - INFO - [feedback_manager.py:265] - Stage 1: Vector search for 'Get me count of orders by customers...'
2025-04-10 01:03:31,782 - DEBUG - [feedback_manager.py:105] - Generated embedding in 0.02s with shape (384,)
2025-04-10 01:03:31,784 - ERROR - [vector_store.py:215] - Error searching similar vectors in collection query_embeddings: argument of type 'NoneType' is not iterable
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/vector_store.py", line 176, in search_similar
    if "id" not in output_fields and not any(f.lower() == 'id' for f in output_fields):
       ^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: argument of type 'NoneType' is not iterable
2025-04-10 01:03:31,784 - WARNING - [feedback_manager.py:288] - No candidates found from vector search, falling back to text-based search
2025-04-10 01:03:31,785 - INFO - [feedback_manager.py:402] - Found 0 similar queries using text-based search for 'Get me count of orders by customers...'
2025-04-10 01:03:31,786 - INFO - [azure_client.py:35] - SQL generation started for query: 'Get me count of orders by customers'
2025-04-10 01:03:31,786 - INFO - [azure_client.py:69] - Including schema information (439 chars)
2025-04-10 01:03:31,786 - INFO - [azure_client.py:76] - Including 1 join conditions
2025-04-10 01:03:31,787 - INFO - [azure_client.py:104] - Including 4 SQL examples (no similarity examples found)
2025-04-10 01:03:31,787 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER): Unique order identifier, customer_id (INTEGER): Reference to customer who placed the order\nPrimary Key(s): order_id\n\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER): Unique customer identifier, first_name (TEXT): Customer's first name, last_name (TEXT): Customer's last name\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Use the following pre-defined join conditions when joining these tables:\n- When joining customers with orders, use: INNER JOIN orders ON customers.customer_id = orders.customer_id\n'}, {'role': 'user', 'content': 'Here are some example queries and their SQL:\nQuestion: How many records are in the orders table?\nSQL: SELECT COUNT(*) AS record_count FROM orders\n\nQuestion: Get all columns from orders\nSQL: SELECT * FROM orders LIMIT 5\n\nQuestion: Get record from orders by order_id\nSQL: SELECT * FROM orders WHERE order_id = 1\n\nQuestion: Show some data from customers and orders\nSQL: SELECT customers.first_name, orders.customer_id\nFROM customers\nINNER JOIN orders ON customers.customer_id = orders.customer_id\nLIMIT 5\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: Get me count of orders by customers'}]
2025-04-10 01:03:31,790 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-10 01:03:31,792 - DEBUG - [llm_engine.py:87] - [SQL_GEN] Prompt: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief ... (truncated)
2025-04-10 01:03:31,793 - DEBUG - [llm_engine.py:96] - [SQL_GEN] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:03:32,084 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:03:32] "GET /api/query/progress/621cc0f8-74c4-445c-a157-94a69c27847e HTTP/1.1" 200 -
2025-04-10 01:03:32,354 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:03:32] "GET /api/query/progress/621cc0f8-74c4-445c-a157-94a69c27847e HTTP/1.1" 200 -
2025-04-10 01:03:32,745 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:03:32] "GET /api/query/progress/621cc0f8-74c4-445c-a157-94a69c27847e HTTP/1.1" 200 -
2025-04-10 01:03:33,528 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:03:33] "GET /api/query/progress/621cc0f8-74c4-445c-a157-94a69c27847e HTTP/1.1" 200 -
2025-04-10 01:03:33,770 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:03:33] "GET /api/query/progress/621cc0f8-74c4-445c-a157-94a69c27847e HTTP/1.1" 200 -
2025-04-10 01:03:33,780 - DEBUG - [llm_engine.py:107] - [SQL_GEN] Model response received in 1.99s
2025-04-10 01:03:33,780 - DEBUG - [llm_engine.py:116] - [SQL_GEN] Raw model response: 'Here's a query that will return the number of orders placed by each customer, along with their first and last names.

```sql
SELECT 
    customers.customer_id,
    customers.first_name,
    customers.last_name,
    COUNT(orders.order_id) AS order_count
FROM customers
INNER JOIN orders ON customers.customer_id = orders.customer_id
GROUP BY customers.customer_id, customers.first_name, customers.last_name
```
'
2025-04-10 01:03:33,781 - INFO - [llm_engine.py:119] - [SQL_GEN] Completion generation completed in 1.99s
2025-04-10 01:03:33,783 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:03:33,784 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-10 01:03:33,786 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-10 01:03:33,788 - INFO - [azure_client.py:171] - Extracted SQL query (280 chars) and explanation (116 chars)
2025-04-10 01:03:33,788 - INFO - [azure_client.py:124] - Generated SQL: SELECT 
    customers.customer_id,
    customers.first_name,
    customers.last_name,
    COUNT(orders.order_id) AS order_count
FROM customers
INNER JOIN orders ON customers.customer_id = orders.customer_id
GROUP BY customers.customer_id, customers.first_name, customers.last_name
2025-04-10 01:03:33,790 - INFO - [azure_client.py:132] - SQL generation completed in 2.00s
2025-04-10 01:03:33,792 - INFO - [database.py:65] - Executing SQL query: SELECT 
    customers.customer_id,
    customers.first_name,
    customers.last_name,
    COUNT(orders.order_id) AS order_count
FROM customers
INNER JOIN orders ON customers.customer_id = orders.customer_id
GROUP BY customers.customer_id, customers.first_name, customers.last_name
2025-04-10 01:03:33,795 - DEBUG - [database.py:76] - Query execution started
2025-04-10 01:03:33,797 - DEBUG - [database.py:81] - Query execution completed in 0.00s
2025-04-10 01:03:33,810 - INFO - [database.py:86] - Query returned 5 rows with 4 columns
2025-04-10 01:03:33,815 - DEBUG - [database.py:92] - Sample data (first 3 rows):
   customer_id first_name last_name  order_count
0            1       John       Doe            2
1            2       Jane     Smith            2
2            3      Alice   Johnson            2
2025-04-10 01:03:33,815 - INFO - [database.py:95] - Query processing completed in 0.02s
2025-04-10 01:03:33,818 - INFO - [sql_generator.py:348] - Analyzing query results for dashboard potential
2025-04-10 01:03:33,820 - INFO - [azure_client.py:197] - Dashboard analysis started for query: 'Get me count of orders by customers'
2025-04-10 01:03:33,822 - INFO - [llm_engine.py:56] - [DASHBOARD_ANALYSIS] Completion generation started
2025-04-10 01:03:33,823 - DEBUG - [llm_engine.py:87] - [DASHBOARD_ANALYSIS] Prompt: [{'role': 'system', 'content': 'You are a data visualization expert. Analyze the given query results and determine if they\'re suitable for a dashboard visualization.\n\nYour task is to:\n1. Analyze the columns and data\n2. Determine if the data is suitable for visualization (has numeric values and categorical data)\n3. If suitable, recommend the best chart type (bar, line, pie, etc.)\n4. Identify the best columns for X and Y axes (or equivalent based on chart type)\n5. Suggest meaningful labels... (truncated)
2025-04-10 01:03:33,824 - DEBUG - [llm_engine.py:96] - [DASHBOARD_ANALYSIS] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:03:34,161 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:03:34] "GET /api/query/progress/621cc0f8-74c4-445c-a157-94a69c27847e HTTP/1.1" 200 -
2025-04-10 01:03:34,934 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:03:34] "GET /api/query/progress/621cc0f8-74c4-445c-a157-94a69c27847e HTTP/1.1" 200 -
2025-04-10 01:03:35,184 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:03:35] "GET /api/query/progress/621cc0f8-74c4-445c-a157-94a69c27847e HTTP/1.1" 200 -
2025-04-10 01:03:35,577 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:03:35] "GET /api/query/progress/621cc0f8-74c4-445c-a157-94a69c27847e HTTP/1.1" 200 -
2025-04-10 01:03:36,006 - DEBUG - [llm_engine.py:107] - [DASHBOARD_ANALYSIS] Model response received in 2.18s
2025-04-10 01:03:36,006 - DEBUG - [llm_engine.py:116] - [DASHBOARD_ANALYSIS] Raw model response: '{
  "is_suitable": true,
  "reason": "The data contains categorical customer information and a numeric order count, suitable for comparing order counts across customers.",
  "chart_type": "bar",
  "x_axis": {
    "column": "first_name",
    "label": "Customer First Name"
  },
  "y_axis": {
    "column": "order_count",
    "label": "Number of Orders"
  },
  "title": "Number of Orders per Customer"
}'
2025-04-10 01:03:36,006 - INFO - [llm_engine.py:119] - [DASHBOARD_ANALYSIS] Completion generation completed in 2.18s
2025-04-10 01:03:36,007 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:03:36,008 - INFO - [azure_client.py:255] - Dashboard analysis results: suitable=True
2025-04-10 01:03:36,008 - INFO - [azure_client.py:264] - Dashboard analysis completed in 2.19s
2025-04-10 01:03:36,009 - INFO - [sql_generator.py:366] - Dashboard analysis completed: suitable=True
2025-04-10 01:03:36,010 - INFO - [sql_generator.py:442] - SQL generation completed in 7.55s
2025-04-10 01:03:36,010 - INFO - [sql_generator.py:125] - Query processing completed in 7.56s
2025-04-10 01:03:36,342 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:03:36] "GET /api/query/progress/621cc0f8-74c4-445c-a157-94a69c27847e HTTP/1.1" 200 -
2025-04-10 01:08:53,946 - DEBUG - [app.py:84] - Main page requested
2025-04-10 01:08:53,949 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:08:53] "GET / HTTP/1.1" 200 -
2025-04-10 01:08:54,188 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:08:54] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-10 01:08:54,288 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:08:54] "GET /static/js/ui-utils.js HTTP/1.1" 200 -
2025-04-10 01:08:54,292 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:08:54] "GET /static/js/table-mentions.js HTTP/1.1" 200 -
2025-04-10 01:08:54,297 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:08:54] "GET /static/js/core.js HTTP/1.1" 200 -
2025-04-10 01:08:54,299 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:08:54] "GET /static/js/schema-manager.js HTTP/1.1" 200 -
2025-04-10 01:08:54,303 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:08:54] "GET /static/js/results-display.js HTTP/1.1" 200 -
2025-04-10 01:08:54,499 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:08:54] "GET /static/js/feedback.js HTTP/1.1" 200 -
2025-04-10 01:08:54,595 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:08:54] "GET /static/js/dashboard.js HTTP/1.1" 200 -
2025-04-10 01:08:54,599 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:08:54] "GET /static/js/query-handler.js HTTP/1.1" 200 -
2025-04-10 01:08:54,934 - DEBUG - [app.py:152] - Table suggestions requested for workspace: dfd, query: ''
2025-04-10 01:08:54,936 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:08:54] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-10 01:08:54,946 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:08:54] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-04-10 01:08:58,318 - INFO - [sql_generator.py:37] - Processing query: 'Get me count of orders by customers'
2025-04-10 01:08:58,319 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:08:58] "POST /api/query HTTP/1.1" 200 -
2025-04-10 01:08:58,320 - INFO - [intent_agent.py:27] - Intent detection started for query: 'Get me count of orders by customers'
2025-04-10 01:08:58,322 - INFO - [intent_agent.py:38] - Using default intent 'data_retrieval' without calling LLM
2025-04-10 01:08:58,323 - INFO - [intent_agent.py:41] - Intent detection completed in 0.00s
2025-04-10 01:08:58,323 - INFO - [sql_generator.py:45] - Detected intent: data_retrieval
2025-04-10 01:08:58,324 - INFO - [sql_generator.py:141] - Starting SQL generation process
2025-04-10 01:08:58,325 - INFO - [database.py:44] - Attempting database connection
2025-04-10 01:08:58,326 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-10 01:08:58,327 - INFO - [table_agent.py:28] - Table selection started for query: 'Get me count of orders by customers'
2025-04-10 01:08:58,328 - INFO - [table_agent.py:34] - Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-10 01:08:58,329 - INFO - [table_agent.py:64] - Sending request to AI model for table selection
2025-04-10 01:08:58,330 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-10 01:08:58,330 - DEBUG - [llm_engine.py:87] - [TABLE] Prompt: [{'role': 'system', 'content': "You are a table selection agent for a Text-to-SQL system.\nYour job is to identify which database tables are most relevant to a user query.\nYou will be provided with table names and their descriptions.\nReturn ONLY the names of relevant tables, separated by commas. Be selective and choose\nonly the tables that are directly needed to answer the query. If you're unsure,\ninclude tables that might be related. Return only table names in your response."}, {'role': 'us... (truncated)
2025-04-10 01:08:58,331 - DEBUG - [llm_engine.py:96] - [TABLE] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:08:59,107 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:08:59] "GET /api/query/progress/a96b38b0-813c-4221-a507-8991689d6dfc HTTP/1.1" 200 -
2025-04-10 01:08:59,361 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:08:59] "GET /api/query/progress/a96b38b0-813c-4221-a507-8991689d6dfc HTTP/1.1" 200 -
2025-04-10 01:08:59,759 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:08:59] "GET /api/query/progress/a96b38b0-813c-4221-a507-8991689d6dfc HTTP/1.1" 200 -
2025-04-10 01:09:00,361 - DEBUG - [llm_engine.py:107] - [TABLE] Model response received in 2.03s
2025-04-10 01:09:00,362 - DEBUG - [llm_engine.py:116] - [TABLE] Raw model response: 'orders'
2025-04-10 01:09:00,363 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 2.03s
2025-04-10 01:09:00,364 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:09:00,365 - INFO - [table_agent.py:69] - Raw model response: 'orders'
2025-04-10 01:09:00,366 - INFO - [table_agent.py:90] - Table selection completed in 2.04s. Selected: orders
2025-04-10 01:09:00,367 - INFO - [column_agent.py:29] - Column pruning started for query: 'Get me count of orders by customers'
2025-04-10 01:09:00,367 - INFO - [column_agent.py:30] - Processing tables: orders
2025-04-10 01:09:00,368 - INFO - [column_agent.py:38] - Only one table involved (orders). Skipping LLM call and including all columns.
2025-04-10 01:09:00,369 - INFO - [feedback_manager.py:265] - Stage 1: Vector search for 'Get me count of orders by customers...'
2025-04-10 01:09:00,403 - DEBUG - [feedback_manager.py:105] - Generated embedding in 0.03s with shape (384,)
2025-04-10 01:09:00,405 - ERROR - [vector_store.py:215] - Error searching similar vectors in collection query_embeddings: argument of type 'NoneType' is not iterable
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/vector_store.py", line 176, in search_similar
    if "id" not in output_fields and not any(f.lower() == 'id' for f in output_fields):
       ^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: argument of type 'NoneType' is not iterable
2025-04-10 01:09:00,406 - WARNING - [feedback_manager.py:288] - No candidates found from vector search, falling back to text-based search
2025-04-10 01:09:00,407 - INFO - [feedback_manager.py:402] - Found 0 similar queries using text-based search for 'Get me count of orders by customers...'
2025-04-10 01:09:00,407 - INFO - [azure_client.py:35] - SQL generation started for query: 'Get me count of orders by customers'
2025-04-10 01:09:00,408 - INFO - [azure_client.py:69] - Including schema information (363 chars)
2025-04-10 01:09:00,408 - INFO - [azure_client.py:104] - Including 3 SQL examples (no similarity examples found)
2025-04-10 01:09:00,409 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER) - Unique order identifier, customer_id (INTEGER) - Reference to customer who placed the order, order_date (TEXT) - Date when order was placed, status (TEXT) - Order status (pending, shipped, completed, etc.), total_amount (REAL) - Total order amount\nPrimary Key(s): order_id\n"}, {'role': 'user', 'content': 'Here are some example queries and their SQL:\nQuestion: How many records are in the orders table?\nSQL: SELECT COUNT(*) AS record_count FROM orders\n\nQuestion: Get all columns from orders\nSQL: SELECT * FROM orders LIMIT 5\n\nQuestion: Get record from orders by order_id\nSQL: SELECT * FROM orders WHERE order_id = 1\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: Get me count of orders by customers'}]
2025-04-10 01:09:00,409 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-10 01:09:00,410 - DEBUG - [llm_engine.py:87] - [SQL_GEN] Prompt: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief ... (truncated)
2025-04-10 01:09:00,410 - DEBUG - [llm_engine.py:96] - [SQL_GEN] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:09:00,531 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:09:00] "GET /api/query/progress/a96b38b0-813c-4221-a507-8991689d6dfc HTTP/1.1" 200 -
2025-04-10 01:09:00,772 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:09:00] "GET /api/query/progress/a96b38b0-813c-4221-a507-8991689d6dfc HTTP/1.1" 200 -
2025-04-10 01:09:01,195 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:09:01] "GET /api/query/progress/a96b38b0-813c-4221-a507-8991689d6dfc HTTP/1.1" 200 -
2025-04-10 01:09:01,861 - DEBUG - [llm_engine.py:107] - [SQL_GEN] Model response received in 1.45s
2025-04-10 01:09:01,862 - DEBUG - [llm_engine.py:116] - [SQL_GEN] Raw model response: 'Here's a query that will return the count of orders grouped by each customer:

```sql
SELECT 
    customer_id, 
    COUNT(*) AS order_count
FROM 
    orders
GROUP BY 
    customer_id
```'
2025-04-10 01:09:01,863 - INFO - [llm_engine.py:119] - [SQL_GEN] Completion generation completed in 1.45s
2025-04-10 01:09:01,865 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:09:01,866 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-10 01:09:01,867 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-10 01:09:01,867 - INFO - [azure_client.py:171] - Extracted SQL query (96 chars) and explanation (77 chars)
2025-04-10 01:09:01,869 - INFO - [azure_client.py:124] - Generated SQL: SELECT 
    customer_id, 
    COUNT(*) AS order_count
FROM 
    orders
GROUP BY 
    customer_id
2025-04-10 01:09:01,871 - INFO - [azure_client.py:132] - SQL generation completed in 1.46s
2025-04-10 01:09:01,872 - INFO - [database.py:65] - Executing SQL query: SELECT 
    customer_id, 
    COUNT(*) AS order_count
FROM 
    orders
GROUP BY 
    customer_id
2025-04-10 01:09:01,875 - DEBUG - [database.py:76] - Query execution started
2025-04-10 01:09:01,876 - DEBUG - [database.py:81] - Query execution completed in 0.00s
2025-04-10 01:09:01,877 - INFO - [database.py:86] - Query returned 5 rows with 2 columns
2025-04-10 01:09:01,880 - DEBUG - [database.py:92] - Sample data (first 3 rows):
   customer_id  order_count
0            1            2
1            2            2
2            3            2
2025-04-10 01:09:01,880 - INFO - [database.py:95] - Query processing completed in 0.01s
2025-04-10 01:09:01,881 - INFO - [sql_generator.py:348] - Analyzing query results for dashboard potential
2025-04-10 01:09:01,881 - INFO - [azure_client.py:197] - Dashboard analysis started for query: 'Get me count of orders by customers'
2025-04-10 01:09:01,882 - INFO - [llm_engine.py:56] - [DASHBOARD_ANALYSIS] Completion generation started
2025-04-10 01:09:01,882 - DEBUG - [llm_engine.py:87] - [DASHBOARD_ANALYSIS] Prompt: [{'role': 'system', 'content': 'You are a data visualization expert. Analyze the given query results and determine if they\'re suitable for a dashboard visualization.\n\nYour task is to:\n1. Analyze the columns and data\n2. Determine if the data is suitable for visualization (has numeric values and categorical data)\n3. If suitable, recommend the best chart type (bar, line, pie, etc.)\n4. Identify the best columns for X and Y axes (or equivalent based on chart type)\n5. Suggest meaningful labels... (truncated)
2025-04-10 01:09:01,883 - DEBUG - [llm_engine.py:96] - [DASHBOARD_ANALYSIS] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:09:01,980 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:09:01] "GET /api/query/progress/a96b38b0-813c-4221-a507-8991689d6dfc HTTP/1.1" 200 -
2025-04-10 01:09:02,234 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:09:02] "GET /api/query/progress/a96b38b0-813c-4221-a507-8991689d6dfc HTTP/1.1" 200 -
2025-04-10 01:09:02,628 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:09:02] "GET /api/query/progress/a96b38b0-813c-4221-a507-8991689d6dfc HTTP/1.1" 200 -
2025-04-10 01:09:03,408 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:09:03] "GET /api/query/progress/a96b38b0-813c-4221-a507-8991689d6dfc HTTP/1.1" 200 -
2025-04-10 01:09:03,654 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:09:03] "GET /api/query/progress/a96b38b0-813c-4221-a507-8991689d6dfc HTTP/1.1" 200 -
2025-04-10 01:09:03,865 - DEBUG - [llm_engine.py:107] - [DASHBOARD_ANALYSIS] Model response received in 1.98s
2025-04-10 01:09:03,865 - DEBUG - [llm_engine.py:116] - [DASHBOARD_ANALYSIS] Raw model response: '{
  "is_suitable": true,
  "reason": "The data contains categorical values (customer_id) and a numeric metric (order_count), suitable for comparing order counts across customers.",
  "chart_type": "bar",
  "x_axis": {
    "column": "customer_id",
    "label": "Customer ID"
  },
  "y_axis": {
    "column": "order_count",
    "label": "Number of Orders"
  },
  "title": "Number of Orders per Customer"
}'
2025-04-10 01:09:03,865 - INFO - [llm_engine.py:119] - [DASHBOARD_ANALYSIS] Completion generation completed in 1.98s
2025-04-10 01:09:03,866 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:09:03,868 - INFO - [azure_client.py:255] - Dashboard analysis results: suitable=True
2025-04-10 01:09:03,870 - INFO - [azure_client.py:264] - Dashboard analysis completed in 1.99s
2025-04-10 01:09:03,872 - INFO - [sql_generator.py:366] - Dashboard analysis completed: suitable=True
2025-04-10 01:09:03,872 - INFO - [sql_generator.py:442] - SQL generation completed in 5.55s
2025-04-10 01:09:03,874 - INFO - [sql_generator.py:125] - Query processing completed in 5.56s
2025-04-10 01:09:04,050 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:09:04] "GET /api/query/progress/a96b38b0-813c-4221-a507-8991689d6dfc HTTP/1.1" 200 -
2025-04-10 01:09:36,467 - DEBUG - [app.py:84] - Main page requested
2025-04-10 01:09:36,470 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:09:36] "GET / HTTP/1.1" 200 -
2025-04-10 01:09:36,705 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:09:36] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-10 01:09:36,795 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:09:36] "GET /static/js/ui-utils.js HTTP/1.1" 200 -
2025-04-10 01:09:36,800 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:09:36] "GET /static/js/core.js HTTP/1.1" 200 -
2025-04-10 01:09:36,804 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:09:36] "GET /static/js/table-mentions.js HTTP/1.1" 200 -
2025-04-10 01:09:36,807 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:09:36] "GET /static/js/schema-manager.js HTTP/1.1" 200 -
2025-04-10 01:09:36,810 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:09:36] "GET /static/js/results-display.js HTTP/1.1" 200 -
2025-04-10 01:09:37,008 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:09:37] "GET /static/js/feedback.js HTTP/1.1" 200 -
2025-04-10 01:09:37,095 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:09:37] "GET /static/js/dashboard.js HTTP/1.1" 200 -
2025-04-10 01:09:37,099 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:09:37] "GET /static/js/query-handler.js HTTP/1.1" 200 -
2025-04-10 01:09:37,412 - DEBUG - [app.py:152] - Table suggestions requested for workspace: dfd, query: ''
2025-04-10 01:09:37,413 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:09:37] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-10 01:09:37,429 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:09:37] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-04-10 01:09:39,015 - INFO - [sql_generator.py:37] - Processing query: 'Get me count of orders by customers'
2025-04-10 01:09:39,016 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:09:39] "POST /api/query HTTP/1.1" 200 -
2025-04-10 01:09:39,017 - INFO - [intent_agent.py:27] - Intent detection started for query: 'Get me count of orders by customers'
2025-04-10 01:09:39,018 - INFO - [intent_agent.py:38] - Using default intent 'data_retrieval' without calling LLM
2025-04-10 01:09:39,019 - INFO - [intent_agent.py:41] - Intent detection completed in 0.00s
2025-04-10 01:09:39,019 - INFO - [sql_generator.py:45] - Detected intent: data_retrieval
2025-04-10 01:09:39,020 - INFO - [sql_generator.py:141] - Starting SQL generation process
2025-04-10 01:09:39,021 - INFO - [database.py:44] - Attempting database connection
2025-04-10 01:09:39,022 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-10 01:09:39,023 - INFO - [table_agent.py:28] - Table selection started for query: 'Get me count of orders by customers'
2025-04-10 01:09:39,023 - INFO - [table_agent.py:34] - Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-10 01:09:39,024 - INFO - [table_agent.py:64] - Sending request to AI model for table selection
2025-04-10 01:09:39,025 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-10 01:09:39,025 - DEBUG - [llm_engine.py:87] - [TABLE] Prompt: [{'role': 'system', 'content': "You are a table selection agent for a Text-to-SQL system.\nYour job is to identify which database tables are most relevant to a user query.\nYou will be provided with table names and their descriptions.\nReturn ONLY the names of relevant tables, separated by commas. Be selective and choose\nonly the tables that are directly needed to answer the query. If you're unsure,\ninclude tables that might be related. Return only table names in your response."}, {'role': 'us... (truncated)
2025-04-10 01:09:39,026 - DEBUG - [llm_engine.py:96] - [TABLE] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:09:39,805 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:09:39] "GET /api/query/progress/c7d632df-b60e-4f41-9fe7-d8385ab6698b HTTP/1.1" 200 -
2025-04-10 01:09:40,055 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:09:40] "GET /api/query/progress/c7d632df-b60e-4f41-9fe7-d8385ab6698b HTTP/1.1" 200 -
2025-04-10 01:09:40,446 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:09:40] "GET /api/query/progress/c7d632df-b60e-4f41-9fe7-d8385ab6698b HTTP/1.1" 200 -
2025-04-10 01:09:40,897 - DEBUG - [llm_engine.py:107] - [TABLE] Model response received in 1.87s
2025-04-10 01:09:40,897 - DEBUG - [llm_engine.py:116] - [TABLE] Raw model response: 'orders'
2025-04-10 01:09:40,898 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 1.87s
2025-04-10 01:09:40,899 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:09:40,899 - INFO - [table_agent.py:69] - Raw model response: 'orders'
2025-04-10 01:09:40,900 - INFO - [table_agent.py:90] - Table selection completed in 1.88s. Selected: orders
2025-04-10 01:09:40,901 - INFO - [column_agent.py:29] - Column pruning started for query: 'Get me count of orders by customers'
2025-04-10 01:09:40,902 - INFO - [column_agent.py:30] - Processing tables: orders
2025-04-10 01:09:40,902 - INFO - [column_agent.py:38] - Only one table involved (orders). Skipping LLM call and including all columns.
2025-04-10 01:09:40,903 - INFO - [feedback_manager.py:265] - Stage 1: Vector search for 'Get me count of orders by customers...'
2025-04-10 01:09:40,930 - DEBUG - [feedback_manager.py:105] - Generated embedding in 0.03s with shape (384,)
2025-04-10 01:09:40,931 - ERROR - [vector_store.py:215] - Error searching similar vectors in collection query_embeddings: argument of type 'NoneType' is not iterable
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/vector_store.py", line 176, in search_similar
    if "id" not in output_fields and not any(f.lower() == 'id' for f in output_fields):
       ^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: argument of type 'NoneType' is not iterable
2025-04-10 01:09:40,932 - WARNING - [feedback_manager.py:288] - No candidates found from vector search, falling back to text-based search
2025-04-10 01:09:40,933 - INFO - [feedback_manager.py:402] - Found 0 similar queries using text-based search for 'Get me count of orders by customers...'
2025-04-10 01:09:40,933 - INFO - [azure_client.py:35] - SQL generation started for query: 'Get me count of orders by customers'
2025-04-10 01:09:40,933 - INFO - [azure_client.py:69] - Including schema information (363 chars)
2025-04-10 01:09:40,934 - INFO - [azure_client.py:104] - Including 3 SQL examples (no similarity examples found)
2025-04-10 01:09:40,935 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER) - Unique order identifier, customer_id (INTEGER) - Reference to customer who placed the order, order_date (TEXT) - Date when order was placed, status (TEXT) - Order status (pending, shipped, completed, etc.), total_amount (REAL) - Total order amount\nPrimary Key(s): order_id\n"}, {'role': 'user', 'content': 'Here are some example queries and their SQL:\nQuestion: How many records are in the orders table?\nSQL: SELECT COUNT(*) AS record_count FROM orders\n\nQuestion: Get all columns from orders\nSQL: SELECT * FROM orders LIMIT 5\n\nQuestion: Get record from orders by order_id\nSQL: SELECT * FROM orders WHERE order_id = 1\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: Get me count of orders by customers'}]
2025-04-10 01:09:40,935 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-10 01:09:40,936 - DEBUG - [llm_engine.py:87] - [SQL_GEN] Prompt: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief ... (truncated)
2025-04-10 01:09:40,936 - DEBUG - [llm_engine.py:96] - [SQL_GEN] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:09:41,218 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:09:41] "GET /api/query/progress/c7d632df-b60e-4f41-9fe7-d8385ab6698b HTTP/1.1" 200 -
2025-04-10 01:09:41,461 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:09:41] "GET /api/query/progress/c7d632df-b60e-4f41-9fe7-d8385ab6698b HTTP/1.1" 200 -
2025-04-10 01:09:41,877 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:09:41] "GET /api/query/progress/c7d632df-b60e-4f41-9fe7-d8385ab6698b HTTP/1.1" 200 -
2025-04-10 01:09:42,639 - DEBUG - [llm_engine.py:107] - [SQL_GEN] Model response received in 1.70s
2025-04-10 01:09:42,639 - DEBUG - [llm_engine.py:116] - [SQL_GEN] Raw model response: 'Here's a query that will retrieve the count of orders placed by each customer from the `orders` table, grouping the results by `customer_id`.

```sql
SELECT 
    customer_id, 
    COUNT(*) AS order_count
FROM 
    orders
GROUP BY 
    customer_id
```'
2025-04-10 01:09:42,640 - INFO - [llm_engine.py:119] - [SQL_GEN] Completion generation completed in 1.70s
2025-04-10 01:09:42,640 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:09:42,641 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-10 01:09:42,641 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-10 01:09:42,642 - INFO - [azure_client.py:171] - Extracted SQL query (96 chars) and explanation (141 chars)
2025-04-10 01:09:42,643 - INFO - [azure_client.py:124] - Generated SQL: SELECT 
    customer_id, 
    COUNT(*) AS order_count
FROM 
    orders
GROUP BY 
    customer_id
2025-04-10 01:09:42,644 - INFO - [azure_client.py:132] - SQL generation completed in 1.71s
2025-04-10 01:09:42,645 - INFO - [database.py:65] - Executing SQL query: SELECT 
    customer_id, 
    COUNT(*) AS order_count
FROM 
    orders
GROUP BY 
    customer_id
2025-04-10 01:09:42,646 - DEBUG - [database.py:76] - Query execution started
2025-04-10 01:09:42,647 - DEBUG - [database.py:81] - Query execution completed in 0.00s
2025-04-10 01:09:42,648 - INFO - [database.py:86] - Query returned 5 rows with 2 columns
2025-04-10 01:09:42,649 - DEBUG - [database.py:92] - Sample data (first 3 rows):
   customer_id  order_count
0            1            2
1            2            2
2            3            2
2025-04-10 01:09:42,650 - INFO - [database.py:95] - Query processing completed in 0.01s
2025-04-10 01:09:42,652 - INFO - [sql_generator.py:348] - Analyzing query results for dashboard potential
2025-04-10 01:09:42,652 - INFO - [azure_client.py:197] - Dashboard analysis started for query: 'Get me count of orders by customers'
2025-04-10 01:09:42,653 - INFO - [llm_engine.py:56] - [DASHBOARD_ANALYSIS] Completion generation started
2025-04-10 01:09:42,654 - DEBUG - [llm_engine.py:87] - [DASHBOARD_ANALYSIS] Prompt: [{'role': 'system', 'content': 'You are a data visualization expert. Analyze the given query results and determine if they\'re suitable for a dashboard visualization.\n\nYour task is to:\n1. Analyze the columns and data\n2. Determine if the data is suitable for visualization (has numeric values and categorical data)\n3. If suitable, recommend the best chart type (bar, line, pie, etc.)\n4. Identify the best columns for X and Y axes (or equivalent based on chart type)\n5. Suggest meaningful labels... (truncated)
2025-04-10 01:09:42,654 - DEBUG - [llm_engine.py:96] - [DASHBOARD_ANALYSIS] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:09:43,184 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:09:43] "GET /api/query/progress/c7d632df-b60e-4f41-9fe7-d8385ab6698b HTTP/1.1" 200 -
2025-04-10 01:09:43,832 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:09:43] "GET /api/query/progress/c7d632df-b60e-4f41-9fe7-d8385ab6698b HTTP/1.1" 200 -
2025-04-10 01:09:44,294 - DEBUG - [llm_engine.py:107] - [DASHBOARD_ANALYSIS] Model response received in 1.64s
2025-04-10 01:09:44,294 - DEBUG - [llm_engine.py:116] - [DASHBOARD_ANALYSIS] Raw model response: '{
  "is_suitable": true,
  "reason": "The data contains a categorical variable (customer_id) and a numeric variable (order_count), making it suitable for visualizing the number of orders per customer.",
  "chart_type": "bar",
  "x_axis": {
    "column": "customer_id",
    "label": "Customer ID"
  },
  "y_axis": {
    "column": "order_count",
    "label": "Number of Orders"
  },
  "title": "Number of Orders by Customer"
}'
2025-04-10 01:09:44,295 - INFO - [llm_engine.py:119] - [DASHBOARD_ANALYSIS] Completion generation completed in 1.64s
2025-04-10 01:09:44,295 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:09:44,297 - INFO - [azure_client.py:255] - Dashboard analysis results: suitable=True
2025-04-10 01:09:44,297 - INFO - [azure_client.py:264] - Dashboard analysis completed in 1.65s
2025-04-10 01:09:44,298 - INFO - [sql_generator.py:366] - Dashboard analysis completed: suitable=True
2025-04-10 01:09:44,299 - INFO - [sql_generator.py:442] - SQL generation completed in 5.28s
2025-04-10 01:09:44,299 - INFO - [sql_generator.py:125] - Query processing completed in 5.28s
2025-04-10 01:09:45,072 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:09:45] "GET /api/query/progress/c7d632df-b60e-4f41-9fe7-d8385ab6698b HTTP/1.1" 200 -
2025-04-10 01:10:14,952 - INFO - [sql_generator.py:37] - Processing query: 'Get me count of orders by customers along with their name'
2025-04-10 01:10:14,953 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:10:14] "POST /api/query HTTP/1.1" 200 -
2025-04-10 01:10:14,953 - INFO - [intent_agent.py:27] - Intent detection started for query: 'Get me count of orders by customers along with their name'
2025-04-10 01:10:14,955 - INFO - [intent_agent.py:38] - Using default intent 'data_retrieval' without calling LLM
2025-04-10 01:10:14,956 - INFO - [intent_agent.py:41] - Intent detection completed in 0.00s
2025-04-10 01:10:14,957 - INFO - [sql_generator.py:45] - Detected intent: data_retrieval
2025-04-10 01:10:14,957 - INFO - [sql_generator.py:141] - Starting SQL generation process
2025-04-10 01:10:14,958 - INFO - [database.py:44] - Attempting database connection
2025-04-10 01:10:14,959 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-10 01:10:14,960 - INFO - [table_agent.py:28] - Table selection started for query: 'Get me count of orders by customers along with their name'
2025-04-10 01:10:14,961 - INFO - [table_agent.py:34] - Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-10 01:10:14,962 - INFO - [table_agent.py:64] - Sending request to AI model for table selection
2025-04-10 01:10:14,962 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-10 01:10:14,963 - DEBUG - [llm_engine.py:87] - [TABLE] Prompt: [{'role': 'system', 'content': "You are a table selection agent for a Text-to-SQL system.\nYour job is to identify which database tables are most relevant to a user query.\nYou will be provided with table names and their descriptions.\nReturn ONLY the names of relevant tables, separated by commas. Be selective and choose\nonly the tables that are directly needed to answer the query. If you're unsure,\ninclude tables that might be related. Return only table names in your response."}, {'role': 'us... (truncated)
2025-04-10 01:10:14,964 - DEBUG - [llm_engine.py:96] - [TABLE] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:10:15,738 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:10:15] "GET /api/query/progress/baec17a1-a98d-492d-8542-cdd664243ce3 HTTP/1.1" 200 -
2025-04-10 01:10:15,969 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:10:15] "GET /api/query/progress/baec17a1-a98d-492d-8542-cdd664243ce3 HTTP/1.1" 200 -
2025-04-10 01:10:16,394 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:10:16] "GET /api/query/progress/baec17a1-a98d-492d-8542-cdd664243ce3 HTTP/1.1" 200 -
2025-04-10 01:10:16,809 - DEBUG - [llm_engine.py:107] - [TABLE] Model response received in 1.84s
2025-04-10 01:10:16,809 - DEBUG - [llm_engine.py:116] - [TABLE] Raw model response: 'customers, orders'
2025-04-10 01:10:16,809 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 1.85s
2025-04-10 01:10:16,810 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:10:16,810 - INFO - [table_agent.py:69] - Raw model response: 'customers, orders'
2025-04-10 01:10:16,811 - INFO - [table_agent.py:90] - Table selection completed in 1.85s. Selected: customers, orders
2025-04-10 01:10:16,811 - INFO - [column_agent.py:29] - Column pruning started for query: 'Get me count of orders by customers along with their name'
2025-04-10 01:10:16,812 - INFO - [column_agent.py:30] - Processing tables: customers, orders
2025-04-10 01:10:16,813 - INFO - [column_agent.py:94] - Sending request to AI model for column selection
2025-04-10 01:10:16,813 - INFO - [llm_engine.py:56] - [COLUMN] Completion generation started
2025-04-10 01:10:16,814 - DEBUG - [llm_engine.py:87] - [COLUMN] Prompt: [{'role': 'system', 'content': 'You are a column selection agent for a Text-to-SQL system.\nYour job is to identify which columns from the provided tables are most relevant to a user query.\nFor each table, select only the columns that will be needed to answer the query.\nReturn your answer as a JSON object with table names as keys and arrays of column names as values.\nAlways include primary key columns even if not directly mentioned in the query.\nConsider columns that might be needed for:\n1.... (truncated)
2025-04-10 01:10:16,815 - DEBUG - [llm_engine.py:96] - [COLUMN] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:10:17,163 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:10:17] "GET /api/query/progress/baec17a1-a98d-492d-8542-cdd664243ce3 HTTP/1.1" 200 -
2025-04-10 01:10:17,405 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:10:17] "GET /api/query/progress/baec17a1-a98d-492d-8542-cdd664243ce3 HTTP/1.1" 200 -
2025-04-10 01:10:17,824 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:10:17] "GET /api/query/progress/baec17a1-a98d-492d-8542-cdd664243ce3 HTTP/1.1" 200 -
2025-04-10 01:10:18,258 - DEBUG - [llm_engine.py:107] - [COLUMN] Model response received in 1.44s
2025-04-10 01:10:18,259 - DEBUG - [llm_engine.py:116] - [COLUMN] Raw model response: '{
  "customers": ["customer_id", "first_name", "last_name"],
  "orders": ["order_id", "customer_id"]
}'
2025-04-10 01:10:18,261 - INFO - [llm_engine.py:119] - [COLUMN] Completion generation completed in 1.45s
2025-04-10 01:10:18,264 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:10:18,265 - INFO - [column_agent.py:139] - Parsing column selection from model response
2025-04-10 01:10:18,267 - INFO - [column_agent.py:149] - Parsed column selection JSON: {"customers": ["customer_id", "first_name", "last_name"], "orders": ["order_id", "customer_id"]}
2025-04-10 01:10:18,268 - INFO - [column_agent.py:111] - Table 'customers': Pruned 8 columns, kept 3/11
2025-04-10 01:10:18,270 - INFO - [column_agent.py:111] - Table 'orders': Pruned 3 columns, kept 2/5
2025-04-10 01:10:18,272 - INFO - [column_agent.py:197] - Building pruned schema
2025-04-10 01:10:18,273 - INFO - [column_agent.py:226] - Built pruned schema (439 chars)
2025-04-10 01:10:18,274 - INFO - [column_agent.py:120] - Column pruning completed in 1.46s
2025-04-10 01:10:18,276 - INFO - [sql_generator.py:237] - Found 1 join conditions for the relevant tables
2025-04-10 01:10:18,277 - INFO - [feedback_manager.py:265] - Stage 1: Vector search for 'Get me count of orders by customers along with the...'
2025-04-10 01:10:18,319 - DEBUG - [feedback_manager.py:105] - Generated embedding in 0.04s with shape (384,)
2025-04-10 01:10:18,320 - ERROR - [vector_store.py:215] - Error searching similar vectors in collection query_embeddings: argument of type 'NoneType' is not iterable
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/vector_store.py", line 176, in search_similar
    if "id" not in output_fields and not any(f.lower() == 'id' for f in output_fields):
       ^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: argument of type 'NoneType' is not iterable
2025-04-10 01:10:18,321 - WARNING - [feedback_manager.py:288] - No candidates found from vector search, falling back to text-based search
2025-04-10 01:10:18,322 - INFO - [feedback_manager.py:402] - Found 0 similar queries using text-based search for 'Get me count of orders by customers along with the...'
2025-04-10 01:10:18,322 - INFO - [azure_client.py:35] - SQL generation started for query: 'Get me count of orders by customers along with their name'
2025-04-10 01:10:18,323 - INFO - [azure_client.py:69] - Including schema information (439 chars)
2025-04-10 01:10:18,324 - INFO - [azure_client.py:76] - Including 1 join conditions
2025-04-10 01:10:18,324 - INFO - [azure_client.py:104] - Including 4 SQL examples (no similarity examples found)
2025-04-10 01:10:18,325 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER): Unique customer identifier, first_name (TEXT): Customer's first name, last_name (TEXT): Customer's last name\nPrimary Key(s): customer_id\n\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER): Unique order identifier, customer_id (INTEGER): Reference to customer who placed the order\nPrimary Key(s): order_id\n"}, {'role': 'user', 'content': 'Use the following pre-defined join conditions when joining these tables:\n- When joining customers with orders, use: INNER JOIN orders ON customers.customer_id = orders.customer_id\n'}, {'role': 'user', 'content': 'Here are some example queries and their SQL:\nQuestion: How many records are in the customers table?\nSQL: SELECT COUNT(*) AS record_count FROM customers\n\nQuestion: Get all columns from customers\nSQL: SELECT * FROM customers LIMIT 5\n\nQuestion: Get record from customers by customer_id\nSQL: SELECT * FROM customers WHERE customer_id = 1\n\nQuestion: Show some data from customers and orders\nSQL: SELECT customers.first_name, orders.customer_id\nFROM customers\nINNER JOIN orders ON customers.customer_id = orders.customer_id\nLIMIT 5\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: Get me count of orders by customers along with their name'}]
2025-04-10 01:10:18,325 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-10 01:10:18,326 - DEBUG - [llm_engine.py:87] - [SQL_GEN] Prompt: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief ... (truncated)
2025-04-10 01:10:18,326 - DEBUG - [llm_engine.py:96] - [SQL_GEN] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:10:18,608 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:10:18] "GET /api/query/progress/baec17a1-a98d-492d-8542-cdd664243ce3 HTTP/1.1" 200 -
2025-04-10 01:10:18,859 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:10:18] "GET /api/query/progress/baec17a1-a98d-492d-8542-cdd664243ce3 HTTP/1.1" 200 -
2025-04-10 01:10:19,244 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:10:19] "GET /api/query/progress/baec17a1-a98d-492d-8542-cdd664243ce3 HTTP/1.1" 200 -
2025-04-10 01:10:20,014 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:10:20] "GET /api/query/progress/baec17a1-a98d-492d-8542-cdd664243ce3 HTTP/1.1" 200 -
2025-04-10 01:10:20,082 - DEBUG - [llm_engine.py:107] - [SQL_GEN] Model response received in 1.75s
2025-04-10 01:10:20,082 - DEBUG - [llm_engine.py:116] - [SQL_GEN] Raw model response: 'Here's a query that will return the count of orders placed by each customer along with their first and last names. It uses an INNER JOIN between customers and orders, groups by customer, and counts the number of orders per customer.

```sql
SELECT 
    customers.first_name,
    customers.last_name,
    COUNT(orders.order_id) AS order_count
FROM customers
INNER JOIN orders ON customers.customer_id = orders.customer_id
GROUP BY customers.customer_id, customers.first_name, customers.last_name
```'
2025-04-10 01:10:20,082 - INFO - [llm_engine.py:119] - [SQL_GEN] Completion generation completed in 1.76s
2025-04-10 01:10:20,083 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:10:20,083 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-10 01:10:20,084 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-10 01:10:20,085 - INFO - [azure_client.py:171] - Extracted SQL query (253 chars) and explanation (232 chars)
2025-04-10 01:10:20,085 - INFO - [azure_client.py:124] - Generated SQL: SELECT 
    customers.first_name,
    customers.last_name,
    COUNT(orders.order_id) AS order_count
FROM customers
INNER JOIN orders ON customers.customer_id = orders.customer_id
GROUP BY customers.customer_id, customers.first_name, customers.last_name
2025-04-10 01:10:20,087 - INFO - [azure_client.py:132] - SQL generation completed in 1.76s
2025-04-10 01:10:20,087 - INFO - [database.py:65] - Executing SQL query: SELECT 
    customers.first_name,
    customers.last_name,
    COUNT(orders.order_id) AS order_count
FROM customers
INNER JOIN orders ON customers.customer_id = orders.customer_id
GROUP BY customers.customer_id, customers.first_name, customers.last_name
2025-04-10 01:10:20,089 - DEBUG - [database.py:76] - Query execution started
2025-04-10 01:10:20,089 - DEBUG - [database.py:81] - Query execution completed in 0.00s
2025-04-10 01:10:20,090 - INFO - [database.py:86] - Query returned 5 rows with 3 columns
2025-04-10 01:10:20,091 - DEBUG - [database.py:92] - Sample data (first 3 rows):
  first_name last_name  order_count
0       John       Doe            2
1       Jane     Smith            2
2      Alice   Johnson            2
2025-04-10 01:10:20,092 - INFO - [database.py:95] - Query processing completed in 0.00s
2025-04-10 01:10:20,093 - INFO - [sql_generator.py:348] - Analyzing query results for dashboard potential
2025-04-10 01:10:20,093 - INFO - [azure_client.py:197] - Dashboard analysis started for query: 'Get me count of orders by customers along with their name'
2025-04-10 01:10:20,094 - INFO - [llm_engine.py:56] - [DASHBOARD_ANALYSIS] Completion generation started
2025-04-10 01:10:20,094 - DEBUG - [llm_engine.py:87] - [DASHBOARD_ANALYSIS] Prompt: [{'role': 'system', 'content': 'You are a data visualization expert. Analyze the given query results and determine if they\'re suitable for a dashboard visualization.\n\nYour task is to:\n1. Analyze the columns and data\n2. Determine if the data is suitable for visualization (has numeric values and categorical data)\n3. If suitable, recommend the best chart type (bar, line, pie, etc.)\n4. Identify the best columns for X and Y axes (or equivalent based on chart type)\n5. Suggest meaningful labels... (truncated)
2025-04-10 01:10:20,095 - DEBUG - [llm_engine.py:96] - [DASHBOARD_ANALYSIS] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:10:20,260 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:10:20] "GET /api/query/progress/baec17a1-a98d-492d-8542-cdd664243ce3 HTTP/1.1" 200 -
2025-04-10 01:10:20,672 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:10:20] "GET /api/query/progress/baec17a1-a98d-492d-8542-cdd664243ce3 HTTP/1.1" 200 -
2025-04-10 01:10:21,442 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:10:21] "GET /api/query/progress/baec17a1-a98d-492d-8542-cdd664243ce3 HTTP/1.1" 200 -
2025-04-10 01:10:21,691 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:10:21] "GET /api/query/progress/baec17a1-a98d-492d-8542-cdd664243ce3 HTTP/1.1" 200 -
2025-04-10 01:10:22,025 - DEBUG - [llm_engine.py:107] - [DASHBOARD_ANALYSIS] Model response received in 1.93s
2025-04-10 01:10:22,025 - DEBUG - [llm_engine.py:116] - [DASHBOARD_ANALYSIS] Raw model response: '{
  "is_suitable": true,
  "reason": "The data contains categorical customer names and a numeric count of orders, which is suitable for comparing order counts across customers.",
  "chart_type": "bar",
  "x_axis": {
    "column": "first_name + ' ' + last_name",
    "label": "Customer Name"
  },
  "y_axis": {
    "column": "order_count",
    "label": "Number of Orders"
  },
  "title": "Number of Orders by Customer"
}'
2025-04-10 01:10:22,026 - INFO - [llm_engine.py:119] - [DASHBOARD_ANALYSIS] Completion generation completed in 1.93s
2025-04-10 01:10:22,026 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:10:22,026 - INFO - [azure_client.py:255] - Dashboard analysis results: suitable=True
2025-04-10 01:10:22,027 - INFO - [azure_client.py:264] - Dashboard analysis completed in 1.93s
2025-04-10 01:10:22,027 - INFO - [sql_generator.py:366] - Dashboard analysis completed: suitable=True
2025-04-10 01:10:22,027 - INFO - [sql_generator.py:442] - SQL generation completed in 7.07s
2025-04-10 01:10:22,028 - INFO - [sql_generator.py:125] - Query processing completed in 7.08s
2025-04-10 01:10:22,093 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:10:22] "GET /api/query/progress/baec17a1-a98d-492d-8542-cdd664243ce3 HTTP/1.1" 200 -
2025-04-10 01:11:57,723 - INFO - [sql_generator.py:37] - Processing query: 'Get me count of orders by customers along with their name'
2025-04-10 01:11:57,724 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:11:57] "POST /api/query HTTP/1.1" 200 -
2025-04-10 01:11:57,724 - INFO - [intent_agent.py:27] - Intent detection started for query: 'Get me count of orders by customers along with their name'
2025-04-10 01:11:57,726 - INFO - [intent_agent.py:38] - Using default intent 'data_retrieval' without calling LLM
2025-04-10 01:11:57,726 - INFO - [intent_agent.py:41] - Intent detection completed in 0.00s
2025-04-10 01:11:57,727 - INFO - [sql_generator.py:45] - Detected intent: data_retrieval
2025-04-10 01:11:57,728 - INFO - [sql_generator.py:141] - Starting SQL generation process
2025-04-10 01:11:57,728 - INFO - [database.py:44] - Attempting database connection
2025-04-10 01:11:57,729 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-10 01:11:57,730 - INFO - [table_agent.py:28] - Table selection started for query: 'Get me count of orders by customers along with their name'
2025-04-10 01:11:57,730 - INFO - [table_agent.py:34] - Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-10 01:11:57,730 - INFO - [table_agent.py:64] - Sending request to AI model for table selection
2025-04-10 01:11:57,731 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-10 01:11:57,732 - DEBUG - [llm_engine.py:87] - [TABLE] Prompt: [{'role': 'system', 'content': "You are a table selection agent for a Text-to-SQL system.\nYour job is to identify which database tables are most relevant to a user query.\nYou will be provided with table names and their descriptions.\nReturn ONLY the names of relevant tables, separated by commas. Be selective and choose\nonly the tables that are directly needed to answer the query. If you're unsure,\ninclude tables that might be related. Return only table names in your response."}, {'role': 'us... (truncated)
2025-04-10 01:11:57,732 - DEBUG - [llm_engine.py:96] - [TABLE] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:11:58,226 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:11:58] "GET /api/query/progress/3dae81f7-7452-44de-a85b-dedfd66d281b HTTP/1.1" 200 -
2025-04-10 01:11:58,981 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:11:58] "GET /api/query/progress/3dae81f7-7452-44de-a85b-dedfd66d281b HTTP/1.1" 200 -
2025-04-10 01:11:59,235 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:11:59] "GET /api/query/progress/3dae81f7-7452-44de-a85b-dedfd66d281b HTTP/1.1" 200 -
2025-04-10 01:11:59,643 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:11:59] "GET /api/query/progress/3dae81f7-7452-44de-a85b-dedfd66d281b HTTP/1.1" 200 -
2025-04-10 01:12:00,173 - DEBUG - [llm_engine.py:107] - [TABLE] Model response received in 2.44s
2025-04-10 01:12:00,173 - DEBUG - [llm_engine.py:116] - [TABLE] Raw model response: 'customers, orders'
2025-04-10 01:12:00,173 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 2.44s
2025-04-10 01:12:00,173 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:12:00,174 - INFO - [table_agent.py:69] - Raw model response: 'customers, orders'
2025-04-10 01:12:00,174 - INFO - [table_agent.py:90] - Table selection completed in 2.44s. Selected: customers, orders
2025-04-10 01:12:00,175 - INFO - [column_agent.py:29] - Column pruning started for query: 'Get me count of orders by customers along with their name'
2025-04-10 01:12:00,175 - INFO - [column_agent.py:30] - Processing tables: customers, orders
2025-04-10 01:12:00,176 - INFO - [column_agent.py:94] - Sending request to AI model for column selection
2025-04-10 01:12:00,176 - INFO - [llm_engine.py:56] - [COLUMN] Completion generation started
2025-04-10 01:12:00,176 - DEBUG - [llm_engine.py:87] - [COLUMN] Prompt: [{'role': 'system', 'content': 'You are a column selection agent for a Text-to-SQL system.\nYour job is to identify which columns from the provided tables are most relevant to a user query.\nFor each table, select only the columns that will be needed to answer the query.\nReturn your answer as a JSON object with table names as keys and arrays of column names as values.\nAlways include primary key columns even if not directly mentioned in the query.\nConsider columns that might be needed for:\n1.... (truncated)
2025-04-10 01:12:00,177 - DEBUG - [llm_engine.py:96] - [COLUMN] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:12:00,417 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:12:00] "GET /api/query/progress/3dae81f7-7452-44de-a85b-dedfd66d281b HTTP/1.1" 200 -
2025-04-10 01:12:00,660 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:12:00] "GET /api/query/progress/3dae81f7-7452-44de-a85b-dedfd66d281b HTTP/1.1" 200 -
2025-04-10 01:12:01,061 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:12:01] "GET /api/query/progress/3dae81f7-7452-44de-a85b-dedfd66d281b HTTP/1.1" 200 -
2025-04-10 01:12:01,828 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:12:01] "GET /api/query/progress/3dae81f7-7452-44de-a85b-dedfd66d281b HTTP/1.1" 200 -
2025-04-10 01:12:02,071 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:12:02] "GET /api/query/progress/3dae81f7-7452-44de-a85b-dedfd66d281b HTTP/1.1" 200 -
2025-04-10 01:12:02,430 - DEBUG - [llm_engine.py:107] - [COLUMN] Model response received in 2.25s
2025-04-10 01:12:02,430 - DEBUG - [llm_engine.py:116] - [COLUMN] Raw model response: '{
  "customers": ["customer_id", "first_name", "last_name"],
  "orders": ["order_id", "customer_id"]
}'
2025-04-10 01:12:02,430 - INFO - [llm_engine.py:119] - [COLUMN] Completion generation completed in 2.25s
2025-04-10 01:12:02,431 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:12:02,432 - INFO - [column_agent.py:139] - Parsing column selection from model response
2025-04-10 01:12:02,433 - INFO - [column_agent.py:149] - Parsed column selection JSON: {"customers": ["customer_id", "first_name", "last_name"], "orders": ["order_id", "customer_id"]}
2025-04-10 01:12:02,433 - INFO - [column_agent.py:111] - Table 'customers': Pruned 8 columns, kept 3/11
2025-04-10 01:12:02,434 - INFO - [column_agent.py:111] - Table 'orders': Pruned 3 columns, kept 2/5
2025-04-10 01:12:02,434 - INFO - [column_agent.py:197] - Building pruned schema
2025-04-10 01:12:02,435 - INFO - [column_agent.py:226] - Built pruned schema (439 chars)
2025-04-10 01:12:02,437 - INFO - [column_agent.py:120] - Column pruning completed in 2.26s
2025-04-10 01:12:02,438 - INFO - [sql_generator.py:237] - Found 1 join conditions for the relevant tables
2025-04-10 01:12:02,438 - INFO - [feedback_manager.py:265] - Stage 1: Vector search for 'Get me count of orders by customers along with the...'
2025-04-10 01:12:02,465 - DEBUG - [feedback_manager.py:105] - Generated embedding in 0.03s with shape (384,)
2025-04-10 01:12:02,466 - ERROR - [vector_store.py:215] - Error searching similar vectors in collection query_embeddings: argument of type 'NoneType' is not iterable
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/vector_store.py", line 176, in search_similar
    if "id" not in output_fields and not any(f.lower() == 'id' for f in output_fields):
       ^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: argument of type 'NoneType' is not iterable
2025-04-10 01:12:02,467 - WARNING - [feedback_manager.py:288] - No candidates found from vector search, falling back to text-based search
2025-04-10 01:12:02,468 - INFO - [feedback_manager.py:402] - Found 0 similar queries using text-based search for 'Get me count of orders by customers along with the...'
2025-04-10 01:12:02,468 - INFO - [azure_client.py:35] - SQL generation started for query: 'Get me count of orders by customers along with their name'
2025-04-10 01:12:02,468 - INFO - [azure_client.py:69] - Including schema information (439 chars)
2025-04-10 01:12:02,469 - INFO - [azure_client.py:76] - Including 1 join conditions
2025-04-10 01:12:02,469 - INFO - [azure_client.py:104] - Including 4 SQL examples (no similarity examples found)
2025-04-10 01:12:02,470 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER): Unique customer identifier, first_name (TEXT): Customer's first name, last_name (TEXT): Customer's last name\nPrimary Key(s): customer_id\n\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER): Unique order identifier, customer_id (INTEGER): Reference to customer who placed the order\nPrimary Key(s): order_id\n"}, {'role': 'user', 'content': 'Use the following pre-defined join conditions when joining these tables:\n- When joining customers with orders, use: INNER JOIN orders ON customers.customer_id = orders.customer_id\n'}, {'role': 'user', 'content': 'Here are some example queries and their SQL:\nQuestion: How many records are in the customers table?\nSQL: SELECT COUNT(*) AS record_count FROM customers\n\nQuestion: Get all columns from customers\nSQL: SELECT * FROM customers LIMIT 5\n\nQuestion: Get record from customers by customer_id\nSQL: SELECT * FROM customers WHERE customer_id = 1\n\nQuestion: Show some data from customers and orders\nSQL: SELECT customers.first_name, orders.customer_id\nFROM customers\nINNER JOIN orders ON customers.customer_id = orders.customer_id\nLIMIT 5\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: Get me count of orders by customers along with their name'}]
2025-04-10 01:12:02,470 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-10 01:12:02,471 - DEBUG - [llm_engine.py:87] - [SQL_GEN] Prompt: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief ... (truncated)
2025-04-10 01:12:02,471 - DEBUG - [llm_engine.py:96] - [SQL_GEN] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:12:02,490 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:12:02] "GET /api/query/progress/3dae81f7-7452-44de-a85b-dedfd66d281b HTTP/1.1" 200 -
2025-04-10 01:12:03,257 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:12:03] "GET /api/query/progress/3dae81f7-7452-44de-a85b-dedfd66d281b HTTP/1.1" 200 -
2025-04-10 01:12:03,506 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:12:03] "GET /api/query/progress/3dae81f7-7452-44de-a85b-dedfd66d281b HTTP/1.1" 200 -
2025-04-10 01:12:03,911 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:12:03] "GET /api/query/progress/3dae81f7-7452-44de-a85b-dedfd66d281b HTTP/1.1" 200 -
2025-04-10 01:12:04,702 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:12:04] "GET /api/query/progress/3dae81f7-7452-44de-a85b-dedfd66d281b HTTP/1.1" 200 -
2025-04-10 01:12:04,951 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:12:04] "GET /api/query/progress/3dae81f7-7452-44de-a85b-dedfd66d281b HTTP/1.1" 200 -
2025-04-10 01:12:05,098 - DEBUG - [llm_engine.py:107] - [SQL_GEN] Model response received in 2.63s
2025-04-10 01:12:05,098 - DEBUG - [llm_engine.py:116] - [SQL_GEN] Raw model response: 'Here's a query that will retrieve the count of orders placed by each customer along with their first and last names:

```sql
SELECT 
    customers.first_name, 
    customers.last_name, 
    COUNT(orders.order_id) AS order_count
FROM customers
INNER JOIN orders ON customers.customer_id = orders.customer_id
GROUP BY customers.customer_id, customers.first_name, customers.last_name
```'
2025-04-10 01:12:05,099 - INFO - [llm_engine.py:119] - [SQL_GEN] Completion generation completed in 2.63s
2025-04-10 01:12:05,099 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:12:05,100 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-10 01:12:05,101 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-10 01:12:05,102 - INFO - [azure_client.py:171] - Extracted SQL query (255 chars) and explanation (116 chars)
2025-04-10 01:12:05,102 - INFO - [azure_client.py:124] - Generated SQL: SELECT 
    customers.first_name, 
    customers.last_name, 
    COUNT(orders.order_id) AS order_count
FROM customers
INNER JOIN orders ON customers.customer_id = orders.customer_id
GROUP BY customers.customer_id, customers.first_name, customers.last_name
2025-04-10 01:12:05,104 - INFO - [azure_client.py:132] - SQL generation completed in 2.64s
2025-04-10 01:12:05,105 - INFO - [database.py:65] - Executing SQL query: SELECT 
    customers.first_name, 
    customers.last_name, 
    COUNT(orders.order_id) AS order_count
FROM customers
INNER JOIN orders ON customers.customer_id = orders.customer_id
GROUP BY customers.customer_id, customers.first_name, customers.last_name
2025-04-10 01:12:05,105 - DEBUG - [database.py:76] - Query execution started
2025-04-10 01:12:05,106 - DEBUG - [database.py:81] - Query execution completed in 0.00s
2025-04-10 01:12:05,107 - INFO - [database.py:86] - Query returned 5 rows with 3 columns
2025-04-10 01:12:05,109 - DEBUG - [database.py:92] - Sample data (first 3 rows):
  first_name last_name  order_count
0       John       Doe            2
1       Jane     Smith            2
2      Alice   Johnson            2
2025-04-10 01:12:05,110 - INFO - [database.py:95] - Query processing completed in 0.01s
2025-04-10 01:12:05,110 - INFO - [sql_generator.py:348] - Analyzing query results for dashboard potential
2025-04-10 01:12:05,111 - INFO - [azure_client.py:197] - Dashboard analysis started for query: 'Get me count of orders by customers along with their name'
2025-04-10 01:12:05,111 - INFO - [llm_engine.py:56] - [DASHBOARD_ANALYSIS] Completion generation started
2025-04-10 01:12:05,112 - DEBUG - [llm_engine.py:87] - [DASHBOARD_ANALYSIS] Prompt: [{'role': 'system', 'content': 'You are a data visualization expert. Analyze the given query results and determine if they\'re suitable for a dashboard visualization.\n\nYour task is to:\n1. Analyze the columns and data\n2. Determine if the data is suitable for visualization (has numeric values and categorical data)\n3. If suitable, recommend the best chart type (bar, line, pie, etc.)\n4. Identify the best columns for X and Y axes (or equivalent based on chart type)\n5. Suggest meaningful labels... (truncated)
2025-04-10 01:12:05,112 - DEBUG - [llm_engine.py:96] - [DASHBOARD_ANALYSIS] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:12:05,350 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:12:05] "GET /api/query/progress/3dae81f7-7452-44de-a85b-dedfd66d281b HTTP/1.1" 200 -
2025-04-10 01:12:06,115 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:12:06] "GET /api/query/progress/3dae81f7-7452-44de-a85b-dedfd66d281b HTTP/1.1" 200 -
2025-04-10 01:12:06,350 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:12:06] "GET /api/query/progress/3dae81f7-7452-44de-a85b-dedfd66d281b HTTP/1.1" 200 -
2025-04-10 01:12:06,759 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:12:06] "GET /api/query/progress/3dae81f7-7452-44de-a85b-dedfd66d281b HTTP/1.1" 200 -
2025-04-10 01:12:07,546 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:12:07] "GET /api/query/progress/3dae81f7-7452-44de-a85b-dedfd66d281b HTTP/1.1" 200 -
2025-04-10 01:12:07,771 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:12:07] "GET /api/query/progress/3dae81f7-7452-44de-a85b-dedfd66d281b HTTP/1.1" 200 -
2025-04-10 01:12:08,195 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:12:08] "GET /api/query/progress/3dae81f7-7452-44de-a85b-dedfd66d281b HTTP/1.1" 200 -
2025-04-10 01:12:08,977 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:12:08] "GET /api/query/progress/3dae81f7-7452-44de-a85b-dedfd66d281b HTTP/1.1" 200 -
2025-04-10 01:12:09,218 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:12:09] "GET /api/query/progress/3dae81f7-7452-44de-a85b-dedfd66d281b HTTP/1.1" 200 -
2025-04-10 01:12:09,620 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:12:09] "GET /api/query/progress/3dae81f7-7452-44de-a85b-dedfd66d281b HTTP/1.1" 200 -
2025-04-10 01:12:09,688 - DEBUG - [llm_engine.py:107] - [DASHBOARD_ANALYSIS] Model response received in 4.58s
2025-04-10 01:12:09,688 - DEBUG - [llm_engine.py:116] - [DASHBOARD_ANALYSIS] Raw model response: '{
  "is_suitable": true,
  "reason": "The data contains categorical customer names and numeric order counts, allowing for comparison across customers.",
  "chart_type": "bar",
  "x_axis": {
    "column": "first_name + ' ' + last_name",
    "label": "Customer Name"
  },
  "y_axis": {
    "column": "order_count",
    "label": "Number of Orders"
  },
  "title": "Number of Orders per Customer"
}'
2025-04-10 01:12:09,689 - INFO - [llm_engine.py:119] - [DASHBOARD_ANALYSIS] Completion generation completed in 4.58s
2025-04-10 01:12:09,689 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:12:09,690 - INFO - [azure_client.py:255] - Dashboard analysis results: suitable=True
2025-04-10 01:12:09,690 - INFO - [azure_client.py:264] - Dashboard analysis completed in 4.58s
2025-04-10 01:12:09,690 - INFO - [sql_generator.py:366] - Dashboard analysis completed: suitable=True
2025-04-10 01:12:09,691 - INFO - [sql_generator.py:442] - SQL generation completed in 11.96s
2025-04-10 01:12:09,692 - INFO - [sql_generator.py:125] - Query processing completed in 11.97s
2025-04-10 01:12:10,383 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:12:10] "GET /api/query/progress/3dae81f7-7452-44de-a85b-dedfd66d281b HTTP/1.1" 200 -
2025-04-10 01:15:28,321 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/utils/azure_client.py', reloading
2025-04-10 01:15:28,322 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/utils/azure_client.py', reloading
2025-04-10 01:15:28,323 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/utils/azure_client.py', reloading
2025-04-10 01:15:29,324 - INFO - [sql_generator.py:488] - Closing all agent connections
2025-04-10 01:15:29,325 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-10 01:15:29,325 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-10 01:15:29,325 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-10 01:15:29,325 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-10 01:15:29,325 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-10 01:15:29,326 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-10 01:15:29,326 - INFO - [azure_client.py:302] - Closing Azure AI client connection
2025-04-10 01:15:29,326 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-10 01:15:29,326 - INFO - [database.py:258] - Closing database connection
2025-04-10 01:15:29,327 - DEBUG - [database.py:261] - Database engine disposed
2025-04-10 01:15:29,328 - INFO - [feedback_manager.py:762] - Closing database connections
2025-04-10 01:15:29,329 - DEBUG - [feedback_manager.py:765] - SQLite database engine disposed
2025-04-10 01:15:29,329 - INFO - [vector_store.py:340] - Closing vector database connection
2025-04-10 01:15:30,318 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-10 01:15:37,104 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-10 01:15:37,104 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-10 01:15:37,104 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-10 01:15:37,104 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-10 01:15:37,105 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-10 01:15:37,113 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-10 01:15:37,117 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-10 01:15:37,117 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-10 01:15:37,158 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-10 01:15:37,158 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-10 01:15:37,159 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-10 01:15:37,159 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-10 01:15:37,159 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-10 01:15:37,159 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-10 01:15:37,160 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-10 01:15:37,200 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-10 01:15:37,200 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-10 01:15:37,200 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-10 01:15:37,200 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-10 01:15:37,201 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-10 01:15:37,201 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-10 01:15:37,201 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-10 01:15:37,300 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-10 01:15:37,301 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-10 01:15:37,301 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-10 01:15:37,301 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-10 01:15:37,302 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-10 01:15:37,302 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-10 01:15:37,302 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-10 01:15:37,302 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-10 01:15:37,391 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-10 01:15:37,391 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-10 01:15:37,391 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-10 01:15:37,392 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-10 01:15:37,392 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-10 01:15:37,392 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-10 01:15:37,393 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-10 01:15:37,393 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-10 01:15:37,447 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-10 01:15:37,447 - INFO - [_internal.py:224] -  * Debugger PIN: 501-040-382
2025-04-10 01:15:42,755 - INFO - [sql_generator.py:37] - Processing query: 'Get me count of orders by customers along with their name'
2025-04-10 01:15:42,756 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:15:42] "POST /api/query HTTP/1.1" 200 -
2025-04-10 01:15:42,756 - INFO - [intent_agent.py:27] - Intent detection started for query: 'Get me count of orders by customers along with their name'
2025-04-10 01:15:42,758 - INFO - [intent_agent.py:38] - Using default intent 'data_retrieval' without calling LLM
2025-04-10 01:15:42,759 - INFO - [intent_agent.py:41] - Intent detection completed in 0.00s
2025-04-10 01:15:42,760 - INFO - [sql_generator.py:45] - Detected intent: data_retrieval
2025-04-10 01:15:42,760 - INFO - [sql_generator.py:141] - Starting SQL generation process
2025-04-10 01:15:42,761 - INFO - [database.py:44] - Attempting database connection
2025-04-10 01:15:42,762 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-10 01:15:42,763 - INFO - [table_agent.py:28] - Table selection started for query: 'Get me count of orders by customers along with their name'
2025-04-10 01:15:42,764 - INFO - [table_agent.py:34] - Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-10 01:15:42,765 - INFO - [table_agent.py:64] - Sending request to AI model for table selection
2025-04-10 01:15:42,766 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-10 01:15:42,767 - DEBUG - [llm_engine.py:87] - [TABLE] Prompt: [{'role': 'system', 'content': "You are a table selection agent for a Text-to-SQL system.\nYour job is to identify which database tables are most relevant to a user query.\nYou will be provided with table names and their descriptions.\nReturn ONLY the names of relevant tables, separated by commas. Be selective and choose\nonly the tables that are directly needed to answer the query. If you're unsure,\ninclude tables that might be related. Return only table names in your response."}, {'role': 'us... (truncated)
2025-04-10 01:15:42,767 - DEBUG - [llm_engine.py:96] - [TABLE] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:15:43,255 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:15:43] "GET /api/query/progress/f5596aa7-98c2-4f59-b7e3-48d20dc30ede HTTP/1.1" 200 -
2025-04-10 01:15:44,039 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:15:44] "GET /api/query/progress/f5596aa7-98c2-4f59-b7e3-48d20dc30ede HTTP/1.1" 200 -
2025-04-10 01:15:44,279 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:15:44] "GET /api/query/progress/f5596aa7-98c2-4f59-b7e3-48d20dc30ede HTTP/1.1" 200 -
2025-04-10 01:15:44,629 - DEBUG - [llm_engine.py:107] - [TABLE] Model response received in 1.86s
2025-04-10 01:15:44,630 - DEBUG - [llm_engine.py:116] - [TABLE] Raw model response: 'customers, orders'
2025-04-10 01:15:44,630 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 1.86s
2025-04-10 01:15:44,631 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:15:44,632 - INFO - [table_agent.py:69] - Raw model response: 'customers, orders'
2025-04-10 01:15:44,632 - INFO - [table_agent.py:90] - Table selection completed in 1.87s. Selected: customers, orders
2025-04-10 01:15:44,632 - INFO - [column_agent.py:29] - Column pruning started for query: 'Get me count of orders by customers along with their name'
2025-04-10 01:15:44,633 - INFO - [column_agent.py:30] - Processing tables: customers, orders
2025-04-10 01:15:44,634 - INFO - [column_agent.py:94] - Sending request to AI model for column selection
2025-04-10 01:15:44,635 - INFO - [llm_engine.py:56] - [COLUMN] Completion generation started
2025-04-10 01:15:44,636 - DEBUG - [llm_engine.py:87] - [COLUMN] Prompt: [{'role': 'system', 'content': 'You are a column selection agent for a Text-to-SQL system.\nYour job is to identify which columns from the provided tables are most relevant to a user query.\nFor each table, select only the columns that will be needed to answer the query.\nReturn your answer as a JSON object with table names as keys and arrays of column names as values.\nAlways include primary key columns even if not directly mentioned in the query.\nConsider columns that might be needed for:\n1.... (truncated)
2025-04-10 01:15:44,636 - DEBUG - [llm_engine.py:96] - [COLUMN] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:15:44,701 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:15:44] "GET /api/query/progress/f5596aa7-98c2-4f59-b7e3-48d20dc30ede HTTP/1.1" 200 -
2025-04-10 01:15:45,483 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:15:45] "GET /api/query/progress/f5596aa7-98c2-4f59-b7e3-48d20dc30ede HTTP/1.1" 200 -
2025-04-10 01:15:45,722 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:15:45] "GET /api/query/progress/f5596aa7-98c2-4f59-b7e3-48d20dc30ede HTTP/1.1" 200 -
2025-04-10 01:15:46,145 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:15:46] "GET /api/query/progress/f5596aa7-98c2-4f59-b7e3-48d20dc30ede HTTP/1.1" 200 -
2025-04-10 01:15:46,160 - DEBUG - [llm_engine.py:107] - [COLUMN] Model response received in 1.52s
2025-04-10 01:15:46,161 - DEBUG - [llm_engine.py:116] - [COLUMN] Raw model response: '{
  "customers": ["customer_id", "first_name", "last_name"],
  "orders": ["order_id", "customer_id"]
}'
2025-04-10 01:15:46,162 - INFO - [llm_engine.py:119] - [COLUMN] Completion generation completed in 1.53s
2025-04-10 01:15:46,164 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:15:46,165 - INFO - [column_agent.py:139] - Parsing column selection from model response
2025-04-10 01:15:46,166 - INFO - [column_agent.py:149] - Parsed column selection JSON: {"customers": ["customer_id", "first_name", "last_name"], "orders": ["order_id", "customer_id"]}
2025-04-10 01:15:46,168 - INFO - [column_agent.py:111] - Table 'customers': Pruned 8 columns, kept 3/11
2025-04-10 01:15:46,169 - INFO - [column_agent.py:111] - Table 'orders': Pruned 3 columns, kept 2/5
2025-04-10 01:15:46,170 - INFO - [column_agent.py:197] - Building pruned schema
2025-04-10 01:15:46,171 - INFO - [column_agent.py:226] - Built pruned schema (439 chars)
2025-04-10 01:15:46,173 - INFO - [column_agent.py:120] - Column pruning completed in 1.54s
2025-04-10 01:15:46,175 - INFO - [sql_generator.py:237] - Found 1 join conditions for the relevant tables
2025-04-10 01:15:46,176 - INFO - [feedback_manager.py:265] - Stage 1: Vector search for 'Get me count of orders by customers along with the...'
2025-04-10 01:15:46,177 - INFO - [feedback_manager.py:77] - Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-10 01:15:46,941 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:15:46] "GET /api/query/progress/f5596aa7-98c2-4f59-b7e3-48d20dc30ede HTTP/1.1" 200 -
2025-04-10 01:15:47,169 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:15:47] "GET /api/query/progress/f5596aa7-98c2-4f59-b7e3-48d20dc30ede HTTP/1.1" 200 -
2025-04-10 01:15:47,605 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:15:47] "GET /api/query/progress/f5596aa7-98c2-4f59-b7e3-48d20dc30ede HTTP/1.1" 200 -
2025-04-10 01:15:48,372 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:15:48] "GET /api/query/progress/f5596aa7-98c2-4f59-b7e3-48d20dc30ede HTTP/1.1" 200 -
2025-04-10 01:15:48,611 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:15:48] "GET /api/query/progress/f5596aa7-98c2-4f59-b7e3-48d20dc30ede HTTP/1.1" 200 -
2025-04-10 01:15:48,838 - INFO - [feedback_manager.py:80] - Embedding model loaded in 2.66s
2025-04-10 01:15:48,915 - DEBUG - [feedback_manager.py:105] - Generated embedding in 0.08s with shape (384,)
2025-04-10 01:15:48,916 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-10 01:15:49,034 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:15:49] "GET /api/query/progress/f5596aa7-98c2-4f59-b7e3-48d20dc30ede HTTP/1.1" 200 -
2025-04-10 01:15:49,831 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:15:49] "GET /api/query/progress/f5596aa7-98c2-4f59-b7e3-48d20dc30ede HTTP/1.1" 200 -
2025-04-10 01:15:51,782 - DEBUG - [milvus_client.py:728] - Created new connection using: 1eaec1dcc27b44488dd581e69543a054
2025-04-10 01:15:51,782 - INFO - [vector_store.py:42] - Vector database connection established in 2.87s
2025-04-10 01:15:51,786 - ERROR - [vector_store.py:215] - Error searching similar vectors in collection query_embeddings: argument of type 'NoneType' is not iterable
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/vector_store.py", line 176, in search_similar
    if "id" not in output_fields and not any(f.lower() == 'id' for f in output_fields):
       ^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: argument of type 'NoneType' is not iterable
2025-04-10 01:15:51,789 - WARNING - [feedback_manager.py:288] - No candidates found from vector search, falling back to text-based search
2025-04-10 01:15:51,789 - INFO - [feedback_manager.py:52] - Attempting database connection
2025-04-10 01:15:51,791 - INFO - [feedback_manager.py:56] - Database connection established in 0.00s
2025-04-10 01:15:51,792 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-10 01:15:51,802 - DEBUG - [milvus_client.py:728] - Created new connection using: 7c8a3faa913a416e8aa856c9cb02afbb
2025-04-10 01:15:51,802 - INFO - [vector_store.py:42] - Vector database connection established in 0.01s
2025-04-10 01:15:51,806 - INFO - [feedback_manager.py:402] - Found 0 similar queries using text-based search for 'Get me count of orders by customers along with the...'
2025-04-10 01:15:51,806 - INFO - [azure_client.py:35] - SQL generation started for query: 'Get me count of orders by customers along with their name'
2025-04-10 01:15:51,807 - INFO - [azure_client.py:69] - Including schema information (439 chars)
2025-04-10 01:15:51,808 - INFO - [azure_client.py:76] - Including 1 join conditions
2025-04-10 01:15:51,810 - INFO - [azure_client.py:104] - Including 4 SQL examples (no similarity examples found)
2025-04-10 01:15:51,812 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER): Unique customer identifier, first_name (TEXT): Customer's first name, last_name (TEXT): Customer's last name\nPrimary Key(s): customer_id\n\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER): Unique order identifier, customer_id (INTEGER): Reference to customer who placed the order\nPrimary Key(s): order_id\n"}, {'role': 'user', 'content': 'Use the following pre-defined join conditions when joining these tables:\n- When joining customers with orders, use: INNER JOIN orders ON customers.customer_id = orders.customer_id\n'}, {'role': 'user', 'content': 'Here are some example queries and their SQL:\nQuestion: How many records are in the customers table?\nSQL: SELECT COUNT(*) AS record_count FROM customers\n\nQuestion: Get all columns from customers\nSQL: SELECT * FROM customers LIMIT 5\n\nQuestion: Get record from customers by customer_id\nSQL: SELECT * FROM customers WHERE customer_id = 1\n\nQuestion: Show some data from customers and orders\nSQL: SELECT customers.first_name, orders.customer_id\nFROM customers\nINNER JOIN orders ON customers.customer_id = orders.customer_id\nLIMIT 5\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: Get me count of orders by customers along with their name'}]
2025-04-10 01:15:51,814 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-10 01:15:51,815 - DEBUG - [llm_engine.py:87] - [SQL_GEN] Prompt: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief ... (truncated)
2025-04-10 01:15:51,816 - DEBUG - [llm_engine.py:96] - [SQL_GEN] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:15:52,095 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:15:52] "GET /api/query/progress/f5596aa7-98c2-4f59-b7e3-48d20dc30ede HTTP/1.1" 200 -
2025-04-10 01:15:52,318 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:15:52] "GET /api/query/progress/f5596aa7-98c2-4f59-b7e3-48d20dc30ede HTTP/1.1" 200 -
2025-04-10 01:15:53,139 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:15:53] "GET /api/query/progress/f5596aa7-98c2-4f59-b7e3-48d20dc30ede HTTP/1.1" 200 -
2025-04-10 01:15:53,388 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:15:53] "GET /api/query/progress/f5596aa7-98c2-4f59-b7e3-48d20dc30ede HTTP/1.1" 200 -
2025-04-10 01:15:53,782 - DEBUG - [llm_engine.py:107] - [SQL_GEN] Model response received in 1.96s
2025-04-10 01:15:53,784 - DEBUG - [llm_engine.py:116] - [SQL_GEN] Raw model response: 'Here's a query that will get the count of orders for each customer along with their first and last names. It uses an INNER JOIN between customers and orders, groups by customer, and counts orders.

```sql
SELECT 
    customers.first_name, 
    customers.last_name, 
    COUNT(orders.order_id) AS order_count
FROM customers
INNER JOIN orders ON customers.customer_id = orders.customer_id
GROUP BY customers.customer_id, customers.first_name, customers.last_name
```
'
2025-04-10 01:15:53,787 - INFO - [llm_engine.py:119] - [SQL_GEN] Completion generation completed in 1.97s
2025-04-10 01:15:53,791 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:15:53,794 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-10 01:15:53,796 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-10 01:15:53,798 - INFO - [azure_client.py:171] - Extracted SQL query (255 chars) and explanation (196 chars)
2025-04-10 01:15:53,800 - INFO - [azure_client.py:124] - Generated SQL: SELECT 
    customers.first_name, 
    customers.last_name, 
    COUNT(orders.order_id) AS order_count
FROM customers
INNER JOIN orders ON customers.customer_id = orders.customer_id
GROUP BY customers.customer_id, customers.first_name, customers.last_name
2025-04-10 01:15:53,809 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:15:53] "GET /api/query/progress/f5596aa7-98c2-4f59-b7e3-48d20dc30ede HTTP/1.1" 200 -
2025-04-10 01:15:53,810 - INFO - [azure_client.py:132] - SQL generation completed in 2.00s
2025-04-10 01:15:53,813 - INFO - [database.py:65] - Executing SQL query: SELECT 
    customers.first_name, 
    customers.last_name, 
    COUNT(orders.order_id) AS order_count
FROM customers
INNER JOIN orders ON customers.customer_id = orders.customer_id
GROUP BY customers.customer_id, customers.first_name, customers.last_name
2025-04-10 01:15:53,816 - DEBUG - [database.py:76] - Query execution started
2025-04-10 01:15:53,817 - DEBUG - [database.py:81] - Query execution completed in 0.00s
2025-04-10 01:15:53,820 - INFO - [database.py:86] - Query returned 5 rows with 3 columns
2025-04-10 01:15:53,825 - DEBUG - [database.py:92] - Sample data (first 3 rows):
  first_name last_name  order_count
0       John       Doe            2
1       Jane     Smith            2
2      Alice   Johnson            2
2025-04-10 01:15:53,825 - INFO - [database.py:95] - Query processing completed in 0.01s
2025-04-10 01:15:53,828 - INFO - [sql_generator.py:348] - Analyzing query results for dashboard potential
2025-04-10 01:15:53,829 - INFO - [azure_client.py:197] - Dashboard analysis started for query: 'Get me count of orders by customers along with their name'
2025-04-10 01:15:53,830 - INFO - [llm_engine.py:56] - [DASHBOARD_ANALYSIS] Completion generation started
2025-04-10 01:15:53,831 - DEBUG - [llm_engine.py:87] - [DASHBOARD_ANALYSIS] Prompt: [{'role': 'system', 'content': 'You are a data visualization expert. Analyze the given query results and determine if they\'re suitable for a dashboard visualization.\n\nYour task is to:\n1. Analyze the columns and data\n2. Determine if the data is suitable for visualization (has numeric values and categorical data)\n3. If suitable, recommend the best chart type (bar, line, pie, etc.)\n4. Identify the best columns for X and Y axes (or equivalent based on chart type). Only one column for each axi... (truncated)
2025-04-10 01:15:53,831 - DEBUG - [llm_engine.py:96] - [DASHBOARD_ANALYSIS] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:15:54,629 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:15:54] "GET /api/query/progress/f5596aa7-98c2-4f59-b7e3-48d20dc30ede HTTP/1.1" 200 -
2025-04-10 01:15:54,878 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:15:54] "GET /api/query/progress/f5596aa7-98c2-4f59-b7e3-48d20dc30ede HTTP/1.1" 200 -
2025-04-10 01:15:55,307 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:15:55] "GET /api/query/progress/f5596aa7-98c2-4f59-b7e3-48d20dc30ede HTTP/1.1" 200 -
2025-04-10 01:15:56,004 - DEBUG - [llm_engine.py:107] - [DASHBOARD_ANALYSIS] Model response received in 2.17s
2025-04-10 01:15:56,005 - DEBUG - [llm_engine.py:116] - [DASHBOARD_ANALYSIS] Raw model response: '{
  "is_suitable": true,
  "reason": "The data includes categorical customer names and a numeric order count, making it well-suited for visualization comparing order counts across customers.",
  "chart_type": "bar",
  "x_axis": {
    "column": "first_name",
    "label": "Customer First Name"
  },
  "y_axis": {
    "column": "order_count",
    "label": "Number of Orders"
  },
  "title": "Number of Orders per Customer"
}'
2025-04-10 01:15:56,006 - INFO - [llm_engine.py:119] - [DASHBOARD_ANALYSIS] Completion generation completed in 2.18s
2025-04-10 01:15:56,007 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:15:56,008 - INFO - [azure_client.py:255] - Dashboard analysis results: suitable=True
2025-04-10 01:15:56,010 - INFO - [azure_client.py:264] - Dashboard analysis completed in 2.18s
2025-04-10 01:15:56,012 - INFO - [sql_generator.py:366] - Dashboard analysis completed: suitable=True
2025-04-10 01:15:56,013 - INFO - [sql_generator.py:442] - SQL generation completed in 13.25s
2025-04-10 01:15:56,015 - INFO - [sql_generator.py:125] - Query processing completed in 13.26s
2025-04-10 01:15:56,106 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:15:56] "GET /api/query/progress/f5596aa7-98c2-4f59-b7e3-48d20dc30ede HTTP/1.1" 200 -
2025-04-10 01:18:04,745 - INFO - [app.py:280] - Feedback received for query: 'Get me count of orders by customers along with the...' - Rating: 1
2025-04-10 01:18:04,745 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-10 01:18:04,746 - INFO - [feedback_manager.py:52] - Attempting database connection
2025-04-10 01:18:04,747 - INFO - [feedback_manager.py:56] - Database connection established in 0.00s
2025-04-10 01:18:04,748 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-10 01:18:04,751 - DEBUG - [milvus_client.py:728] - Created new connection using: 19dddaa544594f54997a640017460b44
2025-04-10 01:18:04,751 - INFO - [vector_store.py:42] - Vector database connection established in 0.00s
2025-04-10 01:18:04,752 - INFO - [feedback_manager.py:77] - Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-10 01:18:09,698 - INFO - [feedback_manager.py:80] - Embedding model loaded in 4.95s
2025-04-10 01:18:09,725 - DEBUG - [feedback_manager.py:105] - Generated embedding in 0.03s with shape (384,)
2025-04-10 01:18:09,766 - DEBUG - [vector_store.py:131] - Inserted embedding for feedback_id 6 into collection query_embeddings
2025-04-10 01:18:09,767 - INFO - [feedback_manager.py:203] - Saved feedback for query: 'Get me count of orders by customers along with the...' with rating 1
2025-04-10 01:18:09,773 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:18:09] "POST /api/feedback HTTP/1.1" 200 -
2025-04-10 01:18:14,184 - DEBUG - [app.py:520] - Samples management page requested
2025-04-10 01:18:14,198 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:18:14] "GET /samples HTTP/1.1" 200 -
2025-04-10 01:18:14,542 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:18:14] "[36mGET /static/js/samples.js HTTP/1.1[0m" 304 -
2025-04-10 01:18:14,790 - DEBUG - [app.py:152] - Table suggestions requested for workspace: dfd, query: ''
2025-04-10 01:18:14,792 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:18:14] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-10 01:18:14,853 - DEBUG - [app.py:528] - Workspaces list requested
2025-04-10 01:18:14,856 - DEBUG - [app.py:537] - Tables list requested for workspace: 
2025-04-10 01:18:14,859 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:18:14] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-10 01:18:14,862 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:18:14] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-10 01:18:14,871 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-10 01:18:14,872 - INFO - [feedback_manager.py:52] - Attempting database connection
2025-04-10 01:18:14,873 - INFO - [feedback_manager.py:56] - Database connection established in 0.00s
2025-04-10 01:18:14,874 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-10 01:18:14,880 - DEBUG - [milvus_client.py:728] - Created new connection using: 67e7ebfbd12a48d38f77a579fdf82f14
2025-04-10 01:18:14,880 - INFO - [vector_store.py:42] - Vector database connection established in 0.01s
2025-04-10 01:18:14,883 - INFO - [feedback_manager.py:521] - Retrieved 3 samples (page 1, limit 10)
2025-04-10 01:18:14,884 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:18:14] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-10 01:18:19,914 - DEBUG - [app.py:84] - Main page requested
2025-04-10 01:18:19,917 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:18:19] "GET / HTTP/1.1" 200 -
2025-04-10 01:18:20,267 - DEBUG - [app.py:152] - Table suggestions requested for workspace: dfd, query: ''
2025-04-10 01:18:20,268 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:18:20] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-10 01:18:23,328 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:18:23] "GET /admin/ HTTP/1.1" 200 -
2025-04-10 01:18:23,646 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:18:23] "[36mGET /static/js/admin/dashboard.js HTTP/1.1[0m" 304 -
2025-04-10 01:18:23,898 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:18:23] "GET /admin/api/dashboard/stats HTTP/1.1" 200 -
2025-04-10 01:18:23,946 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:18:23] "GET /admin/api/audit-logs?limit=5 HTTP/1.1" 200 -
2025-04-10 01:18:26,916 - DEBUG - [app.py:520] - Samples management page requested
2025-04-10 01:18:26,920 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:18:26] "GET /samples HTTP/1.1" 200 -
2025-04-10 01:18:27,257 - DEBUG - [app.py:152] - Table suggestions requested for workspace: dfd, query: ''
2025-04-10 01:18:27,257 - DEBUG - [app.py:528] - Workspaces list requested
2025-04-10 01:18:27,259 - DEBUG - [app.py:537] - Tables list requested for workspace: 
2025-04-10 01:18:27,260 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:18:27] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-10 01:18:27,263 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:18:27] "GET /api/workspaces HTTP/1.1" 200 -
2025-04-10 01:18:27,265 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:18:27] "GET /api/tables?workspace= HTTP/1.1" 200 -
2025-04-10 01:18:27,269 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-10 01:18:27,271 - INFO - [feedback_manager.py:52] - Attempting database connection
2025-04-10 01:18:27,272 - INFO - [feedback_manager.py:56] - Database connection established in 0.00s
2025-04-10 01:18:27,272 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-10 01:18:27,276 - DEBUG - [milvus_client.py:728] - Created new connection using: 525d16b6f7984d52b0a857fdf51e61f1
2025-04-10 01:18:27,276 - INFO - [vector_store.py:42] - Vector database connection established in 0.00s
2025-04-10 01:18:27,279 - INFO - [feedback_manager.py:521] - Retrieved 3 samples (page 1, limit 10)
2025-04-10 01:18:27,280 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:18:27] "GET /api/samples?page=1&limit=10 HTTP/1.1" 200 -
2025-04-10 01:18:28,509 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-10 01:18:28,511 - INFO - [feedback_manager.py:52] - Attempting database connection
2025-04-10 01:18:28,512 - INFO - [feedback_manager.py:56] - Database connection established in 0.00s
2025-04-10 01:18:28,513 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-10 01:18:28,520 - DEBUG - [milvus_client.py:728] - Created new connection using: 45e873008c234372b91c8b2996a49dc3
2025-04-10 01:18:28,520 - INFO - [vector_store.py:42] - Vector database connection established in 0.01s
2025-04-10 01:18:28,523 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:18:28] "GET /api/samples/6 HTTP/1.1" 200 -
2025-04-10 01:18:28,823 - DEBUG - [app.py:537] - Tables list requested for workspace: dfd
2025-04-10 01:18:28,824 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:18:28] "GET /api/tables?workspace=dfd HTTP/1.1" 200 -
2025-04-10 01:18:32,713 - DEBUG - [app.py:84] - Main page requested
2025-04-10 01:18:32,717 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:18:32] "GET / HTTP/1.1" 200 -
2025-04-10 01:18:33,063 - DEBUG - [app.py:152] - Table suggestions requested for workspace: dfd, query: ''
2025-04-10 01:18:33,064 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:18:33] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-10 01:18:34,564 - INFO - [sql_generator.py:37] - Processing query: 'Get me count of orders by customers along with their name'
2025-04-10 01:18:34,565 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:18:34] "POST /api/query HTTP/1.1" 200 -
2025-04-10 01:18:34,565 - INFO - [intent_agent.py:27] - Intent detection started for query: 'Get me count of orders by customers along with their name'
2025-04-10 01:18:34,567 - INFO - [intent_agent.py:38] - Using default intent 'data_retrieval' without calling LLM
2025-04-10 01:18:34,569 - INFO - [intent_agent.py:41] - Intent detection completed in 0.00s
2025-04-10 01:18:34,569 - INFO - [sql_generator.py:45] - Detected intent: data_retrieval
2025-04-10 01:18:34,570 - INFO - [sql_generator.py:141] - Starting SQL generation process
2025-04-10 01:18:34,570 - INFO - [database.py:44] - Attempting database connection
2025-04-10 01:18:34,571 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-10 01:18:34,572 - INFO - [table_agent.py:28] - Table selection started for query: 'Get me count of orders by customers along with their name'
2025-04-10 01:18:34,572 - INFO - [table_agent.py:34] - Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-10 01:18:34,573 - INFO - [table_agent.py:64] - Sending request to AI model for table selection
2025-04-10 01:18:34,573 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-10 01:18:34,574 - DEBUG - [llm_engine.py:87] - [TABLE] Prompt: [{'role': 'system', 'content': "You are a table selection agent for a Text-to-SQL system.\nYour job is to identify which database tables are most relevant to a user query.\nYou will be provided with table names and their descriptions.\nReturn ONLY the names of relevant tables, separated by commas. Be selective and choose\nonly the tables that are directly needed to answer the query. If you're unsure,\ninclude tables that might be related. Return only table names in your response."}, {'role': 'us... (truncated)
2025-04-10 01:18:34,574 - DEBUG - [llm_engine.py:96] - [TABLE] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:18:35,355 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:18:35] "GET /api/query/progress/08e8ad2f-e361-4b72-bb20-efa367d24af0 HTTP/1.1" 200 -
2025-04-10 01:18:35,598 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:18:35] "GET /api/query/progress/08e8ad2f-e361-4b72-bb20-efa367d24af0 HTTP/1.1" 200 -
2025-04-10 01:18:36,353 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:18:36] "GET /api/query/progress/08e8ad2f-e361-4b72-bb20-efa367d24af0 HTTP/1.1" 200 -
2025-04-10 01:18:36,492 - DEBUG - [llm_engine.py:107] - [TABLE] Model response received in 1.92s
2025-04-10 01:18:36,493 - DEBUG - [llm_engine.py:116] - [TABLE] Raw model response: 'customers, orders'
2025-04-10 01:18:36,495 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 1.92s
2025-04-10 01:18:36,495 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:18:36,496 - INFO - [table_agent.py:69] - Raw model response: 'customers, orders'
2025-04-10 01:18:36,497 - INFO - [table_agent.py:90] - Table selection completed in 1.93s. Selected: customers, orders
2025-04-10 01:18:36,498 - INFO - [column_agent.py:29] - Column pruning started for query: 'Get me count of orders by customers along with their name'
2025-04-10 01:18:36,498 - INFO - [column_agent.py:30] - Processing tables: customers, orders
2025-04-10 01:18:36,499 - INFO - [column_agent.py:94] - Sending request to AI model for column selection
2025-04-10 01:18:36,501 - INFO - [llm_engine.py:56] - [COLUMN] Completion generation started
2025-04-10 01:18:36,501 - DEBUG - [llm_engine.py:87] - [COLUMN] Prompt: [{'role': 'system', 'content': 'You are a column selection agent for a Text-to-SQL system.\nYour job is to identify which columns from the provided tables are most relevant to a user query.\nFor each table, select only the columns that will be needed to answer the query.\nReturn your answer as a JSON object with table names as keys and arrays of column names as values.\nAlways include primary key columns even if not directly mentioned in the query.\nConsider columns that might be needed for:\n1.... (truncated)
2025-04-10 01:18:36,502 - DEBUG - [llm_engine.py:96] - [COLUMN] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:18:37,611 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:18:37] "GET /api/query/progress/08e8ad2f-e361-4b72-bb20-efa367d24af0 HTTP/1.1" 200 -
2025-04-10 01:18:37,944 - DEBUG - [llm_engine.py:107] - [COLUMN] Model response received in 1.44s
2025-04-10 01:18:37,944 - DEBUG - [llm_engine.py:116] - [COLUMN] Raw model response: '{
  "customers": ["customer_id", "first_name", "last_name"],
  "orders": ["order_id", "customer_id"]
}'
2025-04-10 01:18:37,945 - INFO - [llm_engine.py:119] - [COLUMN] Completion generation completed in 1.44s
2025-04-10 01:18:37,945 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:18:37,945 - INFO - [column_agent.py:139] - Parsing column selection from model response
2025-04-10 01:18:37,946 - INFO - [column_agent.py:149] - Parsed column selection JSON: {"customers": ["customer_id", "first_name", "last_name"], "orders": ["order_id", "customer_id"]}
2025-04-10 01:18:37,946 - INFO - [column_agent.py:111] - Table 'customers': Pruned 8 columns, kept 3/11
2025-04-10 01:18:37,947 - INFO - [column_agent.py:111] - Table 'orders': Pruned 3 columns, kept 2/5
2025-04-10 01:18:37,948 - INFO - [column_agent.py:197] - Building pruned schema
2025-04-10 01:18:37,948 - INFO - [column_agent.py:226] - Built pruned schema (439 chars)
2025-04-10 01:18:37,949 - INFO - [column_agent.py:120] - Column pruning completed in 1.45s
2025-04-10 01:18:37,950 - INFO - [sql_generator.py:237] - Found 1 join conditions for the relevant tables
2025-04-10 01:18:37,950 - INFO - [feedback_manager.py:265] - Stage 1: Vector search for 'Get me count of orders by customers along with the...'
2025-04-10 01:18:37,973 - DEBUG - [feedback_manager.py:105] - Generated embedding in 0.02s with shape (384,)
2025-04-10 01:18:37,975 - ERROR - [vector_store.py:215] - Error searching similar vectors in collection query_embeddings: argument of type 'NoneType' is not iterable
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/vector_store.py", line 176, in search_similar
    if "id" not in output_fields and not any(f.lower() == 'id' for f in output_fields):
       ^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: argument of type 'NoneType' is not iterable
2025-04-10 01:18:37,976 - WARNING - [feedback_manager.py:288] - No candidates found from vector search, falling back to text-based search
2025-04-10 01:18:37,977 - INFO - [feedback_manager.py:402] - Found 1 similar queries using text-based search for 'Get me count of orders by customers along with the...'
2025-04-10 01:18:37,977 - INFO - [sql_generator.py:280] - Found 1 similar queries with reranking
2025-04-10 01:18:37,978 - INFO - [sql_generator.py:302] - Added similar query #1 from feedback (score: 0.0000): Get me count of orders by customers along with the...
2025-04-10 01:18:37,978 - INFO - [azure_client.py:35] - SQL generation started for query: 'Get me count of orders by customers along with their name'
2025-04-10 01:18:37,978 - INFO - [azure_client.py:69] - Including schema information (439 chars)
2025-04-10 01:18:37,979 - INFO - [azure_client.py:76] - Including 1 join conditions
2025-04-10 01:18:37,979 - INFO - [azure_client.py:97] - Including 1 SQL examples from feedback similarity search
2025-04-10 01:18:37,980 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER): Unique customer identifier, first_name (TEXT): Customer's first name, last_name (TEXT): Customer's last name\nPrimary Key(s): customer_id\n\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER): Unique order identifier, customer_id (INTEGER): Reference to customer who placed the order\nPrimary Key(s): order_id\n"}, {'role': 'user', 'content': 'Use the following pre-defined join conditions when joining these tables:\n- When joining customers with orders, use: INNER JOIN orders ON customers.customer_id = orders.customer_id\n'}, {'role': 'user', 'content': 'Here are some similar queries that were previously successful:\nQuestion: Get me count of orders by customers along with their name\nSQL: SELECT \n    customers.first_name, \n    customers.last_name, \n    COUNT(orders.order_id) AS order_count\nFROM customers\nINNER JOIN orders ON customers.customer_id = orders.customer_id\nGROUP BY customers.customer_id, customers.first_name, customers.last_name\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: Get me count of orders by customers along with their name'}]
2025-04-10 01:18:37,980 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-10 01:18:37,980 - DEBUG - [llm_engine.py:87] - [SQL_GEN] Prompt: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief ... (truncated)
2025-04-10 01:18:37,981 - DEBUG - [llm_engine.py:96] - [SQL_GEN] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:18:38,259 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:18:38] "GET /api/query/progress/08e8ad2f-e361-4b72-bb20-efa367d24af0 HTTP/1.1" 200 -
2025-04-10 01:18:39,522 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:18:39] "GET /api/query/progress/08e8ad2f-e361-4b72-bb20-efa367d24af0 HTTP/1.1" 200 -
2025-04-10 01:18:39,780 - DEBUG - [llm_engine.py:107] - [SQL_GEN] Model response received in 1.80s
2025-04-10 01:18:39,781 - DEBUG - [llm_engine.py:116] - [SQL_GEN] Raw model response: 'Here's a query that will retrieve the count of orders placed by each customer along with their first and last names:

```sql
SELECT 
    customers.first_name, 
    customers.last_name, 
    COUNT(orders.order_id) AS order_count
FROM customers
INNER JOIN orders ON customers.customer_id = orders.customer_id
GROUP BY customers.customer_id, customers.first_name, customers.last_name
```'
2025-04-10 01:18:39,781 - INFO - [llm_engine.py:119] - [SQL_GEN] Completion generation completed in 1.80s
2025-04-10 01:18:39,782 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:18:39,783 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-10 01:18:39,783 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-10 01:18:39,783 - INFO - [azure_client.py:171] - Extracted SQL query (255 chars) and explanation (116 chars)
2025-04-10 01:18:39,784 - INFO - [azure_client.py:124] - Generated SQL: SELECT 
    customers.first_name, 
    customers.last_name, 
    COUNT(orders.order_id) AS order_count
FROM customers
INNER JOIN orders ON customers.customer_id = orders.customer_id
GROUP BY customers.customer_id, customers.first_name, customers.last_name
2025-04-10 01:18:39,785 - INFO - [azure_client.py:132] - SQL generation completed in 1.81s
2025-04-10 01:18:39,786 - INFO - [database.py:65] - Executing SQL query: SELECT 
    customers.first_name, 
    customers.last_name, 
    COUNT(orders.order_id) AS order_count
FROM customers
INNER JOIN orders ON customers.customer_id = orders.customer_id
GROUP BY customers.customer_id, customers.first_name, customers.last_name
2025-04-10 01:18:39,787 - DEBUG - [database.py:76] - Query execution started
2025-04-10 01:18:39,787 - DEBUG - [database.py:81] - Query execution completed in 0.00s
2025-04-10 01:18:39,788 - INFO - [database.py:86] - Query returned 5 rows with 3 columns
2025-04-10 01:18:39,789 - DEBUG - [database.py:92] - Sample data (first 3 rows):
  first_name last_name  order_count
0       John       Doe            2
1       Jane     Smith            2
2      Alice   Johnson            2
2025-04-10 01:18:39,790 - INFO - [database.py:95] - Query processing completed in 0.00s
2025-04-10 01:18:39,791 - INFO - [sql_generator.py:348] - Analyzing query results for dashboard potential
2025-04-10 01:18:39,792 - INFO - [azure_client.py:197] - Dashboard analysis started for query: 'Get me count of orders by customers along with their name'
2025-04-10 01:18:39,792 - INFO - [llm_engine.py:56] - [DASHBOARD_ANALYSIS] Completion generation started
2025-04-10 01:18:39,793 - DEBUG - [llm_engine.py:87] - [DASHBOARD_ANALYSIS] Prompt: [{'role': 'system', 'content': 'You are a data visualization expert. Analyze the given query results and determine if they\'re suitable for a dashboard visualization.\n\nYour task is to:\n1. Analyze the columns and data\n2. Determine if the data is suitable for visualization (has numeric values and categorical data)\n3. If suitable, recommend the best chart type (bar, line, pie, etc.)\n4. Identify the best columns for X and Y axes (or equivalent based on chart type). Only one column for each axi... (truncated)
2025-04-10 01:18:39,793 - DEBUG - [llm_engine.py:96] - [DASHBOARD_ANALYSIS] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:18:40,171 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:18:40] "GET /api/query/progress/08e8ad2f-e361-4b72-bb20-efa367d24af0 HTTP/1.1" 200 -
2025-04-10 01:18:43,357 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:18:43] "GET /api/query/progress/08e8ad2f-e361-4b72-bb20-efa367d24af0 HTTP/1.1" 200 -
2025-04-10 01:18:43,743 - DEBUG - [llm_engine.py:107] - [DASHBOARD_ANALYSIS] Model response received in 3.95s
2025-04-10 01:18:43,743 - DEBUG - [llm_engine.py:116] - [DASHBOARD_ANALYSIS] Raw model response: '{
  "is_suitable": true,
  "reason": "The data includes categorical customer names and numeric order counts, making it suitable for comparing order volumes across customers.",
  "chart_type": "bar",
  "x_axis": {
    "column": "first_name",
    "label": "Customer First Name"
  },
  "y_axis": {
    "column": "order_count",
    "label": "Number of Orders"
  },
  "title": "Number of Orders per Customer"
}'
2025-04-10 01:18:43,744 - INFO - [llm_engine.py:119] - [DASHBOARD_ANALYSIS] Completion generation completed in 3.95s
2025-04-10 01:18:43,744 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:18:43,745 - INFO - [azure_client.py:255] - Dashboard analysis results: suitable=True
2025-04-10 01:18:43,745 - INFO - [azure_client.py:264] - Dashboard analysis completed in 3.95s
2025-04-10 01:18:43,746 - INFO - [sql_generator.py:366] - Dashboard analysis completed: suitable=True
2025-04-10 01:18:43,746 - INFO - [sql_generator.py:442] - SQL generation completed in 9.18s
2025-04-10 01:18:43,747 - INFO - [sql_generator.py:125] - Query processing completed in 9.18s
2025-04-10 01:18:44,043 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:18:44] "GET /api/query/progress/08e8ad2f-e361-4b72-bb20-efa367d24af0 HTTP/1.1" 200 -
2025-04-10 01:19:40,820 - INFO - [sql_generator.py:37] - Processing query: 'Get me count of orders by customers along with their name'
2025-04-10 01:19:40,821 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:19:40] "POST /api/query HTTP/1.1" 200 -
2025-04-10 01:19:40,821 - INFO - [intent_agent.py:27] - Intent detection started for query: 'Get me count of orders by customers along with their name'
2025-04-10 01:19:40,823 - INFO - [intent_agent.py:38] - Using default intent 'data_retrieval' without calling LLM
2025-04-10 01:19:40,823 - INFO - [intent_agent.py:41] - Intent detection completed in 0.00s
2025-04-10 01:19:40,824 - INFO - [sql_generator.py:45] - Detected intent: data_retrieval
2025-04-10 01:19:40,824 - INFO - [sql_generator.py:141] - Starting SQL generation process
2025-04-10 01:19:40,825 - INFO - [database.py:44] - Attempting database connection
2025-04-10 01:19:40,826 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-10 01:19:40,827 - INFO - [table_agent.py:28] - Table selection started for query: 'Get me count of orders by customers along with their name'
2025-04-10 01:19:40,827 - INFO - [table_agent.py:34] - Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-10 01:19:40,828 - INFO - [table_agent.py:64] - Sending request to AI model for table selection
2025-04-10 01:19:40,829 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-10 01:19:40,829 - DEBUG - [llm_engine.py:87] - [TABLE] Prompt: [{'role': 'system', 'content': "You are a table selection agent for a Text-to-SQL system.\nYour job is to identify which database tables are most relevant to a user query.\nYou will be provided with table names and their descriptions.\nReturn ONLY the names of relevant tables, separated by commas. Be selective and choose\nonly the tables that are directly needed to answer the query. If you're unsure,\ninclude tables that might be related. Return only table names in your response."}, {'role': 'us... (truncated)
2025-04-10 01:19:40,830 - DEBUG - [llm_engine.py:96] - [TABLE] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:19:41,314 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:19:41] "GET /api/query/progress/17e7a97c-c0c5-48c1-851e-083b3ddb3649 HTTP/1.1" 200 -
2025-04-10 01:19:42,094 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:19:42] "GET /api/query/progress/17e7a97c-c0c5-48c1-851e-083b3ddb3649 HTTP/1.1" 200 -
2025-04-10 01:19:42,332 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:19:42] "GET /api/query/progress/17e7a97c-c0c5-48c1-851e-083b3ddb3649 HTTP/1.1" 200 -
2025-04-10 01:19:42,731 - DEBUG - [llm_engine.py:107] - [TABLE] Model response received in 1.90s
2025-04-10 01:19:42,731 - DEBUG - [llm_engine.py:116] - [TABLE] Raw model response: 'customers, orders'
2025-04-10 01:19:42,731 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 1.90s
2025-04-10 01:19:42,733 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:19:42,734 - INFO - [table_agent.py:69] - Raw model response: 'customers, orders'
2025-04-10 01:19:42,736 - INFO - [table_agent.py:90] - Table selection completed in 1.91s. Selected: customers, orders
2025-04-10 01:19:42,737 - INFO - [column_agent.py:29] - Column pruning started for query: 'Get me count of orders by customers along with their name'
2025-04-10 01:19:42,739 - INFO - [column_agent.py:30] - Processing tables: customers, orders
2025-04-10 01:19:42,741 - INFO - [column_agent.py:94] - Sending request to AI model for column selection
2025-04-10 01:19:42,742 - INFO - [llm_engine.py:56] - [COLUMN] Completion generation started
2025-04-10 01:19:42,744 - DEBUG - [llm_engine.py:87] - [COLUMN] Prompt: [{'role': 'system', 'content': 'You are a column selection agent for a Text-to-SQL system.\nYour job is to identify which columns from the provided tables are most relevant to a user query.\nFor each table, select only the columns that will be needed to answer the query.\nReturn your answer as a JSON object with table names as keys and arrays of column names as values.\nAlways include primary key columns even if not directly mentioned in the query.\nConsider columns that might be needed for:\n1.... (truncated)
2025-04-10 01:19:42,751 - DEBUG - [llm_engine.py:96] - [COLUMN] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:19:42,750 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:19:42] "GET /api/query/progress/17e7a97c-c0c5-48c1-851e-083b3ddb3649 HTTP/1.1" 200 -
2025-04-10 01:19:43,519 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:19:43] "GET /api/query/progress/17e7a97c-c0c5-48c1-851e-083b3ddb3649 HTTP/1.1" 200 -
2025-04-10 01:19:43,769 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:19:43] "GET /api/query/progress/17e7a97c-c0c5-48c1-851e-083b3ddb3649 HTTP/1.1" 200 -
2025-04-10 01:19:44,183 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:19:44] "GET /api/query/progress/17e7a97c-c0c5-48c1-851e-083b3ddb3649 HTTP/1.1" 200 -
2025-04-10 01:19:44,817 - DEBUG - [llm_engine.py:107] - [COLUMN] Model response received in 2.06s
2025-04-10 01:19:44,817 - DEBUG - [llm_engine.py:116] - [COLUMN] Raw model response: '{
  "customers": ["customer_id", "first_name", "last_name"],
  "orders": ["order_id", "customer_id"]
}'
2025-04-10 01:19:44,818 - INFO - [llm_engine.py:119] - [COLUMN] Completion generation completed in 2.08s
2025-04-10 01:19:44,819 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:19:44,820 - INFO - [column_agent.py:139] - Parsing column selection from model response
2025-04-10 01:19:44,821 - INFO - [column_agent.py:149] - Parsed column selection JSON: {"customers": ["customer_id", "first_name", "last_name"], "orders": ["order_id", "customer_id"]}
2025-04-10 01:19:44,823 - INFO - [column_agent.py:111] - Table 'customers': Pruned 8 columns, kept 3/11
2025-04-10 01:19:44,824 - INFO - [column_agent.py:111] - Table 'orders': Pruned 3 columns, kept 2/5
2025-04-10 01:19:44,825 - INFO - [column_agent.py:197] - Building pruned schema
2025-04-10 01:19:44,826 - INFO - [column_agent.py:226] - Built pruned schema (439 chars)
2025-04-10 01:19:44,827 - INFO - [column_agent.py:120] - Column pruning completed in 2.09s
2025-04-10 01:19:44,829 - INFO - [sql_generator.py:237] - Found 1 join conditions for the relevant tables
2025-04-10 01:19:44,830 - INFO - [feedback_manager.py:265] - Stage 1: Vector search for 'Get me count of orders by customers along with the...'
2025-04-10 01:19:44,874 - DEBUG - [feedback_manager.py:105] - Generated embedding in 0.04s with shape (384,)
2025-04-10 01:19:44,876 - ERROR - [vector_store.py:215] - Error searching similar vectors in collection query_embeddings: argument of type 'NoneType' is not iterable
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/vector_store.py", line 176, in search_similar
    if "id" not in output_fields and not any(f.lower() == 'id' for f in output_fields):
       ^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: argument of type 'NoneType' is not iterable
2025-04-10 01:19:44,876 - WARNING - [feedback_manager.py:288] - No candidates found from vector search, falling back to text-based search
2025-04-10 01:19:44,877 - INFO - [feedback_manager.py:402] - Found 1 similar queries using text-based search for 'Get me count of orders by customers along with the...'
2025-04-10 01:19:44,878 - INFO - [sql_generator.py:280] - Found 1 similar queries with reranking
2025-04-10 01:19:44,878 - INFO - [sql_generator.py:302] - Added similar query #1 from feedback (score: 0.0000): Get me count of orders by customers along with the...
2025-04-10 01:19:44,879 - INFO - [azure_client.py:35] - SQL generation started for query: 'Get me count of orders by customers along with their name'
2025-04-10 01:19:44,879 - INFO - [azure_client.py:69] - Including schema information (439 chars)
2025-04-10 01:19:44,880 - INFO - [azure_client.py:76] - Including 1 join conditions
2025-04-10 01:19:44,880 - INFO - [azure_client.py:97] - Including 1 SQL examples from feedback similarity search
2025-04-10 01:19:44,881 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER): Unique customer identifier, first_name (TEXT): Customer's first name, last_name (TEXT): Customer's last name\nPrimary Key(s): customer_id\n\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER): Unique order identifier, customer_id (INTEGER): Reference to customer who placed the order\nPrimary Key(s): order_id\n"}, {'role': 'user', 'content': 'Use the following pre-defined join conditions when joining these tables:\n- When joining customers with orders, use: INNER JOIN orders ON customers.customer_id = orders.customer_id\n'}, {'role': 'user', 'content': 'Here are some similar queries that were previously successful:\nQuestion: Get me count of orders by customers along with their name\nSQL: SELECT \n    customers.first_name, \n    customers.last_name, \n    COUNT(orders.order_id) AS order_count\nFROM customers\nINNER JOIN orders ON customers.customer_id = orders.customer_id\nGROUP BY customers.customer_id, customers.first_name, customers.last_name\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: Get me count of orders by customers along with their name'}]
2025-04-10 01:19:44,881 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-10 01:19:44,881 - DEBUG - [llm_engine.py:87] - [SQL_GEN] Prompt: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief ... (truncated)
2025-04-10 01:19:44,882 - DEBUG - [llm_engine.py:96] - [SQL_GEN] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:19:44,956 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:19:44] "GET /api/query/progress/17e7a97c-c0c5-48c1-851e-083b3ddb3649 HTTP/1.1" 200 -
2025-04-10 01:19:45,208 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:19:45] "GET /api/query/progress/17e7a97c-c0c5-48c1-851e-083b3ddb3649 HTTP/1.1" 200 -
2025-04-10 01:19:45,604 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:19:45] "GET /api/query/progress/17e7a97c-c0c5-48c1-851e-083b3ddb3649 HTTP/1.1" 200 -
2025-04-10 01:19:46,379 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:19:46] "GET /api/query/progress/17e7a97c-c0c5-48c1-851e-083b3ddb3649 HTTP/1.1" 200 -
2025-04-10 01:19:46,622 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:19:46] "GET /api/query/progress/17e7a97c-c0c5-48c1-851e-083b3ddb3649 HTTP/1.1" 200 -
2025-04-10 01:19:47,038 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:19:47] "GET /api/query/progress/17e7a97c-c0c5-48c1-851e-083b3ddb3649 HTTP/1.1" 200 -
2025-04-10 01:19:47,811 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:19:47] "GET /api/query/progress/17e7a97c-c0c5-48c1-851e-083b3ddb3649 HTTP/1.1" 200 -
2025-04-10 01:19:48,089 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:19:48] "GET /api/query/progress/17e7a97c-c0c5-48c1-851e-083b3ddb3649 HTTP/1.1" 200 -
2025-04-10 01:19:48,507 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:19:48] "GET /api/query/progress/17e7a97c-c0c5-48c1-851e-083b3ddb3649 HTTP/1.1" 200 -
2025-04-10 01:19:51,146 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:19:51] "GET /api/query/progress/17e7a97c-c0c5-48c1-851e-083b3ddb3649 HTTP/1.1" 200 -
2025-04-10 01:19:51,397 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:19:51] "GET /api/query/progress/17e7a97c-c0c5-48c1-851e-083b3ddb3649 HTTP/1.1" 200 -
2025-04-10 01:19:51,845 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:19:51] "GET /api/query/progress/17e7a97c-c0c5-48c1-851e-083b3ddb3649 HTTP/1.1" 200 -
2025-04-10 01:19:52,639 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:19:52] "GET /api/query/progress/17e7a97c-c0c5-48c1-851e-083b3ddb3649 HTTP/1.1" 200 -
2025-04-10 01:19:52,888 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:19:52] "GET /api/query/progress/17e7a97c-c0c5-48c1-851e-083b3ddb3649 HTTP/1.1" 200 -
2025-04-10 01:19:53,324 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:19:53] "GET /api/query/progress/17e7a97c-c0c5-48c1-851e-083b3ddb3649 HTTP/1.1" 200 -
2025-04-10 01:19:54,061 - DEBUG - [llm_engine.py:107] - [SQL_GEN] Model response received in 9.18s
2025-04-10 01:19:54,062 - DEBUG - [llm_engine.py:116] - [SQL_GEN] Raw model response: 'Here's a query that will retrieve the count of orders placed by each customer along with their first and last names:

```sql
SELECT 
    customers.first_name, 
    customers.last_name, 
    COUNT(orders.order_id) AS order_count
FROM customers
INNER JOIN orders ON customers.customer_id = orders.customer_id
GROUP BY customers.customer_id, customers.first_name, customers.last_name
```'
2025-04-10 01:19:54,063 - INFO - [llm_engine.py:119] - [SQL_GEN] Completion generation completed in 9.18s
2025-04-10 01:19:54,063 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:19:54,064 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-10 01:19:54,065 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-10 01:19:54,065 - INFO - [azure_client.py:171] - Extracted SQL query (255 chars) and explanation (116 chars)
2025-04-10 01:19:54,066 - INFO - [azure_client.py:124] - Generated SQL: SELECT 
    customers.first_name, 
    customers.last_name, 
    COUNT(orders.order_id) AS order_count
FROM customers
INNER JOIN orders ON customers.customer_id = orders.customer_id
GROUP BY customers.customer_id, customers.first_name, customers.last_name
2025-04-10 01:19:54,068 - INFO - [azure_client.py:132] - SQL generation completed in 9.19s
2025-04-10 01:19:54,070 - INFO - [database.py:65] - Executing SQL query: SELECT 
    customers.first_name, 
    customers.last_name, 
    COUNT(orders.order_id) AS order_count
FROM customers
INNER JOIN orders ON customers.customer_id = orders.customer_id
GROUP BY customers.customer_id, customers.first_name, customers.last_name
2025-04-10 01:19:54,071 - DEBUG - [database.py:76] - Query execution started
2025-04-10 01:19:54,073 - DEBUG - [database.py:81] - Query execution completed in 0.00s
2025-04-10 01:19:54,075 - INFO - [database.py:86] - Query returned 5 rows with 3 columns
2025-04-10 01:19:54,078 - DEBUG - [database.py:92] - Sample data (first 3 rows):
  first_name last_name  order_count
0       John       Doe            2
1       Jane     Smith            2
2      Alice   Johnson            2
2025-04-10 01:19:54,079 - INFO - [database.py:95] - Query processing completed in 0.01s
2025-04-10 01:19:54,082 - INFO - [sql_generator.py:348] - Analyzing query results for dashboard potential
2025-04-10 01:19:54,083 - INFO - [azure_client.py:197] - Dashboard analysis started for query: 'Get me count of orders by customers along with their name'
2025-04-10 01:19:54,085 - INFO - [llm_engine.py:56] - [DASHBOARD_ANALYSIS] Completion generation started
2025-04-10 01:19:54,087 - DEBUG - [llm_engine.py:87] - [DASHBOARD_ANALYSIS] Prompt: [{'role': 'system', 'content': 'You are a data visualization expert. Analyze the given query results and determine if they\'re suitable for a dashboard visualization.\n\nYour task is to:\n1. Analyze the columns and data\n2. Determine if the data is suitable for visualization (has numeric values and categorical data)\n3. If suitable, recommend the best chart type (bar, line, pie, etc.)\n4. Identify the best columns for X and Y axes (or equivalent based on chart type). Only one column for each axi... (truncated)
2025-04-10 01:19:54,087 - DEBUG - [llm_engine.py:96] - [DASHBOARD_ANALYSIS] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:19:54,100 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:19:54] "GET /api/query/progress/17e7a97c-c0c5-48c1-851e-083b3ddb3649 HTTP/1.1" 200 -
2025-04-10 01:19:54,338 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:19:54] "GET /api/query/progress/17e7a97c-c0c5-48c1-851e-083b3ddb3649 HTTP/1.1" 200 -
2025-04-10 01:19:54,759 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:19:54] "GET /api/query/progress/17e7a97c-c0c5-48c1-851e-083b3ddb3649 HTTP/1.1" 200 -
2025-04-10 01:19:55,533 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:19:55] "GET /api/query/progress/17e7a97c-c0c5-48c1-851e-083b3ddb3649 HTTP/1.1" 200 -
2025-04-10 01:19:55,768 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:19:55] "GET /api/query/progress/17e7a97c-c0c5-48c1-851e-083b3ddb3649 HTTP/1.1" 200 -
2025-04-10 01:19:56,187 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:19:56] "GET /api/query/progress/17e7a97c-c0c5-48c1-851e-083b3ddb3649 HTTP/1.1" 200 -
2025-04-10 01:19:56,945 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:19:56] "GET /api/query/progress/17e7a97c-c0c5-48c1-851e-083b3ddb3649 HTTP/1.1" 200 -
2025-04-10 01:19:57,191 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:19:57] "GET /api/query/progress/17e7a97c-c0c5-48c1-851e-083b3ddb3649 HTTP/1.1" 200 -
2025-04-10 01:19:57,601 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:19:57] "GET /api/query/progress/17e7a97c-c0c5-48c1-851e-083b3ddb3649 HTTP/1.1" 200 -
2025-04-10 01:19:58,344 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:19:58] "GET /api/query/progress/17e7a97c-c0c5-48c1-851e-083b3ddb3649 HTTP/1.1" 200 -
2025-04-10 01:19:58,599 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:19:58] "GET /api/query/progress/17e7a97c-c0c5-48c1-851e-083b3ddb3649 HTTP/1.1" 200 -
2025-04-10 01:19:58,985 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:19:58] "GET /api/query/progress/17e7a97c-c0c5-48c1-851e-083b3ddb3649 HTTP/1.1" 200 -
2025-04-10 01:19:59,706 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:19:59] "GET /api/query/progress/17e7a97c-c0c5-48c1-851e-083b3ddb3649 HTTP/1.1" 200 -
2025-04-10 01:19:59,947 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:19:59] "GET /api/query/progress/17e7a97c-c0c5-48c1-851e-083b3ddb3649 HTTP/1.1" 200 -
2025-04-10 01:20:00,338 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:20:00] "GET /api/query/progress/17e7a97c-c0c5-48c1-851e-083b3ddb3649 HTTP/1.1" 200 -
2025-04-10 01:20:01,091 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:20:01] "GET /api/query/progress/17e7a97c-c0c5-48c1-851e-083b3ddb3649 HTTP/1.1" 200 -
2025-04-10 01:20:01,317 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:20:01] "GET /api/query/progress/17e7a97c-c0c5-48c1-851e-083b3ddb3649 HTTP/1.1" 200 -
2025-04-10 01:20:01,701 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:20:01] "GET /api/query/progress/17e7a97c-c0c5-48c1-851e-083b3ddb3649 HTTP/1.1" 200 -
2025-04-10 01:20:02,448 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:20:02] "GET /api/query/progress/17e7a97c-c0c5-48c1-851e-083b3ddb3649 HTTP/1.1" 200 -
2025-04-10 01:20:02,692 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:20:02] "GET /api/query/progress/17e7a97c-c0c5-48c1-851e-083b3ddb3649 HTTP/1.1" 200 -
2025-04-10 01:20:03,066 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:20:03] "GET /api/query/progress/17e7a97c-c0c5-48c1-851e-083b3ddb3649 HTTP/1.1" 200 -
2025-04-10 01:20:03,811 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:20:03] "GET /api/query/progress/17e7a97c-c0c5-48c1-851e-083b3ddb3649 HTTP/1.1" 200 -
2025-04-10 01:20:04,050 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:20:04] "GET /api/query/progress/17e7a97c-c0c5-48c1-851e-083b3ddb3649 HTTP/1.1" 200 -
2025-04-10 01:20:04,367 - DEBUG - [llm_engine.py:107] - [DASHBOARD_ANALYSIS] Model response received in 10.28s
2025-04-10 01:20:04,367 - DEBUG - [llm_engine.py:116] - [DASHBOARD_ANALYSIS] Raw model response: '{
  "is_suitable": true,
  "reason": "The data contains a categorical variable (customer names) and a numeric variable (order count), making it suitable for visualization to compare order counts across customers.",
  "chart_type": "bar",
  "x_axis": {
    "column": "first_name",
    "label": "Customer First Name"
  },
  "y_axis": {
    "column": "order_count",
    "label": "Number of Orders"
  },
  "title": "Number of Orders per Customer"
}'
2025-04-10 01:20:04,368 - INFO - [llm_engine.py:119] - [DASHBOARD_ANALYSIS] Completion generation completed in 10.28s
2025-04-10 01:20:04,368 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:20:04,369 - INFO - [azure_client.py:255] - Dashboard analysis results: suitable=True
2025-04-10 01:20:04,369 - INFO - [azure_client.py:264] - Dashboard analysis completed in 10.29s
2025-04-10 01:20:04,370 - INFO - [sql_generator.py:366] - Dashboard analysis completed: suitable=True
2025-04-10 01:20:04,371 - INFO - [sql_generator.py:442] - SQL generation completed in 23.55s
2025-04-10 01:20:04,372 - INFO - [sql_generator.py:125] - Query processing completed in 23.55s
2025-04-10 01:20:04,464 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:20:04] "GET /api/query/progress/17e7a97c-c0c5-48c1-851e-083b3ddb3649 HTTP/1.1" 200 -
2025-04-10 01:21:52,273 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/models/sql_generator.py', reloading
2025-04-10 01:21:52,274 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/models/sql_generator.py', reloading
2025-04-10 01:21:52,284 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/models/sql_generator.py', reloading
2025-04-10 01:21:53,285 - INFO - [sql_generator.py:488] - Closing all agent connections
2025-04-10 01:21:53,286 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-10 01:21:53,286 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-10 01:21:53,286 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-10 01:21:53,286 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-10 01:21:53,286 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-10 01:21:53,286 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-10 01:21:53,286 - INFO - [azure_client.py:302] - Closing Azure AI client connection
2025-04-10 01:21:53,287 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-10 01:21:53,287 - INFO - [database.py:258] - Closing database connection
2025-04-10 01:21:53,287 - DEBUG - [database.py:261] - Database engine disposed
2025-04-10 01:21:53,287 - INFO - [feedback_manager.py:762] - Closing database connections
2025-04-10 01:21:53,288 - DEBUG - [feedback_manager.py:765] - SQLite database engine disposed
2025-04-10 01:21:53,288 - INFO - [vector_store.py:340] - Closing vector database connection
2025-04-10 01:21:54,226 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-10 01:21:59,198 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-10 01:21:59,198 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-10 01:21:59,198 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-10 01:21:59,199 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-10 01:21:59,199 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-10 01:21:59,208 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-10 01:21:59,212 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-10 01:21:59,212 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-10 01:21:59,260 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-10 01:21:59,261 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-10 01:21:59,261 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-10 01:21:59,261 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-10 01:21:59,262 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-10 01:21:59,262 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-10 01:21:59,262 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-10 01:21:59,309 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-10 01:21:59,309 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-10 01:21:59,310 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-10 01:21:59,310 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-10 01:21:59,311 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-10 01:21:59,311 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-10 01:21:59,311 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-10 01:21:59,359 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-10 01:21:59,360 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-10 01:21:59,360 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-10 01:21:59,360 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-10 01:21:59,361 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-10 01:21:59,361 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-10 01:21:59,361 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-10 01:21:59,361 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-10 01:21:59,409 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-10 01:21:59,410 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-10 01:21:59,410 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-10 01:21:59,410 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-10 01:21:59,410 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-10 01:21:59,411 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-10 01:21:59,411 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-10 01:21:59,411 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-10 01:21:59,461 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-10 01:21:59,462 - INFO - [_internal.py:224] -  * Debugger PIN: 501-040-382
2025-04-10 01:22:06,821 - INFO - [sql_generator.py:37] - Processing query: 'Get me count of orders by customers along with their name'
2025-04-10 01:22:06,822 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:22:06] "POST /api/query HTTP/1.1" 200 -
2025-04-10 01:22:06,823 - INFO - [intent_agent.py:27] - Intent detection started for query: 'Get me count of orders by customers along with their name'
2025-04-10 01:22:06,825 - INFO - [intent_agent.py:38] - Using default intent 'data_retrieval' without calling LLM
2025-04-10 01:22:06,826 - INFO - [intent_agent.py:41] - Intent detection completed in 0.00s
2025-04-10 01:22:06,827 - INFO - [sql_generator.py:45] - Detected intent: data_retrieval
2025-04-10 01:22:06,827 - INFO - [sql_generator.py:141] - Starting SQL generation process
2025-04-10 01:22:06,828 - INFO - [database.py:44] - Attempting database connection
2025-04-10 01:22:06,828 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-10 01:22:06,829 - INFO - [table_agent.py:28] - Table selection started for query: 'Get me count of orders by customers along with their name'
2025-04-10 01:22:06,830 - INFO - [table_agent.py:34] - Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-10 01:22:06,831 - INFO - [table_agent.py:64] - Sending request to AI model for table selection
2025-04-10 01:22:06,831 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-10 01:22:06,831 - DEBUG - [llm_engine.py:87] - [TABLE] Prompt: [{'role': 'system', 'content': "You are a table selection agent for a Text-to-SQL system.\nYour job is to identify which database tables are most relevant to a user query.\nYou will be provided with table names and their descriptions.\nReturn ONLY the names of relevant tables, separated by commas. Be selective and choose\nonly the tables that are directly needed to answer the query. If you're unsure,\ninclude tables that might be related. Return only table names in your response."}, {'role': 'us... (truncated)
2025-04-10 01:22:06,831 - DEBUG - [llm_engine.py:96] - [TABLE] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:22:07,342 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:22:07] "GET /api/query/progress/edf2cf48-9207-48c7-9d51-ef1f32d08ad3 HTTP/1.1" 200 -
2025-04-10 01:22:08,150 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:22:08] "GET /api/query/progress/edf2cf48-9207-48c7-9d51-ef1f32d08ad3 HTTP/1.1" 200 -
2025-04-10 01:22:08,388 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:22:08] "GET /api/query/progress/edf2cf48-9207-48c7-9d51-ef1f32d08ad3 HTTP/1.1" 200 -
2025-04-10 01:22:08,812 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:22:08] "GET /api/query/progress/edf2cf48-9207-48c7-9d51-ef1f32d08ad3 HTTP/1.1" 200 -
2025-04-10 01:22:09,015 - DEBUG - [llm_engine.py:107] - [TABLE] Model response received in 2.18s
2025-04-10 01:22:09,016 - DEBUG - [llm_engine.py:116] - [TABLE] Raw model response: 'customers, orders'
2025-04-10 01:22:09,017 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 2.19s
2025-04-10 01:22:09,017 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:22:09,018 - INFO - [table_agent.py:69] - Raw model response: 'customers, orders'
2025-04-10 01:22:09,019 - INFO - [table_agent.py:90] - Table selection completed in 2.19s. Selected: customers, orders
2025-04-10 01:22:09,020 - INFO - [column_agent.py:29] - Column pruning started for query: 'Get me count of orders by customers along with their name'
2025-04-10 01:22:09,021 - INFO - [column_agent.py:30] - Processing tables: customers, orders
2025-04-10 01:22:09,022 - INFO - [column_agent.py:94] - Sending request to AI model for column selection
2025-04-10 01:22:09,022 - INFO - [llm_engine.py:56] - [COLUMN] Completion generation started
2025-04-10 01:22:09,024 - DEBUG - [llm_engine.py:87] - [COLUMN] Prompt: [{'role': 'system', 'content': 'You are a column selection agent for a Text-to-SQL system.\nYour job is to identify which columns from the provided tables are most relevant to a user query.\nFor each table, select only the columns that will be needed to answer the query.\nReturn your answer as a JSON object with table names as keys and arrays of column names as values.\nAlways include primary key columns even if not directly mentioned in the query.\nConsider columns that might be needed for:\n1.... (truncated)
2025-04-10 01:22:09,025 - DEBUG - [llm_engine.py:96] - [COLUMN] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:22:09,583 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:22:09] "GET /api/query/progress/edf2cf48-9207-48c7-9d51-ef1f32d08ad3 HTTP/1.1" 200 -
2025-04-10 01:22:09,817 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:22:09] "GET /api/query/progress/edf2cf48-9207-48c7-9d51-ef1f32d08ad3 HTTP/1.1" 200 -
2025-04-10 01:22:10,230 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:22:10] "GET /api/query/progress/edf2cf48-9207-48c7-9d51-ef1f32d08ad3 HTTP/1.1" 200 -
2025-04-10 01:22:10,699 - DEBUG - [llm_engine.py:107] - [COLUMN] Model response received in 1.67s
2025-04-10 01:22:10,699 - DEBUG - [llm_engine.py:116] - [COLUMN] Raw model response: '{
  "customers": ["customer_id", "first_name", "last_name"],
  "orders": ["order_id", "customer_id"]
}'
2025-04-10 01:22:10,700 - INFO - [llm_engine.py:119] - [COLUMN] Completion generation completed in 1.68s
2025-04-10 01:22:10,701 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:22:10,701 - INFO - [column_agent.py:139] - Parsing column selection from model response
2025-04-10 01:22:10,703 - INFO - [column_agent.py:149] - Parsed column selection JSON: {"customers": ["customer_id", "first_name", "last_name"], "orders": ["order_id", "customer_id"]}
2025-04-10 01:22:10,704 - INFO - [column_agent.py:111] - Table 'customers': Pruned 8 columns, kept 3/11
2025-04-10 01:22:10,704 - INFO - [column_agent.py:111] - Table 'orders': Pruned 3 columns, kept 2/5
2025-04-10 01:22:10,705 - INFO - [column_agent.py:197] - Building pruned schema
2025-04-10 01:22:10,706 - INFO - [column_agent.py:226] - Built pruned schema (439 chars)
2025-04-10 01:22:10,708 - INFO - [column_agent.py:120] - Column pruning completed in 1.69s
2025-04-10 01:22:10,709 - INFO - [sql_generator.py:237] - Found 1 join conditions for the relevant tables
2025-04-10 01:22:10,710 - INFO - [feedback_manager.py:265] - Stage 1: Vector search for 'Get me count of orders by customers along with the...'
2025-04-10 01:22:10,711 - INFO - [feedback_manager.py:77] - Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-10 01:22:11,009 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:22:11] "GET /api/query/progress/edf2cf48-9207-48c7-9d51-ef1f32d08ad3 HTTP/1.1" 200 -
2025-04-10 01:22:11,247 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:22:11] "GET /api/query/progress/edf2cf48-9207-48c7-9d51-ef1f32d08ad3 HTTP/1.1" 200 -
2025-04-10 01:22:11,664 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:22:11] "GET /api/query/progress/edf2cf48-9207-48c7-9d51-ef1f32d08ad3 HTTP/1.1" 200 -
2025-04-10 01:22:12,444 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:22:12] "GET /api/query/progress/edf2cf48-9207-48c7-9d51-ef1f32d08ad3 HTTP/1.1" 200 -
2025-04-10 01:22:12,681 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:22:12] "GET /api/query/progress/edf2cf48-9207-48c7-9d51-ef1f32d08ad3 HTTP/1.1" 200 -
2025-04-10 01:22:13,063 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:22:13] "GET /api/query/progress/edf2cf48-9207-48c7-9d51-ef1f32d08ad3 HTTP/1.1" 200 -
2025-04-10 01:22:13,351 - INFO - [feedback_manager.py:80] - Embedding model loaded in 2.64s
2025-04-10 01:22:13,403 - DEBUG - [feedback_manager.py:105] - Generated embedding in 0.05s with shape (384,)
2025-04-10 01:22:13,403 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-10 01:22:13,809 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:22:13] "GET /api/query/progress/edf2cf48-9207-48c7-9d51-ef1f32d08ad3 HTTP/1.1" 200 -
2025-04-10 01:22:14,037 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:22:14] "GET /api/query/progress/edf2cf48-9207-48c7-9d51-ef1f32d08ad3 HTTP/1.1" 200 -
2025-04-10 01:22:14,422 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:22:14] "GET /api/query/progress/edf2cf48-9207-48c7-9d51-ef1f32d08ad3 HTTP/1.1" 200 -
2025-04-10 01:22:14,437 - DEBUG - [milvus_client.py:728] - Created new connection using: 190db163e86a451ea42675c8b63538eb
2025-04-10 01:22:14,437 - INFO - [vector_store.py:42] - Vector database connection established in 1.03s
2025-04-10 01:22:14,440 - ERROR - [vector_store.py:215] - Error searching similar vectors in collection query_embeddings: argument of type 'NoneType' is not iterable
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/vector_store.py", line 176, in search_similar
    if "id" not in output_fields and not any(f.lower() == 'id' for f in output_fields):
       ^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: argument of type 'NoneType' is not iterable
2025-04-10 01:22:14,442 - WARNING - [feedback_manager.py:288] - No candidates found from vector search, falling back to text-based search
2025-04-10 01:22:14,443 - INFO - [feedback_manager.py:52] - Attempting database connection
2025-04-10 01:22:14,444 - INFO - [feedback_manager.py:56] - Database connection established in 0.00s
2025-04-10 01:22:14,445 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-10 01:22:14,456 - DEBUG - [milvus_client.py:728] - Created new connection using: 2f645995f8724891bff2280f6db5be89
2025-04-10 01:22:14,456 - INFO - [vector_store.py:42] - Vector database connection established in 0.01s
2025-04-10 01:22:14,458 - INFO - [feedback_manager.py:402] - Found 1 similar queries using text-based search for 'Get me count of orders by customers along with the...'
2025-04-10 01:22:14,459 - INFO - [sql_generator.py:280] - Found 1 similar queries with reranking
2025-04-10 01:22:14,460 - INFO - [sql_generator.py:302] - Added similar query #1 from feedback (score: 0.0000): Get me count of orders by customers along with the...
2025-04-10 01:22:14,460 - INFO - [azure_client.py:35] - SQL generation started for query: 'Get me count of orders by customers along with their name'
2025-04-10 01:22:14,461 - INFO - [azure_client.py:69] - Including schema information (439 chars)
2025-04-10 01:22:14,462 - INFO - [azure_client.py:76] - Including 1 join conditions
2025-04-10 01:22:14,463 - INFO - [azure_client.py:97] - Including 1 SQL examples from feedback similarity search
2025-04-10 01:22:14,464 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER): Unique customer identifier, first_name (TEXT): Customer's first name, last_name (TEXT): Customer's last name\nPrimary Key(s): customer_id\n\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER): Unique order identifier, customer_id (INTEGER): Reference to customer who placed the order\nPrimary Key(s): order_id\n"}, {'role': 'user', 'content': 'Use the following pre-defined join conditions when joining these tables:\n- When joining customers with orders, use: INNER JOIN orders ON customers.customer_id = orders.customer_id\n'}, {'role': 'user', 'content': 'Here are some similar queries that were previously successful:\nQuestion: Get me count of orders by customers along with their name\nSQL: SELECT \n    customers.first_name, \n    customers.last_name, \n    COUNT(orders.order_id) AS order_count\nFROM customers\nINNER JOIN orders ON customers.customer_id = orders.customer_id\nGROUP BY customers.customer_id, customers.first_name, customers.last_name\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: Get me count of orders by customers along with their name'}]
2025-04-10 01:22:14,464 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-10 01:22:14,465 - DEBUG - [llm_engine.py:87] - [SQL_GEN] Prompt: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief ... (truncated)
2025-04-10 01:22:14,466 - DEBUG - [llm_engine.py:96] - [SQL_GEN] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:22:15,164 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:22:15] "GET /api/query/progress/edf2cf48-9207-48c7-9d51-ef1f32d08ad3 HTTP/1.1" 200 -
2025-04-10 01:22:15,384 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:22:15] "GET /api/query/progress/edf2cf48-9207-48c7-9d51-ef1f32d08ad3 HTTP/1.1" 200 -
2025-04-10 01:22:15,774 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:22:15] "GET /api/query/progress/edf2cf48-9207-48c7-9d51-ef1f32d08ad3 HTTP/1.1" 200 -
2025-04-10 01:22:16,506 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:22:16] "GET /api/query/progress/edf2cf48-9207-48c7-9d51-ef1f32d08ad3 HTTP/1.1" 200 -
2025-04-10 01:22:16,732 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:22:16] "GET /api/query/progress/edf2cf48-9207-48c7-9d51-ef1f32d08ad3 HTTP/1.1" 200 -
2025-04-10 01:22:17,071 - DEBUG - [llm_engine.py:107] - [SQL_GEN] Model response received in 2.60s
2025-04-10 01:22:17,071 - DEBUG - [llm_engine.py:116] - [SQL_GEN] Raw model response: 'Here's a query that will retrieve the count of orders placed by each customer along with their first and last names:

```sql
SELECT 
    customers.first_name, 
    customers.last_name, 
    COUNT(orders.order_id) AS order_count
FROM customers
INNER JOIN orders ON customers.customer_id = orders.customer_id
GROUP BY customers.customer_id, customers.first_name, customers.last_name
```'
2025-04-10 01:22:17,072 - INFO - [llm_engine.py:119] - [SQL_GEN] Completion generation completed in 2.61s
2025-04-10 01:22:17,072 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:22:17,072 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-10 01:22:17,073 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-10 01:22:17,074 - INFO - [azure_client.py:171] - Extracted SQL query (255 chars) and explanation (116 chars)
2025-04-10 01:22:17,074 - INFO - [azure_client.py:124] - Generated SQL: SELECT 
    customers.first_name, 
    customers.last_name, 
    COUNT(orders.order_id) AS order_count
FROM customers
INNER JOIN orders ON customers.customer_id = orders.customer_id
GROUP BY customers.customer_id, customers.first_name, customers.last_name
2025-04-10 01:22:17,076 - INFO - [azure_client.py:132] - SQL generation completed in 2.62s
2025-04-10 01:22:17,077 - INFO - [database.py:65] - Executing SQL query: SELECT 
    customers.first_name, 
    customers.last_name, 
    COUNT(orders.order_id) AS order_count
FROM customers
INNER JOIN orders ON customers.customer_id = orders.customer_id
GROUP BY customers.customer_id, customers.first_name, customers.last_name
2025-04-10 01:22:17,078 - DEBUG - [database.py:76] - Query execution started
2025-04-10 01:22:17,079 - DEBUG - [database.py:81] - Query execution completed in 0.00s
2025-04-10 01:22:17,080 - INFO - [database.py:86] - Query returned 5 rows with 3 columns
2025-04-10 01:22:17,083 - DEBUG - [database.py:92] - Sample data (first 3 rows):
  first_name last_name  order_count
0       John       Doe            2
1       Jane     Smith            2
2      Alice   Johnson            2
2025-04-10 01:22:17,083 - INFO - [database.py:95] - Query processing completed in 0.01s
2025-04-10 01:22:17,085 - INFO - [sql_generator.py:348] - Analyzing query results for dashboard potential
2025-04-10 01:22:17,085 - INFO - [azure_client.py:197] - Dashboard analysis started for query: 'Get me count of orders by customers along with their name'
2025-04-10 01:22:17,086 - INFO - [llm_engine.py:56] - [DASHBOARD_ANALYSIS] Completion generation started
2025-04-10 01:22:17,087 - DEBUG - [llm_engine.py:87] - [DASHBOARD_ANALYSIS] Prompt: [{'role': 'system', 'content': 'You are a data visualization expert. Analyze the given query results and determine if they\'re suitable for a dashboard visualization.\n\nYour task is to:\n1. Analyze the columns and data\n2. Determine if the data is suitable for visualization (has numeric values and categorical data)\n3. If suitable, recommend the best chart type (bar, line, pie, etc.)\n4. Identify the best columns for X and Y axes (or equivalent based on chart type). Only one column for each axi... (truncated)
2025-04-10 01:22:17,088 - DEBUG - [llm_engine.py:96] - [DASHBOARD_ANALYSIS] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:22:17,127 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:22:17] "GET /api/query/progress/edf2cf48-9207-48c7-9d51-ef1f32d08ad3 HTTP/1.1" 200 -
2025-04-10 01:22:17,850 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:22:17] "GET /api/query/progress/edf2cf48-9207-48c7-9d51-ef1f32d08ad3 HTTP/1.1" 200 -
2025-04-10 01:22:18,080 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:22:18] "GET /api/query/progress/edf2cf48-9207-48c7-9d51-ef1f32d08ad3 HTTP/1.1" 200 -
2025-04-10 01:22:18,498 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:22:18] "GET /api/query/progress/edf2cf48-9207-48c7-9d51-ef1f32d08ad3 HTTP/1.1" 200 -
2025-04-10 01:22:19,271 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:22:19] "GET /api/query/progress/edf2cf48-9207-48c7-9d51-ef1f32d08ad3 HTTP/1.1" 200 -
2025-04-10 01:22:19,505 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:22:19] "GET /api/query/progress/edf2cf48-9207-48c7-9d51-ef1f32d08ad3 HTTP/1.1" 200 -
2025-04-10 01:22:19,912 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:22:19] "GET /api/query/progress/edf2cf48-9207-48c7-9d51-ef1f32d08ad3 HTTP/1.1" 200 -
2025-04-10 01:22:20,294 - DEBUG - [llm_engine.py:107] - [DASHBOARD_ANALYSIS] Model response received in 3.20s
2025-04-10 01:22:20,294 - DEBUG - [llm_engine.py:116] - [DASHBOARD_ANALYSIS] Raw model response: '{
  "is_suitable": true,
  "reason": "The data contains customer names as categorical data and their corresponding numeric order counts, making it suitable for visualization to compare order counts across customers.",
  "chart_type": "bar",
  "x_axis": {
    "column": "first_name",
    "label": "Customer First Name"
  },
  "y_axis": {
    "column": "order_count",
    "label": "Number of Orders"
  },
  "title": "Number of Orders per Customer"
}'
2025-04-10 01:22:20,295 - INFO - [llm_engine.py:119] - [DASHBOARD_ANALYSIS] Completion generation completed in 3.21s
2025-04-10 01:22:20,295 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:22:20,296 - INFO - [azure_client.py:255] - Dashboard analysis results: suitable=True
2025-04-10 01:22:20,297 - INFO - [azure_client.py:264] - Dashboard analysis completed in 3.21s
2025-04-10 01:22:20,298 - INFO - [sql_generator.py:366] - Dashboard analysis completed: suitable=True
2025-04-10 01:22:20,299 - INFO - [sql_generator.py:444] - SQL generation completed in 13.47s
2025-04-10 01:22:20,300 - INFO - [sql_generator.py:125] - Query processing completed in 13.48s
2025-04-10 01:22:20,707 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:22:20] "GET /api/query/progress/edf2cf48-9207-48c7-9d51-ef1f32d08ad3 HTTP/1.1" 200 -
2025-04-10 01:22:55,145 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/models/sql_generator.py', reloading
2025-04-10 01:22:55,146 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/models/sql_generator.py', reloading
2025-04-10 01:22:55,147 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/models/sql_generator.py', reloading
2025-04-10 01:22:56,148 - INFO - [sql_generator.py:490] - Closing all agent connections
2025-04-10 01:22:56,149 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-10 01:22:56,149 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-10 01:22:56,149 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-10 01:22:56,149 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-10 01:22:56,149 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-10 01:22:56,149 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-10 01:22:56,149 - INFO - [azure_client.py:302] - Closing Azure AI client connection
2025-04-10 01:22:56,149 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-10 01:22:56,150 - INFO - [database.py:258] - Closing database connection
2025-04-10 01:22:56,150 - DEBUG - [database.py:261] - Database engine disposed
2025-04-10 01:22:56,150 - INFO - [feedback_manager.py:762] - Closing database connections
2025-04-10 01:22:56,151 - DEBUG - [feedback_manager.py:765] - SQLite database engine disposed
2025-04-10 01:22:56,151 - INFO - [vector_store.py:340] - Closing vector database connection
2025-04-10 01:22:57,422 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-10 01:23:04,297 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-10 01:23:04,298 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-10 01:23:04,298 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-10 01:23:04,298 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-10 01:23:04,299 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-10 01:23:04,309 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-10 01:23:04,312 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-10 01:23:04,313 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-10 01:23:04,357 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-10 01:23:04,357 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-10 01:23:04,357 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-10 01:23:04,357 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-10 01:23:04,357 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-10 01:23:04,358 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-10 01:23:04,358 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-10 01:23:04,402 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-10 01:23:04,402 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-10 01:23:04,403 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-10 01:23:04,403 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-10 01:23:04,403 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-10 01:23:04,403 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-10 01:23:04,403 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-10 01:23:04,445 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-10 01:23:04,446 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-10 01:23:04,446 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-10 01:23:04,446 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-10 01:23:04,447 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-10 01:23:04,447 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-10 01:23:04,447 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-10 01:23:04,447 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-10 01:23:04,486 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-10 01:23:04,486 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-10 01:23:04,486 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-10 01:23:04,487 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-10 01:23:04,487 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-10 01:23:04,487 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-10 01:23:04,487 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-10 01:23:04,487 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-10 01:23:04,527 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-10 01:23:04,527 - INFO - [_internal.py:224] -  * Debugger PIN: 501-040-382
2025-04-10 01:24:18,955 - DEBUG - [app.py:84] - Main page requested
2025-04-10 01:24:18,968 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:24:18] "GET / HTTP/1.1" 200 -
2025-04-10 01:24:19,178 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:24:19] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-10 01:24:19,313 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:24:19] "GET /static/js/ui-utils.js HTTP/1.1" 200 -
2025-04-10 01:24:19,317 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:24:19] "GET /static/js/core.js HTTP/1.1" 200 -
2025-04-10 01:24:19,319 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:24:19] "GET /static/js/schema-manager.js HTTP/1.1" 200 -
2025-04-10 01:24:19,322 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:24:19] "GET /static/js/table-mentions.js HTTP/1.1" 200 -
2025-04-10 01:24:19,325 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:24:19] "GET /static/js/results-display.js HTTP/1.1" 200 -
2025-04-10 01:24:19,482 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:24:19] "GET /static/js/feedback.js HTTP/1.1" 200 -
2025-04-10 01:24:19,626 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:24:19] "GET /static/js/dashboard.js HTTP/1.1" 200 -
2025-04-10 01:24:19,629 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:24:19] "GET /static/js/query-handler.js HTTP/1.1" 200 -
2025-04-10 01:24:19,981 - DEBUG - [app.py:152] - Table suggestions requested for workspace: dfd, query: ''
2025-04-10 01:24:19,983 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:24:19] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-10 01:24:19,992 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:24:19] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-04-10 01:24:24,199 - INFO - [sql_generator.py:37] - Processing query: 'Get me count of orders by customers along with their name'
2025-04-10 01:24:24,199 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:24:24] "POST /api/query HTTP/1.1" 200 -
2025-04-10 01:24:24,200 - INFO - [intent_agent.py:27] - Intent detection started for query: 'Get me count of orders by customers along with their name'
2025-04-10 01:24:24,202 - INFO - [intent_agent.py:38] - Using default intent 'data_retrieval' without calling LLM
2025-04-10 01:24:24,203 - INFO - [intent_agent.py:41] - Intent detection completed in 0.00s
2025-04-10 01:24:24,204 - INFO - [sql_generator.py:45] - Detected intent: data_retrieval
2025-04-10 01:24:24,205 - INFO - [sql_generator.py:141] - Starting SQL generation process
2025-04-10 01:24:24,206 - INFO - [database.py:44] - Attempting database connection
2025-04-10 01:24:24,207 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-10 01:24:24,208 - INFO - [table_agent.py:28] - Table selection started for query: 'Get me count of orders by customers along with their name'
2025-04-10 01:24:24,208 - INFO - [table_agent.py:34] - Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-10 01:24:24,209 - INFO - [table_agent.py:64] - Sending request to AI model for table selection
2025-04-10 01:24:24,210 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-10 01:24:24,211 - DEBUG - [llm_engine.py:87] - [TABLE] Prompt: [{'role': 'system', 'content': "You are a table selection agent for a Text-to-SQL system.\nYour job is to identify which database tables are most relevant to a user query.\nYou will be provided with table names and their descriptions.\nReturn ONLY the names of relevant tables, separated by commas. Be selective and choose\nonly the tables that are directly needed to answer the query. If you're unsure,\ninclude tables that might be related. Return only table names in your response."}, {'role': 'us... (truncated)
2025-04-10 01:24:24,211 - DEBUG - [llm_engine.py:96] - [TABLE] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:24:24,979 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:24:24] "GET /api/query/progress/e5164d33-db61-4f2c-b1f3-9f189dd44185 HTTP/1.1" 200 -
2025-04-10 01:24:25,219 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:24:25] "GET /api/query/progress/e5164d33-db61-4f2c-b1f3-9f189dd44185 HTTP/1.1" 200 -
2025-04-10 01:24:25,636 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:24:25] "GET /api/query/progress/e5164d33-db61-4f2c-b1f3-9f189dd44185 HTTP/1.1" 200 -
2025-04-10 01:24:26,417 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:24:26] "GET /api/query/progress/e5164d33-db61-4f2c-b1f3-9f189dd44185 HTTP/1.1" 200 -
2025-04-10 01:24:26,439 - DEBUG - [llm_engine.py:107] - [TABLE] Model response received in 2.23s
2025-04-10 01:24:26,439 - DEBUG - [llm_engine.py:116] - [TABLE] Raw model response: 'customers, orders'
2025-04-10 01:24:26,439 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 2.23s
2025-04-10 01:24:26,440 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:24:26,441 - INFO - [table_agent.py:69] - Raw model response: 'customers, orders'
2025-04-10 01:24:26,442 - INFO - [table_agent.py:90] - Table selection completed in 2.23s. Selected: customers, orders
2025-04-10 01:24:26,442 - INFO - [column_agent.py:29] - Column pruning started for query: 'Get me count of orders by customers along with their name'
2025-04-10 01:24:26,442 - INFO - [column_agent.py:30] - Processing tables: customers, orders
2025-04-10 01:24:26,443 - INFO - [column_agent.py:94] - Sending request to AI model for column selection
2025-04-10 01:24:26,444 - INFO - [llm_engine.py:56] - [COLUMN] Completion generation started
2025-04-10 01:24:26,445 - DEBUG - [llm_engine.py:87] - [COLUMN] Prompt: [{'role': 'system', 'content': 'You are a column selection agent for a Text-to-SQL system.\nYour job is to identify which columns from the provided tables are most relevant to a user query.\nFor each table, select only the columns that will be needed to answer the query.\nReturn your answer as a JSON object with table names as keys and arrays of column names as values.\nAlways include primary key columns even if not directly mentioned in the query.\nConsider columns that might be needed for:\n1.... (truncated)
2025-04-10 01:24:26,446 - DEBUG - [llm_engine.py:96] - [COLUMN] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:24:26,665 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:24:26] "GET /api/query/progress/e5164d33-db61-4f2c-b1f3-9f189dd44185 HTTP/1.1" 200 -
2025-04-10 01:24:27,073 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:24:27] "GET /api/query/progress/e5164d33-db61-4f2c-b1f3-9f189dd44185 HTTP/1.1" 200 -
2025-04-10 01:24:27,846 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:24:27] "GET /api/query/progress/e5164d33-db61-4f2c-b1f3-9f189dd44185 HTTP/1.1" 200 -
2025-04-10 01:24:27,852 - DEBUG - [llm_engine.py:107] - [COLUMN] Model response received in 1.40s
2025-04-10 01:24:27,855 - DEBUG - [llm_engine.py:116] - [COLUMN] Raw model response: '{
  "customers": ["customer_id", "first_name", "last_name"],
  "orders": ["order_id", "customer_id"]
}'
2025-04-10 01:24:27,860 - INFO - [llm_engine.py:119] - [COLUMN] Completion generation completed in 1.42s
2025-04-10 01:24:27,862 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:24:27,863 - INFO - [column_agent.py:139] - Parsing column selection from model response
2025-04-10 01:24:27,864 - INFO - [column_agent.py:149] - Parsed column selection JSON: {"customers": ["customer_id", "first_name", "last_name"], "orders": ["order_id", "customer_id"]}
2025-04-10 01:24:27,866 - INFO - [column_agent.py:111] - Table 'customers': Pruned 8 columns, kept 3/11
2025-04-10 01:24:27,867 - INFO - [column_agent.py:111] - Table 'orders': Pruned 3 columns, kept 2/5
2025-04-10 01:24:27,868 - INFO - [column_agent.py:197] - Building pruned schema
2025-04-10 01:24:27,870 - INFO - [column_agent.py:226] - Built pruned schema (439 chars)
2025-04-10 01:24:27,871 - INFO - [column_agent.py:120] - Column pruning completed in 1.43s
2025-04-10 01:24:27,872 - INFO - [sql_generator.py:237] - Found 1 join conditions for the relevant tables
2025-04-10 01:24:27,873 - INFO - [feedback_manager.py:265] - Stage 1: Vector search for 'Get me count of orders by customers along with the...'
2025-04-10 01:24:27,873 - INFO - [feedback_manager.py:77] - Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-10 01:24:28,084 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:24:28] "GET /api/query/progress/e5164d33-db61-4f2c-b1f3-9f189dd44185 HTTP/1.1" 200 -
2025-04-10 01:24:28,501 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:24:28] "GET /api/query/progress/e5164d33-db61-4f2c-b1f3-9f189dd44185 HTTP/1.1" 200 -
2025-04-10 01:24:29,277 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:24:29] "GET /api/query/progress/e5164d33-db61-4f2c-b1f3-9f189dd44185 HTTP/1.1" 200 -
2025-04-10 01:24:29,523 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:24:29] "GET /api/query/progress/e5164d33-db61-4f2c-b1f3-9f189dd44185 HTTP/1.1" 200 -
2025-04-10 01:24:29,929 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:24:29] "GET /api/query/progress/e5164d33-db61-4f2c-b1f3-9f189dd44185 HTTP/1.1" 200 -
2025-04-10 01:24:30,510 - INFO - [feedback_manager.py:80] - Embedding model loaded in 2.64s
2025-04-10 01:24:30,562 - DEBUG - [feedback_manager.py:105] - Generated embedding in 0.05s with shape (384,)
2025-04-10 01:24:30,563 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-10 01:24:30,689 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:24:30] "GET /api/query/progress/e5164d33-db61-4f2c-b1f3-9f189dd44185 HTTP/1.1" 200 -
2025-04-10 01:24:30,943 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:24:30] "GET /api/query/progress/e5164d33-db61-4f2c-b1f3-9f189dd44185 HTTP/1.1" 200 -
2025-04-10 01:24:31,348 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:24:31] "GET /api/query/progress/e5164d33-db61-4f2c-b1f3-9f189dd44185 HTTP/1.1" 200 -
2025-04-10 01:24:31,586 - DEBUG - [milvus_client.py:728] - Created new connection using: ce04349c14cc44e1a1d6bd60e1541e53
2025-04-10 01:24:31,586 - INFO - [vector_store.py:42] - Vector database connection established in 1.02s
2025-04-10 01:24:31,587 - ERROR - [vector_store.py:215] - Error searching similar vectors in collection query_embeddings: argument of type 'NoneType' is not iterable
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/vector_store.py", line 176, in search_similar
    if "id" not in output_fields and not any(f.lower() == 'id' for f in output_fields):
       ^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: argument of type 'NoneType' is not iterable
2025-04-10 01:24:31,589 - WARNING - [feedback_manager.py:288] - No candidates found from vector search, falling back to text-based search
2025-04-10 01:24:31,589 - INFO - [feedback_manager.py:52] - Attempting database connection
2025-04-10 01:24:31,590 - INFO - [feedback_manager.py:56] - Database connection established in 0.00s
2025-04-10 01:24:31,590 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-10 01:24:31,594 - DEBUG - [milvus_client.py:728] - Created new connection using: c75a974c673b439ea26f1b6d9e95d7dc
2025-04-10 01:24:31,594 - INFO - [vector_store.py:42] - Vector database connection established in 0.00s
2025-04-10 01:24:31,596 - INFO - [feedback_manager.py:402] - Found 1 similar queries using text-based search for 'Get me count of orders by customers along with the...'
2025-04-10 01:24:31,596 - INFO - [sql_generator.py:280] - Found 1 similar queries with reranking
2025-04-10 01:24:31,597 - INFO - [sql_generator.py:302] - Added similar query #1 from feedback (score: 0.0000): Get me count of orders by customers along with the...
2025-04-10 01:24:31,597 - INFO - [azure_client.py:35] - SQL generation started for query: 'Get me count of orders by customers along with their name'
2025-04-10 01:24:31,598 - INFO - [azure_client.py:69] - Including schema information (439 chars)
2025-04-10 01:24:31,599 - INFO - [azure_client.py:76] - Including 1 join conditions
2025-04-10 01:24:31,599 - INFO - [azure_client.py:97] - Including 1 SQL examples from feedback similarity search
2025-04-10 01:24:31,599 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER): Unique customer identifier, first_name (TEXT): Customer's first name, last_name (TEXT): Customer's last name\nPrimary Key(s): customer_id\n\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER): Unique order identifier, customer_id (INTEGER): Reference to customer who placed the order\nPrimary Key(s): order_id\n"}, {'role': 'user', 'content': 'Use the following pre-defined join conditions when joining these tables:\n- When joining customers with orders, use: INNER JOIN orders ON customers.customer_id = orders.customer_id\n'}, {'role': 'user', 'content': 'Here are some similar queries that were previously successful:\nQuestion: Get me count of orders by customers along with their name\nSQL: SELECT \n    customers.first_name, \n    customers.last_name, \n    COUNT(orders.order_id) AS order_count\nFROM customers\nINNER JOIN orders ON customers.customer_id = orders.customer_id\nGROUP BY customers.customer_id, customers.first_name, customers.last_name\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: Get me count of orders by customers along with their name'}]
2025-04-10 01:24:31,600 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-10 01:24:31,600 - DEBUG - [llm_engine.py:87] - [SQL_GEN] Prompt: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief ... (truncated)
2025-04-10 01:24:31,600 - DEBUG - [llm_engine.py:96] - [SQL_GEN] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:24:32,133 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:24:32] "GET /api/query/progress/e5164d33-db61-4f2c-b1f3-9f189dd44185 HTTP/1.1" 200 -
2025-04-10 01:24:32,366 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:24:32] "GET /api/query/progress/e5164d33-db61-4f2c-b1f3-9f189dd44185 HTTP/1.1" 200 -
2025-04-10 01:24:32,781 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:24:32] "GET /api/query/progress/e5164d33-db61-4f2c-b1f3-9f189dd44185 HTTP/1.1" 200 -
2025-04-10 01:24:33,553 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:24:33] "GET /api/query/progress/e5164d33-db61-4f2c-b1f3-9f189dd44185 HTTP/1.1" 200 -
2025-04-10 01:24:33,671 - DEBUG - [llm_engine.py:107] - [SQL_GEN] Model response received in 2.07s
2025-04-10 01:24:33,672 - DEBUG - [llm_engine.py:116] - [SQL_GEN] Raw model response: 'Here's a query that will retrieve the count of orders placed by each customer along with their first and last names:

```sql
SELECT 
    customers.first_name, 
    customers.last_name, 
    COUNT(orders.order_id) AS order_count
FROM customers
INNER JOIN orders ON customers.customer_id = orders.customer_id
GROUP BY customers.customer_id, customers.first_name, customers.last_name
```'
2025-04-10 01:24:33,673 - INFO - [llm_engine.py:119] - [SQL_GEN] Completion generation completed in 2.07s
2025-04-10 01:24:33,675 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:24:33,676 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-10 01:24:33,678 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-10 01:24:33,679 - INFO - [azure_client.py:171] - Extracted SQL query (255 chars) and explanation (116 chars)
2025-04-10 01:24:33,680 - INFO - [azure_client.py:124] - Generated SQL: SELECT 
    customers.first_name, 
    customers.last_name, 
    COUNT(orders.order_id) AS order_count
FROM customers
INNER JOIN orders ON customers.customer_id = orders.customer_id
GROUP BY customers.customer_id, customers.first_name, customers.last_name
2025-04-10 01:24:33,683 - INFO - [azure_client.py:132] - SQL generation completed in 2.09s
2025-04-10 01:24:33,684 - INFO - [database.py:65] - Executing SQL query: SELECT 
    customers.first_name, 
    customers.last_name, 
    COUNT(orders.order_id) AS order_count
FROM customers
INNER JOIN orders ON customers.customer_id = orders.customer_id
GROUP BY customers.customer_id, customers.first_name, customers.last_name
2025-04-10 01:24:33,687 - DEBUG - [database.py:76] - Query execution started
2025-04-10 01:24:33,689 - DEBUG - [database.py:81] - Query execution completed in 0.00s
2025-04-10 01:24:33,691 - INFO - [database.py:86] - Query returned 5 rows with 3 columns
2025-04-10 01:24:33,694 - DEBUG - [database.py:92] - Sample data (first 3 rows):
  first_name last_name  order_count
0       John       Doe            2
1       Jane     Smith            2
2      Alice   Johnson            2
2025-04-10 01:24:33,695 - INFO - [database.py:95] - Query processing completed in 0.01s
2025-04-10 01:24:33,698 - INFO - [sql_generator.py:348] - Analyzing query results for dashboard potential
2025-04-10 01:24:33,698 - INFO - [azure_client.py:197] - Dashboard analysis started for query: 'Get me count of orders by customers along with their name'
2025-04-10 01:24:33,699 - INFO - [llm_engine.py:56] - [DASHBOARD_ANALYSIS] Completion generation started
2025-04-10 01:24:33,701 - DEBUG - [llm_engine.py:87] - [DASHBOARD_ANALYSIS] Prompt: [{'role': 'system', 'content': 'You are a data visualization expert. Analyze the given query results and determine if they\'re suitable for a dashboard visualization.\n\nYour task is to:\n1. Analyze the columns and data\n2. Determine if the data is suitable for visualization (has numeric values and categorical data)\n3. If suitable, recommend the best chart type (bar, line, pie, etc.)\n4. Identify the best columns for X and Y axes (or equivalent based on chart type). Only one column for each axi... (truncated)
2025-04-10 01:24:33,701 - DEBUG - [llm_engine.py:96] - [DASHBOARD_ANALYSIS] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:24:33,792 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:24:33] "GET /api/query/progress/e5164d33-db61-4f2c-b1f3-9f189dd44185 HTTP/1.1" 200 -
2025-04-10 01:24:34,209 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:24:34] "GET /api/query/progress/e5164d33-db61-4f2c-b1f3-9f189dd44185 HTTP/1.1" 200 -
2025-04-10 01:24:34,965 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:24:34] "GET /api/query/progress/e5164d33-db61-4f2c-b1f3-9f189dd44185 HTTP/1.1" 200 -
2025-04-10 01:24:35,218 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:24:35] "GET /api/query/progress/e5164d33-db61-4f2c-b1f3-9f189dd44185 HTTP/1.1" 200 -
2025-04-10 01:24:35,619 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:24:35] "GET /api/query/progress/e5164d33-db61-4f2c-b1f3-9f189dd44185 HTTP/1.1" 200 -
2025-04-10 01:24:36,394 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:24:36] "GET /api/query/progress/e5164d33-db61-4f2c-b1f3-9f189dd44185 HTTP/1.1" 200 -
2025-04-10 01:24:36,646 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:24:36] "GET /api/query/progress/e5164d33-db61-4f2c-b1f3-9f189dd44185 HTTP/1.1" 200 -
2025-04-10 01:24:37,052 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:24:37] "GET /api/query/progress/e5164d33-db61-4f2c-b1f3-9f189dd44185 HTTP/1.1" 200 -
2025-04-10 01:24:37,821 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:24:37] "GET /api/query/progress/e5164d33-db61-4f2c-b1f3-9f189dd44185 HTTP/1.1" 200 -
2025-04-10 01:24:38,068 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:24:38] "GET /api/query/progress/e5164d33-db61-4f2c-b1f3-9f189dd44185 HTTP/1.1" 200 -
2025-04-10 01:24:38,474 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:24:38] "GET /api/query/progress/e5164d33-db61-4f2c-b1f3-9f189dd44185 HTTP/1.1" 200 -
2025-04-10 01:24:39,100 - DEBUG - [llm_engine.py:107] - [DASHBOARD_ANALYSIS] Model response received in 5.40s
2025-04-10 01:24:39,101 - DEBUG - [llm_engine.py:116] - [DASHBOARD_ANALYSIS] Raw model response: '{
  "is_suitable": true,
  "reason": "The data contains a categorical dimension (customer names) and a numeric metric (order count) suitable for comparing order counts across customers.",
  "chart_type": "bar",
  "x_axis": {
    "column": "first_name",
    "label": "Customer First Name"
  },
  "y_axis": {
    "column": "order_count",
    "label": "Number of Orders"
  },
  "title": "Order Counts by Customer"
}'
2025-04-10 01:24:39,104 - INFO - [llm_engine.py:119] - [DASHBOARD_ANALYSIS] Completion generation completed in 5.40s
2025-04-10 01:24:39,105 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:24:39,107 - INFO - [azure_client.py:255] - Dashboard analysis results: suitable=True
2025-04-10 01:24:39,110 - INFO - [azure_client.py:264] - Dashboard analysis completed in 5.41s
2025-04-10 01:24:39,113 - INFO - [sql_generator.py:366] - Dashboard analysis completed: suitable=True
2025-04-10 01:24:39,115 - INFO - [sql_generator.py:444] - SQL generation completed in 14.91s
2025-04-10 01:24:39,117 - INFO - [sql_generator.py:125] - Query processing completed in 14.92s
2025-04-10 01:24:39,248 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:24:39] "GET /api/query/progress/e5164d33-db61-4f2c-b1f3-9f189dd44185 HTTP/1.1" 200 -
2025-04-10 01:25:22,927 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/models/sql_generator.py', reloading
2025-04-10 01:25:22,927 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/models/sql_generator.py', reloading
2025-04-10 01:25:22,929 - INFO - [_internal.py:224] -  * Detected change in '/home/vijay/text2sql/src/models/sql_generator.py', reloading
2025-04-10 01:25:23,929 - INFO - [sql_generator.py:490] - Closing all agent connections
2025-04-10 01:25:23,930 - INFO - [intent_agent.py:135] - Closing intent agent's LLM engine connection
2025-04-10 01:25:23,930 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-10 01:25:23,930 - INFO - [table_agent.py:121] - Closing table agent's LLM engine connection
2025-04-10 01:25:23,930 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-10 01:25:23,930 - INFO - [column_agent.py:231] - Closing column agent's LLM engine connection
2025-04-10 01:25:23,930 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-10 01:25:23,930 - INFO - [azure_client.py:302] - Closing Azure AI client connection
2025-04-10 01:25:23,931 - DEBUG - [llm_engine.py:130] - Closing LLM Engine client connection
2025-04-10 01:25:23,931 - INFO - [database.py:258] - Closing database connection
2025-04-10 01:25:23,931 - DEBUG - [database.py:261] - Database engine disposed
2025-04-10 01:25:23,931 - INFO - [feedback_manager.py:762] - Closing database connections
2025-04-10 01:25:23,932 - DEBUG - [feedback_manager.py:765] - SQLite database engine disposed
2025-04-10 01:25:23,932 - INFO - [vector_store.py:340] - Closing vector database connection
2025-04-10 01:25:24,922 - INFO - [_internal.py:224] -  * Restarting with watchdog (inotify)
2025-04-10 01:25:30,287 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-10 01:25:30,287 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-10 01:25:30,287 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-10 01:25:30,288 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-10 01:25:30,288 - INFO - [database.py:23] - Creating new database session factory with URI: sqlite:///text2sql.db
2025-04-10 01:25:30,296 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-10 01:25:30,298 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-10 01:25:30,298 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-10 01:25:30,330 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-10 01:25:30,330 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-10 01:25:30,330 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-10 01:25:30,330 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-10 01:25:30,331 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-10 01:25:30,331 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-10 01:25:30,331 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-10 01:25:30,365 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-10 01:25:30,366 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-10 01:25:30,366 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-10 01:25:30,366 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-10 01:25:30,366 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-10 01:25:30,366 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-10 01:25:30,367 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-10 01:25:30,399 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-10 01:25:30,399 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-10 01:25:30,399 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-10 01:25:30,400 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-10 01:25:30,400 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-10 01:25:30,400 - INFO - [azure_client.py:11] - Initializing Azure AI Client using LLM Engine
2025-04-10 01:25:30,400 - INFO - [llm_engine.py:28] - Initializing LLM Engine with endpoint: https://openrouter.ai/api/v1
2025-04-10 01:25:30,400 - INFO - [llm_engine.py:29] - Using model: openrouter/quasar-alpha
2025-04-10 01:25:30,428 - INFO - [llm_engine.py:37] - LLM Engine initialized successfully
2025-04-10 01:25:30,428 - INFO - [azure_client.py:17] - Azure AI Client initialized successfully
2025-04-10 01:25:30,429 - INFO - [database.py:38] - Database manager initialized with connection: sqlite:///text2sql.db
2025-04-10 01:25:30,429 - INFO - [schema_manager.py:48] - Loading schema from /home/vijay/text2sql/config/data/schema.json
2025-04-10 01:25:30,429 - INFO - [schema_manager.py:55] - Loaded 2 workspaces from schema file
2025-04-10 01:25:30,429 - INFO - [schema_manager.py:274] - Loading join conditions from /home/vijay/text2sql/config/data/condition.json
2025-04-10 01:25:30,429 - INFO - [schema_manager.py:281] - Loaded 3 join conditions from condition file
2025-04-10 01:25:30,429 - INFO - [feedback_manager.py:35] - Feedback manager initialized with connection: sqlite:///text2sql.db
2025-04-10 01:25:30,461 - WARNING - [_internal.py:224] -  * Debugger is active!
2025-04-10 01:25:30,461 - INFO - [_internal.py:224] -  * Debugger PIN: 501-040-382
2025-04-10 01:28:46,024 - DEBUG - [app.py:84] - Main page requested
2025-04-10 01:28:46,039 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:28:46] "GET / HTTP/1.1" 200 -
2025-04-10 01:28:46,265 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:28:46] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-04-10 01:28:46,398 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:28:46] "GET /static/js/core.js HTTP/1.1" 200 -
2025-04-10 01:28:46,399 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:28:46] "GET /static/js/ui-utils.js HTTP/1.1" 200 -
2025-04-10 01:28:46,400 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:28:46] "GET /static/js/table-mentions.js HTTP/1.1" 200 -
2025-04-10 01:28:46,405 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:28:46] "GET /static/js/schema-manager.js HTTP/1.1" 200 -
2025-04-10 01:28:46,412 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:28:46] "GET /static/js/results-display.js HTTP/1.1" 200 -
2025-04-10 01:28:46,566 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:28:46] "GET /static/js/feedback.js HTTP/1.1" 200 -
2025-04-10 01:28:46,712 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:28:46] "GET /static/js/dashboard.js HTTP/1.1" 200 -
2025-04-10 01:28:46,718 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:28:46] "GET /static/js/query-handler.js HTTP/1.1" 200 -
2025-04-10 01:28:47,047 - DEBUG - [app.py:152] - Table suggestions requested for workspace: dfd, query: ''
2025-04-10 01:28:47,048 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:28:47] "GET /api/tables/suggestions?workspace=dfd HTTP/1.1" 200 -
2025-04-10 01:28:47,056 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:28:47] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-04-10 01:28:51,088 - INFO - [sql_generator.py:37] - Processing query: 'Get me count of orders by customers along with their name'
2025-04-10 01:28:51,089 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:28:51] "POST /api/query HTTP/1.1" 200 -
2025-04-10 01:28:51,089 - INFO - [intent_agent.py:27] - Intent detection started for query: 'Get me count of orders by customers along with their name'
2025-04-10 01:28:51,090 - INFO - [intent_agent.py:38] - Using default intent 'data_retrieval' without calling LLM
2025-04-10 01:28:51,091 - INFO - [intent_agent.py:41] - Intent detection completed in 0.00s
2025-04-10 01:28:51,092 - INFO - [sql_generator.py:45] - Detected intent: data_retrieval
2025-04-10 01:28:51,093 - INFO - [sql_generator.py:141] - Starting SQL generation process
2025-04-10 01:28:51,094 - INFO - [database.py:44] - Attempting database connection
2025-04-10 01:28:51,095 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-10 01:28:51,096 - INFO - [table_agent.py:28] - Table selection started for query: 'Get me count of orders by customers along with their name'
2025-04-10 01:28:51,096 - INFO - [table_agent.py:34] - Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-10 01:28:51,098 - INFO - [table_agent.py:64] - Sending request to AI model for table selection
2025-04-10 01:28:51,098 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-10 01:28:51,099 - DEBUG - [llm_engine.py:87] - [TABLE] Prompt: [{'role': 'system', 'content': "You are a table selection agent for a Text-to-SQL system.\nYour job is to identify which database tables are most relevant to a user query.\nYou will be provided with table names and their descriptions.\nReturn ONLY the names of relevant tables, separated by commas. Be selective and choose\nonly the tables that are directly needed to answer the query. If you're unsure,\ninclude tables that might be related. Return only table names in your response."}, {'role': 'us... (truncated)
2025-04-10 01:28:51,099 - DEBUG - [llm_engine.py:96] - [TABLE] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:28:51,871 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:28:51] "GET /api/query/progress/5b98270b-3fc9-4ff3-80c7-3eb4be2d2ecb HTTP/1.1" 200 -
2025-04-10 01:28:52,113 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:28:52] "GET /api/query/progress/5b98270b-3fc9-4ff3-80c7-3eb4be2d2ecb HTTP/1.1" 200 -
2025-04-10 01:28:54,222 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:28:54] "GET /api/query/progress/5b98270b-3fc9-4ff3-80c7-3eb4be2d2ecb HTTP/1.1" 200 -
2025-04-10 01:28:54,749 - DEBUG - [llm_engine.py:107] - [TABLE] Model response received in 3.65s
2025-04-10 01:28:54,749 - DEBUG - [llm_engine.py:116] - [TABLE] Raw model response: 'customers, orders'
2025-04-10 01:28:54,750 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 3.65s
2025-04-10 01:28:54,751 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:28:54,751 - INFO - [table_agent.py:69] - Raw model response: 'customers, orders'
2025-04-10 01:28:54,752 - INFO - [table_agent.py:90] - Table selection completed in 3.66s. Selected: customers, orders
2025-04-10 01:28:54,753 - INFO - [column_agent.py:29] - Column pruning started for query: 'Get me count of orders by customers along with their name'
2025-04-10 01:28:54,754 - INFO - [column_agent.py:30] - Processing tables: customers, orders
2025-04-10 01:28:54,754 - INFO - [column_agent.py:94] - Sending request to AI model for column selection
2025-04-10 01:28:54,755 - INFO - [llm_engine.py:56] - [COLUMN] Completion generation started
2025-04-10 01:28:54,756 - DEBUG - [llm_engine.py:87] - [COLUMN] Prompt: [{'role': 'system', 'content': 'You are a column selection agent for a Text-to-SQL system.\nYour job is to identify which columns from the provided tables are most relevant to a user query.\nFor each table, select only the columns that will be needed to answer the query.\nReturn your answer as a JSON object with table names as keys and arrays of column names as values.\nAlways include primary key columns even if not directly mentioned in the query.\nConsider columns that might be needed for:\n1.... (truncated)
2025-04-10 01:28:54,756 - DEBUG - [llm_engine.py:96] - [COLUMN] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:28:54,989 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:28:54] "GET /api/query/progress/5b98270b-3fc9-4ff3-80c7-3eb4be2d2ecb HTTP/1.1" 200 -
2025-04-10 01:28:55,931 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:28:55] "GET /api/query/progress/5b98270b-3fc9-4ff3-80c7-3eb4be2d2ecb HTTP/1.1" 200 -
2025-04-10 01:28:56,306 - DEBUG - [llm_engine.py:107] - [COLUMN] Model response received in 1.55s
2025-04-10 01:28:56,307 - DEBUG - [llm_engine.py:116] - [COLUMN] Raw model response: '{
  "customers": ["customer_id", "first_name", "last_name"],
  "orders": ["order_id", "customer_id"]
}'
2025-04-10 01:28:56,307 - INFO - [llm_engine.py:119] - [COLUMN] Completion generation completed in 1.55s
2025-04-10 01:28:56,307 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:28:56,308 - INFO - [column_agent.py:139] - Parsing column selection from model response
2025-04-10 01:28:56,309 - INFO - [column_agent.py:149] - Parsed column selection JSON: {"customers": ["customer_id", "first_name", "last_name"], "orders": ["order_id", "customer_id"]}
2025-04-10 01:28:56,309 - INFO - [column_agent.py:111] - Table 'customers': Pruned 8 columns, kept 3/11
2025-04-10 01:28:56,309 - INFO - [column_agent.py:111] - Table 'orders': Pruned 3 columns, kept 2/5
2025-04-10 01:28:56,310 - INFO - [column_agent.py:197] - Building pruned schema
2025-04-10 01:28:56,310 - INFO - [column_agent.py:226] - Built pruned schema (439 chars)
2025-04-10 01:28:56,311 - INFO - [column_agent.py:120] - Column pruning completed in 1.56s
2025-04-10 01:28:56,312 - INFO - [sql_generator.py:237] - Found 1 join conditions for the relevant tables
2025-04-10 01:28:56,312 - INFO - [feedback_manager.py:265] - Stage 1: Vector search for 'Get me count of orders by customers along with the...'
2025-04-10 01:28:56,312 - INFO - [feedback_manager.py:77] - Loading embedding model 'sentence-transformers/all-MiniLM-L12-v2'
2025-04-10 01:28:57,187 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:28:57] "GET /api/query/progress/5b98270b-3fc9-4ff3-80c7-3eb4be2d2ecb HTTP/1.1" 200 -
2025-04-10 01:28:57,835 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:28:57] "GET /api/query/progress/5b98270b-3fc9-4ff3-80c7-3eb4be2d2ecb HTTP/1.1" 200 -
2025-04-10 01:28:58,550 - INFO - [feedback_manager.py:80] - Embedding model loaded in 2.24s
2025-04-10 01:28:58,581 - DEBUG - [feedback_manager.py:105] - Generated embedding in 0.03s with shape (384,)
2025-04-10 01:28:58,581 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-10 01:28:59,093 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:28:59] "GET /api/query/progress/5b98270b-3fc9-4ff3-80c7-3eb4be2d2ecb HTTP/1.1" 200 -
2025-04-10 01:28:59,601 - DEBUG - [milvus_client.py:728] - Created new connection using: 50d8f739897d4a2b8d63d09e786e4e6f
2025-04-10 01:28:59,601 - INFO - [vector_store.py:42] - Vector database connection established in 1.02s
2025-04-10 01:28:59,603 - ERROR - [vector_store.py:215] - Error searching similar vectors in collection query_embeddings: argument of type 'NoneType' is not iterable
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/vector_store.py", line 176, in search_similar
    if "id" not in output_fields and not any(f.lower() == 'id' for f in output_fields):
       ^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: argument of type 'NoneType' is not iterable
2025-04-10 01:28:59,603 - WARNING - [feedback_manager.py:288] - No candidates found from vector search, falling back to text-based search
2025-04-10 01:28:59,604 - INFO - [feedback_manager.py:52] - Attempting database connection
2025-04-10 01:28:59,605 - INFO - [feedback_manager.py:56] - Database connection established in 0.00s
2025-04-10 01:28:59,606 - INFO - [vector_store.py:38] - Connecting to vector database at ./vector_store.db
2025-04-10 01:28:59,610 - DEBUG - [milvus_client.py:728] - Created new connection using: 5dc3bdac0fb34e65aae877d5a0160e7d
2025-04-10 01:28:59,611 - INFO - [vector_store.py:42] - Vector database connection established in 0.00s
2025-04-10 01:28:59,613 - INFO - [feedback_manager.py:402] - Found 1 similar queries using text-based search for 'Get me count of orders by customers along with the...'
2025-04-10 01:28:59,613 - INFO - [sql_generator.py:280] - Found 1 similar queries with reranking
2025-04-10 01:28:59,613 - INFO - [sql_generator.py:302] - Added similar query #1 from feedback (score: 0.0000): Get me count of orders by customers along with the...
2025-04-10 01:28:59,614 - INFO - [azure_client.py:35] - SQL generation started for query: 'Get me count of orders by customers along with their name'
2025-04-10 01:28:59,614 - INFO - [azure_client.py:69] - Including schema information (439 chars)
2025-04-10 01:28:59,615 - INFO - [azure_client.py:76] - Including 1 join conditions
2025-04-10 01:28:59,616 - INFO - [azure_client.py:97] - Including 1 SQL examples from feedback similarity search
2025-04-10 01:28:59,616 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER): Unique customer identifier, first_name (TEXT): Customer's first name, last_name (TEXT): Customer's last name\nPrimary Key(s): customer_id\n\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER): Unique order identifier, customer_id (INTEGER): Reference to customer who placed the order\nPrimary Key(s): order_id\n"}, {'role': 'user', 'content': 'Use the following pre-defined join conditions when joining these tables:\n- When joining customers with orders, use: INNER JOIN orders ON customers.customer_id = orders.customer_id\n'}, {'role': 'user', 'content': 'Here are some similar queries that were previously successful:\nQuestion: Get me count of orders by customers along with their name\nSQL: SELECT \n    customers.first_name, \n    customers.last_name, \n    COUNT(orders.order_id) AS order_count\nFROM customers\nINNER JOIN orders ON customers.customer_id = orders.customer_id\nGROUP BY customers.customer_id, customers.first_name, customers.last_name\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: Get me count of orders by customers along with their name'}]
2025-04-10 01:28:59,617 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-10 01:28:59,618 - DEBUG - [llm_engine.py:87] - [SQL_GEN] Prompt: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief ... (truncated)
2025-04-10 01:28:59,619 - DEBUG - [llm_engine.py:96] - [SQL_GEN] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:28:59,746 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:28:59] "GET /api/query/progress/5b98270b-3fc9-4ff3-80c7-3eb4be2d2ecb HTTP/1.1" 200 -
2025-04-10 01:29:00,982 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:29:00] "GET /api/query/progress/5b98270b-3fc9-4ff3-80c7-3eb4be2d2ecb HTTP/1.1" 200 -
2025-04-10 01:29:01,634 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:29:01] "GET /api/query/progress/5b98270b-3fc9-4ff3-80c7-3eb4be2d2ecb HTTP/1.1" 200 -
2025-04-10 01:29:02,863 - DEBUG - [llm_engine.py:107] - [SQL_GEN] Model response received in 3.24s
2025-04-10 01:29:02,864 - DEBUG - [llm_engine.py:116] - [SQL_GEN] Raw model response: 'Here's a query that will retrieve each customer's first and last name along with the total count of orders placed by them:

```sql
SELECT 
    customers.first_name, 
    customers.last_name, 
    COUNT(orders.order_id) AS order_count
FROM customers
INNER JOIN orders ON customers.customer_id = orders.customer_id
GROUP BY customers.customer_id, customers.first_name, customers.last_name
```'
2025-04-10 01:29:02,864 - INFO - [llm_engine.py:119] - [SQL_GEN] Completion generation completed in 3.25s
2025-04-10 01:29:02,865 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:29:02,866 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-10 01:29:02,866 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-10 01:29:02,867 - INFO - [azure_client.py:171] - Extracted SQL query (255 chars) and explanation (122 chars)
2025-04-10 01:29:02,867 - INFO - [azure_client.py:124] - Generated SQL: SELECT 
    customers.first_name, 
    customers.last_name, 
    COUNT(orders.order_id) AS order_count
FROM customers
INNER JOIN orders ON customers.customer_id = orders.customer_id
GROUP BY customers.customer_id, customers.first_name, customers.last_name
2025-04-10 01:29:02,868 - INFO - [azure_client.py:132] - SQL generation completed in 3.25s
2025-04-10 01:29:02,869 - INFO - [database.py:65] - Executing SQL query: SELECT 
    customers.first_name, 
    customers.last_name, 
    COUNT(orders.order_id) AS order_count
FROM customers
INNER JOIN orders ON customers.customer_id = orders.customer_id
GROUP BY customers.customer_id, customers.first_name, customers.last_name
2025-04-10 01:29:02,869 - DEBUG - [database.py:76] - Query execution started
2025-04-10 01:29:02,870 - DEBUG - [database.py:81] - Query execution completed in 0.00s
2025-04-10 01:29:02,871 - INFO - [database.py:86] - Query returned 5 rows with 3 columns
2025-04-10 01:29:02,874 - DEBUG - [database.py:92] - Sample data (first 3 rows):
  first_name last_name  order_count
0       John       Doe            2
1       Jane     Smith            2
2      Alice   Johnson            2
2025-04-10 01:29:02,874 - INFO - [database.py:95] - Query processing completed in 0.01s
2025-04-10 01:29:02,878 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:29:02] "GET /api/query/progress/5b98270b-3fc9-4ff3-80c7-3eb4be2d2ecb HTTP/1.1" 200 -
2025-04-10 01:29:02,879 - INFO - [sql_generator.py:348] - Analyzing query results for dashboard potential
2025-04-10 01:29:02,880 - INFO - [azure_client.py:197] - Dashboard analysis started for query: 'Get me count of orders by customers along with their name'
2025-04-10 01:29:02,881 - INFO - [llm_engine.py:56] - [DASHBOARD_ANALYSIS] Completion generation started
2025-04-10 01:29:02,882 - DEBUG - [llm_engine.py:87] - [DASHBOARD_ANALYSIS] Prompt: [{'role': 'system', 'content': 'You are a data visualization expert. Analyze the given query results and determine if they\'re suitable for a dashboard visualization.\n\nYour task is to:\n1. Analyze the columns and data\n2. Determine if the data is suitable for visualization (has numeric values and categorical data)\n3. If suitable, recommend the best chart type (bar, line, pie, etc.)\n4. Identify the best columns for X and Y axes (or equivalent based on chart type). Only one column for each axi... (truncated)
2025-04-10 01:29:02,882 - DEBUG - [llm_engine.py:96] - [DASHBOARD_ANALYSIS] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:29:03,551 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:29:03] "GET /api/query/progress/5b98270b-3fc9-4ff3-80c7-3eb4be2d2ecb HTTP/1.1" 200 -
2025-04-10 01:29:04,774 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:29:04] "GET /api/query/progress/5b98270b-3fc9-4ff3-80c7-3eb4be2d2ecb HTTP/1.1" 200 -
2025-04-10 01:29:05,260 - DEBUG - [llm_engine.py:107] - [DASHBOARD_ANALYSIS] Model response received in 2.38s
2025-04-10 01:29:05,260 - DEBUG - [llm_engine.py:116] - [DASHBOARD_ANALYSIS] Raw model response: '{
  "is_suitable": true,
  "reason": "The data contains categorical customer names and a numeric order count, making it suitable for visualizing order counts per customer.",
  "chart_type": "bar",
  "x_axis": {
    "column": "first_name",
    "label": "Customer First Name"
  },
  "y_axis": {
    "column": "order_count",
    "label": "Number of Orders"
  },
  "title": "Number of Orders per Customer"
}'
2025-04-10 01:29:05,260 - INFO - [llm_engine.py:119] - [DASHBOARD_ANALYSIS] Completion generation completed in 2.38s
2025-04-10 01:29:05,261 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:29:05,262 - INFO - [azure_client.py:255] - Dashboard analysis results: suitable=True
2025-04-10 01:29:05,262 - INFO - [azure_client.py:264] - Dashboard analysis completed in 2.38s
2025-04-10 01:29:05,263 - INFO - [sql_generator.py:366] - Dashboard analysis completed: suitable=True
2025-04-10 01:29:05,263 - INFO - [sql_generator.py:444] - SQL generation completed in 14.17s
2025-04-10 01:29:05,264 - INFO - [sql_generator.py:125] - Query processing completed in 14.18s
2025-04-10 01:29:05,434 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:29:05] "GET /api/query/progress/5b98270b-3fc9-4ff3-80c7-3eb4be2d2ecb HTTP/1.1" 200 -
2025-04-10 01:33:44,955 - INFO - [sql_generator.py:37] - Processing query: 'get me all customers'
2025-04-10 01:33:44,956 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:33:44] "POST /api/query HTTP/1.1" 200 -
2025-04-10 01:33:44,956 - INFO - [intent_agent.py:27] - Intent detection started for query: 'get me all customers'
2025-04-10 01:33:44,959 - INFO - [intent_agent.py:38] - Using default intent 'data_retrieval' without calling LLM
2025-04-10 01:33:44,960 - INFO - [intent_agent.py:41] - Intent detection completed in 0.00s
2025-04-10 01:33:44,960 - INFO - [sql_generator.py:45] - Detected intent: data_retrieval
2025-04-10 01:33:44,961 - INFO - [sql_generator.py:141] - Starting SQL generation process
2025-04-10 01:33:44,962 - INFO - [database.py:44] - Attempting database connection
2025-04-10 01:33:44,963 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-10 01:33:44,964 - INFO - [table_agent.py:28] - Table selection started for query: 'get me all customers'
2025-04-10 01:33:44,964 - INFO - [table_agent.py:34] - Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-10 01:33:44,965 - INFO - [table_agent.py:64] - Sending request to AI model for table selection
2025-04-10 01:33:44,966 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-10 01:33:44,966 - DEBUG - [llm_engine.py:87] - [TABLE] Prompt: [{'role': 'system', 'content': "You are a table selection agent for a Text-to-SQL system.\nYour job is to identify which database tables are most relevant to a user query.\nYou will be provided with table names and their descriptions.\nReturn ONLY the names of relevant tables, separated by commas. Be selective and choose\nonly the tables that are directly needed to answer the query. If you're unsure,\ninclude tables that might be related. Return only table names in your response."}, {'role': 'us... (truncated)
2025-04-10 01:33:44,966 - DEBUG - [llm_engine.py:96] - [TABLE] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:33:45,446 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:33:45] "GET /api/query/progress/88a0e375-78aa-4b02-8705-977ae7a2ab5c HTTP/1.1" 200 -
2025-04-10 01:33:46,228 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:33:46] "GET /api/query/progress/88a0e375-78aa-4b02-8705-977ae7a2ab5c HTTP/1.1" 200 -
2025-04-10 01:33:46,492 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:33:46] "GET /api/query/progress/88a0e375-78aa-4b02-8705-977ae7a2ab5c HTTP/1.1" 200 -
2025-04-10 01:33:46,884 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:33:46] "GET /api/query/progress/88a0e375-78aa-4b02-8705-977ae7a2ab5c HTTP/1.1" 200 -
2025-04-10 01:33:46,887 - DEBUG - [llm_engine.py:107] - [TABLE] Model response received in 1.92s
2025-04-10 01:33:46,890 - DEBUG - [llm_engine.py:116] - [TABLE] Raw model response: 'customers'
2025-04-10 01:33:46,892 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 1.93s
2025-04-10 01:33:46,894 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:33:46,896 - INFO - [table_agent.py:69] - Raw model response: 'customers'
2025-04-10 01:33:46,898 - INFO - [table_agent.py:90] - Table selection completed in 1.93s. Selected: customers
2025-04-10 01:33:46,901 - INFO - [column_agent.py:29] - Column pruning started for query: 'get me all customers'
2025-04-10 01:33:46,902 - INFO - [column_agent.py:30] - Processing tables: customers
2025-04-10 01:33:46,903 - INFO - [column_agent.py:38] - Only one table involved (customers). Skipping LLM call and including all columns.
2025-04-10 01:33:46,905 - INFO - [feedback_manager.py:265] - Stage 1: Vector search for 'get me all customers...'
2025-04-10 01:33:46,932 - DEBUG - [feedback_manager.py:105] - Generated embedding in 0.03s with shape (384,)
2025-04-10 01:33:46,934 - ERROR - [vector_store.py:215] - Error searching similar vectors in collection query_embeddings: argument of type 'NoneType' is not iterable
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/vector_store.py", line 176, in search_similar
    if "id" not in output_fields and not any(f.lower() == 'id' for f in output_fields):
       ^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: argument of type 'NoneType' is not iterable
2025-04-10 01:33:46,934 - WARNING - [feedback_manager.py:288] - No candidates found from vector search, falling back to text-based search
2025-04-10 01:33:46,936 - INFO - [feedback_manager.py:402] - Found 1 similar queries using text-based search for 'get me all customers...'
2025-04-10 01:33:46,936 - INFO - [sql_generator.py:280] - Found 1 similar queries with reranking
2025-04-10 01:33:46,937 - INFO - [sql_generator.py:302] - Added similar query #1 from feedback (score: 0.0000): Get me count of orders by customers along with the...
2025-04-10 01:33:46,937 - INFO - [azure_client.py:35] - SQL generation started for query: 'get me all customers'
2025-04-10 01:33:46,938 - INFO - [azure_client.py:69] - Including schema information (587 chars)
2025-04-10 01:33:46,939 - INFO - [azure_client.py:97] - Including 1 SQL examples from feedback similarity search
2025-04-10 01:33:46,939 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some similar queries that were previously successful:\nQuestion: Get me count of orders by customers along with their name\nSQL: SELECT \n    customers.first_name, \n    customers.last_name, \n    COUNT(orders.order_id) AS order_count\nFROM customers\nINNER JOIN orders ON customers.customer_id = orders.customer_id\nGROUP BY customers.customer_id, customers.first_name, customers.last_name\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me all customers'}]
2025-04-10 01:33:46,940 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-10 01:33:46,940 - DEBUG - [llm_engine.py:87] - [SQL_GEN] Prompt: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief ... (truncated)
2025-04-10 01:33:46,941 - DEBUG - [llm_engine.py:96] - [SQL_GEN] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:33:47,644 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:33:47] "GET /api/query/progress/88a0e375-78aa-4b02-8705-977ae7a2ab5c HTTP/1.1" 200 -
2025-04-10 01:33:47,890 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:33:47] "GET /api/query/progress/88a0e375-78aa-4b02-8705-977ae7a2ab5c HTTP/1.1" 200 -
2025-04-10 01:33:48,303 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:33:48] "GET /api/query/progress/88a0e375-78aa-4b02-8705-977ae7a2ab5c HTTP/1.1" 200 -
2025-04-10 01:33:49,079 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:33:49] "GET /api/query/progress/88a0e375-78aa-4b02-8705-977ae7a2ab5c HTTP/1.1" 200 -
2025-04-10 01:33:49,336 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:33:49] "GET /api/query/progress/88a0e375-78aa-4b02-8705-977ae7a2ab5c HTTP/1.1" 200 -
2025-04-10 01:33:49,734 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:33:49] "GET /api/query/progress/88a0e375-78aa-4b02-8705-977ae7a2ab5c HTTP/1.1" 200 -
2025-04-10 01:33:50,247 - DEBUG - [llm_engine.py:107] - [SQL_GEN] Model response received in 3.31s
2025-04-10 01:33:50,248 - DEBUG - [llm_engine.py:116] - [SQL_GEN] Raw model response: 'Here's a query that will retrieve all customer records with their details from the `customers` table:

```sql
SELECT 
    customer_id,
    first_name,
    last_name,
    email,
    phone,
    address,
    city,
    state,
    country,
    postal_code,
    registration_date
FROM customers
```'
2025-04-10 01:33:50,248 - INFO - [llm_engine.py:119] - [SQL_GEN] Completion generation completed in 3.31s
2025-04-10 01:33:50,248 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:33:50,248 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-10 01:33:50,249 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-10 01:33:50,249 - INFO - [azure_client.py:171] - Extracted SQL query (178 chars) and explanation (101 chars)
2025-04-10 01:33:50,250 - INFO - [azure_client.py:124] - Generated SQL: SELECT 
    customer_id,
    first_name,
    last_name,
    email,
    phone,
    address,
    city,
    state,
    country,
    postal_code,
    registration_date
FROM customers
2025-04-10 01:33:50,251 - INFO - [azure_client.py:132] - SQL generation completed in 3.31s
2025-04-10 01:33:50,252 - INFO - [database.py:65] - Executing SQL query: SELECT 
    customer_id,
    first_name,
    last_name,
    email,
    phone,
    address,
    city,
    state,
    country,
    postal_code,
    registration_date
FROM customers
2025-04-10 01:33:50,253 - DEBUG - [database.py:76] - Query execution started
2025-04-10 01:33:50,255 - DEBUG - [database.py:81] - Query execution completed in 0.00s
2025-04-10 01:33:50,256 - INFO - [database.py:86] - Query returned 5 rows with 11 columns
2025-04-10 01:33:50,258 - DEBUG - [database.py:92] - Sample data (first 3 rows):
   customer_id first_name last_name                   email         phone      address         city state country postal_code registration_date
0            1       John       Doe    john.doe@example.com  123-456-7890  123 Main St     New York    NY     USA       10001        2023-01-15
1            2       Jane     Smith  jane.smith@example.com  987-654-3210  456 Oak Ave  Los Angeles    CA     USA       90001        2023-02-20
2            3      Alice   Johnson       alice@example.com  555-123-4567  789 Pine St      Chicago    IL     USA       60007        2023-03-10
2025-04-10 01:33:50,259 - INFO - [database.py:95] - Query processing completed in 0.01s
2025-04-10 01:33:50,260 - INFO - [sql_generator.py:348] - Analyzing query results for dashboard potential
2025-04-10 01:33:50,260 - INFO - [azure_client.py:197] - Dashboard analysis started for query: 'get me all customers'
2025-04-10 01:33:50,260 - INFO - [llm_engine.py:56] - [DASHBOARD_ANALYSIS] Completion generation started
2025-04-10 01:33:50,261 - DEBUG - [llm_engine.py:87] - [DASHBOARD_ANALYSIS] Prompt: [{'role': 'system', 'content': 'You are a data visualization expert. Analyze the given query results and determine if they\'re suitable for a dashboard visualization.\n\nYour task is to:\n1. Analyze the columns and data\n2. Determine if the data is suitable for visualization (has numeric values and categorical data)\n3. If suitable, recommend the best chart type (bar, line, pie, etc.)\n4. Identify the best columns for X and Y axes (or equivalent based on chart type). Only one column for each axi... (truncated)
2025-04-10 01:33:50,261 - DEBUG - [llm_engine.py:96] - [DASHBOARD_ANALYSIS] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:33:50,498 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:33:50] "GET /api/query/progress/88a0e375-78aa-4b02-8705-977ae7a2ab5c HTTP/1.1" 200 -
2025-04-10 01:33:50,743 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:33:50] "GET /api/query/progress/88a0e375-78aa-4b02-8705-977ae7a2ab5c HTTP/1.1" 200 -
2025-04-10 01:33:51,164 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:33:51] "GET /api/query/progress/88a0e375-78aa-4b02-8705-977ae7a2ab5c HTTP/1.1" 200 -
2025-04-10 01:33:51,945 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:33:51] "GET /api/query/progress/88a0e375-78aa-4b02-8705-977ae7a2ab5c HTTP/1.1" 200 -
2025-04-10 01:33:52,181 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:33:52] "GET /api/query/progress/88a0e375-78aa-4b02-8705-977ae7a2ab5c HTTP/1.1" 200 -
2025-04-10 01:33:52,594 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:33:52] "GET /api/query/progress/88a0e375-78aa-4b02-8705-977ae7a2ab5c HTTP/1.1" 200 -
2025-04-10 01:33:52,686 - DEBUG - [llm_engine.py:107] - [DASHBOARD_ANALYSIS] Model response received in 2.42s
2025-04-10 01:33:52,686 - DEBUG - [llm_engine.py:116] - [DASHBOARD_ANALYSIS] Raw model response: '{
  "is_suitable": false,
  "reason": "The dataset contains predominantly categorical and identifier fields without any meaningful numeric values to aggregate or compare, making it unsuitable for standard dashboard visualizations.",
  "chart_type": null,
  "x_axis": {
    "column": null,
    "label": null
  },
  "y_axis": {
    "column": null,
    "label": null
  },
  "title": null
}'
2025-04-10 01:33:52,687 - INFO - [llm_engine.py:119] - [DASHBOARD_ANALYSIS] Completion generation completed in 2.43s
2025-04-10 01:33:52,687 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:33:52,689 - INFO - [azure_client.py:255] - Dashboard analysis results: suitable=False
2025-04-10 01:33:52,689 - INFO - [azure_client.py:264] - Dashboard analysis completed in 2.43s
2025-04-10 01:33:52,690 - INFO - [sql_generator.py:366] - Dashboard analysis completed: suitable=False
2025-04-10 01:33:52,691 - INFO - [sql_generator.py:444] - SQL generation completed in 7.73s
2025-04-10 01:33:52,692 - INFO - [sql_generator.py:125] - Query processing completed in 7.74s
2025-04-10 01:33:53,352 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:33:53] "GET /api/query/progress/88a0e375-78aa-4b02-8705-977ae7a2ab5c HTTP/1.1" 200 -
2025-04-10 01:34:16,748 - INFO - [sql_generator.py:37] - Processing query: 'get me all customers

Please plot chart with customer id and registration date'
2025-04-10 01:34:16,749 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:34:16] "POST /api/query HTTP/1.1" 200 -
2025-04-10 01:34:16,750 - INFO - [intent_agent.py:27] - Intent detection started for query: 'get me all customers

Please plot chart with customer id and registration date'
2025-04-10 01:34:16,752 - INFO - [intent_agent.py:38] - Using default intent 'data_retrieval' without calling LLM
2025-04-10 01:34:16,753 - INFO - [intent_agent.py:41] - Intent detection completed in 0.00s
2025-04-10 01:34:16,753 - INFO - [sql_generator.py:45] - Detected intent: data_retrieval
2025-04-10 01:34:16,754 - INFO - [sql_generator.py:141] - Starting SQL generation process
2025-04-10 01:34:16,755 - INFO - [database.py:44] - Attempting database connection
2025-04-10 01:34:16,756 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-10 01:34:16,757 - INFO - [table_agent.py:28] - Table selection started for query: 'get me all customers

Please plot chart with customer id and registration date'
2025-04-10 01:34:16,757 - INFO - [table_agent.py:34] - Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-10 01:34:16,758 - INFO - [table_agent.py:64] - Sending request to AI model for table selection
2025-04-10 01:34:16,758 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-10 01:34:16,759 - DEBUG - [llm_engine.py:87] - [TABLE] Prompt: [{'role': 'system', 'content': "You are a table selection agent for a Text-to-SQL system.\nYour job is to identify which database tables are most relevant to a user query.\nYou will be provided with table names and their descriptions.\nReturn ONLY the names of relevant tables, separated by commas. Be selective and choose\nonly the tables that are directly needed to answer the query. If you're unsure,\ninclude tables that might be related. Return only table names in your response."}, {'role': 'us... (truncated)
2025-04-10 01:34:16,759 - DEBUG - [llm_engine.py:96] - [TABLE] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:34:17,532 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:34:17] "GET /api/query/progress/9c61e541-0012-4d81-bd7a-bf0a4f84940d HTTP/1.1" 200 -
2025-04-10 01:34:17,773 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:34:17] "GET /api/query/progress/9c61e541-0012-4d81-bd7a-bf0a4f84940d HTTP/1.1" 200 -
2025-04-10 01:34:18,191 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:34:18] "GET /api/query/progress/9c61e541-0012-4d81-bd7a-bf0a4f84940d HTTP/1.1" 200 -
2025-04-10 01:34:18,585 - DEBUG - [llm_engine.py:107] - [TABLE] Model response received in 1.82s
2025-04-10 01:34:18,585 - DEBUG - [llm_engine.py:116] - [TABLE] Raw model response: 'customers'
2025-04-10 01:34:18,585 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 1.83s
2025-04-10 01:34:18,585 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:34:18,586 - INFO - [table_agent.py:69] - Raw model response: 'customers'
2025-04-10 01:34:18,587 - INFO - [table_agent.py:90] - Table selection completed in 1.83s. Selected: customers
2025-04-10 01:34:18,587 - INFO - [column_agent.py:29] - Column pruning started for query: 'get me all customers

Please plot chart with customer id and registration date'
2025-04-10 01:34:18,588 - INFO - [column_agent.py:30] - Processing tables: customers
2025-04-10 01:34:18,589 - INFO - [column_agent.py:38] - Only one table involved (customers). Skipping LLM call and including all columns.
2025-04-10 01:34:18,589 - INFO - [feedback_manager.py:265] - Stage 1: Vector search for 'get me all customers

Please plot chart with custo...'
2025-04-10 01:34:18,630 - DEBUG - [feedback_manager.py:105] - Generated embedding in 0.04s with shape (384,)
2025-04-10 01:34:18,631 - ERROR - [vector_store.py:215] - Error searching similar vectors in collection query_embeddings: argument of type 'NoneType' is not iterable
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/vector_store.py", line 176, in search_similar
    if "id" not in output_fields and not any(f.lower() == 'id' for f in output_fields):
       ^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: argument of type 'NoneType' is not iterable
2025-04-10 01:34:18,632 - WARNING - [feedback_manager.py:288] - No candidates found from vector search, falling back to text-based search
2025-04-10 01:34:18,634 - INFO - [feedback_manager.py:402] - Found 1 similar queries using text-based search for 'get me all customers

Please plot chart with custo...'
2025-04-10 01:34:18,634 - INFO - [sql_generator.py:280] - Found 1 similar queries with reranking
2025-04-10 01:34:18,634 - INFO - [sql_generator.py:302] - Added similar query #1 from feedback (score: 0.0000): Get me count of orders by customers along with the...
2025-04-10 01:34:18,635 - INFO - [azure_client.py:35] - SQL generation started for query: 'get me all customers

Please plot chart with customer id and registration date'
2025-04-10 01:34:18,635 - INFO - [azure_client.py:69] - Including schema information (587 chars)
2025-04-10 01:34:18,636 - INFO - [azure_client.py:97] - Including 1 SQL examples from feedback similarity search
2025-04-10 01:34:18,637 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some similar queries that were previously successful:\nQuestion: Get me count of orders by customers along with their name\nSQL: SELECT \n    customers.first_name, \n    customers.last_name, \n    COUNT(orders.order_id) AS order_count\nFROM customers\nINNER JOIN orders ON customers.customer_id = orders.customer_id\nGROUP BY customers.customer_id, customers.first_name, customers.last_name\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me all customers\n\nPlease plot chart with customer id and registration date'}]
2025-04-10 01:34:18,637 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-10 01:34:18,638 - DEBUG - [llm_engine.py:87] - [SQL_GEN] Prompt: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief ... (truncated)
2025-04-10 01:34:18,638 - DEBUG - [llm_engine.py:96] - [SQL_GEN] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:34:18,969 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:34:18] "GET /api/query/progress/9c61e541-0012-4d81-bd7a-bf0a4f84940d HTTP/1.1" 200 -
2025-04-10 01:34:19,220 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:34:19] "GET /api/query/progress/9c61e541-0012-4d81-bd7a-bf0a4f84940d HTTP/1.1" 200 -
2025-04-10 01:34:19,617 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:34:19] "GET /api/query/progress/9c61e541-0012-4d81-bd7a-bf0a4f84940d HTTP/1.1" 200 -
2025-04-10 01:34:20,406 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:34:20] "GET /api/query/progress/9c61e541-0012-4d81-bd7a-bf0a4f84940d HTTP/1.1" 200 -
2025-04-10 01:34:20,437 - DEBUG - [llm_engine.py:107] - [SQL_GEN] Model response received in 1.80s
2025-04-10 01:34:20,437 - DEBUG - [llm_engine.py:116] - [SQL_GEN] Raw model response: 'Here's a query that will retrieve all customers, selecting their customer_id and registration_date, which can be used to plot a chart:

```sql
SELECT
    customer_id,
    registration_date
FROM customers
```
'
2025-04-10 01:34:20,437 - INFO - [llm_engine.py:119] - [SQL_GEN] Completion generation completed in 1.80s
2025-04-10 01:34:20,438 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:34:20,439 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-10 01:34:20,439 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-10 01:34:20,440 - INFO - [azure_client.py:171] - Extracted SQL query (60 chars) and explanation (134 chars)
2025-04-10 01:34:20,440 - INFO - [azure_client.py:124] - Generated SQL: SELECT
    customer_id,
    registration_date
FROM customers
2025-04-10 01:34:20,440 - INFO - [azure_client.py:132] - SQL generation completed in 1.81s
2025-04-10 01:34:20,441 - INFO - [database.py:65] - Executing SQL query: SELECT
    customer_id,
    registration_date
FROM customers
2025-04-10 01:34:20,442 - DEBUG - [database.py:76] - Query execution started
2025-04-10 01:34:20,443 - DEBUG - [database.py:81] - Query execution completed in 0.00s
2025-04-10 01:34:20,443 - INFO - [database.py:86] - Query returned 5 rows with 2 columns
2025-04-10 01:34:20,445 - DEBUG - [database.py:92] - Sample data (first 3 rows):
   customer_id registration_date
0            1        2023-01-15
1            2        2023-02-20
2            3        2023-03-10
2025-04-10 01:34:20,445 - INFO - [database.py:95] - Query processing completed in 0.00s
2025-04-10 01:34:20,446 - INFO - [sql_generator.py:348] - Analyzing query results for dashboard potential
2025-04-10 01:34:20,447 - INFO - [azure_client.py:197] - Dashboard analysis started for query: 'get me all customers

Please plot chart with customer id and registration date'
2025-04-10 01:34:20,448 - INFO - [llm_engine.py:56] - [DASHBOARD_ANALYSIS] Completion generation started
2025-04-10 01:34:20,448 - DEBUG - [llm_engine.py:87] - [DASHBOARD_ANALYSIS] Prompt: [{'role': 'system', 'content': 'You are a data visualization expert. Analyze the given query results and determine if they\'re suitable for a dashboard visualization.\n\nYour task is to:\n1. Analyze the columns and data\n2. Determine if the data is suitable for visualization (has numeric values and categorical data)\n3. If suitable, recommend the best chart type (bar, line, pie, etc.)\n4. Identify the best columns for X and Y axes (or equivalent based on chart type). Only one column for each axi... (truncated)
2025-04-10 01:34:20,449 - DEBUG - [llm_engine.py:96] - [DASHBOARD_ANALYSIS] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:34:20,656 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:34:20] "GET /api/query/progress/9c61e541-0012-4d81-bd7a-bf0a4f84940d HTTP/1.1" 200 -
2025-04-10 01:34:21,053 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:34:21] "GET /api/query/progress/9c61e541-0012-4d81-bd7a-bf0a4f84940d HTTP/1.1" 200 -
2025-04-10 01:34:21,818 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:34:21] "GET /api/query/progress/9c61e541-0012-4d81-bd7a-bf0a4f84940d HTTP/1.1" 200 -
2025-04-10 01:34:22,071 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:34:22] "GET /api/query/progress/9c61e541-0012-4d81-bd7a-bf0a4f84940d HTTP/1.1" 200 -
2025-04-10 01:34:22,470 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:34:22] "GET /api/query/progress/9c61e541-0012-4d81-bd7a-bf0a4f84940d HTTP/1.1" 200 -
2025-04-10 01:34:22,488 - DEBUG - [llm_engine.py:107] - [DASHBOARD_ANALYSIS] Model response received in 2.04s
2025-04-10 01:34:22,488 - DEBUG - [llm_engine.py:116] - [DASHBOARD_ANALYSIS] Raw model response: '{
  "is_suitable": false,
  "reason": "The data only contains identifiers and dates without any numeric metric or categorical aggregation, making it unsuitable for meaningful chart visualization.",
  "chart_type": null,
  "x_axis": {
    "column": null,
    "label": null
  },
  "y_axis": {
    "column": null,
    "label": null
  },
  "title": null
}'
2025-04-10 01:34:22,488 - INFO - [llm_engine.py:119] - [DASHBOARD_ANALYSIS] Completion generation completed in 2.04s
2025-04-10 01:34:22,489 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:34:22,489 - INFO - [azure_client.py:255] - Dashboard analysis results: suitable=False
2025-04-10 01:34:22,489 - INFO - [azure_client.py:264] - Dashboard analysis completed in 2.04s
2025-04-10 01:34:22,490 - INFO - [sql_generator.py:366] - Dashboard analysis completed: suitable=False
2025-04-10 01:34:22,490 - INFO - [sql_generator.py:444] - SQL generation completed in 5.74s
2025-04-10 01:34:22,491 - INFO - [sql_generator.py:125] - Query processing completed in 5.74s
2025-04-10 01:34:23,248 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:34:23] "GET /api/query/progress/9c61e541-0012-4d81-bd7a-bf0a4f84940d HTTP/1.1" 200 -
2025-04-10 01:34:50,043 - INFO - [sql_generator.py:37] - Processing query: 'get me all customers'
2025-04-10 01:34:50,044 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:34:50] "POST /api/query HTTP/1.1" 200 -
2025-04-10 01:34:50,044 - INFO - [intent_agent.py:27] - Intent detection started for query: 'get me all customers'
2025-04-10 01:34:50,046 - INFO - [intent_agent.py:38] - Using default intent 'data_retrieval' without calling LLM
2025-04-10 01:34:50,047 - INFO - [intent_agent.py:41] - Intent detection completed in 0.00s
2025-04-10 01:34:50,048 - INFO - [sql_generator.py:45] - Detected intent: data_retrieval
2025-04-10 01:34:50,049 - INFO - [sql_generator.py:141] - Starting SQL generation process
2025-04-10 01:34:50,049 - INFO - [database.py:44] - Attempting database connection
2025-04-10 01:34:50,050 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-10 01:34:50,051 - INFO - [table_agent.py:28] - Table selection started for query: 'get me all customers'
2025-04-10 01:34:50,052 - INFO - [table_agent.py:34] - Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-10 01:34:50,053 - INFO - [table_agent.py:64] - Sending request to AI model for table selection
2025-04-10 01:34:50,054 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-10 01:34:50,055 - DEBUG - [llm_engine.py:87] - [TABLE] Prompt: [{'role': 'system', 'content': "You are a table selection agent for a Text-to-SQL system.\nYour job is to identify which database tables are most relevant to a user query.\nYou will be provided with table names and their descriptions.\nReturn ONLY the names of relevant tables, separated by commas. Be selective and choose\nonly the tables that are directly needed to answer the query. If you're unsure,\ninclude tables that might be related. Return only table names in your response."}, {'role': 'us... (truncated)
2025-04-10 01:34:50,056 - DEBUG - [llm_engine.py:96] - [TABLE] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:34:50,832 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:34:50] "GET /api/query/progress/c1524714-cd12-4962-8a40-91746bf03182 HTTP/1.1" 200 -
2025-04-10 01:34:51,082 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:34:51] "GET /api/query/progress/c1524714-cd12-4962-8a40-91746bf03182 HTTP/1.1" 200 -
2025-04-10 01:34:51,490 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:34:51] "GET /api/query/progress/c1524714-cd12-4962-8a40-91746bf03182 HTTP/1.1" 200 -
2025-04-10 01:34:51,616 - DEBUG - [llm_engine.py:107] - [TABLE] Model response received in 1.56s
2025-04-10 01:34:51,616 - DEBUG - [llm_engine.py:116] - [TABLE] Raw model response: 'customers'
2025-04-10 01:34:51,617 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 1.56s
2025-04-10 01:34:51,618 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:34:51,618 - INFO - [table_agent.py:69] - Raw model response: 'customers'
2025-04-10 01:34:51,619 - INFO - [table_agent.py:90] - Table selection completed in 1.57s. Selected: customers
2025-04-10 01:34:51,620 - INFO - [column_agent.py:29] - Column pruning started for query: 'get me all customers'
2025-04-10 01:34:51,620 - INFO - [column_agent.py:30] - Processing tables: customers
2025-04-10 01:34:51,621 - INFO - [column_agent.py:38] - Only one table involved (customers). Skipping LLM call and including all columns.
2025-04-10 01:34:51,621 - INFO - [feedback_manager.py:265] - Stage 1: Vector search for 'get me all customers...'
2025-04-10 01:34:51,644 - DEBUG - [feedback_manager.py:105] - Generated embedding in 0.02s with shape (384,)
2025-04-10 01:34:51,645 - ERROR - [vector_store.py:215] - Error searching similar vectors in collection query_embeddings: argument of type 'NoneType' is not iterable
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/vector_store.py", line 176, in search_similar
    if "id" not in output_fields and not any(f.lower() == 'id' for f in output_fields):
       ^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: argument of type 'NoneType' is not iterable
2025-04-10 01:34:51,646 - WARNING - [feedback_manager.py:288] - No candidates found from vector search, falling back to text-based search
2025-04-10 01:34:51,647 - INFO - [feedback_manager.py:402] - Found 1 similar queries using text-based search for 'get me all customers...'
2025-04-10 01:34:51,647 - INFO - [sql_generator.py:280] - Found 1 similar queries with reranking
2025-04-10 01:34:51,647 - INFO - [sql_generator.py:302] - Added similar query #1 from feedback (score: 0.0000): Get me count of orders by customers along with the...
2025-04-10 01:34:51,648 - INFO - [azure_client.py:35] - SQL generation started for query: 'get me all customers'
2025-04-10 01:34:51,648 - INFO - [azure_client.py:69] - Including schema information (587 chars)
2025-04-10 01:34:51,649 - INFO - [azure_client.py:97] - Including 1 SQL examples from feedback similarity search
2025-04-10 01:34:51,649 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: customers\nDescription: Customer information and profiles\nColumns: customer_id (INTEGER) - Unique customer identifier, first_name (TEXT) - Customer's first name, last_name (TEXT) - Customer's last name, email (TEXT) - Customer's email address (unique), phone (TEXT) - Customer's phone number, address (TEXT) - Customer's street address, city (TEXT) - Customer's city, state (TEXT) - Customer's state/province, country (TEXT) - Customer's country, postal_code (TEXT) - Customer's postal/zip code, registration_date (TEXT) - Date when customer registered\nPrimary Key(s): customer_id\n"}, {'role': 'user', 'content': 'Here are some similar queries that were previously successful:\nQuestion: Get me count of orders by customers along with their name\nSQL: SELECT \n    customers.first_name, \n    customers.last_name, \n    COUNT(orders.order_id) AS order_count\nFROM customers\nINNER JOIN orders ON customers.customer_id = orders.customer_id\nGROUP BY customers.customer_id, customers.first_name, customers.last_name\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me all customers'}]
2025-04-10 01:34:51,650 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-10 01:34:51,650 - DEBUG - [llm_engine.py:87] - [SQL_GEN] Prompt: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief ... (truncated)
2025-04-10 01:34:51,651 - DEBUG - [llm_engine.py:96] - [SQL_GEN] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:34:52,263 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:34:52] "GET /api/query/progress/c1524714-cd12-4962-8a40-91746bf03182 HTTP/1.1" 200 -
2025-04-10 01:34:52,503 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:34:52] "GET /api/query/progress/c1524714-cd12-4962-8a40-91746bf03182 HTTP/1.1" 200 -
2025-04-10 01:34:52,914 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:34:52] "GET /api/query/progress/c1524714-cd12-4962-8a40-91746bf03182 HTTP/1.1" 200 -
2025-04-10 01:34:53,354 - DEBUG - [llm_engine.py:107] - [SQL_GEN] Model response received in 1.70s
2025-04-10 01:34:53,354 - DEBUG - [llm_engine.py:116] - [SQL_GEN] Raw model response: 'Here's a query that will retrieve all customers, selecting all columns from the `customers` table:

```sql
SELECT 
    customer_id,
    first_name,
    last_name,
    email,
    phone,
    address,
    city,
    state,
    country,
    postal_code,
    registration_date
FROM customers
```'
2025-04-10 01:34:53,355 - INFO - [llm_engine.py:119] - [SQL_GEN] Completion generation completed in 1.70s
2025-04-10 01:34:53,355 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:34:53,356 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-10 01:34:53,356 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-10 01:34:53,357 - INFO - [azure_client.py:171] - Extracted SQL query (178 chars) and explanation (98 chars)
2025-04-10 01:34:53,357 - INFO - [azure_client.py:124] - Generated SQL: SELECT 
    customer_id,
    first_name,
    last_name,
    email,
    phone,
    address,
    city,
    state,
    country,
    postal_code,
    registration_date
FROM customers
2025-04-10 01:34:53,367 - INFO - [azure_client.py:132] - SQL generation completed in 1.72s
2025-04-10 01:34:53,368 - INFO - [database.py:65] - Executing SQL query: SELECT 
    customer_id,
    first_name,
    last_name,
    email,
    phone,
    address,
    city,
    state,
    country,
    postal_code,
    registration_date
FROM customers
2025-04-10 01:34:53,369 - DEBUG - [database.py:76] - Query execution started
2025-04-10 01:34:53,371 - DEBUG - [database.py:81] - Query execution completed in 0.00s
2025-04-10 01:34:53,372 - INFO - [database.py:86] - Query returned 5 rows with 11 columns
2025-04-10 01:34:53,376 - DEBUG - [database.py:92] - Sample data (first 3 rows):
   customer_id first_name last_name                   email         phone      address         city state country postal_code registration_date
0            1       John       Doe    john.doe@example.com  123-456-7890  123 Main St     New York    NY     USA       10001        2023-01-15
1            2       Jane     Smith  jane.smith@example.com  987-654-3210  456 Oak Ave  Los Angeles    CA     USA       90001        2023-02-20
2            3      Alice   Johnson       alice@example.com  555-123-4567  789 Pine St      Chicago    IL     USA       60007        2023-03-10
2025-04-10 01:34:53,377 - INFO - [database.py:95] - Query processing completed in 0.01s
2025-04-10 01:34:53,381 - INFO - [sql_generator.py:348] - Analyzing query results for dashboard potential
2025-04-10 01:34:53,384 - INFO - [azure_client.py:197] - Dashboard analysis started for query: 'get me all customers'
2025-04-10 01:34:53,386 - INFO - [llm_engine.py:56] - [DASHBOARD_ANALYSIS] Completion generation started
2025-04-10 01:34:53,387 - DEBUG - [llm_engine.py:87] - [DASHBOARD_ANALYSIS] Prompt: [{'role': 'system', 'content': 'You are a data visualization expert. Analyze the given query results and determine if they\'re suitable for a dashboard visualization.\n\nYour task is to:\n1. Analyze the columns and data\n2. Determine if the data is suitable for visualization (has numeric values and categorical data)\n3. If suitable, recommend the best chart type (bar, line, pie, etc.)\n4. Identify the best columns for X and Y axes (or equivalent based on chart type). Only one column for each axi... (truncated)
2025-04-10 01:34:53,387 - DEBUG - [llm_engine.py:96] - [DASHBOARD_ANALYSIS] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:34:53,686 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:34:53] "GET /api/query/progress/c1524714-cd12-4962-8a40-91746bf03182 HTTP/1.1" 200 -
2025-04-10 01:34:53,928 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:34:53] "GET /api/query/progress/c1524714-cd12-4962-8a40-91746bf03182 HTTP/1.1" 200 -
2025-04-10 01:34:54,347 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:34:54] "GET /api/query/progress/c1524714-cd12-4962-8a40-91746bf03182 HTTP/1.1" 200 -
2025-04-10 01:34:55,110 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:34:55] "GET /api/query/progress/c1524714-cd12-4962-8a40-91746bf03182 HTTP/1.1" 200 -
2025-04-10 01:34:55,368 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:34:55] "GET /api/query/progress/c1524714-cd12-4962-8a40-91746bf03182 HTTP/1.1" 200 -
2025-04-10 01:34:55,767 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:34:55] "GET /api/query/progress/c1524714-cd12-4962-8a40-91746bf03182 HTTP/1.1" 200 -
2025-04-10 01:34:56,540 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:34:56] "GET /api/query/progress/c1524714-cd12-4962-8a40-91746bf03182 HTTP/1.1" 200 -
2025-04-10 01:34:56,800 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:34:56] "GET /api/query/progress/c1524714-cd12-4962-8a40-91746bf03182 HTTP/1.1" 200 -
2025-04-10 01:34:57,006 - DEBUG - [llm_engine.py:107] - [DASHBOARD_ANALYSIS] Model response received in 3.62s
2025-04-10 01:34:57,007 - DEBUG - [llm_engine.py:116] - [DASHBOARD_ANALYSIS] Raw model response: '{
  "is_suitable": false,
  "reason": "The data consists primarily of customer details without any numeric or aggregated values suitable for visualization. It is more appropriate for tabular display or detailed listings rather than charts.",
  "chart_type": null,
  "x_axis": {
    "column": null,
    "label": null
  },
  "y_axis": {
    "column": null,
    "label": null
  },
  "title": null
}'
2025-04-10 01:34:57,008 - INFO - [llm_engine.py:119] - [DASHBOARD_ANALYSIS] Completion generation completed in 3.62s
2025-04-10 01:34:57,009 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:34:57,009 - INFO - [azure_client.py:255] - Dashboard analysis results: suitable=False
2025-04-10 01:34:57,010 - INFO - [azure_client.py:264] - Dashboard analysis completed in 3.63s
2025-04-10 01:34:57,010 - INFO - [sql_generator.py:366] - Dashboard analysis completed: suitable=False
2025-04-10 01:34:57,011 - INFO - [sql_generator.py:444] - SQL generation completed in 6.96s
2025-04-10 01:34:57,012 - INFO - [sql_generator.py:125] - Query processing completed in 6.97s
2025-04-10 01:34:57,200 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:34:57] "GET /api/query/progress/c1524714-cd12-4962-8a40-91746bf03182 HTTP/1.1" 200 -
2025-04-10 01:35:30,259 - INFO - [sql_generator.py:37] - Processing query: 'get me all from orders'
2025-04-10 01:35:30,260 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:35:30] "POST /api/query HTTP/1.1" 200 -
2025-04-10 01:35:30,260 - INFO - [intent_agent.py:27] - Intent detection started for query: 'get me all from orders'
2025-04-10 01:35:30,262 - INFO - [intent_agent.py:38] - Using default intent 'data_retrieval' without calling LLM
2025-04-10 01:35:30,263 - INFO - [intent_agent.py:41] - Intent detection completed in 0.00s
2025-04-10 01:35:30,264 - INFO - [sql_generator.py:45] - Detected intent: data_retrieval
2025-04-10 01:35:30,265 - INFO - [sql_generator.py:141] - Starting SQL generation process
2025-04-10 01:35:30,266 - INFO - [database.py:44] - Attempting database connection
2025-04-10 01:35:30,267 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-10 01:35:30,268 - INFO - [table_agent.py:28] - Table selection started for query: 'get me all from orders'
2025-04-10 01:35:30,269 - INFO - [table_agent.py:34] - Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-10 01:35:30,269 - INFO - [table_agent.py:64] - Sending request to AI model for table selection
2025-04-10 01:35:30,270 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-10 01:35:30,270 - DEBUG - [llm_engine.py:87] - [TABLE] Prompt: [{'role': 'system', 'content': "You are a table selection agent for a Text-to-SQL system.\nYour job is to identify which database tables are most relevant to a user query.\nYou will be provided with table names and their descriptions.\nReturn ONLY the names of relevant tables, separated by commas. Be selective and choose\nonly the tables that are directly needed to answer the query. If you're unsure,\ninclude tables that might be related. Return only table names in your response."}, {'role': 'us... (truncated)
2025-04-10 01:35:30,271 - DEBUG - [llm_engine.py:96] - [TABLE] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:35:30,757 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:35:30] "GET /api/query/progress/81105fc4-bfc6-435d-af74-ea99c7a77776 HTTP/1.1" 200 -
2025-04-10 01:35:31,533 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:35:31] "GET /api/query/progress/81105fc4-bfc6-435d-af74-ea99c7a77776 HTTP/1.1" 200 -
2025-04-10 01:35:31,784 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:35:31] "GET /api/query/progress/81105fc4-bfc6-435d-af74-ea99c7a77776 HTTP/1.1" 200 -
2025-04-10 01:35:32,191 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:35:32] "GET /api/query/progress/81105fc4-bfc6-435d-af74-ea99c7a77776 HTTP/1.1" 200 -
2025-04-10 01:35:32,483 - DEBUG - [llm_engine.py:107] - [TABLE] Model response received in 2.21s
2025-04-10 01:35:32,483 - DEBUG - [llm_engine.py:116] - [TABLE] Raw model response: 'orders'
2025-04-10 01:35:32,485 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 2.22s
2025-04-10 01:35:32,486 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:35:32,488 - INFO - [table_agent.py:69] - Raw model response: 'orders'
2025-04-10 01:35:32,490 - INFO - [table_agent.py:90] - Table selection completed in 2.22s. Selected: orders
2025-04-10 01:35:32,491 - INFO - [column_agent.py:29] - Column pruning started for query: 'get me all from orders'
2025-04-10 01:35:32,492 - INFO - [column_agent.py:30] - Processing tables: orders
2025-04-10 01:35:32,493 - INFO - [column_agent.py:38] - Only one table involved (orders). Skipping LLM call and including all columns.
2025-04-10 01:35:32,495 - INFO - [feedback_manager.py:265] - Stage 1: Vector search for 'get me all from orders...'
2025-04-10 01:35:32,529 - DEBUG - [feedback_manager.py:105] - Generated embedding in 0.03s with shape (384,)
2025-04-10 01:35:32,530 - ERROR - [vector_store.py:215] - Error searching similar vectors in collection query_embeddings: argument of type 'NoneType' is not iterable
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/vector_store.py", line 176, in search_similar
    if "id" not in output_fields and not any(f.lower() == 'id' for f in output_fields):
       ^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: argument of type 'NoneType' is not iterable
2025-04-10 01:35:32,531 - WARNING - [feedback_manager.py:288] - No candidates found from vector search, falling back to text-based search
2025-04-10 01:35:32,532 - INFO - [feedback_manager.py:402] - Found 1 similar queries using text-based search for 'get me all from orders...'
2025-04-10 01:35:32,533 - INFO - [sql_generator.py:280] - Found 1 similar queries with reranking
2025-04-10 01:35:32,533 - INFO - [sql_generator.py:302] - Added similar query #1 from feedback (score: 0.0000): Get me count of orders by customers along with the...
2025-04-10 01:35:32,534 - INFO - [azure_client.py:35] - SQL generation started for query: 'get me all from orders'
2025-04-10 01:35:32,535 - INFO - [azure_client.py:69] - Including schema information (363 chars)
2025-04-10 01:35:32,536 - INFO - [azure_client.py:97] - Including 1 SQL examples from feedback similarity search
2025-04-10 01:35:32,536 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER) - Unique order identifier, customer_id (INTEGER) - Reference to customer who placed the order, order_date (TEXT) - Date when order was placed, status (TEXT) - Order status (pending, shipped, completed, etc.), total_amount (REAL) - Total order amount\nPrimary Key(s): order_id\n"}, {'role': 'user', 'content': 'Here are some similar queries that were previously successful:\nQuestion: Get me count of orders by customers along with their name\nSQL: SELECT \n    customers.first_name, \n    customers.last_name, \n    COUNT(orders.order_id) AS order_count\nFROM customers\nINNER JOIN orders ON customers.customer_id = orders.customer_id\nGROUP BY customers.customer_id, customers.first_name, customers.last_name\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me all from orders'}]
2025-04-10 01:35:32,538 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-10 01:35:32,539 - DEBUG - [llm_engine.py:87] - [SQL_GEN] Prompt: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief ... (truncated)
2025-04-10 01:35:32,539 - DEBUG - [llm_engine.py:96] - [SQL_GEN] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:35:32,946 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:35:32] "GET /api/query/progress/81105fc4-bfc6-435d-af74-ea99c7a77776 HTTP/1.1" 200 -
2025-04-10 01:35:33,187 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:35:33] "GET /api/query/progress/81105fc4-bfc6-435d-af74-ea99c7a77776 HTTP/1.1" 200 -
2025-04-10 01:35:33,606 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:35:33] "GET /api/query/progress/81105fc4-bfc6-435d-af74-ea99c7a77776 HTTP/1.1" 200 -
2025-04-10 01:35:34,256 - DEBUG - [llm_engine.py:107] - [SQL_GEN] Model response received in 1.72s
2025-04-10 01:35:34,256 - DEBUG - [llm_engine.py:116] - [SQL_GEN] Raw model response: 'Here's a query that will retrieve all columns from the `orders` table:

```sql
SELECT 
    order_id,
    customer_id,
    order_date,
    status,
    total_amount
FROM orders
```'
2025-04-10 01:35:34,256 - INFO - [llm_engine.py:119] - [SQL_GEN] Completion generation completed in 1.72s
2025-04-10 01:35:34,257 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:35:34,257 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-10 01:35:34,258 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-10 01:35:34,258 - INFO - [azure_client.py:171] - Extracted SQL query (95 chars) and explanation (70 chars)
2025-04-10 01:35:34,259 - INFO - [azure_client.py:124] - Generated SQL: SELECT 
    order_id,
    customer_id,
    order_date,
    status,
    total_amount
FROM orders
2025-04-10 01:35:34,259 - INFO - [azure_client.py:132] - SQL generation completed in 1.73s
2025-04-10 01:35:34,260 - INFO - [database.py:65] - Executing SQL query: SELECT 
    order_id,
    customer_id,
    order_date,
    status,
    total_amount
FROM orders
2025-04-10 01:35:34,261 - DEBUG - [database.py:76] - Query execution started
2025-04-10 01:35:34,262 - DEBUG - [database.py:81] - Query execution completed in 0.00s
2025-04-10 01:35:34,263 - INFO - [database.py:86] - Query returned 8 rows with 5 columns
2025-04-10 01:35:34,265 - DEBUG - [database.py:92] - Sample data (first 3 rows):
   order_id  customer_id  order_date     status  total_amount
0         1            1  2023-04-01  completed       1299.99
1         2            2  2023-04-05  completed        879.98
2         3            3  2023-04-10  completed         89.99
2025-04-10 01:35:34,265 - INFO - [database.py:95] - Query processing completed in 0.01s
2025-04-10 01:35:34,267 - INFO - [sql_generator.py:348] - Analyzing query results for dashboard potential
2025-04-10 01:35:34,267 - INFO - [azure_client.py:197] - Dashboard analysis started for query: 'get me all from orders'
2025-04-10 01:35:34,268 - INFO - [llm_engine.py:56] - [DASHBOARD_ANALYSIS] Completion generation started
2025-04-10 01:35:34,268 - DEBUG - [llm_engine.py:87] - [DASHBOARD_ANALYSIS] Prompt: [{'role': 'system', 'content': 'You are a data visualization expert. Analyze the given query results and determine if they\'re suitable for a dashboard visualization.\n\nYour task is to:\n1. Analyze the columns and data\n2. Determine if the data is suitable for visualization (has numeric values and categorical data)\n3. If suitable, recommend the best chart type (bar, line, pie, etc.)\n4. Identify the best columns for X and Y axes (or equivalent based on chart type). Only one column for each axi... (truncated)
2025-04-10 01:35:34,269 - DEBUG - [llm_engine.py:96] - [DASHBOARD_ANALYSIS] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:35:34,381 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:35:34] "GET /api/query/progress/81105fc4-bfc6-435d-af74-ea99c7a77776 HTTP/1.1" 200 -
2025-04-10 01:35:34,625 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:35:34] "GET /api/query/progress/81105fc4-bfc6-435d-af74-ea99c7a77776 HTTP/1.1" 200 -
2025-04-10 01:35:35,039 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:35:35] "GET /api/query/progress/81105fc4-bfc6-435d-af74-ea99c7a77776 HTTP/1.1" 200 -
2025-04-10 01:35:35,804 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:35:35] "GET /api/query/progress/81105fc4-bfc6-435d-af74-ea99c7a77776 HTTP/1.1" 200 -
2025-04-10 01:35:36,063 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:35:36] "GET /api/query/progress/81105fc4-bfc6-435d-af74-ea99c7a77776 HTTP/1.1" 200 -
2025-04-10 01:35:36,469 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:35:36] "GET /api/query/progress/81105fc4-bfc6-435d-af74-ea99c7a77776 HTTP/1.1" 200 -
2025-04-10 01:35:37,242 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:35:37] "GET /api/query/progress/81105fc4-bfc6-435d-af74-ea99c7a77776 HTTP/1.1" 200 -
2025-04-10 01:35:37,487 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:35:37] "GET /api/query/progress/81105fc4-bfc6-435d-af74-ea99c7a77776 HTTP/1.1" 200 -
2025-04-10 01:35:37,663 - DEBUG - [llm_engine.py:107] - [DASHBOARD_ANALYSIS] Model response received in 3.39s
2025-04-10 01:35:37,664 - DEBUG - [llm_engine.py:116] - [DASHBOARD_ANALYSIS] Raw model response: '{
  "is_suitable": true,
  "reason": "The data contains categorical columns like 'status' and 'order_date' (time series), and a numeric column 'total_amount', making it suitable for visualization such as comparing order totals over time or by status.",
  "chart_type": "line",
  "x_axis": {
    "column": "order_date",
    "label": "Order Date"
  },
  "y_axis": {
    "column": "total_amount",
    "label": "Total Order Amount ($)"
  },
  "title": "Order Total Amount Over Time"
}'
2025-04-10 01:35:37,665 - INFO - [llm_engine.py:119] - [DASHBOARD_ANALYSIS] Completion generation completed in 3.40s
2025-04-10 01:35:37,667 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:35:37,668 - INFO - [azure_client.py:255] - Dashboard analysis results: suitable=True
2025-04-10 01:35:37,670 - INFO - [azure_client.py:264] - Dashboard analysis completed in 3.40s
2025-04-10 01:35:37,671 - INFO - [sql_generator.py:366] - Dashboard analysis completed: suitable=True
2025-04-10 01:35:37,673 - INFO - [sql_generator.py:444] - SQL generation completed in 7.41s
2025-04-10 01:35:37,674 - INFO - [sql_generator.py:125] - Query processing completed in 7.42s
2025-04-10 01:35:37,888 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:35:37] "GET /api/query/progress/81105fc4-bfc6-435d-af74-ea99c7a77776 HTTP/1.1" 200 -
2025-04-10 01:35:58,441 - INFO - [sql_generator.py:37] - Processing query: 'get me all from orders

Plot using status and total amount'
2025-04-10 01:35:58,442 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:35:58] "POST /api/query HTTP/1.1" 200 -
2025-04-10 01:35:58,442 - INFO - [intent_agent.py:27] - Intent detection started for query: 'get me all from orders

Plot using status and total amount'
2025-04-10 01:35:58,446 - INFO - [intent_agent.py:38] - Using default intent 'data_retrieval' without calling LLM
2025-04-10 01:35:58,446 - INFO - [intent_agent.py:41] - Intent detection completed in 0.00s
2025-04-10 01:35:58,447 - INFO - [sql_generator.py:45] - Detected intent: data_retrieval
2025-04-10 01:35:58,448 - INFO - [sql_generator.py:141] - Starting SQL generation process
2025-04-10 01:35:58,449 - INFO - [database.py:44] - Attempting database connection
2025-04-10 01:35:58,450 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-10 01:35:58,452 - INFO - [table_agent.py:28] - Table selection started for query: 'get me all from orders

Plot using status and total amount'
2025-04-10 01:35:58,452 - INFO - [table_agent.py:34] - Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-10 01:35:58,452 - INFO - [table_agent.py:64] - Sending request to AI model for table selection
2025-04-10 01:35:58,453 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-10 01:35:58,453 - DEBUG - [llm_engine.py:87] - [TABLE] Prompt: [{'role': 'system', 'content': "You are a table selection agent for a Text-to-SQL system.\nYour job is to identify which database tables are most relevant to a user query.\nYou will be provided with table names and their descriptions.\nReturn ONLY the names of relevant tables, separated by commas. Be selective and choose\nonly the tables that are directly needed to answer the query. If you're unsure,\ninclude tables that might be related. Return only table names in your response."}, {'role': 'us... (truncated)
2025-04-10 01:35:58,454 - DEBUG - [llm_engine.py:96] - [TABLE] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:35:58,934 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:35:58] "GET /api/query/progress/d1b1c8ed-5f03-404e-8cee-f5d71425e014 HTTP/1.1" 200 -
2025-04-10 01:35:59,716 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:35:59] "GET /api/query/progress/d1b1c8ed-5f03-404e-8cee-f5d71425e014 HTTP/1.1" 200 -
2025-04-10 01:35:59,969 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:35:59] "GET /api/query/progress/d1b1c8ed-5f03-404e-8cee-f5d71425e014 HTTP/1.1" 200 -
2025-04-10 01:36:00,373 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:36:00] "GET /api/query/progress/d1b1c8ed-5f03-404e-8cee-f5d71425e014 HTTP/1.1" 200 -
2025-04-10 01:36:00,949 - DEBUG - [llm_engine.py:107] - [TABLE] Model response received in 2.50s
2025-04-10 01:36:00,950 - DEBUG - [llm_engine.py:116] - [TABLE] Raw model response: 'orders'
2025-04-10 01:36:00,952 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 2.50s
2025-04-10 01:36:00,956 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:36:00,960 - INFO - [table_agent.py:69] - Raw model response: 'orders'
2025-04-10 01:36:00,962 - INFO - [table_agent.py:90] - Table selection completed in 2.51s. Selected: orders
2025-04-10 01:36:00,964 - INFO - [column_agent.py:29] - Column pruning started for query: 'get me all from orders

Plot using status and total amount'
2025-04-10 01:36:00,966 - INFO - [column_agent.py:30] - Processing tables: orders
2025-04-10 01:36:00,968 - INFO - [column_agent.py:38] - Only one table involved (orders). Skipping LLM call and including all columns.
2025-04-10 01:36:00,970 - INFO - [feedback_manager.py:265] - Stage 1: Vector search for 'get me all from orders

Plot using status and tota...'
2025-04-10 01:36:01,004 - DEBUG - [feedback_manager.py:105] - Generated embedding in 0.03s with shape (384,)
2025-04-10 01:36:01,006 - ERROR - [vector_store.py:215] - Error searching similar vectors in collection query_embeddings: argument of type 'NoneType' is not iterable
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/vector_store.py", line 176, in search_similar
    if "id" not in output_fields and not any(f.lower() == 'id' for f in output_fields):
       ^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: argument of type 'NoneType' is not iterable
2025-04-10 01:36:01,006 - WARNING - [feedback_manager.py:288] - No candidates found from vector search, falling back to text-based search
2025-04-10 01:36:01,008 - INFO - [feedback_manager.py:402] - Found 1 similar queries using text-based search for 'get me all from orders

Plot using status and tota...'
2025-04-10 01:36:01,008 - INFO - [sql_generator.py:280] - Found 1 similar queries with reranking
2025-04-10 01:36:01,008 - INFO - [sql_generator.py:302] - Added similar query #1 from feedback (score: 0.0000): Get me count of orders by customers along with the...
2025-04-10 01:36:01,009 - INFO - [azure_client.py:35] - SQL generation started for query: 'get me all from orders

Plot using status and total amount'
2025-04-10 01:36:01,010 - INFO - [azure_client.py:69] - Including schema information (363 chars)
2025-04-10 01:36:01,010 - INFO - [azure_client.py:97] - Including 1 SQL examples from feedback similarity search
2025-04-10 01:36:01,011 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER) - Unique order identifier, customer_id (INTEGER) - Reference to customer who placed the order, order_date (TEXT) - Date when order was placed, status (TEXT) - Order status (pending, shipped, completed, etc.), total_amount (REAL) - Total order amount\nPrimary Key(s): order_id\n"}, {'role': 'user', 'content': 'Here are some similar queries that were previously successful:\nQuestion: Get me count of orders by customers along with their name\nSQL: SELECT \n    customers.first_name, \n    customers.last_name, \n    COUNT(orders.order_id) AS order_count\nFROM customers\nINNER JOIN orders ON customers.customer_id = orders.customer_id\nGROUP BY customers.customer_id, customers.first_name, customers.last_name\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me all from orders\n\nPlot using status and total amount'}]
2025-04-10 01:36:01,011 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-10 01:36:01,012 - DEBUG - [llm_engine.py:87] - [SQL_GEN] Prompt: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief ... (truncated)
2025-04-10 01:36:01,012 - DEBUG - [llm_engine.py:96] - [SQL_GEN] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:36:01,127 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:36:01] "GET /api/query/progress/d1b1c8ed-5f03-404e-8cee-f5d71425e014 HTTP/1.1" 200 -
2025-04-10 01:36:01,377 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:36:01] "GET /api/query/progress/d1b1c8ed-5f03-404e-8cee-f5d71425e014 HTTP/1.1" 200 -
2025-04-10 01:36:01,794 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:36:01] "GET /api/query/progress/d1b1c8ed-5f03-404e-8cee-f5d71425e014 HTTP/1.1" 200 -
2025-04-10 01:36:02,566 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:36:02] "GET /api/query/progress/d1b1c8ed-5f03-404e-8cee-f5d71425e014 HTTP/1.1" 200 -
2025-04-10 01:36:02,811 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:36:02] "GET /api/query/progress/d1b1c8ed-5f03-404e-8cee-f5d71425e014 HTTP/1.1" 200 -
2025-04-10 01:36:03,225 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:36:03] "GET /api/query/progress/d1b1c8ed-5f03-404e-8cee-f5d71425e014 HTTP/1.1" 200 -
2025-04-10 01:36:03,984 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:36:03] "GET /api/query/progress/d1b1c8ed-5f03-404e-8cee-f5d71425e014 HTTP/1.1" 200 -
2025-04-10 01:36:04,226 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:36:04] "GET /api/query/progress/d1b1c8ed-5f03-404e-8cee-f5d71425e014 HTTP/1.1" 200 -
2025-04-10 01:36:04,643 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:36:04] "GET /api/query/progress/d1b1c8ed-5f03-404e-8cee-f5d71425e014 HTTP/1.1" 200 -
2025-04-10 01:36:05,180 - DEBUG - [llm_engine.py:107] - [SQL_GEN] Model response received in 4.17s
2025-04-10 01:36:05,181 - DEBUG - [llm_engine.py:116] - [SQL_GEN] Raw model response: 'Here's a query that will retrieve all columns from the `orders` table, and specifically select the `status` and `total_amount` columns for plotting purposes:

```sql
SELECT 
    orders.*,
    orders.status,
    orders.total_amount
FROM orders
```
This query returns all order records with their full details, highlighting `status` and `total_amount` which can be used for analysis or visualization.'
2025-04-10 01:36:05,182 - INFO - [llm_engine.py:119] - [SQL_GEN] Completion generation completed in 4.17s
2025-04-10 01:36:05,185 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:36:05,187 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-10 01:36:05,188 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-10 01:36:05,190 - INFO - [azure_client.py:171] - Extracted SQL query (76 chars) and explanation (309 chars)
2025-04-10 01:36:05,192 - INFO - [azure_client.py:124] - Generated SQL: SELECT 
    orders.*,
    orders.status,
    orders.total_amount
FROM orders
2025-04-10 01:36:05,194 - INFO - [azure_client.py:132] - SQL generation completed in 4.18s
2025-04-10 01:36:05,195 - INFO - [database.py:65] - Executing SQL query: SELECT 
    orders.*,
    orders.status,
    orders.total_amount
FROM orders
2025-04-10 01:36:05,197 - DEBUG - [database.py:76] - Query execution started
2025-04-10 01:36:05,199 - DEBUG - [database.py:81] - Query execution completed in 0.00s
2025-04-10 01:36:05,203 - INFO - [database.py:86] - Query returned 8 rows with 7 columns
2025-04-10 01:36:05,213 - DEBUG - [database.py:92] - Sample data (first 3 rows):
   order_id  customer_id  order_date     status  total_amount     status  total_amount
0         1            1  2023-04-01  completed       1299.99  completed       1299.99
1         2            2  2023-04-05  completed        879.98  completed        879.98
2         3            3  2023-04-10  completed         89.99  completed         89.99
2025-04-10 01:36:05,213 - INFO - [database.py:95] - Query processing completed in 0.02s
2025-04-10 01:36:05,215 - INFO - [sql_generator.py:348] - Analyzing query results for dashboard potential
2025-04-10 01:36:05,215 - INFO - [azure_client.py:197] - Dashboard analysis started for query: 'get me all from orders

Plot using status and total amount'
2025-04-10 01:36:05,216 - INFO - [llm_engine.py:56] - [DASHBOARD_ANALYSIS] Completion generation started
2025-04-10 01:36:05,216 - DEBUG - [llm_engine.py:87] - [DASHBOARD_ANALYSIS] Prompt: [{'role': 'system', 'content': 'You are a data visualization expert. Analyze the given query results and determine if they\'re suitable for a dashboard visualization.\n\nYour task is to:\n1. Analyze the columns and data\n2. Determine if the data is suitable for visualization (has numeric values and categorical data)\n3. If suitable, recommend the best chart type (bar, line, pie, etc.)\n4. Identify the best columns for X and Y axes (or equivalent based on chart type). Only one column for each axi... (truncated)
2025-04-10 01:36:05,217 - DEBUG - [llm_engine.py:96] - [DASHBOARD_ANALYSIS] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:36:05,430 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:36:05] "GET /api/query/progress/d1b1c8ed-5f03-404e-8cee-f5d71425e014 HTTP/1.1" 200 -
2025-04-10 01:36:05,666 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:36:05] "GET /api/query/progress/d1b1c8ed-5f03-404e-8cee-f5d71425e014 HTTP/1.1" 200 -
2025-04-10 01:36:06,068 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:36:06] "GET /api/query/progress/d1b1c8ed-5f03-404e-8cee-f5d71425e014 HTTP/1.1" 200 -
2025-04-10 01:36:06,845 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:36:06] "GET /api/query/progress/d1b1c8ed-5f03-404e-8cee-f5d71425e014 HTTP/1.1" 200 -
2025-04-10 01:36:07,090 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:36:07] "GET /api/query/progress/d1b1c8ed-5f03-404e-8cee-f5d71425e014 HTTP/1.1" 200 -
2025-04-10 01:36:07,504 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:36:07] "GET /api/query/progress/d1b1c8ed-5f03-404e-8cee-f5d71425e014 HTTP/1.1" 200 -
2025-04-10 01:36:07,744 - DEBUG - [llm_engine.py:107] - [DASHBOARD_ANALYSIS] Model response received in 2.53s
2025-04-10 01:36:07,744 - DEBUG - [llm_engine.py:116] - [DASHBOARD_ANALYSIS] Raw model response: '{
  "is_suitable": true,
  "reason": "The data contains a categorical column 'status' and a numeric column 'total_amount', making it suitable for visualizing order totals by status.",
  "chart_type": "bar",
  "x_axis": {
    "column": "status",
    "label": "Order Status"
  },
  "y_axis": {
    "column": "total_amount",
    "label": "Total Order Amount ($)"
  },
  "title": "Total Order Amount by Status"
}'
2025-04-10 01:36:07,746 - INFO - [llm_engine.py:119] - [DASHBOARD_ANALYSIS] Completion generation completed in 2.53s
2025-04-10 01:36:07,749 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:36:07,751 - INFO - [azure_client.py:255] - Dashboard analysis results: suitable=True
2025-04-10 01:36:07,756 - INFO - [azure_client.py:264] - Dashboard analysis completed in 2.54s
2025-04-10 01:36:07,759 - INFO - [sql_generator.py:366] - Dashboard analysis completed: suitable=True
2025-04-10 01:36:07,762 - INFO - [sql_generator.py:444] - SQL generation completed in 9.31s
2025-04-10 01:36:07,764 - INFO - [sql_generator.py:125] - Query processing completed in 9.32s
2025-04-10 01:36:08,276 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:36:08] "GET /api/query/progress/d1b1c8ed-5f03-404e-8cee-f5d71425e014 HTTP/1.1" 200 -
2025-04-10 01:43:10,240 - INFO - [sql_generator.py:37] - Processing query: 'get me count of orders, sum of total amount by customer id'
2025-04-10 01:43:10,241 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:43:10] "POST /api/query HTTP/1.1" 200 -
2025-04-10 01:43:10,242 - INFO - [intent_agent.py:27] - Intent detection started for query: 'get me count of orders, sum of total amount by customer id'
2025-04-10 01:43:10,243 - INFO - [intent_agent.py:38] - Using default intent 'data_retrieval' without calling LLM
2025-04-10 01:43:10,244 - INFO - [intent_agent.py:41] - Intent detection completed in 0.00s
2025-04-10 01:43:10,244 - INFO - [sql_generator.py:45] - Detected intent: data_retrieval
2025-04-10 01:43:10,245 - INFO - [sql_generator.py:141] - Starting SQL generation process
2025-04-10 01:43:10,245 - INFO - [database.py:44] - Attempting database connection
2025-04-10 01:43:10,246 - INFO - [database.py:48] - Database connection established in 0.00s
2025-04-10 01:43:10,247 - INFO - [table_agent.py:28] - Table selection started for query: 'get me count of orders, sum of total amount by customer id'
2025-04-10 01:43:10,247 - INFO - [table_agent.py:34] - Available tables (5): customers, products, orders, order_items, sales_metrics
2025-04-10 01:43:10,248 - INFO - [table_agent.py:64] - Sending request to AI model for table selection
2025-04-10 01:43:10,249 - INFO - [llm_engine.py:56] - [TABLE] Completion generation started
2025-04-10 01:43:10,250 - DEBUG - [llm_engine.py:87] - [TABLE] Prompt: [{'role': 'system', 'content': "You are a table selection agent for a Text-to-SQL system.\nYour job is to identify which database tables are most relevant to a user query.\nYou will be provided with table names and their descriptions.\nReturn ONLY the names of relevant tables, separated by commas. Be selective and choose\nonly the tables that are directly needed to answer the query. If you're unsure,\ninclude tables that might be related. Return only table names in your response."}, {'role': 'us... (truncated)
2025-04-10 01:43:10,250 - DEBUG - [llm_engine.py:96] - [TABLE] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:43:10,736 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:43:10] "GET /api/query/progress/fd416bcd-af1d-4edc-9530-333d70ef42d1 HTTP/1.1" 200 -
2025-04-10 01:43:11,502 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:43:11] "GET /api/query/progress/fd416bcd-af1d-4edc-9530-333d70ef42d1 HTTP/1.1" 200 -
2025-04-10 01:43:11,758 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:43:11] "GET /api/query/progress/fd416bcd-af1d-4edc-9530-333d70ef42d1 HTTP/1.1" 200 -
2025-04-10 01:43:12,164 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:43:12] "GET /api/query/progress/fd416bcd-af1d-4edc-9530-333d70ef42d1 HTTP/1.1" 200 -
2025-04-10 01:43:12,946 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:43:12] "GET /api/query/progress/fd416bcd-af1d-4edc-9530-333d70ef42d1 HTTP/1.1" 200 -
2025-04-10 01:43:13,201 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:43:13] "GET /api/query/progress/fd416bcd-af1d-4edc-9530-333d70ef42d1 HTTP/1.1" 200 -
2025-04-10 01:43:13,535 - DEBUG - [llm_engine.py:107] - [TABLE] Model response received in 3.28s
2025-04-10 01:43:13,535 - DEBUG - [llm_engine.py:116] - [TABLE] Raw model response: 'orders'
2025-04-10 01:43:13,536 - INFO - [llm_engine.py:119] - [TABLE] Completion generation completed in 3.29s
2025-04-10 01:43:13,536 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:43:13,537 - INFO - [table_agent.py:69] - Raw model response: 'orders'
2025-04-10 01:43:13,537 - INFO - [table_agent.py:90] - Table selection completed in 3.29s. Selected: orders
2025-04-10 01:43:13,538 - INFO - [column_agent.py:29] - Column pruning started for query: 'get me count of orders, sum of total amount by customer id'
2025-04-10 01:43:13,539 - INFO - [column_agent.py:30] - Processing tables: orders
2025-04-10 01:43:13,539 - INFO - [column_agent.py:38] - Only one table involved (orders). Skipping LLM call and including all columns.
2025-04-10 01:43:13,541 - INFO - [feedback_manager.py:265] - Stage 1: Vector search for 'get me count of orders, sum of total amount by cus...'
2025-04-10 01:43:13,569 - DEBUG - [feedback_manager.py:105] - Generated embedding in 0.03s with shape (384,)
2025-04-10 01:43:13,571 - ERROR - [vector_store.py:215] - Error searching similar vectors in collection query_embeddings: argument of type 'NoneType' is not iterable
Traceback (most recent call last):
  File "/home/vijay/text2sql/src/utils/vector_store.py", line 176, in search_similar
    if "id" not in output_fields and not any(f.lower() == 'id' for f in output_fields):
       ^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: argument of type 'NoneType' is not iterable
2025-04-10 01:43:13,572 - WARNING - [feedback_manager.py:288] - No candidates found from vector search, falling back to text-based search
2025-04-10 01:43:13,574 - INFO - [feedback_manager.py:402] - Found 1 similar queries using text-based search for 'get me count of orders, sum of total amount by cus...'
2025-04-10 01:43:13,574 - INFO - [sql_generator.py:280] - Found 1 similar queries with reranking
2025-04-10 01:43:13,574 - INFO - [sql_generator.py:302] - Added similar query #1 from feedback (score: 0.0000): Get me count of orders by customers along with the...
2025-04-10 01:43:13,575 - INFO - [azure_client.py:35] - SQL generation started for query: 'get me count of orders, sum of total amount by customer id'
2025-04-10 01:43:13,575 - INFO - [azure_client.py:69] - Including schema information (363 chars)
2025-04-10 01:43:13,575 - INFO - [azure_client.py:97] - Including 1 SQL examples from feedback similarity search
2025-04-10 01:43:13,576 - INFO - [azure_client.py:114] - PROMPT: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief explanation of your query\n\nRules:\n- Include table names and column references exactly as provided in the schema\n- Use appropriate SQL functions based on column data types\n- Consider NULL values in your conditions\n- Use table aliases for better readability when joining multiple tables\n- Add column aliases for computed values\n- Format the SQL query with proper indentation\n- If similar queries are provided, strictly use that as format or syntax\n- Return the SQL inside a code block tagged with ```sql\n\nExample output format:\nHere's a query that will [explanation]...\n\n```sql\nSELECT ...\nFROM ...\nWHERE ...\n```"}, {'role': 'user', 'content': "Here's the database schema:\nTable: orders\nDescription: Customer orders and transactions\nColumns: order_id (INTEGER) - Unique order identifier, customer_id (INTEGER) - Reference to customer who placed the order, order_date (TEXT) - Date when order was placed, status (TEXT) - Order status (pending, shipped, completed, etc.), total_amount (REAL) - Total order amount\nPrimary Key(s): order_id\n"}, {'role': 'user', 'content': 'Here are some similar queries that were previously successful:\nQuestion: Get me count of orders by customers along with their name\nSQL: SELECT \n    customers.first_name, \n    customers.last_name, \n    COUNT(orders.order_id) AS order_count\nFROM customers\nINNER JOIN orders ON customers.customer_id = orders.customer_id\nGROUP BY customers.customer_id, customers.first_name, customers.last_name\n\n'}, {'role': 'user', 'content': 'Convert this question to SQL: get me count of orders, sum of total amount by customer id'}]
2025-04-10 01:43:13,577 - INFO - [llm_engine.py:56] - [SQL_GEN] Completion generation started
2025-04-10 01:43:13,577 - DEBUG - [llm_engine.py:87] - [SQL_GEN] Prompt: [{'role': 'system', 'content': "You are an expert SQL assistant. Convert natural language questions into precise, executable SQL queries.\nYour task is to:\n1. Analyze the provided schema carefully, noting table relationships and column types\n2. Generate a SQL query that accurately answers the user's question\n3. Consider performance by selecting only necessary columns\n4. Use appropriate JOIN conditions based on primary/foreign key relationships or provided join conditions\n5. Include a brief ... (truncated)
2025-04-10 01:43:13,578 - DEBUG - [llm_engine.py:96] - [SQL_GEN] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:43:13,599 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:43:13] "GET /api/query/progress/fd416bcd-af1d-4edc-9530-333d70ef42d1 HTTP/1.1" 200 -
2025-04-10 01:43:14,384 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:43:14] "GET /api/query/progress/fd416bcd-af1d-4edc-9530-333d70ef42d1 HTTP/1.1" 200 -
2025-04-10 01:43:14,628 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:43:14] "GET /api/query/progress/fd416bcd-af1d-4edc-9530-333d70ef42d1 HTTP/1.1" 200 -
2025-04-10 01:43:15,037 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:43:15] "GET /api/query/progress/fd416bcd-af1d-4edc-9530-333d70ef42d1 HTTP/1.1" 200 -
2025-04-10 01:43:15,817 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:43:15] "GET /api/query/progress/fd416bcd-af1d-4edc-9530-333d70ef42d1 HTTP/1.1" 200 -
2025-04-10 01:43:16,084 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:43:16] "GET /api/query/progress/fd416bcd-af1d-4edc-9530-333d70ef42d1 HTTP/1.1" 200 -
2025-04-10 01:43:16,502 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:43:16] "GET /api/query/progress/fd416bcd-af1d-4edc-9530-333d70ef42d1 HTTP/1.1" 200 -
2025-04-10 01:43:18,985 - DEBUG - [llm_engine.py:107] - [SQL_GEN] Model response received in 5.41s
2025-04-10 01:43:18,986 - DEBUG - [llm_engine.py:116] - [SQL_GEN] Raw model response: 'Here's a query that will retrieve the count of orders and the sum of total order amounts grouped by each customer ID:

```sql
SELECT 
    o.customer_id, 
    COUNT(o.order_id) AS order_count, 
    SUM(o.total_amount) AS total_amount_sum
FROM orders o
GROUP BY o.customer_id
```'
2025-04-10 01:43:18,986 - INFO - [llm_engine.py:119] - [SQL_GEN] Completion generation completed in 5.41s
2025-04-10 01:43:18,986 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:43:18,987 - INFO - [azure_client.py:150] - Parsing SQL from model response
2025-04-10 01:43:18,988 - INFO - [azure_client.py:157] - Found SQL code block in response
2025-04-10 01:43:18,988 - INFO - [azure_client.py:171] - Extracted SQL query (147 chars) and explanation (117 chars)
2025-04-10 01:43:18,988 - INFO - [azure_client.py:124] - Generated SQL: SELECT 
    o.customer_id, 
    COUNT(o.order_id) AS order_count, 
    SUM(o.total_amount) AS total_amount_sum
FROM orders o
GROUP BY o.customer_id
2025-04-10 01:43:18,990 - INFO - [azure_client.py:132] - SQL generation completed in 5.41s
2025-04-10 01:43:18,990 - INFO - [database.py:65] - Executing SQL query: SELECT 
    o.customer_id, 
    COUNT(o.order_id) AS order_count, 
    SUM(o.total_amount) AS total_amount_sum
FROM orders o
GROUP BY o.customer_id
2025-04-10 01:43:18,991 - DEBUG - [database.py:76] - Query execution started
2025-04-10 01:43:18,992 - DEBUG - [database.py:81] - Query execution completed in 0.00s
2025-04-10 01:43:18,993 - INFO - [database.py:86] - Query returned 5 rows with 3 columns
2025-04-10 01:43:18,996 - DEBUG - [database.py:92] - Sample data (first 3 rows):
   customer_id  order_count  total_amount_sum
0            1            2           1559.97
1            2            2           1079.97
2            3            2            229.97
2025-04-10 01:43:18,997 - INFO - [database.py:95] - Query processing completed in 0.01s
2025-04-10 01:43:18,998 - INFO - [sql_generator.py:348] - Analyzing query results for dashboard potential
2025-04-10 01:43:18,999 - INFO - [azure_client.py:197] - Dashboard analysis started for query: 'get me count of orders, sum of total amount by customer id'
2025-04-10 01:43:19,000 - INFO - [llm_engine.py:56] - [DASHBOARD_ANALYSIS] Completion generation started
2025-04-10 01:43:19,000 - DEBUG - [llm_engine.py:87] - [DASHBOARD_ANALYSIS] Prompt: [{'role': 'system', 'content': 'You are a data visualization expert. Analyze the given query results and determine if they\'re suitable for a dashboard visualization.\n\nYour task is to:\n1. Analyze the columns and data\n2. Determine if the data is suitable for visualization (has numeric values and categorical data)\n3. If suitable, recommend the best chart type (bar, line, pie, etc.)\n4. Identify the best columns for X and Y axes (or equivalent based on chart type). Only one column for each axi... (truncated)
2025-04-10 01:43:19,000 - DEBUG - [llm_engine.py:96] - [DASHBOARD_ANALYSIS] Sending request to openrouter/quasar-alpha with max_tokens=2000, temperature=0.7
2025-04-10 01:43:19,135 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:43:19] "GET /api/query/progress/fd416bcd-af1d-4edc-9530-333d70ef42d1 HTTP/1.1" 200 -
2025-04-10 01:43:19,394 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:43:19] "GET /api/query/progress/fd416bcd-af1d-4edc-9530-333d70ef42d1 HTTP/1.1" 200 -
2025-04-10 01:43:19,838 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:43:19] "GET /api/query/progress/fd416bcd-af1d-4edc-9530-333d70ef42d1 HTTP/1.1" 200 -
2025-04-10 01:43:20,651 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:43:20] "GET /api/query/progress/fd416bcd-af1d-4edc-9530-333d70ef42d1 HTTP/1.1" 200 -
2025-04-10 01:43:20,923 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:43:20] "GET /api/query/progress/fd416bcd-af1d-4edc-9530-333d70ef42d1 HTTP/1.1" 200 -
2025-04-10 01:43:21,361 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:43:21] "GET /api/query/progress/fd416bcd-af1d-4edc-9530-333d70ef42d1 HTTP/1.1" 200 -
2025-04-10 01:43:22,148 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:43:22] "GET /api/query/progress/fd416bcd-af1d-4edc-9530-333d70ef42d1 HTTP/1.1" 200 -
2025-04-10 01:43:22,154 - DEBUG - [llm_engine.py:107] - [DASHBOARD_ANALYSIS] Model response received in 3.15s
2025-04-10 01:43:22,154 - DEBUG - [llm_engine.py:116] - [DASHBOARD_ANALYSIS] Raw model response: '{
  "is_suitable": true,
  "reason": "The data includes categorical customer IDs and two numeric metrics (order count and total amount sum), making it suitable for visualization comparing customers' order volumes or revenue.",
  "chart_type": "bar",
  "x_axis": {
    "column": "customer_id",
    "label": "Customer ID"
  },
  "y_axis": {
    "column": "total_amount_sum",
    "label": "Total Amount Spent"
  },
  "title": "Total Amount Spent by Customer"
}'
2025-04-10 01:43:22,155 - INFO - [llm_engine.py:119] - [DASHBOARD_ANALYSIS] Completion generation completed in 3.16s
2025-04-10 01:43:22,156 - INFO - [llm_engine.py:120] - **************************
2025-04-10 01:43:22,157 - INFO - [azure_client.py:255] - Dashboard analysis results: suitable=True
2025-04-10 01:43:22,157 - INFO - [azure_client.py:264] - Dashboard analysis completed in 3.16s
2025-04-10 01:43:22,158 - INFO - [sql_generator.py:366] - Dashboard analysis completed: suitable=True
2025-04-10 01:43:22,159 - INFO - [sql_generator.py:444] - SQL generation completed in 11.91s
2025-04-10 01:43:22,159 - INFO - [sql_generator.py:125] - Query processing completed in 11.92s
2025-04-10 01:43:22,391 - INFO - [_internal.py:224] - 127.0.0.1 - - [10/Apr/2025 01:43:22] "GET /api/query/progress/fd416bcd-af1d-4edc-9530-333d70ef42d1 HTTP/1.1" 200 -
